(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const SV="modulepreload",IV=function(t){return"/"+t},bU={},RV=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=IV(s),s in bU)return;bU[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const u=i[c];if(u.href===s&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const A=document.createElement("link");if(A.rel=a?"stylesheet":SV,a||(A.as="script",A.crossOrigin=""),A.href=s,document.head.appendChild(A),a)return new Promise((c,u)=>{A.addEventListener("load",c),A.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};var UV=Object.defineProperty,FV=(t,e,r)=>e in t?UV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,De=(t,e,r)=>(FV(t,typeof e!="symbol"?e+"":e,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();var Oo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kV(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var Q4={exports:{}},Ub={},H4={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=Symbol.for("react.element"),LV=Symbol.for("react.portal"),PV=Symbol.for("react.fragment"),OV=Symbol.for("react.strict_mode"),DV=Symbol.for("react.profiler"),NV=Symbol.for("react.provider"),QV=Symbol.for("react.context"),HV=Symbol.for("react.forward_ref"),jV=Symbol.for("react.suspense"),zV=Symbol.for("react.memo"),GV=Symbol.for("react.lazy"),_U=Symbol.iterator;function VV(t){return t===null||typeof t!="object"?null:(t=_U&&t[_U]||t["@@iterator"],typeof t=="function"?t:null)}var j4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z4=Object.assign,G4={};function Qf(t,e,r){this.props=t,this.context=e,this.refs=G4,this.updater=r||j4}Qf.prototype.isReactComponent={};Qf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V4(){}V4.prototype=Qf.prototype;function t2(t,e,r){this.props=t,this.context=e,this.refs=G4,this.updater=r||j4}var r2=t2.prototype=new V4;r2.constructor=t2;z4(r2,Qf.prototype);r2.isPureReactComponent=!0;var xU=Array.isArray,W4=Object.prototype.hasOwnProperty,n2={current:null},K4={key:!0,ref:!0,__self:!0,__source:!0};function Y4(t,e,r){var n,i={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)W4.call(e,n)&&!K4.hasOwnProperty(n)&&(i[n]=e[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var l=Array(o),A=0;A<o;A++)l[A]=arguments[A+2];i.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:a0,type:t,key:s,ref:a,props:i,_owner:n2.current}}function WV(t,e){return{$$typeof:a0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function i2(t){return typeof t=="object"&&t!==null&&t.$$typeof===a0}function KV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var EU=/\/+/g;function px(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KV(""+t.key):e.toString(36)}function $y(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case a0:case LV:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+px(a,0):n,xU(i)?(r="",t!=null&&(r=t.replace(EU,"$&/")+"/"),$y(i,e,r,"",function(A){return A})):i!=null&&(i2(i)&&(i=WV(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(EU,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",xU(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+px(s,o);a+=$y(s,e,r,l,i)}else if(l=VV(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+px(s,o++),a+=$y(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function N0(t,e,r){if(t==null)return t;var n=[],i=0;return $y(t,n,"","",function(s){return e.call(r,s,i++)}),n}function YV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Oi={current:null},ew={transition:null},XV={ReactCurrentDispatcher:Oi,ReactCurrentBatchConfig:ew,ReactCurrentOwner:n2};function X4(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:N0,forEach:function(t,e,r){N0(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return N0(t,function(){e++}),e},toArray:function(t){return N0(t,function(e){return e})||[]},only:function(t){if(!i2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pt.Component=Qf;Pt.Fragment=PV;Pt.Profiler=DV;Pt.PureComponent=t2;Pt.StrictMode=OV;Pt.Suspense=jV;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XV;Pt.act=X4;Pt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=z4({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=n2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)W4.call(e,l)&&!K4.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var A=0;A<l;A++)o[A]=arguments[A+2];n.children=o}return{$$typeof:a0,type:t.type,key:i,ref:s,props:n,_owner:a}};Pt.createContext=function(t){return t={$$typeof:QV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NV,_context:t},t.Consumer=t};Pt.createElement=Y4;Pt.createFactory=function(t){var e=Y4.bind(null,t);return e.type=t,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(t){return{$$typeof:HV,render:t}};Pt.isValidElement=i2;Pt.lazy=function(t){return{$$typeof:GV,_payload:{_status:-1,_result:t},_init:YV}};Pt.memo=function(t,e){return{$$typeof:zV,type:t,compare:e===void 0?null:e}};Pt.startTransition=function(t){var e=ew.transition;ew.transition={};try{t()}finally{ew.transition=e}};Pt.unstable_act=X4;Pt.useCallback=function(t,e){return Oi.current.useCallback(t,e)};Pt.useContext=function(t){return Oi.current.useContext(t)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(t){return Oi.current.useDeferredValue(t)};Pt.useEffect=function(t,e){return Oi.current.useEffect(t,e)};Pt.useId=function(){return Oi.current.useId()};Pt.useImperativeHandle=function(t,e,r){return Oi.current.useImperativeHandle(t,e,r)};Pt.useInsertionEffect=function(t,e){return Oi.current.useInsertionEffect(t,e)};Pt.useLayoutEffect=function(t,e){return Oi.current.useLayoutEffect(t,e)};Pt.useMemo=function(t,e){return Oi.current.useMemo(t,e)};Pt.useReducer=function(t,e,r){return Oi.current.useReducer(t,e,r)};Pt.useRef=function(t){return Oi.current.useRef(t)};Pt.useState=function(t){return Oi.current.useState(t)};Pt.useSyncExternalStore=function(t,e,r){return Oi.current.useSyncExternalStore(t,e,r)};Pt.useTransition=function(){return Oi.current.useTransition()};Pt.version="18.3.1";H4.exports=Pt;var _e=H4.exports;const X=iA(_e);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZV=_e,JV=Symbol.for("react.element"),qV=Symbol.for("react.fragment"),$V=Object.prototype.hasOwnProperty,e7=ZV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,t7={key:!0,ref:!0,__self:!0,__source:!0};function Z4(t,e,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)$V.call(e,n)&&!t7.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:JV,type:t,key:s,ref:a,props:i,_owner:e7.current}}Ub.Fragment=qV;Ub.jsx=Z4;Ub.jsxs=Z4;Q4.exports=Ub;var O=Q4.exports,J4={exports:{}};const r7={},n7=Object.freeze(Object.defineProperty({__proto__:null,default:r7},Symbol.toStringTag,{value:"Module"})),i7=kV(n7);(function(t){(function(e,r){function n(w,b){if(!w)throw new Error(b||"Assertion failed")}function i(w,b){w.super_=b;var S=function(){};S.prototype=b.prototype,w.prototype=new S,w.prototype.constructor=w}function s(w,b,S){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((b==="le"||b==="be")&&(S=b,b=10),this._init(w||0,b||10,S||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=i7.Buffer}catch{}s.isBN=function(w){return w instanceof s?!0:w!==null&&typeof w=="object"&&w.constructor.wordSize===s.wordSize&&Array.isArray(w.words)},s.max=function(w,b){return w.cmp(b)>0?w:b},s.min=function(w,b){return w.cmp(b)<0?w:b},s.prototype._init=function(w,b,S){if(typeof w=="number")return this._initNumber(w,b,S);if(typeof w=="object")return this._initArray(w,b,S);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),w=w.toString().replace(/\s+/g,"");var F=0;w[0]==="-"&&(F++,this.negative=1),F<w.length&&(b===16?this._parseHex(w,F,S):(this._parseBase(w,b,F),S==="le"&&this._initArray(this.toArray(),b,S)))},s.prototype._initNumber=function(w,b,S){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[w&67108863],this.length=1):w<4503599627370496?(this.words=[w&67108863,w/67108864&67108863],this.length=2):(n(w<9007199254740992),this.words=[w&67108863,w/67108864&67108863,1],this.length=3),S==="le"&&this._initArray(this.toArray(),b,S)},s.prototype._initArray=function(w,b,S){if(n(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var k,Q,z=0;if(S==="be")for(F=w.length-1,k=0;F>=0;F-=3)Q=w[F]|w[F-1]<<8|w[F-2]<<16,this.words[k]|=Q<<z&67108863,this.words[k+1]=Q>>>26-z&67108863,z+=24,z>=26&&(z-=26,k++);else if(S==="le")for(F=0,k=0;F<w.length;F+=3)Q=w[F]|w[F+1]<<8|w[F+2]<<16,this.words[k]|=Q<<z&67108863,this.words[k+1]=Q>>>26-z&67108863,z+=24,z>=26&&(z-=26,k++);return this._strip()};function o(w,b){var S=w.charCodeAt(b);if(S>=48&&S<=57)return S-48;if(S>=65&&S<=70)return S-55;if(S>=97&&S<=102)return S-87;n(!1,"Invalid character in "+w)}function l(w,b,S){var F=o(w,S);return S-1>=b&&(F|=o(w,S-1)<<4),F}s.prototype._parseHex=function(w,b,S){this.length=Math.ceil((w.length-b)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var k=0,Q=0,z;if(S==="be")for(F=w.length-1;F>=b;F-=2)z=l(w,b,F)<<k,this.words[Q]|=z&67108863,k>=18?(k-=18,Q+=1,this.words[Q]|=z>>>26):k+=8;else{var j=w.length-b;for(F=j%2===0?b+1:b;F<w.length;F+=2)z=l(w,b,F)<<k,this.words[Q]|=z&67108863,k>=18?(k-=18,Q+=1,this.words[Q]|=z>>>26):k+=8}this._strip()};function A(w,b,S,F){for(var k=0,Q=0,z=Math.min(w.length,S),j=b;j<z;j++){var T=w.charCodeAt(j)-48;k*=F,T>=49?Q=T-49+10:T>=17?Q=T-17+10:Q=T,n(T>=0&&Q<F,"Invalid character"),k+=Q}return k}s.prototype._parseBase=function(w,b,S){this.words=[0],this.length=1;for(var F=0,k=1;k<=67108863;k*=b)F++;F--,k=k/b|0;for(var Q=w.length-S,z=Q%F,j=Math.min(Q,Q-z)+S,T=0,H=S;H<j;H+=F)T=A(w,H,H+F,b),this.imuln(k),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T);if(z!==0){var me=1;for(T=A(w,H,w.length,b),H=0;H<z;H++)me*=b;this.imuln(me),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T)}this._strip()},s.prototype.copy=function(w){w.words=new Array(this.length);for(var b=0;b<this.length;b++)w.words[b]=this.words[b];w.length=this.length,w.negative=this.negative,w.red=this.red};function c(w,b){w.words=b.words,w.length=b.length,w.negative=b.negative,w.red=b.red}if(s.prototype._move=function(w){c(w,this)},s.prototype.clone=function(){var w=new s(null);return this.copy(w),w},s.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(w,b){w=w||10,b=b|0||1;var S;if(w===16||w==="hex"){S="";for(var F=0,k=0,Q=0;Q<this.length;Q++){var z=this.words[Q],j=((z<<F|k)&16777215).toString(16);k=z>>>24-F&16777215,F+=2,F>=26&&(F-=26,Q--),k!==0||Q!==this.length-1?S=h[6-j.length]+j+S:S=j+S}for(k!==0&&(S=k.toString(16)+S);S.length%b!==0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}if(w===(w|0)&&w>=2&&w<=36){var T=d[w],H=f[w];S="";var me=this.clone();for(me.negative=0;!me.isZero();){var ee=me.modrn(H).toString(w);me=me.idivn(H),me.isZero()?S=ee+S:S=h[T-ee.length]+ee+S}for(this.isZero()&&(S="0"+S);S.length%b!==0;)S="0"+S;return this.negative!==0&&(S="-"+S),S}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=this.words[1]*67108864:this.length===3&&this.words[2]===1?w+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(w,b){return this.toArrayLike(a,w,b)}),s.prototype.toArray=function(w,b){return this.toArrayLike(Array,w,b)};var m=function(w,b){return w.allocUnsafe?w.allocUnsafe(b):new w(b)};s.prototype.toArrayLike=function(w,b,S){this._strip();var F=this.byteLength(),k=S||Math.max(1,F);n(F<=k,"byte array longer than desired length"),n(k>0,"Requested array length <= 0");var Q=m(w,k),z=b==="le"?"LE":"BE";return this["_toArrayLike"+z](Q,F),Q},s.prototype._toArrayLikeLE=function(w,b){for(var S=0,F=0,k=0,Q=0;k<this.length;k++){var z=this.words[k]<<Q|F;w[S++]=z&255,S<w.length&&(w[S++]=z>>8&255),S<w.length&&(w[S++]=z>>16&255),Q===6?(S<w.length&&(w[S++]=z>>24&255),F=0,Q=0):(F=z>>>24,Q+=2)}if(S<w.length)for(w[S++]=F;S<w.length;)w[S++]=0},s.prototype._toArrayLikeBE=function(w,b){for(var S=w.length-1,F=0,k=0,Q=0;k<this.length;k++){var z=this.words[k]<<Q|F;w[S--]=z&255,S>=0&&(w[S--]=z>>8&255),S>=0&&(w[S--]=z>>16&255),Q===6?(S>=0&&(w[S--]=z>>24&255),F=0,Q=0):(F=z>>>24,Q+=2)}if(S>=0)for(w[S--]=F;S>=0;)w[S--]=0},Math.clz32?s.prototype._countBits=function(w){return 32-Math.clz32(w)}:s.prototype._countBits=function(w){var b=w,S=0;return b>=4096&&(S+=13,b>>>=13),b>=64&&(S+=7,b>>>=7),b>=8&&(S+=4,b>>>=4),b>=2&&(S+=2,b>>>=2),S+b},s.prototype._zeroBits=function(w){if(w===0)return 26;var b=w,S=0;return b&8191||(S+=13,b>>>=13),b&127||(S+=7,b>>>=7),b&15||(S+=4,b>>>=4),b&3||(S+=2,b>>>=2),b&1||S++,S},s.prototype.bitLength=function(){var w=this.words[this.length-1],b=this._countBits(w);return(this.length-1)*26+b};function g(w){for(var b=new Array(w.bitLength()),S=0;S<b.length;S++){var F=S/26|0,k=S%26;b[S]=w.words[F]>>>k&1}return b}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,b=0;b<this.length;b++){var S=this._zeroBits(this.words[b]);if(w+=S,S!==26)break}return w},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},s.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var b=0;b<w.length;b++)this.words[b]=this.words[b]|w.words[b];return this._strip()},s.prototype.ior=function(w){return n((this.negative|w.negative)===0),this.iuor(w)},s.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},s.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},s.prototype.iuand=function(w){var b;this.length>w.length?b=w:b=this;for(var S=0;S<b.length;S++)this.words[S]=this.words[S]&w.words[S];return this.length=b.length,this._strip()},s.prototype.iand=function(w){return n((this.negative|w.negative)===0),this.iuand(w)},s.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},s.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},s.prototype.iuxor=function(w){var b,S;this.length>w.length?(b=this,S=w):(b=w,S=this);for(var F=0;F<S.length;F++)this.words[F]=b.words[F]^S.words[F];if(this!==b)for(;F<b.length;F++)this.words[F]=b.words[F];return this.length=b.length,this._strip()},s.prototype.ixor=function(w){return n((this.negative|w.negative)===0),this.iuxor(w)},s.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},s.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},s.prototype.inotn=function(w){n(typeof w=="number"&&w>=0);var b=Math.ceil(w/26)|0,S=w%26;this._expand(b),S>0&&b--;for(var F=0;F<b;F++)this.words[F]=~this.words[F]&67108863;return S>0&&(this.words[F]=~this.words[F]&67108863>>26-S),this._strip()},s.prototype.notn=function(w){return this.clone().inotn(w)},s.prototype.setn=function(w,b){n(typeof w=="number"&&w>=0);var S=w/26|0,F=w%26;return this._expand(S+1),b?this.words[S]=this.words[S]|1<<F:this.words[S]=this.words[S]&~(1<<F),this._strip()},s.prototype.iadd=function(w){var b;if(this.negative!==0&&w.negative===0)return this.negative=0,b=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,b=this.isub(w),w.negative=1,b._normSign();var S,F;this.length>w.length?(S=this,F=w):(S=w,F=this);for(var k=0,Q=0;Q<F.length;Q++)b=(S.words[Q]|0)+(F.words[Q]|0)+k,this.words[Q]=b&67108863,k=b>>>26;for(;k!==0&&Q<S.length;Q++)b=(S.words[Q]|0)+k,this.words[Q]=b&67108863,k=b>>>26;if(this.length=S.length,k!==0)this.words[this.length]=k,this.length++;else if(S!==this)for(;Q<S.length;Q++)this.words[Q]=S.words[Q];return this},s.prototype.add=function(w){var b;return w.negative!==0&&this.negative===0?(w.negative=0,b=this.sub(w),w.negative^=1,b):w.negative===0&&this.negative!==0?(this.negative=0,b=w.sub(this),this.negative=1,b):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},s.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var b=this.iadd(w);return w.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var S=this.cmp(w);if(S===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,k;S>0?(F=this,k=w):(F=w,k=this);for(var Q=0,z=0;z<k.length;z++)b=(F.words[z]|0)-(k.words[z]|0)+Q,Q=b>>26,this.words[z]=b&67108863;for(;Q!==0&&z<F.length;z++)b=(F.words[z]|0)+Q,Q=b>>26,this.words[z]=b&67108863;if(Q===0&&z<F.length&&F!==this)for(;z<F.length;z++)this.words[z]=F.words[z];return this.length=Math.max(this.length,z),F!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(w){return this.clone().isub(w)};function p(w,b,S){S.negative=b.negative^w.negative;var F=w.length+b.length|0;S.length=F,F=F-1|0;var k=w.words[0]|0,Q=b.words[0]|0,z=k*Q,j=z&67108863,T=z/67108864|0;S.words[0]=j;for(var H=1;H<F;H++){for(var me=T>>>26,ee=T&67108863,U=Math.min(H,b.length-1),se=Math.max(0,H-w.length+1);se<=U;se++){var le=H-se|0;k=w.words[le]|0,Q=b.words[se]|0,z=k*Q+ee,me+=z/67108864|0,ee=z&67108863}S.words[H]=ee|0,T=me|0}return T!==0?S.words[H]=T|0:S.length--,S._strip()}var v=function(w,b,S){var F=w.words,k=b.words,Q=S.words,z=0,j,T,H,me=F[0]|0,ee=me&8191,U=me>>>13,se=F[1]|0,le=se&8191,Ae=se>>>13,ge=F[2]|0,ne=ge&8191,de=ge>>>13,Te=F[3]|0,re=Te&8191,N=Te>>>13,he=F[4]|0,oe=he&8191,Z=he>>>13,$=F[5]|0,ce=$&8191,W=$>>>13,V=F[6]|0,J=V&8191,K=V>>>13,fe=F[7]|0,ie=fe&8191,Ee=fe>>>13,C=F[8]|0,P=C&8191,G=C>>>13,te=F[9]|0,ae=te&8191,pe=te>>>13,ve=k[0]|0,Ie=ve&8191,ke=ve>>>13,Le=k[1]|0,Oe=Le&8191,ue=Le>>>13,Qe=k[2]|0,xe=Qe&8191,Ce=Qe>>>13,Fe=k[3]|0,Re=Fe&8191,ot=Fe>>>13,Kt=k[4]|0,bt=Kt&8191,it=Kt>>>13,Rr=k[5]|0,Ct=Rr&8191,tr=Rr>>>13,Vs=k[6]|0,Nt=Vs&8191,er=Vs>>>13,Ws=k[7]|0,Yt=Ws&8191,Vt=Ws>>>13,Ks=k[8]|0,Xt=Ks&8191,rr=Ks>>>13,us=k[9]|0,ar=us&8191,or=us>>>13;S.negative=w.negative^b.negative,S.length=19,j=Math.imul(ee,Ie),T=Math.imul(ee,ke),T=T+Math.imul(U,Ie)|0,H=Math.imul(U,ke);var Ei=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(Ei>>>26)|0,Ei&=67108863,j=Math.imul(le,Ie),T=Math.imul(le,ke),T=T+Math.imul(Ae,Ie)|0,H=Math.imul(Ae,ke),j=j+Math.imul(ee,Oe)|0,T=T+Math.imul(ee,ue)|0,T=T+Math.imul(U,Oe)|0,H=H+Math.imul(U,ue)|0;var q=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(q>>>26)|0,q&=67108863,j=Math.imul(ne,Ie),T=Math.imul(ne,ke),T=T+Math.imul(de,Ie)|0,H=Math.imul(de,ke),j=j+Math.imul(le,Oe)|0,T=T+Math.imul(le,ue)|0,T=T+Math.imul(Ae,Oe)|0,H=H+Math.imul(Ae,ue)|0,j=j+Math.imul(ee,xe)|0,T=T+Math.imul(ee,Ce)|0,T=T+Math.imul(U,xe)|0,H=H+Math.imul(U,Ce)|0;var we=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(we>>>26)|0,we&=67108863,j=Math.imul(re,Ie),T=Math.imul(re,ke),T=T+Math.imul(N,Ie)|0,H=Math.imul(N,ke),j=j+Math.imul(ne,Oe)|0,T=T+Math.imul(ne,ue)|0,T=T+Math.imul(de,Oe)|0,H=H+Math.imul(de,ue)|0,j=j+Math.imul(le,xe)|0,T=T+Math.imul(le,Ce)|0,T=T+Math.imul(Ae,xe)|0,H=H+Math.imul(Ae,Ce)|0,j=j+Math.imul(ee,Re)|0,T=T+Math.imul(ee,ot)|0,T=T+Math.imul(U,Re)|0,H=H+Math.imul(U,ot)|0;var Be=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(Be>>>26)|0,Be&=67108863,j=Math.imul(oe,Ie),T=Math.imul(oe,ke),T=T+Math.imul(Z,Ie)|0,H=Math.imul(Z,ke),j=j+Math.imul(re,Oe)|0,T=T+Math.imul(re,ue)|0,T=T+Math.imul(N,Oe)|0,H=H+Math.imul(N,ue)|0,j=j+Math.imul(ne,xe)|0,T=T+Math.imul(ne,Ce)|0,T=T+Math.imul(de,xe)|0,H=H+Math.imul(de,Ce)|0,j=j+Math.imul(le,Re)|0,T=T+Math.imul(le,ot)|0,T=T+Math.imul(Ae,Re)|0,H=H+Math.imul(Ae,ot)|0,j=j+Math.imul(ee,bt)|0,T=T+Math.imul(ee,it)|0,T=T+Math.imul(U,bt)|0,H=H+Math.imul(U,it)|0;var Me=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(Me>>>26)|0,Me&=67108863,j=Math.imul(ce,Ie),T=Math.imul(ce,ke),T=T+Math.imul(W,Ie)|0,H=Math.imul(W,ke),j=j+Math.imul(oe,Oe)|0,T=T+Math.imul(oe,ue)|0,T=T+Math.imul(Z,Oe)|0,H=H+Math.imul(Z,ue)|0,j=j+Math.imul(re,xe)|0,T=T+Math.imul(re,Ce)|0,T=T+Math.imul(N,xe)|0,H=H+Math.imul(N,Ce)|0,j=j+Math.imul(ne,Re)|0,T=T+Math.imul(ne,ot)|0,T=T+Math.imul(de,Re)|0,H=H+Math.imul(de,ot)|0,j=j+Math.imul(le,bt)|0,T=T+Math.imul(le,it)|0,T=T+Math.imul(Ae,bt)|0,H=H+Math.imul(Ae,it)|0,j=j+Math.imul(ee,Ct)|0,T=T+Math.imul(ee,tr)|0,T=T+Math.imul(U,Ct)|0,H=H+Math.imul(U,tr)|0;var ye=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(ye>>>26)|0,ye&=67108863,j=Math.imul(J,Ie),T=Math.imul(J,ke),T=T+Math.imul(K,Ie)|0,H=Math.imul(K,ke),j=j+Math.imul(ce,Oe)|0,T=T+Math.imul(ce,ue)|0,T=T+Math.imul(W,Oe)|0,H=H+Math.imul(W,ue)|0,j=j+Math.imul(oe,xe)|0,T=T+Math.imul(oe,Ce)|0,T=T+Math.imul(Z,xe)|0,H=H+Math.imul(Z,Ce)|0,j=j+Math.imul(re,Re)|0,T=T+Math.imul(re,ot)|0,T=T+Math.imul(N,Re)|0,H=H+Math.imul(N,ot)|0,j=j+Math.imul(ne,bt)|0,T=T+Math.imul(ne,it)|0,T=T+Math.imul(de,bt)|0,H=H+Math.imul(de,it)|0,j=j+Math.imul(le,Ct)|0,T=T+Math.imul(le,tr)|0,T=T+Math.imul(Ae,Ct)|0,H=H+Math.imul(Ae,tr)|0,j=j+Math.imul(ee,Nt)|0,T=T+Math.imul(ee,er)|0,T=T+Math.imul(U,Nt)|0,H=H+Math.imul(U,er)|0;var Pe=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,j=Math.imul(ie,Ie),T=Math.imul(ie,ke),T=T+Math.imul(Ee,Ie)|0,H=Math.imul(Ee,ke),j=j+Math.imul(J,Oe)|0,T=T+Math.imul(J,ue)|0,T=T+Math.imul(K,Oe)|0,H=H+Math.imul(K,ue)|0,j=j+Math.imul(ce,xe)|0,T=T+Math.imul(ce,Ce)|0,T=T+Math.imul(W,xe)|0,H=H+Math.imul(W,Ce)|0,j=j+Math.imul(oe,Re)|0,T=T+Math.imul(oe,ot)|0,T=T+Math.imul(Z,Re)|0,H=H+Math.imul(Z,ot)|0,j=j+Math.imul(re,bt)|0,T=T+Math.imul(re,it)|0,T=T+Math.imul(N,bt)|0,H=H+Math.imul(N,it)|0,j=j+Math.imul(ne,Ct)|0,T=T+Math.imul(ne,tr)|0,T=T+Math.imul(de,Ct)|0,H=H+Math.imul(de,tr)|0,j=j+Math.imul(le,Nt)|0,T=T+Math.imul(le,er)|0,T=T+Math.imul(Ae,Nt)|0,H=H+Math.imul(Ae,er)|0,j=j+Math.imul(ee,Yt)|0,T=T+Math.imul(ee,Vt)|0,T=T+Math.imul(U,Yt)|0,H=H+Math.imul(U,Vt)|0;var Ze=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,j=Math.imul(P,Ie),T=Math.imul(P,ke),T=T+Math.imul(G,Ie)|0,H=Math.imul(G,ke),j=j+Math.imul(ie,Oe)|0,T=T+Math.imul(ie,ue)|0,T=T+Math.imul(Ee,Oe)|0,H=H+Math.imul(Ee,ue)|0,j=j+Math.imul(J,xe)|0,T=T+Math.imul(J,Ce)|0,T=T+Math.imul(K,xe)|0,H=H+Math.imul(K,Ce)|0,j=j+Math.imul(ce,Re)|0,T=T+Math.imul(ce,ot)|0,T=T+Math.imul(W,Re)|0,H=H+Math.imul(W,ot)|0,j=j+Math.imul(oe,bt)|0,T=T+Math.imul(oe,it)|0,T=T+Math.imul(Z,bt)|0,H=H+Math.imul(Z,it)|0,j=j+Math.imul(re,Ct)|0,T=T+Math.imul(re,tr)|0,T=T+Math.imul(N,Ct)|0,H=H+Math.imul(N,tr)|0,j=j+Math.imul(ne,Nt)|0,T=T+Math.imul(ne,er)|0,T=T+Math.imul(de,Nt)|0,H=H+Math.imul(de,er)|0,j=j+Math.imul(le,Yt)|0,T=T+Math.imul(le,Vt)|0,T=T+Math.imul(Ae,Yt)|0,H=H+Math.imul(Ae,Vt)|0,j=j+Math.imul(ee,Xt)|0,T=T+Math.imul(ee,rr)|0,T=T+Math.imul(U,Xt)|0,H=H+Math.imul(U,rr)|0;var qe=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(qe>>>26)|0,qe&=67108863,j=Math.imul(ae,Ie),T=Math.imul(ae,ke),T=T+Math.imul(pe,Ie)|0,H=Math.imul(pe,ke),j=j+Math.imul(P,Oe)|0,T=T+Math.imul(P,ue)|0,T=T+Math.imul(G,Oe)|0,H=H+Math.imul(G,ue)|0,j=j+Math.imul(ie,xe)|0,T=T+Math.imul(ie,Ce)|0,T=T+Math.imul(Ee,xe)|0,H=H+Math.imul(Ee,Ce)|0,j=j+Math.imul(J,Re)|0,T=T+Math.imul(J,ot)|0,T=T+Math.imul(K,Re)|0,H=H+Math.imul(K,ot)|0,j=j+Math.imul(ce,bt)|0,T=T+Math.imul(ce,it)|0,T=T+Math.imul(W,bt)|0,H=H+Math.imul(W,it)|0,j=j+Math.imul(oe,Ct)|0,T=T+Math.imul(oe,tr)|0,T=T+Math.imul(Z,Ct)|0,H=H+Math.imul(Z,tr)|0,j=j+Math.imul(re,Nt)|0,T=T+Math.imul(re,er)|0,T=T+Math.imul(N,Nt)|0,H=H+Math.imul(N,er)|0,j=j+Math.imul(ne,Yt)|0,T=T+Math.imul(ne,Vt)|0,T=T+Math.imul(de,Yt)|0,H=H+Math.imul(de,Vt)|0,j=j+Math.imul(le,Xt)|0,T=T+Math.imul(le,rr)|0,T=T+Math.imul(Ae,Xt)|0,H=H+Math.imul(Ae,rr)|0,j=j+Math.imul(ee,ar)|0,T=T+Math.imul(ee,or)|0,T=T+Math.imul(U,ar)|0,H=H+Math.imul(U,or)|0;var tt=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(tt>>>26)|0,tt&=67108863,j=Math.imul(ae,Oe),T=Math.imul(ae,ue),T=T+Math.imul(pe,Oe)|0,H=Math.imul(pe,ue),j=j+Math.imul(P,xe)|0,T=T+Math.imul(P,Ce)|0,T=T+Math.imul(G,xe)|0,H=H+Math.imul(G,Ce)|0,j=j+Math.imul(ie,Re)|0,T=T+Math.imul(ie,ot)|0,T=T+Math.imul(Ee,Re)|0,H=H+Math.imul(Ee,ot)|0,j=j+Math.imul(J,bt)|0,T=T+Math.imul(J,it)|0,T=T+Math.imul(K,bt)|0,H=H+Math.imul(K,it)|0,j=j+Math.imul(ce,Ct)|0,T=T+Math.imul(ce,tr)|0,T=T+Math.imul(W,Ct)|0,H=H+Math.imul(W,tr)|0,j=j+Math.imul(oe,Nt)|0,T=T+Math.imul(oe,er)|0,T=T+Math.imul(Z,Nt)|0,H=H+Math.imul(Z,er)|0,j=j+Math.imul(re,Yt)|0,T=T+Math.imul(re,Vt)|0,T=T+Math.imul(N,Yt)|0,H=H+Math.imul(N,Vt)|0,j=j+Math.imul(ne,Xt)|0,T=T+Math.imul(ne,rr)|0,T=T+Math.imul(de,Xt)|0,H=H+Math.imul(de,rr)|0,j=j+Math.imul(le,ar)|0,T=T+Math.imul(le,or)|0,T=T+Math.imul(Ae,ar)|0,H=H+Math.imul(Ae,or)|0;var pt=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(pt>>>26)|0,pt&=67108863,j=Math.imul(ae,xe),T=Math.imul(ae,Ce),T=T+Math.imul(pe,xe)|0,H=Math.imul(pe,Ce),j=j+Math.imul(P,Re)|0,T=T+Math.imul(P,ot)|0,T=T+Math.imul(G,Re)|0,H=H+Math.imul(G,ot)|0,j=j+Math.imul(ie,bt)|0,T=T+Math.imul(ie,it)|0,T=T+Math.imul(Ee,bt)|0,H=H+Math.imul(Ee,it)|0,j=j+Math.imul(J,Ct)|0,T=T+Math.imul(J,tr)|0,T=T+Math.imul(K,Ct)|0,H=H+Math.imul(K,tr)|0,j=j+Math.imul(ce,Nt)|0,T=T+Math.imul(ce,er)|0,T=T+Math.imul(W,Nt)|0,H=H+Math.imul(W,er)|0,j=j+Math.imul(oe,Yt)|0,T=T+Math.imul(oe,Vt)|0,T=T+Math.imul(Z,Yt)|0,H=H+Math.imul(Z,Vt)|0,j=j+Math.imul(re,Xt)|0,T=T+Math.imul(re,rr)|0,T=T+Math.imul(N,Xt)|0,H=H+Math.imul(N,rr)|0,j=j+Math.imul(ne,ar)|0,T=T+Math.imul(ne,or)|0,T=T+Math.imul(de,ar)|0,H=H+Math.imul(de,or)|0;var ut=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(ut>>>26)|0,ut&=67108863,j=Math.imul(ae,Re),T=Math.imul(ae,ot),T=T+Math.imul(pe,Re)|0,H=Math.imul(pe,ot),j=j+Math.imul(P,bt)|0,T=T+Math.imul(P,it)|0,T=T+Math.imul(G,bt)|0,H=H+Math.imul(G,it)|0,j=j+Math.imul(ie,Ct)|0,T=T+Math.imul(ie,tr)|0,T=T+Math.imul(Ee,Ct)|0,H=H+Math.imul(Ee,tr)|0,j=j+Math.imul(J,Nt)|0,T=T+Math.imul(J,er)|0,T=T+Math.imul(K,Nt)|0,H=H+Math.imul(K,er)|0,j=j+Math.imul(ce,Yt)|0,T=T+Math.imul(ce,Vt)|0,T=T+Math.imul(W,Yt)|0,H=H+Math.imul(W,Vt)|0,j=j+Math.imul(oe,Xt)|0,T=T+Math.imul(oe,rr)|0,T=T+Math.imul(Z,Xt)|0,H=H+Math.imul(Z,rr)|0,j=j+Math.imul(re,ar)|0,T=T+Math.imul(re,or)|0,T=T+Math.imul(N,ar)|0,H=H+Math.imul(N,or)|0;var ct=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(ct>>>26)|0,ct&=67108863,j=Math.imul(ae,bt),T=Math.imul(ae,it),T=T+Math.imul(pe,bt)|0,H=Math.imul(pe,it),j=j+Math.imul(P,Ct)|0,T=T+Math.imul(P,tr)|0,T=T+Math.imul(G,Ct)|0,H=H+Math.imul(G,tr)|0,j=j+Math.imul(ie,Nt)|0,T=T+Math.imul(ie,er)|0,T=T+Math.imul(Ee,Nt)|0,H=H+Math.imul(Ee,er)|0,j=j+Math.imul(J,Yt)|0,T=T+Math.imul(J,Vt)|0,T=T+Math.imul(K,Yt)|0,H=H+Math.imul(K,Vt)|0,j=j+Math.imul(ce,Xt)|0,T=T+Math.imul(ce,rr)|0,T=T+Math.imul(W,Xt)|0,H=H+Math.imul(W,rr)|0,j=j+Math.imul(oe,ar)|0,T=T+Math.imul(oe,or)|0,T=T+Math.imul(Z,ar)|0,H=H+Math.imul(Z,or)|0;var Zt=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,j=Math.imul(ae,Ct),T=Math.imul(ae,tr),T=T+Math.imul(pe,Ct)|0,H=Math.imul(pe,tr),j=j+Math.imul(P,Nt)|0,T=T+Math.imul(P,er)|0,T=T+Math.imul(G,Nt)|0,H=H+Math.imul(G,er)|0,j=j+Math.imul(ie,Yt)|0,T=T+Math.imul(ie,Vt)|0,T=T+Math.imul(Ee,Yt)|0,H=H+Math.imul(Ee,Vt)|0,j=j+Math.imul(J,Xt)|0,T=T+Math.imul(J,rr)|0,T=T+Math.imul(K,Xt)|0,H=H+Math.imul(K,rr)|0,j=j+Math.imul(ce,ar)|0,T=T+Math.imul(ce,or)|0,T=T+Math.imul(W,ar)|0,H=H+Math.imul(W,or)|0;var fr=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(fr>>>26)|0,fr&=67108863,j=Math.imul(ae,Nt),T=Math.imul(ae,er),T=T+Math.imul(pe,Nt)|0,H=Math.imul(pe,er),j=j+Math.imul(P,Yt)|0,T=T+Math.imul(P,Vt)|0,T=T+Math.imul(G,Yt)|0,H=H+Math.imul(G,Vt)|0,j=j+Math.imul(ie,Xt)|0,T=T+Math.imul(ie,rr)|0,T=T+Math.imul(Ee,Xt)|0,H=H+Math.imul(Ee,rr)|0,j=j+Math.imul(J,ar)|0,T=T+Math.imul(J,or)|0,T=T+Math.imul(K,ar)|0,H=H+Math.imul(K,or)|0;var _r=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(_r>>>26)|0,_r&=67108863,j=Math.imul(ae,Yt),T=Math.imul(ae,Vt),T=T+Math.imul(pe,Yt)|0,H=Math.imul(pe,Vt),j=j+Math.imul(P,Xt)|0,T=T+Math.imul(P,rr)|0,T=T+Math.imul(G,Xt)|0,H=H+Math.imul(G,rr)|0,j=j+Math.imul(ie,ar)|0,T=T+Math.imul(ie,or)|0,T=T+Math.imul(Ee,ar)|0,H=H+Math.imul(Ee,or)|0;var Nr=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,j=Math.imul(ae,Xt),T=Math.imul(ae,rr),T=T+Math.imul(pe,Xt)|0,H=Math.imul(pe,rr),j=j+Math.imul(P,ar)|0,T=T+Math.imul(P,or)|0,T=T+Math.imul(G,ar)|0,H=H+Math.imul(G,or)|0;var ur=(z+j|0)+((T&8191)<<13)|0;z=(H+(T>>>13)|0)+(ur>>>26)|0,ur&=67108863,j=Math.imul(ae,ar),T=Math.imul(ae,or),T=T+Math.imul(pe,ar)|0,H=Math.imul(pe,or);var st=(z+j|0)+((T&8191)<<13)|0;return z=(H+(T>>>13)|0)+(st>>>26)|0,st&=67108863,Q[0]=Ei,Q[1]=q,Q[2]=we,Q[3]=Be,Q[4]=Me,Q[5]=ye,Q[6]=Pe,Q[7]=Ze,Q[8]=qe,Q[9]=tt,Q[10]=pt,Q[11]=ut,Q[12]=ct,Q[13]=Zt,Q[14]=fr,Q[15]=_r,Q[16]=Nr,Q[17]=ur,Q[18]=st,z!==0&&(Q[19]=z,S.length++),S};Math.imul||(v=p);function y(w,b,S){S.negative=b.negative^w.negative,S.length=w.length+b.length;for(var F=0,k=0,Q=0;Q<S.length-1;Q++){var z=k;k=0;for(var j=F&67108863,T=Math.min(Q,b.length-1),H=Math.max(0,Q-w.length+1);H<=T;H++){var me=Q-H,ee=w.words[me]|0,U=b.words[H]|0,se=ee*U,le=se&67108863;z=z+(se/67108864|0)|0,le=le+j|0,j=le&67108863,z=z+(le>>>26)|0,k+=z>>>26,z&=67108863}S.words[Q]=j,F=z,z=k}return F!==0?S.words[Q]=F:S.length--,S._strip()}function _(w,b,S){return y(w,b,S)}s.prototype.mulTo=function(w,b){var S,F=this.length+w.length;return this.length===10&&w.length===10?S=v(this,w,b):F<63?S=p(this,w,b):F<1024?S=y(this,w,b):S=_(this,w,b),S},s.prototype.mul=function(w){var b=new s(null);return b.words=new Array(this.length+w.length),this.mulTo(w,b)},s.prototype.mulf=function(w){var b=new s(null);return b.words=new Array(this.length+w.length),_(this,w,b)},s.prototype.imul=function(w){return this.clone().mulTo(w,this)},s.prototype.imuln=function(w){var b=w<0;b&&(w=-w),n(typeof w=="number"),n(w<67108864);for(var S=0,F=0;F<this.length;F++){var k=(this.words[F]|0)*w,Q=(k&67108863)+(S&67108863);S>>=26,S+=k/67108864|0,S+=Q>>>26,this.words[F]=Q&67108863}return S!==0&&(this.words[F]=S,this.length++),b?this.ineg():this},s.prototype.muln=function(w){return this.clone().imuln(w)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(w){var b=g(w);if(b.length===0)return new s(1);for(var S=this,F=0;F<b.length&&b[F]===0;F++,S=S.sqr());if(++F<b.length)for(var k=S.sqr();F<b.length;F++,k=k.sqr())b[F]!==0&&(S=S.mul(k));return S},s.prototype.iushln=function(w){n(typeof w=="number"&&w>=0);var b=w%26,S=(w-b)/26,F=67108863>>>26-b<<26-b,k;if(b!==0){var Q=0;for(k=0;k<this.length;k++){var z=this.words[k]&F,j=(this.words[k]|0)-z<<b;this.words[k]=j|Q,Q=z>>>26-b}Q&&(this.words[k]=Q,this.length++)}if(S!==0){for(k=this.length-1;k>=0;k--)this.words[k+S]=this.words[k];for(k=0;k<S;k++)this.words[k]=0;this.length+=S}return this._strip()},s.prototype.ishln=function(w){return n(this.negative===0),this.iushln(w)},s.prototype.iushrn=function(w,b,S){n(typeof w=="number"&&w>=0);var F;b?F=(b-b%26)/26:F=0;var k=w%26,Q=Math.min((w-k)/26,this.length),z=67108863^67108863>>>k<<k,j=S;if(F-=Q,F=Math.max(0,F),j){for(var T=0;T<Q;T++)j.words[T]=this.words[T];j.length=Q}if(Q!==0)if(this.length>Q)for(this.length-=Q,T=0;T<this.length;T++)this.words[T]=this.words[T+Q];else this.words[0]=0,this.length=1;var H=0;for(T=this.length-1;T>=0&&(H!==0||T>=F);T--){var me=this.words[T]|0;this.words[T]=H<<26-k|me>>>k,H=me&z}return j&&H!==0&&(j.words[j.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(w,b,S){return n(this.negative===0),this.iushrn(w,b,S)},s.prototype.shln=function(w){return this.clone().ishln(w)},s.prototype.ushln=function(w){return this.clone().iushln(w)},s.prototype.shrn=function(w){return this.clone().ishrn(w)},s.prototype.ushrn=function(w){return this.clone().iushrn(w)},s.prototype.testn=function(w){n(typeof w=="number"&&w>=0);var b=w%26,S=(w-b)/26,F=1<<b;if(this.length<=S)return!1;var k=this.words[S];return!!(k&F)},s.prototype.imaskn=function(w){n(typeof w=="number"&&w>=0);var b=w%26,S=(w-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=S)return this;if(b!==0&&S++,this.length=Math.min(S,this.length),b!==0){var F=67108863^67108863>>>b<<b;this.words[this.length-1]&=F}return this._strip()},s.prototype.maskn=function(w){return this.clone().imaskn(w)},s.prototype.iaddn=function(w){return n(typeof w=="number"),n(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(this.words[0]|0)<=w?(this.words[0]=w-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},s.prototype._iaddn=function(w){this.words[0]+=w;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(w){if(n(typeof w=="number"),n(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},s.prototype.addn=function(w){return this.clone().iaddn(w)},s.prototype.subn=function(w){return this.clone().isubn(w)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(w,b,S){var F=w.length+S,k;this._expand(F);var Q,z=0;for(k=0;k<w.length;k++){Q=(this.words[k+S]|0)+z;var j=(w.words[k]|0)*b;Q-=j&67108863,z=(Q>>26)-(j/67108864|0),this.words[k+S]=Q&67108863}for(;k<this.length-S;k++)Q=(this.words[k+S]|0)+z,z=Q>>26,this.words[k+S]=Q&67108863;if(z===0)return this._strip();for(n(z===-1),z=0,k=0;k<this.length;k++)Q=-(this.words[k]|0)+z,z=Q>>26,this.words[k]=Q&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(w,b){var S=this.length-w.length,F=this.clone(),k=w,Q=k.words[k.length-1]|0,z=this._countBits(Q);S=26-z,S!==0&&(k=k.ushln(S),F.iushln(S),Q=k.words[k.length-1]|0);var j=F.length-k.length,T;if(b!=="mod"){T=new s(null),T.length=j+1,T.words=new Array(T.length);for(var H=0;H<T.length;H++)T.words[H]=0}var me=F.clone()._ishlnsubmul(k,1,j);me.negative===0&&(F=me,T&&(T.words[j]=1));for(var ee=j-1;ee>=0;ee--){var U=(F.words[k.length+ee]|0)*67108864+(F.words[k.length+ee-1]|0);for(U=Math.min(U/Q|0,67108863),F._ishlnsubmul(k,U,ee);F.negative!==0;)U--,F.negative=0,F._ishlnsubmul(k,1,ee),F.isZero()||(F.negative^=1);T&&(T.words[ee]=U)}return T&&T._strip(),F._strip(),b!=="div"&&S!==0&&F.iushrn(S),{div:T||null,mod:F}},s.prototype.divmod=function(w,b,S){if(n(!w.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var F,k,Q;return this.negative!==0&&w.negative===0?(Q=this.neg().divmod(w,b),b!=="mod"&&(F=Q.div.neg()),b!=="div"&&(k=Q.mod.neg(),S&&k.negative!==0&&k.iadd(w)),{div:F,mod:k}):this.negative===0&&w.negative!==0?(Q=this.divmod(w.neg(),b),b!=="mod"&&(F=Q.div.neg()),{div:F,mod:Q.mod}):this.negative&w.negative?(Q=this.neg().divmod(w.neg(),b),b!=="div"&&(k=Q.mod.neg(),S&&k.negative!==0&&k.isub(w)),{div:Q.div,mod:k}):w.length>this.length||this.cmp(w)<0?{div:new s(0),mod:this}:w.length===1?b==="div"?{div:this.divn(w.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new s(this.modrn(w.words[0]))}:this._wordDiv(w,b)},s.prototype.div=function(w){return this.divmod(w,"div",!1).div},s.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},s.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},s.prototype.divRound=function(w){var b=this.divmod(w);if(b.mod.isZero())return b.div;var S=b.div.negative!==0?b.mod.isub(w):b.mod,F=w.ushrn(1),k=w.andln(1),Q=S.cmp(F);return Q<0||k===1&&Q===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modrn=function(w){var b=w<0;b&&(w=-w),n(w<=67108863);for(var S=(1<<26)%w,F=0,k=this.length-1;k>=0;k--)F=(S*F+(this.words[k]|0))%w;return b?-F:F},s.prototype.modn=function(w){return this.modrn(w)},s.prototype.idivn=function(w){var b=w<0;b&&(w=-w),n(w<=67108863);for(var S=0,F=this.length-1;F>=0;F--){var k=(this.words[F]|0)+S*67108864;this.words[F]=k/w|0,S=k%w}return this._strip(),b?this.ineg():this},s.prototype.divn=function(w){return this.clone().idivn(w)},s.prototype.egcd=function(w){n(w.negative===0),n(!w.isZero());var b=this,S=w.clone();b.negative!==0?b=b.umod(w):b=b.clone();for(var F=new s(1),k=new s(0),Q=new s(0),z=new s(1),j=0;b.isEven()&&S.isEven();)b.iushrn(1),S.iushrn(1),++j;for(var T=S.clone(),H=b.clone();!b.isZero();){for(var me=0,ee=1;!(b.words[0]&ee)&&me<26;++me,ee<<=1);if(me>0)for(b.iushrn(me);me-- >0;)(F.isOdd()||k.isOdd())&&(F.iadd(T),k.isub(H)),F.iushrn(1),k.iushrn(1);for(var U=0,se=1;!(S.words[0]&se)&&U<26;++U,se<<=1);if(U>0)for(S.iushrn(U);U-- >0;)(Q.isOdd()||z.isOdd())&&(Q.iadd(T),z.isub(H)),Q.iushrn(1),z.iushrn(1);b.cmp(S)>=0?(b.isub(S),F.isub(Q),k.isub(z)):(S.isub(b),Q.isub(F),z.isub(k))}return{a:Q,b:z,gcd:S.iushln(j)}},s.prototype._invmp=function(w){n(w.negative===0),n(!w.isZero());var b=this,S=w.clone();b.negative!==0?b=b.umod(w):b=b.clone();for(var F=new s(1),k=new s(0),Q=S.clone();b.cmpn(1)>0&&S.cmpn(1)>0;){for(var z=0,j=1;!(b.words[0]&j)&&z<26;++z,j<<=1);if(z>0)for(b.iushrn(z);z-- >0;)F.isOdd()&&F.iadd(Q),F.iushrn(1);for(var T=0,H=1;!(S.words[0]&H)&&T<26;++T,H<<=1);if(T>0)for(S.iushrn(T);T-- >0;)k.isOdd()&&k.iadd(Q),k.iushrn(1);b.cmp(S)>=0?(b.isub(S),F.isub(k)):(S.isub(b),k.isub(F))}var me;return b.cmpn(1)===0?me=F:me=k,me.cmpn(0)<0&&me.iadd(w),me},s.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var b=this.clone(),S=w.clone();b.negative=0,S.negative=0;for(var F=0;b.isEven()&&S.isEven();F++)b.iushrn(1),S.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;S.isEven();)S.iushrn(1);var k=b.cmp(S);if(k<0){var Q=b;b=S,S=Q}else if(k===0||S.cmpn(1)===0)break;b.isub(S)}while(!0);return S.iushln(F)},s.prototype.invm=function(w){return this.egcd(w).a.umod(w)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(w){return this.words[0]&w},s.prototype.bincn=function(w){n(typeof w=="number");var b=w%26,S=(w-b)/26,F=1<<b;if(this.length<=S)return this._expand(S+1),this.words[S]|=F,this;for(var k=F,Q=S;k!==0&&Q<this.length;Q++){var z=this.words[Q]|0;z+=k,k=z>>>26,z&=67108863,this.words[Q]=z}return k!==0&&(this.words[Q]=k,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(w){var b=w<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var S;if(this.length>1)S=1;else{b&&(w=-w),n(w<=67108863,"Number is too big");var F=this.words[0]|0;S=F===w?0:F<w?-1:1}return this.negative!==0?-S|0:S},s.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var b=this.ucmp(w);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var b=0,S=this.length-1;S>=0;S--){var F=this.words[S]|0,k=w.words[S]|0;if(F!==k){F<k?b=-1:F>k&&(b=1);break}}return b},s.prototype.gtn=function(w){return this.cmpn(w)===1},s.prototype.gt=function(w){return this.cmp(w)===1},s.prototype.gten=function(w){return this.cmpn(w)>=0},s.prototype.gte=function(w){return this.cmp(w)>=0},s.prototype.ltn=function(w){return this.cmpn(w)===-1},s.prototype.lt=function(w){return this.cmp(w)===-1},s.prototype.lten=function(w){return this.cmpn(w)<=0},s.prototype.lte=function(w){return this.cmp(w)<=0},s.prototype.eqn=function(w){return this.cmpn(w)===0},s.prototype.eq=function(w){return this.cmp(w)===0},s.red=function(w){return new L(w)},s.prototype.toRed=function(w){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(w){return this.red=w,this},s.prototype.forceRed=function(w){return n(!this.red,"Already a number in reduction context"),this._forceRed(w)},s.prototype.redAdd=function(w){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},s.prototype.redIAdd=function(w){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},s.prototype.redSub=function(w){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},s.prototype.redISub=function(w){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},s.prototype.redShl=function(w){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},s.prototype.redMul=function(w){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},s.prototype.redIMul=function(w){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(w){return n(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var E={k256:null,p224:null,p192:null,p25519:null};function x(w,b){this.name=w,this.p=new s(b,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}x.prototype._tmp=function(){var w=new s(null);return w.words=new Array(Math.ceil(this.n/13)),w},x.prototype.ireduce=function(w){var b=w,S;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),S=b.bitLength();while(S>this.n);var F=S<this.n?-1:b.ucmp(this.p);return F===0?(b.words[0]=0,b.length=1):F>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},x.prototype.split=function(w,b){w.iushrn(this.n,0,b)},x.prototype.imulK=function(w){return w.imul(this.k)};function B(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(B,x),B.prototype.split=function(w,b){for(var S=4194303,F=Math.min(w.length,9),k=0;k<F;k++)b.words[k]=w.words[k];if(b.length=F,w.length<=9){w.words[0]=0,w.length=1;return}var Q=w.words[9];for(b.words[b.length++]=Q&S,k=10;k<w.length;k++){var z=w.words[k]|0;w.words[k-10]=(z&S)<<4|Q>>>22,Q=z}Q>>>=22,w.words[k-10]=Q,Q===0&&w.length>10?w.length-=10:w.length-=9},B.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var b=0,S=0;S<w.length;S++){var F=w.words[S]|0;b+=F*977,w.words[S]=b&67108863,b=F*64+(b/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w};function M(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(M,x);function R(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(R,x);function I(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(I,x),I.prototype.imulK=function(w){for(var b=0,S=0;S<w.length;S++){var F=(w.words[S]|0)*19+b,k=F&67108863;F>>>=26,w.words[S]=k,b=F}return b!==0&&(w.words[w.length++]=b),w},s._prime=function(w){if(E[w])return E[w];var b;if(w==="k256")b=new B;else if(w==="p224")b=new M;else if(w==="p192")b=new R;else if(w==="p25519")b=new I;else throw new Error("Unknown prime "+w);return E[w]=b,b};function L(w){if(typeof w=="string"){var b=s._prime(w);this.m=b.p,this.prime=b}else n(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}L.prototype._verify1=function(w){n(w.negative===0,"red works only with positives"),n(w.red,"red works only with red numbers")},L.prototype._verify2=function(w,b){n((w.negative|b.negative)===0,"red works only with positives"),n(w.red&&w.red===b.red,"red works only with red numbers")},L.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(c(w,w.umod(this.m)._forceRed(this)),w)},L.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},L.prototype.add=function(w,b){this._verify2(w,b);var S=w.add(b);return S.cmp(this.m)>=0&&S.isub(this.m),S._forceRed(this)},L.prototype.iadd=function(w,b){this._verify2(w,b);var S=w.iadd(b);return S.cmp(this.m)>=0&&S.isub(this.m),S},L.prototype.sub=function(w,b){this._verify2(w,b);var S=w.sub(b);return S.cmpn(0)<0&&S.iadd(this.m),S._forceRed(this)},L.prototype.isub=function(w,b){this._verify2(w,b);var S=w.isub(b);return S.cmpn(0)<0&&S.iadd(this.m),S},L.prototype.shl=function(w,b){return this._verify1(w),this.imod(w.ushln(b))},L.prototype.imul=function(w,b){return this._verify2(w,b),this.imod(w.imul(b))},L.prototype.mul=function(w,b){return this._verify2(w,b),this.imod(w.mul(b))},L.prototype.isqr=function(w){return this.imul(w,w.clone())},L.prototype.sqr=function(w){return this.mul(w,w)},L.prototype.sqrt=function(w){if(w.isZero())return w.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var S=this.m.add(new s(1)).iushrn(2);return this.pow(w,S)}for(var F=this.m.subn(1),k=0;!F.isZero()&&F.andln(1)===0;)k++,F.iushrn(1);n(!F.isZero());var Q=new s(1).toRed(this),z=Q.redNeg(),j=this.m.subn(1).iushrn(1),T=this.m.bitLength();for(T=new s(2*T*T).toRed(this);this.pow(T,j).cmp(z)!==0;)T.redIAdd(z);for(var H=this.pow(T,F),me=this.pow(w,F.addn(1).iushrn(1)),ee=this.pow(w,F),U=k;ee.cmp(Q)!==0;){for(var se=ee,le=0;se.cmp(Q)!==0;le++)se=se.redSqr();n(le<U);var Ae=this.pow(H,new s(1).iushln(U-le-1));me=me.redMul(Ae),H=Ae.redSqr(),ee=ee.redMul(H),U=le}return me},L.prototype.invm=function(w){var b=w._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},L.prototype.pow=function(w,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return w.clone();var S=4,F=new Array(1<<S);F[0]=new s(1).toRed(this),F[1]=w;for(var k=2;k<F.length;k++)F[k]=this.mul(F[k-1],w);var Q=F[0],z=0,j=0,T=b.bitLength()%26;for(T===0&&(T=26),k=b.length-1;k>=0;k--){for(var H=b.words[k],me=T-1;me>=0;me--){var ee=H>>me&1;if(Q!==F[0]&&(Q=this.sqr(Q)),ee===0&&z===0){j=0;continue}z<<=1,z|=ee,j++,!(j!==S&&(k!==0||me!==0))&&(Q=this.mul(Q,F[z]),j=0,z=0)}T=26}return Q},L.prototype.convertTo=function(w){var b=w.umod(this.m);return b===w?b.clone():b},L.prototype.convertFrom=function(w){var b=w.clone();return b.red=null,b},s.mont=function(w){return new D(w)};function D(w){L.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(D,L),D.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},D.prototype.convertFrom=function(w){var b=this.imod(w.mul(this.rinv));return b.red=null,b},D.prototype.imul=function(w,b){if(w.isZero()||b.isZero())return w.words[0]=0,w.length=1,w;var S=w.imul(b),F=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=S.isub(F).iushrn(this.shift),Q=k;return k.cmp(this.m)>=0?Q=k.isub(this.m):k.cmpn(0)<0&&(Q=k.iadd(this.m)),Q._forceRed(this)},D.prototype.mul=function(w,b){if(w.isZero()||b.isZero())return new s(0)._forceRed(this);var S=w.mul(b),F=S.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=S.isub(F).iushrn(this.shift),Q=k;return k.cmp(this.m)>=0?Q=k.isub(this.m):k.cmpn(0)<0&&(Q=k.iadd(this.m)),Q._forceRed(this)},D.prototype.invm=function(w){var b=this.imod(w._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,Oo)})(J4);var s7=J4.exports;const wt=iA(s7),a7="logger/5.7.0";let BU=!1,MU=!1;const tw={debug:1,default:2,info:2,warning:3,error:4,off:5};let TU=tw.default,mx=null;function o7(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const CU=o7();var CM;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(CM||(CM={}));var za;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(za||(za={}));const SU="0123456789abcdef";let be=class Cn{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();tw[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(TU>tw[n])&&console.log.apply(console,r)}debug(...e){this._log(Cn.levels.DEBUG,e)}info(...e){this._log(Cn.levels.INFO,e)}warn(...e){this._log(Cn.levels.WARNING,e)}makeError(e,r,n){if(MU)return this.makeError("censored error",r,{});r||(r=Cn.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(l=>{const A=n[l];try{if(A instanceof Uint8Array){let c="";for(let u=0;u<A.length;u++)c+=SU[A[u]>>4],c+=SU[A[u]&15];i.push(l+"=Uint8Array(0x"+c+")")}else i.push(l+"="+JSON.stringify(A))}catch{i.push(l+"="+JSON.stringify(n[l].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let a="";switch(r){case za.NUMERIC_FAULT:{a="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":a+="-"+l;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case za.CALL_EXCEPTION:case za.INSUFFICIENT_FUNDS:case za.MISSING_NEW:case za.NONCE_EXPIRED:case za.REPLACEMENT_UNDERPRICED:case za.TRANSACTION_REPLACED:case za.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const o=new Error(e);return o.reason=s,o.code=r,Object.keys(n).forEach(function(l){o[l]=n[l]}),o}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,Cn.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){CU&&this.throwError("platform missing String.prototype.normalize",Cn.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:CU})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,Cn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,Cn.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,Cn.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,Cn.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",Cn.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",Cn.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Cn.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return mx||(mx=new Cn(a7)),mx}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",Cn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),BU){if(!e)return;this.globalLogger().throwError("error censorship permanent",Cn.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}MU=!!e,BU=!!r}static setLogLevel(e){const r=tw[e.toLowerCase()];if(r==null){Cn.globalLogger().warn("invalid log level - "+e);return}TU=r}static from(e){return new Cn(e)}};be.errors=za;be.levels=CM;const l7="bytes/5.7.0",Zr=new be(l7);function q4(t){return!!t.toHexString}function Vd(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Vd(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function s2(t){return It(t)&&!(t.length%2)||Fb(t)}function IU(t){return typeof t=="number"&&t==t&&t%1===0}function Fb(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!IU(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!IU(r)||r<0||r>=256)return!1}return!0}function ft(t,e){if(e||(e={}),typeof t=="number"){Zr.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Vd(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),q4(t)&&(t=t.toHexString()),It(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Zr.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return Vd(new Uint8Array(n))}return Fb(t)?Vd(new Uint8Array(t)):Zr.throwArgumentError("invalid arrayify value","value",t)}function Bs(t){const e=t.map(i=>ft(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Vd(n)}function df(t){let e=ft(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function A7(t,e){t=ft(t),t.length>e&&Zr.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Vd(r)}function It(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const gx="0123456789abcdef";function at(t,e){if(e||(e={}),typeof t=="number"){Zr.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=gx[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),q4(t))return t.toHexString();if(It(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Zr.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Fb(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=gx[(i&240)>>4]+gx[i&15]}return r}return Zr.throwArgumentError("invalid hexlify value","value",t)}function Bu(t){if(typeof t!="string")t=at(t);else if(!It(t)||t.length%2)return null;return(t.length-2)/2}function ui(t,e,r){return typeof t!="string"?t=at(t):(!It(t)||t.length%2)&&Zr.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function Ki(t){let e="0x";return t.forEach(r=>{e+=at(r).substring(2)}),e}function kb(t){const e=c7(at(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function c7(t){typeof t!="string"&&(t=at(t)),It(t)||Zr.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function rn(t,e){for(typeof t!="string"?t=at(t):It(t)||Zr.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Zr.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Lb(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(s2(t)){let r=ft(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=at(r.slice(0,32)),e.s=at(r.slice(32,64))):r.length===65?(e.r=at(r.slice(0,32)),e.s=at(r.slice(32,64)),e.v=r[64]):Zr.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Zr.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=at(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=A7(ft(e._vs),32);e._vs=at(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Zr.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const a=at(i);e.s==null?e.s=a:e.s!==a&&Zr.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Zr.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Zr.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!It(e.r)?Zr.throwArgumentError("signature missing or invalid r","signature",t):e.r=rn(e.r,32),e.s==null||!It(e.s)?Zr.throwArgumentError("signature missing or invalid s","signature",t):e.s=rn(e.s,32);const r=ft(e.s);r[0]>=128&&Zr.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=at(r);e._vs&&(It(e._vs)||Zr.throwArgumentError("signature invalid _vs","signature",t),e._vs=rn(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Zr.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const u7="bignumber/5.7.0";var Yw=wt.BN;const Ml=new be(u7),vx={},RU=9007199254740991;let UU=!1;class We{constructor(e,r){e!==vx&&Ml.throwError("cannot call constructor directly; use BigNumber.from",be.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Qi(Ot(this).fromTwos(e))}toTwos(e){return Qi(Ot(this).toTwos(e))}abs(){return this._hex[0]==="-"?We.from(this._hex.substring(1)):this}add(e){return Qi(Ot(this).add(Ot(e)))}sub(e){return Qi(Ot(this).sub(Ot(e)))}div(e){return We.from(e).isZero()&&Xs("division-by-zero","div"),Qi(Ot(this).div(Ot(e)))}mul(e){return Qi(Ot(this).mul(Ot(e)))}mod(e){const r=Ot(e);return r.isNeg()&&Xs("division-by-zero","mod"),Qi(Ot(this).umod(r))}pow(e){const r=Ot(e);return r.isNeg()&&Xs("negative-power","pow"),Qi(Ot(this).pow(r))}and(e){const r=Ot(e);return(this.isNegative()||r.isNeg())&&Xs("unbound-bitwise-result","and"),Qi(Ot(this).and(r))}or(e){const r=Ot(e);return(this.isNegative()||r.isNeg())&&Xs("unbound-bitwise-result","or"),Qi(Ot(this).or(r))}xor(e){const r=Ot(e);return(this.isNegative()||r.isNeg())&&Xs("unbound-bitwise-result","xor"),Qi(Ot(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Xs("negative-width","mask"),Qi(Ot(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Xs("negative-width","shl"),Qi(Ot(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Xs("negative-width","shr"),Qi(Ot(this).shrn(e))}eq(e){return Ot(this).eq(Ot(e))}lt(e){return Ot(this).lt(Ot(e))}lte(e){return Ot(this).lte(Ot(e))}gt(e){return Ot(this).gt(Ot(e))}gte(e){return Ot(this).gte(Ot(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Ot(this).isZero()}toNumber(){try{return Ot(this).toNumber()}catch{Xs("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Ml.throwError("this platform does not support BigInt",be.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?UU||(UU=!0,Ml.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Ml.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",be.errors.UNEXPECTED_ARGUMENT,{}):Ml.throwError("BigNumber.toString does not accept parameters",be.errors.UNEXPECTED_ARGUMENT,{})),Ot(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof We)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new We(vx,Ag(e)):e.match(/^-?[0-9]+$/)?new We(vx,Ag(new Yw(e))):Ml.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Xs("underflow","BigNumber.from",e),(e>=RU||e<=-RU)&&Xs("overflow","BigNumber.from",e),We.from(String(e));const r=e;if(typeof r=="bigint")return We.from(r.toString());if(Fb(r))return We.from(at(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return We.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(It(n)||n[0]==="-"&&It(n.substring(1))))return We.from(n)}return Ml.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Ag(t){if(typeof t!="string")return Ag(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Ml.throwArgumentError("invalid hex","value",t),t=Ag(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Qi(t){return We.from(Ag(t))}function Ot(t){const e=We.from(t).toHexString();return e[0]==="-"?new Yw("-"+e.substring(3),16):new Yw(e.substring(2),16)}function Xs(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),Ml.throwError(t,be.errors.NUMERIC_FAULT,n)}function h7(t){return new Yw(t,36).toString(16)}const d7="properties/5.7.0";var f7=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const Xw=new be(d7);function Ue(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Ms(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function vn(t){return f7(this,void 0,void 0,function*(){const e=Object.keys(t).map(r=>{const n=t[r];return Promise.resolve(n).then(i=>({key:r,value:i}))});return(yield Promise.all(e)).reduce((r,n)=>(r[n.key]=n.value,r),{})})}function p7(t,e){(!t||typeof t!="object")&&Xw.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||Xw.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Or(t){const e={};for(const r in t)e[r]=t[r];return e}const m7={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function $4(t){if(t==null||m7[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!$4(n))return!1}return!0}return Xw.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function g7(t){if($4(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Us(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&Ue(e,r,Us(n))}return e}return Xw.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Us(t){return g7(t)}class o0{constructor(e){for(const r in e)this[r]=Us(e[r])}}const v7="abstract-provider/5.7.0";var y7=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const w7=new be(v7);class b7 extends o0{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class l0{constructor(){w7.checkAbstract(new.target,l0),Ue(this,"_isProvider",!0)}getFeeData(){return y7(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield vn({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=We.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const _7="networks/5.7.1",FU=new be(_7);function x7(t){return t&&typeof t.renetwork=="function"}function Rl(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const a=new r.PocketProvider(t,n.pocket);a.network&&s.indexOf(a.network.name)===-1&&i.push(a)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],a=new r.AnkrProvider(t,n.ankr);a.network&&s.indexOf(a.network.name)===-1&&i.push(a)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return Rl(r)},e}function Zw(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return Zw(t,n)},r}const kU={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Rl("homestead")},LU={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Rl("ropsten")},PU={chainId:63,name:"classicMordor",_defaultProvider:Zw("https://www.ethercluster.com/mordor","classicMordor")},Q0={unspecified:{chainId:0,name:"unspecified"},homestead:kU,mainnet:kU,morden:{chainId:2,name:"morden"},ropsten:LU,testnet:LU,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Rl("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Rl("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Rl("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Rl("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Zw("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:PU,classicTestnet:PU,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Zw("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Rl("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Rl("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function eQ(t){if(t==null)return null;if(typeof t=="number"){for(const n in Q0){const i=Q0[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=Q0[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Q0[t.name];if(!e)return typeof t.chainId!="number"&&FU.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&FU.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(x7(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}function tQ(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return ft(e)}function rQ(t){t=ft(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}class nQ{constructor(e){Ue(this,"alphabet",e),Ue(this,"base",e.length),Ue(this,"_alphabetMap",{}),Ue(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=ft(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let a=r[s];for(let o=0;o<n.length;++o)a+=n[o]<<8,n[o]=a%this.base,a=a/this.base|0;for(;a>0;)n.push(a%this.base),a=a/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let a=0;a<r.length;++a)s+=r[a]*this.base,r[a]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return ft(new Uint8Array(r.reverse()))}}new nQ("abcdefghijklmnopqrstuvwxyz234567");const SM=new nQ("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),E7="0x0000000000000000000000000000000000000000",B7=We.from(-1),iQ=We.from(0),M7=We.from(1),T7=We.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),C7="0x0000000000000000000000000000000000000000000000000000000000000000";var sQ={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",a=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?i=Oo:s&&(i=self);var o=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",A="0123456789abcdef".split(""),c=[31,7936,2031616,520093696],u=[4,1024,262144,67108864],h=[1,256,65536,16777216],d=[6,1536,393216,100663296],f=[0,8,16,24],m=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],p=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(U){return Object.prototype.toString.call(U)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(U){return typeof U=="object"&&U.buffer&&U.buffer.constructor===ArrayBuffer});for(var _=function(U,se,le){return function(Ae){return new H(U,se,U).update(Ae)[le]()}},E=function(U,se,le){return function(Ae,ge){return new H(U,se,ge).update(Ae)[le]()}},x=function(U,se,le){return function(Ae,ge,ne,de){return b["cshake"+U].update(Ae,ge,ne,de)[le]()}},B=function(U,se,le){return function(Ae,ge,ne,de){return b["kmac"+U].update(Ae,ge,ne,de)[le]()}},M=function(U,se,le,Ae){for(var ge=0;ge<v.length;++ge){var ne=v[ge];U[ne]=se(le,Ae,ne)}return U},R=function(U,se){var le=_(U,se,"hex");return le.create=function(){return new H(U,se,U)},le.update=function(Ae){return le.create().update(Ae)},M(le,_,U,se)},I=function(U,se){var le=E(U,se,"hex");return le.create=function(Ae){return new H(U,se,Ae)},le.update=function(Ae,ge){return le.create(ge).update(Ae)},M(le,E,U,se)},L=function(U,se){var le=y[U],Ae=x(U,se,"hex");return Ae.create=function(ge,ne,de){return!ne&&!de?b["shake"+U].create(ge):new H(U,se,ge).bytepad([ne,de],le)},Ae.update=function(ge,ne,de,Te){return Ae.create(ne,de,Te).update(ge)},M(Ae,x,U,se)},D=function(U,se){var le=y[U],Ae=B(U,se,"hex");return Ae.create=function(ge,ne,de){return new me(U,se,ne).bytepad(["KMAC",de],le).bytepad([ge],le)},Ae.update=function(ge,ne,de,Te){return Ae.create(ge,de,Te).update(ne)},M(Ae,B,U,se)},w=[{name:"keccak",padding:h,bits:g,createMethod:R},{name:"sha3",padding:d,bits:g,createMethod:R},{name:"shake",padding:c,bits:p,createMethod:I},{name:"cshake",padding:u,bits:p,createMethod:L},{name:"kmac",padding:u,bits:p,createMethod:D}],b={},S=[],F=0;F<w.length;++F)for(var k=w[F],Q=k.bits,z=0;z<Q.length;++z){var j=k.name+"_"+Q[z];if(S.push(j),b[j]=k.createMethod(Q[z],k.padding),k.name!=="sha3"){var T=k.name+Q[z];S.push(T),b[T]=b[j]}}function H(U,se,le){this.blocks=[],this.s=[],this.padding=se,this.outputBits=le,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(U<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=le>>5,this.extraBytes=(le&31)>>3;for(var Ae=0;Ae<50;++Ae)this.s[Ae]=0}H.prototype.update=function(U){if(this.finalized)throw new Error(r);var se,le=typeof U;if(le!=="string"){if(le==="object"){if(U===null)throw new Error(e);if(l&&U.constructor===ArrayBuffer)U=new Uint8Array(U);else if(!Array.isArray(U)&&(!l||!ArrayBuffer.isView(U)))throw new Error(e)}else throw new Error(e);se=!0}for(var Ae=this.blocks,ge=this.byteCount,ne=U.length,de=this.blockCount,Te=0,re=this.s,N,he;Te<ne;){if(this.reset)for(this.reset=!1,Ae[0]=this.block,N=1;N<de+1;++N)Ae[N]=0;if(se)for(N=this.start;Te<ne&&N<ge;++Te)Ae[N>>2]|=U[Te]<<f[N++&3];else for(N=this.start;Te<ne&&N<ge;++Te)he=U.charCodeAt(Te),he<128?Ae[N>>2]|=he<<f[N++&3]:he<2048?(Ae[N>>2]|=(192|he>>6)<<f[N++&3],Ae[N>>2]|=(128|he&63)<<f[N++&3]):he<55296||he>=57344?(Ae[N>>2]|=(224|he>>12)<<f[N++&3],Ae[N>>2]|=(128|he>>6&63)<<f[N++&3],Ae[N>>2]|=(128|he&63)<<f[N++&3]):(he=65536+((he&1023)<<10|U.charCodeAt(++Te)&1023),Ae[N>>2]|=(240|he>>18)<<f[N++&3],Ae[N>>2]|=(128|he>>12&63)<<f[N++&3],Ae[N>>2]|=(128|he>>6&63)<<f[N++&3],Ae[N>>2]|=(128|he&63)<<f[N++&3]);if(this.lastByteIndex=N,N>=ge){for(this.start=N-ge,this.block=Ae[de],N=0;N<de;++N)re[N]^=Ae[N];ee(re),this.reset=!0}else this.start=N}return this},H.prototype.encode=function(U,se){var le=U&255,Ae=1,ge=[le];for(U=U>>8,le=U&255;le>0;)ge.unshift(le),U=U>>8,le=U&255,++Ae;return se?ge.push(Ae):ge.unshift(Ae),this.update(ge),ge.length},H.prototype.encodeString=function(U){var se,le=typeof U;if(le!=="string"){if(le==="object"){if(U===null)throw new Error(e);if(l&&U.constructor===ArrayBuffer)U=new Uint8Array(U);else if(!Array.isArray(U)&&(!l||!ArrayBuffer.isView(U)))throw new Error(e)}else throw new Error(e);se=!0}var Ae=0,ge=U.length;if(se)Ae=ge;else for(var ne=0;ne<U.length;++ne){var de=U.charCodeAt(ne);de<128?Ae+=1:de<2048?Ae+=2:de<55296||de>=57344?Ae+=3:(de=65536+((de&1023)<<10|U.charCodeAt(++ne)&1023),Ae+=4)}return Ae+=this.encode(Ae*8),this.update(U),Ae},H.prototype.bytepad=function(U,se){for(var le=this.encode(se),Ae=0;Ae<U.length;++Ae)le+=this.encodeString(U[Ae]);var ge=se-le%se,ne=[];return ne.length=ge,this.update(ne),this},H.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var U=this.blocks,se=this.lastByteIndex,le=this.blockCount,Ae=this.s;if(U[se>>2]|=this.padding[se&3],this.lastByteIndex===this.byteCount)for(U[0]=U[le],se=1;se<le+1;++se)U[se]=0;for(U[le-1]|=2147483648,se=0;se<le;++se)Ae[se]^=U[se];ee(Ae)}},H.prototype.toString=H.prototype.hex=function(){this.finalize();for(var U=this.blockCount,se=this.s,le=this.outputBlocks,Ae=this.extraBytes,ge=0,ne=0,de="",Te;ne<le;){for(ge=0;ge<U&&ne<le;++ge,++ne)Te=se[ge],de+=A[Te>>4&15]+A[Te&15]+A[Te>>12&15]+A[Te>>8&15]+A[Te>>20&15]+A[Te>>16&15]+A[Te>>28&15]+A[Te>>24&15];ne%U===0&&(ee(se),ge=0)}return Ae&&(Te=se[ge],de+=A[Te>>4&15]+A[Te&15],Ae>1&&(de+=A[Te>>12&15]+A[Te>>8&15]),Ae>2&&(de+=A[Te>>20&15]+A[Te>>16&15])),de},H.prototype.arrayBuffer=function(){this.finalize();var U=this.blockCount,se=this.s,le=this.outputBlocks,Ae=this.extraBytes,ge=0,ne=0,de=this.outputBits>>3,Te;Ae?Te=new ArrayBuffer(le+1<<2):Te=new ArrayBuffer(de);for(var re=new Uint32Array(Te);ne<le;){for(ge=0;ge<U&&ne<le;++ge,++ne)re[ne]=se[ge];ne%U===0&&ee(se)}return Ae&&(re[ge]=se[ge],Te=Te.slice(0,de)),Te},H.prototype.buffer=H.prototype.arrayBuffer,H.prototype.digest=H.prototype.array=function(){this.finalize();for(var U=this.blockCount,se=this.s,le=this.outputBlocks,Ae=this.extraBytes,ge=0,ne=0,de=[],Te,re;ne<le;){for(ge=0;ge<U&&ne<le;++ge,++ne)Te=ne<<2,re=se[ge],de[Te]=re&255,de[Te+1]=re>>8&255,de[Te+2]=re>>16&255,de[Te+3]=re>>24&255;ne%U===0&&ee(se)}return Ae&&(Te=ne<<2,re=se[ge],de[Te]=re&255,Ae>1&&(de[Te+1]=re>>8&255),Ae>2&&(de[Te+2]=re>>16&255)),de};function me(U,se,le){H.call(this,U,se,le)}me.prototype=new H,me.prototype.finalize=function(){return this.encode(this.outputBits,!0),H.prototype.finalize.call(this)};var ee=function(U){var se,le,Ae,ge,ne,de,Te,re,N,he,oe,Z,$,ce,W,V,J,K,fe,ie,Ee,C,P,G,te,ae,pe,ve,Ie,ke,Le,Oe,ue,Qe,xe,Ce,Fe,Re,ot,Kt,bt,it,Rr,Ct,tr,Vs,Nt,er,Ws,Yt,Vt,Ks,Xt,rr,us,ar,or,Ei,q,we,Be,Me,ye;for(Ae=0;Ae<48;Ae+=2)ge=U[0]^U[10]^U[20]^U[30]^U[40],ne=U[1]^U[11]^U[21]^U[31]^U[41],de=U[2]^U[12]^U[22]^U[32]^U[42],Te=U[3]^U[13]^U[23]^U[33]^U[43],re=U[4]^U[14]^U[24]^U[34]^U[44],N=U[5]^U[15]^U[25]^U[35]^U[45],he=U[6]^U[16]^U[26]^U[36]^U[46],oe=U[7]^U[17]^U[27]^U[37]^U[47],Z=U[8]^U[18]^U[28]^U[38]^U[48],$=U[9]^U[19]^U[29]^U[39]^U[49],se=Z^(de<<1|Te>>>31),le=$^(Te<<1|de>>>31),U[0]^=se,U[1]^=le,U[10]^=se,U[11]^=le,U[20]^=se,U[21]^=le,U[30]^=se,U[31]^=le,U[40]^=se,U[41]^=le,se=ge^(re<<1|N>>>31),le=ne^(N<<1|re>>>31),U[2]^=se,U[3]^=le,U[12]^=se,U[13]^=le,U[22]^=se,U[23]^=le,U[32]^=se,U[33]^=le,U[42]^=se,U[43]^=le,se=de^(he<<1|oe>>>31),le=Te^(oe<<1|he>>>31),U[4]^=se,U[5]^=le,U[14]^=se,U[15]^=le,U[24]^=se,U[25]^=le,U[34]^=se,U[35]^=le,U[44]^=se,U[45]^=le,se=re^(Z<<1|$>>>31),le=N^($<<1|Z>>>31),U[6]^=se,U[7]^=le,U[16]^=se,U[17]^=le,U[26]^=se,U[27]^=le,U[36]^=se,U[37]^=le,U[46]^=se,U[47]^=le,se=he^(ge<<1|ne>>>31),le=oe^(ne<<1|ge>>>31),U[8]^=se,U[9]^=le,U[18]^=se,U[19]^=le,U[28]^=se,U[29]^=le,U[38]^=se,U[39]^=le,U[48]^=se,U[49]^=le,ce=U[0],W=U[1],Vs=U[11]<<4|U[10]>>>28,Nt=U[10]<<4|U[11]>>>28,ve=U[20]<<3|U[21]>>>29,Ie=U[21]<<3|U[20]>>>29,we=U[31]<<9|U[30]>>>23,Be=U[30]<<9|U[31]>>>23,it=U[40]<<18|U[41]>>>14,Rr=U[41]<<18|U[40]>>>14,Qe=U[2]<<1|U[3]>>>31,xe=U[3]<<1|U[2]>>>31,V=U[13]<<12|U[12]>>>20,J=U[12]<<12|U[13]>>>20,er=U[22]<<10|U[23]>>>22,Ws=U[23]<<10|U[22]>>>22,ke=U[33]<<13|U[32]>>>19,Le=U[32]<<13|U[33]>>>19,Me=U[42]<<2|U[43]>>>30,ye=U[43]<<2|U[42]>>>30,rr=U[5]<<30|U[4]>>>2,us=U[4]<<30|U[5]>>>2,Ce=U[14]<<6|U[15]>>>26,Fe=U[15]<<6|U[14]>>>26,K=U[25]<<11|U[24]>>>21,fe=U[24]<<11|U[25]>>>21,Yt=U[34]<<15|U[35]>>>17,Vt=U[35]<<15|U[34]>>>17,Oe=U[45]<<29|U[44]>>>3,ue=U[44]<<29|U[45]>>>3,G=U[6]<<28|U[7]>>>4,te=U[7]<<28|U[6]>>>4,ar=U[17]<<23|U[16]>>>9,or=U[16]<<23|U[17]>>>9,Re=U[26]<<25|U[27]>>>7,ot=U[27]<<25|U[26]>>>7,ie=U[36]<<21|U[37]>>>11,Ee=U[37]<<21|U[36]>>>11,Ks=U[47]<<24|U[46]>>>8,Xt=U[46]<<24|U[47]>>>8,Ct=U[8]<<27|U[9]>>>5,tr=U[9]<<27|U[8]>>>5,ae=U[18]<<20|U[19]>>>12,pe=U[19]<<20|U[18]>>>12,Ei=U[29]<<7|U[28]>>>25,q=U[28]<<7|U[29]>>>25,Kt=U[38]<<8|U[39]>>>24,bt=U[39]<<8|U[38]>>>24,C=U[48]<<14|U[49]>>>18,P=U[49]<<14|U[48]>>>18,U[0]=ce^~V&K,U[1]=W^~J&fe,U[10]=G^~ae&ve,U[11]=te^~pe&Ie,U[20]=Qe^~Ce&Re,U[21]=xe^~Fe&ot,U[30]=Ct^~Vs&er,U[31]=tr^~Nt&Ws,U[40]=rr^~ar&Ei,U[41]=us^~or&q,U[2]=V^~K&ie,U[3]=J^~fe&Ee,U[12]=ae^~ve&ke,U[13]=pe^~Ie&Le,U[22]=Ce^~Re&Kt,U[23]=Fe^~ot&bt,U[32]=Vs^~er&Yt,U[33]=Nt^~Ws&Vt,U[42]=ar^~Ei&we,U[43]=or^~q&Be,U[4]=K^~ie&C,U[5]=fe^~Ee&P,U[14]=ve^~ke&Oe,U[15]=Ie^~Le&ue,U[24]=Re^~Kt&it,U[25]=ot^~bt&Rr,U[34]=er^~Yt&Ks,U[35]=Ws^~Vt&Xt,U[44]=Ei^~we&Me,U[45]=q^~Be&ye,U[6]=ie^~C&ce,U[7]=Ee^~P&W,U[16]=ke^~Oe&G,U[17]=Le^~ue&te,U[26]=Kt^~it&Qe,U[27]=bt^~Rr&xe,U[36]=Yt^~Ks&Ct,U[37]=Vt^~Xt&tr,U[46]=we^~Me&rr,U[47]=Be^~ye&us,U[8]=C^~ce&V,U[9]=P^~W&J,U[18]=Oe^~G&ae,U[19]=ue^~te&pe,U[28]=it^~Qe&Ce,U[29]=Rr^~xe&Fe,U[38]=Ks^~Ct&Vs,U[39]=Xt^~tr&Nt,U[48]=Me^~rr&ar,U[49]=ye^~us&or,U[0]^=m[Ae],U[1]^=m[Ae+1]};if(o)t.exports=b;else for(F=0;F<S.length;++F)i[S[F]]=b[S[F]]})()})(sQ);var S7=sQ.exports;const I7=iA(S7);function _n(t){return"0x"+I7.keccak_256(ft(t))}const R7="strings/5.7.0",aQ=new be(R7);var cg;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(cg||(cg={}));var bs;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(bs||(bs={}));function U7(t,e,r,n,i){return aQ.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function oQ(t,e,r,n,i){if(t===bs.BAD_PREFIX||t===bs.UNEXPECTED_CONTINUE){let s=0;for(let a=e+1;a<r.length&&r[a]>>6===2;a++)s++;return s}return t===bs.OVERRUN?r.length-e-1:0}function F7(t,e,r,n,i){return t===bs.OVERLONG?(n.push(i),0):(n.push(65533),oQ(t,e,r))}const k7=Object.freeze({error:U7,ignore:oQ,replace:F7});function lQ(t,e){e==null&&(e=k7.error),t=ft(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(!(i>>7)){r.push(i);continue}let s=null,a=null;if((i&224)===192)s=1,a=127;else if((i&240)===224)s=2,a=2047;else if((i&248)===240)s=3,a=65535;else{(i&192)===128?n+=e(bs.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(bs.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(bs.OVERRUN,n-1,t,r);continue}let o=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let A=t[n];if((A&192)!=128){n+=e(bs.MISSING_CONTINUE,n,t,r),o=null;break}o=o<<6|A&63,n++}if(o!==null){if(o>1114111){n+=e(bs.OUT_OF_RANGE,n-1-s,t,r,o);continue}if(o>=55296&&o<=57343){n+=e(bs.UTF16_SURROGATE,n-1-s,t,r,o);continue}if(o<=a){n+=e(bs.OVERLONG,n-1-s,t,r,o);continue}r.push(o)}}return r}function Yo(t,e=cg.current){e!=cg.current&&(aQ.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((i&1023)<<10)+(s&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return ft(r)}function L7(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function A0(t,e){return L7(lQ(t,e))}function P7(t,e=cg.current){return lQ(Yo(t,e))}function fd(t){return _n(Yo(t))}const AQ="hash/5.7.0";function cQ(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,a){n.call(s,function(o){a>0&&Array.isArray(o)?i(o,a-1):r.push(o)})};return i(t,e),r}function O7(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function D7(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let E=1;E<n;E++)s.push(i+=r());let a=r(),o=e;e+=a;let l=0,A=0;function c(){return l==0&&(A=A<<8|t[e++],l=8),A>>--l&1}const u=31,h=Math.pow(2,u),d=h>>>1,f=d>>1,m=h-1;let g=0;for(let E=0;E<u;E++)g=g<<1|c();let p=[],v=0,y=h;for(;;){let E=Math.floor(((g-v+1)*i-1)/y),x=0,B=n;for(;B-x>1;){let I=x+B>>>1;E<s[I]?B=I:x=I}if(x==0)break;p.push(x);let M=v+Math.floor(y*s[x]/i),R=v+Math.floor(y*s[x+1]/i)-1;for(;!((M^R)&d);)g=g<<1&m|c(),M=M<<1&m,R=R<<1&m|1;for(;M&~R&f;)g=g&d|g<<1&m>>>1|c(),M=M<<1^d,R=(R^d)<<1|d|1;v=M,y=1+R-M}let _=n-4;return p.map(E=>{switch(E-_){case 3:return _+65792+(t[o++]<<16|t[o++]<<8|t[o++]);case 2:return _+256+(t[o++]<<8|t[o++]);case 1:return _+t[o++];default:return E-1}})}function N7(t){let e=0;return()=>t[e++]}function Q7(t){return N7(D7(t))}function H7(t){return t&1?~t>>1:t>>1}function j7(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function OU(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function z7(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=H7(e());return r}function Jw(t,e){let r=OU(t(),t),n=t(),i=OU(n,t),s=j7(n,t);for(let a=0;a<n;a++)for(let o=0;o<s[a];o++)r.push(i[a]+o);return e?r.map(a=>e[a]):r}function G7(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(W7(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(K7(r,t))}return O7(cQ(e))}function V7(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function uQ(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)z7(t,r).forEach((s,a)=>n[a].push(s));return n}function W7(t,e){let r=1+e(),n=e(),i=V7(e),s=uQ(i.length,1+t,e);return cQ(s.map((a,o)=>{const l=a[0],A=a.slice(1);return Array(i[o]).fill(void 0).map((c,u)=>{let h=u*n;return[l+u*r,A.map(d=>d+h)]})}))}function K7(t,e){let r=1+e();return uQ(r,1+t,e).map(n=>[n[0],n.slice(1)])}function Y7(t){let e=Jw(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let A=Jw(t,e);if(A.length==0)break;n.push({set:new Set(A),node:r()})}n.sort((A,c)=>c.set.size-A.set.size);let i=t(),s=i%3;i=i/3|0;let a=!!(i&1);i>>=1;let o=i==1,l=i==2;return{branches:n,valid:s,fe0f:a,save:o,check:l}}}function X7(){return Q7(tQ("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Pb=X7(),Z7=new Set(Jw(Pb)),J7=new Set(Jw(Pb)),q7=G7(Pb),$7=Y7(Pb),DU=45,NU=95;function hQ(t){return P7(t)}function eW(t){return t.filter(e=>e!=65039)}function dQ(t){for(let e of t.split(".")){let r=hQ(e);try{for(let n=r.lastIndexOf(NU)-1;n>=0;n--)if(r[n]!==NU)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===DU&&r[3]===DU)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function tW(t){return dQ(rW(t,eW))}function rW(t,e){let r=hQ(t).reverse(),n=[];for(;r.length;){let i=iW(r);if(i){n.push(...e(i));continue}let s=r.pop();if(Z7.has(s)){n.push(s);continue}if(J7.has(s))continue;let a=q7[s];if(a){n.push(...a);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return dQ(nW(String.fromCodePoint(...n)))}function nW(t){return t.normalize("NFC")}function iW(t,e){var r;let n=$7,i,s,a=[],o=t.length;for(e&&(e.length=0);o;){let l=t[--o];if(n=(r=n.branches.find(A=>A.set.has(l)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=l;else if(n.check&&l===s)break;a.push(l),n.fe0f&&(a.push(65039),o>0&&t[o-1]==65039&&o--),n.valid&&(i=a.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(o).reverse()),t.length=o)}return i}const sW=new be(AQ),fQ=new Uint8Array(32);fQ.fill(0);function QU(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function pQ(t){const e=Yo(tW(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(QU(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(QU(e.slice(n))),r}function rw(t){typeof t!="string"&&sW.throwArgumentError("invalid ENS name; not a string","name",t);let e=fQ;const r=pQ(t);for(;r.length;)e=_n(Bs([e,_n(r.pop())]));return at(e)}function aW(t){return at(Bs(pQ(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const oW="rlp/5.7.0",Mo=new be(oW);function HU(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function jU(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function mQ(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(mQ(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=HU(n.length);return i.unshift(247+i.length),i.concat(n)}s2(t)||Mo.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(ft(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=HU(e.length);return r.unshift(183+r.length),r.concat(e)}function Ob(t){return at(mQ(t))}function zU(t,e,r,n){const i=[];for(;r<e+1+n;){const s=gQ(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&Mo.throwError("child data too short",be.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function gQ(t,e){if(t.length===0&&Mo.throwError("data too short",be.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Mo.throwError("data short segment too short",be.errors.BUFFER_OVERRUN,{});const n=jU(t,e+1,r);return e+1+r+n>t.length&&Mo.throwError("data long segment too short",be.errors.BUFFER_OVERRUN,{}),zU(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Mo.throwError("data array too short",be.errors.BUFFER_OVERRUN,{}),zU(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Mo.throwError("data array too short",be.errors.BUFFER_OVERRUN,{});const n=jU(t,e+1,r);e+1+r+n>t.length&&Mo.throwError("data array too short",be.errors.BUFFER_OVERRUN,{});const i=at(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Mo.throwError("data too short",be.errors.BUFFER_OVERRUN,{});const n=at(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:at(t[e])}}function a2(t){const e=ft(t),r=gQ(e,0);return r.consumed!==e.length&&Mo.throwArgumentError("invalid rlp data","data",t),r.result}const lW="address/5.7.0",pd=new be(lW);function GU(t){It(t,20)||pd.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=ft(_n(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const AW=9007199254740991;function cW(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const o2={};for(let t=0;t<10;t++)o2[String(t)]=String(t);for(let t=0;t<26;t++)o2[String.fromCharCode(65+t)]=String(10+t);const VU=Math.floor(cW(AW));function uW(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>o2[n]).join("");for(;e.length>=VU;){let n=e.substring(0,VU);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function ri(t){let e=null;if(typeof t!="string"&&pd.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=GU(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&pd.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==uW(t)&&pd.throwArgumentError("bad icap checksum","address",t),e=h7(t.substring(4));e.length<40;)e="0"+e;e=GU("0x"+e)}else pd.throwArgumentError("invalid address","address",t);return e}function vQ(t){let e=null;try{e=ri(t.from)}catch{pd.throwArgumentError("missing from address","transaction",t)}const r=df(ft(We.from(t.nonce).toHexString()));return ri(ui(_n(Ob([e,r])),12))}var hW=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const Hr=new be(AQ),yQ=new Uint8Array(32);yQ.fill(0);const dW=We.from(-1),wQ=We.from(0),bQ=We.from(1),fW=We.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function pW(t){const e=ft(t),r=e.length%32;return r?Ki([e,yQ.slice(r)]):at(e)}const mW=rn(bQ.toHexString(),32),gW=rn(wQ.toHexString(),32),WU={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},yx=["name","version","chainId","verifyingContract","salt"];function KU(t){return function(e){return typeof e!="string"&&Hr.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const vW={name:KU("name"),version:KU("version"),chainId:function(t){try{return We.from(t).toString()}catch{}return Hr.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return ri(t).toLowerCase()}catch{}return Hr.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=ft(t);if(e.length!==32)throw new Error("bad length");return at(e)}catch{}return Hr.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function wx(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Hr.throwArgumentError("invalid numeric width","type",t);const i=fW.mask(r?n-1:n),s=r?i.add(bQ).mul(dW):wQ;return function(a){const o=We.from(a);return(o.lt(s)||o.gt(i))&&Hr.throwArgumentError(`value out-of-bounds for ${t}`,"value",a),rn(o.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Hr.throwArgumentError("invalid bytes width","type",t),function(n){return ft(n).length!==r&&Hr.throwArgumentError(`invalid length for ${t}`,"value",n),pW(n)}}}switch(t){case"address":return function(e){return rn(ri(e),32)};case"bool":return function(e){return e?mW:gW};case"bytes":return function(e){return _n(e)};case"string":return function(e){return fd(e)}}return null}function YU(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class vs{constructor(e){Ue(this,"types",Object.freeze(Us(e))),Ue(this,"_encoderCache",{}),Ue(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(o=>{r[o]={},n[o]=[],i[o]={}});for(const o in e){const l={};e[o].forEach(A=>{l[A.name]&&Hr.throwArgumentError(`duplicate variable name ${JSON.stringify(A.name)} in ${JSON.stringify(o)}`,"types",e),l[A.name]=!0;const c=A.type.match(/^([^\x5b]*)(\x5b|$)/)[1];c===o&&Hr.throwArgumentError(`circular type reference to ${JSON.stringify(c)}`,"types",e),!wx(c)&&(n[c]||Hr.throwArgumentError(`unknown type ${JSON.stringify(c)}`,"types",e),n[c].push(o),r[o][c]=!0)})}const s=Object.keys(n).filter(o=>n[o].length===0);s.length===0?Hr.throwArgumentError("missing primary type","types",e):s.length>1&&Hr.throwArgumentError(`ambiguous primary types or unused types: ${s.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),Ue(this,"primaryType",s[0]);function a(o,l){l[o]&&Hr.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),l[o]=!0,Object.keys(r[o]).forEach(A=>{n[A]&&(a(A,l),Object.keys(l).forEach(c=>{i[c][A]=!0}))}),delete l[o]}a(this.primaryType,{});for(const o in i){const l=Object.keys(i[o]);l.sort(),this._types[o]=YU(o,e[o])+l.map(A=>YU(A,e[A])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=wx(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),a=parseInt(r[3]);return o=>{a>=0&&o.length!==a&&Hr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",o);let l=o.map(s);return this._types[i]&&(l=l.map(_n)),_n(Ki(l))}}const n=this.types[e];if(n){const i=fd(this._types[e]);return s=>{const a=n.map(({name:o,type:l})=>{const A=this.getEncoder(l)(s[o]);return this._types[l]?_n(A):A});return a.unshift(i),Ki(a)}}return Hr.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Hr.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return _n(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(wx(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const a=i[1],o=parseInt(i[3]);return o>=0&&r.length!==o&&Hr.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(l=>this._visit(a,l,n))}const s=this.types[e];return s?s.reduce((a,{name:o,type:l})=>(a[o]=this._visit(l,r[o],n),a),{}):Hr.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new vs(e)}static getPrimaryType(e){return vs.from(e).primaryType}static hashStruct(e,r,n){return vs.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=WU[n];i||Hr.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>yx.indexOf(n.name)-yx.indexOf(i.name)),vs.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return Ki(["0x1901",vs.hashDomain(e),vs.from(r).hash(n)])}static hash(e,r,n){return _n(vs.encode(e,r,n))}static resolveNames(e,r,n,i){return hW(this,void 0,void 0,function*(){e=Or(e);const s={};e.verifyingContract&&!It(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const a=vs.from(r);a.visit(n,(o,l)=>(o==="address"&&!It(l,20)&&(s[l]="0x"),l));for(const o in s)s[o]=yield i(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=a.visit(n,(o,l)=>o==="address"&&s[l]?s[l]:l),{domain:e,value:n}})}static getPayload(e,r,n){vs.hashDomain(e);const i={},s=[];yx.forEach(l=>{const A=e[l];A!=null&&(i[l]=vW[l](A),s.push({name:l,type:WU[l]}))});const a=vs.from(r),o=Or(r);return o.EIP712Domain?Hr.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):o.EIP712Domain=s,a.encode(n),{types:o,domain:i,primaryType:a.primaryType,message:a.visit(n,(l,A)=>{if(l.match(/^bytes(\d*)/))return at(ft(A));if(l.match(/^u?int/))return We.from(A).toString();switch(l){case"address":return A.toLowerCase();case"bool":return!!A;case"string":return typeof A!="string"&&Hr.throwArgumentError("invalid string","value",A),A}return Hr.throwArgumentError("unsupported type","type",l)})}}}var _Q={},Dt={},c0=xQ;function xQ(t,e){if(!t)throw new Error(e||"Assertion failed")}xQ.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var IM={exports:{}};typeof Object.create=="function"?IM.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:IM.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}};var yW=IM.exports,wW=c0,bW=yW;Dt.inherits=bW;function _W(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function xW(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):_W(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}Dt.toArray=xW;function EW(t){for(var e="",r=0;r<t.length;r++)e+=BQ(t[r].toString(16));return e}Dt.toHex=EW;function EQ(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Dt.htonl=EQ;function BW(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=EQ(i)),r+=MQ(i.toString(16))}return r}Dt.toHex32=BW;function BQ(t){return t.length===1?"0"+t:t}Dt.zero2=BQ;function MQ(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Dt.zero8=MQ;function MW(t,e,r,n){var i=r-e;wW(i%4===0);for(var s=new Array(i/4),a=0,o=e;a<s.length;a++,o+=4){var l;n==="big"?l=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:l=t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],s[a]=l>>>0}return s}Dt.join32=MW;function TW(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}Dt.split32=TW;function CW(t,e){return t>>>e|t<<32-e}Dt.rotr32=CW;function SW(t,e){return t<<e|t>>>32-e}Dt.rotl32=SW;function IW(t,e){return t+e>>>0}Dt.sum32=IW;function RW(t,e,r){return t+e+r>>>0}Dt.sum32_3=RW;function UW(t,e,r,n){return t+e+r+n>>>0}Dt.sum32_4=UW;function FW(t,e,r,n,i){return t+e+r+n+i>>>0}Dt.sum32_5=FW;function kW(t,e,r,n){var i=t[e],s=t[e+1],a=n+s>>>0,o=(a<n?1:0)+r+i;t[e]=o>>>0,t[e+1]=a}Dt.sum64=kW;function LW(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}Dt.sum64_hi=LW;function PW(t,e,r,n){var i=e+n;return i>>>0}Dt.sum64_lo=PW;function OW(t,e,r,n,i,s,a,o){var l=0,A=e;A=A+n>>>0,l+=A<e?1:0,A=A+s>>>0,l+=A<s?1:0,A=A+o>>>0,l+=A<o?1:0;var c=t+r+i+a+l;return c>>>0}Dt.sum64_4_hi=OW;function DW(t,e,r,n,i,s,a,o){var l=e+n+s+o;return l>>>0}Dt.sum64_4_lo=DW;function NW(t,e,r,n,i,s,a,o,l,A){var c=0,u=e;u=u+n>>>0,c+=u<e?1:0,u=u+s>>>0,c+=u<s?1:0,u=u+o>>>0,c+=u<o?1:0,u=u+A>>>0,c+=u<A?1:0;var h=t+r+i+a+l+c;return h>>>0}Dt.sum64_5_hi=NW;function QW(t,e,r,n,i,s,a,o,l,A){var c=e+n+s+o+A;return c>>>0}Dt.sum64_5_lo=QW;function HW(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}Dt.rotr64_hi=HW;function jW(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Dt.rotr64_lo=jW;function zW(t,e,r){return t>>>r}Dt.shr64_hi=zW;function GW(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}Dt.shr64_lo=GW;var Hf={},XU=Dt,VW=c0;function Db(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Hf.BlockHash=Db;Db.prototype.update=function(t,e){if(t=XU.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var r=t.length%this._delta8;this.pending=t.slice(t.length-r,t.length),this.pending.length===0&&(this.pending=null),t=XU.join32(t,0,t.length-r,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this};Db.prototype.digest=function(t){return this.update(this._pad()),VW(this.pending===null),this._digest(t)};Db.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=t>>>24&255,n[i++]=t>>>16&255,n[i++]=t>>>8&255,n[i++]=t&255}else for(n[i++]=t&255,n[i++]=t>>>8&255,n[i++]=t>>>16&255,n[i++]=t>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n};var jf={},nl={},WW=Dt,Ho=WW.rotr32;function KW(t,e,r,n){if(t===0)return TQ(e,r,n);if(t===1||t===3)return SQ(e,r,n);if(t===2)return CQ(e,r,n)}nl.ft_1=KW;function TQ(t,e,r){return t&e^~t&r}nl.ch32=TQ;function CQ(t,e,r){return t&e^t&r^e&r}nl.maj32=CQ;function SQ(t,e,r){return t^e^r}nl.p32=SQ;function YW(t){return Ho(t,2)^Ho(t,13)^Ho(t,22)}nl.s0_256=YW;function XW(t){return Ho(t,6)^Ho(t,11)^Ho(t,25)}nl.s1_256=XW;function ZW(t){return Ho(t,7)^Ho(t,18)^t>>>3}nl.g0_256=ZW;function JW(t){return Ho(t,17)^Ho(t,19)^t>>>10}nl.g1_256=JW;var ff=Dt,qW=Hf,$W=nl,bx=ff.rotl32,fp=ff.sum32,eK=ff.sum32_5,tK=$W.ft_1,IQ=qW.BlockHash,rK=[1518500249,1859775393,2400959708,3395469782];function Xo(){if(!(this instanceof Xo))return new Xo;IQ.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ff.inherits(Xo,IQ);var nK=Xo;Xo.blockSize=512;Xo.outSize=160;Xo.hmacStrength=80;Xo.padLength=64;Xo.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=bx(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],l=this.h[4];for(n=0;n<r.length;n++){var A=~~(n/20),c=eK(bx(i,5),tK(A,s,a,o),l,r[n],rK[A]);l=o,o=a,a=bx(s,30),s=i,i=c}this.h[0]=fp(this.h[0],i),this.h[1]=fp(this.h[1],s),this.h[2]=fp(this.h[2],a),this.h[3]=fp(this.h[3],o),this.h[4]=fp(this.h[4],l)};Xo.prototype._digest=function(t){return t==="hex"?ff.toHex32(this.h,"big"):ff.split32(this.h,"big")};var pf=Dt,iK=Hf,zf=nl,sK=c0,Ia=pf.sum32,aK=pf.sum32_4,oK=pf.sum32_5,lK=zf.ch32,AK=zf.maj32,cK=zf.s0_256,uK=zf.s1_256,hK=zf.g0_256,dK=zf.g1_256,RQ=iK.BlockHash,fK=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Zo(){if(!(this instanceof Zo))return new Zo;RQ.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=fK,this.W=new Array(64)}pf.inherits(Zo,RQ);var UQ=Zo;Zo.blockSize=512;Zo.outSize=256;Zo.hmacStrength=192;Zo.padLength=64;Zo.prototype._update=function(t,e){for(var r=this.W,n=0;n<16;n++)r[n]=t[e+n];for(;n<r.length;n++)r[n]=aK(dK(r[n-2]),r[n-7],hK(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],a=this.h[2],o=this.h[3],l=this.h[4],A=this.h[5],c=this.h[6],u=this.h[7];for(sK(this.k.length===r.length),n=0;n<r.length;n++){var h=oK(u,uK(l),lK(l,A,c),this.k[n],r[n]),d=Ia(cK(i),AK(i,s,a));u=c,c=A,A=l,l=Ia(o,h),o=a,a=s,s=i,i=Ia(h,d)}this.h[0]=Ia(this.h[0],i),this.h[1]=Ia(this.h[1],s),this.h[2]=Ia(this.h[2],a),this.h[3]=Ia(this.h[3],o),this.h[4]=Ia(this.h[4],l),this.h[5]=Ia(this.h[5],A),this.h[6]=Ia(this.h[6],c),this.h[7]=Ia(this.h[7],u)};Zo.prototype._digest=function(t){return t==="hex"?pf.toHex32(this.h,"big"):pf.split32(this.h,"big")};var RM=Dt,FQ=UQ;function Wl(){if(!(this instanceof Wl))return new Wl;FQ.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}RM.inherits(Wl,FQ);var pK=Wl;Wl.blockSize=512;Wl.outSize=224;Wl.hmacStrength=192;Wl.padLength=64;Wl.prototype._digest=function(t){return t==="hex"?RM.toHex32(this.h.slice(0,7),"big"):RM.split32(this.h.slice(0,7),"big")};var as=Dt,mK=Hf,gK=c0,jo=as.rotr64_hi,zo=as.rotr64_lo,kQ=as.shr64_hi,LQ=as.shr64_lo,fA=as.sum64,_x=as.sum64_hi,xx=as.sum64_lo,vK=as.sum64_4_hi,yK=as.sum64_4_lo,wK=as.sum64_5_hi,bK=as.sum64_5_lo,PQ=mK.BlockHash,_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function so(){if(!(this instanceof so))return new so;PQ.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=_K,this.W=new Array(160)}as.inherits(so,PQ);var OQ=so;so.blockSize=1024;so.outSize=512;so.hmacStrength=192;so.padLength=128;so.prototype._prepareBlock=function(t,e){for(var r=this.W,n=0;n<32;n++)r[n]=t[e+n];for(;n<r.length;n+=2){var i=FK(r[n-4],r[n-3]),s=kK(r[n-4],r[n-3]),a=r[n-14],o=r[n-13],l=RK(r[n-30],r[n-29]),A=UK(r[n-30],r[n-29]),c=r[n-32],u=r[n-31];r[n]=vK(i,s,a,o,l,A,c,u),r[n+1]=yK(i,s,a,o,l,A,c,u)}};so.prototype._update=function(t,e){this._prepareBlock(t,e);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],o=this.h[4],l=this.h[5],A=this.h[6],c=this.h[7],u=this.h[8],h=this.h[9],d=this.h[10],f=this.h[11],m=this.h[12],g=this.h[13],p=this.h[14],v=this.h[15];gK(this.k.length===r.length);for(var y=0;y<r.length;y+=2){var _=p,E=v,x=SK(u,h),B=IK(u,h),M=xK(u,h,d,f,m),R=EK(u,h,d,f,m,g),I=this.k[y],L=this.k[y+1],D=r[y],w=r[y+1],b=wK(_,E,x,B,M,R,I,L,D,w),S=bK(_,E,x,B,M,R,I,L,D,w);_=TK(n,i),E=CK(n,i),x=BK(n,i,s,a,o),B=MK(n,i,s,a,o,l);var F=_x(_,E,x,B),k=xx(_,E,x,B);p=m,v=g,m=d,g=f,d=u,f=h,u=_x(A,c,b,S),h=xx(c,c,b,S),A=o,c=l,o=s,l=a,s=n,a=i,n=_x(b,S,F,k),i=xx(b,S,F,k)}fA(this.h,0,n,i),fA(this.h,2,s,a),fA(this.h,4,o,l),fA(this.h,6,A,c),fA(this.h,8,u,h),fA(this.h,10,d,f),fA(this.h,12,m,g),fA(this.h,14,p,v)};so.prototype._digest=function(t){return t==="hex"?as.toHex32(this.h,"big"):as.split32(this.h,"big")};function xK(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function EK(t,e,r,n,i,s){var a=e&n^~e&s;return a<0&&(a+=4294967296),a}function BK(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function MK(t,e,r,n,i,s){var a=e&n^e&s^n&s;return a<0&&(a+=4294967296),a}function TK(t,e){var r=jo(t,e,28),n=jo(e,t,2),i=jo(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function CK(t,e){var r=zo(t,e,28),n=zo(e,t,2),i=zo(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function SK(t,e){var r=jo(t,e,14),n=jo(t,e,18),i=jo(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function IK(t,e){var r=zo(t,e,14),n=zo(t,e,18),i=zo(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function RK(t,e){var r=jo(t,e,1),n=jo(t,e,8),i=kQ(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function UK(t,e){var r=zo(t,e,1),n=zo(t,e,8),i=LQ(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function FK(t,e){var r=jo(t,e,19),n=jo(e,t,29),i=kQ(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function kK(t,e){var r=zo(t,e,19),n=zo(e,t,29),i=LQ(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var UM=Dt,DQ=OQ;function Kl(){if(!(this instanceof Kl))return new Kl;DQ.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}UM.inherits(Kl,DQ);var LK=Kl;Kl.blockSize=1024;Kl.outSize=384;Kl.hmacStrength=192;Kl.padLength=128;Kl.prototype._digest=function(t){return t==="hex"?UM.toHex32(this.h.slice(0,12),"big"):UM.split32(this.h.slice(0,12),"big")};jf.sha1=nK;jf.sha224=pK;jf.sha256=UQ;jf.sha384=LK;jf.sha512=OQ;var NQ={},Mu=Dt,PK=Hf,H0=Mu.rotl32,ZU=Mu.sum32,pp=Mu.sum32_3,JU=Mu.sum32_4,QQ=PK.BlockHash;function Jo(){if(!(this instanceof Jo))return new Jo;QQ.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Mu.inherits(Jo,QQ);NQ.ripemd160=Jo;Jo.blockSize=512;Jo.outSize=160;Jo.hmacStrength=192;Jo.padLength=64;Jo.prototype._update=function(t,e){for(var r=this.h[0],n=this.h[1],i=this.h[2],s=this.h[3],a=this.h[4],o=r,l=n,A=i,c=s,u=a,h=0;h<80;h++){var d=ZU(H0(JU(r,qU(h,n,i,s),t[NK[h]+e],OK(h)),HK[h]),a);r=a,a=s,s=H0(i,10),i=n,n=d,d=ZU(H0(JU(o,qU(79-h,l,A,c),t[QK[h]+e],DK(h)),jK[h]),u),o=u,u=c,c=H0(A,10),A=l,l=d}d=pp(this.h[1],i,c),this.h[1]=pp(this.h[2],s,u),this.h[2]=pp(this.h[3],a,o),this.h[3]=pp(this.h[4],r,l),this.h[4]=pp(this.h[0],n,A),this.h[0]=d};Jo.prototype._digest=function(t){return t==="hex"?Mu.toHex32(this.h,"little"):Mu.split32(this.h,"little")};function qU(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function OK(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function DK(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var NK=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],QK=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],HK=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],jK=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],zK=Dt,GK=c0;function mf(t,e,r){if(!(this instanceof mf))return new mf(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(zK.toArray(e,r))}var VK=mf;mf.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),GK(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=new this.Hash().update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=new this.Hash().update(t)};mf.prototype.update=function(t,e){return this.inner.update(t,e),this};mf.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};(function(t){var e=t;e.utils=Dt,e.common=Hf,e.sha=jf,e.ripemd=NQ,e.hmac=VK,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(_Q);const xo=iA(_Q);function $U(t){return"0x"+xo.sha256().update(ft(t)).digest("hex")}const WK="web/5.7.1";var KK=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};function YK(t,e){return KK(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const a=e.fetchOptions;a.mode&&(r.mode=a.mode),a.cache&&(r.cache=a.cache),a.credentials&&(r.credentials=a.credentials),a.redirect&&(r.redirect=a.redirect),a.referrer&&(r.referrer=a.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((a,o)=>{s[o.toLowerCase()]=a}):n.headers.keys().forEach(a=>{s[a.toLowerCase()]=n.headers.get(a)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:ft(new Uint8Array(i))}})}var XK=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const Da=new be(WK);function e3(t){return new Promise(e=>{setTimeout(e,t)})}function pA(t,e){if(t==null)return null;if(typeof t=="string")return t;if(s2(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return A0(t)}catch{}return at(t)}return t}function ZK(t){return Yo(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function JK(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;Da.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;Da.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const a=typeof t=="object"?!!t.errorPassThrough:!1,o={};let l=null;const A={method:"GET"};let c=!1,u=2*60*1e3;if(typeof t=="string")l=t;else if(typeof t=="object"){if((t==null||t.url==null)&&Da.throwArgumentError("missing URL","connection.url",t),l=t.url,typeof t.timeout=="number"&&t.timeout>0&&(u=t.timeout),t.headers)for(const p in t.headers)o[p.toLowerCase()]={key:p,value:String(t.headers[p])},["if-none-match","if-modified-since"].indexOf(p.toLowerCase())>=0&&(c=!0);if(A.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){l.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&Da.throwError("basic authentication requires a secure https url",be.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:t.user,password:"[REDACTED]"});const p=t.user+":"+t.password;o.authorization={key:"Authorization",value:"Basic "+rQ(Yo(p))}}t.skipFetchSetup!=null&&(A.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(A.fetchOptions=Or(t.fetchOptions))}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=l?l.match(h):null;if(d)try{const p={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?tQ(d[3]):ZK(d[3])};let v=p.body;return r&&(v=r(p.body,p)),Promise.resolve(v)}catch(p){Da.throwError("processing response error",be.errors.SERVER_ERROR,{body:pA(d[1],d[2]),error:p,requestBody:null,requestMethod:"GET",url:l})}e&&(A.method="POST",A.body=e,o["content-type"]==null&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),o["content-length"]==null&&(o["content-length"]={key:"Content-Length",value:String(e.length)}));const f={};Object.keys(o).forEach(p=>{const v=o[p];f[v.key]=v.value}),A.headers=f;const m=function(){let p=null;return{promise:new Promise(function(v,y){u&&(p=setTimeout(()=>{p!=null&&(p=null,y(Da.makeError("timeout",be.errors.TIMEOUT,{requestBody:pA(A.body,f["content-type"]),requestMethod:A.method,timeout:u,url:l})))},u))}),cancel:function(){p!=null&&(clearTimeout(p),p=null)}}}(),g=function(){return XK(this,void 0,void 0,function*(){for(let p=0;p<n;p++){let v=null;try{if(v=yield YK(l,A),p<n){if(v.statusCode===301||v.statusCode===302){const _=v.headers.location||"";if(A.method==="GET"&&_.match(/^https:/)){l=v.headers.location;continue}}else if(v.statusCode===429){let _=!0;if(i&&(_=yield i(p,l)),_){let E=0;const x=v.headers["retry-after"];typeof x=="string"&&x.match(/^[1-9][0-9]*$/)?E=parseInt(x)*1e3:E=s*parseInt(String(Math.random()*Math.pow(2,p))),yield e3(E);continue}}}}catch(_){v=_.response,v==null&&(m.cancel(),Da.throwError("missing response",be.errors.SERVER_ERROR,{requestBody:pA(A.body,f["content-type"]),requestMethod:A.method,serverError:_,url:l}))}let y=v.body;if(c&&v.statusCode===304?y=null:!a&&(v.statusCode<200||v.statusCode>=300)&&(m.cancel(),Da.throwError("bad response",be.errors.SERVER_ERROR,{status:v.statusCode,headers:v.headers,body:pA(y,v.headers?v.headers["content-type"]:null),requestBody:pA(A.body,f["content-type"]),requestMethod:A.method,url:l})),r)try{const _=yield r(y,v);return m.cancel(),_}catch(_){if(_.throttleRetry&&p<n){let E=!0;if(i&&(E=yield i(p,l)),E){const x=s*parseInt(String(Math.random()*Math.pow(2,p)));yield e3(x);continue}}m.cancel(),Da.throwError("processing response error",be.errors.SERVER_ERROR,{body:pA(y,v.headers?v.headers["content-type"]:null),error:_,requestBody:pA(A.body,f["content-type"]),requestMethod:A.method,url:l})}return m.cancel(),y}return Da.throwError("failed response",be.errors.SERVER_ERROR,{requestBody:pA(A.body,f["content-type"]),requestMethod:A.method,url:l})})}();return Promise.race([m.promise,g])}function Nb(t,e,r){let n=(s,a)=>{let o=null;if(s!=null)try{o=JSON.parse(A0(s))}catch(l){Da.throwError("invalid JSON",be.errors.SERVER_ERROR,{body:s,error:l})}return r&&(o=r(o,a)),o},i=null;if(e!=null){i=Yo(e);const s=typeof t=="string"?{url:t}:Or(t);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Or(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return JK(t,i,n)}function md(t,e){return e||(e={}),e=Or(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const a=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{a()&&n(new Error("timeout"))},e.timeout));const o=e.retryLimit;let l=0;function A(){return t().then(function(c){if(c!==void 0)a()&&r(c);else if(e.oncePoll)e.oncePoll.once("poll",A);else if(e.onceBlock)e.onceBlock.once("block",A);else if(!s){if(l++,l>o){a()&&n(new Error("retry limit reached"));return}let u=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));u<e.floor&&(u=e.floor),u>e.ceiling&&(u=e.ceiling),setTimeout(A,u)}return null},function(c){a()&&n(c)})}A()})}var qw="qpzry9x8gf2tvdw0s3jn54khce6mua7l",FM={};for(var j0=0;j0<qw.length;j0++){var Ex=qw.charAt(j0);if(FM[Ex]!==void 0)throw new TypeError(Ex+" is ambiguous");FM[Ex]=j0}function Wd(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function HQ(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Wd(e)^n>>5}for(e=Wd(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Wd(e)^i&31}return e}function qK(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=HQ(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var a=e[s];if(a>>5)throw new Error("Non 5-bit word");n=Wd(n)^a,i+=qw.charAt(a)}for(s=0;s<6;++s)n=Wd(n);for(n^=1,s=0;s<6;++s){var o=n>>(5-s)*5&31;i+=qw.charAt(o)}return i}function jQ(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),a=t.slice(i+1);if(a.length<6)return"Data too short";var o=HQ(s);if(typeof o=="string")return o;for(var l=[],A=0;A<a.length;++A){var c=a.charAt(A),u=FM[c];if(u===void 0)return"Unknown character "+c;o=Wd(o)^u,!(A+6>=a.length)&&l.push(u)}return o!==1?"Invalid checksum for "+t:{prefix:s,words:l}}function $K(){var t=jQ.apply(null,arguments);if(typeof t=="object")return t}function eY(t){var e=jQ.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Qb(t,e,r,n){for(var i=0,s=0,a=(1<<r)-1,o=[],l=0;l<t.length;++l)for(i=i<<e|t[l],s+=e;s>=r;)s-=r,o.push(i>>s&a);if(n)s>0&&o.push(i<<r-s&a);else{if(s>=e)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}function tY(t){var e=Qb(t,8,5,!0);if(Array.isArray(e))return e}function rY(t){var e=Qb(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function nY(t){var e=Qb(t,5,8,!1);if(Array.isArray(e))return e}function iY(t){var e=Qb(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var sY={decodeUnsafe:$K,decode:eY,encode:qK,toWordsUnsafe:tY,toWords:rY,fromWordsUnsafe:nY,fromWords:iY};const t3=iA(sY),_i="providers/5.7.2";function Gf(t,e,r){return r={path:e,exports:{},require:function(n,i){return aY(n,i??r.path)}},t(r,r.exports),r.exports}function aY(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var l2=zQ;function zQ(t,e){if(!t)throw new Error(e||"Assertion failed")}zQ.equal=function(t,e,r){if(t!=e)throw new Error(r||"Assertion failed: "+t+" != "+e)};var Ja=Gf(function(t,e){var r=e;function n(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var l=[];if(typeof a!="string"){for(var A=0;A<a.length;A++)l[A]=a[A]|0;return l}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var A=0;A<a.length;A+=2)l.push(parseInt(a[A]+a[A+1],16))}else for(var A=0;A<a.length;A++){var c=a.charCodeAt(A),u=c>>8,h=c&255;u?l.push(u,h):l.push(h)}return l}r.toArray=n;function i(a){return a.length===1?"0"+a:a}r.zero2=i;function s(a){for(var o="",l=0;l<a.length;l++)o+=i(a[l].toString(16));return o}r.toHex=s,r.encode=function(a,o){return o==="hex"?s(a):a}}),js=Gf(function(t,e){var r=e;r.assert=l2,r.toArray=Ja.toArray,r.zero2=Ja.zero2,r.toHex=Ja.toHex,r.encode=Ja.encode;function n(l,A,c){var u=new Array(Math.max(l.bitLength(),c)+1);u.fill(0);for(var h=1<<A+1,d=l.clone(),f=0;f<u.length;f++){var m,g=d.andln(h-1);d.isOdd()?(g>(h>>1)-1?m=(h>>1)-g:m=g,d.isubn(m)):m=0,u[f]=m,d.iushrn(1)}return u}r.getNAF=n;function i(l,A){var c=[[],[]];l=l.clone(),A=A.clone();for(var u=0,h=0,d;l.cmpn(-u)>0||A.cmpn(-h)>0;){var f=l.andln(3)+u&3,m=A.andln(3)+h&3;f===3&&(f=-1),m===3&&(m=-1);var g;f&1?(d=l.andln(7)+u&7,(d===3||d===5)&&m===2?g=-f:g=f):g=0,c[0].push(g);var p;m&1?(d=A.andln(7)+h&7,(d===3||d===5)&&f===2?p=-m:p=m):p=0,c[1].push(p),2*u===g+1&&(u=1-u),2*h===p+1&&(h=1-h),l.iushrn(1),A.iushrn(1)}return c}r.getJSF=i;function s(l,A,c){var u="_"+A;l.prototype[A]=function(){return this[u]!==void 0?this[u]:this[u]=c.call(this)}}r.cachedProperty=s;function a(l){return typeof l=="string"?r.toArray(l,"hex"):l}r.parseBytes=a;function o(l){return new wt(l,"hex","le")}r.intFromLE=o}),$w=js.getNAF,oY=js.getJSF,e1=js.assert;function Ec(t,e){this.type=t,this.p=new wt(e.p,16),this.red=e.prime?wt.red(e.prime):wt.mont(this.p),this.zero=new wt(0).toRed(this.red),this.one=new wt(1).toRed(this.red),this.two=new wt(2).toRed(this.red),this.n=e.n&&new wt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var zu=Ec;Ec.prototype.point=function(){throw new Error("Not implemented")};Ec.prototype.validate=function(){throw new Error("Not implemented")};Ec.prototype._fixedNafMul=function(t,e){e1(t.precomputed);var r=t._getDoubles(),n=$w(e,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var s=[],a,o;for(a=0;a<n.length;a+=r.step){o=0;for(var l=a+r.step-1;l>=a;l--)o=(o<<1)+n[l];s.push(o)}for(var A=this.jpoint(null,null,null),c=this.jpoint(null,null,null),u=i;u>0;u--){for(a=0;a<s.length;a++)o=s[a],o===u?c=c.mixedAdd(r.points[a]):o===-u&&(c=c.mixedAdd(r.points[a].neg()));A=A.add(c)}return A.toP()};Ec.prototype._wnafMul=function(t,e){var r=4,n=t._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=$w(e,r,this._bitLength),a=this.jpoint(null,null,null),o=s.length-1;o>=0;o--){for(var l=0;o>=0&&s[o]===0;o--)l++;if(o>=0&&l++,a=a.dblp(l),o<0)break;var A=s[o];e1(A!==0),t.type==="affine"?A>0?a=a.mixedAdd(i[A-1>>1]):a=a.mixedAdd(i[-A-1>>1].neg()):A>0?a=a.add(i[A-1>>1]):a=a.add(i[-A-1>>1].neg())}return t.type==="affine"?a.toP():a};Ec.prototype._wnafMulAdd=function(t,e,r,n,i){var s=this._wnafT1,a=this._wnafT2,o=this._wnafT3,l=0,A,c,u;for(A=0;A<n;A++){u=e[A];var h=u._getNAFPoints(t);s[A]=h.wnd,a[A]=h.points}for(A=n-1;A>=1;A-=2){var d=A-1,f=A;if(s[d]!==1||s[f]!==1){o[d]=$w(r[d],s[d],this._bitLength),o[f]=$w(r[f],s[f],this._bitLength),l=Math.max(o[d].length,l),l=Math.max(o[f].length,l);continue}var m=[e[d],null,null,e[f]];e[d].y.cmp(e[f].y)===0?(m[1]=e[d].add(e[f]),m[2]=e[d].toJ().mixedAdd(e[f].neg())):e[d].y.cmp(e[f].y.redNeg())===0?(m[1]=e[d].toJ().mixedAdd(e[f]),m[2]=e[d].add(e[f].neg())):(m[1]=e[d].toJ().mixedAdd(e[f]),m[2]=e[d].toJ().mixedAdd(e[f].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],p=oY(r[d],r[f]);for(l=Math.max(p[0].length,l),o[d]=new Array(l),o[f]=new Array(l),c=0;c<l;c++){var v=p[0][c]|0,y=p[1][c]|0;o[d][c]=g[(v+1)*3+(y+1)],o[f][c]=0,a[d]=m}}var _=this.jpoint(null,null,null),E=this._wnafT4;for(A=l;A>=0;A--){for(var x=0;A>=0;){var B=!0;for(c=0;c<n;c++)E[c]=o[c][A]|0,E[c]!==0&&(B=!1);if(!B)break;x++,A--}if(A>=0&&x++,_=_.dblp(x),A<0)break;for(c=0;c<n;c++){var M=E[c];M!==0&&(M>0?u=a[c][M-1>>1]:M<0&&(u=a[c][-M-1>>1].neg()),u.type==="affine"?_=_.mixedAdd(u):_=_.add(u))}}for(A=0;A<n;A++)a[A]=null;return i?_:_.toP()};function xa(t,e){this.curve=t,this.type=e,this.precomputed=null}Ec.BasePoint=xa;xa.prototype.eq=function(){throw new Error("Not implemented")};xa.prototype.validate=function(){return this.curve.validate(this)};Ec.prototype.decodePoint=function(t,e){t=js.toArray(t,e);var r=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*r){t[0]===6?e1(t[t.length-1]%2===0):t[0]===7&&e1(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+r),t.slice(1+r,1+2*r));return n}else if((t[0]===2||t[0]===3)&&t.length-1===r)return this.pointFromX(t.slice(1,1+r),t[0]===3);throw new Error("Unknown point format")};xa.prototype.encodeCompressed=function(t){return this.encode(t,!0)};xa.prototype._encode=function(t){var e=this.curve.p.byteLength(),r=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",e))};xa.prototype.encode=function(t,e){return js.encode(this._encode(e),t)};xa.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this};xa.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((t.bitLength()+1)/e.step):!1};xa.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<e;i+=t){for(var s=0;s<t;s++)n=n.dbl();r.push(n)}return{step:t,points:r}};xa.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],r=(1<<t)-1,n=r===1?null:this.dbl(),i=1;i<r;i++)e[i]=e[i-1].add(n);return{wnd:t,points:e}};xa.prototype._getBeta=function(){return null};xa.prototype.dblp=function(t){for(var e=this,r=0;r<t;r++)e=e.dbl();return e};var A2=Gf(function(t){typeof Object.create=="function"?t.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}}),lY=js.assert;function Ea(t){zu.call(this,"short",t),this.a=new wt(t.a,16).toRed(this.red),this.b=new wt(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}A2(Ea,zu);var AY=Ea;Ea.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,r;if(t.beta)e=new wt(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=n[0].cmp(n[1])<0?n[0]:n[1],e=e.toRed(this.red)}if(t.lambda)r=new wt(t.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))===0?r=i[0]:(r=i[1],lY(this.g.mul(r).x.cmp(this.g.x.redMul(e))===0))}var s;return t.basis?s=t.basis.map(function(a){return{a:new wt(a.a,16),b:new wt(a.b,16)}}):s=this._getEndoBasis(r),{beta:e,lambda:r,basis:s}}};Ea.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:wt.mont(t),r=new wt(2).toRed(e).redInvm(),n=r.redNeg(),i=new wt(3).toRed(e).redNeg().redSqrt().redMul(r),s=n.redAdd(i).fromRed(),a=n.redSub(i).fromRed();return[s,a]};Ea.prototype._getEndoBasis=function(t){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=t,n=this.n.clone(),i=new wt(1),s=new wt(0),a=new wt(0),o=new wt(1),l,A,c,u,h,d,f,m=0,g,p;r.cmpn(0)!==0;){var v=n.div(r);g=n.sub(v.mul(r)),p=a.sub(v.mul(i));var y=o.sub(v.mul(s));if(!c&&g.cmp(e)<0)l=f.neg(),A=i,c=g.neg(),u=p;else if(c&&++m===2)break;f=g,n=r,r=g,a=i,i=p,o=s,s=y}h=g.neg(),d=p;var _=c.sqr().add(u.sqr()),E=h.sqr().add(d.sqr());return E.cmp(_)>=0&&(h=l,d=A),c.negative&&(c=c.neg(),u=u.neg()),h.negative&&(h=h.neg(),d=d.neg()),[{a:c,b:u},{a:h,b:d}]};Ea.prototype._endoSplit=function(t){var e=this.endo.basis,r=e[0],n=e[1],i=n.b.mul(t).divRound(this.n),s=r.b.neg().mul(t).divRound(this.n),a=i.mul(r.a),o=s.mul(n.a),l=i.mul(r.b),A=s.mul(n.b),c=t.sub(a).sub(o),u=l.add(A).neg();return{k1:c,k2:u}};Ea.prototype.pointFromX=function(t,e){t=new wt(t,16),t.red||(t=t.toRed(this.red));var r=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(n.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var i=n.fromRed().isOdd();return(e&&!i||!e&&i)&&(n=n.redNeg()),this.point(t,n)};Ea.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,r=t.y,n=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return r.redSqr().redISub(i).cmpn(0)===0};Ea.prototype._endoWnafMulAdd=function(t,e,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<t.length;s++){var a=this._endoSplit(e[s]),o=t[s],l=o._getBeta();a.k1.negative&&(a.k1.ineg(),o=o.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),n[s*2]=o,n[s*2+1]=l,i[s*2]=a.k1,i[s*2+1]=a.k2}for(var A=this._wnafMulAdd(1,n,i,s*2,r),c=0;c<s*2;c++)n[c]=null,i[c]=null;return A};function Yn(t,e,r,n){zu.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new wt(e,16),this.y=new wt(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}A2(Yn,zu.BasePoint);Ea.prototype.point=function(t,e,r){return new Yn(this,t,e,r)};Ea.prototype.pointFromJSON=function(t,e){return Yn.fromJSON(this,t,e)};Yn.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var r=this.curve,n=function(i){return r.point(i.x.redMul(r.endo.beta),i.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}};Yn.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Yn.fromJSON=function(t,e,r){typeof e=="string"&&(e=JSON.parse(e));var n=t.point(e[0],e[1],r);if(!e[2])return n;function i(a){return t.point(a[0],a[1],r)}var s=e[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n};Yn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Yn.prototype.isInfinity=function(){return this.inf};Yn.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var e=this.y.redSub(t.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var r=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)};Yn.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,r=this.x.redSqr(),n=t.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(e).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)};Yn.prototype.getX=function(){return this.x.fromRed()};Yn.prototype.getY=function(){return this.y.fromRed()};Yn.prototype.mul=function(t){return t=new wt(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Yn.prototype.mulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)};Yn.prototype.jmulAdd=function(t,e,r){var n=[this,e],i=[t,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)};Yn.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Yn.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed,n=function(i){return i.neg()};e.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return e};Yn.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function ii(t,e,r,n){zu.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new wt(0)):(this.x=new wt(e,16),this.y=new wt(r,16),this.z=new wt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}A2(ii,zu.BasePoint);Ea.prototype.jpoint=function(t,e,r){return new ii(this,t,e,r)};ii.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),r=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(r,n)};ii.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};ii.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(e),i=t.x.redMul(r),s=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(r.redMul(this.z)),o=n.redSub(i),l=s.redSub(a);if(o.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=o.redSqr(),c=A.redMul(o),u=n.redMul(A),h=l.redSqr().redIAdd(c).redISub(u).redISub(u),d=l.redMul(u.redISub(h)).redISub(s.redMul(c)),f=this.z.redMul(t.z).redMul(o);return this.curve.jpoint(h,d,f)};ii.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),r=this.x,n=t.x.redMul(e),i=this.y,s=t.y.redMul(e).redMul(this.z),a=r.redSub(n),o=i.redSub(s);if(a.cmpn(0)===0)return o.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),A=l.redMul(a),c=r.redMul(l),u=o.redSqr().redIAdd(A).redISub(c).redISub(c),h=o.redMul(c.redISub(u)).redISub(i.redMul(A)),d=this.z.redMul(a);return this.curve.jpoint(u,h,d)};ii.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var r=this;for(e=0;e<t;e++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,a=this.y,o=this.z,l=o.redSqr().redSqr(),A=a.redAdd(a);for(e=0;e<t;e++){var c=s.redSqr(),u=A.redSqr(),h=u.redSqr(),d=c.redAdd(c).redIAdd(c).redIAdd(n.redMul(l)),f=s.redMul(u),m=d.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),p=d.redMul(g);p=p.redIAdd(p).redISub(h);var v=A.redMul(o);e+1<t&&(l=l.redMul(h)),s=m,o=v,A=p}return this.curve.jpoint(s,A.redMul(i),o)};ii.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};ii.prototype._zeroDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var o=n.redAdd(n).redIAdd(n),l=o.redSqr().redISub(a).redISub(a),A=s.redIAdd(s);A=A.redIAdd(A),A=A.redIAdd(A),t=l,e=o.redMul(a.redISub(l)).redISub(A),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),u=this.y.redSqr(),h=u.redSqr(),d=this.x.redAdd(u).redSqr().redISub(c).redISub(h);d=d.redIAdd(d);var f=c.redAdd(c).redIAdd(c),m=f.redSqr(),g=h.redIAdd(h);g=g.redIAdd(g),g=g.redIAdd(g),t=m.redISub(d).redISub(d),e=f.redMul(d.redISub(t)).redISub(g),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(t,e,r)};ii.prototype._threeDbl=function(){var t,e,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var o=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),l=o.redSqr().redISub(a).redISub(a);t=l;var A=s.redIAdd(s);A=A.redIAdd(A),A=A.redIAdd(A),e=o.redMul(a.redISub(l)).redISub(A),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),u=this.y.redSqr(),h=this.x.redMul(u),d=this.x.redSub(c).redMul(this.x.redAdd(c));d=d.redAdd(d).redIAdd(d);var f=h.redIAdd(h);f=f.redIAdd(f);var m=f.redAdd(f);t=d.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(u).redISub(c);var g=u.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g),e=d.redMul(f.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,r)};ii.prototype._dbl=function(){var t=this.curve.a,e=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=e.redSqr(),a=r.redSqr(),o=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(i)),l=e.redAdd(e);l=l.redIAdd(l);var A=l.redMul(a),c=o.redSqr().redISub(A.redAdd(A)),u=A.redISub(c),h=a.redSqr();h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var d=o.redMul(u).redISub(h),f=r.redAdd(r).redMul(n);return this.curve.jpoint(c,d,f)};ii.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),r=this.z.redSqr(),n=e.redSqr(),i=t.redAdd(t).redIAdd(t),s=i.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var o=a.redSqr(),l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var A=i.redIAdd(a).redSqr().redISub(s).redISub(o).redISub(l),c=e.redMul(A);c=c.redIAdd(c),c=c.redIAdd(c);var u=this.x.redMul(o).redISub(c);u=u.redIAdd(u),u=u.redIAdd(u);var h=this.y.redMul(A.redMul(l.redISub(A)).redISub(a.redMul(o)));h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var d=this.z.redAdd(a).redSqr().redISub(r).redISub(o);return this.curve.jpoint(u,h,d)};ii.prototype.mul=function(t,e){return t=new wt(t,e),this.curve._wnafMul(this,t)};ii.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),r=t.z.redSqr();if(this.x.redMul(r).redISub(t.x.redMul(e)).cmpn(0)!==0)return!1;var n=e.redMul(this.z),i=r.redMul(t.z);return this.y.redMul(i).redISub(t.y.redMul(n)).cmpn(0)===0};ii.prototype.eqXToP=function(t){var e=this.z.redSqr(),r=t.toRed(this.curve.red).redMul(e);if(this.x.cmp(r)===0)return!0;for(var n=t.clone(),i=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};ii.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};ii.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var nw=Gf(function(t,e){var r=e;r.base=zu,r.short=AY,r.mont=null,r.edwards=null}),iw=Gf(function(t,e){var r=e,n=js.assert;function i(o){o.type==="short"?this.curve=new nw.short(o):o.type==="edwards"?this.curve=new nw.edwards(o):this.curve=new nw.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(o,l){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){var A=new i(l);return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,value:A}),A}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:xo.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:xo.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:xo.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:xo.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:xo.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:xo.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:xo.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:xo.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function dc(t){if(!(this instanceof dc))return new dc(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ja.toArray(t.entropy,t.entropyEnc||"hex"),r=Ja.toArray(t.nonce,t.nonceEnc||"hex"),n=Ja.toArray(t.pers,t.persEnc||"hex");l2(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var GQ=dc;dc.prototype._init=function(t,e,r){var n=t.concat(e).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656};dc.prototype._hmac=function(){return new xo.hmac(this.hash,this.K)};dc.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};dc.prototype.reseed=function(t,e,r,n){typeof e!="string"&&(n=r,r=e,e=null),t=Ja.toArray(t,e),r=Ja.toArray(r,n),l2(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(r||[])),this._reseed=1};dc.prototype.generate=function(t,e,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(n=r,r=e,e=null),r&&(r=Ja.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,t);return this._update(r),this._reseed++,Ja.encode(s,e)};var kM=js.assert;function gi(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var c2=gi;gi.fromPublic=function(t,e,r){return e instanceof gi?e:new gi(t,{pub:e,pubEnc:r})};gi.fromPrivate=function(t,e,r){return e instanceof gi?e:new gi(t,{priv:e,privEnc:r})};gi.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};gi.prototype.getPublic=function(t,e){return typeof t=="string"&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub};gi.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};gi.prototype._importPrivate=function(t,e){this.priv=new wt(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)};gi.prototype._importPublic=function(t,e){if(t.x||t.y){this.ec.curve.type==="mont"?kM(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&kM(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,e)};gi.prototype.derive=function(t){return t.validate()||kM(t.validate(),"public point not validated"),t.mul(this.priv).getX()};gi.prototype.sign=function(t,e,r){return this.ec.sign(t,this,e,r)};gi.prototype.verify=function(t,e){return this.ec.verify(t,e,this)};gi.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var cY=js.assert;function Hb(t,e){if(t instanceof Hb)return t;this._importDER(t,e)||(cY(t.r&&t.s,"Signature without r or s"),this.r=new wt(t.r,16),this.s=new wt(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var jb=Hb;function uY(){this.place=0}function Bx(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,a=e.place;s<n;s++,a++)i<<=8,i|=t[a],i>>>=0;return i<=127?!1:(e.place=a,i)}function r3(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Hb.prototype._importDER=function(t,e){t=js.toArray(t,e);var r=new uY;if(t[r.place++]!==48)return!1;var n=Bx(t,r);if(n===!1||n+r.place!==t.length||t[r.place++]!==2)return!1;var i=Bx(t,r);if(i===!1)return!1;var s=t.slice(r.place,i+r.place);if(r.place+=i,t[r.place++]!==2)return!1;var a=Bx(t,r);if(a===!1||t.length!==a+r.place)return!1;var o=t.slice(r.place,a+r.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;return this.r=new wt(s),this.s=new wt(o),this.recoveryParam=null,!0};function Mx(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Hb.prototype.toDER=function(t){var e=this.r.toArray(),r=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),r[0]&128&&(r=[0].concat(r)),e=r3(e),r=r3(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var n=[2];Mx(n,e.length),n=n.concat(e),n.push(2),Mx(n,r.length);var i=n.concat(r),s=[48];return Mx(s,i.length),s=s.concat(i),js.encode(s,t)};var hY=function(){throw new Error("unsupported")},VQ=js.assert;function va(t){if(!(this instanceof va))return new va(t);typeof t=="string"&&(VQ(Object.prototype.hasOwnProperty.call(iw,t),"Unknown curve "+t),t=iw[t]),t instanceof iw.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var dY=va;va.prototype.keyPair=function(t){return new c2(this,t)};va.prototype.keyFromPrivate=function(t,e){return c2.fromPrivate(this,t,e)};va.prototype.keyFromPublic=function(t,e){return c2.fromPublic(this,t,e)};va.prototype.genKeyPair=function(t){t||(t={});for(var e=new GQ({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||hY(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new wt(2));;){var i=new wt(e.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}};va.prototype._truncateToN=function(t,e){var r=t.byteLength()*8-this.n.bitLength();return r>0&&(t=t.ushrn(r)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t};va.prototype.sign=function(t,e,r,n){typeof r=="object"&&(n=r,r=null),n||(n={}),e=this.keyFromPrivate(e,r),t=this._truncateToN(new wt(t,16));for(var i=this.n.byteLength(),s=e.getPrivate().toArray("be",i),a=t.toArray("be",i),o=new GQ({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),l=this.n.sub(new wt(1)),A=0;;A++){var c=n.k?n.k(A):new wt(o.generate(this.n.byteLength()));if(c=this._truncateToN(c,!0),!(c.cmpn(1)<=0||c.cmp(l)>=0)){var u=this.g.mul(c);if(!u.isInfinity()){var h=u.getX(),d=h.umod(this.n);if(d.cmpn(0)!==0){var f=c.invm(this.n).mul(d.mul(e.getPrivate()).iadd(t));if(f=f.umod(this.n),f.cmpn(0)!==0){var m=(u.getY().isOdd()?1:0)|(h.cmp(d)!==0?2:0);return n.canonical&&f.cmp(this.nh)>0&&(f=this.n.sub(f),m^=1),new jb({r:d,s:f,recoveryParam:m})}}}}}};va.prototype.verify=function(t,e,r,n){t=this._truncateToN(new wt(t,16)),r=this.keyFromPublic(r,n),e=new jb(e,"hex");var i=e.r,s=e.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),o=a.mul(t).umod(this.n),l=a.mul(i).umod(this.n),A;return this.curve._maxwellTrick?(A=this.g.jmulAdd(o,r.getPublic(),l),A.isInfinity()?!1:A.eqXToP(i)):(A=this.g.mulAdd(o,r.getPublic(),l),A.isInfinity()?!1:A.getX().umod(this.n).cmp(i)===0)};va.prototype.recoverPubKey=function(t,e,r,n){VQ((3&r)===r,"The recovery param is more than two bits"),e=new jb(e,n);var i=this.n,s=new wt(t),a=e.r,o=e.s,l=r&1,A=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?a=this.curve.pointFromX(a.add(this.curve.n),l):a=this.curve.pointFromX(a,l);var c=e.r.invm(i),u=i.sub(s).mul(c).umod(i),h=o.mul(c).umod(i);return this.g.mulAdd(u,a,h)};va.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new jb(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var fY=Gf(function(t,e){var r=e;r.version="6.5.4",r.utils=js,r.rand=function(){throw new Error("unsupported")},r.curve=nw,r.curves=iw,r.ec=dY,r.eddsa=null}),pY=fY.ec;const mY="signing-key/5.7.0",LM=new be(mY);let Tx=null;function Co(){return Tx||(Tx=new pY("secp256k1")),Tx}class gY{constructor(e){Ue(this,"curve","secp256k1"),Ue(this,"privateKey",at(e)),Bu(this.privateKey)!==32&&LM.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Co().keyFromPrivate(ft(this.privateKey));Ue(this,"publicKey","0x"+r.getPublic(!1,"hex")),Ue(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Ue(this,"_isSigningKey",!0)}_addPoint(e){const r=Co().keyFromPublic(ft(this.publicKey)),n=Co().keyFromPublic(ft(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=Co().keyFromPrivate(ft(this.privateKey)),n=ft(e);n.length!==32&&LM.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Lb({recoveryParam:i.recoveryParam,r:rn("0x"+i.r.toString(16),32),s:rn("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=Co().keyFromPrivate(ft(this.privateKey)),n=Co().keyFromPublic(ft(WQ(e)));return rn("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function vY(t,e){const r=Lb(e),n={r:ft(r.r),s:ft(r.s)};return"0x"+Co().recoverPubKey(ft(t),n,r.recoveryParam).encode("hex",!1)}function WQ(t,e){const r=ft(t);if(r.length===32){const n=new gY(r);return e?"0x"+Co().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?at(r):"0x"+Co().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+Co().keyFromPublic(r).getPublic(!0,"hex"):at(r)}return LM.throwArgumentError("invalid public or private key","key","[REDACTED]")}const yY="transactions/5.7.0",sA=new be(yY);var n3;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(n3||(n3={}));function u2(t){return t==="0x"?null:ri(t)}function hi(t){return t==="0x"?iQ:We.from(t)}function wY(t){const e=WQ(t);return ri(ui(_n(ui(e,1)),12))}function KQ(t,e){return wY(vY(ft(t),e))}function _s(t,e){const r=df(We.from(t).toHexString());return r.length>32&&sA.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Cx(t,e){return{address:ri(t),storageKeys:(e||[]).map((r,n)=>(Bu(r)!==32&&sA.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function Gu(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&sA.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Cx(r[0],r[1])):Cx(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return Cx(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function YQ(t){return Gu(t).map(e=>[e.address,e.storageKeys])}function bY(t,e){if(t.gasPrice!=null){const n=We.from(t.gasPrice),i=We.from(t.maxFeePerGas||0);n.eq(i)||sA.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[_s(t.chainId||0,"chainId"),_s(t.nonce||0,"nonce"),_s(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_s(t.maxFeePerGas||0,"maxFeePerGas"),_s(t.gasLimit||0,"gasLimit"),t.to!=null?ri(t.to):"0x",_s(t.value||0,"value"),t.data||"0x",YQ(t.accessList||[])];if(e){const n=Lb(e);r.push(_s(n.recoveryParam,"recoveryParam")),r.push(df(n.r)),r.push(df(n.s))}return Ki(["0x02",Ob(r)])}function _Y(t,e){const r=[_s(t.chainId||0,"chainId"),_s(t.nonce||0,"nonce"),_s(t.gasPrice||0,"gasPrice"),_s(t.gasLimit||0,"gasLimit"),t.to!=null?ri(t.to):"0x",_s(t.value||0,"value"),t.data||"0x",YQ(t.accessList||[])];if(e){const n=Lb(e);r.push(_s(n.recoveryParam,"recoveryParam")),r.push(df(n.r)),r.push(df(n.s))}return Ki(["0x01",Ob(r)])}function XQ(t,e,r){try{const n=hi(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{sA.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=rn(e[1],32),t.s=rn(e[2],32);try{const n=_n(r(t));t.from=KQ(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function xY(t){const e=a2(t.slice(1));e.length!==9&&e.length!==12&&sA.throwArgumentError("invalid component count for transaction type: 2","payload",at(t));const r=hi(e[2]),n=hi(e[3]),i={type:2,chainId:hi(e[0]).toNumber(),nonce:hi(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:hi(e[4]),to:u2(e[5]),value:hi(e[6]),data:e[7],accessList:Gu(e[8])};return e.length===9||(i.hash=_n(t),XQ(i,e.slice(9),bY)),i}function EY(t){const e=a2(t.slice(1));e.length!==8&&e.length!==11&&sA.throwArgumentError("invalid component count for transaction type: 1","payload",at(t));const r={type:1,chainId:hi(e[0]).toNumber(),nonce:hi(e[1]).toNumber(),gasPrice:hi(e[2]),gasLimit:hi(e[3]),to:u2(e[4]),value:hi(e[5]),data:e[6],accessList:Gu(e[7])};return e.length===8||(r.hash=_n(t),XQ(r,e.slice(8),_Y)),r}function BY(t){const e=a2(t);e.length!==9&&e.length!==6&&sA.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:hi(e[0]).toNumber(),gasPrice:hi(e[1]),gasLimit:hi(e[2]),to:u2(e[3]),value:hi(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=We.from(e[6]).toNumber()}catch{return r}if(r.r=rn(e[7],32),r.s=rn(e[8],32),We.from(r.r).isZero()&&We.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(at(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=_n(Ob(i));try{r.from=KQ(s,{r:at(r.r),s:at(r.s),recoveryParam:n})}catch{}r.hash=_n(t)}return r.type=null,r}function MY(t){const e=ft(t);if(e[0]>127)return BY(e);switch(e[0]){case 1:return EY(e);case 2:return xY(e)}return sA.throwError(`unsupported transaction type: ${e[0]}`,be.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const mp=new be(_i);let i3=class rt{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),a=this.hash.bind(this),o=this.hex.bind(this),l=this.number.bind(this),A=this.type.bind(this),c=u=>this.data(u,!0);return e.transaction={hash:a,type:A,accessList:rt.allowNull(this.accessList.bind(this),null),blockHash:rt.allowNull(a,null),blockNumber:rt.allowNull(l,null),transactionIndex:rt.allowNull(l,null),confirmations:rt.allowNull(l,null),from:r,gasPrice:rt.allowNull(n),maxPriorityFeePerGas:rt.allowNull(n),maxFeePerGas:rt.allowNull(n),gasLimit:n,to:rt.allowNull(r,null),value:n,nonce:l,data:s,r:rt.allowNull(this.uint256),s:rt.allowNull(this.uint256),v:rt.allowNull(l),creates:rt.allowNull(r,null),raw:rt.allowNull(s)},e.transactionRequest={from:rt.allowNull(r),nonce:rt.allowNull(l),gasLimit:rt.allowNull(n),gasPrice:rt.allowNull(n),maxPriorityFeePerGas:rt.allowNull(n),maxFeePerGas:rt.allowNull(n),to:rt.allowNull(r),value:rt.allowNull(n),data:rt.allowNull(c),type:rt.allowNull(l),accessList:rt.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:a,address:r,topics:rt.arrayOf(a),data:s,logIndex:l,blockHash:a},e.receipt={to:rt.allowNull(this.address,null),from:rt.allowNull(this.address,null),contractAddress:rt.allowNull(r,null),transactionIndex:l,root:rt.allowNull(o),gasUsed:n,logsBloom:rt.allowNull(s),blockHash:a,transactionHash:a,logs:rt.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:rt.allowNull(l,null),cumulativeGasUsed:n,effectiveGasPrice:rt.allowNull(n),status:rt.allowNull(l),type:A},e.block={hash:rt.allowNull(a),parentHash:a,number:l,timestamp:l,nonce:rt.allowNull(o),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:rt.allowNull(r),extraData:s,transactions:rt.allowNull(rt.arrayOf(a)),baseFeePerGas:rt.allowNull(n)},e.blockWithTransactions=Or(e.block),e.blockWithTransactions.transactions=rt.allowNull(rt.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:rt.allowNull(i,void 0),toBlock:rt.allowNull(i,void 0),blockHash:rt.allowNull(a,void 0),address:rt.allowNull(r,void 0),topics:rt.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:rt.allowNull(l),blockHash:rt.allowNull(a),transactionIndex:l,removed:rt.allowNull(this.boolean.bind(this)),address:r,data:rt.allowFalsish(s,"0x"),topics:rt.arrayOf(a),transactionHash:a,logIndex:l},e}accessList(e){return Gu(e||[])}number(e){return e==="0x"?0:We.from(e).toNumber()}type(e){return e==="0x"||e==null?0:We.from(e).toNumber()}bigNumber(e){return We.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),It(e))?e.toLowerCase():mp.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return ri(e)}callAddress(e){if(!It(e,32))return null;const r=ri(ui(e,12));return r===E7?null:r}contractAddress(e){return vQ(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||It(e))return kb(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return Bu(n)!==32?mp.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=We.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!It(e))throw new Error("invalid uint256");return rn(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=rt.check(r,e);return i._difficulty=n==null?null:We.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return rt.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&We.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=rt.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;It(n)&&(n=We.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),It(n)&&(n=We.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return MY(e)}receiptLog(e){return rt.check(this.formats.receiptLog,e)}receipt(e){const r=rt.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=We.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&mp.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):mp.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&mp.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return rt.check(this.formats.filter,e)}filterLog(e){return rt.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}};function TY(t){return t&&typeof t.isCommunityResource=="function"}function s3(t){return TY(t)&&t.isCommunityResource()}let a3=!1;function zb(){a3||(a3=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var vt=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const St=new be(_i),CY=10;function o3(t){return t==null?"null":(Bu(t)!==32&&St.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function l3(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[o3(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return o3(e)}).join("&")}function SY(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function nh(t){if(typeof t=="string"){if(t=t.toLowerCase(),Bu(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+l3(t);if(b7.isForkEvent(t))throw St.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+l3(t.topics||[])}throw new Error("invalid event - "+t)}function gp(){return new Date().getTime()}function A3(t){return new Promise(e=>{setTimeout(e,t)})}const IY=["block","network","pending","poll"];let RY=class{constructor(t,e,r){Ue(this,"tag",t),Ue(this,"listener",e),Ue(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const t=this.tag.split(":");return t[0]!=="tx"?null:t[1]}get filter(){const t=this.tag.split(":");if(t[0]!=="filter")return null;const e=t[1],r=SY(t[2]),n={};return r.length>0&&(n.topics=r),e&&e!=="*"&&(n.address=e),n}pollable(){return this.tag.indexOf(":")>=0||IY.indexOf(this.tag)>=0}};const UY={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Sx(t){return rn(We.from(t).toHexString(),32)}function c3(t){return SM.encode(Bs([t,ui($U($U(t)),0,4)]))}const ZQ=new RegExp("^(ipfs)://(.*)$","i"),u3=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ZQ,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function sw(t,e){try{return A0(ug(t,e))}catch{}return null}function ug(t,e){if(t==="0x")return null;const r=We.from(ui(t,e,e+32)).toNumber(),n=We.from(ui(t,r,r+32)).toNumber();return ui(t,r+32,r+32+n)}function Ix(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):St.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function h3(t){const e=ft(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function FY(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function JQ(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=ft(t[n]);e[n]=h3(r),e.push(h3(i.length)),e.push(FY(i)),r+=32+Math.ceil(i.length/32)*32}return Ki(e)}class d3{constructor(e,r,n,i){Ue(this,"provider",e),Ue(this,"name",n),Ue(this,"address",e.formatter.address(r)),Ue(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>We.from(e).eq(1)).catch(e=>{if(e.code===be.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return vt(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:Ki([e,rw(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=Ki(["0x9061b923",JQ([aW(this.name),n.data])]));try{let s=yield this.provider.call(n);return ft(s).length%32===4&&St.throwError("resolver threw error",be.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=ug(s,0)),s}catch(s){if(s.code===be.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return vt(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?ug(n,0):null})}_getAddress(e,r){const n=UY[String(e)];if(n==null&&St.throwError(`unsupported coin type: ${e}`,be.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=ft(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const a=parseInt(s[1],16);if(s[2].length===a*2&&a>=1&&a<=75)return c3(Bs([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const a=parseInt(s[1],16);if(s[2].length===a*2&&a>=1&&a<=75)return c3(Bs([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let a=i[0];if(a===0?s!==20&&s!==32&&(a=-1):a=-1,a>=0&&i.length===2+s&&s>=1&&s<=75){const o=t3.toWords(i.slice(2));return o.unshift(a),t3.encode(n.prefix,o)}}return null}getAddress(e){return vt(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===C7?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===be.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",Sx(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&St.throwError("invalid or unsupported coin data",be.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return vt(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<u3.length;n++){const i=r.match(u3[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:Ix(r)};case"erc721":case"erc1155":{const a=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const o=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const A=yield this.provider.formatter.address(l[0]),c=rn(We.from(l[1]).toHexString(),32);if(s==="erc721"){const m=this.provider.formatter.callAddress(yield this.provider.call({to:A,data:Ki(["0x6352211e",c])}));if(o!==m)return null;e.push({type:"owner",content:m})}else if(s==="erc1155"){const m=We.from(yield this.provider.call({to:A,data:Ki(["0x00fdd58e",rn(o,32),c])}));if(m.isZero())return null;e.push({type:"balance",content:m.toString()})}const u={to:this.provider.formatter.address(l[0]),data:Ki([a,c])};let h=sw(yield this.provider.call(u),0);if(h==null)return null;e.push({type:"metadata-url-base",content:h}),s==="erc1155"&&(h=h.replace("{id}",c.substring(2)),e.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=Ix(h)),e.push({type:"metadata-url",content:h});const d=yield Nb(h);if(!d)return null;e.push({type:"metadata",content:JSON.stringify(d)});let f=d.image;if(typeof f!="string")return null;if(!f.match(/^(https:\/\/|data:)/i)){if(f.match(ZQ)==null)return null;e.push({type:"url-ipfs",content:f}),f=Ix(f)}return e.push({type:"url",content:f}),{linkage:e,url:f}}}}}catch{}return null})}getContentHash(){return vt(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const a=parseInt(r[3],16);if(r[4].length===a*2)return"ipfs://"+SM.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const a=parseInt(n[3],16);if(n[4].length===a*2)return"ipns://"+SM.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const a={"=":"","+":"-","/":"_"};return"sia://"+rQ("0x"+s[1]).replace(/[=+\/]/g,o=>a[o])}return St.throwError("invalid or unsupported content hash data",be.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return vt(this,void 0,void 0,function*(){let r=Yo(e);r=Bs([Sx(64),Sx(r.length),r]),r.length%32!==0&&(r=Bs([r,rn("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",at(r));return n==null||n==="0x"?null:A0(n)})}}let Rx=null,kY=1;class h2 extends l0{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),Ue(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Ms(new.target,"getNetwork")(e);r?(Ue(this,"_network",r),this.emit("network",r,null)):St.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return vt(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||St.throwError("no network detected",be.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:Ue(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return md(()=>this._ready().then(e=>e,e=>{if(!(e.code===be.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Rx==null&&(Rx=new i3),Rx}static getNetwork(e){return eQ(e??"homestead")}ccipReadFetch(e,r,n){return vt(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),a=[];for(let o=0;o<n.length;o++){const l=n[o],A=l.replace("{sender}",i).replace("{data}",s),c=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),u=yield Nb({url:A,errorPassThrough:!0},c,(d,f)=>(d.status=f.statusCode,d));if(u.data)return u.data;const h=u.message||"unknown error";if(u.status>=400&&u.status<500)return St.throwError(`response not found during CCIP fetch: ${h}`,be.errors.SERVER_ERROR,{url:l,errorMessage:h});a.push(h)}return St.throwError(`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,be.errors.SERVER_ERROR,{urls:n,errorMessages:a})})}_getInternalBlockNumber(e){return vt(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(gp()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=gp(),n=vn({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const a=gp();return i=We.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:a}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return vt(this,void 0,void 0,function*(){const e=kY++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)St.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",St.makeError("network block skew detected",be.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let a=this.getTransactionReceipt(s).then(o=>(!o||o.blockNumber==null||(this._emitted["t:"+s]=o.blockNumber,this.emit(s,o)),null)).catch(o=>{this.emit("error",o)});r.push(a);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const a=s.toBlock-this._maxFilterBlockRange;a>s.fromBlock&&(s.fromBlock=a),s.fromBlock<0&&(s.fromBlock=0);const o=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(A=>{A.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=A.blockNumber),this._emitted["b:"+A.blockHash]=A.blockNumber,this._emitted["t:"+A.transactionHash]=A.blockNumber,this.emit(s,A)})}).catch(l=>{this.emit("error",l),i._inflight=!1});r.push(o)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return vt(this,void 0,void 0,function*(){return St.throwError("provider does not support network detection",be.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return vt(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield A3(0),this._network;const n=St.makeError("underlying network changed",be.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=gp();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=gp(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return vt(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return vt(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((a,o)=>{const l=[];let A=!1;const c=function(){return A?!0:(A=!0,l.forEach(h=>{h()}),!1)},u=h=>{h.confirmations<r||c()||a(h)};if(this.on(e,u),l.push(()=>{this.removeListener(e,u)}),i){let h=i.startBlock,d=null;const f=m=>vt(this,void 0,void 0,function*(){A||(yield A3(1e3),this.getTransactionCount(i.from).then(g=>vt(this,void 0,void 0,function*(){if(!A){if(g<=i.nonce)h=m;else{{const p=yield this.getTransaction(e);if(p&&p.blockNumber!=null)return}for(d==null&&(d=h-3,d<i.startBlock&&(d=i.startBlock));d<=m;){if(A)return;const p=yield this.getBlockWithTransactions(d);for(let v=0;v<p.transactions.length;v++){const y=p.transactions[v];if(y.hash===e)return;if(y.from===i.from&&y.nonce===i.nonce){if(A)return;const _=yield this.waitForTransaction(y.hash,r);if(c())return;let E="replaced";y.data===i.data&&y.to===i.to&&y.value.eq(i.value)?E="repriced":y.data==="0x"&&y.from===y.to&&y.value.isZero()&&(E="cancelled"),o(St.makeError("transaction was replaced",be.errors.TRANSACTION_REPLACED,{cancelled:E==="replaced"||E==="cancelled",reason:E,replacement:this._wrapTransaction(y),hash:e,receipt:_}));return}}d++}}A||this.once("block",f)}}),g=>{A||this.once("block",f)}))});if(A)return;this.once("block",f),l.push(()=>{this.removeListener("block",f)})}if(typeof n=="number"&&n>0){const h=setTimeout(()=>{c()||o(St.makeError("timeout exceeded",be.errors.TIMEOUT,{timeout:n}))},n);h.unref&&h.unref(),l.push(()=>{clearTimeout(h)})}})})}getBlockNumber(){return vt(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return We.from(e)}catch(r){return St.throwError("bad result from backend",be.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield vn({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return We.from(i)}catch(s){return St.throwError("bad result from backend",be.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield vn({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return We.from(i).toNumber()}catch(s){return St.throwError("bad result from backend",be.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield vn({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return at(i)}catch(s){return St.throwError("bad result from backend",be.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield vn({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(a=>kb(a))}),s=yield this.perform("getStorageAt",i);try{return at(s)}catch(a){return St.throwError("bad result from backend",be.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:a})}})}_wrapTransaction(e,r,n){if(r!=null&&Bu(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&St.throwError("Transaction hash mismatch from Provider.sendTransaction.",be.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,a)=>vt(this,void 0,void 0,function*(){s==null&&(s=1),a==null&&(a=0);let o;s!==0&&n!=null&&(o={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const l=yield this._waitForTransaction(e.hash,s,a,o);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&St.throwError("transaction failed",be.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>at(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return vt(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?We.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?at(s):null))}),this.formatter.transactionRequest(yield vn(n))})}_getFilter(e){return vt(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield vn(r))})}_call(e,r,n){return vt(this,void 0,void 0,function*(){n>=CY&&St.throwError("CCIP read exceeded maximum redirections",be.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Bu(s)%32===4)try{const a=ui(s,4),o=ui(a,0,32);We.from(o).eq(i)||St.throwError("CCIP Read sender did not match",be.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],A=We.from(ui(a,32,64)).toNumber(),c=We.from(ui(a,A,A+32)).toNumber(),u=ui(a,A+32);for(let p=0;p<c;p++){const v=sw(u,p*32);v==null&&St.throwError("CCIP Read contained corrupt URL string",be.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(v)}const h=ug(a,64);We.from(ui(a,100,128)).isZero()||St.throwError("CCIP Read callback selector included junk",be.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const d=ui(a,96,100),f=ug(a,128),m=yield this.ccipReadFetch(e,h,l);m==null&&St.throwError("CCIP Read disabled or provided no URLs",be.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const g={to:i,data:Ki([d,JQ([m,f])])};return this._call(g,r,n+1)}catch(a){if(a.code===be.errors.SERVER_ERROR)throw a}try{return at(s)}catch(a){return St.throwError("bad result from backend",be.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:a})}})}call(e,r){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield vn({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield vn({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return We.from(n)}catch(i){return St.throwError("bad result from backend",be.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return vt(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&St.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&St.throwError("ENS name not configured",be.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return vt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(It(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),It(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{St.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return md(()=>vt(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let a=null;for(let l=0;l<s.transactions.length;l++){const A=s.transactions[l];if(A.blockNumber==null)A.confirmations=0;else if(A.confirmations==null){a==null&&(a=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let c=a-A.blockNumber+1;c<=0&&(c=1),A.confirmations=c}}const o=this.formatter.blockWithTransactions(s);return o.transactions=o.transactions.map(l=>this._wrapTransaction(l)),o}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return vt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return md(()=>vt(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;s<=0&&(s=1),i.confirmations=s}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return vt(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return md(()=>vt(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let s=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;s<=0&&(s=1),i.confirmations=s}return i}),{oncePoll:this})})}getLogs(e){return vt(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield vn({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),i3.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return vt(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return vt(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&St.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return vt(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new d3(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return vt(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||St.throwError("network does not support ENS",be.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+rw(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return vt(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(It(e))throw n}typeof e!="string"&&St.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return vt(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=sw(yield this.call({to:n,data:"0x691f3431"+rw(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return vt(this,void 0,void 0,function*(){let r=null;if(It(e)){const i=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",s=yield this._getResolver(i,"getAvatar");if(!s)return null;r=new d3(this,s,i);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==be.errors.CALL_EXCEPTION)throw a}try{const a=sw(yield this.call({to:s,data:"0x691f3431"+rw(i).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==be.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return St.throwError(e+" not implemented",be.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new RY(nh(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=nh(e);return this._events=this._events.filter(a=>a.tag!==s?!0:(setTimeout(()=>{a.listener.apply(this,r)},0),n=!0,a.once?(i.push(a),!1):!0)),i.forEach(a=>{this._stopEvent(a)}),n}listenerCount(e){if(!e)return this._events.length;let r=nh(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=nh(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=nh(e);return this._events=this._events.filter(a=>a.tag!==s||a.listener!=r||i?!0:(i=!0,n.push(a),!1)),n.forEach(a=>{this._stopEvent(a)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=nh(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}const LY="abstract-signer/5.7.0";var Ra=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const qs=new be(LY),PY=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],OY=[be.errors.INSUFFICIENT_FUNDS,be.errors.NONCE_EXPIRED,be.errors.REPLACEMENT_UNDERPRICED];class u0{constructor(){qs.checkAbstract(new.target,u0),Ue(this,"_isSigner",!0)}getBalance(e){return Ra(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Ra(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Ra(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield vn(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Ra(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield vn(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Ra(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Ra(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ra(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ra(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Ra(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)PY.indexOf(n)===-1&&qs.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Or(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&qs.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Ra(this,void 0,void 0,function*(){const r=yield vn(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Ra(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&qs.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?qs.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&qs.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&qs.throwError("network does not support EIP-1559",be.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):qs.throwError("failed to get consistent fee data",be.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(OY.indexOf(i.code)>=0)throw i;return qs.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",be.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&qs.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield vn(r)})}_checkProvider(e){this.provider||qs.throwError("missing provider",be.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class d2 extends u0{constructor(e,r){super(),Ue(this,"address",e),Ue(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{qs.throwError(e,be.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new d2(this.address,e)}}var Tl=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const yn=new be(_i),DY=["call","estimateGas"];function Nm(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=It(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=Nm(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return Nm(JSON.parse(t),e)}catch{}return null}function qQ(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=Nm(e,!0);if(s)return s.data;yn.throwError("missing revert data in call exception; Transaction reverted without a reason string",be.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=Nm(e.body,!1);s==null&&(s=Nm(e,!1)),s&&yn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",be.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===be.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&yn.throwError("insufficient funds for intrinsic transaction cost",be.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&yn.throwError("nonce has already been used",be.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&yn.throwError("replacement fee too low",be.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&yn.throwError("legacy pre-eip-155 transactions not supported",be.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),DY.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&yn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",be.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function f3(t){return new Promise(function(e){setTimeout(e,t)})}function NY(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function vp(t){return t&&t.toLowerCase()}const PM={};class $Q extends u0{constructor(e,r,n){if(super(),e!==PM)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");Ue(this,"provider",r),n==null&&(n=0),typeof n=="string"?(Ue(this,"_address",this.provider.formatter.address(n)),Ue(this,"_index",null)):typeof n=="number"?(Ue(this,"_index",n),Ue(this,"_address",null)):yn.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return yn.throwError("cannot alter JSON-RPC Signer connection",be.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new QY(PM,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&yn.throwError("unknown account #"+this._index,be.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Or(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Or(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>Tl(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&yn.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),vn({tx:vn(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&yn.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(a=>a,a=>(typeof a.message=="string"&&a.message.match(/user denied/i)&&yn.throwError("user rejected transaction",be.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),qQ("sendTransaction",a,s)))})}signTransaction(e){return yn.throwError("signing transactions is unsupported",be.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return Tl(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield md(()=>Tl(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return Tl(this,void 0,void 0,function*(){const r=typeof e=="string"?Yo(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[at(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&yn.throwError("user rejected signing",be.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return Tl(this,void 0,void 0,function*(){const r=typeof e=="string"?Yo(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),at(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&yn.throwError("user rejected signing",be.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return Tl(this,void 0,void 0,function*(){const i=yield vs.resolveNames(e,r,n,a=>this.provider.resolveName(a)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(vs.getPayload(i.domain,r,i.value))])}catch(a){throw typeof a.message=="string"&&a.message.match(/user denied/i)&&yn.throwError("user rejected signing",be.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),a}})}unlock(e){return Tl(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class QY extends $Q{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const HY={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class hg extends h2{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(a=>{i(a)},a=>{s(a)})},0)})),super(n),e||(e=Ms(this.constructor,"defaultUrl")()),typeof e=="string"?Ue(this,"connection",Object.freeze({url:e})):Ue(this,"connection",Object.freeze(Or(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return Tl(this,void 0,void 0,function*(){yield f3(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Ms(this.constructor,"getNetwork");try{return r(We.from(e).toNumber())}catch(n){return yn.throwError("could not detect network",be.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return yn.throwError("could not detect network",be.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new $Q(PM,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Us(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=Nb(this.connection,JSON.stringify(n),NY).then(a=>(this.emit("debug",{action:"response",request:n,response:a,provider:this}),a),a=>{throw this.emit("debug",{action:"response",error:a,request:n,provider:this}),a});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[vp(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[vp(r.address),r.blockTag]];case"getCode":return["eth_getCode",[vp(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[vp(r.address),rn(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[Ms(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[Ms(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=vp(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return Tl(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&We.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=Or(r),r.transaction=Or(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&yn.throwError(e+" not implemented",be.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return qQ(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let a=Promise.resolve();return s.forEach(function(o){e._emitted["t:"+o.toLowerCase()]="pending",a=a.then(function(){return e.getTransaction(o).then(function(l){return e.emit("pending",l),null})})}),a.then(function(){return f3(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=Or(HY);if(r)for(const s in r)r[s]&&(n[s]=!0);p7(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const a=kb(We.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=a}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=at(e[s]))}),e.accessList&&(i.accessList=Gu(e.accessList)),i}}let Qm=null;try{if(Qm=WebSocket,Qm==null)throw new Error("inject please")}catch{const t=new be(_i);Qm=function(){t.throwError("WebSockets not supported in this environment",be.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ux=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const z0=new be(_i);let jY=1;class f2 extends hg{constructor(e,r){r==="any"&&z0.throwError("WebSocketProvider does not support 'any' network yet",be.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,r):super("_websocket",r),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?Ue(this,"_websocket",new Qm(this.connection.url)):Ue(this,"_websocket",e),Ue(this,"_requests",{}),Ue(this,"_subs",{}),Ue(this,"_subIds",{}),Ue(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,a=JSON.parse(s);if(a.id!=null){const o=String(a.id),l=this._requests[o];if(delete this._requests[o],a.result!==void 0)l.callback(null,a.result),this.emit("debug",{action:"response",request:JSON.parse(l.payload),response:a.result,provider:this});else{let A=null;a.error?(A=new Error(a.error.message||"unknown error"),Ue(A,"code",a.error.code||null),Ue(A,"response",s)):A=new Error("unknown error"),l.callback(A,void 0),this.emit("debug",{action:"response",error:A,request:JSON.parse(l.payload),provider:this})}}else if(a.method==="eth_subscription"){const o=this._subs[a.params.subscription];o&&o.processFunc(a.params.result)}else console.warn("this should not happen")};const n=setInterval(()=>{this.emit("poll")},1e3);n.unref&&n.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){z0.throwError("cannot reset events block on WebSocketProvider",be.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){z0.throwError("cannot set polling interval on WebSocketProvider",be.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ux(this,void 0,void 0,function*(){return null})}set polling(e){e&&z0.throwError("cannot set polling on WebSocketProvider",be.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,r){const n=jY++;return new Promise((i,s)=>{function a(l,A){return l?s(l):i(A)}const o=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(n)]={callback:a,payload:o},this._wsReady&&this.websocket.send(o)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,r,n){return Ux(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(r).then(a=>this.send("eth_subscribe",a)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:n}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],r=>{const n=We.from(r.number).toNumber();this._emitted.block=n,this.emit("block",n)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],r=>{this.emit("pending",r)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],r=>{r.removed==null&&(r.removed=!1),this.emit(e.filter,this.formatter.filterLog(r))});break;case"tx":{const r=n=>{const i=n.hash;this.getTransactionReceipt(i).then(s=>{s&&this.emit(i,s)})};r(e),this._subscribe("tx",["newHeads"],n=>{this._events.filter(i=>i.type==="tx").forEach(r)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let r=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;r="tx"}else if(this.listenerCount(e.event))return;const n=this._subIds[r];n&&(delete this._subIds[r],n.then(i=>{this._subs[i]&&(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return Ux(this,void 0,void 0,function*(){this.websocket.readyState===Qm.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var zY=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const fm=new be(_i);class e5 extends hg{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return zY(this,void 0,void 0,function*(){let r=this.network;return r==null&&(r=yield e.detectNetwork.call(this),r||fm.throwError("no network detected",be.errors.UNKNOWN_ERROR,{}),this._network==null&&(Ue(this,"_network",r),this.emit("network",r,null))),r})}}class Bc extends e5{constructor(e,r){fm.checkAbstract(new.target,Bc),e=Ms(new.target,"getNetwork")(e),r=Ms(new.target,"getApiKey")(r);const n=Ms(new.target,"getUrl")(e,r);super(n,e),typeof r=="string"?Ue(this,"apiKey",r):r!=null&&Object.keys(r).forEach(i=>{Ue(this,i,r[i])})}_startPending(){fm.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return fm.throwError("API provider does not support signing",be.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,r){return fm.throwError("not implemented; sub-classes must override getUrl",be.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const p3=new be(_i),aw="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class GY extends f2{constructor(e,r){const n=new t5(e,r),i=n.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,n.network),Ue(this,"apiKey",n.apiKey)}isCommunityResource(){return this.apiKey===aw}}class t5 extends Bc{static getWebSocketProvider(e,r){return new GY(e,r)}static getApiKey(e){return e==null?aw:(e&&typeof e!="string"&&p3.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.g.alchemy.com/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":n="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":n="arb-goerli.g.alchemy.com/v2/";break;case"optimism":n="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":n="opt-goerli.g.alchemy.com/v2/";break;default:p3.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+r,throttleCallback:(i,s)=>(r===aw&&zb(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===aw}}const VY=new be(_i),G0="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function WY(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return VY.throwArgumentError("unsupported network","name",t)}class KY extends Bc{isCommunityResource(){return this.apiKey===G0}static getApiKey(e){return e??G0}static getUrl(e,r){r==null&&(r=G0);const n={allowGzip:!0,url:"https://"+WY(e.name)+r,throttleCallback:(i,s)=>(r.apiKey===G0&&zb(),Promise.resolve(!0))};return r.projectSecret!=null&&(n.user="",n.password=r.projectSecret),n}}var YY=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const m3=new be(_i);class XY extends Bc{static getApiKey(e){return e!=null&&m3.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="https://cloudflare-eth.com/";break;default:m3.throwArgumentError("unsupported network","network",arguments[0])}return n}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return YY(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield n.perform.call(this,"getBlock",{blockTag:"latest"})).number:n.perform.call(this,e,r)})}}var V0=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const NA=new be(_i);function g3(t){const e={};for(let r in t){if(t[r]==null)continue;let n=t[r];r==="type"&&n===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?n=kb(at(n)):r==="accessList"?n="["+Gu(n).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":n=at(n),e[r]=n)}return e}function ZY(t){if(t.status==0&&(t.message==="No records found"||t.message==="No transactions found"))return t.result;if(t.status!=1||typeof t.message!="string"||!t.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function v3(t){if(t&&t.status==0&&t.message=="NOTOK"&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if(t.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function y3(t){if(t==="pending")throw new Error("pending not supported");return t==="latest"?t:parseInt(t.substring(2),16)}function Fx(t,e,r){if(t==="call"&&e.code===be.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),It(s))return s;NA.throwError("missing revert data in call exception",be.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===be.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&NA.throwError("insufficient funds for intrinsic transaction cost",be.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&NA.throwError("nonce has already been used",be.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r}),n.match(/another transaction with same nonce/)&&NA.throwError("replacement fee too low",be.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&NA.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",be.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r}),e}class JY extends h2{constructor(e,r){super(e),Ue(this,"baseUrl",this.getBaseUrl()),Ue(this,"apiKey",r||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return NA.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,r){const n=Object.keys(r).reduce((s,a)=>{const o=r[a];return o!=null&&(s+=`&${a}=${o}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${n}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,r){return r.module=e,r.apikey=this.apiKey,r}fetch(e,r,n){return V0(this,void 0,void 0,function*(){const i=n?this.getPostUrl():this.getUrl(e,r),s=n?this.getPostData(e,r):null,a=e==="proxy"?v3:ZY;this.emit("debug",{action:"request",request:i,provider:this});const o={url:i,throttleSlotInterval:1e3,throttleCallback:(c,u)=>(this.isCommunityResource()&&zb(),Promise.resolve(!0))};let l=null;s&&(o.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},l=Object.keys(s).map(c=>`${c}=${s[c]}`).join("&"));const A=yield Nb(o,l,a||v3);return this.emit("debug",{action:"response",request:i,response:Us(A),provider:this}),A})}detectNetwork(){return V0(this,void 0,void 0,function*(){return this.network})}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return V0(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch(i=>Fx("sendTransaction",i,r.signedTransaction));case"getBlock":if(r.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash});case"call":{if(r.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=g3(r.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return Fx("call",s,r.transaction)}}case"estimateGas":{const i=g3(r.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return Fx("estimateGas",s,r.transaction)}}case"getLogs":{const i={action:"getLogs"};if(r.filter.fromBlock&&(i.fromBlock=y3(r.filter.fromBlock)),r.filter.toBlock&&(i.toBlock=y3(r.filter.toBlock)),r.filter.address&&(i.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&NA.throwError("unsupported topic count",be.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),r.filter.topics.length===1)){const o=r.filter.topics[0];(typeof o!="string"||o.length!==66)&&NA.throwError("unsupported topic format",be.errors.UNSUPPORTED_OPERATION,{topic0:o}),i.topic0=o}const s=yield this.fetch("logs",i);let a={};for(let o=0;o<s.length;o++){const l=s[o];if(l.blockHash==null){if(a[l.blockNumber]==null){const A=yield this.getBlock(l.blockNumber);A&&(a[l.blockNumber]=A.hash)}l.blockHash=a[l.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return n.perform.call(this,e,r)})}getHistory(e,r,n){return V0(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:r??0,endblock:n??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(s=>{["contractAddress","to"].forEach(function(o){s[o]==""&&delete s[o]}),s.creates==null&&s.contractAddress!=null&&(s.creates=s.contractAddress);const a=this.formatter.transactionResponse(s);return s.timeStamp&&(a.timestamp=parseInt(s.timeStamp)),a})})}isCommunityResource(){return this.apiKey==null}}function qY(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}var t1=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const iu=new be(_i);function W0(){return new Date().getTime()}function w3(t){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(n==null)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null)||iu.throwArgumentError("provider mismatch","networks",t):e=n}return e}function b3(t,e){t=t.slice().sort();const r=Math.floor(t.length/2);if(t.length%2)return t[r];const n=t[r-1],i=t[r];return e!=null&&Math.abs(n-i)>e?null:(n+i)/2}function gd(t){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return JSON.stringify(t);if(typeof t=="string")return t;if(We.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map(e=>gd(e)));if(typeof t=="object"){const e=Object.keys(t);return e.sort(),"{"+e.map(r=>{let n=t[r];return typeof n=="function"?n="[function]":n=gd(n),JSON.stringify(r)+":"+n}).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let $Y=1;function _3(t){let e=null,r=null,n=new Promise(a=>{e=function(){r&&(clearTimeout(r),r=null),a()},r=setTimeout(e,t)});const i=a=>(n=n.then(a),n);function s(){return n}return{cancel:e,getPromise:s,wait:i}}const eX=[be.errors.CALL_EXCEPTION,be.errors.INSUFFICIENT_FUNDS,be.errors.NONCE_EXPIRED,be.errors.REPLACEMENT_UNDERPRICED,be.errors.UNPREDICTABLE_GAS_LIMIT],tX=["address","args","errorArgs","errorSignature","method","transaction"];function K0(t,e){const r={weight:t.weight};return Object.defineProperty(r,"provider",{get:()=>t.provider}),t.start&&(r.start=t.start),e&&(r.duration=e-t.start),t.done&&(t.error?r.error=t.error:r.result=t.result||null),r}function rX(t,e){return function(r){const n={};r.forEach(s=>{const a=t(s.result);n[a]||(n[a]={count:0,result:s.result}),n[a].count++});const i=Object.keys(n);for(let s=0;s<i.length;s++){const a=n[i[s]];if(a.count>=e)return a.result}}}function nX(t,e,r){let n=gd;switch(e){case"getBlockNumber":return function(i){const s=i.map(o=>o.result);let a=b3(i.map(o=>o.result),2);if(a!=null)return a=Math.ceil(a),s.indexOf(a+1)>=0&&a++,a>=t._highestBlockNumber&&(t._highestBlockNumber=a),t._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(a=>a.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return b3(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(i){return i==null?null:(i=Or(i),i.confirmations=-1,gd(i))};break;case"getBlock":r.includeTransactions?n=function(i){return i==null?null:(i=Or(i),i.transactions=i.transactions.map(s=>(s=Or(s),s.confirmations=-1,s)),gd(i))}:n=function(i){return i==null?null:gd(i)};break;default:throw new Error("unknown method: "+e)}return rX(n,t.quorum)}function yp(t,e){return t1(this,void 0,void 0,function*(){const r=t.provider;return r.blockNumber!=null&&r.blockNumber>=e||e===-1?r:md(()=>new Promise((n,i)=>{setTimeout(function(){return r.blockNumber>=e?n(r):t.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function iX(t,e,r,n){return t1(this,void 0,void 0,function*(){let i=t.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&It(n.blockTag)&&(i=yield yp(t,e)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&It(n.blockTag)&&(i=yield yp(t,e)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&It(n.blockTag)&&(i=yield yp(t,e)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&It(n.blockTag)&&(i=yield yp(t,e)),r==="call"&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let s=n.filter;return(s.fromBlock&&It(s.fromBlock)||s.toBlock&&It(s.toBlock))&&(i=yield yp(t,e)),i.getLogs(s)}}return iu.throwError("unknown method error",be.errors.UNKNOWN_ERROR,{method:r,params:n})})}class sX extends h2{constructor(e,r){e.length===0&&iu.throwArgumentError("missing providers","providers",e);const n=e.map((a,o)=>{if(l0.isProvider(a)){const c=s3(a)?2e3:750;return Object.freeze({provider:a,weight:1,stallTimeout:c,priority:1})}const l=Or(a);l.priority==null&&(l.priority=1),l.stallTimeout==null&&(l.stallTimeout=s3(a)?2e3:750),l.weight==null&&(l.weight=1);const A=l.weight;return(A%1||A>512||A<1)&&iu.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${o}].weight`,A),Object.freeze(l)}),i=n.reduce((a,o)=>a+o.weight,0);r==null?r=i/2:r>i&&iu.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);let s=w3(n.map(a=>a.provider.network));s==null&&(s=new Promise((a,o)=>{setTimeout(()=>{this.detectNetwork().then(a,o)},0)})),super(s),Ue(this,"providerConfigs",Object.freeze(n)),Ue(this,"quorum",r),this._highestBlockNumber=-1}detectNetwork(){return t1(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(r=>r.provider.getNetwork()));return w3(e)})}perform(e,r){return t1(this,void 0,void 0,function*(){if(e==="sendTransaction"){const l=yield Promise.all(this.providerConfigs.map(A=>A.provider.sendTransaction(r.signedTransaction).then(c=>c.hash,c=>c)));for(let A=0;A<l.length;A++){const c=l[A];if(typeof c=="string")return c}throw l[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const n=nX(this,e,r),i=qY(this.providerConfigs.map(Or));i.sort((l,A)=>l.priority-A.priority);const s=this._highestBlockNumber;let a=0,o=!0;for(;;){const l=W0();let A=i.filter(d=>d.runner&&l-d.start<d.stallTimeout).reduce((d,f)=>d+f.weight,0);for(;A<this.quorum&&a<i.length;){const d=i[a++],f=$Y++;d.start=W0(),d.staller=_3(d.stallTimeout),d.staller.wait(()=>{d.staller=null}),d.runner=iX(d,s,e,r).then(m=>{d.done=!0,d.result=m,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:K0(d,W0()),request:{method:e,params:Us(r)},provider:this})},m=>{d.done=!0,d.error=m,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:K0(d,W0()),request:{method:e,params:Us(r)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:K0(d,null),request:{method:e,params:Us(r)},provider:this}),A+=d.weight}const c=[];i.forEach(d=>{d.done||!d.runner||(c.push(d.runner),d.staller&&c.push(d.staller.getPromise()))}),c.length&&(yield Promise.race(c));const u=i.filter(d=>d.done&&d.error==null);if(u.length>=this.quorum){const d=n(u);if(d!==void 0)return i.forEach(f=>{f.staller&&f.staller.cancel(),f.cancelled=!0}),d;o||(yield _3(100).getPromise()),o=!1}const h=i.reduce((d,f)=>{if(!f.done||f.error==null)return d;const m=f.error.code;return eX.indexOf(m)>=0&&(d[m]||(d[m]={error:f.error,weight:0}),d[m].weight+=f.weight),d},{});if(Object.keys(h).forEach(d=>{const f=h[d];if(f.weight<this.quorum)return;i.forEach(p=>{p.staller&&p.staller.cancel(),p.cancelled=!0});const m=f.error,g={};tX.forEach(p=>{m[p]!=null&&(g[p]=m[p])}),iu.throwError(m.reason||m.message,d,g)}),i.filter(d=>!d.done).length===0)break}return i.forEach(l=>{l.staller&&l.staller.cancel(),l.cancelled=!0}),iu.throwError("failed to meet quorum",be.errors.SERVER_ERROR,{method:e,params:r,results:i.map(l=>K0(l)),provider:this})})}}const aX=null,ow=new be(_i),pm="84842078b09946638c03157f83405213";class oX extends f2{constructor(e,r){const n=new r5(e,r),i=n.connection;i.password&&ow.throwError("INFURA WebSocket project secrets unsupported",be.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),Ue(this,"apiKey",n.projectId),Ue(this,"projectId",n.projectId),Ue(this,"projectSecret",n.projectSecret)}isCommunityResource(){return this.projectId===pm}}class r5 extends Bc{static getWebSocketProvider(e,r){return new oX(e,r)}static getApiKey(e){const r={apiKey:pm,projectId:pm,projectSecret:null};return e==null||(typeof e=="string"?r.projectId=e:e.projectSecret!=null?(ow.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),ow.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),r.projectId=e.projectId,r.projectSecret=e.projectSecret):e.projectId&&(r.projectId=e.projectId),r.apiKey=r.projectId),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"goerli":n="goerli.infura.io";break;case"sepolia":n="sepolia.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;case"optimism":n="optimism-mainnet.infura.io";break;case"optimism-goerli":n="optimism-goerli.infura.io";break;case"arbitrum":n="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":n="arbitrum-goerli.infura.io";break;default:ow.throwError("unsupported network",be.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+n+"/v3/"+r.projectId,throttleCallback:(s,a)=>(r.projectId===pm&&zb(),Promise.resolve(!0))};return r.projectSecret!=null&&(i.user="",i.password=r.projectSecret),i}isCommunityResource(){return this.projectId===pm}}const kx=new be(_i),lX="ETHERS_JS_SHARED";class AX extends Bc{static getApiKey(e){return e&&typeof e!="string"&&kx.throwArgumentError("invalid apiKey","apiKey",e),e||lX}static getUrl(e,r){kx.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let n=null;switch(e.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:kx.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+r}}const x3=new be(_i),E3="62e1ad51b37b8e00394bda3b";class cX extends Bc{static getApiKey(e){const r={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?r.applicationId=E3:typeof e=="string"?r.applicationId=e:e.applicationSecretKey!=null?(r.applicationId=e.applicationId,r.applicationSecretKey=e.applicationSecretKey):e.applicationId?r.applicationId=e.applicationId:x3.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"goerli":n="eth-goerli.gateway.pokt.network";break;case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"kovan":n="poa-kovan.gateway.pokt.network";break;case"matic":n="poly-mainnet.gateway.pokt.network";break;case"maticmum":n="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;default:x3.throwError("unsupported network",be.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${n}/v1/lb/${r.applicationId}`,s={headers:{},url:i};return r.applicationSecretKey!=null&&(s.user="",s.password=r.applicationSecretKey),s}isCommunityResource(){return this.applicationId===E3}}const B3=new be(_i);let uX=1;function M3(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:uX++,jsonrpc:"2.0"};return new Promise((a,o)=>{this.emit("debug",{action:"request",fetcher:r,request:Us(s),provider:this}),e(s,(l,A)=>{if(l)return this.emit("debug",{action:"response",fetcher:r,error:l,request:s,provider:this}),o(l);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:A,provider:this}),A.error){const c=new Error(A.error.message);return c.code=A.error.code,c.data=A.error.data,o(c)}a(A.result)})})}}function hX(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Us(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class p2 extends hg{constructor(e,r){e==null&&B3.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=hX(e)):e.sendAsync?i=M3(e,e.sendAsync.bind(e)):e.send?i=M3(e,e.send.bind(e)):B3.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),Ue(this,"jsonRpcFetchFunc",i),Ue(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const T3=new be(_i);function dX(t,e){if(t==null&&(t="homestead"),typeof t=="string"){const n=t.match(/^(ws|http)s?:/i);if(n)switch(n[1].toLowerCase()){case"http":case"https":return new hg(t);case"ws":case"wss":return new f2(t);default:T3.throwArgumentError("unsupported URL scheme","network",t)}}const r=eQ(t);return(!r||!r._defaultProvider)&&T3.throwError("unsupported getDefaultProvider network",be.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),r._defaultProvider({FallbackProvider:sX,AlchemyProvider:t5,AnkrProvider:KY,CloudflareProvider:XY,EtherscanProvider:JY,InfuraProvider:r5,JsonRpcProvider:hg,NodesmithProvider:AX,PocketProvider:cX,Web3Provider:p2,IpcProvider:aX},e)}var fX="Invariant failed";function Ol(t,e){if(!t)throw new Error(fX)}var Ka;(function(t){t.Update="Web3ReactUpdate",t.Error="Web3ReactError",t.Deactivate="Web3ReactDeactivate"})(Ka||(Ka={}));function dg(){return dg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},dg.apply(this,arguments)}function n5(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,fg(t,e)}function OM(t){return OM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},OM(t)}function fg(t,e){return fg=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},fg(t,e)}function pX(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function lw(t,e,r){return pX()?lw=Reflect.construct:lw=function(n,i,s){var a=[null];a.push.apply(a,i);var o=Function.bind.apply(n,a),l=new o;return s&&fg(l,s.prototype),l},lw.apply(null,arguments)}function mX(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function r1(t){var e=typeof Map=="function"?new Map:void 0;return r1=function(r){if(r===null||!mX(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,n)}function n(){return lw(r,arguments,OM(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),fg(n,r)},r1(t)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function C3(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}function i5(t){if(typeof t=="string"){t=t.replace(/^Ox/,"0x");var e=Number.parseInt(t,t.trim().substring(0,2)==="0x"?16:10);return Number.isNaN(e)&&Ol(!1),e}else return Number.isInteger(t)||Ol(!1),t}function s5(t){typeof t=="string"&&t.match(/^(0x)?[0-9a-fA-F]{40}$/)||Ol(!1);for(var e=t.substring(0,2)==="0x"?t:"0x"+t,r=e.toLowerCase().substring(2).split(""),n=new Uint8Array(40),i=0;i<40;i++)n[i]=r[i].charCodeAt(0);for(var s=ft(_n(n)),a=0;a<40;a+=2)s[a>>1]>>4>=8&&(r[a]=r[a].toUpperCase()),(s[a>>1]&15)>=8&&(r[a+1]=r[a+1].toUpperCase());var o="0x"+r.join("");return e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==o&&Ol(!1),o}var S3=function(t,e){try{var r=function(i){return Promise.resolve(Promise.all([e.chainId===void 0?t.getChainId():e.chainId,e.account===void 0?t.getAccount():e.account])).then(function(s){var a=s[0],o=s[1],l=i5(a);if(t.supportedChainIds&&!t.supportedChainIds.includes(l))throw new a5(l,t.supportedChainIds);var A=o===null?o:s5(o);return{provider:i,chainId:l,account:A}})},n=e.provider===void 0;return Promise.resolve(n?Promise.resolve(t.getProvider()).then(r):r(e.provider))}catch(i){return Promise.reject(i)}},Y0=function(t){n5(e,t);function e(){var r;return r=t.call(this)||this,r.name=r.constructor.name,r}return e}(r1(Error)),a5=function(t){n5(e,t);function e(r,n){var i;return i=t.call(this)||this,i.name=i.constructor.name,i.message="Unsupported chain id: "+r+". Supported chain ids are: "+n+".",i}return e}(r1(Error)),Nn;(function(t){t[t.ACTIVATE_CONNECTOR=0]="ACTIVATE_CONNECTOR",t[t.UPDATE=1]="UPDATE",t[t.UPDATE_FROM_ERROR=2]="UPDATE_FROM_ERROR",t[t.ERROR=3]="ERROR",t[t.ERROR_FROM_ACTIVATION=4]="ERROR_FROM_ACTIVATION",t[t.DEACTIVATE_CONNECTOR=5]="DEACTIVATE_CONNECTOR"})(Nn||(Nn={}));function gX(t,e){var r=e.type,n=e.payload;switch(r){case Nn.ACTIVATE_CONNECTOR:{var i=n.connector,s=n.provider,a=n.chainId,o=n.account,l=n.onError;return{connector:i,provider:s,chainId:a,account:o,onError:l}}case Nn.UPDATE:{var A=n.provider,c=n.chainId,u=n.account;return dg({},t,A===void 0?{}:{provider:A},c===void 0?{}:{chainId:c},u===void 0?{}:{account:u})}case Nn.UPDATE_FROM_ERROR:{var h=n.provider,d=n.chainId,f=n.account;return dg({},t,h===void 0?{}:{provider:h},d===void 0?{}:{chainId:d},f===void 0?{}:{account:f},{error:void 0})}case Nn.ERROR:{var m=n.error,g=t.connector,p=t.onError;return{connector:g,error:m,onError:p}}case Nn.ERROR_FROM_ACTIVATION:{var v=n.connector,y=n.error;return{connector:v,error:y}}case Nn.DEACTIVATE_CONNECTOR:return{}}}function vX(){var t=_e.useReducer(gX,{}),e=t[0],r=t[1],n=e.connector,i=e.provider,s=e.chainId,a=e.account,o=e.onError,l=e.error,A=_e.useRef(-1);A.current+=1;var c=_e.useCallback(function(g,p,v){v===void 0&&(v=!1);try{var y=A.current,_=!1;return Promise.resolve(C3(function(){return Promise.resolve(g.activate().then(function(E){return _=!0,E})).then(function(E){return Promise.resolve(S3(g,E)).then(function(x){if(A.current>y)throw new Y0;r({type:Nn.ACTIVATE_CONNECTOR,payload:dg({connector:g},x,{onError:p})})})})},function(E){if(E instanceof Y0)_&&g.deactivate();else{if(v)throw _&&g.deactivate(),E;p?(_&&g.deactivate(),p(E)):r({type:Nn.ERROR_FROM_ACTIVATION,payload:{connector:g,error:E}})}}))}catch(E){return Promise.reject(E)}},[]),u=_e.useCallback(function(g){r({type:Nn.ERROR,payload:{error:g}})},[]),h=_e.useCallback(function(){r({type:Nn.DEACTIVATE_CONNECTOR})},[]),d=_e.useCallback(function(g){try{if(!n)throw Error("This should never happen, it's just so Typescript stops complaining");var p=A.current;return Promise.resolve(function(){if(l)return C3(function(){return Promise.resolve(S3(n,g)).then(function(E){if(A.current>p)throw new Y0;r({type:Nn.UPDATE_FROM_ERROR,payload:E})})},function(E){E instanceof Y0||(o?o(E):r({type:Nn.ERROR,payload:{error:E}}))});var v=g.chainId===void 0?void 0:i5(g.chainId);if(v!==void 0&&n.supportedChainIds&&!n.supportedChainIds.includes(v)){var y=new a5(v,n.supportedChainIds);o?o(y):r({type:Nn.ERROR,payload:{error:y}})}else{var _=typeof g.account=="string"?s5(g.account):g.account;r({type:Nn.UPDATE,payload:{provider:g.provider,chainId:v,account:_}})}}())}catch(v){return Promise.reject(v)}},[n,l,o]),f=_e.useCallback(function(g){o?o(g):r({type:Nn.ERROR,payload:{error:g}})},[o]),m=_e.useCallback(function(){r({type:Nn.DEACTIVATE_CONNECTOR})},[]);return _e.useEffect(function(){return function(){n&&n.deactivate()}},[n]),_e.useEffect(function(){return n&&n.on(Ka.Update,d).on(Ka.Error,f).on(Ka.Deactivate,m),function(){n&&n.off(Ka.Update,d).off(Ka.Error,f).off(Ka.Deactivate,m)}},[n,d,f,m]),{connector:n,provider:i,chainId:s,account:a,activate:c,setError:u,deactivate:h,error:l}}var o5="primary",vd={};function yX(t){vd[t]&&Ol(!1),vd[t]=_e.createContext({activate:function(){try{return Ol(!1),Promise.resolve()}catch(r){return Promise.reject(r)}},setError:function(){Ol(!1)},deactivate:function(){Ol(!1)},active:!1}),vd[t].displayName="Web3ReactContext - "+t;var e=vd[t].Provider;return function(r){var n=r.getLibrary,i=r.children,s=vX(),a=s.connector,o=s.provider,l=s.chainId,A=s.account,c=s.activate,u=s.setError,h=s.deactivate,d=s.error,f=a!==void 0&&l!==void 0&&A!==void 0&&!d,m=_e.useMemo(function(){return f&&l!==void 0&&Number.isInteger(l)&&a?n(o,a):void 0},[f,n,o,a,l]),g={connector:a,library:m,chainId:l,account:A,activate:c,setError:u,deactivate:h,active:f,error:d};return X.createElement(e,{value:g},i)}}var wX=yX(o5);function bX(t){return t===void 0&&(t=o5),Object.keys(vd).includes(t)||Ol(!1),vd[t]}function _X(t){return _e.useContext(bX(t))}var DM={},l5={exports:{}},zs={},A5={exports:{}},c5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,z){var j=Q.length;Q.push(z);e:for(;0<j;){var T=j-1>>>1,H=Q[T];if(0<i(H,z))Q[T]=z,Q[j]=H,j=T;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var z=Q[0],j=Q.pop();if(j!==z){Q[0]=j;e:for(var T=0,H=Q.length,me=H>>>1;T<me;){var ee=2*(T+1)-1,U=Q[ee],se=ee+1,le=Q[se];if(0>i(U,j))se<H&&0>i(le,U)?(Q[T]=le,Q[se]=j,T=se):(Q[T]=U,Q[ee]=j,T=ee);else if(se<H&&0>i(le,j))Q[T]=le,Q[se]=j,T=se;else break e}}return z}function i(Q,z){var j=Q.sortIndex-z.sortIndex;return j!==0?j:Q.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],A=[],c=1,u=null,h=3,d=!1,f=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(Q){for(var z=r(A);z!==null;){if(z.callback===null)n(A);else if(z.startTime<=Q)n(A),z.sortIndex=z.expirationTime,e(l,z);else break;z=r(A)}}function _(Q){if(m=!1,y(Q),!f)if(r(l)!==null)f=!0,F(E);else{var z=r(A);z!==null&&k(_,z.startTime-Q)}}function E(Q,z){f=!1,m&&(m=!1,p(M),M=-1),d=!0;var j=h;try{for(y(z),u=r(l);u!==null&&(!(u.expirationTime>z)||Q&&!L());){var T=u.callback;if(typeof T=="function"){u.callback=null,h=u.priorityLevel;var H=T(u.expirationTime<=z);z=t.unstable_now(),typeof H=="function"?u.callback=H:u===r(l)&&n(l),y(z)}else n(l);u=r(l)}if(u!==null)var me=!0;else{var ee=r(A);ee!==null&&k(_,ee.startTime-z),me=!1}return me}finally{u=null,h=j,d=!1}}var x=!1,B=null,M=-1,R=5,I=-1;function L(){return!(t.unstable_now()-I<R)}function D(){if(B!==null){var Q=t.unstable_now();I=Q;var z=!0;try{z=B(!0,Q)}finally{z?w():(x=!1,B=null)}}else x=!1}var w;if(typeof v=="function")w=function(){v(D)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,S=b.port2;b.port1.onmessage=D,w=function(){S.postMessage(null)}}else w=function(){g(D,0)};function F(Q){B=Q,x||(x=!0,w())}function k(Q,z){M=g(function(){Q(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){f||d||(f=!0,F(E))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var j=h;h=z;try{return Q()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,z){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var j=h;h=Q;try{return z()}finally{h=j}},t.unstable_scheduleCallback=function(Q,z,j){var T=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?T+j:T):j=T,Q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=j+H,Q={id:c++,callback:z,priorityLevel:Q,startTime:j,expirationTime:H,sortIndex:-1},j>T?(Q.sortIndex=j,e(A,Q),r(l)===null&&Q===r(A)&&(m?(p(M),M=-1):m=!0,k(_,j-T))):(Q.sortIndex=H,e(l,Q),f||d||(f=!0,F(E))),Q},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(Q){var z=h;return function(){var j=h;h=z;try{return Q.apply(this,arguments)}finally{h=j}}}})(c5);A5.exports=c5;var xX=A5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EX=_e,Os=xX;function Ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u5=new Set,pg={};function Vu(t,e){gf(t,e),gf(t+"Capture",e)}function gf(t,e){for(pg[t]=e,t=0;t<e.length;t++)u5.add(e[t])}var Yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),NM=Object.prototype.hasOwnProperty,BX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I3={},R3={};function MX(t){return NM.call(R3,t)?!0:NM.call(I3,t)?!1:BX.test(t)?R3[t]=!0:(I3[t]=!0,!1)}function TX(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CX(t,e,r,n){if(e===null||typeof e>"u"||TX(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Di(t,e,r,n,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ni[t]=new Di(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ni[e]=new Di(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ni[t]=new Di(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ni[t]=new Di(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ni[t]=new Di(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ni[t]=new Di(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ni[t]=new Di(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ni[t]=new Di(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ni[t]=new Di(t,5,!1,t.toLowerCase(),null,!1,!1)});var m2=/[\-:]([a-z])/g;function g2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(m2,g2);ni[e]=new Di(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(m2,g2);ni[e]=new Di(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(m2,g2);ni[e]=new Di(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ni[t]=new Di(t,1,!1,t.toLowerCase(),null,!1,!1)});ni.xlinkHref=new Di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ni[t]=new Di(t,1,!1,t.toLowerCase(),null,!0,!0)});function v2(t,e,r,n){var i=ni.hasOwnProperty(e)?ni[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CX(e,r,i,n)&&(r=null),n||i===null?MX(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var aA=EX.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X0=Symbol.for("react.element"),yd=Symbol.for("react.portal"),wd=Symbol.for("react.fragment"),y2=Symbol.for("react.strict_mode"),QM=Symbol.for("react.profiler"),h5=Symbol.for("react.provider"),d5=Symbol.for("react.context"),w2=Symbol.for("react.forward_ref"),HM=Symbol.for("react.suspense"),jM=Symbol.for("react.suspense_list"),b2=Symbol.for("react.memo"),kA=Symbol.for("react.lazy"),f5=Symbol.for("react.offscreen"),U3=Symbol.iterator;function wp(t){return t===null||typeof t!="object"?null:(t=U3&&t[U3]||t["@@iterator"],typeof t=="function"?t:null)}var Kr=Object.assign,Lx;function mm(t){if(Lx===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Lx=e&&e[1]||""}return`
`+Lx+t}var Px=!1;function Ox(t,e){if(!t||Px)return"";Px=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(A){var n=A}Reflect.construct(t,[],e)}else{try{e.call()}catch(A){n=A}t.call(e.prototype)}else{try{throw Error()}catch(A){n=A}t()}}catch(A){if(A&&n&&typeof A.stack=="string"){for(var i=A.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Px=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?mm(t):""}function SX(t){switch(t.tag){case 5:return mm(t.type);case 16:return mm("Lazy");case 13:return mm("Suspense");case 19:return mm("SuspenseList");case 0:case 2:case 15:return t=Ox(t.type,!1),t;case 11:return t=Ox(t.type.render,!1),t;case 1:return t=Ox(t.type,!0),t;default:return""}}function zM(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wd:return"Fragment";case yd:return"Portal";case QM:return"Profiler";case y2:return"StrictMode";case HM:return"Suspense";case jM:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d5:return(t.displayName||"Context")+".Consumer";case h5:return(t._context.displayName||"Context")+".Provider";case w2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case b2:return e=t.displayName||null,e!==null?e:zM(t.type)||"Memo";case kA:e=t._payload,t=t._init;try{return zM(t(e))}catch{}}return null}function IX(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zM(e);case 8:return e===y2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function p5(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RX(t){var e=p5(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Z0(t){t._valueTracker||(t._valueTracker=RX(t))}function m5(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=p5(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function n1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function GM(t,e){var r=e.checked;return Kr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function F3(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=fc(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function g5(t,e){e=e.checked,e!=null&&v2(t,"checked",e,!1)}function VM(t,e){g5(t,e);var r=fc(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?WM(t,e.type,r):e.hasOwnProperty("defaultValue")&&WM(t,e.type,fc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function k3(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function WM(t,e,r){(e!=="number"||n1(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var gm=Array.isArray;function Kd(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+fc(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function KM(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return Kr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function L3(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Ne(92));if(gm(r)){if(1<r.length)throw Error(Ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fc(r)}}function v5(t,e){var r=fc(e.value),n=fc(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function P3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y5(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YM(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y5(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var J0,w5=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(J0=J0||document.createElement("div"),J0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=J0.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mg(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Hm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},UX=["Webkit","ms","Moz","O"];Object.keys(Hm).forEach(function(t){UX.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hm[e]=Hm[t]})});function b5(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Hm.hasOwnProperty(t)&&Hm[t]?(""+e).trim():e+"px"}function _5(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=b5(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var FX=Kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XM(t,e){if(e){if(FX[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ne(62))}}function ZM(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JM=null;function _2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qM=null,Yd=null,Xd=null;function O3(t){if(t=f0(t)){if(typeof qM!="function")throw Error(Ne(280));var e=t.stateNode;e&&(e=Yb(e),qM(t.stateNode,t.type,e))}}function x5(t){Yd?Xd?Xd.push(t):Xd=[t]:Yd=t}function E5(){if(Yd){var t=Yd,e=Xd;if(Xd=Yd=null,O3(t),e)for(t=0;t<e.length;t++)O3(e[t])}}function B5(t,e){return t(e)}function M5(){}var Dx=!1;function T5(t,e,r){if(Dx)return t(e,r);Dx=!0;try{return B5(t,e,r)}finally{Dx=!1,(Yd!==null||Xd!==null)&&(M5(),E5())}}function gg(t,e){var r=t.stateNode;if(r===null)return null;var n=Yb(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Ne(231,e,typeof r));return r}var $M=!1;if(Yl)try{var bp={};Object.defineProperty(bp,"passive",{get:function(){$M=!0}}),window.addEventListener("test",bp,bp),window.removeEventListener("test",bp,bp)}catch{$M=!1}function kX(t,e,r,n,i,s,a,o,l){var A=Array.prototype.slice.call(arguments,3);try{e.apply(r,A)}catch(c){this.onError(c)}}var jm=!1,i1=null,s1=!1,eT=null,LX={onError:function(t){jm=!0,i1=t}};function PX(t,e,r,n,i,s,a,o,l){jm=!1,i1=null,kX.apply(LX,arguments)}function OX(t,e,r,n,i,s,a,o,l){if(PX.apply(this,arguments),jm){if(jm){var A=i1;jm=!1,i1=null}else throw Error(Ne(198));s1||(s1=!0,eT=A)}}function Wu(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function C5(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function D3(t){if(Wu(t)!==t)throw Error(Ne(188))}function DX(t){var e=t.alternate;if(!e){if(e=Wu(t),e===null)throw Error(Ne(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return D3(i),t;if(s===n)return D3(i),e;s=s.sibling}throw Error(Ne(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(Ne(189))}}if(r.alternate!==n)throw Error(Ne(190))}if(r.tag!==3)throw Error(Ne(188));return r.stateNode.current===r?t:e}function S5(t){return t=DX(t),t!==null?I5(t):null}function I5(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=I5(t);if(e!==null)return e;t=t.sibling}return null}var R5=Os.unstable_scheduleCallback,N3=Os.unstable_cancelCallback,NX=Os.unstable_shouldYield,QX=Os.unstable_requestPaint,hn=Os.unstable_now,HX=Os.unstable_getCurrentPriorityLevel,x2=Os.unstable_ImmediatePriority,U5=Os.unstable_UserBlockingPriority,a1=Os.unstable_NormalPriority,jX=Os.unstable_LowPriority,F5=Os.unstable_IdlePriority,Gb=null,Go=null;function zX(t){if(Go&&typeof Go.onCommitFiberRoot=="function")try{Go.onCommitFiberRoot(Gb,t,void 0,(t.current.flags&128)===128)}catch{}}var eo=Math.clz32?Math.clz32:WX,GX=Math.log,VX=Math.LN2;function WX(t){return t>>>=0,t===0?32:31-(GX(t)/VX|0)|0}var q0=64,$0=4194304;function vm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function o1(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=vm(o):(s&=a,s!==0&&(n=vm(s)))}else a=r&~i,a!==0?n=vm(a):s!==0&&(n=vm(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-eo(e),i=1<<r,n|=t[r],e&=~i;return n}function KX(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YX(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-eo(s),o=1<<a,l=i[a];l===-1?(!(o&r)||o&n)&&(i[a]=KX(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function tT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function k5(){var t=q0;return q0<<=1,!(q0&4194240)&&(q0=64),t}function Nx(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function h0(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-eo(e),t[e]=r}function XX(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-eo(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function E2(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-eo(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var cr=0;function L5(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P5,B2,O5,D5,N5,rT=!1,ev=[],ec=null,tc=null,rc=null,vg=new Map,yg=new Map,QA=[],ZX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q3(t,e){switch(t){case"focusin":case"focusout":ec=null;break;case"dragenter":case"dragleave":tc=null;break;case"mouseover":case"mouseout":rc=null;break;case"pointerover":case"pointerout":vg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yg.delete(e.pointerId)}}function _p(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=f0(e),e!==null&&B2(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JX(t,e,r,n,i){switch(e){case"focusin":return ec=_p(ec,t,e,r,n,i),!0;case"dragenter":return tc=_p(tc,t,e,r,n,i),!0;case"mouseover":return rc=_p(rc,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return vg.set(s,_p(vg.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,yg.set(s,_p(yg.get(s)||null,t,e,r,n,i)),!0}return!1}function Q5(t){var e=ou(t.target);if(e!==null){var r=Wu(e);if(r!==null){if(e=r.tag,e===13){if(e=C5(r),e!==null){t.blockedOn=e,N5(t.priority,function(){O5(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Aw(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=nT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);JM=n,r.target.dispatchEvent(n),JM=null}else return e=f0(r),e!==null&&B2(e),t.blockedOn=r,!1;e.shift()}return!0}function H3(t,e,r){Aw(t)&&r.delete(e)}function qX(){rT=!1,ec!==null&&Aw(ec)&&(ec=null),tc!==null&&Aw(tc)&&(tc=null),rc!==null&&Aw(rc)&&(rc=null),vg.forEach(H3),yg.forEach(H3)}function xp(t,e){t.blockedOn===e&&(t.blockedOn=null,rT||(rT=!0,Os.unstable_scheduleCallback(Os.unstable_NormalPriority,qX)))}function wg(t){function e(i){return xp(i,t)}if(0<ev.length){xp(ev[0],t);for(var r=1;r<ev.length;r++){var n=ev[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ec!==null&&xp(ec,t),tc!==null&&xp(tc,t),rc!==null&&xp(rc,t),vg.forEach(e),yg.forEach(e),r=0;r<QA.length;r++)n=QA[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<QA.length&&(r=QA[0],r.blockedOn===null);)Q5(r),r.blockedOn===null&&QA.shift()}var Zd=aA.ReactCurrentBatchConfig,l1=!0;function $X(t,e,r,n){var i=cr,s=Zd.transition;Zd.transition=null;try{cr=1,M2(t,e,r,n)}finally{cr=i,Zd.transition=s}}function eZ(t,e,r,n){var i=cr,s=Zd.transition;Zd.transition=null;try{cr=4,M2(t,e,r,n)}finally{cr=i,Zd.transition=s}}function M2(t,e,r,n){if(l1){var i=nT(t,e,r,n);if(i===null)Xx(t,e,n,A1,r),Q3(t,n);else if(JX(i,t,e,r,n))n.stopPropagation();else if(Q3(t,n),e&4&&-1<ZX.indexOf(t)){for(;i!==null;){var s=f0(i);if(s!==null&&P5(s),s=nT(t,e,r,n),s===null&&Xx(t,e,n,A1,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Xx(t,e,n,null,r)}}var A1=null;function nT(t,e,r,n){if(A1=null,t=_2(n),t=ou(t),t!==null)if(e=Wu(t),e===null)t=null;else if(r=e.tag,r===13){if(t=C5(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return A1=t,null}function H5(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HX()){case x2:return 1;case U5:return 4;case a1:case jX:return 16;case F5:return 536870912;default:return 16}default:return 16}}var zA=null,T2=null,cw=null;function j5(){if(cw)return cw;var t,e=T2,r=e.length,n,i="value"in zA?zA.value:zA.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[s-n];n++);return cw=i.slice(t,1<n?1-n:void 0)}function uw(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tv(){return!0}function j3(){return!1}function Gs(t){function e(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tv:j3,this.isPropagationStopped=j3,this}return Kr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tv)},persist:function(){},isPersistent:tv}),e}var Vf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},C2=Gs(Vf),d0=Kr({},Vf,{view:0,detail:0}),tZ=Gs(d0),Qx,Hx,Ep,Vb=Kr({},d0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:S2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ep&&(Ep&&t.type==="mousemove"?(Qx=t.screenX-Ep.screenX,Hx=t.screenY-Ep.screenY):Hx=Qx=0,Ep=t),Qx)},movementY:function(t){return"movementY"in t?t.movementY:Hx}}),z3=Gs(Vb),rZ=Kr({},Vb,{dataTransfer:0}),nZ=Gs(rZ),iZ=Kr({},d0,{relatedTarget:0}),jx=Gs(iZ),sZ=Kr({},Vf,{animationName:0,elapsedTime:0,pseudoElement:0}),aZ=Gs(sZ),oZ=Kr({},Vf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lZ=Gs(oZ),AZ=Kr({},Vf,{data:0}),G3=Gs(AZ),cZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hZ[t])?!!e[t]:!1}function S2(){return dZ}var fZ=Kr({},d0,{key:function(t){if(t.key){var e=cZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uw(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:S2,charCode:function(t){return t.type==="keypress"?uw(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uw(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pZ=Gs(fZ),mZ=Kr({},Vb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),V3=Gs(mZ),gZ=Kr({},d0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:S2}),vZ=Gs(gZ),yZ=Kr({},Vf,{propertyName:0,elapsedTime:0,pseudoElement:0}),wZ=Gs(yZ),bZ=Kr({},Vb,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_Z=Gs(bZ),xZ=[9,13,27,32],I2=Yl&&"CompositionEvent"in window,zm=null;Yl&&"documentMode"in document&&(zm=document.documentMode);var EZ=Yl&&"TextEvent"in window&&!zm,z5=Yl&&(!I2||zm&&8<zm&&11>=zm),W3=String.fromCharCode(32),K3=!1;function G5(t,e){switch(t){case"keyup":return xZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V5(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bd=!1;function BZ(t,e){switch(t){case"compositionend":return V5(e);case"keypress":return e.which!==32?null:(K3=!0,W3);case"textInput":return t=e.data,t===W3&&K3?null:t;default:return null}}function MZ(t,e){if(bd)return t==="compositionend"||!I2&&G5(t,e)?(t=j5(),cw=T2=zA=null,bd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return z5&&e.locale!=="ko"?null:e.data;default:return null}}var TZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y3(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TZ[t.type]:e==="textarea"}function W5(t,e,r,n){x5(n),e=c1(e,"onChange"),0<e.length&&(r=new C2("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Gm=null,bg=null;function CZ(t){n6(t,0)}function Wb(t){var e=Ed(t);if(m5(e))return t}function SZ(t,e){if(t==="change")return e}var K5=!1;if(Yl){var zx;if(Yl){var Gx="oninput"in document;if(!Gx){var X3=document.createElement("div");X3.setAttribute("oninput","return;"),Gx=typeof X3.oninput=="function"}zx=Gx}else zx=!1;K5=zx&&(!document.documentMode||9<document.documentMode)}function Z3(){Gm&&(Gm.detachEvent("onpropertychange",Y5),bg=Gm=null)}function Y5(t){if(t.propertyName==="value"&&Wb(bg)){var e=[];W5(e,bg,t,_2(t)),T5(CZ,e)}}function IZ(t,e,r){t==="focusin"?(Z3(),Gm=e,bg=r,Gm.attachEvent("onpropertychange",Y5)):t==="focusout"&&Z3()}function RZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wb(bg)}function UZ(t,e){if(t==="click")return Wb(e)}function FZ(t,e){if(t==="input"||t==="change")return Wb(e)}function kZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ao=typeof Object.is=="function"?Object.is:kZ;function _g(t,e){if(ao(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!NM.call(e,i)||!ao(t[i],e[i]))return!1}return!0}function J3(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function q3(t,e){var r=J3(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=J3(r)}}function X5(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?X5(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Z5(){for(var t=window,e=n1();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=n1(t.document)}return e}function R2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LZ(t){var e=Z5(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&X5(r.ownerDocument.documentElement,r)){if(n!==null&&R2(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=q3(r,s);var a=q3(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PZ=Yl&&"documentMode"in document&&11>=document.documentMode,_d=null,iT=null,Vm=null,sT=!1;function $3(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sT||_d==null||_d!==n1(n)||(n=_d,"selectionStart"in n&&R2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vm&&_g(Vm,n)||(Vm=n,n=c1(iT,"onSelect"),0<n.length&&(e=new C2("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=_d)))}function rv(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var xd={animationend:rv("Animation","AnimationEnd"),animationiteration:rv("Animation","AnimationIteration"),animationstart:rv("Animation","AnimationStart"),transitionend:rv("Transition","TransitionEnd")},Vx={},J5={};Yl&&(J5=document.createElement("div").style,"AnimationEvent"in window||(delete xd.animationend.animation,delete xd.animationiteration.animation,delete xd.animationstart.animation),"TransitionEvent"in window||delete xd.transitionend.transition);function Kb(t){if(Vx[t])return Vx[t];if(!xd[t])return t;var e=xd[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in J5)return Vx[t]=e[r];return t}var q5=Kb("animationend"),$5=Kb("animationiteration"),e6=Kb("animationstart"),t6=Kb("transitionend"),r6=new Map,eF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mc(t,e){r6.set(t,e),Vu(e,[t])}for(var Wx=0;Wx<eF.length;Wx++){var Kx=eF[Wx],OZ=Kx.toLowerCase(),DZ=Kx[0].toUpperCase()+Kx.slice(1);Mc(OZ,"on"+DZ)}Mc(q5,"onAnimationEnd");Mc($5,"onAnimationIteration");Mc(e6,"onAnimationStart");Mc("dblclick","onDoubleClick");Mc("focusin","onFocus");Mc("focusout","onBlur");Mc(t6,"onTransitionEnd");gf("onMouseEnter",["mouseout","mouseover"]);gf("onMouseLeave",["mouseout","mouseover"]);gf("onPointerEnter",["pointerout","pointerover"]);gf("onPointerLeave",["pointerout","pointerover"]);Vu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ym="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NZ=new Set("cancel close invalid load scroll toggle".split(" ").concat(ym));function tF(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,OX(n,e,void 0,t),t.currentTarget=null}function n6(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,A=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;tF(i,o,A),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,A=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;tF(i,o,A),s=l}}}if(s1)throw t=eT,s1=!1,eT=null,t}function xr(t,e){var r=e[cT];r===void 0&&(r=e[cT]=new Set);var n=t+"__bubble";r.has(n)||(i6(e,t,2,!1),r.add(n))}function Yx(t,e,r){var n=0;e&&(n|=4),i6(r,t,n,e)}var nv="_reactListening"+Math.random().toString(36).slice(2);function xg(t){if(!t[nv]){t[nv]=!0,u5.forEach(function(r){r!=="selectionchange"&&(NZ.has(r)||Yx(r,!1,t),Yx(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nv]||(e[nv]=!0,Yx("selectionchange",!1,e))}}function i6(t,e,r,n){switch(H5(e)){case 1:var i=$X;break;case 4:i=eZ;break;default:i=M2}r=i.bind(null,e,r,t),i=void 0,!$M||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Xx(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;o!==null;){if(a=ou(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}T5(function(){var A=s,c=_2(r),u=[];e:{var h=r6.get(t);if(h!==void 0){var d=C2,f=t;switch(t){case"keypress":if(uw(r)===0)break e;case"keydown":case"keyup":d=pZ;break;case"focusin":f="focus",d=jx;break;case"focusout":f="blur",d=jx;break;case"beforeblur":case"afterblur":d=jx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=z3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=nZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=vZ;break;case q5:case $5:case e6:d=aZ;break;case t6:d=wZ;break;case"scroll":d=tZ;break;case"wheel":d=_Z;break;case"copy":case"cut":case"paste":d=lZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=V3}var m=(e&4)!==0,g=!m&&t==="scroll",p=m?h!==null?h+"Capture":null:h;m=[];for(var v=A,y;v!==null;){y=v;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,p!==null&&(_=gg(v,p),_!=null&&m.push(Eg(v,_,y)))),g)break;v=v.return}0<m.length&&(h=new d(h,f,null,r,c),u.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&r!==JM&&(f=r.relatedTarget||r.fromElement)&&(ou(f)||f[Xl]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(f=r.relatedTarget||r.toElement,d=A,f=f?ou(f):null,f!==null&&(g=Wu(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(d=null,f=A),d!==f)){if(m=z3,_="onMouseLeave",p="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=V3,_="onPointerLeave",p="onPointerEnter",v="pointer"),g=d==null?h:Ed(d),y=f==null?h:Ed(f),h=new m(_,v+"leave",d,r,c),h.target=g,h.relatedTarget=y,_=null,ou(c)===A&&(m=new m(p,v+"enter",f,r,c),m.target=y,m.relatedTarget=g,_=m),g=_,d&&f)t:{for(m=d,p=f,v=0,y=m;y;y=ih(y))v++;for(y=0,_=p;_;_=ih(_))y++;for(;0<v-y;)m=ih(m),v--;for(;0<y-v;)p=ih(p),y--;for(;v--;){if(m===p||p!==null&&m===p.alternate)break t;m=ih(m),p=ih(p)}m=null}else m=null;d!==null&&rF(u,h,d,m,!1),f!==null&&g!==null&&rF(u,g,f,m,!0)}}e:{if(h=A?Ed(A):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var E=SZ;else if(Y3(h))if(K5)E=FZ;else{E=RZ;var x=IZ}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=UZ);if(E&&(E=E(t,A))){W5(u,E,r,c);break e}x&&x(t,h,A),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&WM(h,"number",h.value)}switch(x=A?Ed(A):window,t){case"focusin":(Y3(x)||x.contentEditable==="true")&&(_d=x,iT=A,Vm=null);break;case"focusout":Vm=iT=_d=null;break;case"mousedown":sT=!0;break;case"contextmenu":case"mouseup":case"dragend":sT=!1,$3(u,r,c);break;case"selectionchange":if(PZ)break;case"keydown":case"keyup":$3(u,r,c)}var B;if(I2)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else bd?G5(t,r)&&(M="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(z5&&r.locale!=="ko"&&(bd||M!=="onCompositionStart"?M==="onCompositionEnd"&&bd&&(B=j5()):(zA=c,T2="value"in zA?zA.value:zA.textContent,bd=!0)),x=c1(A,M),0<x.length&&(M=new G3(M,t,null,r,c),u.push({event:M,listeners:x}),B?M.data=B:(B=V5(r),B!==null&&(M.data=B)))),(B=EZ?BZ(t,r):MZ(t,r))&&(A=c1(A,"onBeforeInput"),0<A.length&&(c=new G3("onBeforeInput","beforeinput",null,r,c),u.push({event:c,listeners:A}),c.data=B))}n6(u,e)})}function Eg(t,e,r){return{instance:t,listener:e,currentTarget:r}}function c1(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=gg(t,r),s!=null&&n.unshift(Eg(t,s,i)),s=gg(t,e),s!=null&&n.push(Eg(t,s,i))),t=t.return}return n}function ih(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function rF(t,e,r,n,i){for(var s=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,A=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&A!==null&&(o=A,i?(l=gg(r,s),l!=null&&a.unshift(Eg(r,l,o))):i||(l=gg(r,s),l!=null&&a.push(Eg(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var QZ=/\r\n?/g,HZ=/\u0000|\uFFFD/g;function nF(t){return(typeof t=="string"?t:""+t).replace(QZ,`
`).replace(HZ,"")}function iv(t,e,r){if(e=nF(e),nF(t)!==e&&r)throw Error(Ne(425))}function u1(){}var aT=null,oT=null;function lT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var AT=typeof setTimeout=="function"?setTimeout:void 0,jZ=typeof clearTimeout=="function"?clearTimeout:void 0,iF=typeof Promise=="function"?Promise:void 0,zZ=typeof queueMicrotask=="function"?queueMicrotask:typeof iF<"u"?function(t){return iF.resolve(null).then(t).catch(GZ)}:AT;function GZ(t){setTimeout(function(){throw t})}function Zx(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),wg(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);wg(e)}function nc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sF(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Wf=Math.random().toString(36).slice(2),Ro="__reactFiber$"+Wf,Bg="__reactProps$"+Wf,Xl="__reactContainer$"+Wf,cT="__reactEvents$"+Wf,VZ="__reactListeners$"+Wf,WZ="__reactHandles$"+Wf;function ou(t){var e=t[Ro];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Xl]||r[Ro]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=sF(t);t!==null;){if(r=t[Ro])return r;t=sF(t)}return e}t=r,r=t.parentNode}return null}function f0(t){return t=t[Ro]||t[Xl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ed(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ne(33))}function Yb(t){return t[Bg]||null}var uT=[],Bd=-1;function Tc(t){return{current:t}}function Cr(t){0>Bd||(t.current=uT[Bd],uT[Bd]=null,Bd--)}function wr(t,e){Bd++,uT[Bd]=t.current,t.current=e}var pc={},bi=Tc(pc),Ji=Tc(!1),Tu=pc;function vf(t,e){var r=t.type.contextTypes;if(!r)return pc;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qi(t){return t=t.childContextTypes,t!=null}function h1(){Cr(Ji),Cr(bi)}function aF(t,e,r){if(bi.current!==pc)throw Error(Ne(168));wr(bi,e),wr(Ji,r)}function s6(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Ne(108,IX(t)||"Unknown",i));return Kr({},r,n)}function d1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pc,Tu=bi.current,wr(bi,t),wr(Ji,Ji.current),!0}function oF(t,e,r){var n=t.stateNode;if(!n)throw Error(Ne(169));r?(t=s6(t,e,Tu),n.__reactInternalMemoizedMergedChildContext=t,Cr(Ji),Cr(bi),wr(bi,t)):Cr(Ji),wr(Ji,r)}var Ul=null,Xb=!1,Jx=!1;function a6(t){Ul===null?Ul=[t]:Ul.push(t)}function KZ(t){Xb=!0,a6(t)}function Cc(){if(!Jx&&Ul!==null){Jx=!0;var t=0,e=cr;try{var r=Ul;for(cr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ul=null,Xb=!1}catch(i){throw Ul!==null&&(Ul=Ul.slice(t+1)),R5(x2,Cc),i}finally{cr=e,Jx=!1}}return null}var Md=[],Td=0,f1=null,p1=0,na=[],ia=0,Cu=null,Dl=1,Nl="";function qc(t,e){Md[Td++]=p1,Md[Td++]=f1,f1=t,p1=e}function o6(t,e,r){na[ia++]=Dl,na[ia++]=Nl,na[ia++]=Cu,Cu=t;var n=Dl;t=Nl;var i=32-eo(n)-1;n&=~(1<<i),r+=1;var s=32-eo(e)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,Dl=1<<32-eo(e)+i|r<<i|n,Nl=s+t}else Dl=1<<s|r<<i|n,Nl=t}function U2(t){t.return!==null&&(qc(t,1),o6(t,1,0))}function F2(t){for(;t===f1;)f1=Md[--Td],Md[Td]=null,p1=Md[--Td],Md[Td]=null;for(;t===Cu;)Cu=na[--ia],na[ia]=null,Nl=na[--ia],na[ia]=null,Dl=na[--ia],na[ia]=null}var Fs=null,Ts=null,Lr=!1,Ya=null;function l6(t,e){var r=la(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function lF(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fs=t,Ts=nc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fs=t,Ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Cu!==null?{id:Dl,overflow:Nl}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=la(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Fs=t,Ts=null,!0):!1;default:return!1}}function hT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dT(t){if(Lr){var e=Ts;if(e){var r=e;if(!lF(t,e)){if(hT(t))throw Error(Ne(418));e=nc(r.nextSibling);var n=Fs;e&&lF(t,e)?l6(n,r):(t.flags=t.flags&-4097|2,Lr=!1,Fs=t)}}else{if(hT(t))throw Error(Ne(418));t.flags=t.flags&-4097|2,Lr=!1,Fs=t}}}function AF(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fs=t}function sv(t){if(t!==Fs)return!1;if(!Lr)return AF(t),Lr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lT(t.type,t.memoizedProps)),e&&(e=Ts)){if(hT(t))throw A6(),Error(Ne(418));for(;e;)l6(t,e),e=nc(e.nextSibling)}if(AF(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ts=nc(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ts=null}}else Ts=Fs?nc(t.stateNode.nextSibling):null;return!0}function A6(){for(var t=Ts;t;)t=nc(t.nextSibling)}function yf(){Ts=Fs=null,Lr=!1}function k2(t){Ya===null?Ya=[t]:Ya.push(t)}var YZ=aA.ReactCurrentBatchConfig;function Bp(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ne(309));var n=r.stateNode}if(!n)throw Error(Ne(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ne(284));if(!r._owner)throw Error(Ne(290,t))}return t}function av(t,e){throw t=Object.prototype.toString.call(e),Error(Ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cF(t){var e=t._init;return e(t._payload)}function c6(t){function e(p,v){if(t){var y=p.deletions;y===null?(p.deletions=[v],p.flags|=16):y.push(v)}}function r(p,v){if(!t)return null;for(;v!==null;)e(p,v),v=v.sibling;return null}function n(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=oc(p,v),p.index=0,p.sibling=null,p}function s(p,v,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<v?(p.flags|=2,v):y):(p.flags|=2,v)):(p.flags|=1048576,v)}function a(p){return t&&p.alternate===null&&(p.flags|=2),p}function o(p,v,y,_){return v===null||v.tag!==6?(v=iE(y,p.mode,_),v.return=p,v):(v=i(v,y),v.return=p,v)}function l(p,v,y,_){var E=y.type;return E===wd?c(p,v,y.props.children,_,y.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kA&&cF(E)===v.type)?(_=i(v,y.props),_.ref=Bp(p,v,y),_.return=p,_):(_=vw(y.type,y.key,y.props,null,p.mode,_),_.ref=Bp(p,v,y),_.return=p,_)}function A(p,v,y,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=sE(y,p.mode,_),v.return=p,v):(v=i(v,y.children||[]),v.return=p,v)}function c(p,v,y,_,E){return v===null||v.tag!==7?(v=gu(y,p.mode,_,E),v.return=p,v):(v=i(v,y),v.return=p,v)}function u(p,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=iE(""+v,p.mode,y),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case X0:return y=vw(v.type,v.key,v.props,null,p.mode,y),y.ref=Bp(p,null,v),y.return=p,y;case yd:return v=sE(v,p.mode,y),v.return=p,v;case kA:var _=v._init;return u(p,_(v._payload),y)}if(gm(v)||wp(v))return v=gu(v,p.mode,y,null),v.return=p,v;av(p,v)}return null}function h(p,v,y,_){var E=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return E!==null?null:o(p,v,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case X0:return y.key===E?l(p,v,y,_):null;case yd:return y.key===E?A(p,v,y,_):null;case kA:return E=y._init,h(p,v,E(y._payload),_)}if(gm(y)||wp(y))return E!==null?null:c(p,v,y,_,null);av(p,y)}return null}function d(p,v,y,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(y)||null,o(v,p,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case X0:return p=p.get(_.key===null?y:_.key)||null,l(v,p,_,E);case yd:return p=p.get(_.key===null?y:_.key)||null,A(v,p,_,E);case kA:var x=_._init;return d(p,v,y,x(_._payload),E)}if(gm(_)||wp(_))return p=p.get(y)||null,c(v,p,_,E,null);av(v,_)}return null}function f(p,v,y,_){for(var E=null,x=null,B=v,M=v=0,R=null;B!==null&&M<y.length;M++){B.index>M?(R=B,B=null):R=B.sibling;var I=h(p,B,y[M],_);if(I===null){B===null&&(B=R);break}t&&B&&I.alternate===null&&e(p,B),v=s(I,v,M),x===null?E=I:x.sibling=I,x=I,B=R}if(M===y.length)return r(p,B),Lr&&qc(p,M),E;if(B===null){for(;M<y.length;M++)B=u(p,y[M],_),B!==null&&(v=s(B,v,M),x===null?E=B:x.sibling=B,x=B);return Lr&&qc(p,M),E}for(B=n(p,B);M<y.length;M++)R=d(B,p,M,y[M],_),R!==null&&(t&&R.alternate!==null&&B.delete(R.key===null?M:R.key),v=s(R,v,M),x===null?E=R:x.sibling=R,x=R);return t&&B.forEach(function(L){return e(p,L)}),Lr&&qc(p,M),E}function m(p,v,y,_){var E=wp(y);if(typeof E!="function")throw Error(Ne(150));if(y=E.call(y),y==null)throw Error(Ne(151));for(var x=E=null,B=v,M=v=0,R=null,I=y.next();B!==null&&!I.done;M++,I=y.next()){B.index>M?(R=B,B=null):R=B.sibling;var L=h(p,B,I.value,_);if(L===null){B===null&&(B=R);break}t&&B&&L.alternate===null&&e(p,B),v=s(L,v,M),x===null?E=L:x.sibling=L,x=L,B=R}if(I.done)return r(p,B),Lr&&qc(p,M),E;if(B===null){for(;!I.done;M++,I=y.next())I=u(p,I.value,_),I!==null&&(v=s(I,v,M),x===null?E=I:x.sibling=I,x=I);return Lr&&qc(p,M),E}for(B=n(p,B);!I.done;M++,I=y.next())I=d(B,p,M,I.value,_),I!==null&&(t&&I.alternate!==null&&B.delete(I.key===null?M:I.key),v=s(I,v,M),x===null?E=I:x.sibling=I,x=I);return t&&B.forEach(function(D){return e(p,D)}),Lr&&qc(p,M),E}function g(p,v,y,_){if(typeof y=="object"&&y!==null&&y.type===wd&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case X0:e:{for(var E=y.key,x=v;x!==null;){if(x.key===E){if(E=y.type,E===wd){if(x.tag===7){r(p,x.sibling),v=i(x,y.props.children),v.return=p,p=v;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===kA&&cF(E)===x.type){r(p,x.sibling),v=i(x,y.props),v.ref=Bp(p,x,y),v.return=p,p=v;break e}r(p,x);break}else e(p,x);x=x.sibling}y.type===wd?(v=gu(y.props.children,p.mode,_,y.key),v.return=p,p=v):(_=vw(y.type,y.key,y.props,null,p.mode,_),_.ref=Bp(p,v,y),_.return=p,p=_)}return a(p);case yd:e:{for(x=y.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){r(p,v.sibling),v=i(v,y.children||[]),v.return=p,p=v;break e}else{r(p,v);break}else e(p,v);v=v.sibling}v=sE(y,p.mode,_),v.return=p,p=v}return a(p);case kA:return x=y._init,g(p,v,x(y._payload),_)}if(gm(y))return f(p,v,y,_);if(wp(y))return m(p,v,y,_);av(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(r(p,v.sibling),v=i(v,y),v.return=p,p=v):(r(p,v),v=iE(y,p.mode,_),v.return=p,p=v),a(p)):r(p,v)}return g}var wf=c6(!0),u6=c6(!1),m1=Tc(null),g1=null,Cd=null,L2=null;function P2(){L2=Cd=g1=null}function O2(t){var e=m1.current;Cr(m1),t._currentValue=e}function fT(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Jd(t,e){g1=t,L2=Cd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xi=!0),t.firstContext=null)}function ya(t){var e=t._currentValue;if(L2!==t)if(t={context:t,memoizedValue:e,next:null},Cd===null){if(g1===null)throw Error(Ne(308));Cd=t,g1.dependencies={lanes:0,firstContext:t}}else Cd=Cd.next=t;return e}var lu=null;function D2(t){lu===null?lu=[t]:lu.push(t)}function h6(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,D2(e)):(r.next=i.next,i.next=r),e.interleaved=r,Zl(t,n)}function Zl(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var LA=!1;function N2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d6(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ic(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Wt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Zl(t,r)}return i=n.interleaved,i===null?(e.next=e,D2(n)):(e.next=i.next,i.next=e),n.interleaved=e,Zl(t,r)}function hw(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,E2(t,r)}}function uF(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function v1(t,e,r,n){var i=t.updateQueue;LA=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,A=l.next;l.next=null,a===null?s=A:a.next=A,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=A:o.next=A,c.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;a=0,c=A=l=null,o=s;do{var h=o.lane,d=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=t,m=o;switch(h=e,d=r,m.tag){case 1:if(f=m.payload,typeof f=="function"){u=f.call(d,u,h);break e}u=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,h=typeof f=="function"?f.call(d,u,h):f,h==null)break e;u=Kr({},u,h);break e;case 2:LA=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else d={eventTime:d,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(A=c=d,l=u):c=c.next=d,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(c===null&&(l=u),i.baseState=l,i.firstBaseUpdate=A,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Iu|=a,t.lanes=a,t.memoizedState=u}}function hF(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Ne(191,i));i.call(n)}}}var p0={},Vo=Tc(p0),Mg=Tc(p0),Tg=Tc(p0);function Au(t){if(t===p0)throw Error(Ne(174));return t}function Q2(t,e){switch(wr(Tg,e),wr(Mg,t),wr(Vo,p0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YM(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=YM(e,t)}Cr(Vo),wr(Vo,e)}function bf(){Cr(Vo),Cr(Mg),Cr(Tg)}function f6(t){Au(Tg.current);var e=Au(Vo.current),r=YM(e,t.type);e!==r&&(wr(Mg,t),wr(Vo,r))}function H2(t){Mg.current===t&&(Cr(Vo),Cr(Mg))}var jr=Tc(0);function y1(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qx=[];function j2(){for(var t=0;t<qx.length;t++)qx[t]._workInProgressVersionPrimary=null;qx.length=0}var dw=aA.ReactCurrentDispatcher,$x=aA.ReactCurrentBatchConfig,Su=0,Wr=null,Sn=null,Qn=null,w1=!1,Wm=!1,Cg=0,XZ=0;function si(){throw Error(Ne(321))}function z2(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ao(t[r],e[r]))return!1;return!0}function G2(t,e,r,n,i,s){if(Su=s,Wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,dw.current=t===null||t.memoizedState===null?$Z:eJ,t=r(n,i),Wm){s=0;do{if(Wm=!1,Cg=0,25<=s)throw Error(Ne(301));s+=1,Qn=Sn=null,e.updateQueue=null,dw.current=tJ,t=r(n,i)}while(Wm)}if(dw.current=b1,e=Sn!==null&&Sn.next!==null,Su=0,Qn=Sn=Wr=null,w1=!1,e)throw Error(Ne(300));return t}function V2(){var t=Cg!==0;return Cg=0,t}function Eo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?Wr.memoizedState=Qn=t:Qn=Qn.next=t,Qn}function wa(){if(Sn===null){var t=Wr.alternate;t=t!==null?t.memoizedState:null}else t=Sn.next;var e=Qn===null?Wr.memoizedState:Qn.next;if(e!==null)Qn=e,Sn=t;else{if(t===null)throw Error(Ne(310));Sn=t,t={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Qn===null?Wr.memoizedState=Qn=t:Qn=Qn.next=t}return Qn}function Sg(t,e){return typeof e=="function"?e(t):e}function eE(t){var e=wa(),r=e.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=t;var n=Sn,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,l=null,A=s;do{var c=A.lane;if((Su&c)===c)l!==null&&(l=l.next={lane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),n=A.hasEagerState?A.eagerState:t(n,A.action);else{var u={lane:c,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null};l===null?(o=l=u,a=n):l=l.next=u,Wr.lanes|=c,Iu|=c}A=A.next}while(A!==null&&A!==s);l===null?a=n:l.next=o,ao(n,e.memoizedState)||(Xi=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,Wr.lanes|=s,Iu|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function tE(t){var e=wa(),r=e.queue;if(r===null)throw Error(Ne(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);ao(s,e.memoizedState)||(Xi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function p6(){}function m6(t,e){var r=Wr,n=wa(),i=e(),s=!ao(n.memoizedState,i);if(s&&(n.memoizedState=i,Xi=!0),n=n.queue,W2(y6.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Qn!==null&&Qn.memoizedState.tag&1){if(r.flags|=2048,Ig(9,v6.bind(null,r,n,i,e),void 0,null),Wn===null)throw Error(Ne(349));Su&30||g6(r,e,i)}return i}function g6(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Wr.updateQueue,e===null?(e={lastEffect:null,stores:null},Wr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function v6(t,e,r,n){e.value=r,e.getSnapshot=n,w6(e)&&b6(t)}function y6(t,e,r){return r(function(){w6(e)&&b6(t)})}function w6(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ao(t,r)}catch{return!0}}function b6(t){var e=Zl(t,1);e!==null&&to(e,t,1,-1)}function dF(t){var e=Eo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sg,lastRenderedState:t},e.queue=t,t=t.dispatch=qZ.bind(null,Wr,t),[e.memoizedState,t]}function Ig(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Wr.updateQueue,e===null?(e={lastEffect:null,stores:null},Wr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function _6(){return wa().memoizedState}function fw(t,e,r,n){var i=Eo();Wr.flags|=t,i.memoizedState=Ig(1|e,r,void 0,n===void 0?null:n)}function Zb(t,e,r,n){var i=wa();n=n===void 0?null:n;var s=void 0;if(Sn!==null){var a=Sn.memoizedState;if(s=a.destroy,n!==null&&z2(n,a.deps)){i.memoizedState=Ig(e,r,s,n);return}}Wr.flags|=t,i.memoizedState=Ig(1|e,r,s,n)}function fF(t,e){return fw(8390656,8,t,e)}function W2(t,e){return Zb(2048,8,t,e)}function x6(t,e){return Zb(4,2,t,e)}function E6(t,e){return Zb(4,4,t,e)}function B6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function M6(t,e,r){return r=r!=null?r.concat([t]):null,Zb(4,4,B6.bind(null,e,t),r)}function K2(){}function T6(t,e){var r=wa();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&z2(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function C6(t,e){var r=wa();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&z2(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function S6(t,e,r){return Su&21?(ao(r,e)||(r=k5(),Wr.lanes|=r,Iu|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xi=!0),t.memoizedState=r)}function ZZ(t,e){var r=cr;cr=r!==0&&4>r?r:4,t(!0);var n=$x.transition;$x.transition={};try{t(!1),e()}finally{cr=r,$x.transition=n}}function I6(){return wa().memoizedState}function JZ(t,e,r){var n=ac(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},R6(t))U6(e,r);else if(r=h6(t,e,r,n),r!==null){var i=Pi();to(r,t,n,i),F6(r,e,n)}}function qZ(t,e,r){var n=ac(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(R6(t))U6(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,ao(o,a)){var l=e.interleaved;l===null?(i.next=i,D2(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=h6(t,e,i,n),r!==null&&(i=Pi(),to(r,t,n,i),F6(r,e,n))}}function R6(t){var e=t.alternate;return t===Wr||e!==null&&e===Wr}function U6(t,e){Wm=w1=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function F6(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,E2(t,r)}}var b1={readContext:ya,useCallback:si,useContext:si,useEffect:si,useImperativeHandle:si,useInsertionEffect:si,useLayoutEffect:si,useMemo:si,useReducer:si,useRef:si,useState:si,useDebugValue:si,useDeferredValue:si,useTransition:si,useMutableSource:si,useSyncExternalStore:si,useId:si,unstable_isNewReconciler:!1},$Z={readContext:ya,useCallback:function(t,e){return Eo().memoizedState=[t,e===void 0?null:e],t},useContext:ya,useEffect:fF,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,fw(4194308,4,B6.bind(null,e,t),r)},useLayoutEffect:function(t,e){return fw(4194308,4,t,e)},useInsertionEffect:function(t,e){return fw(4,2,t,e)},useMemo:function(t,e){var r=Eo();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Eo();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=JZ.bind(null,Wr,t),[n.memoizedState,t]},useRef:function(t){var e=Eo();return t={current:t},e.memoizedState=t},useState:dF,useDebugValue:K2,useDeferredValue:function(t){return Eo().memoizedState=t},useTransition:function(){var t=dF(!1),e=t[0];return t=ZZ.bind(null,t[1]),Eo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Wr,i=Eo();if(Lr){if(r===void 0)throw Error(Ne(407));r=r()}else{if(r=e(),Wn===null)throw Error(Ne(349));Su&30||g6(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,fF(y6.bind(null,n,s,t),[t]),n.flags|=2048,Ig(9,v6.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Eo(),e=Wn.identifierPrefix;if(Lr){var r=Nl,n=Dl;r=(n&~(1<<32-eo(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Cg++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=XZ++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eJ={readContext:ya,useCallback:T6,useContext:ya,useEffect:W2,useImperativeHandle:M6,useInsertionEffect:x6,useLayoutEffect:E6,useMemo:C6,useReducer:eE,useRef:_6,useState:function(){return eE(Sg)},useDebugValue:K2,useDeferredValue:function(t){var e=wa();return S6(e,Sn.memoizedState,t)},useTransition:function(){var t=eE(Sg)[0],e=wa().memoizedState;return[t,e]},useMutableSource:p6,useSyncExternalStore:m6,useId:I6,unstable_isNewReconciler:!1},tJ={readContext:ya,useCallback:T6,useContext:ya,useEffect:W2,useImperativeHandle:M6,useInsertionEffect:x6,useLayoutEffect:E6,useMemo:C6,useReducer:tE,useRef:_6,useState:function(){return tE(Sg)},useDebugValue:K2,useDeferredValue:function(t){var e=wa();return Sn===null?e.memoizedState=t:S6(e,Sn.memoizedState,t)},useTransition:function(){var t=tE(Sg)[0],e=wa().memoizedState;return[t,e]},useMutableSource:p6,useSyncExternalStore:m6,useId:I6,unstable_isNewReconciler:!1};function Ga(t,e){if(t&&t.defaultProps){e=Kr({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function pT(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Kr({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Jb={isMounted:function(t){return(t=t._reactInternals)?Wu(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Pi(),i=ac(t),s=jl(n,i);s.payload=e,r!=null&&(s.callback=r),e=ic(t,s,i),e!==null&&(to(e,t,i,n),hw(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Pi(),i=ac(t),s=jl(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=ic(t,s,i),e!==null&&(to(e,t,i,n),hw(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Pi(),n=ac(t),i=jl(r,n);i.tag=2,e!=null&&(i.callback=e),e=ic(t,i,n),e!==null&&(to(e,t,n,r),hw(e,t,n))}};function pF(t,e,r,n,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!_g(r,n)||!_g(i,s):!0}function k6(t,e,r){var n=!1,i=pc,s=e.contextType;return typeof s=="object"&&s!==null?s=ya(s):(i=qi(e)?Tu:bi.current,n=e.contextTypes,s=(n=n!=null)?vf(t,i):pc),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jb,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function mF(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Jb.enqueueReplaceState(e,e.state,null)}function mT(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},N2(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ya(s):(s=qi(e)?Tu:bi.current,i.context=vf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(pT(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jb.enqueueReplaceState(i,i.state,null),v1(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _f(t,e){try{var r="",n=e;do r+=SX(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function rE(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function gT(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rJ=typeof WeakMap=="function"?WeakMap:Map;function L6(t,e,r){r=jl(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){x1||(x1=!0,MT=n),gT(t,e)},r}function P6(t,e,r){r=jl(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){gT(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){gT(t,e),typeof n!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function gF(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rJ;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=mJ.bind(null,t,e,r),e.then(t,t))}function vF(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yF(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=jl(-1,1),e.tag=2,ic(r,e,1))),r.lanes|=1),t)}var nJ=aA.ReactCurrentOwner,Xi=!1;function Ii(t,e,r,n){e.child=t===null?u6(e,null,r,n):wf(e,t.child,r,n)}function wF(t,e,r,n,i){r=r.render;var s=e.ref;return Jd(e,i),n=G2(t,e,r,n,s,i),r=V2(),t!==null&&!Xi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jl(t,e,i)):(Lr&&r&&U2(e),e.flags|=1,Ii(t,e,n,i),e.child)}function bF(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!tI(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,O6(t,e,s,n,i)):(t=vw(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:_g,r(a,n)&&t.ref===e.ref)return Jl(t,e,i)}return e.flags|=1,t=oc(s,n),t.ref=e.ref,t.return=e,e.child=t}function O6(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(_g(s,n)&&t.ref===e.ref)if(Xi=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Xi=!0);else return e.lanes=t.lanes,Jl(t,e,i)}return vT(t,e,r,n,i)}function D6(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr(Id,ws),ws|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wr(Id,ws),ws|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,wr(Id,ws),ws|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,wr(Id,ws),ws|=n;return Ii(t,e,i,r),e.child}function N6(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function vT(t,e,r,n,i){var s=qi(r)?Tu:bi.current;return s=vf(e,s),Jd(e,i),r=G2(t,e,r,n,s,i),n=V2(),t!==null&&!Xi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Jl(t,e,i)):(Lr&&n&&U2(e),e.flags|=1,Ii(t,e,r,i),e.child)}function _F(t,e,r,n,i){if(qi(r)){var s=!0;d1(e)}else s=!1;if(Jd(e,i),e.stateNode===null)pw(t,e),k6(e,r,n),mT(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,A=r.contextType;typeof A=="object"&&A!==null?A=ya(A):(A=qi(r)?Tu:bi.current,A=vf(e,A));var c=r.getDerivedStateFromProps,u=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==A)&&mF(e,a,n,A),LA=!1;var h=e.memoizedState;a.state=h,v1(e,n,a,i),l=e.memoizedState,o!==n||h!==l||Ji.current||LA?(typeof c=="function"&&(pT(e,r,c,n),l=e.memoizedState),(o=LA||pF(e,r,o,n,h,l,A))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=A,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,d6(t,e),o=e.memoizedProps,A=e.type===e.elementType?o:Ga(e.type,o),a.props=A,u=e.pendingProps,h=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=ya(l):(l=qi(r)?Tu:bi.current,l=vf(e,l));var d=r.getDerivedStateFromProps;(c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||h!==l)&&mF(e,a,n,l),LA=!1,h=e.memoizedState,a.state=h,v1(e,n,a,i);var f=e.memoizedState;o!==u||h!==f||Ji.current||LA?(typeof d=="function"&&(pT(e,r,d,n),f=e.memoizedState),(A=LA||pF(e,r,A,n,h,f,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,f,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,f,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=f),a.props=n,a.state=f,a.context=l,n=A):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return yT(t,e,r,n,s,i)}function yT(t,e,r,n,i,s){N6(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&oF(e,r,!1),Jl(t,e,s);n=e.stateNode,nJ.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=wf(e,t.child,null,s),e.child=wf(e,null,o,s)):Ii(t,e,o,s),e.memoizedState=n.state,i&&oF(e,r,!0),e.child}function Q6(t){var e=t.stateNode;e.pendingContext?aF(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aF(t,e.context,!1),Q2(t,e.containerInfo)}function xF(t,e,r,n,i){return yf(),k2(i),e.flags|=256,Ii(t,e,r,n),e.child}var wT={dehydrated:null,treeContext:null,retryLane:0};function bT(t){return{baseLanes:t,cachePool:null,transitions:null}}function H6(t,e,r){var n=e.pendingProps,i=jr.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),wr(jr,i&1),t===null)return dT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=e_(a,n,0,null),t=gu(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=bT(r),e.memoizedState=wT,t):Y2(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return iJ(t,e,a,n,o,i,r);if(s){s=n.fallback,a=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=oc(i,l),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=oc(o,s):(s=gu(s,a,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?bT(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~r,e.memoizedState=wT,n}return s=t.child,t=s.sibling,n=oc(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Y2(t,e){return e=e_({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ov(t,e,r,n){return n!==null&&k2(n),wf(e,t.child,null,r),t=Y2(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iJ(t,e,r,n,i,s,a){if(r)return e.flags&256?(e.flags&=-257,n=rE(Error(Ne(422))),ov(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=e_({mode:"visible",children:n.children},i,0,null),s=gu(s,i,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&wf(e,t.child,null,a),e.child.memoizedState=bT(a),e.memoizedState=wT,s);if(!(e.mode&1))return ov(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Ne(419)),n=rE(s,n,void 0),ov(t,e,a,n)}if(o=(a&t.childLanes)!==0,Xi||o){if(n=Wn,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zl(t,i),to(n,t,i,-1))}return eI(),n=rE(Error(Ne(421))),ov(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=gJ.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ts=nc(i.nextSibling),Fs=e,Lr=!0,Ya=null,t!==null&&(na[ia++]=Dl,na[ia++]=Nl,na[ia++]=Cu,Dl=t.id,Nl=t.overflow,Cu=e),e=Y2(e,n.children),e.flags|=4096,e)}function EF(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),fT(t.return,e,r)}function nE(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function j6(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ii(t,e,n.children,r),n=jr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&EF(t,r,e);else if(t.tag===19)EF(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(wr(jr,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&y1(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),nE(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&y1(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}nE(e,!0,r,null,s);break;case"together":nE(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pw(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Jl(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Iu|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ne(153));if(e.child!==null){for(t=e.child,r=oc(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=oc(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function sJ(t,e,r){switch(e.tag){case 3:Q6(e),yf();break;case 5:f6(e);break;case 1:qi(e.type)&&d1(e);break;case 4:Q2(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;wr(m1,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(wr(jr,jr.current&1),e.flags|=128,null):r&e.child.childLanes?H6(t,e,r):(wr(jr,jr.current&1),t=Jl(t,e,r),t!==null?t.sibling:null);wr(jr,jr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return j6(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wr(jr,jr.current),n)break;return null;case 22:case 23:return e.lanes=0,D6(t,e,r)}return Jl(t,e,r)}var z6,_T,G6,V6;z6=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_T=function(){};G6=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Au(Vo.current);var s=null;switch(r){case"input":i=GM(t,i),n=GM(t,n),s=[];break;case"select":i=Kr({},i,{value:void 0}),n=Kr({},n,{value:void 0}),s=[];break;case"textarea":i=KM(t,i),n=KM(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=u1)}XM(r,n);var a;r=null;for(A in i)if(!n.hasOwnProperty(A)&&i.hasOwnProperty(A)&&i[A]!=null)if(A==="style"){var o=i[A];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else A!=="dangerouslySetInnerHTML"&&A!=="children"&&A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(pg.hasOwnProperty(A)?s||(s=[]):(s=s||[]).push(A,null));for(A in n){var l=n[A];if(o=i!=null?i[A]:void 0,n.hasOwnProperty(A)&&l!==o&&(l!=null||o!=null))if(A==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(A,r)),r=l;else A==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(A,l)):A==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(A,""+l):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&(pg.hasOwnProperty(A)?(l!=null&&A==="onScroll"&&xr("scroll",t),s||o===l||(s=[])):(s=s||[]).push(A,l))}r&&(s=s||[]).push("style",r);var A=s;(e.updateQueue=A)&&(e.flags|=4)}};V6=function(t,e,r,n){r!==n&&(e.flags|=4)};function Mp(t,e){if(!Lr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ai(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function aJ(t,e,r){var n=e.pendingProps;switch(F2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(e),null;case 1:return qi(e.type)&&h1(),ai(e),null;case 3:return n=e.stateNode,bf(),Cr(Ji),Cr(bi),j2(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(sv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ya!==null&&(ST(Ya),Ya=null))),_T(t,e),ai(e),null;case 5:H2(e);var i=Au(Tg.current);if(r=e.type,t!==null&&e.stateNode!=null)G6(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ne(166));return ai(e),null}if(t=Au(Vo.current),sv(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ro]=e,n[Bg]=s,t=(e.mode&1)!==0,r){case"dialog":xr("cancel",n),xr("close",n);break;case"iframe":case"object":case"embed":xr("load",n);break;case"video":case"audio":for(i=0;i<ym.length;i++)xr(ym[i],n);break;case"source":xr("error",n);break;case"img":case"image":case"link":xr("error",n),xr("load",n);break;case"details":xr("toggle",n);break;case"input":F3(n,s),xr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},xr("invalid",n);break;case"textarea":L3(n,s),xr("invalid",n)}XM(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&iv(n.textContent,o,t),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&iv(n.textContent,o,t),i=["children",""+o]):pg.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&xr("scroll",n)}switch(r){case"input":Z0(n),k3(n,s,!0);break;case"textarea":Z0(n),P3(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=u1)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y5(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Ro]=e,t[Bg]=n,z6(t,e,!1,!1),e.stateNode=t;e:{switch(a=ZM(r,n),r){case"dialog":xr("cancel",t),xr("close",t),i=n;break;case"iframe":case"object":case"embed":xr("load",t),i=n;break;case"video":case"audio":for(i=0;i<ym.length;i++)xr(ym[i],t);i=n;break;case"source":xr("error",t),i=n;break;case"img":case"image":case"link":xr("error",t),xr("load",t),i=n;break;case"details":xr("toggle",t),i=n;break;case"input":F3(t,n),i=GM(t,n),xr("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Kr({},n,{value:void 0}),xr("invalid",t);break;case"textarea":L3(t,n),i=KM(t,n),xr("invalid",t);break;default:i=n}XM(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?_5(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&w5(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&mg(t,l):typeof l=="number"&&mg(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pg.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xr("scroll",t):l!=null&&v2(t,s,l,a))}switch(r){case"input":Z0(t),k3(t,n,!1);break;case"textarea":Z0(t),P3(t);break;case"option":n.value!=null&&t.setAttribute("value",""+fc(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Kd(t,!!n.multiple,s,!1):n.defaultValue!=null&&Kd(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=u1)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ai(e),null;case 6:if(t&&e.stateNode!=null)V6(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ne(166));if(r=Au(Tg.current),Au(Vo.current),sv(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ro]=e,(s=n.nodeValue!==r)&&(t=Fs,t!==null))switch(t.tag){case 3:iv(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&iv(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ro]=e,e.stateNode=n}return ai(e),null;case 13:if(Cr(jr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lr&&Ts!==null&&e.mode&1&&!(e.flags&128))A6(),yf(),e.flags|=98560,s=!1;else if(s=sv(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ne(317));s[Ro]=e}else yf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ai(e),s=!1}else Ya!==null&&(ST(Ya),Ya=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||jr.current&1?Fn===0&&(Fn=3):eI())),e.updateQueue!==null&&(e.flags|=4),ai(e),null);case 4:return bf(),_T(t,e),t===null&&xg(e.stateNode.containerInfo),ai(e),null;case 10:return O2(e.type._context),ai(e),null;case 17:return qi(e.type)&&h1(),ai(e),null;case 19:if(Cr(jr),s=e.memoizedState,s===null)return ai(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Mp(s,!1);else{if(Fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=y1(t),a!==null){for(e.flags|=128,Mp(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return wr(jr,jr.current&1|2),e.child}t=t.sibling}s.tail!==null&&hn()>xf&&(e.flags|=128,n=!0,Mp(s,!1),e.lanes=4194304)}else{if(!n)if(t=y1(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Mp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Lr)return ai(e),null}else 2*hn()-s.renderingStartTime>xf&&r!==1073741824&&(e.flags|=128,n=!0,Mp(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(r=s.last,r!==null?r.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=hn(),e.sibling=null,r=jr.current,wr(jr,n?r&1|2:r&1),e):(ai(e),null);case 22:case 23:return $2(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ws&1073741824&&(ai(e),e.subtreeFlags&6&&(e.flags|=8192)):ai(e),null;case 24:return null;case 25:return null}throw Error(Ne(156,e.tag))}function oJ(t,e){switch(F2(e),e.tag){case 1:return qi(e.type)&&h1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bf(),Cr(Ji),Cr(bi),j2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return H2(e),null;case 13:if(Cr(jr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ne(340));yf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Cr(jr),null;case 4:return bf(),null;case 10:return O2(e.type._context),null;case 22:case 23:return $2(),null;case 24:return null;default:return null}}var lv=!1,di=!1,lJ=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Sd(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){qr(t,e,n)}else r.current=null}function W6(t,e,r){try{r()}catch(n){qr(t,e,n)}}var BF=!1;function AJ(t,e){if(aT=l1,t=Z5(),R2(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,A=0,c=0,u=t,h=null;t:for(;;){for(var d;u!==r||i!==0&&u.nodeType!==3||(o=a+i),u!==s||n!==0&&u.nodeType!==3||(l=a+n),u.nodeType===3&&(a+=u.nodeValue.length),(d=u.firstChild)!==null;)h=u,u=d;for(;;){if(u===t)break t;if(h===r&&++A===i&&(o=a),h===s&&++c===n&&(l=a),(d=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=d}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(oT={focusedElem:t,selectionRange:r},l1=!1,Je=e;Je!==null;)if(e=Je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Je=t;else for(;Je!==null;){e=Je;try{var f=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,p=e.stateNode,v=p.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ga(e.type,m),g);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(_){qr(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}return f=BF,BF=!1,f}function Km(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&W6(e,r,s)}i=i.next}while(i!==n)}}function qb(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function xT(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function K6(t){var e=t.alternate;e!==null&&(t.alternate=null,K6(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ro],delete e[Bg],delete e[cT],delete e[VZ],delete e[WZ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Y6(t){return t.tag===5||t.tag===3||t.tag===4}function MF(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Y6(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ET(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=u1));else if(n!==4&&(t=t.child,t!==null))for(ET(t,e,r),t=t.sibling;t!==null;)ET(t,e,r),t=t.sibling}function BT(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(BT(t,e,r),t=t.sibling;t!==null;)BT(t,e,r),t=t.sibling}var Jn=null,Wa=!1;function mA(t,e,r){for(r=r.child;r!==null;)X6(t,e,r),r=r.sibling}function X6(t,e,r){if(Go&&typeof Go.onCommitFiberUnmount=="function")try{Go.onCommitFiberUnmount(Gb,r)}catch{}switch(r.tag){case 5:di||Sd(r,e);case 6:var n=Jn,i=Wa;Jn=null,mA(t,e,r),Jn=n,Wa=i,Jn!==null&&(Wa?(t=Jn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jn.removeChild(r.stateNode));break;case 18:Jn!==null&&(Wa?(t=Jn,r=r.stateNode,t.nodeType===8?Zx(t.parentNode,r):t.nodeType===1&&Zx(t,r),wg(t)):Zx(Jn,r.stateNode));break;case 4:n=Jn,i=Wa,Jn=r.stateNode.containerInfo,Wa=!0,mA(t,e,r),Jn=n,Wa=i;break;case 0:case 11:case 14:case 15:if(!di&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&W6(r,e,a),i=i.next}while(i!==n)}mA(t,e,r);break;case 1:if(!di&&(Sd(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){qr(r,e,o)}mA(t,e,r);break;case 21:mA(t,e,r);break;case 22:r.mode&1?(di=(n=di)||r.memoizedState!==null,mA(t,e,r),di=n):mA(t,e,r);break;default:mA(t,e,r)}}function TF(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lJ),e.forEach(function(n){var i=vJ.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ua(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Jn=o.stateNode,Wa=!1;break e;case 3:Jn=o.stateNode.containerInfo,Wa=!0;break e;case 4:Jn=o.stateNode.containerInfo,Wa=!0;break e}o=o.return}if(Jn===null)throw Error(Ne(160));X6(s,a,i),Jn=null,Wa=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(A){qr(i,e,A)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Z6(e,t),e=e.sibling}function Z6(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ua(e,t),po(t),n&4){try{Km(3,t,t.return),qb(3,t)}catch(m){qr(t,t.return,m)}try{Km(5,t,t.return)}catch(m){qr(t,t.return,m)}}break;case 1:Ua(e,t),po(t),n&512&&r!==null&&Sd(r,r.return);break;case 5:if(Ua(e,t),po(t),n&512&&r!==null&&Sd(r,r.return),t.flags&32){var i=t.stateNode;try{mg(i,"")}catch(m){qr(t,t.return,m)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=r!==null?r.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&g5(i,s),ZM(o,a);var A=ZM(o,s);for(a=0;a<l.length;a+=2){var c=l[a],u=l[a+1];c==="style"?_5(i,u):c==="dangerouslySetInnerHTML"?w5(i,u):c==="children"?mg(i,u):v2(i,c,u,A)}switch(o){case"input":VM(i,s);break;case"textarea":v5(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?Kd(i,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?Kd(i,!!s.multiple,s.defaultValue,!0):Kd(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bg]=s}catch(m){qr(t,t.return,m)}}break;case 6:if(Ua(e,t),po(t),n&4){if(t.stateNode===null)throw Error(Ne(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){qr(t,t.return,m)}}break;case 3:if(Ua(e,t),po(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{wg(e.containerInfo)}catch(m){qr(t,t.return,m)}break;case 4:Ua(e,t),po(t);break;case 13:Ua(e,t),po(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(J2=hn())),n&4&&TF(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(di=(A=di)||c,Ua(e,t),di=A):Ua(e,t),po(t),n&8192){if(A=t.memoizedState!==null,(t.stateNode.isHidden=A)&&!c&&t.mode&1)for(Je=t,c=t.child;c!==null;){for(u=Je=c;Je!==null;){switch(h=Je,d=h.child,h.tag){case 0:case 11:case 14:case 15:Km(4,h,h.return);break;case 1:Sd(h,h.return);var f=h.stateNode;if(typeof f.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,f.props=e.memoizedProps,f.state=e.memoizedState,f.componentWillUnmount()}catch(m){qr(n,r,m)}}break;case 5:Sd(h,h.return);break;case 22:if(h.memoizedState!==null){SF(u);continue}}d!==null?(d.return=h,Je=d):SF(u)}c=c.sibling}e:for(c=null,u=t;;){if(u.tag===5){if(c===null){c=u;try{i=u.stateNode,A?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=u.stateNode,l=u.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=b5("display",a))}catch(m){qr(t,t.return,m)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=A?"":u.memoizedProps}catch(m){qr(t,t.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Ua(e,t),po(t),n&4&&TF(t);break;case 21:break;default:Ua(e,t),po(t)}}function po(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Y6(r)){var n=r;break e}r=r.return}throw Error(Ne(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(mg(i,""),n.flags&=-33);var s=MF(t);BT(t,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=MF(t);ET(t,o,a);break;default:throw Error(Ne(161))}}catch(l){qr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cJ(t,e,r){Je=t,J6(t)}function J6(t,e,r){for(var n=(t.mode&1)!==0;Je!==null;){var i=Je,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||lv;if(!a){var o=i.alternate,l=o!==null&&o.memoizedState!==null||di;o=lv;var A=di;if(lv=a,(di=l)&&!A)for(Je=i;Je!==null;)a=Je,l=a.child,a.tag===22&&a.memoizedState!==null?IF(i):l!==null?(l.return=a,Je=l):IF(i);for(;s!==null;)Je=s,J6(s),s=s.sibling;Je=i,lv=o,di=A}CF(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Je=s):CF(t)}}function CF(t){for(;Je!==null;){var e=Je;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:di||qb(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!di)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Ga(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hF(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}hF(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var A=e.alternate;if(A!==null){var c=A.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&wg(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}di||e.flags&512&&xT(e)}catch(h){qr(e,e.return,h)}}if(e===t){Je=null;break}if(r=e.sibling,r!==null){r.return=e.return,Je=r;break}Je=e.return}}function SF(t){for(;Je!==null;){var e=Je;if(e===t){Je=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Je=r;break}Je=e.return}}function IF(t){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{qb(4,e)}catch(l){qr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){qr(e,i,l)}}var s=e.return;try{xT(e)}catch(l){qr(e,s,l)}break;case 5:var a=e.return;try{xT(e)}catch(l){qr(e,a,l)}}}catch(l){qr(e,e.return,l)}if(e===t){Je=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Je=o;break}Je=e.return}}var uJ=Math.ceil,_1=aA.ReactCurrentDispatcher,X2=aA.ReactCurrentOwner,ga=aA.ReactCurrentBatchConfig,Wt=0,Wn=null,xn=null,ei=0,ws=0,Id=Tc(0),Fn=0,Rg=null,Iu=0,$b=0,Z2=0,Ym=null,Wi=null,J2=0,xf=1/0,Cl=null,x1=!1,MT=null,sc=null,Av=!1,GA=null,E1=0,Xm=0,TT=null,mw=-1,gw=0;function Pi(){return Wt&6?hn():mw!==-1?mw:mw=hn()}function ac(t){return t.mode&1?Wt&2&&ei!==0?ei&-ei:YZ.transition!==null?(gw===0&&(gw=k5()),gw):(t=cr,t!==0||(t=window.event,t=t===void 0?16:H5(t.type)),t):1}function to(t,e,r,n){if(50<Xm)throw Xm=0,TT=null,Error(Ne(185));h0(t,r,n),(!(Wt&2)||t!==Wn)&&(t===Wn&&(!(Wt&2)&&($b|=r),Fn===4&&HA(t,ei)),$i(t,n),r===1&&Wt===0&&!(e.mode&1)&&(xf=hn()+500,Xb&&Cc()))}function $i(t,e){var r=t.callbackNode;YX(t,e);var n=o1(t,t===Wn?ei:0);if(n===0)r!==null&&N3(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&N3(r),e===1)t.tag===0?KZ(RF.bind(null,t)):a6(RF.bind(null,t)),zZ(function(){!(Wt&6)&&Cc()}),r=null;else{switch(L5(n)){case 1:r=x2;break;case 4:r=U5;break;case 16:r=a1;break;case 536870912:r=F5;break;default:r=a1}r=sH(r,q6.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function q6(t,e){if(mw=-1,gw=0,Wt&6)throw Error(Ne(327));var r=t.callbackNode;if(qd()&&t.callbackNode!==r)return null;var n=o1(t,t===Wn?ei:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=B1(t,n);else{e=n;var i=Wt;Wt|=2;var s=eH();(Wn!==t||ei!==e)&&(Cl=null,xf=hn()+500,mu(t,e));do try{fJ();break}catch(o){$6(t,o)}while(1);P2(),_1.current=s,Wt=i,xn!==null?e=0:(Wn=null,ei=0,e=Fn)}if(e!==0){if(e===2&&(i=tT(t),i!==0&&(n=i,e=CT(t,i))),e===1)throw r=Rg,mu(t,0),HA(t,n),$i(t,hn()),r;if(e===6)HA(t,n);else{if(i=t.current.alternate,!(n&30)&&!hJ(i)&&(e=B1(t,n),e===2&&(s=tT(t),s!==0&&(n=s,e=CT(t,s))),e===1))throw r=Rg,mu(t,0),HA(t,n),$i(t,hn()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Ne(345));case 2:$c(t,Wi,Cl);break;case 3:if(HA(t,n),(n&130023424)===n&&(e=J2+500-hn(),10<e)){if(o1(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Pi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=AT($c.bind(null,t,Wi,Cl),e);break}$c(t,Wi,Cl);break;case 4:if(HA(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-eo(n);s=1<<a,a=e[a],a>i&&(i=a),n&=~s}if(n=i,n=hn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*uJ(n/1960))-n,10<n){t.timeoutHandle=AT($c.bind(null,t,Wi,Cl),n);break}$c(t,Wi,Cl);break;case 5:$c(t,Wi,Cl);break;default:throw Error(Ne(329))}}}return $i(t,hn()),t.callbackNode===r?q6.bind(null,t):null}function CT(t,e){var r=Ym;return t.current.memoizedState.isDehydrated&&(mu(t,e).flags|=256),t=B1(t,e),t!==2&&(e=Wi,Wi=r,e!==null&&ST(e)),t}function ST(t){Wi===null?Wi=t:Wi.push.apply(Wi,t)}function hJ(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!ao(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function HA(t,e){for(e&=~Z2,e&=~$b,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-eo(e),n=1<<r;t[r]=-1,e&=~n}}function RF(t){if(Wt&6)throw Error(Ne(327));qd();var e=o1(t,0);if(!(e&1))return $i(t,hn()),null;var r=B1(t,e);if(t.tag!==0&&r===2){var n=tT(t);n!==0&&(e=n,r=CT(t,n))}if(r===1)throw r=Rg,mu(t,0),HA(t,e),$i(t,hn()),r;if(r===6)throw Error(Ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$c(t,Wi,Cl),$i(t,hn()),null}function q2(t,e){var r=Wt;Wt|=1;try{return t(e)}finally{Wt=r,Wt===0&&(xf=hn()+500,Xb&&Cc())}}function Ru(t){GA!==null&&GA.tag===0&&!(Wt&6)&&qd();var e=Wt;Wt|=1;var r=ga.transition,n=cr;try{if(ga.transition=null,cr=1,t)return t()}finally{cr=n,ga.transition=r,Wt=e,!(Wt&6)&&Cc()}}function $2(){ws=Id.current,Cr(Id)}function mu(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,jZ(r)),xn!==null)for(r=xn.return;r!==null;){var n=r;switch(F2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&h1();break;case 3:bf(),Cr(Ji),Cr(bi),j2();break;case 5:H2(n);break;case 4:bf();break;case 13:Cr(jr);break;case 19:Cr(jr);break;case 10:O2(n.type._context);break;case 22:case 23:$2()}r=r.return}if(Wn=t,xn=t=oc(t.current,null),ei=ws=e,Fn=0,Rg=null,Z2=$b=Iu=0,Wi=Ym=null,lu!==null){for(e=0;e<lu.length;e++)if(r=lu[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}lu=null}return t}function $6(t,e){do{var r=xn;try{if(P2(),dw.current=b1,w1){for(var n=Wr.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}w1=!1}if(Su=0,Qn=Sn=Wr=null,Wm=!1,Cg=0,X2.current=null,r===null||r.return===null){Fn=1,Rg=e,xn=null;break}e:{var s=t,a=r.return,o=r,l=e;if(e=ei,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var A=l,c=o,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=vF(a);if(d!==null){d.flags&=-257,yF(d,a,o,s,e),d.mode&1&&gF(s,A,e),e=d,l=A;var f=e.updateQueue;if(f===null){var m=new Set;m.add(l),e.updateQueue=m}else f.add(l);break e}else{if(!(e&1)){gF(s,A,e),eI();break e}l=Error(Ne(426))}}else if(Lr&&o.mode&1){var g=vF(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),yF(g,a,o,s,e),k2(_f(l,o));break e}}s=l=_f(l,o),Fn!==4&&(Fn=2),Ym===null?Ym=[s]:Ym.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=L6(s,l,e);uF(s,p);break e;case 1:o=l;var v=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(sc===null||!sc.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=P6(s,o,e);uF(s,_);break e}}s=s.return}while(s!==null)}rH(r)}catch(E){e=E,xn===r&&r!==null&&(xn=r=r.return);continue}break}while(1)}function eH(){var t=_1.current;return _1.current=b1,t===null?b1:t}function eI(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Wn===null||!(Iu&268435455)&&!($b&268435455)||HA(Wn,ei)}function B1(t,e){var r=Wt;Wt|=2;var n=eH();(Wn!==t||ei!==e)&&(Cl=null,mu(t,e));do try{dJ();break}catch(i){$6(t,i)}while(1);if(P2(),Wt=r,_1.current=n,xn!==null)throw Error(Ne(261));return Wn=null,ei=0,Fn}function dJ(){for(;xn!==null;)tH(xn)}function fJ(){for(;xn!==null&&!NX();)tH(xn)}function tH(t){var e=iH(t.alternate,t,ws);t.memoizedProps=t.pendingProps,e===null?rH(t):xn=e,X2.current=null}function rH(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=oJ(r,e),r!==null){r.flags&=32767,xn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fn=6,xn=null;return}}else if(r=aJ(r,e,ws),r!==null){xn=r;return}if(e=e.sibling,e!==null){xn=e;return}xn=e=t}while(e!==null);Fn===0&&(Fn=5)}function $c(t,e,r){var n=cr,i=ga.transition;try{ga.transition=null,cr=1,pJ(t,e,r,n)}finally{ga.transition=i,cr=n}return null}function pJ(t,e,r,n){do qd();while(GA!==null);if(Wt&6)throw Error(Ne(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Ne(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(XX(t,s),t===Wn&&(xn=Wn=null,ei=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Av||(Av=!0,sH(a1,function(){return qd(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=ga.transition,ga.transition=null;var a=cr;cr=1;var o=Wt;Wt|=4,X2.current=null,AJ(t,r),Z6(r,t),LZ(oT),l1=!!aT,oT=aT=null,t.current=r,cJ(r),QX(),Wt=o,cr=a,ga.transition=s}else t.current=r;if(Av&&(Av=!1,GA=t,E1=i),s=t.pendingLanes,s===0&&(sc=null),zX(r.stateNode),$i(t,hn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(x1)throw x1=!1,t=MT,MT=null,t;return E1&1&&t.tag!==0&&qd(),s=t.pendingLanes,s&1?t===TT?Xm++:(Xm=0,TT=t):Xm=0,Cc(),null}function qd(){if(GA!==null){var t=L5(E1),e=ga.transition,r=cr;try{if(ga.transition=null,cr=16>t?16:t,GA===null)var n=!1;else{if(t=GA,GA=null,E1=0,Wt&6)throw Error(Ne(331));var i=Wt;for(Wt|=4,Je=t.current;Je!==null;){var s=Je,a=s.child;if(Je.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var A=o[l];for(Je=A;Je!==null;){var c=Je;switch(c.tag){case 0:case 11:case 15:Km(8,c,s)}var u=c.child;if(u!==null)u.return=c,Je=u;else for(;Je!==null;){c=Je;var h=c.sibling,d=c.return;if(K6(c),c===A){Je=null;break}if(h!==null){h.return=d,Je=h;break}Je=d}}}var f=s.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Je=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Je=a;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Km(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Je=p;break e}Je=s.return}}var v=t.current;for(Je=v;Je!==null;){a=Je;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Je=y;else e:for(a=v;Je!==null;){if(o=Je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:qb(9,o)}}catch(E){qr(o,o.return,E)}if(o===a){Je=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,Je=_;break e}Je=o.return}}if(Wt=i,Cc(),Go&&typeof Go.onPostCommitFiberRoot=="function")try{Go.onPostCommitFiberRoot(Gb,t)}catch{}n=!0}return n}finally{cr=r,ga.transition=e}}return!1}function UF(t,e,r){e=_f(r,e),e=L6(t,e,1),t=ic(t,e,1),e=Pi(),t!==null&&(h0(t,1,e),$i(t,e))}function qr(t,e,r){if(t.tag===3)UF(t,t,r);else for(;e!==null;){if(e.tag===3){UF(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(sc===null||!sc.has(n))){t=_f(r,t),t=P6(e,t,1),e=ic(e,t,1),t=Pi(),e!==null&&(h0(e,1,t),$i(e,t));break}}e=e.return}}function mJ(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Pi(),t.pingedLanes|=t.suspendedLanes&r,Wn===t&&(ei&r)===r&&(Fn===4||Fn===3&&(ei&130023424)===ei&&500>hn()-J2?mu(t,0):Z2|=r),$i(t,e)}function nH(t,e){e===0&&(t.mode&1?(e=$0,$0<<=1,!($0&130023424)&&($0=4194304)):e=1);var r=Pi();t=Zl(t,e),t!==null&&(h0(t,e,r),$i(t,r))}function gJ(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),nH(t,r)}function vJ(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Ne(314))}n!==null&&n.delete(e),nH(t,r)}var iH;iH=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ji.current)Xi=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Xi=!1,sJ(t,e,r);Xi=!!(t.flags&131072)}else Xi=!1,Lr&&e.flags&1048576&&o6(e,p1,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;pw(t,e),t=e.pendingProps;var i=vf(e,bi.current);Jd(e,r),i=G2(null,e,n,t,i,r);var s=V2();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qi(n)?(s=!0,d1(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,N2(e),i.updater=Jb,e.stateNode=i,i._reactInternals=e,mT(e,n,t,r),e=yT(null,e,n,!0,s,r)):(e.tag=0,Lr&&s&&U2(e),Ii(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(pw(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=wJ(n),t=Ga(n,t),i){case 0:e=vT(null,e,n,t,r);break e;case 1:e=_F(null,e,n,t,r);break e;case 11:e=wF(null,e,n,t,r);break e;case 14:e=bF(null,e,n,Ga(n.type,t),r);break e}throw Error(Ne(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ga(n,i),vT(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ga(n,i),_F(t,e,n,i,r);case 3:e:{if(Q6(e),t===null)throw Error(Ne(387));n=e.pendingProps,s=e.memoizedState,i=s.element,d6(t,e),v1(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_f(Error(Ne(423)),e),e=xF(t,e,n,r,i);break e}else if(n!==i){i=_f(Error(Ne(424)),e),e=xF(t,e,n,r,i);break e}else for(Ts=nc(e.stateNode.containerInfo.firstChild),Fs=e,Lr=!0,Ya=null,r=u6(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yf(),n===i){e=Jl(t,e,r);break e}Ii(t,e,n,r)}e=e.child}return e;case 5:return f6(e),t===null&&dT(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,lT(n,i)?a=null:s!==null&&lT(n,s)&&(e.flags|=32),N6(t,e),Ii(t,e,a,r),e.child;case 6:return t===null&&dT(e),null;case 13:return H6(t,e,r);case 4:return Q2(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=wf(e,null,n,r):Ii(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ga(n,i),wF(t,e,n,i,r);case 7:return Ii(t,e,e.pendingProps,r),e.child;case 8:return Ii(t,e,e.pendingProps.children,r),e.child;case 12:return Ii(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,wr(m1,n._currentValue),n._currentValue=a,s!==null)if(ao(s.value,a)){if(s.children===i.children&&!Ji.current){e=Jl(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=jl(-1,r&-r),l.tag=2;var A=s.updateQueue;if(A!==null){A=A.shared;var c=A.pending;c===null?l.next=l:(l.next=c.next,c.next=l),A.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),fT(s.return,r,e),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ne(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),fT(a,r,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ii(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Jd(e,r),i=ya(i),n=n(i),e.flags|=1,Ii(t,e,n,r),e.child;case 14:return n=e.type,i=Ga(n,e.pendingProps),i=Ga(n.type,i),bF(t,e,n,i,r);case 15:return O6(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ga(n,i),pw(t,e),e.tag=1,qi(n)?(t=!0,d1(e)):t=!1,Jd(e,r),k6(e,n,i),mT(e,n,i,r),yT(null,e,n,!0,t,r);case 19:return j6(t,e,r);case 22:return D6(t,e,r)}throw Error(Ne(156,e.tag))};function sH(t,e){return R5(t,e)}function yJ(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(t,e,r,n){return new yJ(t,e,r,n)}function tI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wJ(t){if(typeof t=="function")return tI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===w2)return 11;if(t===b2)return 14}return 2}function oc(t,e){var r=t.alternate;return r===null?(r=la(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function vw(t,e,r,n,i,s){var a=2;if(n=t,typeof t=="function")tI(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case wd:return gu(r.children,i,s,e);case y2:a=8,i|=8;break;case QM:return t=la(12,r,e,i|2),t.elementType=QM,t.lanes=s,t;case HM:return t=la(13,r,e,i),t.elementType=HM,t.lanes=s,t;case jM:return t=la(19,r,e,i),t.elementType=jM,t.lanes=s,t;case f5:return e_(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case h5:a=10;break e;case d5:a=9;break e;case w2:a=11;break e;case b2:a=14;break e;case kA:a=16,n=null;break e}throw Error(Ne(130,t==null?t:typeof t,""))}return e=la(a,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function gu(t,e,r,n){return t=la(7,t,n,e),t.lanes=r,t}function e_(t,e,r,n){return t=la(22,t,n,e),t.elementType=f5,t.lanes=r,t.stateNode={isHidden:!1},t}function iE(t,e,r){return t=la(6,t,null,e),t.lanes=r,t}function sE(t,e,r){return e=la(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bJ(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nx(0),this.expirationTimes=Nx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nx(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rI(t,e,r,n,i,s,a,o,l){return t=new bJ(t,e,r,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=la(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},N2(s),t}function _J(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yd,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function aH(t){if(!t)return pc;t=t._reactInternals;e:{if(Wu(t)!==t||t.tag!==1)throw Error(Ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ne(171))}if(t.tag===1){var r=t.type;if(qi(r))return s6(t,r,e)}return e}function oH(t,e,r,n,i,s,a,o,l){return t=rI(r,n,!0,t,i,s,a,o,l),t.context=aH(null),r=t.current,n=Pi(),i=ac(r),s=jl(n,i),s.callback=e??null,ic(r,s,i),t.current.lanes=i,h0(t,i,n),$i(t,n),t}function t_(t,e,r,n){var i=e.current,s=Pi(),a=ac(i);return r=aH(r),e.context===null?e.context=r:e.pendingContext=r,e=jl(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ic(i,e,a),t!==null&&(to(t,i,a,s),hw(t,i,a)),a}function M1(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FF(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function nI(t,e){FF(t,e),(t=t.alternate)&&FF(t,e)}function xJ(){return null}var lH=typeof reportError=="function"?reportError:function(t){console.error(t)};function iI(t){this._internalRoot=t}r_.prototype.render=iI.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ne(409));t_(t,e,null,null)};r_.prototype.unmount=iI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ru(function(){t_(null,t,null,null)}),e[Xl]=null}};function r_(t){this._internalRoot=t}r_.prototype.unstable_scheduleHydration=function(t){if(t){var e=D5();t={blockedOn:null,target:t,priority:e};for(var r=0;r<QA.length&&e!==0&&e<QA[r].priority;r++);QA.splice(r,0,t),r===0&&Q5(t)}};function sI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function n_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kF(){}function EJ(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var A=M1(a);s.call(A)}}var a=oH(e,n,t,0,null,!1,!1,"",kF);return t._reactRootContainer=a,t[Xl]=a.current,xg(t.nodeType===8?t.parentNode:t),Ru(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var A=M1(l);o.call(A)}}var l=rI(t,0,!1,null,null,!1,!1,"",kF);return t._reactRootContainer=l,t[Xl]=l.current,xg(t.nodeType===8?t.parentNode:t),Ru(function(){t_(e,l,r,n)}),l}function i_(t,e,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var l=M1(a);o.call(l)}}t_(e,a,t,i)}else a=EJ(r,e,t,i,n);return M1(a)}P5=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=vm(e.pendingLanes);r!==0&&(E2(e,r|1),$i(e,hn()),!(Wt&6)&&(xf=hn()+500,Cc()))}break;case 13:Ru(function(){var n=Zl(t,1);if(n!==null){var i=Pi();to(n,t,1,i)}}),nI(t,1)}};B2=function(t){if(t.tag===13){var e=Zl(t,134217728);if(e!==null){var r=Pi();to(e,t,134217728,r)}nI(t,134217728)}};O5=function(t){if(t.tag===13){var e=ac(t),r=Zl(t,e);if(r!==null){var n=Pi();to(r,t,e,n)}nI(t,e)}};D5=function(){return cr};N5=function(t,e){var r=cr;try{return cr=t,e()}finally{cr=r}};qM=function(t,e,r){switch(e){case"input":if(VM(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Yb(n);if(!i)throw Error(Ne(90));m5(n),VM(n,i)}}}break;case"textarea":v5(t,r);break;case"select":e=r.value,e!=null&&Kd(t,!!r.multiple,e,!1)}};B5=q2;M5=Ru;var BJ={usingClientEntryPoint:!1,Events:[f0,Ed,Yb,x5,E5,q2]},Tp={findFiberByHostInstance:ou,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MJ={bundleType:Tp.bundleType,version:Tp.version,rendererPackageName:Tp.rendererPackageName,rendererConfig:Tp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:aA.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S5(t),t===null?null:t.stateNode},findFiberByHostInstance:Tp.findFiberByHostInstance||xJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cv.isDisabled&&cv.supportsFiber)try{Gb=cv.inject(MJ),Go=cv}catch{}}zs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BJ;zs.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sI(e))throw Error(Ne(200));return _J(t,e,null,r)};zs.createRoot=function(t,e){if(!sI(t))throw Error(Ne(299));var r=!1,n="",i=lH;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rI(t,1,!1,null,null,r,!1,n,i),t[Xl]=e.current,xg(t.nodeType===8?t.parentNode:t),new iI(e)};zs.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ne(188)):(t=Object.keys(t).join(","),Error(Ne(268,t)));return t=S5(e),t=t===null?null:t.stateNode,t};zs.flushSync=function(t){return Ru(t)};zs.hydrate=function(t,e,r){if(!n_(e))throw Error(Ne(200));return i_(null,t,e,!0,r)};zs.hydrateRoot=function(t,e,r){if(!sI(t))throw Error(Ne(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=lH;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=oH(e,null,t,1,r??null,i,!1,s,a),t[Xl]=e.current,xg(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new r_(e)};zs.render=function(t,e,r){if(!n_(e))throw Error(Ne(200));return i_(null,t,e,!1,r)};zs.unmountComponentAtNode=function(t){if(!n_(t))throw Error(Ne(40));return t._reactRootContainer?(Ru(function(){i_(null,null,t,!1,function(){t._reactRootContainer=null,t[Xl]=null})}),!0):!1};zs.unstable_batchedUpdates=q2;zs.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!n_(r))throw Error(Ne(200));if(t==null||t._reactInternals===void 0)throw Error(Ne(38));return i_(t,e,r,!1,n)};zs.version="18.3.1-next-f1338f8080-20240426";function AH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AH)}catch(t){console.error(t)}}AH(),l5.exports=zs;var TJ=l5.exports,LF=TJ;DM.createRoot=LF.createRoot,DM.hydrateRoot=LF.hydrateRoot;const CJ="/public/assets/cc_bgm_balanced-f542698c.wav",Ba=_e.createContext(),SJ=({children:t})=>{const[e,r]=_e.useState(!1),n=X.useRef(null),i=()=>{r(!1);const a=n.current;a.src=CJ,a.loop=!0,a.volume=0,a.play();let o=0;const l=5,A=setInterval(()=>{o=Math.max(o+1/(10*l*60),1),o>=1&&clearInterval(A),a.volume=o},1e3/60)},s=()=>{r(!0),n.current.pause()};return O.jsxs(Ba.Provider,{value:{isMute:e,setMute:r,enableAudio:i,disableAudio:s},children:[O.jsx("audio",{ref:n}),t]})},IJ=_e.createContext(),RJ=t=>{const[e,r]=_e.useState(null),[n,i]=_e.useState(null),[s,a]=_e.useState(!1),[o,l]=_e.useState([]);return O.jsx(IJ.Provider,{value:{walletAddress:e,setWalletAddress:r,ensName:n,setEnsName:i,connected:s,setConnected:a,OTTokens:o,setOTTokens:l},children:t.children})};function Sl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cH(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ks={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ef={duration:.5,overwrite:!1,delay:0},aI,vi,Pr,Aa=1e8,gr=1/Aa,IT=Math.PI*2,UJ=IT/4,FJ=0,uH=Math.sqrt,kJ=Math.cos,LJ=Math.sin,Kn=function(t){return typeof t=="string"},tn=function(t){return typeof t=="function"},ql=function(t){return typeof t=="number"},oI=function(t){return typeof t>"u"},qo=function(t){return typeof t=="object"},es=function(t){return t!==!1},lI=function(){return typeof window<"u"},uv=function(t){return tn(t)||Kn(t)},hH=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},yi=Array.isArray,RT=/(?:-?\.?\d|\.)+/gi,dH=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Rd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,aE=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,fH=/[+-]=-?[.\d]+/,pH=/[^,'"\[\]\s]+/gi,PJ=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,zr,To,UT,AI,Ds={},T1={},mH,gH=function(t){return(T1=Uu(t,Ds))&&os},cI=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Ug=function(t,e){return!e&&console.warn(t)},vH=function(t,e){return t&&(Ds[t]=e)&&T1&&(T1[t]=e)||Ds},Fg=function(){return 0},OJ={suppressEvents:!0,isStart:!0,kill:!1},yw={suppressEvents:!0,kill:!1},DJ={suppressEvents:!0},uI={},lc=[],FT={},yH,xs={},oE={},PF=30,ww=[],hI="",dI=function(t){var e=t[0],r,n;if(qo(e)||tn(e)||(t=[t]),!(r=(e._gsap||{}).harness)){for(n=ww.length;n--&&!ww[n].targetTest(e););r=ww[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new zH(t[n],r)))||t.splice(n,1);return t},vu=function(t){return t._gsap||dI(ca(t))[0]._gsap},wH=function(t,e,r){return(r=t[e])&&tn(r)?t[e]():oI(r)&&t.getAttribute&&t.getAttribute(e)||r},ts=function(t,e){return(t=t.split(",")).forEach(e)||t},un=function(t){return Math.round(t*1e5)/1e5||0},jn=function(t){return Math.round(t*1e7)/1e7||0},$d=function(t,e){var r=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),r==="+"?t+n:r==="-"?t-n:r==="*"?t*n:t/n},NJ=function(t,e){for(var r=e.length,n=0;t.indexOf(e[n])<0&&++n<r;);return n<r},C1=function(){var t=lc.length,e=lc.slice(0),r,n;for(FT={},lc.length=0,r=0;r<t;r++)n=e[r],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},bH=function(t,e,r,n){lc.length&&!vi&&C1(),t.render(e,r,n||vi&&e<0&&(t._initted||t._startAt)),lc.length&&!vi&&C1()},_H=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(pH).length<2?e:Kn(t)?t.trim():t},xH=function(t){return t},ba=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},QJ=function(t){return function(e,r){for(var n in r)n in e||n==="duration"&&t||n==="ease"||(e[n]=r[n])}},Uu=function(t,e){for(var r in e)t[r]=e[r];return t},OF=function t(e,r){for(var n in r)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=qo(r[n])?t(e[n]||(e[n]={}),r[n]):r[n]);return e},S1=function(t,e){var r={},n;for(n in t)n in e||(r[n]=t[n]);return r},Zm=function(t){var e=t.parent||zr,r=t.keyframes?QJ(yi(t.keyframes)):ba;if(es(t.inherit))for(;e;)r(t,e.vars.defaults),e=e.parent||e._dp;return t},HJ=function(t,e){for(var r=t.length,n=r===e.length;n&&r--&&t[r]===e[r];);return r<0},EH=function(t,e,r,n,i){r===void 0&&(r="_first"),n===void 0&&(n="_last");var s=t[n],a;if(i)for(a=e[i];s&&s[i]>a;)s=s._prev;return s?(e._next=s._next,s._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[n]=e,e._prev=s,e.parent=e._dp=t,e},s_=function(t,e,r,n){r===void 0&&(r="_first"),n===void 0&&(n="_last");var i=e._prev,s=e._next;i?i._next=s:t[r]===e&&(t[r]=s),s?s._prev=i:t[n]===e&&(t[n]=i),e._next=e._prev=e.parent=null},mc=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},yu=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var r=t;r;)r._dirty=1,r=r.parent;return t},jJ=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},kT=function(t,e,r,n){return t._startAt&&(vi?t._startAt.revert(yw):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},zJ=function t(e){return!e||e._ts&&t(e.parent)},DF=function(t){return t._repeat?Bf(t._tTime,t=t.duration()+t._rDelay)*t:0},Bf=function(t,e){var r=Math.floor(t/=e);return t&&r===t?r-1:r},I1=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},a_=function(t){return t._end=jn(t._start+(t._tDur/Math.abs(t._ts||t._rts||gr)||0))},o_=function(t,e){var r=t._dp;return r&&r.smoothChildTiming&&t._ts&&(t._start=jn(r._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),a_(t),r._dirty||yu(r,t)),t},BH=function(t,e){var r;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(r=I1(t.rawTime(),e),(!e._dur||m0(0,e.totalDuration(),r)-e._tTime>gr)&&e.render(r,!0)),yu(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-gr}},Uo=function(t,e,r,n){return e.parent&&mc(e),e._start=jn((ql(r)?r:r||t!==zr?ea(t,r,e):t._time)+e._delay),e._end=jn(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),EH(t,e,"_first","_last",t._sort?"_start":0),LT(e)||(t._recent=e),n||BH(t,e),t._ts<0&&o_(t,t._tTime),t},MH=function(t,e){return(Ds.ScrollTrigger||cI("scrollTrigger",e))&&Ds.ScrollTrigger.create(e,t)},TH=function(t,e,r,n,i){if(pI(t,e,i),!t._initted)return 1;if(!r&&t._pt&&!vi&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&yH!==Es.frame)return lc.push(t),t._lazy=[i,n],1},GJ=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},LT=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},VJ=function(t,e,r,n){var i=t.ratio,s=e<0||!e&&(!t._start&&GJ(t)&&!(!t._initted&&LT(t))||(t._ts<0||t._dp._ts<0)&&!LT(t))?0:1,a=t._rDelay,o=0,l,A,c;if(a&&t._repeat&&(o=m0(0,t._tDur,e),A=Bf(o,a),t._yoyo&&A&1&&(s=1-s),A!==Bf(t._tTime,a)&&(i=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),s!==i||vi||n||t._zTime===gr||!e&&t._zTime){if(!t._initted&&TH(t,e,n,r,o))return;for(c=t._zTime,t._zTime=e||(r?gr:0),r||(r=e&&!c),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=o,l=t._pt;l;)l.r(s,l.d),l=l._next;e<0&&kT(t,e,r,!0),t._onUpdate&&!r&&Cs(t,"onUpdate"),o&&t._repeat&&!r&&t.parent&&Cs(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(s&&mc(t,1),!r&&!vi&&(Cs(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},WJ=function(t,e,r){var n;if(r>e)for(n=t._first;n&&n._start<=r;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=r;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},Mf=function(t,e,r,n){var i=t._repeat,s=jn(e)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=s/t._dur),t._dur=s,t._tDur=i?i<0?1e10:jn(s*(i+1)+t._rDelay*i):s,a>0&&!n&&o_(t,t._tTime=t._tDur*a),t.parent&&a_(t),r||yu(t.parent,t),t},NF=function(t){return t instanceof ki?yu(t):Mf(t,t._dur)},KJ={_start:0,endTime:Fg,totalDuration:Fg},ea=function t(e,r,n){var i=e.labels,s=e._recent||KJ,a=e.duration()>=Aa?s.endTime(!1):e._dur,o,l,A;return Kn(r)&&(isNaN(r)||r in i)?(l=r.charAt(0),A=r.substr(-1)==="%",o=r.indexOf("="),l==="<"||l===">"?(o>=0&&(r=r.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(r.substr(1))||0)*(A?(o<0?s:n).totalDuration()/100:1)):o<0?(r in i||(i[r]=a),i[r]):(l=parseFloat(r.charAt(o-1)+r.substr(o+1)),A&&n&&(l=l/100*(yi(n)?n[0]:n).totalDuration()),o>1?t(e,r.substr(0,o-1),n)+l:a+l)):r==null?a:+r},Jm=function(t,e,r){var n=ql(e[1]),i=(n?2:1)+(t<2?0:1),s=e[i],a,o;if(n&&(s.duration=e[1]),s.parent=r,t){for(a=s,o=r;o&&!("immediateRender"in a);)a=o.vars.defaults||{},o=es(o.vars.inherit)&&o.parent;s.immediateRender=es(a.immediateRender),t<2?s.runBackwards=1:s.startAt=e[i-1]}return new wn(e[0],s,e[i+1])},Sc=function(t,e){return t||t===0?e(t):e},m0=function(t,e,r){return r<t?t:r>e?e:r},fi=function(t,e){return!Kn(t)||!(e=PJ.exec(t))?"":e[1]},YJ=function(t,e,r){return Sc(r,function(n){return m0(t,e,n)})},PT=[].slice,CH=function(t,e){return t&&qo(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&qo(t[0]))&&!t.nodeType&&t!==To},XJ=function(t,e,r){return r===void 0&&(r=[]),t.forEach(function(n){var i;return Kn(n)&&!e||CH(n,1)?(i=r).push.apply(i,ca(n)):r.push(n)})||r},ca=function(t,e,r){return Pr&&!e&&Pr.selector?Pr.selector(t):Kn(t)&&!r&&(UT||!Tf())?PT.call((e||AI).querySelectorAll(t),0):yi(t)?XJ(t,r):CH(t)?PT.call(t,0):t?[t]:[]},OT=function(t){return t=ca(t)[0]||Ug("Invalid scope")||{},function(e){var r=t.current||t.nativeElement||t;return ca(e,r.querySelectorAll?r:r===t?Ug("Invalid scope")||AI.createElement("div"):t)}},SH=function(t){return t.sort(function(){return .5-Math.random()})},IH=function(t){if(tn(t))return t;var e=qo(t)?t:{each:t},r=wu(e.ease),n=e.from||0,i=parseFloat(e.base)||0,s={},a=n>0&&n<1,o=isNaN(n)||a,l=e.axis,A=n,c=n;return Kn(n)?A=c={center:.5,edges:.5,end:1}[n]||0:!a&&o&&(A=n[0],c=n[1]),function(u,h,d){var f=(d||e).length,m=s[f],g,p,v,y,_,E,x,B,M;if(!m){if(M=e.grid==="auto"?0:(e.grid||[1,Aa])[1],!M){for(x=-Aa;x<(x=d[M++].getBoundingClientRect().left)&&M<f;);M<f&&M--}for(m=s[f]=[],g=o?Math.min(M,f)*A-.5:n%M,p=M===Aa?0:o?f*c/M-.5:n/M|0,x=0,B=Aa,E=0;E<f;E++)v=E%M-g,y=p-(E/M|0),m[E]=_=l?Math.abs(l==="y"?y:v):uH(v*v+y*y),_>x&&(x=_),_<B&&(B=_);n==="random"&&SH(m),m.max=x-B,m.min=B,m.v=f=(parseFloat(e.amount)||parseFloat(e.each)*(M>f?f-1:l?l==="y"?f/M:M:Math.max(M,f/M))||0)*(n==="edges"?-1:1),m.b=f<0?i-f:i,m.u=fi(e.amount||e.each)||0,r=r&&f<0?QH(r):r}return f=(m[u]-m.min)/m.max||0,jn(m.b+(r?r(f):f)*m.v)+m.u}},DT=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(r){var n=jn(Math.round(parseFloat(r)/t)*t*e);return(n-n%1)/e+(ql(r)?0:fi(r))}},RH=function(t,e){var r=yi(t),n,i;return!r&&qo(t)&&(n=r=t.radius||Aa,t.values?(t=ca(t.values),(i=!ql(t[0]))&&(n*=n)):t=DT(t.increment)),Sc(e,r?tn(t)?function(s){return i=t(s),Math.abs(i-s)<=n?i:s}:function(s){for(var a=parseFloat(i?s.x:s),o=parseFloat(i?s.y:0),l=Aa,A=0,c=t.length,u,h;c--;)i?(u=t[c].x-a,h=t[c].y-o,u=u*u+h*h):u=Math.abs(t[c]-a),u<l&&(l=u,A=c);return A=!n||l<=n?t[A]:s,i||A===s||ql(s)?A:A+fi(s)}:DT(t))},UH=function(t,e,r,n){return Sc(yi(t)?!e:r===!0?!!(r=0):!n,function(){return yi(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(n=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((t-r/2+Math.random()*(e-t+r*.99))/r)*r*n)/n})},ZJ=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return e.reduce(function(i,s){return s(i)},n)}},JJ=function(t,e){return function(r){return t(parseFloat(r))+(e||fi(r))}},qJ=function(t,e,r){return kH(t,e,0,1,r)},FH=function(t,e,r){return Sc(r,function(n){return t[~~e(n)]})},$J=function t(e,r,n){var i=r-e;return yi(e)?FH(e,t(0,e.length),r):Sc(n,function(s){return(i+(s-e)%i)%i+e})},eq=function t(e,r,n){var i=r-e,s=i*2;return yi(e)?FH(e,t(0,e.length-1),r):Sc(n,function(a){return a=(s+(a-e)%s)%s||0,e+(a>i?s-a:a)})},kg=function(t){for(var e=0,r="",n,i,s,a;~(n=t.indexOf("random(",e));)s=t.indexOf(")",n),a=t.charAt(n+7)==="[",i=t.substr(n+7,s-n-7).match(a?pH:RT),r+=t.substr(e,n-e)+UH(a?i:+i[0],a?0:+i[1],+i[2]||1e-5),e=s+1;return r+t.substr(e,t.length-e)},kH=function(t,e,r,n,i){var s=e-t,a=n-r;return Sc(i,function(o){return r+((o-t)/s*a||0)})},tq=function t(e,r,n,i){var s=isNaN(e+r)?0:function(d){return(1-d)*e+d*r};if(!s){var a=Kn(e),o={},l,A,c,u,h;if(n===!0&&(i=1)&&(n=null),a)e={p:e},r={p:r};else if(yi(e)&&!yi(r)){for(c=[],u=e.length,h=u-2,A=1;A<u;A++)c.push(t(e[A-1],e[A]));u--,s=function(d){d*=u;var f=Math.min(h,~~d);return c[f](d-f)},n=r}else i||(e=Uu(yi(e)?[]:{},e));if(!c){for(l in r)fI.call(o,e,l,"get",r[l]);s=function(d){return vI(d,o)||(a?e.p:e)}}}return Sc(n,s)},QF=function(t,e,r){var n=t.labels,i=Aa,s,a,o;for(s in n)a=n[s]-e,a<0==!!r&&a&&i>(a=Math.abs(a))&&(o=s,i=a);return o},Cs=function(t,e,r){var n=t.vars,i=n[e],s=Pr,a=t._ctx,o,l,A;if(i)return o=n[e+"Params"],l=n.callbackScope||t,r&&lc.length&&C1(),a&&(Pr=a),A=o?i.apply(l,o):i.call(l),Pr=s,A},wm=function(t){return mc(t),t.scrollTrigger&&t.scrollTrigger.kill(!!vi),t.progress()<1&&Cs(t,"onInterrupt"),t},Ud,LH=[],PH=function(t){if(t)if(t=!t.name&&t.default||t,lI()||t.headless){var e=t.name,r=tn(t),n=e&&!r&&t.init?function(){this._props=[]}:t,i={init:Fg,render:vI,add:fI,kill:gq,modifier:mq,rawVars:0},s={targetTest:0,get:0,getSetter:gI,aliases:{},register:0};if(Tf(),t!==n){if(xs[e])return;ba(n,ba(S1(t,i),s)),Uu(n.prototype,Uu(i,S1(t,s))),xs[n.prop=e]=n,t.targetTest&&(ww.push(n),uI[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}vH(e,n),t.register&&t.register(os,n,rs)}else LH.push(t)},pr=255,bm={aqua:[0,pr,pr],lime:[0,pr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,pr],navy:[0,0,128],white:[pr,pr,pr],olive:[128,128,0],yellow:[pr,pr,0],orange:[pr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[pr,0,0],pink:[pr,192,203],cyan:[0,pr,pr],transparent:[pr,pr,pr,0]},lE=function(t,e,r){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(r-e)*t*6:t<.5?r:t*3<2?e+(r-e)*(2/3-t)*6:e)*pr+.5|0},OH=function(t,e,r){var n=t?ql(t)?[t>>16,t>>8&pr,t&pr]:0:bm.black,i,s,a,o,l,A,c,u,h,d;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),bm[t])n=bm[t];else if(t.charAt(0)==="#"){if(t.length<6&&(i=t.charAt(1),s=t.charAt(2),a=t.charAt(3),t="#"+i+i+s+s+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&pr,n&pr,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&pr,t&pr]}else if(t.substr(0,3)==="hsl"){if(n=d=t.match(RT),!e)o=+n[0]%360/360,l=+n[1]/100,A=+n[2]/100,s=A<=.5?A*(l+1):A+l-A*l,i=A*2-s,n.length>3&&(n[3]*=1),n[0]=lE(o+1/3,i,s),n[1]=lE(o,i,s),n[2]=lE(o-1/3,i,s);else if(~t.indexOf("="))return n=t.match(dH),r&&n.length<4&&(n[3]=1),n}else n=t.match(RT)||bm.transparent;n=n.map(Number)}return e&&!d&&(i=n[0]/pr,s=n[1]/pr,a=n[2]/pr,c=Math.max(i,s,a),u=Math.min(i,s,a),A=(c+u)/2,c===u?o=l=0:(h=c-u,l=A>.5?h/(2-c-u):h/(c+u),o=c===i?(s-a)/h+(s<a?6:0):c===s?(a-i)/h+2:(i-s)/h+4,o*=60),n[0]=~~(o+.5),n[1]=~~(l*100+.5),n[2]=~~(A*100+.5)),r&&n.length<4&&(n[3]=1),n},DH=function(t){var e=[],r=[],n=-1;return t.split(Ac).forEach(function(i){var s=i.match(Rd)||[];e.push.apply(e,s),r.push(n+=s.length+1)}),e.c=r,e},HF=function(t,e,r){var n="",i=(t+n).match(Ac),s=e?"hsla(":"rgba(",a=0,o,l,A,c;if(!i)return t;if(i=i.map(function(u){return(u=OH(u,e,1))&&s+(e?u[0]+","+u[1]+"%,"+u[2]+"%,"+u[3]:u.join(","))+")"}),r&&(A=DH(t),o=r.c,o.join(n)!==A.c.join(n)))for(l=t.replace(Ac,"1").split(Rd),c=l.length-1;a<c;a++)n+=l[a]+(~o.indexOf(a)?i.shift()||s+"0,0,0,0)":(A.length?A:i.length?i:r).shift());if(!l)for(l=t.split(Ac),c=l.length-1;a<c;a++)n+=l[a]+i[a];return n+l[c]},Ac=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in bm)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),rq=/hsl[a]?\(/,NH=function(t){var e=t.join(" "),r;if(Ac.lastIndex=0,Ac.test(e))return r=rq.test(e),t[1]=HF(t[1],r),t[0]=HF(t[0],r,DH(t[1])),!0},Lg,Es=function(){var t=Date.now,e=500,r=33,n=t(),i=n,s=1e3/240,a=s,o=[],l,A,c,u,h,d,f=function m(g){var p=t()-i,v=g===!0,y,_,E,x;if((p>e||p<0)&&(n+=p-r),i+=p,E=i-n,y=E-a,(y>0||v)&&(x=++u.frame,h=E-u.time*1e3,u.time=E=E/1e3,a+=y+(y>=s?4:s-y),_=1),v||(l=A(m)),_)for(d=0;d<o.length;d++)o[d](E,h,x,g)};return u={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(m){return h/(1e3/(m||60))},wake:function(){mH&&(!UT&&lI()&&(To=UT=window,AI=To.document||{},Ds.gsap=os,(To.gsapVersions||(To.gsapVersions=[])).push(os.version),gH(T1||To.GreenSockGlobals||!To.gsap&&To||{}),LH.forEach(PH)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&u.sleep(),A=c||function(m){return setTimeout(m,a-u.time*1e3+1|0)},Lg=1,f(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),Lg=0,A=Fg},lagSmoothing:function(m,g){e=m||1/0,r=Math.min(g||33,e)},fps:function(m){s=1e3/(m||240),a=u.time*1e3+s},add:function(m,g,p){var v=g?function(y,_,E,x){m(y,_,E,x),u.remove(v)}:m;return u.remove(m),o[p?"unshift":"push"](v),Tf(),v},remove:function(m,g){~(g=o.indexOf(m))&&o.splice(g,1)&&d>=g&&d--},_listeners:o},u}(),Tf=function(){return!Lg&&Es.wake()},zt={},nq=/^[\d.\-M][\d.\-,\s]/,iq=/["']/g,sq=function(t){for(var e={},r=t.substr(1,t.length-3).split(":"),n=r[0],i=1,s=r.length,a,o,l;i<s;i++)o=r[i],a=i!==s-1?o.lastIndexOf(","):o.length,l=o.substr(0,a),e[n]=isNaN(l)?l.replace(iq,"").trim():+l,n=o.substr(a+1).trim();return e},aq=function(t){var e=t.indexOf("(")+1,r=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<r?t.indexOf(")",r+1):r)},oq=function(t){var e=(t+"").split("("),r=zt[e[0]];return r&&e.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[sq(e[1])]:aq(t).split(",").map(_H)):zt._CE&&nq.test(t)?zt._CE("",t):r},QH=function(t){return function(e){return 1-t(1-e)}},HH=function t(e,r){for(var n=e._first,i;n;)n instanceof ki?t(n,r):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==r&&(n.timeline?t(n.timeline,r):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=r)),n=n._next},wu=function(t,e){return t&&(tn(t)?t:zt[t]||oq(t))||e},Ku=function(t,e,r,n){r===void 0&&(r=function(a){return 1-e(1-a)}),n===void 0&&(n=function(a){return a<.5?e(a*2)/2:1-e((1-a)*2)/2});var i={easeIn:e,easeOut:r,easeInOut:n},s;return ts(t,function(a){zt[a]=Ds[a]=i,zt[s=a.toLowerCase()]=r;for(var o in i)zt[s+(o==="easeIn"?".in":o==="easeOut"?".out":".inOut")]=zt[a+"."+o]=i[o]}),i},jH=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},AE=function t(e,r,n){var i=r>=1?r:1,s=(n||(e?.3:.45))/(r<1?r:1),a=s/IT*(Math.asin(1/i)||0),o=function(A){return A===1?1:i*Math.pow(2,-10*A)*LJ((A-a)*s)+1},l=e==="out"?o:e==="in"?function(A){return 1-o(1-A)}:jH(o);return s=IT/s,l.config=function(A,c){return t(e,A,c)},l},cE=function t(e,r){r===void 0&&(r=1.70158);var n=function(s){return s?--s*s*((r+1)*s+r)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:jH(n);return i.config=function(s){return t(e,s)},i};ts("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;Ku(t+",Power"+(r-1),e?function(n){return Math.pow(n,r)}:function(n){return n},function(n){return 1-Math.pow(1-n,r)},function(n){return n<.5?Math.pow(n*2,r)/2:1-Math.pow((1-n)*2,r)/2})});zt.Linear.easeNone=zt.none=zt.Linear.easeIn;Ku("Elastic",AE("in"),AE("out"),AE());(function(t,e){var r=1/e,n=2*r,i=2.5*r,s=function(a){return a<r?t*a*a:a<n?t*Math.pow(a-1.5/e,2)+.75:a<i?t*(a-=2.25/e)*a+.9375:t*Math.pow(a-2.625/e,2)+.984375};Ku("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Ku("Expo",function(t){return t?Math.pow(2,10*(t-1)):0});Ku("Circ",function(t){return-(uH(1-t*t)-1)});Ku("Sine",function(t){return t===1?1:-kJ(t*UJ)+1});Ku("Back",cE("in"),cE("out"),cE());zt.SteppedEase=zt.steps=Ds.SteppedEase={config:function(t,e){t===void 0&&(t=1);var r=1/t,n=t+(e?0:1),i=e?1:0,s=1-gr;return function(a){return((n*m0(0,s,a)|0)+i)*r}}};Ef.ease=zt["quad.out"];ts("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return hI+=t+","+t+"Params,"});var zH=function(t,e){this.id=FJ++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:wH,this.set=e?e.getSetter:gI},Pg=function(){function t(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,Mf(this,+r.duration,1,1),this.data=r.data,Pr&&(this._ctx=Pr,Pr.data.push(this)),Lg||Es.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,Mf(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,n){if(Tf(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(o_(this,r),!i._dp||i.parent||BH(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&Uo(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===gr||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),bH(this,r,n)),this},e.time=function(r,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+DF(this))%(this._dur+this._rDelay)||(r?this._dur:0),n):this._time},e.totalProgress=function(r,n){return arguments.length?this.totalTime(this.totalDuration()*r,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},e.progress=function(r,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+DF(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,n){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*i,n):this._repeat?Bf(this._tTime,i)+1:1},e.timeScale=function(r,n){if(!arguments.length)return this._rts===-gr?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?I1(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-gr?0:this._rts,this.totalTime(m0(-Math.abs(this._delay),this._tDur,i),n!==!1),a_(this),jJ(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Tf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==gr&&(this._tTime-=gr)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Uo(n,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(es(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var n=this.parent||this._dp;return n?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?I1(n.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=DJ);var n=vi;return vi=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),vi=n,this},e.globalTime=function(r){for(var n=this,i=arguments.length?r:n.rawTime();n;)i=n._start+i/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(r):i},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,NF(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var n=this._time;return this._rDelay=r,NF(this),n?this.time(n):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,n){return this.totalTime(ea(this,r),es(n))},e.restart=function(r,n){return this.play().totalTime(r?-this._delay:0,es(n))},e.play=function(r,n){return r!=null&&this.seek(r,n),this.reversed(!1).paused(!1)},e.reverse=function(r,n){return r!=null&&this.seek(r||this.totalDuration(),n),this.reversed(!0).paused(!1)},e.pause=function(r,n){return r!=null&&this.seek(r,n),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-gr:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-gr,this},e.isActive=function(){var r=this.parent||this._dp,n=this._start,i;return!!(!r||this._ts&&this._initted&&r.isActive()&&(i=r.rawTime(!0))>=n&&i<this.endTime(!0)-gr)},e.eventCallback=function(r,n,i){var s=this.vars;return arguments.length>1?(n?(s[r]=n,i&&(s[r+"Params"]=i),r==="onUpdate"&&(this._onUpdate=n)):delete s[r],this):s[r]},e.then=function(r){var n=this;return new Promise(function(i){var s=tn(r)?r:xH,a=function(){var o=n.then;n.then=null,tn(s)&&(s=s(n))&&(s.then||s===n)&&(n.then=o),i(s),n.then=o};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},e.kill=function(){wm(this)},t}();ba(Pg.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-gr,_prom:0,_ps:!1,_rts:1});var ki=function(t){cH(e,t);function e(n,i){var s;return n===void 0&&(n={}),s=t.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=es(n.sortChildren),zr&&Uo(n.parent||zr,Sl(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&MH(Sl(s),n.scrollTrigger),s}var r=e.prototype;return r.to=function(n,i,s){return Jm(0,arguments,this),this},r.from=function(n,i,s){return Jm(1,arguments,this),this},r.fromTo=function(n,i,s,a){return Jm(2,arguments,this),this},r.set=function(n,i,s){return i.duration=0,i.parent=this,Zm(i).repeatDelay||(i.repeat=0),i.immediateRender=!!i.immediateRender,new wn(n,i,ea(this,s),1),this},r.call=function(n,i,s){return Uo(this,wn.delayedCall(0,n,i),s)},r.staggerTo=function(n,i,s,a,o,l,A){return s.duration=i,s.stagger=s.stagger||a,s.onComplete=l,s.onCompleteParams=A,s.parent=this,new wn(n,s,ea(this,o)),this},r.staggerFrom=function(n,i,s,a,o,l,A){return s.runBackwards=1,Zm(s).immediateRender=es(s.immediateRender),this.staggerTo(n,i,s,a,o,l,A)},r.staggerFromTo=function(n,i,s,a,o,l,A,c){return a.startAt=s,Zm(a).immediateRender=es(a.immediateRender),this.staggerTo(n,i,a,o,l,A,c)},r.render=function(n,i,s){var a=this._time,o=this._dirty?this.totalDuration():this._tDur,l=this._dur,A=n<=0?0:jn(n),c=this._zTime<0!=n<0&&(this._initted||!l),u,h,d,f,m,g,p,v,y,_,E,x;if(this!==zr&&A>o&&n>=0&&(A=o),A!==this._tTime||s||c){if(a!==this._time&&l&&(A+=this._time-a,n+=this._time-a),u=A,y=this._start,v=this._ts,g=!v,c&&(l||(a=this._zTime),(n||!i)&&(this._zTime=n)),this._repeat){if(E=this._yoyo,m=l+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(m*100+n,i,s);if(u=jn(A%m),A===o?(f=this._repeat,u=l):(f=~~(A/m),f&&f===A/m&&(u=l,f--),u>l&&(u=l)),_=Bf(this._tTime,m),!a&&this._tTime&&_!==f&&this._tTime-_*m-this._dur<=0&&(_=f),E&&f&1&&(u=l-u,x=1),f!==_&&!this._lock){var B=E&&_&1,M=B===(E&&f&1);if(f<_&&(B=!B),a=B?0:A%l?l:A,this._lock=1,this.render(a||(x?0:jn(f*m)),i,!l)._lock=0,this._tTime=A,!i&&this.parent&&Cs(this,"onRepeat"),this.vars.repeatRefresh&&!x&&(this.invalidate()._lock=1),a&&a!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,o=this._tDur,M&&(this._lock=2,a=B?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!x&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;HH(this,x)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(p=WJ(this,jn(a),jn(u)),p&&(A-=u-(u=p._start))),this._tTime=A,this._time=u,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&u&&!i&&!f&&(Cs(this,"onStart"),this._tTime!==A))return this;if(u>=a&&n>=0)for(h=this._first;h;){if(d=h._next,(h._act||u>=h._start)&&h._ts&&p!==h){if(h.parent!==this)return this.render(n,i,s);if(h.render(h._ts>0?(u-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(u-h._start)*h._ts,i,s),u!==this._time||!this._ts&&!g){p=0,d&&(A+=this._zTime=-gr);break}}h=d}else{h=this._last;for(var R=n<0?n:u;h;){if(d=h._prev,(h._act||R<=h._end)&&h._ts&&p!==h){if(h.parent!==this)return this.render(n,i,s);if(h.render(h._ts>0?(R-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(R-h._start)*h._ts,i,s||vi&&(h._initted||h._startAt)),u!==this._time||!this._ts&&!g){p=0,d&&(A+=this._zTime=R?-gr:gr);break}}h=d}}if(p&&!i&&(this.pause(),p.render(u>=a?0:-gr)._zTime=u>=a?1:-1,this._ts))return this._start=y,a_(this),this.render(n,i,s);this._onUpdate&&!i&&Cs(this,"onUpdate",!0),(A===o&&this._tTime>=this.totalDuration()||!A&&a)&&(y===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((n||!l)&&(A===o&&this._ts>0||!A&&this._ts<0)&&mc(this,1),!i&&!(n<0&&!a)&&(A||a||!o)&&(Cs(this,A===o&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(A<o&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(n,i){var s=this;if(ql(i)||(i=ea(this,i,n)),!(n instanceof Pg)){if(yi(n))return n.forEach(function(a){return s.add(a,i)}),this;if(Kn(n))return this.addLabel(n,i);if(tn(n))n=wn.delayedCall(0,n);else return this}return this!==n?Uo(this,n,i):this},r.getChildren=function(n,i,s,a){n===void 0&&(n=!0),i===void 0&&(i=!0),s===void 0&&(s=!0),a===void 0&&(a=-Aa);for(var o=[],l=this._first;l;)l._start>=a&&(l instanceof wn?i&&o.push(l):(s&&o.push(l),n&&o.push.apply(o,l.getChildren(!0,i,s)))),l=l._next;return o},r.getById=function(n){for(var i=this.getChildren(1,1,1),s=i.length;s--;)if(i[s].vars.id===n)return i[s]},r.remove=function(n){return Kn(n)?this.removeLabel(n):tn(n)?this.killTweensOf(n):(s_(this,n),n===this._recent&&(this._recent=this._last),yu(this))},r.totalTime=function(n,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=jn(Es.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),t.prototype.totalTime.call(this,n,i),this._forcing=0,this):this._tTime},r.addLabel=function(n,i){return this.labels[n]=ea(this,i),this},r.removeLabel=function(n){return delete this.labels[n],this},r.addPause=function(n,i,s){var a=wn.delayedCall(0,i||Fg,s);return a.data="isPause",this._hasPause=1,Uo(this,a,ea(this,n))},r.removePause=function(n){var i=this._first;for(n=ea(this,n);i;)i._start===n&&i.data==="isPause"&&mc(i),i=i._next},r.killTweensOf=function(n,i,s){for(var a=this.getTweensOf(n,s),o=a.length;o--;)VA!==a[o]&&a[o].kill(n,i);return this},r.getTweensOf=function(n,i){for(var s=[],a=ca(n),o=this._first,l=ql(i),A;o;)o instanceof wn?NJ(o._targets,a)&&(l?(!VA||o._initted&&o._ts)&&o.globalTime(0)<=i&&o.globalTime(o.totalDuration())>i:!i||o.isActive())&&s.push(o):(A=o.getTweensOf(a,i)).length&&s.push.apply(s,A),o=o._next;return s},r.tweenTo=function(n,i){i=i||{};var s=this,a=ea(s,n),o=i,l=o.startAt,A=o.onStart,c=o.onStartParams,u=o.immediateRender,h,d=wn.to(s,ba({ease:i.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:i.duration||Math.abs((a-(l&&"time"in l?l.time:s._time))/s.timeScale())||gr,onStart:function(){if(s.pause(),!h){var f=i.duration||Math.abs((a-(l&&"time"in l?l.time:s._time))/s.timeScale());d._dur!==f&&Mf(d,f,0,1).render(d._time,!0,!0),h=1}A&&A.apply(d,c||[])}},i));return u?d.render(0):d},r.tweenFromTo=function(n,i,s){return this.tweenTo(i,ba({startAt:{time:ea(this,n)}},s))},r.recent=function(){return this._recent},r.nextLabel=function(n){return n===void 0&&(n=this._time),QF(this,ea(this,n))},r.previousLabel=function(n){return n===void 0&&(n=this._time),QF(this,ea(this,n),1)},r.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+gr)},r.shiftChildren=function(n,i,s){s===void 0&&(s=0);for(var a=this._first,o=this.labels,l;a;)a._start>=s&&(a._start+=n,a._end+=n),a=a._next;if(i)for(l in o)o[l]>=s&&(o[l]+=n);return yu(this)},r.invalidate=function(n){var i=this._first;for(this._lock=0;i;)i.invalidate(n),i=i._next;return t.prototype.invalidate.call(this,n)},r.clear=function(n){n===void 0&&(n=!0);for(var i=this._first,s;i;)s=i._next,this.remove(i),i=s;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),yu(this)},r.totalDuration=function(n){var i=0,s=this,a=s._last,o=Aa,l,A,c;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-n:n));if(s._dirty){for(c=s.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),A=a._start,A>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,Uo(s,a,A-a._delay,1)._lock=0):o=A,A<0&&a._ts&&(i-=A,(!c&&!s._dp||c&&c.smoothChildTiming)&&(s._start+=A/s._ts,s._time-=A,s._tTime-=A),s.shiftChildren(-A,!1,-1/0),o=0),a._end>i&&a._ts&&(i=a._end),a=l;Mf(s,s===zr&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(n){if(zr._ts&&(bH(zr,I1(n,zr)),yH=Es.frame),Es.frame>=PF){PF+=ks.autoSleep||120;var i=zr._first;if((!i||!i._ts)&&ks.autoSleep&&Es._listeners.length<2){for(;i&&!i._ts;)i=i._next;i||Es.sleep()}}},e}(Pg);ba(ki.prototype,{_lock:0,_hasPause:0,_forcing:0});var lq=function(t,e,r,n,i,s,a){var o=new rs(this._pt,t,e,0,1,XH,null,i),l=0,A=0,c,u,h,d,f,m,g,p;for(o.b=r,o.e=n,r+="",n+="",(g=~n.indexOf("random("))&&(n=kg(n)),s&&(p=[r,n],s(p,t,e),r=p[0],n=p[1]),u=r.match(aE)||[];c=aE.exec(n);)d=c[0],f=n.substring(l,c.index),h?h=(h+1)%5:f.substr(-5)==="rgba("&&(h=1),d!==u[A++]&&(m=parseFloat(u[A-1])||0,o._pt={_next:o._pt,p:f||A===1?f:",",s:m,c:d.charAt(1)==="="?$d(m,d)-m:parseFloat(d)-m,m:h&&h<4?Math.round:0},l=aE.lastIndex);return o.c=l<n.length?n.substring(l,n.length):"",o.fp=a,(fH.test(n)||g)&&(o.e=0),this._pt=o,o},fI=function(t,e,r,n,i,s,a,o,l,A){tn(n)&&(n=n(i||0,t,s));var c=t[e],u=r!=="get"?r:tn(c)?l?t[e.indexOf("set")||!tn(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():c,h=tn(c)?l?dq:KH:mI,d;if(Kn(n)&&(~n.indexOf("random(")&&(n=kg(n)),n.charAt(1)==="="&&(d=$d(u,n)+(fi(u)||0),(d||d===0)&&(n=d))),!A||u!==n||NT)return!isNaN(u*n)&&n!==""?(d=new rs(this._pt,t,e,+u||0,n-(u||0),typeof c=="boolean"?pq:YH,0,h),l&&(d.fp=l),a&&d.modifier(a,this,t),this._pt=d):(!c&&!(e in t)&&cI(e,n),lq.call(this,t,e,u,n,h,o||ks.stringFilter,l))},Aq=function(t,e,r,n,i){if(tn(t)&&(t=qm(t,i,e,r,n)),!qo(t)||t.style&&t.nodeType||yi(t)||hH(t))return Kn(t)?qm(t,i,e,r,n):t;var s={},a;for(a in t)s[a]=qm(t[a],i,e,r,n);return s},GH=function(t,e,r,n,i,s){var a,o,l,A;if(xs[t]&&(a=new xs[t]).init(i,a.rawVars?e[t]:Aq(e[t],n,i,s,r),r,n,s)!==!1&&(r._pt=o=new rs(r._pt,i,t,0,1,a.render,a,0,a.priority),r!==Ud))for(l=r._ptLookup[r._targets.indexOf(i)],A=a._props.length;A--;)l[a._props[A]]=o;return a},VA,NT,pI=function t(e,r,n){var i=e.vars,s=i.ease,a=i.startAt,o=i.immediateRender,l=i.lazy,A=i.onUpdate,c=i.runBackwards,u=i.yoyoEase,h=i.keyframes,d=i.autoRevert,f=e._dur,m=e._startAt,g=e._targets,p=e.parent,v=p&&p.data==="nested"?p.vars.targets:g,y=e._overwrite==="auto"&&!aI,_=e.timeline,E,x,B,M,R,I,L,D,w,b,S,F,k;if(_&&(!h||!s)&&(s="none"),e._ease=wu(s,Ef.ease),e._yEase=u?QH(wu(u===!0?s:u,Ef.ease)):0,u&&e._yoyo&&!e._repeat&&(u=e._yEase,e._yEase=e._ease,e._ease=u),e._from=!_&&!!i.runBackwards,!_||h&&!i.stagger){if(D=g[0]?vu(g[0]).harness:0,F=D&&i[D.prop],E=S1(i,uI),m&&(m._zTime<0&&m.progress(1),r<0&&c&&o&&!d?m.render(-1,!0):m.revert(c&&f?yw:OJ),m._lazy=0),a){if(mc(e._startAt=wn.set(g,ba({data:"isStart",overwrite:!1,parent:p,immediateRender:!0,lazy:!m&&es(l),startAt:null,delay:0,onUpdate:A&&function(){return Cs(e,"onUpdate")},stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,r<0&&(vi||!o&&!d)&&e._startAt.revert(yw),o&&f&&r<=0&&n<=0){r&&(e._zTime=r);return}}else if(c&&f&&!m){if(r&&(o=!1),B=ba({overwrite:!1,data:"isFromStart",lazy:o&&!m&&es(l),immediateRender:o,stagger:0,parent:p},E),F&&(B[D.prop]=F),mc(e._startAt=wn.set(g,B)),e._startAt._dp=0,e._startAt._sat=e,r<0&&(vi?e._startAt.revert(yw):e._startAt.render(-1,!0)),e._zTime=r,!o)t(e._startAt,gr,gr);else if(!r)return}for(e._pt=e._ptCache=0,l=f&&es(l)||l&&!f,x=0;x<g.length;x++){if(R=g[x],L=R._gsap||dI(g)[x]._gsap,e._ptLookup[x]=b={},FT[L.id]&&lc.length&&C1(),S=v===g?x:v.indexOf(R),D&&(w=new D).init(R,F||E,e,S,v)!==!1&&(e._pt=M=new rs(e._pt,R,w.name,0,1,w.render,w,0,w.priority),w._props.forEach(function(Q){b[Q]=M}),w.priority&&(I=1)),!D||F)for(B in E)xs[B]&&(w=GH(B,E,e,S,R,v))?w.priority&&(I=1):b[B]=M=fI.call(e,R,B,"get",E[B],S,v,0,i.stringFilter);e._op&&e._op[x]&&e.kill(R,e._op[x]),y&&e._pt&&(VA=e,zr.killTweensOf(R,b,e.globalTime(r)),k=!e.parent,VA=0),e._pt&&l&&(FT[L.id]=1)}I&&ZH(e),e._onInit&&e._onInit(e)}e._onUpdate=A,e._initted=(!e._op||e._pt)&&!k,h&&r<=0&&_.render(Aa,!0,!0)},cq=function(t,e,r,n,i,s,a,o){var l=(t._pt&&t._ptCache||(t._ptCache={}))[e],A,c,u,h;if(!l)for(l=t._ptCache[e]=[],u=t._ptLookup,h=t._targets.length;h--;){if(A=u[h][e],A&&A.d&&A.d._pt)for(A=A.d._pt;A&&A.p!==e&&A.fp!==e;)A=A._next;if(!A)return NT=1,t.vars[e]="+=0",pI(t,a),NT=0,o?Ug(e+" not eligible for reset"):1;l.push(A)}for(h=l.length;h--;)c=l[h],A=c._pt||c,A.s=(n||n===0)&&!i?n:A.s+(n||0)+s*A.c,A.c=r-A.s,c.e&&(c.e=un(r)+fi(c.e)),c.b&&(c.b=A.s+fi(c.b))},uq=function(t,e){var r=t[0]?vu(t[0]).harness:0,n=r&&r.aliases,i,s,a,o;if(!n)return e;i=Uu({},e);for(s in n)if(s in i)for(o=n[s].split(","),a=o.length;a--;)i[o[a]]=i[s];return i},hq=function(t,e,r,n){var i=e.ease||n||"power1.inOut",s,a;if(yi(e))a=r[t]||(r[t]=[]),e.forEach(function(o,l){return a.push({t:l/(e.length-1)*100,v:o,e:i})});else for(s in e)a=r[s]||(r[s]=[]),s==="ease"||a.push({t:parseFloat(t),v:e[s],e:i})},qm=function(t,e,r,n,i){return tn(t)?t.call(e,r,n,i):Kn(t)&&~t.indexOf("random(")?kg(t):t},VH=hI+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",WH={};ts(VH+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return WH[t]=1});var wn=function(t){cH(e,t);function e(n,i,s,a){var o;typeof i=="number"&&(s.duration=i,i=s,s=null),o=t.call(this,a?i:Zm(i))||this;var l=o.vars,A=l.duration,c=l.delay,u=l.immediateRender,h=l.stagger,d=l.overwrite,f=l.keyframes,m=l.defaults,g=l.scrollTrigger,p=l.yoyoEase,v=i.parent||zr,y=(yi(n)||hH(n)?ql(n[0]):"length"in i)?[n]:ca(n),_,E,x,B,M,R,I,L;if(o._targets=y.length?dI(y):Ug("GSAP target "+n+" not found. https://gsap.com",!ks.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=d,f||h||uv(A)||uv(c)){if(i=o.vars,_=o.timeline=new ki({data:"nested",defaults:m||{},targets:v&&v.data==="nested"?v.vars.targets:y}),_.kill(),_.parent=_._dp=Sl(o),_._start=0,h||uv(A)||uv(c)){if(B=y.length,I=h&&IH(h),qo(h))for(M in h)~VH.indexOf(M)&&(L||(L={}),L[M]=h[M]);for(E=0;E<B;E++)x=S1(i,WH),x.stagger=0,p&&(x.yoyoEase=p),L&&Uu(x,L),R=y[E],x.duration=+qm(A,Sl(o),E,R,y),x.delay=(+qm(c,Sl(o),E,R,y)||0)-o._delay,!h&&B===1&&x.delay&&(o._delay=c=x.delay,o._start+=c,x.delay=0),_.to(R,x,I?I(E,R,y):0),_._ease=zt.none;_.duration()?A=c=0:o.timeline=0}else if(f){Zm(ba(_.vars.defaults,{ease:"none"})),_._ease=wu(f.ease||i.ease||"none");var D=0,w,b,S;if(yi(f))f.forEach(function(F){return _.to(y,F,">")}),_.duration();else{x={};for(M in f)M==="ease"||M==="easeEach"||hq(M,f[M],x,f.easeEach);for(M in x)for(w=x[M].sort(function(F,k){return F.t-k.t}),D=0,E=0;E<w.length;E++)b=w[E],S={ease:b.e,duration:(b.t-(E?w[E-1].t:0))/100*A},S[M]=b.v,_.to(y,S,D),D+=S.duration;_.duration()<A&&_.to({},{duration:A-_.duration()})}}A||o.duration(A=_.duration())}else o.timeline=0;return d===!0&&!aI&&(VA=Sl(o),zr.killTweensOf(y),VA=0),Uo(v,Sl(o),s),i.reversed&&o.reverse(),i.paused&&o.paused(!0),(u||!A&&!f&&o._start===jn(v._time)&&es(u)&&zJ(Sl(o))&&v.data!=="nested")&&(o._tTime=-gr,o.render(Math.max(0,-c)||0)),g&&MH(Sl(o),g),o}var r=e.prototype;return r.render=function(n,i,s){var a=this._time,o=this._tDur,l=this._dur,A=n<0,c=n>o-gr&&!A?o:n<gr?0:n,u,h,d,f,m,g,p,v,y;if(!l)VJ(this,n,i,s);else if(c!==this._tTime||!n||s||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==A){if(u=c,v=this.timeline,this._repeat){if(f=l+this._rDelay,this._repeat<-1&&A)return this.totalTime(f*100+n,i,s);if(u=jn(c%f),c===o?(d=this._repeat,u=l):(d=~~(c/f),d&&d===jn(c/f)&&(u=l,d--),u>l&&(u=l)),g=this._yoyo&&d&1,g&&(y=this._yEase,u=l-u),m=Bf(this._tTime,f),u===a&&!s&&this._initted&&d===m)return this._tTime=c,this;d!==m&&(v&&this._yEase&&HH(v,g),this.vars.repeatRefresh&&!g&&!this._lock&&this._time!==f&&this._initted&&(this._lock=s=1,this.render(jn(f*d),!0).invalidate()._lock=0))}if(!this._initted){if(TH(this,A?n:u,s,i,c))return this._tTime=0,this;if(a!==this._time&&!(s&&this.vars.repeatRefresh&&d!==m))return this;if(l!==this._dur)return this.render(n,i,s)}if(this._tTime=c,this._time=u,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=p=(y||this._ease)(u/l),this._from&&(this.ratio=p=1-p),u&&!a&&!i&&!d&&(Cs(this,"onStart"),this._tTime!==c))return this;for(h=this._pt;h;)h.r(p,h.d),h=h._next;v&&v.render(n<0?n:v._dur*v._ease(u/this._dur),i,s)||this._startAt&&(this._zTime=n),this._onUpdate&&!i&&(A&&kT(this,n,i,s),Cs(this,"onUpdate")),this._repeat&&d!==m&&this.vars.onRepeat&&!i&&this.parent&&Cs(this,"onRepeat"),(c===this._tDur||!c)&&this._tTime===c&&(A&&!this._onUpdate&&kT(this,n,!0,!0),(n||!l)&&(c===this._tDur&&this._ts>0||!c&&this._ts<0)&&mc(this,1),!i&&!(A&&!a)&&(c||a||g)&&(Cs(this,c===o?"onComplete":"onReverseComplete",!0),this._prom&&!(c<o&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),t.prototype.invalidate.call(this,n)},r.resetTo=function(n,i,s,a,o){Lg||Es.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),A;return this._initted||pI(this,l),A=this._ease(l/this._dur),cq(this,n,i,s,a,A,l,o)?this.resetTo(n,i,s,a,1):(o_(this,0),this.parent||EH(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(n,i){if(i===void 0&&(i="all"),!n&&(!i||i==="all"))return this._lazy=this._pt=0,this.parent?wm(this):this;if(this.timeline){var s=this.timeline.totalDuration();return this.timeline.killTweensOf(n,i,VA&&VA.vars.overwrite!==!0)._first||wm(this),this.parent&&s!==this.timeline.totalDuration()&&Mf(this,this._dur*this.timeline._tDur/s,0,1),this}var a=this._targets,o=n?ca(n):a,l=this._ptLookup,A=this._pt,c,u,h,d,f,m,g;if((!i||i==="all")&&HJ(a,o))return i==="all"&&(this._pt=0),wm(this);for(c=this._op=this._op||[],i!=="all"&&(Kn(i)&&(f={},ts(i,function(p){return f[p]=1}),i=f),i=uq(a,i)),g=a.length;g--;)if(~o.indexOf(a[g])){u=l[g],i==="all"?(c[g]=i,d=u,h={}):(h=c[g]=c[g]||{},d=i);for(f in d)m=u&&u[f],m&&((!("kill"in m.d)||m.d.kill(f)===!0)&&s_(this,m,"_pt"),delete u[f]),h!=="all"&&(h[f]=1)}return this._initted&&!this._pt&&A&&wm(this),this},e.to=function(n,i){return new e(n,i,arguments[2])},e.from=function(n,i){return Jm(1,arguments)},e.delayedCall=function(n,i,s,a){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:i,onReverseComplete:i,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:a})},e.fromTo=function(n,i,s){return Jm(2,arguments)},e.set=function(n,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(n,i)},e.killTweensOf=function(n,i,s){return zr.killTweensOf(n,i,s)},e}(Pg);ba(wn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ts("staggerTo,staggerFrom,staggerFromTo",function(t){wn[t]=function(){var e=new ki,r=PT.call(arguments,0);return r.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,r)}});var mI=function(t,e,r){return t[e]=r},KH=function(t,e,r){return t[e](r)},dq=function(t,e,r,n){return t[e](n.fp,r)},fq=function(t,e,r){return t.setAttribute(e,r)},gI=function(t,e){return tn(t[e])?KH:oI(t[e])&&t.setAttribute?fq:mI},YH=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},pq=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},XH=function(t,e){var r=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;r;)n=r.p+(r.m?r.m(r.s+r.c*t):Math.round((r.s+r.c*t)*1e4)/1e4)+n,r=r._next;n+=e.c}e.set(e.t,e.p,n,e)},vI=function(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},mq=function(t,e,r,n){for(var i=this._pt,s;i;)s=i._next,i.p===n&&i.modifier(t,e,r),i=s},gq=function(t){for(var e=this._pt,r,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?s_(this,e,"_pt"):e.dep||(r=1),e=n;return!r},vq=function(t,e,r,n){n.mSet(t,e,n.m.call(n.tween,r,n.mt),n)},ZH=function(t){for(var e=t._pt,r,n,i,s;e;){for(r=e._next,n=i;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:s)?e._prev._next=e:i=e,(e._next=n)?n._prev=e:s=e,e=r}t._pt=i},rs=function(){function t(r,n,i,s,a,o,l,A,c){this.t=n,this.s=s,this.c=a,this.p=i,this.r=o||YH,this.d=l||this,this.set=A||mI,this.pr=c||0,this._next=r,r&&(r._prev=this)}var e=t.prototype;return e.modifier=function(r,n,i){this.mSet=this.mSet||this.set,this.set=vq,this.m=r,this.mt=i,this.tween=n},t}();ts(hI+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return uI[t]=1});Ds.TweenMax=Ds.TweenLite=wn;Ds.TimelineLite=Ds.TimelineMax=ki;zr=new ki({sortChildren:!1,defaults:Ef,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ks.stringFilter=NH;var bu=[],bw={},yq=[],jF=0,wq=0,uE=function(t){return(bw[t]||yq).map(function(e){return e()})},QT=function(){var t=Date.now(),e=[];t-jF>2&&(uE("matchMediaInit"),bu.forEach(function(r){var n=r.queries,i=r.conditions,s,a,o,l;for(a in n)s=To.matchMedia(n[a]).matches,s&&(o=1),s!==i[a]&&(i[a]=s,l=1);l&&(r.revert(),o&&e.push(r))}),uE("matchMediaRevert"),e.forEach(function(r){return r.onMatch(r,function(n){return r.add(null,n)})}),jF=t,uE("matchMedia"))},JH=function(){function t(r,n){this.selector=n&&OT(n),this.data=[],this._r=[],this.isReverted=!1,this.id=wq++,r&&this.add(r)}var e=t.prototype;return e.add=function(r,n,i){tn(r)&&(i=n,n=r,r=tn);var s=this,a=function(){var o=Pr,l=s.selector,A;return o&&o!==s&&o.data.push(s),i&&(s.selector=OT(i)),Pr=s,A=n.apply(s,arguments),tn(A)&&s._r.push(A),Pr=o,s.selector=l,s.isReverted=!1,A};return s.last=a,r===tn?a(s,function(o){return s.add(null,o)}):r?s[r]=a:a},e.ignore=function(r){var n=Pr;Pr=null,r(this),Pr=n},e.getTweens=function(){var r=[];return this.data.forEach(function(n){return n instanceof t?r.push.apply(r,n.getTweens()):n instanceof wn&&!(n.parent&&n.parent.data==="nested")&&r.push(n)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,n){var i=this;if(r?function(){for(var a=i.getTweens(),o=i.data.length,l;o--;)l=i.data[o],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(A){return a.splice(a.indexOf(A),1)}));for(a.map(function(A){return{g:A._dur||A._delay||A._sat&&!A._sat.vars.immediateRender?A.globalTime(0):-1/0,t:A}}).sort(function(A,c){return c.g-A.g||-1/0}).forEach(function(A){return A.t.revert(r)}),o=i.data.length;o--;)l=i.data[o],l instanceof ki?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof wn)&&l.revert&&l.revert(r);i._r.forEach(function(A){return A(r,i)}),i.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),n)for(var s=bu.length;s--;)bu[s].id===this.id&&bu.splice(s,1)},e.revert=function(r){this.kill(r||{})},t}(),bq=function(){function t(r){this.contexts=[],this.scope=r,Pr&&Pr.data.push(this)}var e=t.prototype;return e.add=function(r,n,i){qo(r)||(r={matches:r});var s=new JH(0,i||this.scope),a=s.conditions={},o,l,A;Pr&&!s.selector&&(s.selector=Pr.selector),this.contexts.push(s),n=s.add("onMatch",n),s.queries=r;for(l in r)l==="all"?A=1:(o=To.matchMedia(r[l]),o&&(bu.indexOf(s)<0&&bu.push(s),(a[l]=o.matches)&&(A=1),o.addListener?o.addListener(QT):o.addEventListener("change",QT)));return A&&n(s,function(c){return s.add(null,c)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(n){return n.kill(r,!0)})},t}(),R1={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(n){return PH(n)})},timeline:function(t){return new ki(t)},getTweensOf:function(t,e){return zr.getTweensOf(t,e)},getProperty:function(t,e,r,n){Kn(t)&&(t=ca(t)[0]);var i=vu(t||{}).get,s=r?xH:_H;return r==="native"&&(r=""),t&&(e?s((xs[e]&&xs[e].get||i)(t,e,r,n)):function(a,o,l){return s((xs[a]&&xs[a].get||i)(t,a,o,l))})},quickSetter:function(t,e,r){if(t=ca(t),t.length>1){var n=t.map(function(A){return os.quickSetter(A,e,r)}),i=n.length;return function(A){for(var c=i;c--;)n[c](A)}}t=t[0]||{};var s=xs[e],a=vu(t),o=a.harness&&(a.harness.aliases||{})[e]||e,l=s?function(A){var c=new s;Ud._pt=0,c.init(t,r?A+r:A,Ud,0,[t]),c.render(1,c),Ud._pt&&vI(1,Ud)}:a.set(t,o);return s?l:function(A){return l(t,o,r?A+r:A,a,1)}},quickTo:function(t,e,r){var n,i=os.to(t,Uu((n={},n[e]="+=0.1",n.paused=!0,n),r||{})),s=function(a,o,l){return i.resetTo(e,a,o,l)};return s.tween=i,s},isTweening:function(t){return zr.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=wu(t.ease,Ef.ease)),OF(Ef,t||{})},config:function(t){return OF(ks,t||{})},registerEffect:function(t){var e=t.name,r=t.effect,n=t.plugins,i=t.defaults,s=t.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!xs[a]&&!Ds[a]&&Ug(e+" effect requires "+a+" plugin.")}),oE[e]=function(a,o,l){return r(ca(a),ba(o||{},i),l)},s&&(ki.prototype[e]=function(a,o,l){return this.add(oE[e](a,qo(o)?o:(l=o)&&{},this),l)})},registerEase:function(t,e){zt[t]=wu(e)},parseEase:function(t,e){return arguments.length?wu(t,e):zt},getById:function(t){return zr.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var r=new ki(t),n,i;for(r.smoothChildTiming=es(t.smoothChildTiming),zr.remove(r),r._dp=0,r._time=r._tTime=zr._time,n=zr._first;n;)i=n._next,(e||!(!n._dur&&n instanceof wn&&n.vars.onComplete===n._targets[0]))&&Uo(r,n,n._start-n._delay),n=i;return Uo(zr,r,0),r},context:function(t,e){return t?new JH(t,e):Pr},matchMedia:function(t){return new bq(t)},matchMediaRefresh:function(){return bu.forEach(function(t){var e=t.conditions,r,n;for(n in e)e[n]&&(e[n]=!1,r=1);r&&t.revert()})||QT()},addEventListener:function(t,e){var r=bw[t]||(bw[t]=[]);~r.indexOf(e)||r.push(e)},removeEventListener:function(t,e){var r=bw[t],n=r&&r.indexOf(e);n>=0&&r.splice(n,1)},utils:{wrap:$J,wrapYoyo:eq,distribute:IH,random:UH,snap:RH,normalize:qJ,getUnit:fi,clamp:YJ,splitColor:OH,toArray:ca,selector:OT,mapRange:kH,pipe:ZJ,unitize:JJ,interpolate:tq,shuffle:SH},install:gH,effects:oE,ticker:Es,updateRoot:ki.updateRoot,plugins:xs,globalTimeline:zr,core:{PropTween:rs,globals:vH,Tween:wn,Timeline:ki,Animation:Pg,getCache:vu,_removeLinkedListItem:s_,reverting:function(){return vi},context:function(t){return t&&Pr&&(Pr.data.push(t),t._ctx=Pr),Pr},suppressOverwrites:function(t){return aI=t}}};ts("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return R1[t]=wn[t]});Es.add(ki.updateRoot);Ud=R1.to({},{duration:0});var _q=function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r},xq=function(t,e){var r=t._targets,n,i,s;for(n in e)for(i=r.length;i--;)s=t._ptLookup[i][n],s&&(s=s.d)&&(s._pt&&(s=_q(s,n)),s&&s.modifier&&s.modifier(e[n],t,r[i],n))},hE=function(t,e){return{name:t,rawVars:1,init:function(r,n,i){i._onInit=function(s){var a,o;if(Kn(n)&&(a={},ts(n,function(l){return a[l]=1}),n=a),e){a={};for(o in n)a[o]=e(n[o]);n=a}xq(s,n)}}}},os=R1.registerPlugin({name:"attr",init:function(t,e,r,n,i){var s,a,o;this.tween=r;for(s in e)o=t.getAttribute(s)||"",a=this.add(t,"setAttribute",(o||0)+"",e[s],n,i,0,0,s),a.op=s,a.b=o,this._props.push(s)},render:function(t,e){for(var r=e._pt;r;)vi?r.set(r.t,r.p,r.b,r):r.r(t,r.d),r=r._next}},{name:"endArray",init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r],0,0,0,0,0,1)}},hE("roundProps",DT),hE("modifiers"),hE("snap",RH))||R1;wn.version=ki.version=os.version="3.12.5";mH=1;lI()&&Tf();zt.Power0;zt.Power1;zt.Power2;zt.Power3;zt.Power4;zt.Linear;zt.Quad;zt.Cubic;zt.Quart;zt.Quint;zt.Strong;zt.Elastic;zt.Back;zt.SteppedEase;zt.Bounce;zt.Sine;zt.Expo;zt.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var zF,WA,ef,yI,cu,GF,wI,Eq=function(){return typeof window<"u"},$l={},eu=180/Math.PI,tf=Math.PI/180,sh=Math.atan2,VF=1e8,bI=/([A-Z])/g,Bq=/(left|right|width|margin|padding|x)/i,Mq=/[\s,\(]\S/,Do={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},HT=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Tq=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Cq=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Sq=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},qH=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},$H=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Iq=function(t,e,r){return t.style[e]=r},Rq=function(t,e,r){return t.style.setProperty(e,r)},Uq=function(t,e,r){return t._gsap[e]=r},Fq=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},kq=function(t,e,r,n,i){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},Lq=function(t,e,r,n,i){var s=t._gsap;s[e]=r,s.renderTransform(i,s)},Gr="transform",ns=Gr+"Origin",Pq=function t(e,r){var n=this,i=this.target,s=i.style,a=i._gsap;if(e in $l&&s){if(this.tfm=this.tfm||{},e!=="transform")e=Do[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return n.tfm[o]=Fl(i,o)}):this.tfm[e]=a.x?a[e]:Fl(i,e),e===ns&&(this.tfm.zOrigin=a.zOrigin);else return Do.transform.split(",").forEach(function(o){return t.call(n,o,r)});if(this.props.indexOf(Gr)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(ns,r,"")),e=Gr}(s||r)&&this.props.push(e,r,s[e])},e8=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Oq=function(){var t=this.props,e=this.target,r=e.style,n=e._gsap,i,s;for(i=0;i<t.length;i+=3)t[i+1]?e[t[i]]=t[i+2]:t[i+2]?r[t[i]]=t[i+2]:r.removeProperty(t[i].substr(0,2)==="--"?t[i]:t[i].replace(bI,"-$1").toLowerCase());if(this.tfm){for(s in this.tfm)n[s]=this.tfm[s];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),i=wI(),(!i||!i.isStart)&&!r[Gr]&&(e8(r),n.zOrigin&&r[ns]&&(r[ns]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},t8=function(t,e){var r={target:t,props:[],revert:Oq,save:Pq};return t._gsap||os.core.getCache(t),e&&e.split(",").forEach(function(n){return r.save(n)}),r},r8,jT=function(t,e){var r=WA.createElementNS?WA.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):WA.createElement(t);return r&&r.style?r:WA.createElement(t)},Wo=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(bI,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,Cf(r)||r,1)||""},WF="O,Moz,ms,Ms,Webkit".split(","),Cf=function(t,e,r){var n=e||cu,i=n.style,s=5;if(t in i&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(WF[s]+t in i););return s<0?null:(s===3?"ms":s>=0?WF[s]:"")+t},zT=function(){Eq()&&window.document&&(zF=window,WA=zF.document,ef=WA.documentElement,cu=jT("div")||{style:{}},jT("div"),Gr=Cf(Gr),ns=Gr+"Origin",cu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",r8=!!Cf("perspective"),wI=os.core.reverting,yI=1)},dE=function t(e){var r=jT("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,i=this.nextSibling,s=this.style.cssText,a;if(ef.appendChild(r),r.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch{}else this._gsapBBox&&(a=this._gsapBBox());return n&&(i?n.insertBefore(this,i):n.appendChild(this)),ef.removeChild(r),this.style.cssText=s,a},KF=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},n8=function(t){var e;try{e=t.getBBox()}catch{e=dE.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===dE||(e=dE.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+KF(t,["x","cx","x1"])||0,y:+KF(t,["y","cy","y1"])||0,width:0,height:0}:e},i8=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&n8(t))},Fu=function(t,e){if(e){var r=t.style,n;e in $l&&e!==ns&&(e=Gr),r.removeProperty?(n=e.substr(0,2),(n==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),r.removeProperty(n==="--"?e:e.replace(bI,"-$1").toLowerCase())):r.removeAttribute(e)}},KA=function(t,e,r,n,i,s){var a=new rs(t._pt,e,r,0,1,s?$H:qH);return t._pt=a,a.b=n,a.e=i,t._props.push(r),a},YF={deg:1,rad:1,turn:1},Dq={grid:1,flex:1},gc=function t(e,r,n,i){var s=parseFloat(n)||0,a=(n+"").trim().substr((s+"").length)||"px",o=cu.style,l=Bq.test(r),A=e.tagName.toLowerCase()==="svg",c=(A?"client":"offset")+(l?"Width":"Height"),u=100,h=i==="px",d=i==="%",f,m,g,p;if(i===a||!s||YF[i]||YF[a])return s;if(a!=="px"&&!h&&(s=t(e,r,n,"px")),p=e.getCTM&&i8(e),(d||a==="%")&&($l[r]||~r.indexOf("adius")))return f=p?e.getBBox()[l?"width":"height"]:e[c],un(d?s/f*u:s/100*f);if(o[l?"width":"height"]=u+(h?a:i),m=~r.indexOf("adius")||i==="em"&&e.appendChild&&!A?e:e.parentNode,p&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===WA||!m.appendChild)&&(m=WA.body),g=m._gsap,g&&d&&g.width&&l&&g.time===Es.time&&!g.uncache)return un(s/g.width*u);if(d&&(r==="height"||r==="width")){var v=e.style[r];e.style[r]=u+i,f=e[c],v?e.style[r]=v:Fu(e,r)}else(d||a==="%")&&!Dq[Wo(m,"display")]&&(o.position=Wo(e,"position")),m===e&&(o.position="static"),m.appendChild(cu),f=cu[c],m.removeChild(cu),o.position="absolute";return l&&d&&(g=vu(m),g.time=Es.time,g.width=m[c]),un(h?f*s/u:f&&s?u/f*s:0)},Fl=function(t,e,r,n){var i;return yI||zT(),e in Do&&e!=="transform"&&(e=Do[e],~e.indexOf(",")&&(e=e.split(",")[0])),$l[e]&&e!=="transform"?(i=Dg(t,n),i=e!=="transformOrigin"?i[e]:i.svg?i.origin:F1(Wo(t,ns))+" "+i.zOrigin+"px"):(i=t.style[e],(!i||i==="auto"||n||~(i+"").indexOf("calc("))&&(i=U1[e]&&U1[e](t,e,r)||Wo(t,e)||wH(t,e)||(e==="opacity"?1:0))),r&&!~(i+"").trim().indexOf(" ")?gc(t,e,i,r)+r:i},Nq=function(t,e,r,n){if(!r||r==="none"){var i=Cf(e,t,1),s=i&&Wo(t,i,1);s&&s!==r?(e=i,r=s):e==="borderColor"&&(r=Wo(t,"borderTopColor"))}var a=new rs(this._pt,t.style,e,0,1,XH),o=0,l=0,A,c,u,h,d,f,m,g,p,v,y,_;if(a.b=r,a.e=n,r+="",n+="",n==="auto"&&(f=t.style[e],t.style[e]=n,n=Wo(t,e)||n,f?t.style[e]=f:Fu(t,e)),A=[r,n],NH(A),r=A[0],n=A[1],u=r.match(Rd)||[],_=n.match(Rd)||[],_.length){for(;c=Rd.exec(n);)m=c[0],p=n.substring(o,c.index),d?d=(d+1)%5:(p.substr(-5)==="rgba("||p.substr(-5)==="hsla(")&&(d=1),m!==(f=u[l++]||"")&&(h=parseFloat(f)||0,y=f.substr((h+"").length),m.charAt(1)==="="&&(m=$d(h,m)+y),g=parseFloat(m),v=m.substr((g+"").length),o=Rd.lastIndex-v.length,v||(v=v||ks.units[e]||y,o===n.length&&(n+=v,a.e+=v)),y!==v&&(h=gc(t,e,f,v)||0),a._pt={_next:a._pt,p:p||l===1?p:",",s:h,c:g-h,m:d&&d<4||e==="zIndex"?Math.round:0});a.c=o<n.length?n.substring(o,n.length):""}else a.r=e==="display"&&n==="none"?$H:qH;return fH.test(n)&&(a.e=0),this._pt=a,a},XF={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Qq=function(t){var e=t.split(" "),r=e[0],n=e[1]||"50%";return(r==="top"||r==="bottom"||n==="left"||n==="right")&&(t=r,r=n,n=t),e[0]=XF[r]||r,e[1]=XF[n]||n,e.join(" ")},Hq=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r=e.t,n=r.style,i=e.u,s=r._gsap,a,o,l;if(i==="all"||i===!0)n.cssText="",o=1;else for(i=i.split(","),l=i.length;--l>-1;)a=i[l],$l[a]&&(o=1,a=a==="transformOrigin"?ns:Gr),Fu(r,a);o&&(Fu(r,Gr),s&&(s.svg&&r.removeAttribute("transform"),Dg(r,1),s.uncache=1,e8(n)))}},U1={clearProps:function(t,e,r,n,i){if(i.data!=="isFromStart"){var s=t._pt=new rs(t._pt,e,r,0,0,Hq);return s.u=n,s.pr=-10,s.tween=i,t._props.push(r),1}}},Og=[1,0,0,1,0,0],s8={},a8=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ZF=function(t){var e=Wo(t,Gr);return a8(e)?Og:e.substr(7).match(dH).map(un)},_I=function(t,e){var r=t._gsap||vu(t),n=t.style,i=ZF(t),s,a,o,l;return r.svg&&t.getAttribute("transform")?(o=t.transform.baseVal.consolidate().matrix,i=[o.a,o.b,o.c,o.d,o.e,o.f],i.join(",")==="1,0,0,1,0,0"?Og:i):(i===Og&&!t.offsetParent&&t!==ef&&!r.svg&&(o=n.display,n.display="block",s=t.parentNode,(!s||!t.offsetParent)&&(l=1,a=t.nextElementSibling,ef.appendChild(t)),i=ZF(t),o?n.display=o:Fu(t,"display"),l&&(a?s.insertBefore(t,a):s?s.appendChild(t):ef.removeChild(t))),e&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i)},GT=function(t,e,r,n,i,s){var a=t._gsap,o=i||_I(t,!0),l=a.xOrigin||0,A=a.yOrigin||0,c=a.xOffset||0,u=a.yOffset||0,h=o[0],d=o[1],f=o[2],m=o[3],g=o[4],p=o[5],v=e.split(" "),y=parseFloat(v[0])||0,_=parseFloat(v[1])||0,E,x,B,M;r?o!==Og&&(x=h*m-d*f)&&(B=y*(m/x)+_*(-f/x)+(f*p-m*g)/x,M=y*(-d/x)+_*(h/x)-(h*p-d*g)/x,y=B,_=M):(E=n8(t),y=E.x+(~v[0].indexOf("%")?y/100*E.width:y),_=E.y+(~(v[1]||v[0]).indexOf("%")?_/100*E.height:_)),n||n!==!1&&a.smooth?(g=y-l,p=_-A,a.xOffset=c+(g*h+p*f)-g,a.yOffset=u+(g*d+p*m)-p):a.xOffset=a.yOffset=0,a.xOrigin=y,a.yOrigin=_,a.smooth=!!n,a.origin=e,a.originIsAbsolute=!!r,t.style[ns]="0px 0px",s&&(KA(s,a,"xOrigin",l,y),KA(s,a,"yOrigin",A,_),KA(s,a,"xOffset",c,a.xOffset),KA(s,a,"yOffset",u,a.yOffset)),t.setAttribute("data-svg-origin",y+" "+_)},Dg=function(t,e){var r=t._gsap||new zH(t);if("x"in r&&!e&&!r.uncache)return r;var n=t.style,i=r.scaleX<0,s="px",a="deg",o=getComputedStyle(t),l=Wo(t,ns)||"0",A,c,u,h,d,f,m,g,p,v,y,_,E,x,B,M,R,I,L,D,w,b,S,F,k,Q,z,j,T,H,me,ee;return A=c=u=f=m=g=p=v=y=0,h=d=1,r.svg=!!(t.getCTM&&i8(t)),o.translate&&((o.translate!=="none"||o.scale!=="none"||o.rotate!=="none")&&(n[Gr]=(o.translate!=="none"?"translate3d("+(o.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(o.rotate!=="none"?"rotate("+o.rotate+") ":"")+(o.scale!=="none"?"scale("+o.scale.split(" ").join(",")+") ":"")+(o[Gr]!=="none"?o[Gr]:"")),n.scale=n.rotate=n.translate="none"),x=_I(t,r.svg),r.svg&&(r.uncache?(k=t.getBBox(),l=r.xOrigin-k.x+"px "+(r.yOrigin-k.y)+"px",F=""):F=!e&&t.getAttribute("data-svg-origin"),GT(t,F||l,!!F||r.originIsAbsolute,r.smooth!==!1,x)),_=r.xOrigin||0,E=r.yOrigin||0,x!==Og&&(I=x[0],L=x[1],D=x[2],w=x[3],A=b=x[4],c=S=x[5],x.length===6?(h=Math.sqrt(I*I+L*L),d=Math.sqrt(w*w+D*D),f=I||L?sh(L,I)*eu:0,p=D||w?sh(D,w)*eu+f:0,p&&(d*=Math.abs(Math.cos(p*tf))),r.svg&&(A-=_-(_*I+E*D),c-=E-(_*L+E*w))):(ee=x[6],H=x[7],z=x[8],j=x[9],T=x[10],me=x[11],A=x[12],c=x[13],u=x[14],B=sh(ee,T),m=B*eu,B&&(M=Math.cos(-B),R=Math.sin(-B),F=b*M+z*R,k=S*M+j*R,Q=ee*M+T*R,z=b*-R+z*M,j=S*-R+j*M,T=ee*-R+T*M,me=H*-R+me*M,b=F,S=k,ee=Q),B=sh(-D,T),g=B*eu,B&&(M=Math.cos(-B),R=Math.sin(-B),F=I*M-z*R,k=L*M-j*R,Q=D*M-T*R,me=w*R+me*M,I=F,L=k,D=Q),B=sh(L,I),f=B*eu,B&&(M=Math.cos(B),R=Math.sin(B),F=I*M+L*R,k=b*M+S*R,L=L*M-I*R,S=S*M-b*R,I=F,b=k),m&&Math.abs(m)+Math.abs(f)>359.9&&(m=f=0,g=180-g),h=un(Math.sqrt(I*I+L*L+D*D)),d=un(Math.sqrt(S*S+ee*ee)),B=sh(b,S),p=Math.abs(B)>2e-4?B*eu:0,y=me?1/(me<0?-me:me):0),r.svg&&(F=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!a8(Wo(t,Gr)),F&&t.setAttribute("transform",F))),Math.abs(p)>90&&Math.abs(p)<270&&(i?(h*=-1,p+=f<=0?180:-180,f+=f<=0?180:-180):(d*=-1,p+=p<=0?180:-180)),e=e||r.uncache,r.x=A-((r.xPercent=A&&(!e&&r.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-A)?-50:0)))?t.offsetWidth*r.xPercent/100:0)+s,r.y=c-((r.yPercent=c&&(!e&&r.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-c)?-50:0)))?t.offsetHeight*r.yPercent/100:0)+s,r.z=u+s,r.scaleX=un(h),r.scaleY=un(d),r.rotation=un(f)+a,r.rotationX=un(m)+a,r.rotationY=un(g)+a,r.skewX=p+a,r.skewY=v+a,r.transformPerspective=y+s,(r.zOrigin=parseFloat(l.split(" ")[2])||!e&&r.zOrigin||0)&&(n[ns]=F1(l)),r.xOffset=r.yOffset=0,r.force3D=ks.force3D,r.renderTransform=r.svg?zq:r8?o8:jq,r.uncache=0,r},F1=function(t){return(t=t.split(" "))[0]+" "+t[1]},fE=function(t,e,r){var n=fi(e);return un(parseFloat(e)+parseFloat(gc(t,"x",r+"px",n)))+n},jq=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,o8(t,e)},Lc="0deg",Cp="0px",Pc=") ",o8=function(t,e){var r=e||this,n=r.xPercent,i=r.yPercent,s=r.x,a=r.y,o=r.z,l=r.rotation,A=r.rotationY,c=r.rotationX,u=r.skewX,h=r.skewY,d=r.scaleX,f=r.scaleY,m=r.transformPerspective,g=r.force3D,p=r.target,v=r.zOrigin,y="",_=g==="auto"&&t&&t!==1||g===!0;if(v&&(c!==Lc||A!==Lc)){var E=parseFloat(A)*tf,x=Math.sin(E),B=Math.cos(E),M;E=parseFloat(c)*tf,M=Math.cos(E),s=fE(p,s,x*M*-v),a=fE(p,a,-Math.sin(E)*-v),o=fE(p,o,B*M*-v+v)}m!==Cp&&(y+="perspective("+m+Pc),(n||i)&&(y+="translate("+n+"%, "+i+"%) "),(_||s!==Cp||a!==Cp||o!==Cp)&&(y+=o!==Cp||_?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+Pc),l!==Lc&&(y+="rotate("+l+Pc),A!==Lc&&(y+="rotateY("+A+Pc),c!==Lc&&(y+="rotateX("+c+Pc),(u!==Lc||h!==Lc)&&(y+="skew("+u+", "+h+Pc),(d!==1||f!==1)&&(y+="scale("+d+", "+f+Pc),p.style[Gr]=y||"translate(0, 0)"},zq=function(t,e){var r=e||this,n=r.xPercent,i=r.yPercent,s=r.x,a=r.y,o=r.rotation,l=r.skewX,A=r.skewY,c=r.scaleX,u=r.scaleY,h=r.target,d=r.xOrigin,f=r.yOrigin,m=r.xOffset,g=r.yOffset,p=r.forceCSS,v=parseFloat(s),y=parseFloat(a),_,E,x,B,M;o=parseFloat(o),l=parseFloat(l),A=parseFloat(A),A&&(A=parseFloat(A),l+=A,o+=A),o||l?(o*=tf,l*=tf,_=Math.cos(o)*c,E=Math.sin(o)*c,x=Math.sin(o-l)*-u,B=Math.cos(o-l)*u,l&&(A*=tf,M=Math.tan(l-A),M=Math.sqrt(1+M*M),x*=M,B*=M,A&&(M=Math.tan(A),M=Math.sqrt(1+M*M),_*=M,E*=M)),_=un(_),E=un(E),x=un(x),B=un(B)):(_=c,B=u,E=x=0),(v&&!~(s+"").indexOf("px")||y&&!~(a+"").indexOf("px"))&&(v=gc(h,"x",s,"px"),y=gc(h,"y",a,"px")),(d||f||m||g)&&(v=un(v+d-(d*_+f*x)+m),y=un(y+f-(d*E+f*B)+g)),(n||i)&&(M=h.getBBox(),v=un(v+n/100*M.width),y=un(y+i/100*M.height)),M="matrix("+_+","+E+","+x+","+B+","+v+","+y+")",h.setAttribute("transform",M),p&&(h.style[Gr]=M)},Gq=function(t,e,r,n,i){var s=360,a=Kn(i),o=parseFloat(i)*(a&&~i.indexOf("rad")?eu:1),l=o-n,A=n+l+"deg",c,u;return a&&(c=i.split("_")[1],c==="short"&&(l%=s,l!==l%(s/2)&&(l+=l<0?s:-s)),c==="cw"&&l<0?l=(l+s*VF)%s-~~(l/s)*s:c==="ccw"&&l>0&&(l=(l-s*VF)%s-~~(l/s)*s)),t._pt=u=new rs(t._pt,e,r,n,l,Tq),u.e=A,u.u="deg",t._props.push(r),u},JF=function(t,e){for(var r in e)t[r]=e[r];return t},Vq=function(t,e,r){var n=JF({},r._gsap),i="perspective,force3D,transformOrigin,svgOrigin",s=r.style,a,o,l,A,c,u,h,d;n.svg?(l=r.getAttribute("transform"),r.setAttribute("transform",""),s[Gr]=e,a=Dg(r,1),Fu(r,Gr),r.setAttribute("transform",l)):(l=getComputedStyle(r)[Gr],s[Gr]=e,a=Dg(r,1),s[Gr]=l);for(o in $l)l=n[o],A=a[o],l!==A&&i.indexOf(o)<0&&(h=fi(l),d=fi(A),c=h!==d?gc(r,o,l,d):parseFloat(l),u=parseFloat(A),t._pt=new rs(t._pt,a,o,c,u-c,HT),t._pt.u=d||0,t._props.push(o));JF(a,n)};ts("padding,margin,Width,Radius",function(t,e){var r="Top",n="Right",i="Bottom",s="Left",a=(e<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map(function(o){return e<2?t+o:"border"+o+t});U1[e>1?"border"+t:t]=function(o,l,A,c,u){var h,d;if(arguments.length<4)return h=a.map(function(f){return Fl(o,f,A)}),d=h.join(" "),d.split(h[0]).length===5?h[0]:d;h=(c+"").split(" "),d={},a.forEach(function(f,m){return d[f]=h[m]=h[m]||h[(m-1)/2|0]}),o.init(l,d,u)}});var l8={name:"css",register:zT,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,n,i){var s=this._props,a=t.style,o=r.vars.startAt,l,A,c,u,h,d,f,m,g,p,v,y,_,E,x,B;yI||zT(),this.styles=this.styles||t8(t),B=this.styles.props,this.tween=r;for(f in e)if(f!=="autoRound"&&(A=e[f],!(xs[f]&&GH(f,e,r,n,t,i)))){if(h=typeof A,d=U1[f],h==="function"&&(A=A.call(r,n,t,i),h=typeof A),h==="string"&&~A.indexOf("random(")&&(A=kg(A)),d)d(this,t,f,A,r)&&(x=1);else if(f.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(f)+"").trim(),A+="",Ac.lastIndex=0,Ac.test(l)||(m=fi(l),g=fi(A)),g?m!==g&&(l=gc(t,f,l,g)+g):m&&(A+=m),this.add(a,"setProperty",l,A,n,i,0,0,f),s.push(f),B.push(f,0,a[f]);else if(h!=="undefined"){if(o&&f in o?(l=typeof o[f]=="function"?o[f].call(r,n,t,i):o[f],Kn(l)&&~l.indexOf("random(")&&(l=kg(l)),fi(l+"")||l==="auto"||(l+=ks.units[f]||fi(Fl(t,f))||""),(l+"").charAt(1)==="="&&(l=Fl(t,f))):l=Fl(t,f),u=parseFloat(l),p=h==="string"&&A.charAt(1)==="="&&A.substr(0,2),p&&(A=A.substr(2)),c=parseFloat(A),f in Do&&(f==="autoAlpha"&&(u===1&&Fl(t,"visibility")==="hidden"&&c&&(u=0),B.push("visibility",0,a.visibility),KA(this,a,"visibility",u?"inherit":"hidden",c?"inherit":"hidden",!c)),f!=="scale"&&f!=="transform"&&(f=Do[f],~f.indexOf(",")&&(f=f.split(",")[0]))),v=f in $l,v){if(this.styles.save(f),y||(_=t._gsap,_.renderTransform&&!e.parseTransform||Dg(t,e.parseTransform),E=e.smoothOrigin!==!1&&_.smooth,y=this._pt=new rs(this._pt,a,Gr,0,1,_.renderTransform,_,0,-1),y.dep=1),f==="scale")this._pt=new rs(this._pt,_,"scaleY",_.scaleY,(p?$d(_.scaleY,p+c):c)-_.scaleY||0,HT),this._pt.u=0,s.push("scaleY",f),f+="X";else if(f==="transformOrigin"){B.push(ns,0,a[ns]),A=Qq(A),_.svg?GT(t,A,0,E,0,this):(g=parseFloat(A.split(" ")[2])||0,g!==_.zOrigin&&KA(this,_,"zOrigin",_.zOrigin,g),KA(this,a,f,F1(l),F1(A)));continue}else if(f==="svgOrigin"){GT(t,A,1,E,0,this);continue}else if(f in s8){Gq(this,_,f,u,p?$d(u,p+A):A);continue}else if(f==="smoothOrigin"){KA(this,_,"smooth",_.smooth,A);continue}else if(f==="force3D"){_[f]=A;continue}else if(f==="transform"){Vq(this,A,t);continue}}else f in a||(f=Cf(f)||f);if(v||(c||c===0)&&(u||u===0)&&!Mq.test(A)&&f in a)m=(l+"").substr((u+"").length),c||(c=0),g=fi(A)||(f in ks.units?ks.units[f]:m),m!==g&&(u=gc(t,f,l,g)),this._pt=new rs(this._pt,v?_:a,f,u,(p?$d(u,p+c):c)-u,!v&&(g==="px"||f==="zIndex")&&e.autoRound!==!1?Sq:HT),this._pt.u=g||0,m!==g&&g!=="%"&&(this._pt.b=l,this._pt.r=Cq);else if(f in a)Nq.call(this,t,f,l,p?p+A:A);else if(f in t)this.add(t,f,l||t[f],p?p+A:A,n,i);else if(f!=="parseTransform"){cI(f,A);continue}v||(f in a?B.push(f,0,a[f]):B.push(f,1,l||t[f])),s.push(f)}}x&&ZH(this)},render:function(t,e){if(e.tween._time||!wI())for(var r=e._pt;r;)r.r(t,r.d),r=r._next;else e.styles.revert()},get:Fl,aliases:Do,getSetter:function(t,e,r){var n=Do[e];return n&&n.indexOf(",")<0&&(e=n),e in $l&&e!==ns&&(t._gsap.x||Fl(t,"x"))?r&&GF===r?e==="scale"?Fq:Uq:(GF=r||{})&&(e==="scale"?kq:Lq):t.style&&!oI(t.style[e])?Iq:~e.indexOf("-")?Rq:gI(t,e)},core:{_removeProperty:Fu,_getMatrix:_I}};os.utils.checkPrefix=Cf;os.core.getStyleSaver=t8;(function(t,e,r,n){var i=ts(t+","+e+","+r,function(s){$l[s]=1});ts(e,function(s){ks.units[s]="deg",s8[s]=1}),Do[i[13]]=t+","+e,ts(n,function(s){var a=s.split(":");Do[a[1]]=i[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ts("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){ks.units[t]="px"});os.registerPlugin(l8);var VT=os.registerPlugin(l8)||os;VT.core.Tween;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const eA="169",rf={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Fd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Wq=0,qF=1,Kq=2,A8=1,Yq=2,xl=3,Ns=0,ti=1,pi=2,zl=0,nf=1,ku=2,$F=3,ek=4,Xq=5,su=100,Zq=101,Jq=102,qq=103,$q=104,e$=200,t$=201,r$=202,n$=203,WT=204,KT=205,i$=206,s$=207,a$=208,o$=209,l$=210,A$=211,c$=212,u$=213,h$=214,YT=0,XT=1,ZT=2,Sf=3,JT=4,qT=5,$T=6,eC=7,l_=0,d$=1,f$=2,cc=0,p$=1,m$=2,g$=3,v$=4,y$=5,w$=6,b$=7,tk="attached",_$="detached",c8=300,If=301,Rf=302,Ng=303,tC=304,A_=306,Qs=1e3,Ss=1001,Qg=1002,Vn=1003,xI=1004,kd=1005,Un=1006,$m=1007,qa=1008,tA=1009,u8=1010,h8=1011,Hg=1012,EI=1013,vc=1014,mi=1015,No=1016,BI=1017,MI=1018,Uf=1020,d8=35902,f8=1021,p8=1022,kn=1023,m8=1024,g8=1025,sf=1026,Ff=1027,TI=1028,c_=1029,v8=1030,CI=1031,SI=1033,_w=33776,xw=33777,Ew=33778,Bw=33779,rC=35840,nC=35841,iC=35842,sC=35843,aC=36196,oC=37492,lC=37496,AC=37808,cC=37809,uC=37810,hC=37811,dC=37812,fC=37813,pC=37814,mC=37815,gC=37816,vC=37817,yC=37818,wC=37819,bC=37820,_C=37821,Mw=36492,xC=36494,EC=36495,y8=36283,BC=36284,MC=36285,TC=36286,x$=2200,E$=2201,B$=2202,kf=2300,Lf=2301,pE=2302,Ld=2400,Pd=2401,k1=2402,II=2500,M$=2501,T$=0,w8=1,CC=2,C$=3200,S$=3201,Kf=0,I$=1,Fo="",Ut="srgb",Bn="srgb-linear",RI="display-p3",u_="display-p3-linear",L1="linear",Er="srgb",P1="rec709",O1="p3",ah=7680,rk=519,R$=512,U$=513,F$=514,b8=515,k$=516,L$=517,P$=518,O$=519,SC=35044,D$=35048,nk="300 es",Ql=2e3,D1=2001;class Ic{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(r)===-1&&n[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;const n=this._listeners[e];if(n!==void 0){const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const n=r.slice(0);for(let i=0,s=n.length;i<s;i++)n[i].call(this,e);e.target=null}}}const oi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ik=1234567;const eg=Math.PI/180,Pf=180/Math.PI;function ro(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(oi[t&255]+oi[t>>8&255]+oi[t>>16&255]+oi[t>>24&255]+"-"+oi[e&255]+oi[e>>8&255]+"-"+oi[e>>16&15|64]+oi[e>>24&255]+"-"+oi[r&63|128]+oi[r>>8&255]+"-"+oi[r>>16&255]+oi[r>>24&255]+oi[n&255]+oi[n>>8&255]+oi[n>>16&255]+oi[n>>24&255]).toLowerCase()}function dn(t,e,r){return Math.max(e,Math.min(r,t))}function UI(t,e){return(t%e+e)%e}function N$(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)}function Q$(t,e,r){return t!==e?(r-t)/(e-t):0}function tg(t,e,r){return(1-r)*t+r*e}function H$(t,e,r,n){return tg(t,e,1-Math.exp(-r*n))}function j$(t,e=1){return e-Math.abs(UI(t,e*2)-e)}function z$(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*(3-2*t))}function G$(t,e,r){return t<=e?0:t>=r?1:(t=(t-e)/(r-e),t*t*t*(t*(t*6-15)+10))}function V$(t,e){return t+Math.floor(Math.random()*(e-t+1))}function W$(t,e){return t+Math.random()*(e-t)}function K$(t){return t*(.5-Math.random())}function Y$(t){t!==void 0&&(ik=t);let e=ik+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function X$(t){return t*eg}function Z$(t){return t*Pf}function J$(t){return(t&t-1)===0&&t!==0}function q$(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function $$(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function eee(t,e,r,n,i){const s=Math.cos,a=Math.sin,o=s(r/2),l=a(r/2),A=s((e+n)/2),c=a((e+n)/2),u=s((e-n)/2),h=a((e-n)/2),d=s((n-e)/2),f=a((n-e)/2);switch(i){case"XYX":t.set(o*c,l*u,l*h,o*A);break;case"YZY":t.set(l*h,o*c,l*u,o*A);break;case"ZXZ":t.set(l*u,l*h,o*c,o*A);break;case"XZX":t.set(o*c,l*f,l*d,o*A);break;case"YXY":t.set(l*d,o*c,l*f,o*A);break;case"ZYZ":t.set(l*f,l*d,o*c,o*A);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Xa(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function lr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Et={DEG2RAD:eg,RAD2DEG:Pf,generateUUID:ro,clamp:dn,euclideanModulo:UI,mapLinear:N$,inverseLerp:Q$,lerp:tg,damp:H$,pingpong:j$,smoothstep:z$,smootherstep:G$,randInt:V$,randFloat:W$,randFloatSpread:K$,seededRandom:Y$,degToRad:X$,radToDeg:Z$,isPowerOfTwo:J$,ceilPowerOfTwo:q$,floorPowerOfTwo:$$,setQuaternionFromProperEuler:eee,normalize:lr,denormalize:Xa};class Ke{constructor(e=0,r=0){Ke.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,n=this.y,i=e.elements;return this.x=i[0]*r+i[3]*n+i[6],this.y=i[1]*r+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(e)/r;return Math.acos(dn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,n=this.y-e.y;return r*r+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const n=Math.cos(r),i=Math.sin(r),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*i+e.x,this.y=s*i+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class dt{constructor(e,r,n,i,s,a,o,l,A){dt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,n,i,s,a,o,l,A)}set(e,r,n,i,s,a,o,l,A){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=r,c[4]=s,c[5]=l,c[6]=n,c[7]=a,c[8]=A,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],this}extractBasis(e,r,n){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const n=e.elements,i=r.elements,s=this.elements,a=n[0],o=n[3],l=n[6],A=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],m=i[0],g=i[3],p=i[6],v=i[1],y=i[4],_=i[7],E=i[2],x=i[5],B=i[8];return s[0]=a*m+o*v+l*E,s[3]=a*g+o*y+l*x,s[6]=a*p+o*_+l*B,s[1]=A*m+c*v+u*E,s[4]=A*g+c*y+u*x,s[7]=A*p+c*_+u*B,s[2]=h*m+d*v+f*E,s[5]=h*g+d*y+f*x,s[8]=h*p+d*_+f*B,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],A=e[7],c=e[8];return r*a*c-r*o*A-n*s*c+n*o*l+i*s*A-i*a*l}invert(){const e=this.elements,r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],A=e[7],c=e[8],u=c*a-o*A,h=o*l-c*s,d=A*s-a*l,f=r*u+n*h+i*d;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/f;return e[0]=u*m,e[1]=(i*A-c*n)*m,e[2]=(o*n-i*a)*m,e[3]=h*m,e[4]=(c*r-i*l)*m,e[5]=(i*s-o*r)*m,e[6]=d*m,e[7]=(n*l-A*r)*m,e[8]=(a*r-n*s)*m,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,n,i,s,a,o){const l=Math.cos(s),A=Math.sin(s);return this.set(n*l,n*A,-n*(l*a+A*o)+a+e,-i*A,i*l,-i*(-A*a+l*o)+o+r,0,0,1),this}scale(e,r){return this.premultiply(mE.makeScale(e,r)),this}rotate(e){return this.premultiply(mE.makeRotation(-e)),this}translate(e,r){return this.premultiply(mE.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,n,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,n=e.elements;for(let i=0;i<9;i++)if(r[i]!==n[i])return!1;return!0}fromArray(e,r=0){for(let n=0;n<9;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){const n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const mE=new dt;function _8(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function jg(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function tee(){const t=jg("canvas");return t.style.display="block",t}const sk={};function Tw(t){t in sk||(sk[t]=!0,console.warn(t))}function ree(t,e,r){return new Promise(function(n,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,r);break;default:n()}}setTimeout(s,r)})}function nee(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function iee(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const ak=new dt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),ok=new dt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Sp={[Bn]:{transfer:L1,primaries:P1,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t,fromReference:t=>t},[Ut]:{transfer:Er,primaries:P1,luminanceCoefficients:[.2126,.7152,.0722],toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[u_]:{transfer:L1,primaries:O1,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.applyMatrix3(ok),fromReference:t=>t.applyMatrix3(ak)},[RI]:{transfer:Er,primaries:O1,luminanceCoefficients:[.2289,.6917,.0793],toReference:t=>t.convertSRGBToLinear().applyMatrix3(ok),fromReference:t=>t.applyMatrix3(ak).convertLinearToSRGB()}},see=new Set([Bn,u_]),xt={enabled:!0,_workingColorSpace:Bn,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!see.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,r){if(this.enabled===!1||e===r||!e||!r)return t;const n=Sp[e].toReference,i=Sp[r].fromReference;return i(n(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return Sp[t].primaries},getTransfer:function(t){return t===Fo?L1:Sp[t].transfer},getLuminanceCoefficients:function(t,e=this._workingColorSpace){return t.fromArray(Sp[e].luminanceCoefficients)}};function af(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function gE(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let oh;class aee{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{oh===void 0&&(oh=jg("canvas")),oh.width=e.width,oh.height=e.height;const n=oh.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),r=oh}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const r=jg("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let a=0;a<s.length;a++)s[a]=af(s[a]/255)*255;return n.putImageData(i,0,0),r}else if(e.data){const r=e.data.slice(0);for(let n=0;n<r.length;n++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[n]=Math.floor(af(r[n]/255)*255):r[n]=af(r[n]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let oee=0;class FI{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:oee++}),this.uuid=ro(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let a=0,o=i.length;a<o;a++)i[a].isDataTexture?s.push(vE(i[a].image)):s.push(vE(i[a]))}else s=vE(i);n.url=s}return r||(e.images[this.uuid]=n),n}}function vE(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?aee.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let lee=0;class Sr extends Ic{constructor(e=Sr.DEFAULT_IMAGE,r=Sr.DEFAULT_MAPPING,n=Ss,i=Ss,s=Un,a=qa,o=kn,l=tA,A=Sr.DEFAULT_ANISOTROPY,c=Fo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:lee++}),this.uuid=ro(),this.name="",this.source=new FI(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=a,this.anisotropy=A,this.format=o,this.internalFormat=null,this.type=l,this.offset=new Ke(0,0),this.repeat=new Ke(1,1),this.center=new Ke(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),r||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==c8)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qs:e.x=e.x-Math.floor(e.x);break;case Ss:e.x=e.x<0?0:1;break;case Qg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Qs:e.y=e.y-Math.floor(e.y);break;case Ss:e.y=e.y<0?0:1;break;case Qg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Sr.DEFAULT_IMAGE=null;Sr.DEFAULT_MAPPING=c8;Sr.DEFAULT_ANISOTROPY=1;class kt{constructor(e=0,r=0,n=0,i=1){kt.prototype.isVector4=!0,this.x=e,this.y=r,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,n,i){return this.x=e,this.y=r,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,n=this.y,i=this.z,s=this.w,a=e.elements;return this.x=a[0]*r+a[4]*n+a[8]*i+a[12]*s,this.y=a[1]*r+a[5]*n+a[9]*i+a[13]*s,this.z=a[2]*r+a[6]*n+a[10]*i+a[14]*s,this.w=a[3]*r+a[7]*n+a[11]*i+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,n,i,s;const a=e.elements,o=a[0],l=a[4],A=a[8],c=a[1],u=a[5],h=a[9],d=a[2],f=a[6],m=a[10];if(Math.abs(l-c)<.01&&Math.abs(A-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(l+c)<.1&&Math.abs(A+d)<.1&&Math.abs(h+f)<.1&&Math.abs(o+u+m-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const p=(o+1)/2,v=(u+1)/2,y=(m+1)/2,_=(l+c)/4,E=(A+d)/4,x=(h+f)/4;return p>v&&p>y?p<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(p),i=_/n,s=E/n):v>y?v<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(v),n=_/i,s=x/i):y<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(y),n=E/s,i=x/s),this.set(n,i,s,r),this}let g=Math.sqrt((f-h)*(f-h)+(A-d)*(A-d)+(c-l)*(c-l));return Math.abs(g)<.001&&(g=1),this.x=(f-h)/g,this.y=(A-d)/g,this.z=(c-l)/g,this.w=Math.acos((o+u+m-1)/2),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this.w=Math.max(e.w,Math.min(r.w,this.w)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this.w=Math.max(e,Math.min(r,this.w)),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this.w=e.w+(r.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Aee extends Ic{constructor(e=1,r=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=1,this.scissor=new kt(0,0,e,r),this.scissorTest=!1,this.viewport=new kt(0,0,e,r);const i={width:e,height:r,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Un,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Sr(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,r,n=1){if(this.width!==e||this.height!==r||this.depth!==n){this.width=e,this.height=r,this.depth=n;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=r,this.textures[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const r=Object.assign({},e.texture.image);return this.texture.source=new FI(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class $o extends Aee{constructor(e=1,r=1,n={}){super(e,r,n),this.isWebGLRenderTarget=!0}}class x8 extends Sr{constructor(e=null,r=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=Ss,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class cee extends Sr{constructor(e=null,r=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:n,depth:i},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=Ss,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class et{constructor(e=0,r=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=n,this._w=i}static slerpFlat(e,r,n,i,s,a,o){let l=n[i+0],A=n[i+1],c=n[i+2],u=n[i+3];const h=s[a+0],d=s[a+1],f=s[a+2],m=s[a+3];if(o===0){e[r+0]=l,e[r+1]=A,e[r+2]=c,e[r+3]=u;return}if(o===1){e[r+0]=h,e[r+1]=d,e[r+2]=f,e[r+3]=m;return}if(u!==m||l!==h||A!==d||c!==f){let g=1-o;const p=l*h+A*d+c*f+u*m,v=p>=0?1:-1,y=1-p*p;if(y>Number.EPSILON){const E=Math.sqrt(y),x=Math.atan2(E,p*v);g=Math.sin(g*x)/E,o=Math.sin(o*x)/E}const _=o*v;if(l=l*g+h*_,A=A*g+d*_,c=c*g+f*_,u=u*g+m*_,g===1-o){const E=1/Math.sqrt(l*l+A*A+c*c+u*u);l*=E,A*=E,c*=E,u*=E}}e[r]=l,e[r+1]=A,e[r+2]=c,e[r+3]=u}static multiplyQuaternionsFlat(e,r,n,i,s,a){const o=n[i],l=n[i+1],A=n[i+2],c=n[i+3],u=s[a],h=s[a+1],d=s[a+2],f=s[a+3];return e[r]=o*f+c*u+l*d-A*h,e[r+1]=l*f+c*h+A*u-o*d,e[r+2]=A*f+c*d+o*h-l*u,e[r+3]=c*f-o*u-l*h-A*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,n,i){return this._x=e,this._y=r,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const n=e._x,i=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,A=o(n/2),c=o(i/2),u=o(s/2),h=l(n/2),d=l(i/2),f=l(s/2);switch(a){case"XYZ":this._x=h*c*u+A*d*f,this._y=A*d*u-h*c*f,this._z=A*c*f+h*d*u,this._w=A*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+A*d*f,this._y=A*d*u-h*c*f,this._z=A*c*f-h*d*u,this._w=A*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-A*d*f,this._y=A*d*u+h*c*f,this._z=A*c*f+h*d*u,this._w=A*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-A*d*f,this._y=A*d*u+h*c*f,this._z=A*c*f-h*d*u,this._w=A*c*u+h*d*f;break;case"YZX":this._x=h*c*u+A*d*f,this._y=A*d*u+h*c*f,this._z=A*c*f-h*d*u,this._w=A*c*u-h*d*f;break;case"XZY":this._x=h*c*u-A*d*f,this._y=A*d*u-h*c*f,this._z=A*c*f+h*d*u,this._w=A*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const n=r/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,n=r[0],i=r[4],s=r[8],a=r[1],o=r[5],l=r[9],A=r[2],c=r[6],u=r[10],h=n+o+u;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(c-l)*d,this._y=(s-A)*d,this._z=(a-i)*d}else if(n>o&&n>u){const d=2*Math.sqrt(1+n-o-u);this._w=(c-l)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(s+A)/d}else if(o>u){const d=2*Math.sqrt(1+o-n-u);this._w=(s-A)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+u-n-o);this._w=(a-i)/d,this._x=(s+A)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let n=e.dot(r)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(dn(this.dot(e),-1,1)))}rotateTowards(e,r){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,r/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const n=e._x,i=e._y,s=e._z,a=e._w,o=r._x,l=r._y,A=r._z,c=r._w;return this._x=n*c+a*o+i*A-s*l,this._y=i*c+a*l+s*o-n*A,this._z=s*c+a*A+n*l-i*o,this._w=a*c-n*o-i*l-s*A,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+i*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const d=1-r;return this._w=d*a+r*this._w,this._x=d*n+r*this._x,this._y=d*i+r*this._y,this._z=d*s+r*this._z,this.normalize(),this}const A=Math.sqrt(l),c=Math.atan2(A,o),u=Math.sin((1-r)*c)/A,h=Math.sin(r*c)/A;return this._w=a*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,r,n){return this.copy(e).slerp(r,n)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(r),s*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Y{constructor(e=0,r=0,n=0){Y.prototype.isVector3=!0,this.x=e,this.y=r,this.z=n}set(e,r,n){return n===void 0&&(n=this.z),this.x=e,this.y=r,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(lk.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(lk.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*r+s[3]*n+s[6]*i,this.y=s[1]*r+s[4]*n+s[7]*i,this.z=s[2]*r+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,n=this.y,i=this.z,s=e.elements,a=1/(s[3]*r+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*r+s[4]*n+s[8]*i+s[12])*a,this.y=(s[1]*r+s[5]*n+s[9]*i+s[13])*a,this.z=(s[2]*r+s[6]*n+s[10]*i+s[14])*a,this}applyQuaternion(e){const r=this.x,n=this.y,i=this.z,s=e.x,a=e.y,o=e.z,l=e.w,A=2*(a*i-o*n),c=2*(o*r-s*i),u=2*(s*n-a*r);return this.x=r+l*A+a*u-o*c,this.y=n+l*c+o*A-s*u,this.z=i+l*u+s*c-a*A,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*r+s[4]*n+s[8]*i,this.y=s[1]*r+s[5]*n+s[9]*i,this.z=s[2]*r+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=Math.max(e.x,Math.min(r.x,this.x)),this.y=Math.max(e.y,Math.min(r.y,this.y)),this.z=Math.max(e.z,Math.min(r.z,this.z)),this}clampScalar(e,r){return this.x=Math.max(e,Math.min(r,this.x)),this.y=Math.max(e,Math.min(r,this.y)),this.z=Math.max(e,Math.min(r,this.z)),this}clampLength(e,r){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(r,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,n){return this.x=e.x+(r.x-e.x)*n,this.y=e.y+(r.y-e.y)*n,this.z=e.z+(r.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const n=e.x,i=e.y,s=e.z,a=r.x,o=r.y,l=r.z;return this.x=i*l-s*o,this.y=s*a-n*l,this.z=n*o-i*a,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const n=e.dot(this)/r;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return yE.copy(this).projectOnVector(e),this.sub(yE)}reflect(e){return this.sub(yE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const n=this.dot(e)/r;return Math.acos(dn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return r*r+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,n){const i=Math.sin(r)*e;return this.x=i*Math.sin(n),this.y=Math.cos(r)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,n){return this.x=e*Math.sin(r),this.y=n,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=n,this.z=i,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,n=Math.sqrt(1-r*r);return this.x=n*Math.cos(e),this.y=r,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const yE=new Y,lk=new et;class Dr{constructor(e=new Y(1/0,1/0,1/0),r=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r+=3)this.expandByPoint(Fa.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,n=e.count;r<n;r++)this.expandByPoint(Fa.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,n=e.length;r<n;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const n=Fa.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(r===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Fa):Fa.fromBufferAttribute(s,a),Fa.applyMatrix4(e.matrixWorld),this.expandByPoint(Fa);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),hv.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),hv.copy(n.boundingBox)),hv.applyMatrix4(e.matrixWorld),this.union(hv)}const i=e.children;for(let s=0,a=i.length;s<a;s++)this.expandByObject(i[s],r);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Fa),Fa.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,n;return e.normal.x>0?(r=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),r<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ip),dv.subVectors(this.max,Ip),lh.subVectors(e.a,Ip),Ah.subVectors(e.b,Ip),ch.subVectors(e.c,Ip),gA.subVectors(Ah,lh),vA.subVectors(ch,Ah),Oc.subVectors(lh,ch);let r=[0,-gA.z,gA.y,0,-vA.z,vA.y,0,-Oc.z,Oc.y,gA.z,0,-gA.x,vA.z,0,-vA.x,Oc.z,0,-Oc.x,-gA.y,gA.x,0,-vA.y,vA.x,0,-Oc.y,Oc.x,0];return!wE(r,lh,Ah,ch,dv)||(r=[1,0,0,0,1,0,0,0,1],!wE(r,lh,Ah,ch,dv))?!1:(fv.crossVectors(gA,vA),r=[fv.x,fv.y,fv.z],wE(r,lh,Ah,ch,dv))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Fa).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Fa).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(cl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),cl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),cl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),cl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),cl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),cl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),cl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),cl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(cl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const cl=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Fa=new Y,hv=new Dr,lh=new Y,Ah=new Y,ch=new Y,gA=new Y,vA=new Y,Oc=new Y,Ip=new Y,dv=new Y,fv=new Y,Dc=new Y;function wE(t,e,r,n,i){for(let s=0,a=t.length-3;s<=a;s+=3){Dc.fromArray(t,s);const o=i.x*Math.abs(Dc.x)+i.y*Math.abs(Dc.y)+i.z*Math.abs(Dc.z),l=e.dot(Dc),A=r.dot(Dc),c=n.dot(Dc);if(Math.max(-Math.max(l,A,c),Math.min(l,A,c))>o)return!1}return!0}const uee=new Dr,Rp=new Y,bE=new Y;class wi{constructor(e=new Y,r=-1){this.isSphere=!0,this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const n=this.center;r!==void 0?n.copy(r):uee.setFromPoints(e).getCenter(n);let i=0;for(let s=0,a=e.length;s<a;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const n=this.center.distanceToSquared(e);return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Rp.subVectors(e,this.center);const r=Rp.lengthSq();if(r>this.radius*this.radius){const n=Math.sqrt(r),i=(n-this.radius)*.5;this.center.addScaledVector(Rp,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Rp.copy(e.center).add(bE)),this.expandByPoint(Rp.copy(e.center).sub(bE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ul=new Y,_E=new Y,pv=new Y,yA=new Y,xE=new Y,mv=new Y,EE=new Y;class Yu{constructor(e=new Y,r=new Y(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ul)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=ul.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(ul.copy(this.origin).addScaledVector(this.direction,r),ul.distanceToSquared(e))}distanceSqToSegment(e,r,n,i){_E.copy(e).add(r).multiplyScalar(.5),pv.copy(r).sub(e).normalize(),yA.copy(this.origin).sub(_E);const s=e.distanceTo(r)*.5,a=-this.direction.dot(pv),o=yA.dot(this.direction),l=-yA.dot(pv),A=yA.lengthSq(),c=Math.abs(1-a*a);let u,h,d,f;if(c>0)if(u=a*l-o,h=a*o-l,f=s*c,u>=0)if(h>=-f)if(h<=f){const m=1/c;u*=m,h*=m,d=u*(u+a*h+2*o)+h*(a*u+h+2*l)+A}else h=s,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*l)+A;else h=-s,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*l)+A;else h<=-f?(u=Math.max(0,-(-a*s+o)),h=u>0?-s:Math.min(Math.max(-s,-l),s),d=-u*u+h*(h+2*l)+A):h<=f?(u=0,h=Math.min(Math.max(-s,-l),s),d=h*(h+2*l)+A):(u=Math.max(0,-(a*s+o)),h=u>0?s:Math.min(Math.max(-s,-l),s),d=-u*u+h*(h+2*l)+A);else h=a>0?-s:s,u=Math.max(0,-(a*h+o)),d=-u*u+h*(h+2*l)+A;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(_E).addScaledVector(pv,h),d}intersectSphere(e,r){ul.subVectors(e.center,this.origin);const n=ul.dot(this.direction),i=ul.dot(ul)-n*n,s=e.radius*e.radius;if(i>s)return null;const a=Math.sqrt(s-i),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,r):this.at(o,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/r;return n>=0?n:null}intersectPlane(e,r){const n=this.distanceToPlane(e);return n===null?null:this.at(n,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let n,i,s,a,o,l;const A=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return A>=0?(n=(e.min.x-h.x)*A,i=(e.max.x-h.x)*A):(n=(e.max.x-h.x)*A,i=(e.min.x-h.x)*A),c>=0?(s=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),n>a||s>i||((s>n||isNaN(n))&&(n=s),(a<i||isNaN(i))&&(i=a),u>=0?(o=(e.min.z-h.z)*u,l=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,l=(e.min.z-h.z)*u),n>l||o>i)||((o>n||n!==n)&&(n=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(n>=0?n:i,r)}intersectsBox(e){return this.intersectBox(e,ul)!==null}intersectTriangle(e,r,n,i,s){xE.subVectors(r,e),mv.subVectors(n,e),EE.crossVectors(xE,mv);let a=this.direction.dot(EE),o;if(a>0){if(i)return null;o=1}else if(a<0)o=-1,a=-a;else return null;yA.subVectors(this.origin,e);const l=o*this.direction.dot(mv.crossVectors(yA,mv));if(l<0)return null;const A=o*this.direction.dot(xE.cross(yA));if(A<0||l+A>a)return null;const c=-o*yA.dot(EE);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class je{constructor(e,r,n,i,s,a,o,l,A,c,u,h,d,f,m,g){je.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,n,i,s,a,o,l,A,c,u,h,d,f,m,g)}set(e,r,n,i,s,a,o,l,A,c,u,h,d,f,m,g){const p=this.elements;return p[0]=e,p[4]=r,p[8]=n,p[12]=i,p[1]=s,p[5]=a,p[9]=o,p[13]=l,p[2]=A,p[6]=c,p[10]=u,p[14]=h,p[3]=d,p[7]=f,p[11]=m,p[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new je().fromArray(this.elements)}copy(e){const r=this.elements,n=e.elements;return r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this}copyPosition(e){const r=this.elements,n=e.elements;return r[12]=n[12],r[13]=n[13],r[14]=n[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,n){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,r,n){return this.set(e.x,r.x,n.x,0,e.y,r.y,n.y,0,e.z,r.z,n.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,n=e.elements,i=1/uh.setFromMatrixColumn(e,0).length(),s=1/uh.setFromMatrixColumn(e,1).length(),a=1/uh.setFromMatrixColumn(e,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[3]=0,r[4]=n[4]*s,r[5]=n[5]*s,r[6]=n[6]*s,r[7]=0,r[8]=n[8]*a,r[9]=n[9]*a,r[10]=n[10]*a,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,n=e.x,i=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(i),A=Math.sin(i),c=Math.cos(s),u=Math.sin(s);if(e.order==="XYZ"){const h=a*c,d=a*u,f=o*c,m=o*u;r[0]=l*c,r[4]=-l*u,r[8]=A,r[1]=d+f*A,r[5]=h-m*A,r[9]=-o*l,r[2]=m-h*A,r[6]=f+d*A,r[10]=a*l}else if(e.order==="YXZ"){const h=l*c,d=l*u,f=A*c,m=A*u;r[0]=h+m*o,r[4]=f*o-d,r[8]=a*A,r[1]=a*u,r[5]=a*c,r[9]=-o,r[2]=d*o-f,r[6]=m+h*o,r[10]=a*l}else if(e.order==="ZXY"){const h=l*c,d=l*u,f=A*c,m=A*u;r[0]=h-m*o,r[4]=-a*u,r[8]=f+d*o,r[1]=d+f*o,r[5]=a*c,r[9]=m-h*o,r[2]=-a*A,r[6]=o,r[10]=a*l}else if(e.order==="ZYX"){const h=a*c,d=a*u,f=o*c,m=o*u;r[0]=l*c,r[4]=f*A-d,r[8]=h*A+m,r[1]=l*u,r[5]=m*A+h,r[9]=d*A-f,r[2]=-A,r[6]=o*l,r[10]=a*l}else if(e.order==="YZX"){const h=a*l,d=a*A,f=o*l,m=o*A;r[0]=l*c,r[4]=m-h*u,r[8]=f*u+d,r[1]=u,r[5]=a*c,r[9]=-o*c,r[2]=-A*c,r[6]=d*u+f,r[10]=h-m*u}else if(e.order==="XZY"){const h=a*l,d=a*A,f=o*l,m=o*A;r[0]=l*c,r[4]=-u,r[8]=A*c,r[1]=h*u+m,r[5]=a*c,r[9]=d*u-f,r[2]=f*u-d,r[6]=o*c,r[10]=m*u+h}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(hee,e,dee)}lookAt(e,r,n){const i=this.elements;return ds.subVectors(e,r),ds.lengthSq()===0&&(ds.z=1),ds.normalize(),wA.crossVectors(n,ds),wA.lengthSq()===0&&(Math.abs(n.z)===1?ds.x+=1e-4:ds.z+=1e-4,ds.normalize(),wA.crossVectors(n,ds)),wA.normalize(),gv.crossVectors(ds,wA),i[0]=wA.x,i[4]=gv.x,i[8]=ds.x,i[1]=wA.y,i[5]=gv.y,i[9]=ds.y,i[2]=wA.z,i[6]=gv.z,i[10]=ds.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const n=e.elements,i=r.elements,s=this.elements,a=n[0],o=n[4],l=n[8],A=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],m=n[6],g=n[10],p=n[14],v=n[3],y=n[7],_=n[11],E=n[15],x=i[0],B=i[4],M=i[8],R=i[12],I=i[1],L=i[5],D=i[9],w=i[13],b=i[2],S=i[6],F=i[10],k=i[14],Q=i[3],z=i[7],j=i[11],T=i[15];return s[0]=a*x+o*I+l*b+A*Q,s[4]=a*B+o*L+l*S+A*z,s[8]=a*M+o*D+l*F+A*j,s[12]=a*R+o*w+l*k+A*T,s[1]=c*x+u*I+h*b+d*Q,s[5]=c*B+u*L+h*S+d*z,s[9]=c*M+u*D+h*F+d*j,s[13]=c*R+u*w+h*k+d*T,s[2]=f*x+m*I+g*b+p*Q,s[6]=f*B+m*L+g*S+p*z,s[10]=f*M+m*D+g*F+p*j,s[14]=f*R+m*w+g*k+p*T,s[3]=v*x+y*I+_*b+E*Q,s[7]=v*B+y*L+_*S+E*z,s[11]=v*M+y*D+_*F+E*j,s[15]=v*R+y*w+_*k+E*T,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],n=e[4],i=e[8],s=e[12],a=e[1],o=e[5],l=e[9],A=e[13],c=e[2],u=e[6],h=e[10],d=e[14],f=e[3],m=e[7],g=e[11],p=e[15];return f*(+s*l*u-i*A*u-s*o*h+n*A*h+i*o*d-n*l*d)+m*(+r*l*d-r*A*h+s*a*h-i*a*d+i*A*c-s*l*c)+g*(+r*A*u-r*o*d-s*a*u+n*a*d+s*o*c-n*A*c)+p*(-i*o*c-r*l*u+r*o*h+i*a*u-n*a*h+n*l*c)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=r,i[14]=n),this}invert(){const e=this.elements,r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],l=e[6],A=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],m=e[13],g=e[14],p=e[15],v=u*g*A-m*h*A+m*l*d-o*g*d-u*l*p+o*h*p,y=f*h*A-c*g*A-f*l*d+a*g*d+c*l*p-a*h*p,_=c*m*A-f*u*A+f*o*d-a*m*d-c*o*p+a*u*p,E=f*u*l-c*m*l-f*o*h+a*m*h+c*o*g-a*u*g,x=r*v+n*y+i*_+s*E;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/x;return e[0]=v*B,e[1]=(m*h*s-u*g*s-m*i*d+n*g*d+u*i*p-n*h*p)*B,e[2]=(o*g*s-m*l*s+m*i*A-n*g*A-o*i*p+n*l*p)*B,e[3]=(u*l*s-o*h*s-u*i*A+n*h*A+o*i*d-n*l*d)*B,e[4]=y*B,e[5]=(c*g*s-f*h*s+f*i*d-r*g*d-c*i*p+r*h*p)*B,e[6]=(f*l*s-a*g*s-f*i*A+r*g*A+a*i*p-r*l*p)*B,e[7]=(a*h*s-c*l*s+c*i*A-r*h*A-a*i*d+r*l*d)*B,e[8]=_*B,e[9]=(f*u*s-c*m*s-f*n*d+r*m*d+c*n*p-r*u*p)*B,e[10]=(a*m*s-f*o*s+f*n*A-r*m*A-a*n*p+r*o*p)*B,e[11]=(c*o*s-a*u*s-c*n*A+r*u*A+a*n*d-r*o*d)*B,e[12]=E*B,e[13]=(c*m*i-f*u*i+f*n*h-r*m*h-c*n*g+r*u*g)*B,e[14]=(f*o*i-a*m*i-f*n*l+r*m*l+a*n*g-r*o*g)*B,e[15]=(a*u*i-c*o*i+c*n*l-r*u*l-a*n*h+r*o*h)*B,this}scale(e){const r=this.elements,n=e.x,i=e.y,s=e.z;return r[0]*=n,r[4]*=i,r[8]*=s,r[1]*=n,r[5]*=i,r[9]*=s,r[2]*=n,r[6]*=i,r[10]*=s,r[3]*=n,r[7]*=i,r[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,n,i))}makeTranslation(e,r,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,n,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,r,-n,0,0,n,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,0,n,0,0,1,0,0,-n,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),n=Math.sin(e);return this.set(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const n=Math.cos(r),i=Math.sin(r),s=1-n,a=e.x,o=e.y,l=e.z,A=s*a,c=s*o;return this.set(A*a+n,A*o-i*l,A*l+i*o,0,A*o+i*l,c*o+n,c*l-i*a,0,A*l-i*o,c*l+i*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,r,n){return this.set(e,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,r,n,i,s,a){return this.set(1,n,s,0,e,1,a,0,r,i,1,0,0,0,0,1),this}compose(e,r,n){const i=this.elements,s=r._x,a=r._y,o=r._z,l=r._w,A=s+s,c=a+a,u=o+o,h=s*A,d=s*c,f=s*u,m=a*c,g=a*u,p=o*u,v=l*A,y=l*c,_=l*u,E=n.x,x=n.y,B=n.z;return i[0]=(1-(m+p))*E,i[1]=(d+_)*E,i[2]=(f-y)*E,i[3]=0,i[4]=(d-_)*x,i[5]=(1-(h+p))*x,i[6]=(g+v)*x,i[7]=0,i[8]=(f+y)*B,i[9]=(g-v)*B,i[10]=(1-(h+m))*B,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,r,n){const i=this.elements;let s=uh.set(i[0],i[1],i[2]).length();const a=uh.set(i[4],i[5],i[6]).length(),o=uh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ka.copy(this);const l=1/s,A=1/a,c=1/o;return ka.elements[0]*=l,ka.elements[1]*=l,ka.elements[2]*=l,ka.elements[4]*=A,ka.elements[5]*=A,ka.elements[6]*=A,ka.elements[8]*=c,ka.elements[9]*=c,ka.elements[10]*=c,r.setFromRotationMatrix(ka),n.x=s,n.y=a,n.z=o,this}makePerspective(e,r,n,i,s,a,o=Ql){const l=this.elements,A=2*s/(r-e),c=2*s/(n-i),u=(r+e)/(r-e),h=(n+i)/(n-i);let d,f;if(o===Ql)d=-(a+s)/(a-s),f=-2*a*s/(a-s);else if(o===D1)d=-a/(a-s),f=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=A,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,r,n,i,s,a,o=Ql){const l=this.elements,A=1/(r-e),c=1/(n-i),u=1/(a-s),h=(r+e)*A,d=(n+i)*c;let f,m;if(o===Ql)f=(a+s)*u,m=-2*u;else if(o===D1)f=s*u,m=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*A,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=m,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const r=this.elements,n=e.elements;for(let i=0;i<16;i++)if(r[i]!==n[i])return!1;return!0}fromArray(e,r=0){for(let n=0;n<16;n++)this.elements[n]=e[n+r];return this}toArray(e=[],r=0){const n=this.elements;return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],e[r+4]=n[4],e[r+5]=n[5],e[r+6]=n[6],e[r+7]=n[7],e[r+8]=n[8],e[r+9]=n[9],e[r+10]=n[10],e[r+11]=n[11],e[r+12]=n[12],e[r+13]=n[13],e[r+14]=n[14],e[r+15]=n[15],e}}const uh=new Y,ka=new je,hee=new Y(0,0,0),dee=new Y(1,1,1),wA=new Y,gv=new Y,ds=new Y,Ak=new je,ck=new et;class en{constructor(e=0,r=0,n=0,i=en.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,n,i=this._order){return this._x=e,this._y=r,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,n=!0){const i=e.elements,s=i[0],a=i[4],o=i[8],l=i[1],A=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(r){case"XYZ":this._y=Math.asin(dn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,A),this._z=0);break;case"YXZ":this._x=Math.asin(-dn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(l,A)):(this._y=Math.atan2(-u,s),this._z=0);break;case"ZXY":this._x=Math.asin(dn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,A)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-dn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,A));break;case"YZX":this._z=Math.asin(dn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,A),this._y=Math.atan2(-u,s)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,A),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,n){return Ak.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ak,r,n)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return ck.setFromEuler(this),this.setFromQuaternion(ck,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}en.DEFAULT_ORDER="XYZ";class kI{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let fee=0;const uk=new Y,hh=new et,hl=new je,vv=new Y,Up=new Y,pee=new Y,mee=new et,hk=new Y(1,0,0),dk=new Y(0,1,0),fk=new Y(0,0,1),pk={type:"added"},gee={type:"removed"},dh={type:"childadded",child:null},BE={type:"childremoved",child:null};class Lt extends Ic{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fee++}),this.uuid=ro(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Lt.DEFAULT_UP.clone();const e=new Y,r=new en,n=new et,i=new Y(1,1,1);function s(){n.setFromEuler(r,!1)}function a(){r.setFromQuaternion(n,void 0,!1)}r._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new je},normalMatrix:{value:new dt}}),this.matrix=new je,this.matrixWorld=new je,this.matrixAutoUpdate=Lt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Lt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new kI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return hh.setFromAxisAngle(e,r),this.quaternion.multiply(hh),this}rotateOnWorldAxis(e,r){return hh.setFromAxisAngle(e,r),this.quaternion.premultiply(hh),this}rotateX(e){return this.rotateOnAxis(hk,e)}rotateY(e){return this.rotateOnAxis(dk,e)}rotateZ(e){return this.rotateOnAxis(fk,e)}translateOnAxis(e,r){return uk.copy(e).applyQuaternion(this.quaternion),this.position.add(uk.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(hk,e)}translateY(e){return this.translateOnAxis(dk,e)}translateZ(e){return this.translateOnAxis(fk,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(hl.copy(this.matrixWorld).invert())}lookAt(e,r,n){e.isVector3?vv.copy(e):vv.set(e,r,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Up.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?hl.lookAt(Up,vv,this.up):hl.lookAt(vv,Up,this.up),this.quaternion.setFromRotationMatrix(hl),i&&(hl.extractRotation(i.matrixWorld),hh.setFromRotationMatrix(hl),this.quaternion.premultiply(hh.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(pk),dh.child=e,this.dispatchEvent(dh),dh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(gee),BE.child=e,this.dispatchEvent(BE),BE.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),hl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),hl.multiply(e.parent.matrixWorld)),e.applyMatrix4(hl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(pk),dh.child=e,this.dispatchEvent(dh),dh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n].getObjectByProperty(e,r);if(s!==void 0)return s}}getObjectsByProperty(e,r,n=[]){this[e]===r&&n.push(this);const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].getObjectsByProperty(e,r,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Up,e,pee),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Up,mee,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let n=0,i=r.length;n<i;n++)r[n].updateMatrixWorld(e)}updateWorldMatrix(e,r){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const i=this.children;for(let s=0,a=i.length;s<a;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",n={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let A=0,c=l.length;A<c;A++){const u=l[A];s(e.shapes,u)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,A=this.material.length;l<A;l++)o.push(s(e.materials,this.material[l]));i.material=o}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(s(e.animations,l))}}if(r){const o=a(e.geometries),l=a(e.materials),A=a(e.textures),c=a(e.images),u=a(e.shapes),h=a(e.skeletons),d=a(e.animations),f=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),A.length>0&&(n.textures=A),c.length>0&&(n.images=c),u.length>0&&(n.shapes=u),h.length>0&&(n.skeletons=h),d.length>0&&(n.animations=d),f.length>0&&(n.nodes=f)}return n.object=i,n;function a(o){const l=[];for(const A in o){const c=o[A];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Lt.DEFAULT_UP=new Y(0,1,0);Lt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Lt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const La=new Y,dl=new Y,ME=new Y,fl=new Y,fh=new Y,ph=new Y,mk=new Y,TE=new Y,CE=new Y,SE=new Y,IE=new kt,RE=new kt,UE=new kt;class Gn{constructor(e=new Y,r=new Y,n=new Y){this.a=e,this.b=r,this.c=n}static getNormal(e,r,n,i){i.subVectors(n,r),La.subVectors(e,r),i.cross(La);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,r,n,i,s){La.subVectors(i,r),dl.subVectors(n,r),ME.subVectors(e,r);const a=La.dot(La),o=La.dot(dl),l=La.dot(ME),A=dl.dot(dl),c=dl.dot(ME),u=a*A-o*o;if(u===0)return s.set(0,0,0),null;const h=1/u,d=(A*l-o*c)*h,f=(a*c-o*l)*h;return s.set(1-d-f,f,d)}static containsPoint(e,r,n,i){return this.getBarycoord(e,r,n,i,fl)===null?!1:fl.x>=0&&fl.y>=0&&fl.x+fl.y<=1}static getInterpolation(e,r,n,i,s,a,o,l){return this.getBarycoord(e,r,n,i,fl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,fl.x),l.addScaledVector(a,fl.y),l.addScaledVector(o,fl.z),l)}static getInterpolatedAttribute(e,r,n,i,s,a){return IE.setScalar(0),RE.setScalar(0),UE.setScalar(0),IE.fromBufferAttribute(e,r),RE.fromBufferAttribute(e,n),UE.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(IE,s.x),a.addScaledVector(RE,s.y),a.addScaledVector(UE,s.z),a}static isFrontFacing(e,r,n,i){return La.subVectors(n,r),dl.subVectors(e,r),La.cross(dl).dot(i)<0}set(e,r,n){return this.a.copy(e),this.b.copy(r),this.c.copy(n),this}setFromPointsAndIndices(e,r,n,i){return this.a.copy(e[r]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,r,n,i){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return La.subVectors(this.c,this.b),dl.subVectors(this.a,this.b),La.cross(dl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Gn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return Gn.getBarycoord(e,this.a,this.b,this.c,r)}getInterpolation(e,r,n,i,s){return Gn.getInterpolation(e,this.a,this.b,this.c,r,n,i,s)}containsPoint(e){return Gn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Gn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const n=this.a,i=this.b,s=this.c;let a,o;fh.subVectors(i,n),ph.subVectors(s,n),TE.subVectors(e,n);const l=fh.dot(TE),A=ph.dot(TE);if(l<=0&&A<=0)return r.copy(n);CE.subVectors(e,i);const c=fh.dot(CE),u=ph.dot(CE);if(c>=0&&u<=c)return r.copy(i);const h=l*u-c*A;if(h<=0&&l>=0&&c<=0)return a=l/(l-c),r.copy(n).addScaledVector(fh,a);SE.subVectors(e,s);const d=fh.dot(SE),f=ph.dot(SE);if(f>=0&&d<=f)return r.copy(s);const m=d*A-l*f;if(m<=0&&A>=0&&f<=0)return o=A/(A-f),r.copy(n).addScaledVector(ph,o);const g=c*f-d*u;if(g<=0&&u-c>=0&&d-f>=0)return mk.subVectors(s,i),o=(u-c)/(u-c+(d-f)),r.copy(i).addScaledVector(mk,o);const p=1/(g+m+h);return a=m*p,o=h*p,r.copy(n).addScaledVector(fh,a).addScaledVector(ph,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const E8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bA={h:0,s:0,l:0},yv={h:0,s:0,l:0};function FE(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*6*(2/3-r):t}class He{constructor(e,r,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,n)}set(e,r,n){if(r===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,r,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=Ut){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,xt.toWorkingColorSpace(this,r),this}setRGB(e,r,n,i=xt.workingColorSpace){return this.r=e,this.g=r,this.b=n,xt.toWorkingColorSpace(this,i),this}setHSL(e,r,n,i=xt.workingColorSpace){if(e=UI(e,1),r=dn(r,0,1),n=dn(n,0,1),r===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+r):n+r-n*r,a=2*n-s;this.r=FE(a,s,e+1/3),this.g=FE(a,s,e),this.b=FE(a,s,e-1/3)}return xt.toWorkingColorSpace(this,i),this}setStyle(e,r=Ut){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=i[1],o=i[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,r);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,r);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,r);if(a===6)return this.setHex(parseInt(s,16),r);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=Ut){const n=E8[e.toLowerCase()];return n!==void 0?this.setHex(n,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=af(e.r),this.g=af(e.g),this.b=af(e.b),this}copyLinearToSRGB(e){return this.r=gE(e.r),this.g=gE(e.g),this.b=gE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ut){return xt.fromWorkingColorSpace(li.copy(this),e),Math.round(dn(li.r*255,0,255))*65536+Math.round(dn(li.g*255,0,255))*256+Math.round(dn(li.b*255,0,255))}getHexString(e=Ut){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=xt.workingColorSpace){xt.fromWorkingColorSpace(li.copy(this),r);const n=li.r,i=li.g,s=li.b,a=Math.max(n,i,s),o=Math.min(n,i,s);let l,A;const c=(o+a)/2;if(o===a)l=0,A=0;else{const u=a-o;switch(A=c<=.5?u/(a+o):u/(2-a-o),a){case n:l=(i-s)/u+(i<s?6:0);break;case i:l=(s-n)/u+2;break;case s:l=(n-i)/u+4;break}l/=6}return e.h=l,e.s=A,e.l=c,e}getRGB(e,r=xt.workingColorSpace){return xt.fromWorkingColorSpace(li.copy(this),r),e.r=li.r,e.g=li.g,e.b=li.b,e}getStyle(e=Ut){xt.fromWorkingColorSpace(li.copy(this),e);const r=li.r,n=li.g,i=li.b;return e!==Ut?`color(${e} ${r.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,r,n){return this.getHSL(bA),this.setHSL(bA.h+e,bA.s+r,bA.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,n){return this.r=e.r+(r.r-e.r)*n,this.g=e.g+(r.g-e.g)*n,this.b=e.b+(r.b-e.b)*n,this}lerpHSL(e,r){this.getHSL(bA),e.getHSL(yv);const n=tg(bA.h,yv.h,r),i=tg(bA.s,yv.s,r),s=tg(bA.l,yv.l,r);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*r+s[3]*n+s[6]*i,this.g=s[1]*r+s[4]*n+s[7]*i,this.b=s[2]*r+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const li=new He;He.NAMES=E8;let vee=0,is=class extends Ic{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vee++}),this.uuid=ro(),this.name="",this.type="Material",this.blending=nf,this.side=Ns,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=WT,this.blendDst=KT,this.blendEquation=su,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new He(0,0,0),this.blendAlpha=0,this.depthFunc=Sf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=rk,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ah,this.stencilZFail=ah,this.stencilZPass=ah,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const r=t[e];if(r===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const n=this[e];if(n===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[e]=r}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==nf&&(r.blending=this.blending),this.side!==Ns&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==WT&&(r.blendSrc=this.blendSrc),this.blendDst!==KT&&(r.blendDst=this.blendDst),this.blendEquation!==su&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Sf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==rk&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ah&&(r.stencilFail=this.stencilFail),this.stencilZFail!==ah&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==ah&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function n(i){const s=[];for(const a in i){const o=i[a];delete o.metadata,s.push(o)}return s}if(e){const i=n(t.textures),s=n(t.images);i.length>0&&(r.textures=i),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let r=null;if(e!==null){const n=e.length;r=new Array(n);for(let i=0;i!==n;++i)r[i]=e[i].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}};class Zi extends is{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new en,this.combine=l_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const kl=yee();function yee(){const t=new ArrayBuffer(4),e=new Float32Array(t),r=new Uint32Array(t),n=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const A=l-127;A<-27?(n[l]=0,n[l|256]=32768,i[l]=24,i[l|256]=24):A<-14?(n[l]=1024>>-A-14,n[l|256]=1024>>-A-14|32768,i[l]=-A-1,i[l|256]=-A-1):A<=15?(n[l]=A+15<<10,n[l|256]=A+15<<10|32768,i[l]=13,i[l|256]=13):A<128?(n[l]=31744,n[l|256]=64512,i[l]=24,i[l|256]=24):(n[l]=31744,n[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let A=l<<13,c=0;for(;!(A&8388608);)A<<=1,c-=8388608;A&=-8388609,c+=947912704,s[l]=A|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:r,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:a,offsetTable:o}}function wee(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=dn(t,-65504,65504),kl.floatView[0]=t;const e=kl.uint32View[0],r=e>>23&511;return kl.baseTable[r]+((e&8388607)>>kl.shiftTable[r])}function bee(t){const e=t>>10;return kl.uint32View[0]=kl.mantissaTable[kl.offsetTable[e]+(t&1023)]+kl.exponentTable[e],kl.floatView[0]}const wv={toHalfFloat:wee,fromHalfFloat:bee},pn=new Y,bv=new Ke;class lt{constructor(e,r,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=n,this.usage=SC,this.updateRanges=[],this.gpuType=mi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,n){e*=this.itemSize,n*=r.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=r.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,n=this.count;r<n;r++)bv.fromBufferAttribute(this,r),bv.applyMatrix3(e),this.setXY(r,bv.x,bv.y);else if(this.itemSize===3)for(let r=0,n=this.count;r<n;r++)pn.fromBufferAttribute(this,r),pn.applyMatrix3(e),this.setXYZ(r,pn.x,pn.y,pn.z);return this}applyMatrix4(e){for(let r=0,n=this.count;r<n;r++)pn.fromBufferAttribute(this,r),pn.applyMatrix4(e),this.setXYZ(r,pn.x,pn.y,pn.z);return this}applyNormalMatrix(e){for(let r=0,n=this.count;r<n;r++)pn.fromBufferAttribute(this,r),pn.applyNormalMatrix(e),this.setXYZ(r,pn.x,pn.y,pn.z);return this}transformDirection(e){for(let r=0,n=this.count;r<n;r++)pn.fromBufferAttribute(this,r),pn.transformDirection(e),this.setXYZ(r,pn.x,pn.y,pn.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let n=this.array[e*this.itemSize+r];return this.normalized&&(n=Xa(n,this.array)),n}setComponent(e,r,n){return this.normalized&&(n=lr(n,this.array)),this.array[e*this.itemSize+r]=n,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=Xa(r,this.array)),r}setX(e,r){return this.normalized&&(r=lr(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=Xa(r,this.array)),r}setY(e,r){return this.normalized&&(r=lr(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=Xa(r,this.array)),r}setZ(e,r){return this.normalized&&(r=lr(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=Xa(r,this.array)),r}setW(e,r){return this.normalized&&(r=lr(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,n){return e*=this.itemSize,this.normalized&&(r=lr(r,this.array),n=lr(n,this.array)),this.array[e+0]=r,this.array[e+1]=n,this}setXYZ(e,r,n,i){return e*=this.itemSize,this.normalized&&(r=lr(r,this.array),n=lr(n,this.array),i=lr(i,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,r,n,i,s){return e*=this.itemSize,this.normalized&&(r=lr(r,this.array),n=lr(n,this.array),i=lr(i,this.array),s=lr(s,this.array)),this.array[e+0]=r,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==SC&&(e.usage=this.usage),e}}class h_ extends lt{constructor(e,r,n){super(new Uint16Array(e),r,n)}}class B8 extends lt{constructor(e,r,n){super(new Uint32Array(e),r,n)}}class vr extends lt{constructor(e,r,n){super(new Float32Array(e),r,n)}}let _ee=0;const Zs=new je,kE=new Lt,mh=new Y,fs=new Dr,Fp=new Dr,On=new Y;class $t extends Ic{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_ee++}),this.uuid=ro(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(_8(e)?B8:h_)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,n=0){this.groups.push({start:e,count:r,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new dt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zs.makeRotationFromQuaternion(e),this.applyMatrix4(Zs),this}rotateX(e){return Zs.makeRotationX(e),this.applyMatrix4(Zs),this}rotateY(e){return Zs.makeRotationY(e),this.applyMatrix4(Zs),this}rotateZ(e){return Zs.makeRotationZ(e),this.applyMatrix4(Zs),this}translate(e,r,n){return Zs.makeTranslation(e,r,n),this.applyMatrix4(Zs),this}scale(e,r,n){return Zs.makeScale(e,r,n),this.applyMatrix4(Zs),this}lookAt(e){return kE.lookAt(e),kE.updateMatrix(),this.applyMatrix4(kE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mh).negate(),this.translate(mh.x,mh.y,mh.z),this}setFromPoints(e){const r=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];r.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new vr(r,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Dr);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let n=0,i=r.length;n<i;n++){const s=r[n];fs.setFromBufferAttribute(s),this.morphTargetsRelative?(On.addVectors(this.boundingBox.min,fs.min),this.boundingBox.expandByPoint(On),On.addVectors(this.boundingBox.max,fs.max),this.boundingBox.expandByPoint(On)):(this.boundingBox.expandByPoint(fs.min),this.boundingBox.expandByPoint(fs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wi);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const n=this.boundingSphere.center;if(fs.setFromBufferAttribute(e),r)for(let s=0,a=r.length;s<a;s++){const o=r[s];Fp.setFromBufferAttribute(o),this.morphTargetsRelative?(On.addVectors(fs.min,Fp.min),fs.expandByPoint(On),On.addVectors(fs.max,Fp.max),fs.expandByPoint(On)):(fs.expandByPoint(Fp.min),fs.expandByPoint(Fp.max))}fs.getCenter(n);let i=0;for(let s=0,a=e.count;s<a;s++)On.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(On));if(r)for(let s=0,a=r.length;s<a;s++){const o=r[s],l=this.morphTargetsRelative;for(let A=0,c=o.count;A<c;A++)On.fromBufferAttribute(o,A),l&&(mh.fromBufferAttribute(e,A),On.add(mh)),i=Math.max(i,n.distanceToSquared(On))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=r.position,i=r.normal,s=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new lt(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let M=0;M<n.count;M++)o[M]=new Y,l[M]=new Y;const A=new Y,c=new Y,u=new Y,h=new Ke,d=new Ke,f=new Ke,m=new Y,g=new Y;function p(M,R,I){A.fromBufferAttribute(n,M),c.fromBufferAttribute(n,R),u.fromBufferAttribute(n,I),h.fromBufferAttribute(s,M),d.fromBufferAttribute(s,R),f.fromBufferAttribute(s,I),c.sub(A),u.sub(A),d.sub(h),f.sub(h);const L=1/(d.x*f.y-f.x*d.y);isFinite(L)&&(m.copy(c).multiplyScalar(f.y).addScaledVector(u,-d.y).multiplyScalar(L),g.copy(u).multiplyScalar(d.x).addScaledVector(c,-f.x).multiplyScalar(L),o[M].add(m),o[R].add(m),o[I].add(m),l[M].add(g),l[R].add(g),l[I].add(g))}let v=this.groups;v.length===0&&(v=[{start:0,count:e.count}]);for(let M=0,R=v.length;M<R;++M){const I=v[M],L=I.start,D=I.count;for(let w=L,b=L+D;w<b;w+=3)p(e.getX(w+0),e.getX(w+1),e.getX(w+2))}const y=new Y,_=new Y,E=new Y,x=new Y;function B(M){E.fromBufferAttribute(i,M),x.copy(E);const R=o[M];y.copy(R),y.sub(E.multiplyScalar(E.dot(R))).normalize(),_.crossVectors(x,R);const I=_.dot(l[M])<0?-1:1;a.setXYZW(M,y.x,y.y,y.z,I)}for(let M=0,R=v.length;M<R;++M){const I=v[M],L=I.start,D=I.count;for(let w=L,b=L+D;w<b;w+=3)B(e.getX(w+0)),B(e.getX(w+1)),B(e.getX(w+2))}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new lt(new Float32Array(r.count*3),3),this.setAttribute("normal",n);else for(let h=0,d=n.count;h<d;h++)n.setXYZ(h,0,0,0);const i=new Y,s=new Y,a=new Y,o=new Y,l=new Y,A=new Y,c=new Y,u=new Y;if(e)for(let h=0,d=e.count;h<d;h+=3){const f=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);i.fromBufferAttribute(r,f),s.fromBufferAttribute(r,m),a.fromBufferAttribute(r,g),c.subVectors(a,s),u.subVectors(i,s),c.cross(u),o.fromBufferAttribute(n,f),l.fromBufferAttribute(n,m),A.fromBufferAttribute(n,g),o.add(c),l.add(c),A.add(c),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,A.x,A.y,A.z)}else for(let h=0,d=r.count;h<d;h+=3)i.fromBufferAttribute(r,h+0),s.fromBufferAttribute(r,h+1),a.fromBufferAttribute(r,h+2),c.subVectors(a,s),u.subVectors(i,s),c.cross(u),n.setXYZ(h+0,c.x,c.y,c.z),n.setXYZ(h+1,c.x,c.y,c.z),n.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,n=e.count;r<n;r++)On.fromBufferAttribute(e,r),On.normalize(),e.setXYZ(r,On.x,On.y,On.z)}toNonIndexed(){function e(o,l){const A=o.array,c=o.itemSize,u=o.normalized,h=new A.constructor(l.length*c);let d=0,f=0;for(let m=0,g=l.length;m<g;m++){o.isInterleavedBufferAttribute?d=l[m]*o.data.stride+o.offset:d=l[m]*c;for(let p=0;p<c;p++)h[f++]=A[d++]}return new lt(h,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new $t,n=this.index.array,i=this.attributes;for(const o in i){const l=i[o],A=e(l,n);r.setAttribute(o,A)}const s=this.morphAttributes;for(const o in s){const l=[],A=s[o];for(let c=0,u=A.length;c<u;c++){const h=A[c],d=e(h,n);l.push(d)}r.morphAttributes[o]=l}r.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const A=a[o];r.addGroup(A.start,A.count,A.materialIndex)}return r}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const A in l)l[A]!==void 0&&(e[A]=l[A]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const n=this.attributes;for(const l in n){const A=n[l];e.data.attributes[l]=A.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const A=this.morphAttributes[l],c=[];for(let u=0,h=A.length;u<h;u++){const d=A[u];c.push(d.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(r));const i=e.attributes;for(const A in i){const c=i[A];this.setAttribute(A,c.clone(r))}const s=e.morphAttributes;for(const A in s){const c=[],u=s[A];for(let h=0,d=u.length;h<d;h++)c.push(u[h].clone(r));this.morphAttributes[A]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let A=0,c=a.length;A<c;A++){const u=a[A];this.addGroup(u.start,u.count,u.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gk=new je,Nc=new Yu,_v=new wi,vk=new Y,xv=new Y,Ev=new Y,Bv=new Y,LE=new Y,Mv=new Y,yk=new Y,Tv=new Y;class Ar extends Lt{constructor(e=new $t,r=new Zi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,r=Object.keys(e);if(r.length>0){const n=e[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=n.length;i<s;i++){const a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}getVertexPosition(e,r){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;r.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(s&&o){Mv.set(0,0,0);for(let l=0,A=s.length;l<A;l++){const c=o[l],u=s[l];c!==0&&(LE.fromBufferAttribute(u,e),a?Mv.addScaledVector(LE,c):Mv.addScaledVector(LE.sub(r),c))}r.add(Mv)}return r}raycast(e,r){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),_v.copy(n.boundingSphere),_v.applyMatrix4(s),Nc.copy(e.ray).recast(e.near),!(_v.containsPoint(Nc.origin)===!1&&(Nc.intersectSphere(_v,vk)===null||Nc.origin.distanceToSquared(vk)>(e.far-e.near)**2))&&(gk.copy(s).invert(),Nc.copy(e.ray).applyMatrix4(gk),!(n.boundingBox!==null&&Nc.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,r,Nc)))}_computeIntersections(e,r,n){let i;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,A=s.attributes.uv,c=s.attributes.uv1,u=s.attributes.normal,h=s.groups,d=s.drawRange;if(o!==null)if(Array.isArray(a))for(let f=0,m=h.length;f<m;f++){const g=h[f],p=a[g.materialIndex],v=Math.max(g.start,d.start),y=Math.min(o.count,Math.min(g.start+g.count,d.start+d.count));for(let _=v,E=y;_<E;_+=3){const x=o.getX(_),B=o.getX(_+1),M=o.getX(_+2);i=Cv(this,p,e,n,A,c,u,x,B,M),i&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=g.materialIndex,r.push(i))}}else{const f=Math.max(0,d.start),m=Math.min(o.count,d.start+d.count);for(let g=f,p=m;g<p;g+=3){const v=o.getX(g),y=o.getX(g+1),_=o.getX(g+2);i=Cv(this,a,e,n,A,c,u,v,y,_),i&&(i.faceIndex=Math.floor(g/3),r.push(i))}}else if(l!==void 0)if(Array.isArray(a))for(let f=0,m=h.length;f<m;f++){const g=h[f],p=a[g.materialIndex],v=Math.max(g.start,d.start),y=Math.min(l.count,Math.min(g.start+g.count,d.start+d.count));for(let _=v,E=y;_<E;_+=3){const x=_,B=_+1,M=_+2;i=Cv(this,p,e,n,A,c,u,x,B,M),i&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=g.materialIndex,r.push(i))}}else{const f=Math.max(0,d.start),m=Math.min(l.count,d.start+d.count);for(let g=f,p=m;g<p;g+=3){const v=g,y=g+1,_=g+2;i=Cv(this,a,e,n,A,c,u,v,y,_),i&&(i.faceIndex=Math.floor(g/3),r.push(i))}}}}function xee(t,e,r,n,i,s,a,o){let l;if(e.side===ti?l=n.intersectTriangle(a,s,i,!0,o):l=n.intersectTriangle(i,s,a,e.side===Ns,o),l===null)return null;Tv.copy(o),Tv.applyMatrix4(t.matrixWorld);const A=r.ray.origin.distanceTo(Tv);return A<r.near||A>r.far?null:{distance:A,point:Tv.clone(),object:t}}function Cv(t,e,r,n,i,s,a,o,l,A){t.getVertexPosition(o,xv),t.getVertexPosition(l,Ev),t.getVertexPosition(A,Bv);const c=xee(t,e,r,n,xv,Ev,Bv,yk);if(c){const u=new Y;Gn.getBarycoord(yk,xv,Ev,Bv,u),i&&(c.uv=Gn.getInterpolatedAttribute(i,o,l,A,u,new Ke)),s&&(c.uv1=Gn.getInterpolatedAttribute(s,o,l,A,u,new Ke)),a&&(c.normal=Gn.getInterpolatedAttribute(a,o,l,A,u,new Y),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const h={a:o,b:l,c:A,normal:new Y,materialIndex:0};Gn.getNormal(xv,Ev,Bv,h.normal),c.face=h,c.barycoord=u}return c}class g0 extends $t{constructor(e=1,r=1,n=1,i=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:n,widthSegments:i,heightSegments:s,depthSegments:a};const o=this;i=Math.floor(i),s=Math.floor(s),a=Math.floor(a);const l=[],A=[],c=[],u=[];let h=0,d=0;f("z","y","x",-1,-1,n,r,e,a,s,0),f("z","y","x",1,-1,n,r,-e,a,s,1),f("x","z","y",1,1,e,n,r,i,a,2),f("x","z","y",1,-1,e,n,-r,i,a,3),f("x","y","z",1,-1,e,r,n,i,s,4),f("x","y","z",-1,-1,e,r,-n,i,s,5),this.setIndex(l),this.setAttribute("position",new vr(A,3)),this.setAttribute("normal",new vr(c,3)),this.setAttribute("uv",new vr(u,2));function f(m,g,p,v,y,_,E,x,B,M,R){const I=_/B,L=E/M,D=_/2,w=E/2,b=x/2,S=B+1,F=M+1;let k=0,Q=0;const z=new Y;for(let j=0;j<F;j++){const T=j*L-w;for(let H=0;H<S;H++){const me=H*I-D;z[m]=me*v,z[g]=T*y,z[p]=b,A.push(z.x,z.y,z.z),z[m]=0,z[g]=0,z[p]=x>0?1:-1,c.push(z.x,z.y,z.z),u.push(H/B),u.push(1-j/M),k+=1}}for(let j=0;j<M;j++)for(let T=0;T<B;T++){const H=h+T+S*j,me=h+T+S*(j+1),ee=h+(T+1)+S*(j+1),U=h+(T+1)+S*j;l.push(H,me,U),l.push(me,ee,U),Q+=6}o.addGroup(d,Q,R),d+=Q,h+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new g0(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Of(t){const e={};for(const r in t){e[r]={};for(const n in t[r]){const i=t[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][n]=null):e[r][n]=i.clone():Array.isArray(i)?e[r][n]=i.slice():e[r][n]=i}}return e}function Ti(t){const e={};for(let r=0;r<t.length;r++){const n=Of(t[r]);for(const i in n)e[i]=n[i]}return e}function Eee(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].clone());return e}function M8(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:xt.workingColorSpace}const LI={clone:Of,merge:Ti};var Bee=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Mee=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class fn extends is{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Bee,this.fragmentShader=Mee,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Of(e.uniforms),this.uniformsGroups=Eee(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?r.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?r.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?r.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?r.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?r.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?r.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?r.uniforms[i]={type:"m4",value:s.toArray()}:r.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(r.extensions=n),r}}class T8 extends Lt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new je,this.projectionMatrix=new je,this.projectionMatrixInverse=new je,this.coordinateSystem=Ql}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _A=new Y,wk=new Ke,bk=new Ke;class In extends T8{constructor(e=50,r=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=Pf*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(eg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Pf*2*Math.atan(Math.tan(eg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,r,n){_A.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(_A.x,_A.y).multiplyScalar(-e/_A.z),_A.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(_A.x,_A.y).multiplyScalar(-e/_A.z)}getViewSize(e,r){return this.getViewBounds(e,wk,bk),r.subVectors(bk,wk)}setViewOffset(e,r,n,i,s,a){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(eg*.5*this.fov)/this.zoom,n=2*r,i=this.aspect*n,s=-.5*i;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,A=a.fullHeight;s+=a.offsetX*i/l,r-=a.offsetY*n/A,i*=a.width/l,n*=a.height/A}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,r,r-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const gh=-90,vh=1;class Tee extends Lt{constructor(e,r,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new In(gh,vh,e,r);i.layers=this.layers,this.add(i);const s=new In(gh,vh,e,r);s.layers=this.layers,this.add(s);const a=new In(gh,vh,e,r);a.layers=this.layers,this.add(a);const o=new In(gh,vh,e,r);o.layers=this.layers,this.add(o);const l=new In(gh,vh,e,r);l.layers=this.layers,this.add(l);const A=new In(gh,vh,e,r);A.layers=this.layers,this.add(A)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[n,i,s,a,o,l]=r;for(const A of r)this.remove(A);if(e===Ql)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===D1)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const A of r)this.add(A),A.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,A,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(r,s),e.setRenderTarget(n,1,i),e.render(r,a),e.setRenderTarget(n,2,i),e.render(r,o),e.setRenderTarget(n,3,i),e.render(r,l),e.setRenderTarget(n,4,i),e.render(r,A),n.texture.generateMipmaps=m,e.setRenderTarget(n,5,i),e.render(r,c),e.setRenderTarget(u,h,d),e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class C8 extends Sr{constructor(e,r,n,i,s,a,o,l,A,c){e=e!==void 0?e:[],r=r!==void 0?r:If,super(e,r,n,i,s,a,o,l,A,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Cee extends $o{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new C8(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Un}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new g0(5,5,5),s=new fn({name:"CubemapFromEquirect",uniforms:Of(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ti,blending:zl});s.uniforms.tEquirect.value=r;const a=new Ar(i,s),o=r.minFilter;return r.minFilter===qa&&(r.minFilter=Un),new Tee(1,10,this).update(e,a),r.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,r,n,i){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(r,n,i);e.setRenderTarget(s)}}const PE=new Y,See=new Y,Iee=new dt;class So{constructor(e=new Y(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,n,i){return this.normal.set(e,r,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,n){const i=PE.subVectors(n,r).cross(See.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const n=e.delta(PE),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:r.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const r=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return r<0&&n>0||n<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const n=r||Iee.getNormalMatrix(e),i=this.coplanarPoint(PE).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Qc=new wi,Sv=new Y;class d_{constructor(e=new So,r=new So,n=new So,i=new So,s=new So,a=new So){this.planes=[e,r,n,i,s,a]}set(e,r,n,i,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(r),o[2].copy(n),o[3].copy(i),o[4].copy(s),o[5].copy(a),this}copy(e){const r=this.planes;for(let n=0;n<6;n++)r[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,r=Ql){const n=this.planes,i=e.elements,s=i[0],a=i[1],o=i[2],l=i[3],A=i[4],c=i[5],u=i[6],h=i[7],d=i[8],f=i[9],m=i[10],g=i[11],p=i[12],v=i[13],y=i[14],_=i[15];if(n[0].setComponents(l-s,h-A,g-d,_-p).normalize(),n[1].setComponents(l+s,h+A,g+d,_+p).normalize(),n[2].setComponents(l+a,h+c,g+f,_+v).normalize(),n[3].setComponents(l-a,h-c,g-f,_-v).normalize(),n[4].setComponents(l-o,h-u,g-m,_-y).normalize(),r===Ql)n[5].setComponents(l+o,h+u,g+m,_+y).normalize();else if(r===D1)n[5].setComponents(o,u,m,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Qc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),Qc.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Qc)}intersectsSprite(e){return Qc.center.set(0,0,0),Qc.radius=.7071067811865476,Qc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Qc)}intersectsSphere(e){const r=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(r[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const r=this.planes;for(let n=0;n<6;n++){const i=r[n];if(Sv.x=i.normal.x>0?e.max.x:e.min.x,Sv.y=i.normal.y>0?e.max.y:e.min.y,Sv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Sv)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let n=0;n<6;n++)if(r[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function S8(){let t=null,e=!1,r=null,n=null;function i(s,a){r(s,a),n=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&r!==null&&(n=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){r=s},setContext:function(s){t=s}}}function Ree(t){const e=new WeakMap;function r(o,l){const A=o.array,c=o.usage,u=A.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,A,c),o.onUploadCallback();let d;if(A instanceof Float32Array)d=t.FLOAT;else if(A instanceof Uint16Array)o.isFloat16BufferAttribute?d=t.HALF_FLOAT:d=t.UNSIGNED_SHORT;else if(A instanceof Int16Array)d=t.SHORT;else if(A instanceof Uint32Array)d=t.UNSIGNED_INT;else if(A instanceof Int32Array)d=t.INT;else if(A instanceof Int8Array)d=t.BYTE;else if(A instanceof Uint8Array)d=t.UNSIGNED_BYTE;else if(A instanceof Uint8ClampedArray)d=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+A);return{buffer:h,type:d,bytesPerElement:A.BYTES_PER_ELEMENT,version:o.version,size:u}}function n(o,l,A){const c=l.array,u=l.updateRanges;if(t.bindBuffer(A,o),u.length===0)t.bufferSubData(A,0,c);else{u.sort((d,f)=>d.start-f.start);let h=0;for(let d=1;d<u.length;d++){const f=u[h],m=u[d];m.start<=f.start+f.count+1?f.count=Math.max(f.count,m.start+m.count-f.start):(++h,u[h]=m)}u.length=h+1;for(let d=0,f=u.length;d<f;d++){const m=u[d];t.bufferSubData(A,m.start*c.BYTES_PER_ELEMENT,c,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(t.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const A=e.get(o);if(A===void 0)e.set(o,r(o,l));else if(A.version<o.version){if(A.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(A.buffer,o,l),A.version=o.version}}return{get:i,remove:s,update:a}}class oA extends $t{constructor(e=1,r=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:n,heightSegments:i};const s=e/2,a=r/2,o=Math.floor(n),l=Math.floor(i),A=o+1,c=l+1,u=e/o,h=r/l,d=[],f=[],m=[],g=[];for(let p=0;p<c;p++){const v=p*h-a;for(let y=0;y<A;y++){const _=y*u-s;f.push(_,-v,0),m.push(0,0,1),g.push(y/o),g.push(1-p/l)}}for(let p=0;p<l;p++)for(let v=0;v<o;v++){const y=v+A*p,_=v+A*(p+1),E=v+1+A*(p+1),x=v+1+A*p;d.push(y,_,x),d.push(_,E,x)}this.setIndex(d),this.setAttribute("position",new vr(f,3)),this.setAttribute("normal",new vr(m,3)),this.setAttribute("uv",new vr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oA(e.width,e.height,e.widthSegments,e.heightSegments)}}var Uee=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Fee=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kee=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Lee=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Pee=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Oee=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Dee=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Nee=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Qee=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Hee=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,jee=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,zee=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Gee=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Vee=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Wee=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Kee=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Yee=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Xee=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Zee=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Jee=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,qee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$ee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ete=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,tte=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,rte=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,nte=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ite=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ste=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,ate=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ote=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lte="gl_FragColor = linearToOutputTexel( gl_FragColor );",Ate=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,cte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ute=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,hte=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dte=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,fte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,pte=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mte=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,gte=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,vte=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,yte=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,wte=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bte=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,_te=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xte=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Ete=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Bte=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Mte=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Tte=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Cte=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ste=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Ite=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Rte=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Ute=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Fte=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,kte=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Lte=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Pte=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ote=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Dte=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Nte=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Qte=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Hte=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jte=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,zte=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Gte=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Vte=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Wte=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Kte=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Yte=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Xte=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Zte=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Jte=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qte=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$te=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ere=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,tre=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rre=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,nre=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ire=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sre=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,are=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ore=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,lre=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Are=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,cre=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ure=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,hre=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dre=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,fre=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,pre=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,mre=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,gre=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,vre=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,yre=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,wre=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bre=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,_re=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,xre=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Ere=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Bre=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Mre=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Tre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Cre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Sre=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Ire=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Rre=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ure=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Fre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kre=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Lre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Pre=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ore=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Dre=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Nre=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Qre=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Hre=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jre=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zre=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Gre=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Vre=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Wre=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kre=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Yre=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xre=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Zre=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jre=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,qre=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,$re=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ene=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tne=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,rne=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nne=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ine=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sne=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ane=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,one=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lne=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ane=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cne=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Bt={alphahash_fragment:Uee,alphahash_pars_fragment:Fee,alphamap_fragment:kee,alphamap_pars_fragment:Lee,alphatest_fragment:Pee,alphatest_pars_fragment:Oee,aomap_fragment:Dee,aomap_pars_fragment:Nee,batching_pars_vertex:Qee,batching_vertex:Hee,begin_vertex:jee,beginnormal_vertex:zee,bsdfs:Gee,iridescence_fragment:Vee,bumpmap_pars_fragment:Wee,clipping_planes_fragment:Kee,clipping_planes_pars_fragment:Yee,clipping_planes_pars_vertex:Xee,clipping_planes_vertex:Zee,color_fragment:Jee,color_pars_fragment:qee,color_pars_vertex:$ee,color_vertex:ete,common:tte,cube_uv_reflection_fragment:rte,defaultnormal_vertex:nte,displacementmap_pars_vertex:ite,displacementmap_vertex:ste,emissivemap_fragment:ate,emissivemap_pars_fragment:ote,colorspace_fragment:lte,colorspace_pars_fragment:Ate,envmap_fragment:cte,envmap_common_pars_fragment:ute,envmap_pars_fragment:hte,envmap_pars_vertex:dte,envmap_physical_pars_fragment:Ete,envmap_vertex:fte,fog_vertex:pte,fog_pars_vertex:mte,fog_fragment:gte,fog_pars_fragment:vte,gradientmap_pars_fragment:yte,lightmap_pars_fragment:wte,lights_lambert_fragment:bte,lights_lambert_pars_fragment:_te,lights_pars_begin:xte,lights_toon_fragment:Bte,lights_toon_pars_fragment:Mte,lights_phong_fragment:Tte,lights_phong_pars_fragment:Cte,lights_physical_fragment:Ste,lights_physical_pars_fragment:Ite,lights_fragment_begin:Rte,lights_fragment_maps:Ute,lights_fragment_end:Fte,logdepthbuf_fragment:kte,logdepthbuf_pars_fragment:Lte,logdepthbuf_pars_vertex:Pte,logdepthbuf_vertex:Ote,map_fragment:Dte,map_pars_fragment:Nte,map_particle_fragment:Qte,map_particle_pars_fragment:Hte,metalnessmap_fragment:jte,metalnessmap_pars_fragment:zte,morphinstance_vertex:Gte,morphcolor_vertex:Vte,morphnormal_vertex:Wte,morphtarget_pars_vertex:Kte,morphtarget_vertex:Yte,normal_fragment_begin:Xte,normal_fragment_maps:Zte,normal_pars_fragment:Jte,normal_pars_vertex:qte,normal_vertex:$te,normalmap_pars_fragment:ere,clearcoat_normal_fragment_begin:tre,clearcoat_normal_fragment_maps:rre,clearcoat_pars_fragment:nre,iridescence_pars_fragment:ire,opaque_fragment:sre,packing:are,premultiplied_alpha_fragment:ore,project_vertex:lre,dithering_fragment:Are,dithering_pars_fragment:cre,roughnessmap_fragment:ure,roughnessmap_pars_fragment:hre,shadowmap_pars_fragment:dre,shadowmap_pars_vertex:fre,shadowmap_vertex:pre,shadowmask_pars_fragment:mre,skinbase_vertex:gre,skinning_pars_vertex:vre,skinning_vertex:yre,skinnormal_vertex:wre,specularmap_fragment:bre,specularmap_pars_fragment:_re,tonemapping_fragment:xre,tonemapping_pars_fragment:Ere,transmission_fragment:Bre,transmission_pars_fragment:Mre,uv_pars_fragment:Tre,uv_pars_vertex:Cre,uv_vertex:Sre,worldpos_vertex:Ire,background_vert:Rre,background_frag:Ure,backgroundCube_vert:Fre,backgroundCube_frag:kre,cube_vert:Lre,cube_frag:Pre,depth_vert:Ore,depth_frag:Dre,distanceRGBA_vert:Nre,distanceRGBA_frag:Qre,equirect_vert:Hre,equirect_frag:jre,linedashed_vert:zre,linedashed_frag:Gre,meshbasic_vert:Vre,meshbasic_frag:Wre,meshlambert_vert:Kre,meshlambert_frag:Yre,meshmatcap_vert:Xre,meshmatcap_frag:Zre,meshnormal_vert:Jre,meshnormal_frag:qre,meshphong_vert:$re,meshphong_frag:ene,meshphysical_vert:tne,meshphysical_frag:rne,meshtoon_vert:nne,meshtoon_frag:ine,points_vert:sne,points_frag:ane,shadow_vert:one,shadow_frag:lne,sprite_vert:Ane,sprite_frag:cne},Ge={common:{diffuse:{value:new He(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new dt}},envmap:{envMap:{value:null},envMapRotation:{value:new dt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new dt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new dt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new dt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new dt},normalScale:{value:new Ke(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new dt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new dt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new dt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new dt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new He(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new He(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0},uvTransform:{value:new dt}},sprite:{diffuse:{value:new He(16777215)},opacity:{value:1},center:{value:new Ke(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}}},Io={basic:{uniforms:Ti([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:Ti([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new He(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:Ti([Ge.common,Ge.specularmap,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,Ge.lights,{emissive:{value:new He(0)},specular:{value:new He(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:Ti([Ge.common,Ge.envmap,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.roughnessmap,Ge.metalnessmap,Ge.fog,Ge.lights,{emissive:{value:new He(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:Ti([Ge.common,Ge.aomap,Ge.lightmap,Ge.emissivemap,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.gradientmap,Ge.fog,Ge.lights,{emissive:{value:new He(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:Ti([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,Ge.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:Ti([Ge.points,Ge.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:Ti([Ge.common,Ge.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:Ti([Ge.common,Ge.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:Ti([Ge.common,Ge.bumpmap,Ge.normalmap,Ge.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.meshnormal_vert,fragmentShader:Bt.meshnormal_frag},sprite:{uniforms:Ti([Ge.sprite,Ge.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new dt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new dt}},vertexShader:Bt.backgroundCube_vert,fragmentShader:Bt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:Ti([Ge.common,Ge.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:Ti([Ge.lights,Ge.fog,{color:{value:new He(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};Io.physical={uniforms:Ti([Io.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new dt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new dt},clearcoatNormalScale:{value:new Ke(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new dt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new dt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new dt},sheen:{value:0},sheenColor:{value:new He(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new dt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new dt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new dt},transmissionSamplerSize:{value:new Ke},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new dt},attenuationDistance:{value:0},attenuationColor:{value:new He(0)},specularColor:{value:new He(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new dt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new dt},anisotropyVector:{value:new Ke},anisotropyMap:{value:null},anisotropyMapTransform:{value:new dt}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};const Iv={r:0,b:0,g:0},Hc=new en,une=new je;function hne(t,e,r,n,i,s,a){const o=new He(0);let l=s===!0?0:1,A,c,u=null,h=0,d=null;function f(v){let y=v.isScene===!0?v.background:null;return y&&y.isTexture&&(y=(v.backgroundBlurriness>0?r:e).get(y)),y}function m(v){let y=!1;const _=f(v);_===null?p(o,l):_&&_.isColor&&(p(_,1),y=!0);const E=t.xr.getEnvironmentBlendMode();E==="additive"?n.buffers.color.setClear(0,0,0,1,a):E==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(t.autoClear||y)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function g(v,y){const _=f(y);_&&(_.isCubeTexture||_.mapping===A_)?(c===void 0&&(c=new Ar(new g0(1,1,1),new fn({name:"BackgroundCubeMaterial",uniforms:Of(Io.backgroundCube.uniforms),vertexShader:Io.backgroundCube.vertexShader,fragmentShader:Io.backgroundCube.fragmentShader,side:ti,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(E,x,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),Hc.copy(y.backgroundRotation),Hc.x*=-1,Hc.y*=-1,Hc.z*=-1,_.isCubeTexture&&_.isRenderTargetTexture===!1&&(Hc.y*=-1,Hc.z*=-1),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(une.makeRotationFromEuler(Hc)),c.material.toneMapped=xt.getTransfer(_.colorSpace)!==Er,(u!==_||h!==_.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,u=_,h=_.version,d=t.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(A===void 0&&(A=new Ar(new oA(2,2),new fn({name:"BackgroundMaterial",uniforms:Of(Io.background.uniforms),vertexShader:Io.background.vertexShader,fragmentShader:Io.background.fragmentShader,side:Ns,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),Object.defineProperty(A.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(A)),A.material.uniforms.t2D.value=_,A.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,A.material.toneMapped=xt.getTransfer(_.colorSpace)!==Er,_.matrixAutoUpdate===!0&&_.updateMatrix(),A.material.uniforms.uvTransform.value.copy(_.matrix),(u!==_||h!==_.version||d!==t.toneMapping)&&(A.material.needsUpdate=!0,u=_,h=_.version,d=t.toneMapping),A.layers.enableAll(),v.unshift(A,A.geometry,A.material,0,0,null))}function p(v,y){v.getRGB(Iv,M8(t)),n.buffers.color.setClear(Iv.r,Iv.g,Iv.b,y,a)}return{getClearColor:function(){return o},setClearColor:function(v,y=1){o.set(v),l=y,p(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,p(o,l)},render:m,addToRenderList:g}}function dne(t,e){const r=t.getParameter(t.MAX_VERTEX_ATTRIBS),n={},i=h(null);let s=i,a=!1;function o(I,L,D,w,b){let S=!1;const F=u(w,D,L);s!==F&&(s=F,A(s.object)),S=d(I,w,D,b),S&&f(I,w,D,b),b!==null&&e.update(b,t.ELEMENT_ARRAY_BUFFER),(S||a)&&(a=!1,_(I,L,D,w),b!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(b).buffer))}function l(){return t.createVertexArray()}function A(I){return t.bindVertexArray(I)}function c(I){return t.deleteVertexArray(I)}function u(I,L,D){const w=D.wireframe===!0;let b=n[I.id];b===void 0&&(b={},n[I.id]=b);let S=b[L.id];S===void 0&&(S={},b[L.id]=S);let F=S[w];return F===void 0&&(F=h(l()),S[w]=F),F}function h(I){const L=[],D=[],w=[];for(let b=0;b<r;b++)L[b]=0,D[b]=0,w[b]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:D,attributeDivisors:w,object:I,attributes:{},index:null}}function d(I,L,D,w){const b=s.attributes,S=L.attributes;let F=0;const k=D.getAttributes();for(const Q in k)if(k[Q].location>=0){const z=b[Q];let j=S[Q];if(j===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(j=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(j=I.instanceColor)),z===void 0||z.attribute!==j||j&&z.data!==j.data)return!0;F++}return s.attributesNum!==F||s.index!==w}function f(I,L,D,w){const b={},S=L.attributes;let F=0;const k=D.getAttributes();for(const Q in k)if(k[Q].location>=0){let z=S[Q];z===void 0&&(Q==="instanceMatrix"&&I.instanceMatrix&&(z=I.instanceMatrix),Q==="instanceColor"&&I.instanceColor&&(z=I.instanceColor));const j={};j.attribute=z,z&&z.data&&(j.data=z.data),b[Q]=j,F++}s.attributes=b,s.attributesNum=F,s.index=w}function m(){const I=s.newAttributes;for(let L=0,D=I.length;L<D;L++)I[L]=0}function g(I){p(I,0)}function p(I,L){const D=s.newAttributes,w=s.enabledAttributes,b=s.attributeDivisors;D[I]=1,w[I]===0&&(t.enableVertexAttribArray(I),w[I]=1),b[I]!==L&&(t.vertexAttribDivisor(I,L),b[I]=L)}function v(){const I=s.newAttributes,L=s.enabledAttributes;for(let D=0,w=L.length;D<w;D++)L[D]!==I[D]&&(t.disableVertexAttribArray(D),L[D]=0)}function y(I,L,D,w,b,S,F){F===!0?t.vertexAttribIPointer(I,L,D,b,S):t.vertexAttribPointer(I,L,D,w,b,S)}function _(I,L,D,w){m();const b=w.attributes,S=D.getAttributes(),F=L.defaultAttributeValues;for(const k in S){const Q=S[k];if(Q.location>=0){let z=b[k];if(z===void 0&&(k==="instanceMatrix"&&I.instanceMatrix&&(z=I.instanceMatrix),k==="instanceColor"&&I.instanceColor&&(z=I.instanceColor)),z!==void 0){const j=z.normalized,T=z.itemSize,H=e.get(z);if(H===void 0)continue;const me=H.buffer,ee=H.type,U=H.bytesPerElement,se=ee===t.INT||ee===t.UNSIGNED_INT||z.gpuType===EI;if(z.isInterleavedBufferAttribute){const le=z.data,Ae=le.stride,ge=z.offset;if(le.isInstancedInterleavedBuffer){for(let ne=0;ne<Q.locationSize;ne++)p(Q.location+ne,le.meshPerAttribute);I.isInstancedMesh!==!0&&w._maxInstanceCount===void 0&&(w._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let ne=0;ne<Q.locationSize;ne++)g(Q.location+ne);t.bindBuffer(t.ARRAY_BUFFER,me);for(let ne=0;ne<Q.locationSize;ne++)y(Q.location+ne,T/Q.locationSize,ee,j,Ae*U,(ge+T/Q.locationSize*ne)*U,se)}else{if(z.isInstancedBufferAttribute){for(let le=0;le<Q.locationSize;le++)p(Q.location+le,z.meshPerAttribute);I.isInstancedMesh!==!0&&w._maxInstanceCount===void 0&&(w._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let le=0;le<Q.locationSize;le++)g(Q.location+le);t.bindBuffer(t.ARRAY_BUFFER,me);for(let le=0;le<Q.locationSize;le++)y(Q.location+le,T/Q.locationSize,ee,j,T*U,T/Q.locationSize*le*U,se)}}else if(F!==void 0){const j=F[k];if(j!==void 0)switch(j.length){case 2:t.vertexAttrib2fv(Q.location,j);break;case 3:t.vertexAttrib3fv(Q.location,j);break;case 4:t.vertexAttrib4fv(Q.location,j);break;default:t.vertexAttrib1fv(Q.location,j)}}}}v()}function E(){M();for(const I in n){const L=n[I];for(const D in L){const w=L[D];for(const b in w)c(w[b].object),delete w[b];delete L[D]}delete n[I]}}function x(I){if(n[I.id]===void 0)return;const L=n[I.id];for(const D in L){const w=L[D];for(const b in w)c(w[b].object),delete w[b];delete L[D]}delete n[I.id]}function B(I){for(const L in n){const D=n[L];if(D[I.id]===void 0)continue;const w=D[I.id];for(const b in w)c(w[b].object),delete w[b];delete D[I.id]}}function M(){R(),a=!0,s!==i&&(s=i,A(s.object))}function R(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:M,resetDefaultState:R,dispose:E,releaseStatesOfGeometry:x,releaseStatesOfProgram:B,initAttributes:m,enableAttribute:g,disableUnusedAttributes:v}}function fne(t,e,r){let n;function i(A){n=A}function s(A,c){t.drawArrays(n,A,c),r.update(c,n,1)}function a(A,c,u){u!==0&&(t.drawArraysInstanced(n,A,c,u),r.update(c,n,u))}function o(A,c,u){if(u===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,A,0,c,0,u);let h=0;for(let d=0;d<u;d++)h+=c[d];r.update(h,n,1)}function l(A,c,u,h){if(u===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let f=0;f<A.length;f++)a(A[f],c[f],h[f]);else{d.multiDrawArraysInstancedWEBGL(n,A,0,c,0,h,0,u);let f=0;for(let m=0;m<u;m++)f+=c[m];for(let m=0;m<h.length;m++)r.update(f,n,h[m])}}this.setMode=i,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function pne(t,e,r,n){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function a(B){return!(B!==kn&&n.convert(B)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(B){const M=B===No&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(B!==tA&&n.convert(B)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&B!==mi&&!M)}function l(B){if(B==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let A=r.precision!==void 0?r.precision:"highp";const c=l(A);c!==A&&(console.warn("THREE.WebGLRenderer:",A,"not supported, using",c,"instead."),A=c);const u=r.logarithmicDepthBuffer===!0,h=r.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(h===!0){const B=e.get("EXT_clip_control");B.clipControlEXT(B.LOWER_LEFT_EXT,B.ZERO_TO_ONE_EXT)}const d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),v=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),y=t.getParameter(t.MAX_VARYING_VECTORS),_=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),E=f>0,x=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:A,logarithmicDepthBuffer:u,reverseDepthBuffer:h,maxTextures:d,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:E,maxSamples:x}}function mne(t){const e=this;let r=null,n=0,i=!1,s=!1;const a=new So,o=new dt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){const d=u.length!==0||h||n!==0||i;return i=h,n=u.length,d},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,h){r=c(u,h,0)},this.setState=function(u,h,d){const f=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,p=t.get(u);if(!i||f===null||f.length===0||s&&!g)s?c(null):A();else{const v=s?0:n,y=v*4;let _=p.clippingState||null;l.value=_,_=c(f,h,y,d);for(let E=0;E!==y;++E)_[E]=r[E];p.clippingState=_,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=v}};function A(){l.value!==r&&(l.value=r,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(u,h,d,f){const m=u!==null?u.length:0;let g=null;if(m!==0){if(g=l.value,f!==!0||g===null){const p=d+m*4,v=h.matrixWorldInverse;o.getNormalMatrix(v),(g===null||g.length<p)&&(g=new Float32Array(p));for(let y=0,_=d;y!==m;++y,_+=4)a.copy(u[y]).applyMatrix4(v,o),a.normal.toArray(g,_),g[_+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function gne(t){let e=new WeakMap;function r(a,o){return o===Ng?a.mapping=If:o===tC&&(a.mapping=Rf),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===Ng||o===tC)if(e.has(a)){const l=e.get(a).texture;return r(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const A=new Cee(l.height);return A.fromEquirectangularTexture(t,a),e.set(a,A),a.addEventListener("dispose",i),r(A.texture,a.mapping)}else return null}}return a}function i(a){const o=a.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class v0 extends T8{constructor(e=-1,r=1,n=1,i=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=n,this.bottom=i,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,n,i,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=i+r,l=i-r;if(this.view!==null&&this.view.enabled){const A=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=A*this.view.offsetX,a=s+A*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}const Od=4,_k=[.125,.215,.35,.446,.526,.582],au=20,OE=new v0,xk=new He;let DE=null,NE=0,QE=0,HE=!1;const tu=(1+Math.sqrt(5))/2,yh=1/tu,Ek=[new Y(-tu,yh,0),new Y(tu,yh,0),new Y(-yh,0,tu),new Y(yh,0,tu),new Y(0,tu,-yh),new Y(0,tu,yh),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)];class Bk{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,n=.1,i=100){DE=this._renderer.getRenderTarget(),NE=this._renderer.getActiveCubeFace(),QE=this._renderer.getActiveMipmapLevel(),HE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),r>0&&this._blur(s,0,0,r),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Ck(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Tk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(DE,NE,QE),this._renderer.xr.enabled=HE,e.scissorTest=!1,Rv(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===If||e.mapping===Rf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),DE=this._renderer.getRenderTarget(),NE=this._renderer.getActiveCubeFace(),QE=this._renderer.getActiveMipmapLevel(),HE=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=r||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,n={magFilter:Un,minFilter:Un,generateMipmaps:!1,type:No,format:kn,colorSpace:Bn,depthBuffer:!1},i=Mk(e,r,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Mk(e,r,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=vne(s)),this._blurMaterial=yne(s,e,r)}return i}_compileMaterial(e){const r=new Ar(this._lodPlanes[0],e);this._renderer.compile(r,OE)}_sceneToCubeUV(e,r,n,i){const s=new In(90,1,r,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,A=l.autoClear,c=l.toneMapping;l.getClearColor(xk),l.toneMapping=cc,l.autoClear=!1;const u=new Zi({name:"PMREM.Background",side:ti,depthWrite:!1,depthTest:!1}),h=new Ar(new g0,u);let d=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,d=!0):(u.color.copy(xk),d=!0);for(let m=0;m<6;m++){const g=m%3;g===0?(s.up.set(0,a[m],0),s.lookAt(o[m],0,0)):g===1?(s.up.set(0,0,a[m]),s.lookAt(0,o[m],0)):(s.up.set(0,a[m],0),s.lookAt(0,0,o[m]));const p=this._cubeSize;Rv(i,g*p,m>2?p:0,p,p),l.setRenderTarget(i),d&&l.render(h,s),l.render(e,s)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=c,l.autoClear=A,e.background=f}_textureToCubeUV(e,r){const n=this._renderer,i=e.mapping===If||e.mapping===Rf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Ck()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Tk());const s=i?this._cubemapMaterial:this._equirectMaterial,a=new Ar(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;Rv(r,0,0,3*l,2*l),n.setRenderTarget(r),n.render(a,OE)}_applyPMREM(e){const r=this._renderer,n=r.autoClear;r.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=Ek[(i-s-1)%Ek.length];this._blur(e,s-1,s,a,o)}r.autoClear=n}_blur(e,r,n,i,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,r,n,i,"latitudinal",s),this._halfBlur(a,e,n,n,i,"longitudinal",s)}_halfBlur(e,r,n,i,s,a,o){const l=this._renderer,A=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new Ar(this._lodPlanes[i],A),h=A.uniforms,d=this._sizeLods[n]-1,f=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*au-1),m=s/f,g=isFinite(s)?1+Math.floor(c*m):au;g>au&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${au}`);const p=[];let v=0;for(let B=0;B<au;++B){const M=B/m,R=Math.exp(-M*M/2);p.push(R),B===0?v+=R:B<g&&(v+=2*R)}for(let B=0;B<p.length;B++)p[B]=p[B]/v;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=p,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o);const{_lodMax:y}=this;h.dTheta.value=f,h.mipInt.value=y-n;const _=this._sizeLods[i],E=3*_*(i>y-Od?i-y+Od:0),x=4*(this._cubeSize-_);Rv(r,E,x,3*_,2*_),l.setRenderTarget(r),l.render(u,OE)}}function vne(t){const e=[],r=[],n=[];let i=t;const s=t-Od+1+_k.length;for(let a=0;a<s;a++){const o=Math.pow(2,i);r.push(o);let l=1/o;a>t-Od?l=_k[a-t+Od-1]:a===0&&(l=0),n.push(l);const A=1/(o-2),c=-A,u=1+A,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,m=3,g=2,p=1,v=new Float32Array(m*f*d),y=new Float32Array(g*f*d),_=new Float32Array(p*f*d);for(let x=0;x<d;x++){const B=x%3*2/3-1,M=x>2?0:-1,R=[B,M,0,B+2/3,M,0,B+2/3,M+1,0,B,M,0,B+2/3,M+1,0,B,M+1,0];v.set(R,m*f*x),y.set(h,g*f*x);const I=[x,x,x,x,x,x];_.set(I,p*f*x)}const E=new $t;E.setAttribute("position",new lt(v,m)),E.setAttribute("uv",new lt(y,g)),E.setAttribute("faceIndex",new lt(_,p)),e.push(E),i>Od&&i--}return{lodPlanes:e,sizeLods:r,sigmas:n}}function Mk(t,e,r){const n=new $o(t,e,r);return n.texture.mapping=A_,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Rv(t,e,r,n,i){t.viewport.set(e,r,n,i),t.scissor.set(e,r,n,i)}function yne(t,e,r){const n=new Float32Array(au),i=new Y(0,1,0);return new fn({name:"SphericalGaussianBlur",defines:{n:au,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:PI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:zl,depthTest:!1,depthWrite:!1})}function Tk(){return new fn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:PI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:zl,depthTest:!1,depthWrite:!1})}function Ck(){return new fn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:PI(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:zl,depthTest:!1,depthWrite:!1})}function PI(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function wne(t){let e=new WeakMap,r=null;function n(o){if(o&&o.isTexture){const l=o.mapping,A=l===Ng||l===tC,c=l===If||l===Rf;if(A||c){let u=e.get(o);const h=u!==void 0?u.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==h)return r===null&&(r=new Bk(t)),u=A?r.fromEquirectangular(o,u):r.fromCubemap(o,u),u.texture.pmremVersion=o.pmremVersion,e.set(o,u),u.texture;if(u!==void 0)return u.texture;{const d=o.image;return A&&d&&d.height>0||c&&d&&i(d)?(r===null&&(r=new Bk(t)),u=A?r.fromEquirectangular(o):r.fromCubemap(o),u.texture.pmremVersion=o.pmremVersion,e.set(o,u),o.addEventListener("dispose",s),u.texture):null}}}return o}function i(o){let l=0;const A=6;for(let c=0;c<A;c++)o[c]!==void 0&&l++;return l===A}function s(o){const l=o.target;l.removeEventListener("dispose",s);const A=e.get(l);A!==void 0&&(e.delete(l),A.dispose())}function a(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:n,dispose:a}}function bne(t){const e={};function r(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(n){return r(n)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(n){const i=r(n);return i===null&&Tw("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function _ne(t,e,r,n){const i={},s=new WeakMap;function a(u){const h=u.target;h.index!==null&&e.remove(h.index);for(const f in h.attributes)e.remove(h.attributes[f]);for(const f in h.morphAttributes){const m=h.morphAttributes[f];for(let g=0,p=m.length;g<p;g++)e.remove(m[g])}h.removeEventListener("dispose",a),delete i[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function o(u,h){return i[h.id]===!0||(h.addEventListener("dispose",a),i[h.id]=!0,r.memory.geometries++),h}function l(u){const h=u.attributes;for(const f in h)e.update(h[f],t.ARRAY_BUFFER);const d=u.morphAttributes;for(const f in d){const m=d[f];for(let g=0,p=m.length;g<p;g++)e.update(m[g],t.ARRAY_BUFFER)}}function A(u){const h=[],d=u.index,f=u.attributes.position;let m=0;if(d!==null){const v=d.array;m=d.version;for(let y=0,_=v.length;y<_;y+=3){const E=v[y+0],x=v[y+1],B=v[y+2];h.push(E,x,x,B,B,E)}}else if(f!==void 0){const v=f.array;m=f.version;for(let y=0,_=v.length/3-1;y<_;y+=3){const E=y+0,x=y+1,B=y+2;h.push(E,x,x,B,B,E)}}else return;const g=new(_8(h)?B8:h_)(h,1);g.version=m;const p=s.get(u);p&&e.remove(p),s.set(u,g)}function c(u){const h=s.get(u);if(h){const d=u.index;d!==null&&h.version<d.version&&A(u)}else A(u);return s.get(u)}return{get:o,update:l,getWireframeAttribute:c}}function xne(t,e,r){let n;function i(h){n=h}let s,a;function o(h){s=h.type,a=h.bytesPerElement}function l(h,d){t.drawElements(n,d,s,h*a),r.update(d,n,1)}function A(h,d,f){f!==0&&(t.drawElementsInstanced(n,d,s,h*a,f),r.update(d,n,f))}function c(h,d,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,d,0,s,h,0,f);let m=0;for(let g=0;g<f;g++)m+=d[g];r.update(m,n,1)}function u(h,d,f,m){if(f===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let p=0;p<h.length;p++)A(h[p]/a,d[p],m[p]);else{g.multiDrawElementsInstancedWEBGL(n,d,0,s,h,0,m,0,f);let p=0;for(let v=0;v<f;v++)p+=d[v];for(let v=0;v<m.length;v++)r.update(p,n,m[v])}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=A,this.renderMultiDraw=c,this.renderMultiDrawInstances=u}function Ene(t){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(r.calls++,a){case t.TRIANGLES:r.triangles+=o*(s/3);break;case t.LINES:r.lines+=o*(s/2);break;case t.LINE_STRIP:r.lines+=o*(s-1);break;case t.LINE_LOOP:r.lines+=o*s;break;case t.POINTS:r.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:i,update:n}}function Bne(t,e,r){const n=new WeakMap,i=new kt;function s(a,o,l){const A=a.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,u=c!==void 0?c.length:0;let h=n.get(o);if(h===void 0||h.count!==u){let d=function(){M.dispose(),n.delete(o),o.removeEventListener("dispose",d)};h!==void 0&&h.texture.dispose();const f=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,g=o.morphAttributes.color!==void 0,p=o.morphAttributes.position||[],v=o.morphAttributes.normal||[],y=o.morphAttributes.color||[];let _=0;f===!0&&(_=1),m===!0&&(_=2),g===!0&&(_=3);let E=o.attributes.position.count*_,x=1;E>e.maxTextureSize&&(x=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const B=new Float32Array(E*x*4*u),M=new x8(B,E,x,u);M.type=mi,M.needsUpdate=!0;const R=_*4;for(let I=0;I<u;I++){const L=p[I],D=v[I],w=y[I],b=E*x*4*I;for(let S=0;S<L.count;S++){const F=S*R;f===!0&&(i.fromBufferAttribute(L,S),B[b+F+0]=i.x,B[b+F+1]=i.y,B[b+F+2]=i.z,B[b+F+3]=0),m===!0&&(i.fromBufferAttribute(D,S),B[b+F+4]=i.x,B[b+F+5]=i.y,B[b+F+6]=i.z,B[b+F+7]=0),g===!0&&(i.fromBufferAttribute(w,S),B[b+F+8]=i.x,B[b+F+9]=i.y,B[b+F+10]=i.z,B[b+F+11]=w.itemSize===4?i.w:1)}}h={count:u,texture:M,size:new Ke(E,x)},n.set(o,h),o.addEventListener("dispose",d)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",a.morphTexture,r);else{let d=0;for(let m=0;m<A.length;m++)d+=A[m];const f=o.morphTargetsRelative?1:1-d;l.getUniforms().setValue(t,"morphTargetBaseInfluence",f),l.getUniforms().setValue(t,"morphTargetInfluences",A)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,r),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:s}}function Mne(t,e,r,n){let i=new WeakMap;function s(l){const A=n.render.frame,c=l.geometry,u=e.get(l,c);if(i.get(u)!==A&&(e.update(u),i.set(u,A)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==A&&(r.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&r.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,A))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==A&&(h.update(),i.set(h,A))}return u}function a(){i=new WeakMap}function o(l){const A=l.target;A.removeEventListener("dispose",o),r.remove(A.instanceMatrix),A.instanceColor!==null&&r.remove(A.instanceColor)}return{update:s,dispose:a}}class OI extends Sr{constructor(e,r,n,i,s,a,o,l,A,c=sf){if(c!==sf&&c!==Ff)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===sf&&(n=vc),n===void 0&&c===Ff&&(n=Uf),super(null,i,s,a,o,l,c,n,A),this.isDepthTexture=!0,this.image={width:e,height:r},this.magFilter=o!==void 0?o:Vn,this.minFilter=l!==void 0?l:Vn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}const I8=new Sr,Sk=new OI(1,1),R8=new x8,U8=new cee,F8=new C8,Ik=[],Rk=[],Uk=new Float32Array(16),Fk=new Float32Array(9),kk=new Float32Array(4);function Yf(t,e,r){const n=t[0];if(n<=0||n>0)return t;const i=e*r;let s=Ik[i];if(s===void 0&&(s=new Float32Array(i),Ik[i]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=r,t[a].toArray(s,o)}return s}function Ln(t,e){if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Pn(t,e){for(let r=0,n=e.length;r<n;r++)t[r]=e[r]}function f_(t,e){let r=Rk[e];r===void 0&&(r=new Int32Array(e),Rk[e]=r);for(let n=0;n!==e;++n)r[n]=t.allocateTextureUnit();return r}function Tne(t,e){const r=this.cache;r[0]!==e&&(t.uniform1f(this.addr,e),r[0]=e)}function Cne(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Ln(r,e))return;t.uniform2fv(this.addr,e),Pn(r,e)}}function Sne(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(Ln(r,e))return;t.uniform3fv(this.addr,e),Pn(r,e)}}function Ine(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Ln(r,e))return;t.uniform4fv(this.addr,e),Pn(r,e)}}function Rne(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(Ln(r,e))return;t.uniformMatrix2fv(this.addr,!1,e),Pn(r,e)}else{if(Ln(r,n))return;kk.set(n),t.uniformMatrix2fv(this.addr,!1,kk),Pn(r,n)}}function Une(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(Ln(r,e))return;t.uniformMatrix3fv(this.addr,!1,e),Pn(r,e)}else{if(Ln(r,n))return;Fk.set(n),t.uniformMatrix3fv(this.addr,!1,Fk),Pn(r,n)}}function Fne(t,e){const r=this.cache,n=e.elements;if(n===void 0){if(Ln(r,e))return;t.uniformMatrix4fv(this.addr,!1,e),Pn(r,e)}else{if(Ln(r,n))return;Uk.set(n),t.uniformMatrix4fv(this.addr,!1,Uk),Pn(r,n)}}function kne(t,e){const r=this.cache;r[0]!==e&&(t.uniform1i(this.addr,e),r[0]=e)}function Lne(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Ln(r,e))return;t.uniform2iv(this.addr,e),Pn(r,e)}}function Pne(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Ln(r,e))return;t.uniform3iv(this.addr,e),Pn(r,e)}}function One(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Ln(r,e))return;t.uniform4iv(this.addr,e),Pn(r,e)}}function Dne(t,e){const r=this.cache;r[0]!==e&&(t.uniform1ui(this.addr,e),r[0]=e)}function Nne(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Ln(r,e))return;t.uniform2uiv(this.addr,e),Pn(r,e)}}function Qne(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Ln(r,e))return;t.uniform3uiv(this.addr,e),Pn(r,e)}}function Hne(t,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Ln(r,e))return;t.uniform4uiv(this.addr,e),Pn(r,e)}}function jne(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(Sk.compareFunction=b8,s=Sk):s=I8,r.setTexture2D(e||s,i)}function zne(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(e||U8,i)}function Gne(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTextureCube(e||F8,i)}function Vne(t,e,r){const n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(t.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(e||R8,i)}function Wne(t){switch(t){case 5126:return Tne;case 35664:return Cne;case 35665:return Sne;case 35666:return Ine;case 35674:return Rne;case 35675:return Une;case 35676:return Fne;case 5124:case 35670:return kne;case 35667:case 35671:return Lne;case 35668:case 35672:return Pne;case 35669:case 35673:return One;case 5125:return Dne;case 36294:return Nne;case 36295:return Qne;case 36296:return Hne;case 35678:case 36198:case 36298:case 36306:case 35682:return jne;case 35679:case 36299:case 36307:return zne;case 35680:case 36300:case 36308:case 36293:return Gne;case 36289:case 36303:case 36311:case 36292:return Vne}}function Kne(t,e){t.uniform1fv(this.addr,e)}function Yne(t,e){const r=Yf(e,this.size,2);t.uniform2fv(this.addr,r)}function Xne(t,e){const r=Yf(e,this.size,3);t.uniform3fv(this.addr,r)}function Zne(t,e){const r=Yf(e,this.size,4);t.uniform4fv(this.addr,r)}function Jne(t,e){const r=Yf(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function qne(t,e){const r=Yf(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function $ne(t,e){const r=Yf(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function eie(t,e){t.uniform1iv(this.addr,e)}function tie(t,e){t.uniform2iv(this.addr,e)}function rie(t,e){t.uniform3iv(this.addr,e)}function nie(t,e){t.uniform4iv(this.addr,e)}function iie(t,e){t.uniform1uiv(this.addr,e)}function sie(t,e){t.uniform2uiv(this.addr,e)}function aie(t,e){t.uniform3uiv(this.addr,e)}function oie(t,e){t.uniform4uiv(this.addr,e)}function lie(t,e,r){const n=this.cache,i=e.length,s=f_(r,i);Ln(n,s)||(t.uniform1iv(this.addr,s),Pn(n,s));for(let a=0;a!==i;++a)r.setTexture2D(e[a]||I8,s[a])}function Aie(t,e,r){const n=this.cache,i=e.length,s=f_(r,i);Ln(n,s)||(t.uniform1iv(this.addr,s),Pn(n,s));for(let a=0;a!==i;++a)r.setTexture3D(e[a]||U8,s[a])}function cie(t,e,r){const n=this.cache,i=e.length,s=f_(r,i);Ln(n,s)||(t.uniform1iv(this.addr,s),Pn(n,s));for(let a=0;a!==i;++a)r.setTextureCube(e[a]||F8,s[a])}function uie(t,e,r){const n=this.cache,i=e.length,s=f_(r,i);Ln(n,s)||(t.uniform1iv(this.addr,s),Pn(n,s));for(let a=0;a!==i;++a)r.setTexture2DArray(e[a]||R8,s[a])}function hie(t){switch(t){case 5126:return Kne;case 35664:return Yne;case 35665:return Xne;case 35666:return Zne;case 35674:return Jne;case 35675:return qne;case 35676:return $ne;case 5124:case 35670:return eie;case 35667:case 35671:return tie;case 35668:case 35672:return rie;case 35669:case 35673:return nie;case 5125:return iie;case 36294:return sie;case 36295:return aie;case 36296:return oie;case 35678:case 36198:case 36298:case 36306:case 35682:return lie;case 35679:case 36299:case 36307:return Aie;case 35680:case 36300:case 36308:case 36293:return cie;case 36289:case 36303:case 36311:case 36292:return uie}}class die{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.type=r.type,this.setValue=Wne(r.type)}}class fie{constructor(e,r,n){this.id=e,this.addr=n,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=hie(r.type)}}class pie{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,n){const i=this.seq;for(let s=0,a=i.length;s!==a;++s){const o=i[s];o.setValue(e,r[o.id],n)}}}const jE=/(\w+)(\])?(\[|\.)?/g;function Lk(t,e){t.seq.push(e),t.map[e.id]=e}function mie(t,e,r){const n=t.name,i=n.length;for(jE.lastIndex=0;;){const s=jE.exec(n),a=jE.lastIndex;let o=s[1];const l=s[2]==="]",A=s[3];if(l&&(o=o|0),A===void 0||A==="["&&a+2===i){Lk(r,A===void 0?new die(o,t,e):new fie(o,t,e));break}else{let c=r.map[o];c===void 0&&(c=new pie(o),Lk(r,c)),r=c}}}class Cw{constructor(e,r){this.seq=[],this.map={};const n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(r,i),a=e.getUniformLocation(r,s.name);mie(s,a,this)}}setValue(e,r,n,i){const s=this.map[r];s!==void 0&&s.setValue(e,n,i)}setOptional(e,r,n){const i=r[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,r,n,i){for(let s=0,a=r.length;s!==a;++s){const o=r[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,r){const n=[];for(let i=0,s=e.length;i!==s;++i){const a=e[i];a.id in r&&n.push(a)}return n}}function Pk(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}const gie=37297;let vie=0;function yie(t,e){const r=t.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,r.length);for(let a=i;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${r[a]}`)}return n.join(`
`)}function wie(t){const e=xt.getPrimaries(xt.workingColorSpace),r=xt.getPrimaries(t);let n;switch(e===r?n="":e===O1&&r===P1?n="LinearDisplayP3ToLinearSRGB":e===P1&&r===O1&&(n="LinearSRGBToLinearDisplayP3"),t){case Bn:case u_:return[n,"LinearTransferOETF"];case Ut:case RI:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[n,"LinearTransferOETF"]}}function Ok(t,e,r){const n=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const a=parseInt(s[1]);return r.toUpperCase()+`

`+i+`

`+yie(t.getShaderSource(e),a)}else return i}function bie(t,e){const r=wie(e);return`vec4 ${t}( vec4 value ) { return ${r[0]}( ${r[1]}( value ) ); }`}function _ie(t,e){let r;switch(e){case p$:r="Linear";break;case m$:r="Reinhard";break;case g$:r="Cineon";break;case v$:r="ACESFilmic";break;case w$:r="AgX";break;case b$:r="Neutral";break;case y$:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const Uv=new Y;function xie(){xt.getLuminanceCoefficients(Uv);const t=Uv.x.toFixed(4),e=Uv.y.toFixed(4),r=Uv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Eie(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_m).join(`
`)}function Bie(t){const e=[];for(const r in t){const n=t[r];n!==!1&&e.push("#define "+r+" "+n)}return e.join(`
`)}function Mie(t,e){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=t.getActiveAttrib(e,i),a=s.name;let o=1;s.type===t.FLOAT_MAT2&&(o=2),s.type===t.FLOAT_MAT3&&(o=3),s.type===t.FLOAT_MAT4&&(o=4),r[a]={type:s.type,location:t.getAttribLocation(e,a),locationSize:o}}return r}function _m(t){return t!==""}function Dk(t,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Nk(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Tie=/^[ \t]*#include +<([\w\d./]+)>/gm;function IC(t){return t.replace(Tie,Sie)}const Cie=new Map;function Sie(t,e){let r=Bt[e];if(r===void 0){const n=Cie.get(e);if(n!==void 0)r=Bt[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return IC(r)}const Iie=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Qk(t){return t.replace(Iie,Rie)}function Rie(t,e,r,n){let i="";for(let s=parseInt(e);s<parseInt(r);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function Hk(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Uie(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===A8?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Yq?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===xl&&(e="SHADOWMAP_TYPE_VSM"),e}function Fie(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case If:case Rf:e="ENVMAP_TYPE_CUBE";break;case A_:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kie(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Rf:e="ENVMAP_MODE_REFRACTION";break}return e}function Lie(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case l_:e="ENVMAP_BLENDING_MULTIPLY";break;case d$:e="ENVMAP_BLENDING_MIX";break;case f$:e="ENVMAP_BLENDING_ADD";break}return e}function Pie(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:n,maxMip:r}}function Oie(t,e,r,n){const i=t.getContext(),s=r.defines;let a=r.vertexShader,o=r.fragmentShader;const l=Uie(r),A=Fie(r),c=kie(r),u=Lie(r),h=Pie(r),d=Eie(r),f=Bie(s),m=i.createProgram();let g,p,v=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(g=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,f].filter(_m).join(`
`),g.length>0&&(g+=`
`),p=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,f].filter(_m).join(`
`),p.length>0&&(p+=`
`)):(g=[Hk(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,f,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(_m).join(`
`),p=[Hk(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,f,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+A:"",r.envMap?"#define "+c:"",r.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==cc?"#define TONE_MAPPING":"",r.toneMapping!==cc?Bt.tonemapping_pars_fragment:"",r.toneMapping!==cc?_ie("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Bt.colorspace_pars_fragment,bie("linearToOutputTexel",r.outputColorSpace),xie(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(_m).join(`
`)),a=IC(a),a=Dk(a,r),a=Nk(a,r),o=IC(o),o=Dk(o,r),o=Nk(o,r),a=Qk(a),o=Qk(o),r.isRawShaderMaterial!==!0&&(v=`#version 300 es
`,g=[d,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,p=["#define varying in",r.glslVersion===nk?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===nk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const y=v+g+a,_=v+p+o,E=Pk(i,i.VERTEX_SHADER,y),x=Pk(i,i.FRAGMENT_SHADER,_);i.attachShader(m,E),i.attachShader(m,x),r.index0AttributeName!==void 0?i.bindAttribLocation(m,0,r.index0AttributeName):r.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function B(L){if(t.debug.checkShaderErrors){const D=i.getProgramInfoLog(m).trim(),w=i.getShaderInfoLog(E).trim(),b=i.getShaderInfoLog(x).trim();let S=!0,F=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(S=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,m,E,x);else{const k=Ok(i,E,"vertex"),Q=Ok(i,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+D+`
`+k+`
`+Q)}else D!==""?console.warn("THREE.WebGLProgram: Program Info Log:",D):(w===""||b==="")&&(F=!1);F&&(L.diagnostics={runnable:S,programLog:D,vertexShader:{log:w,prefix:g},fragmentShader:{log:b,prefix:p}})}i.deleteShader(E),i.deleteShader(x),M=new Cw(i,m),R=Mie(i,m)}let M;this.getUniforms=function(){return M===void 0&&B(this),M};let R;this.getAttributes=function(){return R===void 0&&B(this),R};let I=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=i.getProgramParameter(m,gie)),I},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=vie++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=E,this.fragmentShader=x,this}let Die=0;class Nie{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(r),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(i)===!1&&(a.add(i),i.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const n of r)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let n=r.get(e);return n===void 0&&(n=new Set,r.set(e,n)),n}_getShaderStage(e){const r=this.shaderCache;let n=r.get(e);return n===void 0&&(n=new Qie(e),r.set(e,n)),n}}class Qie{constructor(e){this.id=Die++,this.code=e,this.usedTimes=0}}function Hie(t,e,r,n,i,s,a){const o=new kI,l=new Nie,A=new Set,c=[],u=i.logarithmicDepthBuffer,h=i.reverseDepthBuffer,d=i.vertexTextures;let f=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(I){return A.add(I),I===0?"uv":`uv${I}`}function p(I,L,D,w,b){const S=w.fog,F=b.geometry,k=I.isMeshStandardMaterial?w.environment:null,Q=(I.isMeshStandardMaterial?r:e).get(I.envMap||k),z=Q&&Q.mapping===A_?Q.image.height:null,j=m[I.type];I.precision!==null&&(f=i.getMaxPrecision(I.precision),f!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",f,"instead."));const T=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,H=T!==void 0?T.length:0;let me=0;F.morphAttributes.position!==void 0&&(me=1),F.morphAttributes.normal!==void 0&&(me=2),F.morphAttributes.color!==void 0&&(me=3);let ee,U,se,le;if(j){const Rr=Io[j];ee=Rr.vertexShader,U=Rr.fragmentShader}else ee=I.vertexShader,U=I.fragmentShader,l.update(I),se=l.getVertexShaderID(I),le=l.getFragmentShaderID(I);const Ae=t.getRenderTarget(),ge=b.isInstancedMesh===!0,ne=b.isBatchedMesh===!0,de=!!I.map,Te=!!I.matcap,re=!!Q,N=!!I.aoMap,he=!!I.lightMap,oe=!!I.bumpMap,Z=!!I.normalMap,$=!!I.displacementMap,ce=!!I.emissiveMap,W=!!I.metalnessMap,V=!!I.roughnessMap,J=I.anisotropy>0,K=I.clearcoat>0,fe=I.dispersion>0,ie=I.iridescence>0,Ee=I.sheen>0,C=I.transmission>0,P=J&&!!I.anisotropyMap,G=K&&!!I.clearcoatMap,te=K&&!!I.clearcoatNormalMap,ae=K&&!!I.clearcoatRoughnessMap,pe=ie&&!!I.iridescenceMap,ve=ie&&!!I.iridescenceThicknessMap,Ie=Ee&&!!I.sheenColorMap,ke=Ee&&!!I.sheenRoughnessMap,Le=!!I.specularMap,Oe=!!I.specularColorMap,ue=!!I.specularIntensityMap,Qe=C&&!!I.transmissionMap,xe=C&&!!I.thicknessMap,Ce=!!I.gradientMap,Fe=!!I.alphaMap,Re=I.alphaTest>0,ot=!!I.alphaHash,Kt=!!I.extensions;let bt=cc;I.toneMapped&&(Ae===null||Ae.isXRRenderTarget===!0)&&(bt=t.toneMapping);const it={shaderID:j,shaderType:I.type,shaderName:I.name,vertexShader:ee,fragmentShader:U,defines:I.defines,customVertexShaderID:se,customFragmentShaderID:le,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:f,batching:ne,batchingColor:ne&&b._colorsTexture!==null,instancing:ge,instancingColor:ge&&b.instanceColor!==null,instancingMorph:ge&&b.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:Ae===null?t.outputColorSpace:Ae.isXRRenderTarget===!0?Ae.texture.colorSpace:Bn,alphaToCoverage:!!I.alphaToCoverage,map:de,matcap:Te,envMap:re,envMapMode:re&&Q.mapping,envMapCubeUVHeight:z,aoMap:N,lightMap:he,bumpMap:oe,normalMap:Z,displacementMap:d&&$,emissiveMap:ce,normalMapObjectSpace:Z&&I.normalMapType===I$,normalMapTangentSpace:Z&&I.normalMapType===Kf,metalnessMap:W,roughnessMap:V,anisotropy:J,anisotropyMap:P,clearcoat:K,clearcoatMap:G,clearcoatNormalMap:te,clearcoatRoughnessMap:ae,dispersion:fe,iridescence:ie,iridescenceMap:pe,iridescenceThicknessMap:ve,sheen:Ee,sheenColorMap:Ie,sheenRoughnessMap:ke,specularMap:Le,specularColorMap:Oe,specularIntensityMap:ue,transmission:C,transmissionMap:Qe,thicknessMap:xe,gradientMap:Ce,opaque:I.transparent===!1&&I.blending===nf&&I.alphaToCoverage===!1,alphaMap:Fe,alphaTest:Re,alphaHash:ot,combine:I.combine,mapUv:de&&g(I.map.channel),aoMapUv:N&&g(I.aoMap.channel),lightMapUv:he&&g(I.lightMap.channel),bumpMapUv:oe&&g(I.bumpMap.channel),normalMapUv:Z&&g(I.normalMap.channel),displacementMapUv:$&&g(I.displacementMap.channel),emissiveMapUv:ce&&g(I.emissiveMap.channel),metalnessMapUv:W&&g(I.metalnessMap.channel),roughnessMapUv:V&&g(I.roughnessMap.channel),anisotropyMapUv:P&&g(I.anisotropyMap.channel),clearcoatMapUv:G&&g(I.clearcoatMap.channel),clearcoatNormalMapUv:te&&g(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ae&&g(I.clearcoatRoughnessMap.channel),iridescenceMapUv:pe&&g(I.iridescenceMap.channel),iridescenceThicknessMapUv:ve&&g(I.iridescenceThicknessMap.channel),sheenColorMapUv:Ie&&g(I.sheenColorMap.channel),sheenRoughnessMapUv:ke&&g(I.sheenRoughnessMap.channel),specularMapUv:Le&&g(I.specularMap.channel),specularColorMapUv:Oe&&g(I.specularColorMap.channel),specularIntensityMapUv:ue&&g(I.specularIntensityMap.channel),transmissionMapUv:Qe&&g(I.transmissionMap.channel),thicknessMapUv:xe&&g(I.thicknessMap.channel),alphaMapUv:Fe&&g(I.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(Z||J),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,pointsUvs:b.isPoints===!0&&!!F.attributes.uv&&(de||Fe),fog:!!S,useFog:I.fog===!0,fogExp2:!!S&&S.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:u,reverseDepthBuffer:h,skinning:b.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:me,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:t.shadowMap.enabled&&D.length>0,shadowMapType:t.shadowMap.type,toneMapping:bt,decodeVideoTexture:de&&I.map.isVideoTexture===!0&&xt.getTransfer(I.map.colorSpace)===Er,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===pi,flipSided:I.side===ti,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Kt&&I.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Kt&&I.extensions.multiDraw===!0||ne)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return it.vertexUv1s=A.has(1),it.vertexUv2s=A.has(2),it.vertexUv3s=A.has(3),A.clear(),it}function v(I){const L=[];if(I.shaderID?L.push(I.shaderID):(L.push(I.customVertexShaderID),L.push(I.customFragmentShaderID)),I.defines!==void 0)for(const D in I.defines)L.push(D),L.push(I.defines[D]);return I.isRawShaderMaterial===!1&&(y(L,I),_(L,I),L.push(t.outputColorSpace)),L.push(I.customProgramCacheKey),L.join()}function y(I,L){I.push(L.precision),I.push(L.outputColorSpace),I.push(L.envMapMode),I.push(L.envMapCubeUVHeight),I.push(L.mapUv),I.push(L.alphaMapUv),I.push(L.lightMapUv),I.push(L.aoMapUv),I.push(L.bumpMapUv),I.push(L.normalMapUv),I.push(L.displacementMapUv),I.push(L.emissiveMapUv),I.push(L.metalnessMapUv),I.push(L.roughnessMapUv),I.push(L.anisotropyMapUv),I.push(L.clearcoatMapUv),I.push(L.clearcoatNormalMapUv),I.push(L.clearcoatRoughnessMapUv),I.push(L.iridescenceMapUv),I.push(L.iridescenceThicknessMapUv),I.push(L.sheenColorMapUv),I.push(L.sheenRoughnessMapUv),I.push(L.specularMapUv),I.push(L.specularColorMapUv),I.push(L.specularIntensityMapUv),I.push(L.transmissionMapUv),I.push(L.thicknessMapUv),I.push(L.combine),I.push(L.fogExp2),I.push(L.sizeAttenuation),I.push(L.morphTargetsCount),I.push(L.morphAttributeCount),I.push(L.numDirLights),I.push(L.numPointLights),I.push(L.numSpotLights),I.push(L.numSpotLightMaps),I.push(L.numHemiLights),I.push(L.numRectAreaLights),I.push(L.numDirLightShadows),I.push(L.numPointLightShadows),I.push(L.numSpotLightShadows),I.push(L.numSpotLightShadowsWithMaps),I.push(L.numLightProbes),I.push(L.shadowMapType),I.push(L.toneMapping),I.push(L.numClippingPlanes),I.push(L.numClipIntersection),I.push(L.depthPacking)}function _(I,L){o.disableAll(),L.supportsVertexTextures&&o.enable(0),L.instancing&&o.enable(1),L.instancingColor&&o.enable(2),L.instancingMorph&&o.enable(3),L.matcap&&o.enable(4),L.envMap&&o.enable(5),L.normalMapObjectSpace&&o.enable(6),L.normalMapTangentSpace&&o.enable(7),L.clearcoat&&o.enable(8),L.iridescence&&o.enable(9),L.alphaTest&&o.enable(10),L.vertexColors&&o.enable(11),L.vertexAlphas&&o.enable(12),L.vertexUv1s&&o.enable(13),L.vertexUv2s&&o.enable(14),L.vertexUv3s&&o.enable(15),L.vertexTangents&&o.enable(16),L.anisotropy&&o.enable(17),L.alphaHash&&o.enable(18),L.batching&&o.enable(19),L.dispersion&&o.enable(20),L.batchingColor&&o.enable(21),I.push(o.mask),o.disableAll(),L.fog&&o.enable(0),L.useFog&&o.enable(1),L.flatShading&&o.enable(2),L.logarithmicDepthBuffer&&o.enable(3),L.reverseDepthBuffer&&o.enable(4),L.skinning&&o.enable(5),L.morphTargets&&o.enable(6),L.morphNormals&&o.enable(7),L.morphColors&&o.enable(8),L.premultipliedAlpha&&o.enable(9),L.shadowMapEnabled&&o.enable(10),L.doubleSided&&o.enable(11),L.flipSided&&o.enable(12),L.useDepthPacking&&o.enable(13),L.dithering&&o.enable(14),L.transmission&&o.enable(15),L.sheen&&o.enable(16),L.opaque&&o.enable(17),L.pointsUvs&&o.enable(18),L.decodeVideoTexture&&o.enable(19),L.alphaToCoverage&&o.enable(20),I.push(o.mask)}function E(I){const L=m[I.type];let D;if(L){const w=Io[L];D=LI.clone(w.uniforms)}else D=I.uniforms;return D}function x(I,L){let D;for(let w=0,b=c.length;w<b;w++){const S=c[w];if(S.cacheKey===L){D=S,++D.usedTimes;break}}return D===void 0&&(D=new Oie(t,L,I,s),c.push(D)),D}function B(I){if(--I.usedTimes===0){const L=c.indexOf(I);c[L]=c[c.length-1],c.pop(),I.destroy()}}function M(I){l.remove(I)}function R(){l.dispose()}return{getParameters:p,getProgramCacheKey:v,getUniforms:E,acquireProgram:x,releaseProgram:B,releaseShaderCache:M,programs:c,dispose:R}}function jie(){let t=new WeakMap;function e(a){return t.has(a)}function r(a){let o=t.get(a);return o===void 0&&(o={},t.set(a,o)),o}function n(a){t.delete(a)}function i(a,o,l){t.get(a)[o]=l}function s(){t=new WeakMap}return{has:e,get:r,remove:n,update:i,dispose:s}}function zie(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function jk(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function zk(){const t=[];let e=0;const r=[],n=[],i=[];function s(){e=0,r.length=0,n.length=0,i.length=0}function a(u,h,d,f,m,g){let p=t[e];return p===void 0?(p={id:u.id,object:u,geometry:h,material:d,groupOrder:f,renderOrder:u.renderOrder,z:m,group:g},t[e]=p):(p.id=u.id,p.object=u,p.geometry=h,p.material=d,p.groupOrder=f,p.renderOrder=u.renderOrder,p.z=m,p.group=g),e++,p}function o(u,h,d,f,m,g){const p=a(u,h,d,f,m,g);d.transmission>0?n.push(p):d.transparent===!0?i.push(p):r.push(p)}function l(u,h,d,f,m,g){const p=a(u,h,d,f,m,g);d.transmission>0?n.unshift(p):d.transparent===!0?i.unshift(p):r.unshift(p)}function A(u,h){r.length>1&&r.sort(u||zie),n.length>1&&n.sort(h||jk),i.length>1&&i.sort(h||jk)}function c(){for(let u=e,h=t.length;u<h;u++){const d=t[u];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:r,transmissive:n,transparent:i,init:s,push:o,unshift:l,finish:c,sort:A}}function Gie(){let t=new WeakMap;function e(n,i){const s=t.get(n);let a;return s===void 0?(a=new zk,t.set(n,[a])):i>=s.length?(a=new zk,s.push(a)):a=s[i],a}function r(){t=new WeakMap}return{get:e,dispose:r}}function Vie(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new Y,color:new He};break;case"SpotLight":r={position:new Y,direction:new Y,color:new He,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new Y,color:new He,distance:0,decay:0};break;case"HemisphereLight":r={direction:new Y,skyColor:new He,groundColor:new He};break;case"RectAreaLight":r={color:new He,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return t[e.id]=r,r}}}function Wie(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ke,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=r,r}}}let Kie=0;function Yie(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Xie(t){const e=new Vie,r=Wie(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let A=0;A<9;A++)n.probe.push(new Y);const i=new Y,s=new je,a=new je;function o(A){let c=0,u=0,h=0;for(let R=0;R<9;R++)n.probe[R].set(0,0,0);let d=0,f=0,m=0,g=0,p=0,v=0,y=0,_=0,E=0,x=0,B=0;A.sort(Yie);for(let R=0,I=A.length;R<I;R++){const L=A[R],D=L.color,w=L.intensity,b=L.distance,S=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)c+=D.r*w,u+=D.g*w,h+=D.b*w;else if(L.isLightProbe){for(let F=0;F<9;F++)n.probe[F].addScaledVector(L.sh.coefficients[F],w);B++}else if(L.isDirectionalLight){const F=e.get(L);if(F.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const k=L.shadow,Q=r.get(L);Q.shadowIntensity=k.intensity,Q.shadowBias=k.bias,Q.shadowNormalBias=k.normalBias,Q.shadowRadius=k.radius,Q.shadowMapSize=k.mapSize,n.directionalShadow[d]=Q,n.directionalShadowMap[d]=S,n.directionalShadowMatrix[d]=L.shadow.matrix,v++}n.directional[d]=F,d++}else if(L.isSpotLight){const F=e.get(L);F.position.setFromMatrixPosition(L.matrixWorld),F.color.copy(D).multiplyScalar(w),F.distance=b,F.coneCos=Math.cos(L.angle),F.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),F.decay=L.decay,n.spot[m]=F;const k=L.shadow;if(L.map&&(n.spotLightMap[E]=L.map,E++,k.updateMatrices(L),L.castShadow&&x++),n.spotLightMatrix[m]=k.matrix,L.castShadow){const Q=r.get(L);Q.shadowIntensity=k.intensity,Q.shadowBias=k.bias,Q.shadowNormalBias=k.normalBias,Q.shadowRadius=k.radius,Q.shadowMapSize=k.mapSize,n.spotShadow[m]=Q,n.spotShadowMap[m]=S,_++}m++}else if(L.isRectAreaLight){const F=e.get(L);F.color.copy(D).multiplyScalar(w),F.halfWidth.set(L.width*.5,0,0),F.halfHeight.set(0,L.height*.5,0),n.rectArea[g]=F,g++}else if(L.isPointLight){const F=e.get(L);if(F.color.copy(L.color).multiplyScalar(L.intensity),F.distance=L.distance,F.decay=L.decay,L.castShadow){const k=L.shadow,Q=r.get(L);Q.shadowIntensity=k.intensity,Q.shadowBias=k.bias,Q.shadowNormalBias=k.normalBias,Q.shadowRadius=k.radius,Q.shadowMapSize=k.mapSize,Q.shadowCameraNear=k.camera.near,Q.shadowCameraFar=k.camera.far,n.pointShadow[f]=Q,n.pointShadowMap[f]=S,n.pointShadowMatrix[f]=L.shadow.matrix,y++}n.point[f]=F,f++}else if(L.isHemisphereLight){const F=e.get(L);F.skyColor.copy(L.color).multiplyScalar(w),F.groundColor.copy(L.groundColor).multiplyScalar(w),n.hemi[p]=F,p++}}g>0&&(t.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ge.LTC_FLOAT_1,n.rectAreaLTC2=Ge.LTC_FLOAT_2):(n.rectAreaLTC1=Ge.LTC_HALF_1,n.rectAreaLTC2=Ge.LTC_HALF_2)),n.ambient[0]=c,n.ambient[1]=u,n.ambient[2]=h;const M=n.hash;(M.directionalLength!==d||M.pointLength!==f||M.spotLength!==m||M.rectAreaLength!==g||M.hemiLength!==p||M.numDirectionalShadows!==v||M.numPointShadows!==y||M.numSpotShadows!==_||M.numSpotMaps!==E||M.numLightProbes!==B)&&(n.directional.length=d,n.spot.length=m,n.rectArea.length=g,n.point.length=f,n.hemi.length=p,n.directionalShadow.length=v,n.directionalShadowMap.length=v,n.pointShadow.length=y,n.pointShadowMap.length=y,n.spotShadow.length=_,n.spotShadowMap.length=_,n.directionalShadowMatrix.length=v,n.pointShadowMatrix.length=y,n.spotLightMatrix.length=_+E-x,n.spotLightMap.length=E,n.numSpotLightShadowsWithMaps=x,n.numLightProbes=B,M.directionalLength=d,M.pointLength=f,M.spotLength=m,M.rectAreaLength=g,M.hemiLength=p,M.numDirectionalShadows=v,M.numPointShadows=y,M.numSpotShadows=_,M.numSpotMaps=E,M.numLightProbes=B,n.version=Kie++)}function l(A,c){let u=0,h=0,d=0,f=0,m=0;const g=c.matrixWorldInverse;for(let p=0,v=A.length;p<v;p++){const y=A[p];if(y.isDirectionalLight){const _=n.directional[u];_.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),_.direction.sub(i),_.direction.transformDirection(g),u++}else if(y.isSpotLight){const _=n.spot[d];_.position.setFromMatrixPosition(y.matrixWorld),_.position.applyMatrix4(g),_.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),_.direction.sub(i),_.direction.transformDirection(g),d++}else if(y.isRectAreaLight){const _=n.rectArea[f];_.position.setFromMatrixPosition(y.matrixWorld),_.position.applyMatrix4(g),a.identity(),s.copy(y.matrixWorld),s.premultiply(g),a.extractRotation(s),_.halfWidth.set(y.width*.5,0,0),_.halfHeight.set(0,y.height*.5,0),_.halfWidth.applyMatrix4(a),_.halfHeight.applyMatrix4(a),f++}else if(y.isPointLight){const _=n.point[h];_.position.setFromMatrixPosition(y.matrixWorld),_.position.applyMatrix4(g),h++}else if(y.isHemisphereLight){const _=n.hemi[m];_.direction.setFromMatrixPosition(y.matrixWorld),_.direction.transformDirection(g),m++}}}return{setup:o,setupView:l,state:n}}function Gk(t){const e=new Xie(t),r=[],n=[];function i(c){A.camera=c,r.length=0,n.length=0}function s(c){r.push(c)}function a(c){n.push(c)}function o(){e.setup(r)}function l(c){e.setupView(r,c)}const A={lightsArray:r,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:A,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function Zie(t){let e=new WeakMap;function r(i,s=0){const a=e.get(i);let o;return a===void 0?(o=new Gk(t),e.set(i,[o])):s>=a.length?(o=new Gk(t),a.push(o)):o=a[s],o}function n(){e=new WeakMap}return{get:r,dispose:n}}class Jie extends is{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=C$,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class qie extends is{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const $ie=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ese=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function tse(t,e,r){let n=new d_;const i=new Ke,s=new Ke,a=new kt,o=new Jie({depthPacking:S$}),l=new qie,A={},c=r.maxTextureSize,u={[Ns]:ti,[ti]:Ns,[pi]:pi},h=new fn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ke},radius:{value:4}},vertexShader:$ie,fragmentShader:ese}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const f=new $t;f.setAttribute("position",new lt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ar(f,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=A8;let p=this.type;this.render=function(x,B,M){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||x.length===0)return;const R=t.getRenderTarget(),I=t.getActiveCubeFace(),L=t.getActiveMipmapLevel(),D=t.state;D.setBlending(zl),D.buffers.color.setClear(1,1,1,1),D.buffers.depth.setTest(!0),D.setScissorTest(!1);const w=p!==xl&&this.type===xl,b=p===xl&&this.type!==xl;for(let S=0,F=x.length;S<F;S++){const k=x[S],Q=k.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",k,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;i.copy(Q.mapSize);const z=Q.getFrameExtents();if(i.multiply(z),s.copy(Q.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/z.x),i.x=s.x*z.x,Q.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/z.y),i.y=s.y*z.y,Q.mapSize.y=s.y)),Q.map===null||w===!0||b===!0){const T=this.type!==xl?{minFilter:Vn,magFilter:Vn}:{};Q.map!==null&&Q.map.dispose(),Q.map=new $o(i.x,i.y,T),Q.map.texture.name=k.name+".shadowMap",Q.camera.updateProjectionMatrix()}t.setRenderTarget(Q.map),t.clear();const j=Q.getViewportCount();for(let T=0;T<j;T++){const H=Q.getViewport(T);a.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),D.viewport(a),Q.updateMatrices(k,T),n=Q.getFrustum(),_(B,M,Q.camera,k,this.type)}Q.isPointLightShadow!==!0&&this.type===xl&&v(Q,M),Q.needsUpdate=!1}p=this.type,g.needsUpdate=!1,t.setRenderTarget(R,I,L)};function v(x,B){const M=e.update(m);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,d.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new $o(i.x,i.y)),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,t.setRenderTarget(x.mapPass),t.clear(),t.renderBufferDirect(B,null,M,h,m,null),d.uniforms.shadow_pass.value=x.mapPass.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,t.setRenderTarget(x.map),t.clear(),t.renderBufferDirect(B,null,M,d,m,null)}function y(x,B,M,R){let I=null;const L=M.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(L!==void 0)I=L;else if(I=M.isPointLight===!0?l:o,t.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0){const D=I.uuid,w=B.uuid;let b=A[D];b===void 0&&(b={},A[D]=b);let S=b[w];S===void 0&&(S=I.clone(),b[w]=S,B.addEventListener("dispose",E)),I=S}if(I.visible=B.visible,I.wireframe=B.wireframe,R===xl?I.side=B.shadowSide!==null?B.shadowSide:B.side:I.side=B.shadowSide!==null?B.shadowSide:u[B.side],I.alphaMap=B.alphaMap,I.alphaTest=B.alphaTest,I.map=B.map,I.clipShadows=B.clipShadows,I.clippingPlanes=B.clippingPlanes,I.clipIntersection=B.clipIntersection,I.displacementMap=B.displacementMap,I.displacementScale=B.displacementScale,I.displacementBias=B.displacementBias,I.wireframeLinewidth=B.wireframeLinewidth,I.linewidth=B.linewidth,M.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const D=t.properties.get(I);D.light=M}return I}function _(x,B,M,R,I){if(x.visible===!1)return;if(x.layers.test(B.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&I===xl)&&(!x.frustumCulled||n.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,x.matrixWorld);const D=e.update(x),w=x.material;if(Array.isArray(w)){const b=D.groups;for(let S=0,F=b.length;S<F;S++){const k=b[S],Q=w[k.materialIndex];if(Q&&Q.visible){const z=y(x,Q,R,I);x.onBeforeShadow(t,x,B,M,D,z,k),t.renderBufferDirect(M,null,D,z,x,k),x.onAfterShadow(t,x,B,M,D,z,k)}}}else if(w.visible){const b=y(x,w,R,I);x.onBeforeShadow(t,x,B,M,D,b,null),t.renderBufferDirect(M,null,D,b,x,null),x.onAfterShadow(t,x,B,M,D,b,null)}}const L=x.children;for(let D=0,w=L.length;D<w;D++)_(L[D],B,M,R,I)}function E(x){x.target.removeEventListener("dispose",E);for(const B in A){const M=A[B],R=x.target.uuid;R in M&&(M[R].dispose(),delete M[R])}}}const rse={[YT]:XT,[ZT]:$T,[JT]:eC,[Sf]:qT,[XT]:YT,[$T]:ZT,[eC]:JT,[qT]:Sf};function nse(t){function e(){let ue=!1;const Qe=new kt;let xe=null;const Ce=new kt(0,0,0,0);return{setMask:function(Fe){xe!==Fe&&!ue&&(t.colorMask(Fe,Fe,Fe,Fe),xe=Fe)},setLocked:function(Fe){ue=Fe},setClear:function(Fe,Re,ot,Kt,bt){bt===!0&&(Fe*=Kt,Re*=Kt,ot*=Kt),Qe.set(Fe,Re,ot,Kt),Ce.equals(Qe)===!1&&(t.clearColor(Fe,Re,ot,Kt),Ce.copy(Qe))},reset:function(){ue=!1,xe=null,Ce.set(-1,0,0,0)}}}function r(){let ue=!1,Qe=!1,xe=null,Ce=null,Fe=null;return{setReversed:function(Re){Qe=Re},setTest:function(Re){Re?se(t.DEPTH_TEST):le(t.DEPTH_TEST)},setMask:function(Re){xe!==Re&&!ue&&(t.depthMask(Re),xe=Re)},setFunc:function(Re){if(Qe&&(Re=rse[Re]),Ce!==Re){switch(Re){case YT:t.depthFunc(t.NEVER);break;case XT:t.depthFunc(t.ALWAYS);break;case ZT:t.depthFunc(t.LESS);break;case Sf:t.depthFunc(t.LEQUAL);break;case JT:t.depthFunc(t.EQUAL);break;case qT:t.depthFunc(t.GEQUAL);break;case $T:t.depthFunc(t.GREATER);break;case eC:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ce=Re}},setLocked:function(Re){ue=Re},setClear:function(Re){Fe!==Re&&(t.clearDepth(Re),Fe=Re)},reset:function(){ue=!1,xe=null,Ce=null,Fe=null}}}function n(){let ue=!1,Qe=null,xe=null,Ce=null,Fe=null,Re=null,ot=null,Kt=null,bt=null;return{setTest:function(it){ue||(it?se(t.STENCIL_TEST):le(t.STENCIL_TEST))},setMask:function(it){Qe!==it&&!ue&&(t.stencilMask(it),Qe=it)},setFunc:function(it,Rr,Ct){(xe!==it||Ce!==Rr||Fe!==Ct)&&(t.stencilFunc(it,Rr,Ct),xe=it,Ce=Rr,Fe=Ct)},setOp:function(it,Rr,Ct){(Re!==it||ot!==Rr||Kt!==Ct)&&(t.stencilOp(it,Rr,Ct),Re=it,ot=Rr,Kt=Ct)},setLocked:function(it){ue=it},setClear:function(it){bt!==it&&(t.clearStencil(it),bt=it)},reset:function(){ue=!1,Qe=null,xe=null,Ce=null,Fe=null,Re=null,ot=null,Kt=null,bt=null}}}const i=new e,s=new r,a=new n,o=new WeakMap,l=new WeakMap;let A={},c={},u=new WeakMap,h=[],d=null,f=!1,m=null,g=null,p=null,v=null,y=null,_=null,E=null,x=new He(0,0,0),B=0,M=!1,R=null,I=null,L=null,D=null,w=null;const b=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let S=!1,F=0;const k=t.getParameter(t.VERSION);k.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(k)[1]),S=F>=1):k.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),S=F>=2);let Q=null,z={};const j=t.getParameter(t.SCISSOR_BOX),T=t.getParameter(t.VIEWPORT),H=new kt().fromArray(j),me=new kt().fromArray(T);function ee(ue,Qe,xe,Ce){const Fe=new Uint8Array(4),Re=t.createTexture();t.bindTexture(ue,Re),t.texParameteri(ue,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ue,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let ot=0;ot<xe;ot++)ue===t.TEXTURE_3D||ue===t.TEXTURE_2D_ARRAY?t.texImage3D(Qe,0,t.RGBA,1,1,Ce,0,t.RGBA,t.UNSIGNED_BYTE,Fe):t.texImage2D(Qe+ot,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Fe);return Re}const U={};U[t.TEXTURE_2D]=ee(t.TEXTURE_2D,t.TEXTURE_2D,1),U[t.TEXTURE_CUBE_MAP]=ee(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),U[t.TEXTURE_2D_ARRAY]=ee(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),U[t.TEXTURE_3D]=ee(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),a.setClear(0),se(t.DEPTH_TEST),s.setFunc(Sf),he(!1),oe(qF),se(t.CULL_FACE),re(zl);function se(ue){A[ue]!==!0&&(t.enable(ue),A[ue]=!0)}function le(ue){A[ue]!==!1&&(t.disable(ue),A[ue]=!1)}function Ae(ue,Qe){return c[ue]!==Qe?(t.bindFramebuffer(ue,Qe),c[ue]=Qe,ue===t.DRAW_FRAMEBUFFER&&(c[t.FRAMEBUFFER]=Qe),ue===t.FRAMEBUFFER&&(c[t.DRAW_FRAMEBUFFER]=Qe),!0):!1}function ge(ue,Qe){let xe=h,Ce=!1;if(ue){xe=u.get(Qe),xe===void 0&&(xe=[],u.set(Qe,xe));const Fe=ue.textures;if(xe.length!==Fe.length||xe[0]!==t.COLOR_ATTACHMENT0){for(let Re=0,ot=Fe.length;Re<ot;Re++)xe[Re]=t.COLOR_ATTACHMENT0+Re;xe.length=Fe.length,Ce=!0}}else xe[0]!==t.BACK&&(xe[0]=t.BACK,Ce=!0);Ce&&t.drawBuffers(xe)}function ne(ue){return d!==ue?(t.useProgram(ue),d=ue,!0):!1}const de={[su]:t.FUNC_ADD,[Zq]:t.FUNC_SUBTRACT,[Jq]:t.FUNC_REVERSE_SUBTRACT};de[qq]=t.MIN,de[$q]=t.MAX;const Te={[e$]:t.ZERO,[t$]:t.ONE,[r$]:t.SRC_COLOR,[WT]:t.SRC_ALPHA,[l$]:t.SRC_ALPHA_SATURATE,[a$]:t.DST_COLOR,[i$]:t.DST_ALPHA,[n$]:t.ONE_MINUS_SRC_COLOR,[KT]:t.ONE_MINUS_SRC_ALPHA,[o$]:t.ONE_MINUS_DST_COLOR,[s$]:t.ONE_MINUS_DST_ALPHA,[A$]:t.CONSTANT_COLOR,[c$]:t.ONE_MINUS_CONSTANT_COLOR,[u$]:t.CONSTANT_ALPHA,[h$]:t.ONE_MINUS_CONSTANT_ALPHA};function re(ue,Qe,xe,Ce,Fe,Re,ot,Kt,bt,it){if(ue===zl){f===!0&&(le(t.BLEND),f=!1);return}if(f===!1&&(se(t.BLEND),f=!0),ue!==Xq){if(ue!==m||it!==M){if((g!==su||y!==su)&&(t.blendEquation(t.FUNC_ADD),g=su,y=su),it)switch(ue){case nf:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case ku:t.blendFunc(t.ONE,t.ONE);break;case $F:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ek:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case nf:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case ku:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case $F:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ek:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}p=null,v=null,_=null,E=null,x.set(0,0,0),B=0,m=ue,M=it}return}Fe=Fe||Qe,Re=Re||xe,ot=ot||Ce,(Qe!==g||Fe!==y)&&(t.blendEquationSeparate(de[Qe],de[Fe]),g=Qe,y=Fe),(xe!==p||Ce!==v||Re!==_||ot!==E)&&(t.blendFuncSeparate(Te[xe],Te[Ce],Te[Re],Te[ot]),p=xe,v=Ce,_=Re,E=ot),(Kt.equals(x)===!1||bt!==B)&&(t.blendColor(Kt.r,Kt.g,Kt.b,bt),x.copy(Kt),B=bt),m=ue,M=!1}function N(ue,Qe){ue.side===pi?le(t.CULL_FACE):se(t.CULL_FACE);let xe=ue.side===ti;Qe&&(xe=!xe),he(xe),ue.blending===nf&&ue.transparent===!1?re(zl):re(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.blendColor,ue.blendAlpha,ue.premultipliedAlpha),s.setFunc(ue.depthFunc),s.setTest(ue.depthTest),s.setMask(ue.depthWrite),i.setMask(ue.colorWrite);const Ce=ue.stencilWrite;a.setTest(Ce),Ce&&(a.setMask(ue.stencilWriteMask),a.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),a.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),$(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?se(t.SAMPLE_ALPHA_TO_COVERAGE):le(t.SAMPLE_ALPHA_TO_COVERAGE)}function he(ue){R!==ue&&(ue?t.frontFace(t.CW):t.frontFace(t.CCW),R=ue)}function oe(ue){ue!==Wq?(se(t.CULL_FACE),ue!==I&&(ue===qF?t.cullFace(t.BACK):ue===Kq?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):le(t.CULL_FACE),I=ue}function Z(ue){ue!==L&&(S&&t.lineWidth(ue),L=ue)}function $(ue,Qe,xe){ue?(se(t.POLYGON_OFFSET_FILL),(D!==Qe||w!==xe)&&(t.polygonOffset(Qe,xe),D=Qe,w=xe)):le(t.POLYGON_OFFSET_FILL)}function ce(ue){ue?se(t.SCISSOR_TEST):le(t.SCISSOR_TEST)}function W(ue){ue===void 0&&(ue=t.TEXTURE0+b-1),Q!==ue&&(t.activeTexture(ue),Q=ue)}function V(ue,Qe,xe){xe===void 0&&(Q===null?xe=t.TEXTURE0+b-1:xe=Q);let Ce=z[xe];Ce===void 0&&(Ce={type:void 0,texture:void 0},z[xe]=Ce),(Ce.type!==ue||Ce.texture!==Qe)&&(Q!==xe&&(t.activeTexture(xe),Q=xe),t.bindTexture(ue,Qe||U[ue]),Ce.type=ue,Ce.texture=Qe)}function J(){const ue=z[Q];ue!==void 0&&ue.type!==void 0&&(t.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function K(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function fe(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ie(){try{t.texSubImage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ee(){try{t.texSubImage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function C(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function P(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function G(){try{t.texStorage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function te(){try{t.texStorage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ae(){try{t.texImage2D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function pe(){try{t.texImage3D.apply(t,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ve(ue){H.equals(ue)===!1&&(t.scissor(ue.x,ue.y,ue.z,ue.w),H.copy(ue))}function Ie(ue){me.equals(ue)===!1&&(t.viewport(ue.x,ue.y,ue.z,ue.w),me.copy(ue))}function ke(ue,Qe){let xe=l.get(Qe);xe===void 0&&(xe=new WeakMap,l.set(Qe,xe));let Ce=xe.get(ue);Ce===void 0&&(Ce=t.getUniformBlockIndex(Qe,ue.name),xe.set(ue,Ce))}function Le(ue,Qe){const xe=l.get(Qe).get(ue);o.get(Qe)!==xe&&(t.uniformBlockBinding(Qe,xe,ue.__bindingPointIndex),o.set(Qe,xe))}function Oe(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),A={},Q=null,z={},c={},u=new WeakMap,h=[],d=null,f=!1,m=null,g=null,p=null,v=null,y=null,_=null,E=null,x=new He(0,0,0),B=0,M=!1,R=null,I=null,L=null,D=null,w=null,H.set(0,0,t.canvas.width,t.canvas.height),me.set(0,0,t.canvas.width,t.canvas.height),i.reset(),s.reset(),a.reset()}return{buffers:{color:i,depth:s,stencil:a},enable:se,disable:le,bindFramebuffer:Ae,drawBuffers:ge,useProgram:ne,setBlending:re,setMaterial:N,setFlipSided:he,setCullFace:oe,setLineWidth:Z,setPolygonOffset:$,setScissorTest:ce,activeTexture:W,bindTexture:V,unbindTexture:J,compressedTexImage2D:K,compressedTexImage3D:fe,texImage2D:ae,texImage3D:pe,updateUBOMapping:ke,uniformBlockBinding:Le,texStorage2D:G,texStorage3D:te,texSubImage2D:ie,texSubImage3D:Ee,compressedTexSubImage2D:C,compressedTexSubImage3D:P,scissor:ve,viewport:Ie,reset:Oe}}function Vk(t,e,r,n){const i=ise(n);switch(r){case f8:return t*e;case m8:return t*e;case g8:return t*e*2;case TI:return t*e/i.components*i.byteLength;case c_:return t*e/i.components*i.byteLength;case v8:return t*e*2/i.components*i.byteLength;case CI:return t*e*2/i.components*i.byteLength;case p8:return t*e*3/i.components*i.byteLength;case kn:return t*e*4/i.components*i.byteLength;case SI:return t*e*4/i.components*i.byteLength;case _w:case xw:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Ew:case Bw:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case nC:case sC:return Math.max(t,16)*Math.max(e,8)/4;case rC:case iC:return Math.max(t,8)*Math.max(e,8)/2;case aC:case oC:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case lC:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case AC:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case cC:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case uC:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case hC:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case dC:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case fC:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case pC:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case mC:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case gC:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case vC:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case yC:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case wC:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case bC:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case _C:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case Mw:case xC:case EC:return Math.ceil(t/4)*Math.ceil(e/4)*16;case y8:case BC:return Math.ceil(t/4)*Math.ceil(e/4)*8;case MC:case TC:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function ise(t){switch(t){case tA:case u8:return{byteLength:1,components:1};case Hg:case h8:case No:return{byteLength:2,components:1};case BI:case MI:return{byteLength:2,components:4};case vc:case EI:case mi:return{byteLength:4,components:1};case d8:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}function sse(t,e,r,n,i,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),A=new Ke,c=new WeakMap;let u;const h=new WeakMap;let d=!1;try{d=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function f(W,V){return d?new OffscreenCanvas(W,V):jg("canvas")}function m(W,V,J){let K=1;const fe=ce(W);if((fe.width>J||fe.height>J)&&(K=J/Math.max(fe.width,fe.height)),K<1)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap||typeof VideoFrame<"u"&&W instanceof VideoFrame){const ie=Math.floor(K*fe.width),Ee=Math.floor(K*fe.height);u===void 0&&(u=f(ie,Ee));const C=V?f(ie,Ee):u;return C.width=ie,C.height=Ee,C.getContext("2d").drawImage(W,0,0,ie,Ee),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+fe.width+"x"+fe.height+") to ("+ie+"x"+Ee+")."),C}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+fe.width+"x"+fe.height+")."),W;return W}function g(W){return W.generateMipmaps&&W.minFilter!==Vn&&W.minFilter!==Un}function p(W){t.generateMipmap(W)}function v(W,V,J,K,fe=!1){if(W!==null){if(t[W]!==void 0)return t[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let ie=V;if(V===t.RED&&(J===t.FLOAT&&(ie=t.R32F),J===t.HALF_FLOAT&&(ie=t.R16F),J===t.UNSIGNED_BYTE&&(ie=t.R8)),V===t.RED_INTEGER&&(J===t.UNSIGNED_BYTE&&(ie=t.R8UI),J===t.UNSIGNED_SHORT&&(ie=t.R16UI),J===t.UNSIGNED_INT&&(ie=t.R32UI),J===t.BYTE&&(ie=t.R8I),J===t.SHORT&&(ie=t.R16I),J===t.INT&&(ie=t.R32I)),V===t.RG&&(J===t.FLOAT&&(ie=t.RG32F),J===t.HALF_FLOAT&&(ie=t.RG16F),J===t.UNSIGNED_BYTE&&(ie=t.RG8)),V===t.RG_INTEGER&&(J===t.UNSIGNED_BYTE&&(ie=t.RG8UI),J===t.UNSIGNED_SHORT&&(ie=t.RG16UI),J===t.UNSIGNED_INT&&(ie=t.RG32UI),J===t.BYTE&&(ie=t.RG8I),J===t.SHORT&&(ie=t.RG16I),J===t.INT&&(ie=t.RG32I)),V===t.RGB_INTEGER&&(J===t.UNSIGNED_BYTE&&(ie=t.RGB8UI),J===t.UNSIGNED_SHORT&&(ie=t.RGB16UI),J===t.UNSIGNED_INT&&(ie=t.RGB32UI),J===t.BYTE&&(ie=t.RGB8I),J===t.SHORT&&(ie=t.RGB16I),J===t.INT&&(ie=t.RGB32I)),V===t.RGBA_INTEGER&&(J===t.UNSIGNED_BYTE&&(ie=t.RGBA8UI),J===t.UNSIGNED_SHORT&&(ie=t.RGBA16UI),J===t.UNSIGNED_INT&&(ie=t.RGBA32UI),J===t.BYTE&&(ie=t.RGBA8I),J===t.SHORT&&(ie=t.RGBA16I),J===t.INT&&(ie=t.RGBA32I)),V===t.RGB&&J===t.UNSIGNED_INT_5_9_9_9_REV&&(ie=t.RGB9_E5),V===t.RGBA){const Ee=fe?L1:xt.getTransfer(K);J===t.FLOAT&&(ie=t.RGBA32F),J===t.HALF_FLOAT&&(ie=t.RGBA16F),J===t.UNSIGNED_BYTE&&(ie=Ee===Er?t.SRGB8_ALPHA8:t.RGBA8),J===t.UNSIGNED_SHORT_4_4_4_4&&(ie=t.RGBA4),J===t.UNSIGNED_SHORT_5_5_5_1&&(ie=t.RGB5_A1)}return(ie===t.R16F||ie===t.R32F||ie===t.RG16F||ie===t.RG32F||ie===t.RGBA16F||ie===t.RGBA32F)&&e.get("EXT_color_buffer_float"),ie}function y(W,V){let J;return W?V===null||V===vc||V===Uf?J=t.DEPTH24_STENCIL8:V===mi?J=t.DEPTH32F_STENCIL8:V===Hg&&(J=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===vc||V===Uf?J=t.DEPTH_COMPONENT24:V===mi?J=t.DEPTH_COMPONENT32F:V===Hg&&(J=t.DEPTH_COMPONENT16),J}function _(W,V){return g(W)===!0||W.isFramebufferTexture&&W.minFilter!==Vn&&W.minFilter!==Un?Math.log2(Math.max(V.width,V.height))+1:W.mipmaps!==void 0&&W.mipmaps.length>0?W.mipmaps.length:W.isCompressedTexture&&Array.isArray(W.image)?V.mipmaps.length:1}function E(W){const V=W.target;V.removeEventListener("dispose",E),B(V),V.isVideoTexture&&c.delete(V)}function x(W){const V=W.target;V.removeEventListener("dispose",x),R(V)}function B(W){const V=n.get(W);if(V.__webglInit===void 0)return;const J=W.source,K=h.get(J);if(K){const fe=K[V.__cacheKey];fe.usedTimes--,fe.usedTimes===0&&M(W),Object.keys(K).length===0&&h.delete(J)}n.remove(W)}function M(W){const V=n.get(W);t.deleteTexture(V.__webglTexture);const J=W.source,K=h.get(J);delete K[V.__cacheKey],a.memory.textures--}function R(W){const V=n.get(W);if(W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let K=0;K<6;K++){if(Array.isArray(V.__webglFramebuffer[K]))for(let fe=0;fe<V.__webglFramebuffer[K].length;fe++)t.deleteFramebuffer(V.__webglFramebuffer[K][fe]);else t.deleteFramebuffer(V.__webglFramebuffer[K]);V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer[K])}else{if(Array.isArray(V.__webglFramebuffer))for(let K=0;K<V.__webglFramebuffer.length;K++)t.deleteFramebuffer(V.__webglFramebuffer[K]);else t.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&t.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let K=0;K<V.__webglColorRenderbuffer.length;K++)V.__webglColorRenderbuffer[K]&&t.deleteRenderbuffer(V.__webglColorRenderbuffer[K]);V.__webglDepthRenderbuffer&&t.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const J=W.textures;for(let K=0,fe=J.length;K<fe;K++){const ie=n.get(J[K]);ie.__webglTexture&&(t.deleteTexture(ie.__webglTexture),a.memory.textures--),n.remove(J[K])}n.remove(W)}let I=0;function L(){I=0}function D(){const W=I;return W>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+i.maxTextures),I+=1,W}function w(W){const V=[];return V.push(W.wrapS),V.push(W.wrapT),V.push(W.wrapR||0),V.push(W.magFilter),V.push(W.minFilter),V.push(W.anisotropy),V.push(W.internalFormat),V.push(W.format),V.push(W.type),V.push(W.generateMipmaps),V.push(W.premultiplyAlpha),V.push(W.flipY),V.push(W.unpackAlignment),V.push(W.colorSpace),V.join()}function b(W,V){const J=n.get(W);if(W.isVideoTexture&&Z(W),W.isRenderTargetTexture===!1&&W.version>0&&J.__version!==W.version){const K=W.image;if(K===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(K.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{me(J,W,V);return}}r.bindTexture(t.TEXTURE_2D,J.__webglTexture,t.TEXTURE0+V)}function S(W,V){const J=n.get(W);if(W.version>0&&J.__version!==W.version){me(J,W,V);return}r.bindTexture(t.TEXTURE_2D_ARRAY,J.__webglTexture,t.TEXTURE0+V)}function F(W,V){const J=n.get(W);if(W.version>0&&J.__version!==W.version){me(J,W,V);return}r.bindTexture(t.TEXTURE_3D,J.__webglTexture,t.TEXTURE0+V)}function k(W,V){const J=n.get(W);if(W.version>0&&J.__version!==W.version){ee(J,W,V);return}r.bindTexture(t.TEXTURE_CUBE_MAP,J.__webglTexture,t.TEXTURE0+V)}const Q={[Qs]:t.REPEAT,[Ss]:t.CLAMP_TO_EDGE,[Qg]:t.MIRRORED_REPEAT},z={[Vn]:t.NEAREST,[xI]:t.NEAREST_MIPMAP_NEAREST,[kd]:t.NEAREST_MIPMAP_LINEAR,[Un]:t.LINEAR,[$m]:t.LINEAR_MIPMAP_NEAREST,[qa]:t.LINEAR_MIPMAP_LINEAR},j={[R$]:t.NEVER,[O$]:t.ALWAYS,[U$]:t.LESS,[b8]:t.LEQUAL,[F$]:t.EQUAL,[P$]:t.GEQUAL,[k$]:t.GREATER,[L$]:t.NOTEQUAL};function T(W,V){if(V.type===mi&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===Un||V.magFilter===$m||V.magFilter===kd||V.magFilter===qa||V.minFilter===Un||V.minFilter===$m||V.minFilter===kd||V.minFilter===qa)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(W,t.TEXTURE_WRAP_S,Q[V.wrapS]),t.texParameteri(W,t.TEXTURE_WRAP_T,Q[V.wrapT]),(W===t.TEXTURE_3D||W===t.TEXTURE_2D_ARRAY)&&t.texParameteri(W,t.TEXTURE_WRAP_R,Q[V.wrapR]),t.texParameteri(W,t.TEXTURE_MAG_FILTER,z[V.magFilter]),t.texParameteri(W,t.TEXTURE_MIN_FILTER,z[V.minFilter]),V.compareFunction&&(t.texParameteri(W,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(W,t.TEXTURE_COMPARE_FUNC,j[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===Vn||V.minFilter!==kd&&V.minFilter!==qa||V.type===mi&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const J=e.get("EXT_texture_filter_anisotropic");t.texParameterf(W,J.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,i.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function H(W,V){let J=!1;W.__webglInit===void 0&&(W.__webglInit=!0,V.addEventListener("dispose",E));const K=V.source;let fe=h.get(K);fe===void 0&&(fe={},h.set(K,fe));const ie=w(V);if(ie!==W.__cacheKey){fe[ie]===void 0&&(fe[ie]={texture:t.createTexture(),usedTimes:0},a.memory.textures++,J=!0),fe[ie].usedTimes++;const Ee=fe[W.__cacheKey];Ee!==void 0&&(fe[W.__cacheKey].usedTimes--,Ee.usedTimes===0&&M(V)),W.__cacheKey=ie,W.__webglTexture=fe[ie].texture}return J}function me(W,V,J){let K=t.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(K=t.TEXTURE_2D_ARRAY),V.isData3DTexture&&(K=t.TEXTURE_3D);const fe=H(W,V),ie=V.source;r.bindTexture(K,W.__webglTexture,t.TEXTURE0+J);const Ee=n.get(ie);if(ie.version!==Ee.__version||fe===!0){r.activeTexture(t.TEXTURE0+J);const C=xt.getPrimaries(xt.workingColorSpace),P=V.colorSpace===Fo?null:xt.getPrimaries(V.colorSpace),G=V.colorSpace===Fo||C===P?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,V.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,V.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,G);let te=m(V.image,!1,i.maxTextureSize);te=$(V,te);const ae=s.convert(V.format,V.colorSpace),pe=s.convert(V.type);let ve=v(V.internalFormat,ae,pe,V.colorSpace,V.isVideoTexture);T(K,V);let Ie;const ke=V.mipmaps,Le=V.isVideoTexture!==!0,Oe=Ee.__version===void 0||fe===!0,ue=ie.dataReady,Qe=_(V,te);if(V.isDepthTexture)ve=y(V.format===Ff,V.type),Oe&&(Le?r.texStorage2D(t.TEXTURE_2D,1,ve,te.width,te.height):r.texImage2D(t.TEXTURE_2D,0,ve,te.width,te.height,0,ae,pe,null));else if(V.isDataTexture)if(ke.length>0){Le&&Oe&&r.texStorage2D(t.TEXTURE_2D,Qe,ve,ke[0].width,ke[0].height);for(let xe=0,Ce=ke.length;xe<Ce;xe++)Ie=ke[xe],Le?ue&&r.texSubImage2D(t.TEXTURE_2D,xe,0,0,Ie.width,Ie.height,ae,pe,Ie.data):r.texImage2D(t.TEXTURE_2D,xe,ve,Ie.width,Ie.height,0,ae,pe,Ie.data);V.generateMipmaps=!1}else Le?(Oe&&r.texStorage2D(t.TEXTURE_2D,Qe,ve,te.width,te.height),ue&&r.texSubImage2D(t.TEXTURE_2D,0,0,0,te.width,te.height,ae,pe,te.data)):r.texImage2D(t.TEXTURE_2D,0,ve,te.width,te.height,0,ae,pe,te.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){Le&&Oe&&r.texStorage3D(t.TEXTURE_2D_ARRAY,Qe,ve,ke[0].width,ke[0].height,te.depth);for(let xe=0,Ce=ke.length;xe<Ce;xe++)if(Ie=ke[xe],V.format!==kn)if(ae!==null)if(Le){if(ue)if(V.layerUpdates.size>0){const Fe=Vk(Ie.width,Ie.height,V.format,V.type);for(const Re of V.layerUpdates){const ot=Ie.data.subarray(Re*Fe/Ie.data.BYTES_PER_ELEMENT,(Re+1)*Fe/Ie.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,Re,Ie.width,Ie.height,1,ae,ot,0,0)}V.clearLayerUpdates()}else r.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,0,Ie.width,Ie.height,te.depth,ae,Ie.data,0,0)}else r.compressedTexImage3D(t.TEXTURE_2D_ARRAY,xe,ve,Ie.width,Ie.height,te.depth,0,Ie.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Le?ue&&r.texSubImage3D(t.TEXTURE_2D_ARRAY,xe,0,0,0,Ie.width,Ie.height,te.depth,ae,pe,Ie.data):r.texImage3D(t.TEXTURE_2D_ARRAY,xe,ve,Ie.width,Ie.height,te.depth,0,ae,pe,Ie.data)}else{Le&&Oe&&r.texStorage2D(t.TEXTURE_2D,Qe,ve,ke[0].width,ke[0].height);for(let xe=0,Ce=ke.length;xe<Ce;xe++)Ie=ke[xe],V.format!==kn?ae!==null?Le?ue&&r.compressedTexSubImage2D(t.TEXTURE_2D,xe,0,0,Ie.width,Ie.height,ae,Ie.data):r.compressedTexImage2D(t.TEXTURE_2D,xe,ve,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Le?ue&&r.texSubImage2D(t.TEXTURE_2D,xe,0,0,Ie.width,Ie.height,ae,pe,Ie.data):r.texImage2D(t.TEXTURE_2D,xe,ve,Ie.width,Ie.height,0,ae,pe,Ie.data)}else if(V.isDataArrayTexture)if(Le){if(Oe&&r.texStorage3D(t.TEXTURE_2D_ARRAY,Qe,ve,te.width,te.height,te.depth),ue)if(V.layerUpdates.size>0){const xe=Vk(te.width,te.height,V.format,V.type);for(const Ce of V.layerUpdates){const Fe=te.data.subarray(Ce*xe/te.data.BYTES_PER_ELEMENT,(Ce+1)*xe/te.data.BYTES_PER_ELEMENT);r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,Ce,te.width,te.height,1,ae,pe,Fe)}V.clearLayerUpdates()}else r.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,te.width,te.height,te.depth,ae,pe,te.data)}else r.texImage3D(t.TEXTURE_2D_ARRAY,0,ve,te.width,te.height,te.depth,0,ae,pe,te.data);else if(V.isData3DTexture)Le?(Oe&&r.texStorage3D(t.TEXTURE_3D,Qe,ve,te.width,te.height,te.depth),ue&&r.texSubImage3D(t.TEXTURE_3D,0,0,0,0,te.width,te.height,te.depth,ae,pe,te.data)):r.texImage3D(t.TEXTURE_3D,0,ve,te.width,te.height,te.depth,0,ae,pe,te.data);else if(V.isFramebufferTexture){if(Oe)if(Le)r.texStorage2D(t.TEXTURE_2D,Qe,ve,te.width,te.height);else{let xe=te.width,Ce=te.height;for(let Fe=0;Fe<Qe;Fe++)r.texImage2D(t.TEXTURE_2D,Fe,ve,xe,Ce,0,ae,pe,null),xe>>=1,Ce>>=1}}else if(ke.length>0){if(Le&&Oe){const xe=ce(ke[0]);r.texStorage2D(t.TEXTURE_2D,Qe,ve,xe.width,xe.height)}for(let xe=0,Ce=ke.length;xe<Ce;xe++)Ie=ke[xe],Le?ue&&r.texSubImage2D(t.TEXTURE_2D,xe,0,0,ae,pe,Ie):r.texImage2D(t.TEXTURE_2D,xe,ve,ae,pe,Ie);V.generateMipmaps=!1}else if(Le){if(Oe){const xe=ce(te);r.texStorage2D(t.TEXTURE_2D,Qe,ve,xe.width,xe.height)}ue&&r.texSubImage2D(t.TEXTURE_2D,0,0,0,ae,pe,te)}else r.texImage2D(t.TEXTURE_2D,0,ve,ae,pe,te);g(V)&&p(K),Ee.__version=ie.version,V.onUpdate&&V.onUpdate(V)}W.__version=V.version}function ee(W,V,J){if(V.image.length!==6)return;const K=H(W,V),fe=V.source;r.bindTexture(t.TEXTURE_CUBE_MAP,W.__webglTexture,t.TEXTURE0+J);const ie=n.get(fe);if(fe.version!==ie.__version||K===!0){r.activeTexture(t.TEXTURE0+J);const Ee=xt.getPrimaries(xt.workingColorSpace),C=V.colorSpace===Fo?null:xt.getPrimaries(V.colorSpace),P=V.colorSpace===Fo||Ee===C?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,V.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,V.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,P);const G=V.isCompressedTexture||V.image[0].isCompressedTexture,te=V.image[0]&&V.image[0].isDataTexture,ae=[];for(let Ce=0;Ce<6;Ce++)!G&&!te?ae[Ce]=m(V.image[Ce],!0,i.maxCubemapSize):ae[Ce]=te?V.image[Ce].image:V.image[Ce],ae[Ce]=$(V,ae[Ce]);const pe=ae[0],ve=s.convert(V.format,V.colorSpace),Ie=s.convert(V.type),ke=v(V.internalFormat,ve,Ie,V.colorSpace),Le=V.isVideoTexture!==!0,Oe=ie.__version===void 0||K===!0,ue=fe.dataReady;let Qe=_(V,pe);T(t.TEXTURE_CUBE_MAP,V);let xe;if(G){Le&&Oe&&r.texStorage2D(t.TEXTURE_CUBE_MAP,Qe,ke,pe.width,pe.height);for(let Ce=0;Ce<6;Ce++){xe=ae[Ce].mipmaps;for(let Fe=0;Fe<xe.length;Fe++){const Re=xe[Fe];V.format!==kn?ve!==null?Le?ue&&r.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Fe,0,0,Re.width,Re.height,ve,Re.data):r.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Fe,ke,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Le?ue&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Fe,0,0,Re.width,Re.height,ve,Ie,Re.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Fe,ke,Re.width,Re.height,0,ve,Ie,Re.data)}}}else{if(xe=V.mipmaps,Le&&Oe){xe.length>0&&Qe++;const Ce=ce(ae[0]);r.texStorage2D(t.TEXTURE_CUBE_MAP,Qe,ke,Ce.width,Ce.height)}for(let Ce=0;Ce<6;Ce++)if(te){Le?ue&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,ae[Ce].width,ae[Ce].height,ve,Ie,ae[Ce].data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,ke,ae[Ce].width,ae[Ce].height,0,ve,Ie,ae[Ce].data);for(let Fe=0;Fe<xe.length;Fe++){const Re=xe[Fe].image[Ce].image;Le?ue&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Fe+1,0,0,Re.width,Re.height,ve,Ie,Re.data):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Fe+1,ke,Re.width,Re.height,0,ve,Ie,Re.data)}}else{Le?ue&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,0,0,ve,Ie,ae[Ce]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,0,ke,ve,Ie,ae[Ce]);for(let Fe=0;Fe<xe.length;Fe++){const Re=xe[Fe];Le?ue&&r.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Fe+1,0,0,ve,Ie,Re.image[Ce]):r.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Fe+1,ke,ve,Ie,Re.image[Ce])}}}g(V)&&p(t.TEXTURE_CUBE_MAP),ie.__version=fe.version,V.onUpdate&&V.onUpdate(V)}W.__version=V.version}function U(W,V,J,K,fe,ie){const Ee=s.convert(J.format,J.colorSpace),C=s.convert(J.type),P=v(J.internalFormat,Ee,C,J.colorSpace);if(!n.get(V).__hasExternalTextures){const G=Math.max(1,V.width>>ie),te=Math.max(1,V.height>>ie);fe===t.TEXTURE_3D||fe===t.TEXTURE_2D_ARRAY?r.texImage3D(fe,ie,P,G,te,V.depth,0,Ee,C,null):r.texImage2D(fe,ie,P,G,te,0,Ee,C,null)}r.bindFramebuffer(t.FRAMEBUFFER,W),oe(V)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,K,fe,n.get(J).__webglTexture,0,he(V)):(fe===t.TEXTURE_2D||fe>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&fe<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,K,fe,n.get(J).__webglTexture,ie),r.bindFramebuffer(t.FRAMEBUFFER,null)}function se(W,V,J){if(t.bindRenderbuffer(t.RENDERBUFFER,W),V.depthBuffer){const K=V.depthTexture,fe=K&&K.isDepthTexture?K.type:null,ie=y(V.stencilBuffer,fe),Ee=V.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,C=he(V);oe(V)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,C,ie,V.width,V.height):J?t.renderbufferStorageMultisample(t.RENDERBUFFER,C,ie,V.width,V.height):t.renderbufferStorage(t.RENDERBUFFER,ie,V.width,V.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ee,t.RENDERBUFFER,W)}else{const K=V.textures;for(let fe=0;fe<K.length;fe++){const ie=K[fe],Ee=s.convert(ie.format,ie.colorSpace),C=s.convert(ie.type),P=v(ie.internalFormat,Ee,C,ie.colorSpace),G=he(V);J&&oe(V)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,G,P,V.width,V.height):oe(V)?o.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,G,P,V.width,V.height):t.renderbufferStorage(t.RENDERBUFFER,P,V.width,V.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function le(W,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(t.FRAMEBUFFER,W),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),b(V.depthTexture,0);const J=n.get(V.depthTexture).__webglTexture,K=he(V);if(V.depthTexture.format===sf)oe(V)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,J,0,K):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,J,0);else if(V.depthTexture.format===Ff)oe(V)?o.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,J,0,K):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,J,0);else throw new Error("Unknown depthTexture format")}function Ae(W){const V=n.get(W),J=W.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==W.depthTexture){const K=W.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),K){const fe=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,K.removeEventListener("dispose",fe)};K.addEventListener("dispose",fe),V.__depthDisposeCallback=fe}V.__boundDepthTexture=K}if(W.depthTexture&&!V.__autoAllocateDepthBuffer){if(J)throw new Error("target.depthTexture not supported in Cube render targets");le(V.__webglFramebuffer,W)}else if(J){V.__webglDepthbuffer=[];for(let K=0;K<6;K++)if(r.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer[K]),V.__webglDepthbuffer[K]===void 0)V.__webglDepthbuffer[K]=t.createRenderbuffer(),se(V.__webglDepthbuffer[K],W,!1);else{const fe=W.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ie=V.__webglDepthbuffer[K];t.bindRenderbuffer(t.RENDERBUFFER,ie),t.framebufferRenderbuffer(t.FRAMEBUFFER,fe,t.RENDERBUFFER,ie)}}else if(r.bindFramebuffer(t.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=t.createRenderbuffer(),se(V.__webglDepthbuffer,W,!1);else{const K=W.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,fe=V.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,fe),t.framebufferRenderbuffer(t.FRAMEBUFFER,K,t.RENDERBUFFER,fe)}r.bindFramebuffer(t.FRAMEBUFFER,null)}function ge(W,V,J){const K=n.get(W);V!==void 0&&U(K.__webglFramebuffer,W,W.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),J!==void 0&&Ae(W)}function ne(W){const V=W.texture,J=n.get(W),K=n.get(V);W.addEventListener("dispose",x);const fe=W.textures,ie=W.isWebGLCubeRenderTarget===!0,Ee=fe.length>1;if(Ee||(K.__webglTexture===void 0&&(K.__webglTexture=t.createTexture()),K.__version=V.version,a.memory.textures++),ie){J.__webglFramebuffer=[];for(let C=0;C<6;C++)if(V.mipmaps&&V.mipmaps.length>0){J.__webglFramebuffer[C]=[];for(let P=0;P<V.mipmaps.length;P++)J.__webglFramebuffer[C][P]=t.createFramebuffer()}else J.__webglFramebuffer[C]=t.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){J.__webglFramebuffer=[];for(let C=0;C<V.mipmaps.length;C++)J.__webglFramebuffer[C]=t.createFramebuffer()}else J.__webglFramebuffer=t.createFramebuffer();if(Ee)for(let C=0,P=fe.length;C<P;C++){const G=n.get(fe[C]);G.__webglTexture===void 0&&(G.__webglTexture=t.createTexture(),a.memory.textures++)}if(W.samples>0&&oe(W)===!1){J.__webglMultisampledFramebuffer=t.createFramebuffer(),J.__webglColorRenderbuffer=[],r.bindFramebuffer(t.FRAMEBUFFER,J.__webglMultisampledFramebuffer);for(let C=0;C<fe.length;C++){const P=fe[C];J.__webglColorRenderbuffer[C]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,J.__webglColorRenderbuffer[C]);const G=s.convert(P.format,P.colorSpace),te=s.convert(P.type),ae=v(P.internalFormat,G,te,P.colorSpace,W.isXRRenderTarget===!0),pe=he(W);t.renderbufferStorageMultisample(t.RENDERBUFFER,pe,ae,W.width,W.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+C,t.RENDERBUFFER,J.__webglColorRenderbuffer[C])}t.bindRenderbuffer(t.RENDERBUFFER,null),W.depthBuffer&&(J.__webglDepthRenderbuffer=t.createRenderbuffer(),se(J.__webglDepthRenderbuffer,W,!0)),r.bindFramebuffer(t.FRAMEBUFFER,null)}}if(ie){r.bindTexture(t.TEXTURE_CUBE_MAP,K.__webglTexture),T(t.TEXTURE_CUBE_MAP,V);for(let C=0;C<6;C++)if(V.mipmaps&&V.mipmaps.length>0)for(let P=0;P<V.mipmaps.length;P++)U(J.__webglFramebuffer[C][P],W,V,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+C,P);else U(J.__webglFramebuffer[C],W,V,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+C,0);g(V)&&p(t.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(Ee){for(let C=0,P=fe.length;C<P;C++){const G=fe[C],te=n.get(G);r.bindTexture(t.TEXTURE_2D,te.__webglTexture),T(t.TEXTURE_2D,G),U(J.__webglFramebuffer,W,G,t.COLOR_ATTACHMENT0+C,t.TEXTURE_2D,0),g(G)&&p(t.TEXTURE_2D)}r.unbindTexture()}else{let C=t.TEXTURE_2D;if((W.isWebGL3DRenderTarget||W.isWebGLArrayRenderTarget)&&(C=W.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),r.bindTexture(C,K.__webglTexture),T(C,V),V.mipmaps&&V.mipmaps.length>0)for(let P=0;P<V.mipmaps.length;P++)U(J.__webglFramebuffer[P],W,V,t.COLOR_ATTACHMENT0,C,P);else U(J.__webglFramebuffer,W,V,t.COLOR_ATTACHMENT0,C,0);g(V)&&p(C),r.unbindTexture()}W.depthBuffer&&Ae(W)}function de(W){const V=W.textures;for(let J=0,K=V.length;J<K;J++){const fe=V[J];if(g(fe)){const ie=W.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ee=n.get(fe).__webglTexture;r.bindTexture(ie,Ee),p(ie),r.unbindTexture()}}}const Te=[],re=[];function N(W){if(W.samples>0){if(oe(W)===!1){const V=W.textures,J=W.width,K=W.height;let fe=t.COLOR_BUFFER_BIT;const ie=W.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ee=n.get(W),C=V.length>1;if(C)for(let P=0;P<V.length;P++)r.bindFramebuffer(t.FRAMEBUFFER,Ee.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+P,t.RENDERBUFFER,null),r.bindFramebuffer(t.FRAMEBUFFER,Ee.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+P,t.TEXTURE_2D,null,0);r.bindFramebuffer(t.READ_FRAMEBUFFER,Ee.__webglMultisampledFramebuffer),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ee.__webglFramebuffer);for(let P=0;P<V.length;P++){if(W.resolveDepthBuffer&&(W.depthBuffer&&(fe|=t.DEPTH_BUFFER_BIT),W.stencilBuffer&&W.resolveStencilBuffer&&(fe|=t.STENCIL_BUFFER_BIT)),C){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ee.__webglColorRenderbuffer[P]);const G=n.get(V[P]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,G,0)}t.blitFramebuffer(0,0,J,K,0,0,J,K,fe,t.NEAREST),l===!0&&(Te.length=0,re.length=0,Te.push(t.COLOR_ATTACHMENT0+P),W.depthBuffer&&W.resolveDepthBuffer===!1&&(Te.push(ie),re.push(ie),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,re)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Te))}if(r.bindFramebuffer(t.READ_FRAMEBUFFER,null),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),C)for(let P=0;P<V.length;P++){r.bindFramebuffer(t.FRAMEBUFFER,Ee.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+P,t.RENDERBUFFER,Ee.__webglColorRenderbuffer[P]);const G=n.get(V[P]).__webglTexture;r.bindFramebuffer(t.FRAMEBUFFER,Ee.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+P,t.TEXTURE_2D,G,0)}r.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ee.__webglMultisampledFramebuffer)}else if(W.depthBuffer&&W.resolveDepthBuffer===!1&&l){const V=W.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[V])}}}function he(W){return Math.min(i.maxSamples,W.samples)}function oe(W){const V=n.get(W);return W.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function Z(W){const V=a.render.frame;c.get(W)!==V&&(c.set(W,V),W.update())}function $(W,V){const J=W.colorSpace,K=W.format,fe=W.type;return W.isCompressedTexture===!0||W.isVideoTexture===!0||J!==Bn&&J!==Fo&&(xt.getTransfer(J)===Er?(K!==kn||fe!==tA)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",J)),V}function ce(W){return typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(A.width=W.naturalWidth||W.width,A.height=W.naturalHeight||W.height):typeof VideoFrame<"u"&&W instanceof VideoFrame?(A.width=W.displayWidth,A.height=W.displayHeight):(A.width=W.width,A.height=W.height),A}this.allocateTextureUnit=D,this.resetTextureUnits=L,this.setTexture2D=b,this.setTexture2DArray=S,this.setTexture3D=F,this.setTextureCube=k,this.rebindTextures=ge,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=de,this.updateMultisampleRenderTarget=N,this.setupDepthRenderbuffer=Ae,this.setupFrameBufferTexture=U,this.useMultisampledRTT=oe}function ase(t,e){function r(n,i=Fo){let s;const a=xt.getTransfer(i);if(n===tA)return t.UNSIGNED_BYTE;if(n===BI)return t.UNSIGNED_SHORT_4_4_4_4;if(n===MI)return t.UNSIGNED_SHORT_5_5_5_1;if(n===d8)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===u8)return t.BYTE;if(n===h8)return t.SHORT;if(n===Hg)return t.UNSIGNED_SHORT;if(n===EI)return t.INT;if(n===vc)return t.UNSIGNED_INT;if(n===mi)return t.FLOAT;if(n===No)return t.HALF_FLOAT;if(n===f8)return t.ALPHA;if(n===p8)return t.RGB;if(n===kn)return t.RGBA;if(n===m8)return t.LUMINANCE;if(n===g8)return t.LUMINANCE_ALPHA;if(n===sf)return t.DEPTH_COMPONENT;if(n===Ff)return t.DEPTH_STENCIL;if(n===TI)return t.RED;if(n===c_)return t.RED_INTEGER;if(n===v8)return t.RG;if(n===CI)return t.RG_INTEGER;if(n===SI)return t.RGBA_INTEGER;if(n===_w||n===xw||n===Ew||n===Bw)if(a===Er)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===_w)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===xw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ew)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Bw)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===_w)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===xw)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ew)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Bw)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===rC||n===nC||n===iC||n===sC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===rC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===nC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===iC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===sC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===aC||n===oC||n===lC)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===aC||n===oC)return a===Er?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===lC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===AC||n===cC||n===uC||n===hC||n===dC||n===fC||n===pC||n===mC||n===gC||n===vC||n===yC||n===wC||n===bC||n===_C)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===AC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===cC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===uC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===hC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===dC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===fC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===pC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===mC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===gC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===vC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===yC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===wC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===bC)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===_C)return a===Er?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Mw||n===xC||n===EC)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===Mw)return a===Er?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===xC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===EC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===y8||n===BC||n===MC||n===TC)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Mw)return s.COMPRESSED_RED_RGTC1_EXT;if(n===BC)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===MC)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===TC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Uf?t.UNSIGNED_INT_24_8:t[n]!==void 0?t[n]:null}return{convert:r}}class ose extends In{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qn extends Lt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const lse={type:"move"};class zE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const n of e.hand.values())this._getHandJoint(r,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,n){let i=null,s=null,a=null;const o=this._targetRay,l=this._grip,A=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(A&&e.hand){a=!0;for(const m of e.hand.values()){const g=r.getJointPose(m,n),p=this._getHandJoint(A,m);g!==null&&(p.matrix.fromArray(g.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,p.jointRadius=g.radius),p.visible=g!==null}const c=A.joints["index-finger-tip"],u=A.joints["thumb-tip"],h=c.position.distanceTo(u.position),d=.02,f=.005;A.inputState.pinching&&h>d+f?(A.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!A.inputState.pinching&&h<=d-f&&(A.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=r.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=r.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(lse)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=s!==null),A!==null&&(A.visible=a!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const n=new qn;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[r.jointName]=n,e.add(n)}return e.joints[r.jointName]}}const Ase=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,cse=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class use{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,r,n){if(this.texture===null){const i=new Sr,s=e.properties.get(i);s.__webglTexture=r.texture,(r.depthNear!=n.depthNear||r.depthFar!=n.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const r=e.cameras[0].viewport,n=new fn({vertexShader:Ase,fragmentShader:cse,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new Ar(new oA(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class hse extends Ic{constructor(e,r){super();const n=this;let i=null,s=1,a=null,o="local-floor",l=1,A=null,c=null,u=null,h=null,d=null,f=null;const m=new use,g=r.getContextAttributes();let p=null,v=null;const y=[],_=[],E=new Ke;let x=null;const B=new In;B.layers.enable(1),B.viewport=new kt;const M=new In;M.layers.enable(2),M.viewport=new kt;const R=[B,M],I=new ose;I.layers.enable(1),I.layers.enable(2);let L=null,D=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let U=y[ee];return U===void 0&&(U=new zE,y[ee]=U),U.getTargetRaySpace()},this.getControllerGrip=function(ee){let U=y[ee];return U===void 0&&(U=new zE,y[ee]=U),U.getGripSpace()},this.getHand=function(ee){let U=y[ee];return U===void 0&&(U=new zE,y[ee]=U),U.getHandSpace()};function w(ee){const U=_.indexOf(ee.inputSource);if(U===-1)return;const se=y[U];se!==void 0&&(se.update(ee.inputSource,ee.frame,A||a),se.dispatchEvent({type:ee.type,data:ee.inputSource}))}function b(){i.removeEventListener("select",w),i.removeEventListener("selectstart",w),i.removeEventListener("selectend",w),i.removeEventListener("squeeze",w),i.removeEventListener("squeezestart",w),i.removeEventListener("squeezeend",w),i.removeEventListener("end",b),i.removeEventListener("inputsourceschange",S);for(let ee=0;ee<y.length;ee++){const U=_[ee];U!==null&&(_[ee]=null,y[ee].disconnect(U))}L=null,D=null,m.reset(),e.setRenderTarget(p),d=null,h=null,u=null,i=null,v=null,me.stop(),n.isPresenting=!1,e.setPixelRatio(x),e.setSize(E.width,E.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){s=ee,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){o=ee,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return A||a},this.setReferenceSpace=function(ee){A=ee},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(ee){if(i=ee,i!==null){if(p=e.getRenderTarget(),i.addEventListener("select",w),i.addEventListener("selectstart",w),i.addEventListener("selectend",w),i.addEventListener("squeeze",w),i.addEventListener("squeezestart",w),i.addEventListener("squeezeend",w),i.addEventListener("end",b),i.addEventListener("inputsourceschange",S),g.xrCompatible!==!0&&await r.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(E),i.renderState.layers===void 0){const U={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(i,r,U),i.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new $o(d.framebufferWidth,d.framebufferHeight,{format:kn,type:tA,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let U=null,se=null,le=null;g.depth&&(le=g.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,U=g.stencil?Ff:sf,se=g.stencil?Uf:vc);const Ae={colorFormat:r.RGBA8,depthFormat:le,scaleFactor:s};u=new XRWebGLBinding(i,r),h=u.createProjectionLayer(Ae),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new $o(h.textureWidth,h.textureHeight,{format:kn,type:tA,depthTexture:new OI(h.textureWidth,h.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,U),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}v.isXRRenderTarget=!0,this.setFoveation(l),A=null,a=await i.requestReferenceSpace(o),me.setContext(i),me.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function S(ee){for(let U=0;U<ee.removed.length;U++){const se=ee.removed[U],le=_.indexOf(se);le>=0&&(_[le]=null,y[le].disconnect(se))}for(let U=0;U<ee.added.length;U++){const se=ee.added[U];let le=_.indexOf(se);if(le===-1){for(let ge=0;ge<y.length;ge++)if(ge>=_.length){_.push(se),le=ge;break}else if(_[ge]===null){_[ge]=se,le=ge;break}if(le===-1)break}const Ae=y[le];Ae&&Ae.connect(se)}}const F=new Y,k=new Y;function Q(ee,U,se){F.setFromMatrixPosition(U.matrixWorld),k.setFromMatrixPosition(se.matrixWorld);const le=F.distanceTo(k),Ae=U.projectionMatrix.elements,ge=se.projectionMatrix.elements,ne=Ae[14]/(Ae[10]-1),de=Ae[14]/(Ae[10]+1),Te=(Ae[9]+1)/Ae[5],re=(Ae[9]-1)/Ae[5],N=(Ae[8]-1)/Ae[0],he=(ge[8]+1)/ge[0],oe=ne*N,Z=ne*he,$=le/(-N+he),ce=$*-N;if(U.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(ce),ee.translateZ($),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert(),Ae[10]===-1)ee.projectionMatrix.copy(U.projectionMatrix),ee.projectionMatrixInverse.copy(U.projectionMatrixInverse);else{const W=ne+$,V=de+$,J=oe-ce,K=Z+(le-ce),fe=Te*de/V*W,ie=re*de/V*W;ee.projectionMatrix.makePerspective(J,K,fe,ie,W,V),ee.projectionMatrixInverse.copy(ee.projectionMatrix).invert()}}function z(ee,U){U===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(U.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(i===null)return;let U=ee.near,se=ee.far;m.texture!==null&&(m.depthNear>0&&(U=m.depthNear),m.depthFar>0&&(se=m.depthFar)),I.near=M.near=B.near=U,I.far=M.far=B.far=se,(L!==I.near||D!==I.far)&&(i.updateRenderState({depthNear:I.near,depthFar:I.far}),L=I.near,D=I.far);const le=ee.parent,Ae=I.cameras;z(I,le);for(let ge=0;ge<Ae.length;ge++)z(Ae[ge],le);Ae.length===2?Q(I,B,M):I.projectionMatrix.copy(B.projectionMatrix),j(ee,I,le)};function j(ee,U,se){se===null?ee.matrix.copy(U.matrixWorld):(ee.matrix.copy(se.matrixWorld),ee.matrix.invert(),ee.matrix.multiply(U.matrixWorld)),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale),ee.updateMatrixWorld(!0),ee.projectionMatrix.copy(U.projectionMatrix),ee.projectionMatrixInverse.copy(U.projectionMatrixInverse),ee.isPerspectiveCamera&&(ee.fov=Pf*2*Math.atan(1/ee.projectionMatrix.elements[5]),ee.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(h===null&&d===null))return l},this.setFoveation=function(ee){l=ee,h!==null&&(h.fixedFoveation=ee),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=ee)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(I)};let T=null;function H(ee,U){if(c=U.getViewerPose(A||a),f=U,c!==null){const se=c.views;d!==null&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let le=!1;se.length!==I.cameras.length&&(I.cameras.length=0,le=!0);for(let ge=0;ge<se.length;ge++){const ne=se[ge];let de=null;if(d!==null)de=d.getViewport(ne);else{const re=u.getViewSubImage(h,ne);de=re.viewport,ge===0&&(e.setRenderTargetTextures(v,re.colorTexture,h.ignoreDepthValues?void 0:re.depthStencilTexture),e.setRenderTarget(v))}let Te=R[ge];Te===void 0&&(Te=new In,Te.layers.enable(ge),Te.viewport=new kt,R[ge]=Te),Te.matrix.fromArray(ne.transform.matrix),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.projectionMatrix.fromArray(ne.projectionMatrix),Te.projectionMatrixInverse.copy(Te.projectionMatrix).invert(),Te.viewport.set(de.x,de.y,de.width,de.height),ge===0&&(I.matrix.copy(Te.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),le===!0&&I.cameras.push(Te)}const Ae=i.enabledFeatures;if(Ae&&Ae.includes("depth-sensing")){const ge=u.getDepthInformation(se[0]);ge&&ge.isValid&&ge.texture&&m.init(e,ge,i.renderState)}}for(let se=0;se<y.length;se++){const le=_[se],Ae=y[se];le!==null&&Ae!==void 0&&Ae.update(le,U,A||a)}T&&T(ee,U),U.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:U}),f=null}const me=new S8;me.setAnimationLoop(H),this.setAnimationLoop=function(ee){T=ee},this.dispose=function(){}}}const jc=new en,dse=new je;function fse(t,e){function r(g,p){g.matrixAutoUpdate===!0&&g.updateMatrix(),p.value.copy(g.matrix)}function n(g,p){p.color.getRGB(g.fogColor.value,M8(t)),p.isFog?(g.fogNear.value=p.near,g.fogFar.value=p.far):p.isFogExp2&&(g.fogDensity.value=p.density)}function i(g,p,v,y,_){p.isMeshBasicMaterial||p.isMeshLambertMaterial?s(g,p):p.isMeshToonMaterial?(s(g,p),u(g,p)):p.isMeshPhongMaterial?(s(g,p),c(g,p)):p.isMeshStandardMaterial?(s(g,p),h(g,p),p.isMeshPhysicalMaterial&&d(g,p,_)):p.isMeshMatcapMaterial?(s(g,p),f(g,p)):p.isMeshDepthMaterial?s(g,p):p.isMeshDistanceMaterial?(s(g,p),m(g,p)):p.isMeshNormalMaterial?s(g,p):p.isLineBasicMaterial?(a(g,p),p.isLineDashedMaterial&&o(g,p)):p.isPointsMaterial?l(g,p,v,y):p.isSpriteMaterial?A(g,p):p.isShadowMaterial?(g.color.value.copy(p.color),g.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function s(g,p){g.opacity.value=p.opacity,p.color&&g.diffuse.value.copy(p.color),p.emissive&&g.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(g.map.value=p.map,r(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,r(p.alphaMap,g.alphaMapTransform)),p.bumpMap&&(g.bumpMap.value=p.bumpMap,r(p.bumpMap,g.bumpMapTransform),g.bumpScale.value=p.bumpScale,p.side===ti&&(g.bumpScale.value*=-1)),p.normalMap&&(g.normalMap.value=p.normalMap,r(p.normalMap,g.normalMapTransform),g.normalScale.value.copy(p.normalScale),p.side===ti&&g.normalScale.value.negate()),p.displacementMap&&(g.displacementMap.value=p.displacementMap,r(p.displacementMap,g.displacementMapTransform),g.displacementScale.value=p.displacementScale,g.displacementBias.value=p.displacementBias),p.emissiveMap&&(g.emissiveMap.value=p.emissiveMap,r(p.emissiveMap,g.emissiveMapTransform)),p.specularMap&&(g.specularMap.value=p.specularMap,r(p.specularMap,g.specularMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest);const v=e.get(p),y=v.envMap,_=v.envMapRotation;y&&(g.envMap.value=y,jc.copy(_),jc.x*=-1,jc.y*=-1,jc.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(jc.y*=-1,jc.z*=-1),g.envMapRotation.value.setFromMatrix4(dse.makeRotationFromEuler(jc)),g.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=p.reflectivity,g.ior.value=p.ior,g.refractionRatio.value=p.refractionRatio),p.lightMap&&(g.lightMap.value=p.lightMap,g.lightMapIntensity.value=p.lightMapIntensity,r(p.lightMap,g.lightMapTransform)),p.aoMap&&(g.aoMap.value=p.aoMap,g.aoMapIntensity.value=p.aoMapIntensity,r(p.aoMap,g.aoMapTransform))}function a(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,p.map&&(g.map.value=p.map,r(p.map,g.mapTransform))}function o(g,p){g.dashSize.value=p.dashSize,g.totalSize.value=p.dashSize+p.gapSize,g.scale.value=p.scale}function l(g,p,v,y){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.size.value=p.size*v,g.scale.value=y*.5,p.map&&(g.map.value=p.map,r(p.map,g.uvTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,r(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function A(g,p){g.diffuse.value.copy(p.color),g.opacity.value=p.opacity,g.rotation.value=p.rotation,p.map&&(g.map.value=p.map,r(p.map,g.mapTransform)),p.alphaMap&&(g.alphaMap.value=p.alphaMap,r(p.alphaMap,g.alphaMapTransform)),p.alphaTest>0&&(g.alphaTest.value=p.alphaTest)}function c(g,p){g.specular.value.copy(p.specular),g.shininess.value=Math.max(p.shininess,1e-4)}function u(g,p){p.gradientMap&&(g.gradientMap.value=p.gradientMap)}function h(g,p){g.metalness.value=p.metalness,p.metalnessMap&&(g.metalnessMap.value=p.metalnessMap,r(p.metalnessMap,g.metalnessMapTransform)),g.roughness.value=p.roughness,p.roughnessMap&&(g.roughnessMap.value=p.roughnessMap,r(p.roughnessMap,g.roughnessMapTransform)),p.envMap&&(g.envMapIntensity.value=p.envMapIntensity)}function d(g,p,v){g.ior.value=p.ior,p.sheen>0&&(g.sheenColor.value.copy(p.sheenColor).multiplyScalar(p.sheen),g.sheenRoughness.value=p.sheenRoughness,p.sheenColorMap&&(g.sheenColorMap.value=p.sheenColorMap,r(p.sheenColorMap,g.sheenColorMapTransform)),p.sheenRoughnessMap&&(g.sheenRoughnessMap.value=p.sheenRoughnessMap,r(p.sheenRoughnessMap,g.sheenRoughnessMapTransform))),p.clearcoat>0&&(g.clearcoat.value=p.clearcoat,g.clearcoatRoughness.value=p.clearcoatRoughness,p.clearcoatMap&&(g.clearcoatMap.value=p.clearcoatMap,r(p.clearcoatMap,g.clearcoatMapTransform)),p.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap,r(p.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),p.clearcoatNormalMap&&(g.clearcoatNormalMap.value=p.clearcoatNormalMap,r(p.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),p.side===ti&&g.clearcoatNormalScale.value.negate())),p.dispersion>0&&(g.dispersion.value=p.dispersion),p.iridescence>0&&(g.iridescence.value=p.iridescence,g.iridescenceIOR.value=p.iridescenceIOR,g.iridescenceThicknessMinimum.value=p.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=p.iridescenceThicknessRange[1],p.iridescenceMap&&(g.iridescenceMap.value=p.iridescenceMap,r(p.iridescenceMap,g.iridescenceMapTransform)),p.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=p.iridescenceThicknessMap,r(p.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),p.transmission>0&&(g.transmission.value=p.transmission,g.transmissionSamplerMap.value=v.texture,g.transmissionSamplerSize.value.set(v.width,v.height),p.transmissionMap&&(g.transmissionMap.value=p.transmissionMap,r(p.transmissionMap,g.transmissionMapTransform)),g.thickness.value=p.thickness,p.thicknessMap&&(g.thicknessMap.value=p.thicknessMap,r(p.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=p.attenuationDistance,g.attenuationColor.value.copy(p.attenuationColor)),p.anisotropy>0&&(g.anisotropyVector.value.set(p.anisotropy*Math.cos(p.anisotropyRotation),p.anisotropy*Math.sin(p.anisotropyRotation)),p.anisotropyMap&&(g.anisotropyMap.value=p.anisotropyMap,r(p.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=p.specularIntensity,g.specularColor.value.copy(p.specularColor),p.specularColorMap&&(g.specularColorMap.value=p.specularColorMap,r(p.specularColorMap,g.specularColorMapTransform)),p.specularIntensityMap&&(g.specularIntensityMap.value=p.specularIntensityMap,r(p.specularIntensityMap,g.specularIntensityMapTransform))}function f(g,p){p.matcap&&(g.matcap.value=p.matcap)}function m(g,p){const v=e.get(p).light;g.referencePosition.value.setFromMatrixPosition(v.matrixWorld),g.nearDistance.value=v.shadow.camera.near,g.farDistance.value=v.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function pse(t,e,r,n){let i={},s={},a=[];const o=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(v,y){const _=y.program;n.uniformBlockBinding(v,_)}function A(v,y){let _=i[v.id];_===void 0&&(f(v),_=c(v),i[v.id]=_,v.addEventListener("dispose",g));const E=y.program;n.updateUBOMapping(v,E);const x=e.render.frame;s[v.id]!==x&&(h(v),s[v.id]=x)}function c(v){const y=u();v.__bindingPointIndex=y;const _=t.createBuffer(),E=v.__size,x=v.usage;return t.bindBuffer(t.UNIFORM_BUFFER,_),t.bufferData(t.UNIFORM_BUFFER,E,x),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,y,_),_}function u(){for(let v=0;v<o;v++)if(a.indexOf(v)===-1)return a.push(v),v;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(v){const y=i[v.id],_=v.uniforms,E=v.__cache;t.bindBuffer(t.UNIFORM_BUFFER,y);for(let x=0,B=_.length;x<B;x++){const M=Array.isArray(_[x])?_[x]:[_[x]];for(let R=0,I=M.length;R<I;R++){const L=M[R];if(d(L,x,R,E)===!0){const D=L.__offset,w=Array.isArray(L.value)?L.value:[L.value];let b=0;for(let S=0;S<w.length;S++){const F=w[S],k=m(F);typeof F=="number"||typeof F=="boolean"?(L.__data[0]=F,t.bufferSubData(t.UNIFORM_BUFFER,D+b,L.__data)):F.isMatrix3?(L.__data[0]=F.elements[0],L.__data[1]=F.elements[1],L.__data[2]=F.elements[2],L.__data[3]=0,L.__data[4]=F.elements[3],L.__data[5]=F.elements[4],L.__data[6]=F.elements[5],L.__data[7]=0,L.__data[8]=F.elements[6],L.__data[9]=F.elements[7],L.__data[10]=F.elements[8],L.__data[11]=0):(F.toArray(L.__data,b),b+=k.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,D,L.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(v,y,_,E){const x=v.value,B=y+"_"+_;if(E[B]===void 0)return typeof x=="number"||typeof x=="boolean"?E[B]=x:E[B]=x.clone(),!0;{const M=E[B];if(typeof x=="number"||typeof x=="boolean"){if(M!==x)return E[B]=x,!0}else if(M.equals(x)===!1)return M.copy(x),!0}return!1}function f(v){const y=v.uniforms;let _=0;const E=16;for(let B=0,M=y.length;B<M;B++){const R=Array.isArray(y[B])?y[B]:[y[B]];for(let I=0,L=R.length;I<L;I++){const D=R[I],w=Array.isArray(D.value)?D.value:[D.value];for(let b=0,S=w.length;b<S;b++){const F=w[b],k=m(F),Q=_%E,z=Q%k.boundary,j=Q+z;_+=z,j!==0&&E-j<k.storage&&(_+=E-j),D.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),D.__offset=_,_+=k.storage}}}const x=_%E;return x>0&&(_+=E-x),v.__size=_,v.__cache={},this}function m(v){const y={boundary:0,storage:0};return typeof v=="number"||typeof v=="boolean"?(y.boundary=4,y.storage=4):v.isVector2?(y.boundary=8,y.storage=8):v.isVector3||v.isColor?(y.boundary=16,y.storage=12):v.isVector4?(y.boundary=16,y.storage=16):v.isMatrix3?(y.boundary=48,y.storage=48):v.isMatrix4?(y.boundary=64,y.storage=64):v.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",v),y}function g(v){const y=v.target;y.removeEventListener("dispose",g);const _=a.indexOf(y.__bindingPointIndex);a.splice(_,1),t.deleteBuffer(i[y.id]),delete i[y.id],delete s[y.id]}function p(){for(const v in i)t.deleteBuffer(i[v]);a=[],i={},s={}}return{bind:l,update:A,dispose:p}}class y0{constructor(e={}){const{canvas:r=tee(),context:n=null,depth:i=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:A=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;this.isWebGLRenderer=!0;let h;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=a;const d=new Uint32Array(4),f=new Int32Array(4);let m=null,g=null;const p=[],v=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ut,this.toneMapping=cc,this.toneMappingExposure=1;const y=this;let _=!1,E=0,x=0,B=null,M=-1,R=null;const I=new kt,L=new kt;let D=null;const w=new He(0);let b=0,S=r.width,F=r.height,k=1,Q=null,z=null;const j=new kt(0,0,S,F),T=new kt(0,0,S,F);let H=!1;const me=new d_;let ee=!1,U=!1;const se=new je,le=new je,Ae=new Y,ge=new kt,ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let de=!1;function Te(){return B===null?k:1}let re=n;function N(q,we){return r.getContext(q,we)}try{const q={alpha:!0,depth:i,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:A,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${eA}`),r.addEventListener("webglcontextlost",Ce,!1),r.addEventListener("webglcontextrestored",Fe,!1),r.addEventListener("webglcontextcreationerror",Re,!1),re===null){const we="webgl2";if(re=N(we,q),re===null)throw N(we)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let he,oe,Z,$,ce,W,V,J,K,fe,ie,Ee,C,P,G,te,ae,pe,ve,Ie,ke,Le,Oe,ue;function Qe(){he=new bne(re),he.init(),Le=new ase(re,he),oe=new pne(re,he,e,Le),Z=new nse(re),oe.reverseDepthBuffer&&Z.buffers.depth.setReversed(!0),$=new Ene(re),ce=new jie,W=new sse(re,he,Z,ce,oe,Le,$),V=new gne(y),J=new wne(y),K=new Ree(re),Oe=new dne(re,K),fe=new _ne(re,K,$,Oe),ie=new Mne(re,fe,K,$),ve=new Bne(re,oe,W),te=new mne(ce),Ee=new Hie(y,V,J,he,oe,Oe,te),C=new fse(y,ce),P=new Gie,G=new Zie(he),pe=new hne(y,V,J,Z,ie,h,l),ae=new tse(y,ie,oe),ue=new pse(re,$,oe,Z),Ie=new fne(re,he,$),ke=new xne(re,he,$),$.programs=Ee.programs,y.capabilities=oe,y.extensions=he,y.properties=ce,y.renderLists=P,y.shadowMap=ae,y.state=Z,y.info=$}Qe();const xe=new hse(y,re);this.xr=xe,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const q=he.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=he.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(q){q!==void 0&&(k=q,this.setSize(S,F,!1))},this.getSize=function(q){return q.set(S,F)},this.setSize=function(q,we,Be=!0){if(xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}S=q,F=we,r.width=Math.floor(q*k),r.height=Math.floor(we*k),Be===!0&&(r.style.width=q+"px",r.style.height=we+"px"),this.setViewport(0,0,q,we)},this.getDrawingBufferSize=function(q){return q.set(S*k,F*k).floor()},this.setDrawingBufferSize=function(q,we,Be){S=q,F=we,k=Be,r.width=Math.floor(q*Be),r.height=Math.floor(we*Be),this.setViewport(0,0,q,we)},this.getCurrentViewport=function(q){return q.copy(I)},this.getViewport=function(q){return q.copy(j)},this.setViewport=function(q,we,Be,Me){q.isVector4?j.set(q.x,q.y,q.z,q.w):j.set(q,we,Be,Me),Z.viewport(I.copy(j).multiplyScalar(k).round())},this.getScissor=function(q){return q.copy(T)},this.setScissor=function(q,we,Be,Me){q.isVector4?T.set(q.x,q.y,q.z,q.w):T.set(q,we,Be,Me),Z.scissor(L.copy(T).multiplyScalar(k).round())},this.getScissorTest=function(){return H},this.setScissorTest=function(q){Z.setScissorTest(H=q)},this.setOpaqueSort=function(q){Q=q},this.setTransparentSort=function(q){z=q},this.getClearColor=function(q){return q.copy(pe.getClearColor())},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(q=!0,we=!0,Be=!0){let Me=0;if(q){let ye=!1;if(B!==null){const Pe=B.texture.format;ye=Pe===SI||Pe===CI||Pe===c_}if(ye){const Pe=B.texture.type,Ze=Pe===tA||Pe===vc||Pe===Hg||Pe===Uf||Pe===BI||Pe===MI,qe=pe.getClearColor(),tt=pe.getClearAlpha(),pt=qe.r,ut=qe.g,ct=qe.b;Ze?(d[0]=pt,d[1]=ut,d[2]=ct,d[3]=tt,re.clearBufferuiv(re.COLOR,0,d)):(f[0]=pt,f[1]=ut,f[2]=ct,f[3]=tt,re.clearBufferiv(re.COLOR,0,f))}else Me|=re.COLOR_BUFFER_BIT}we&&(Me|=re.DEPTH_BUFFER_BIT,re.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),Be&&(Me|=re.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),re.clear(Me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Ce,!1),r.removeEventListener("webglcontextrestored",Fe,!1),r.removeEventListener("webglcontextcreationerror",Re,!1),P.dispose(),G.dispose(),ce.dispose(),V.dispose(),J.dispose(),ie.dispose(),Oe.dispose(),ue.dispose(),Ee.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",tr),xe.removeEventListener("sessionend",Vs),Nt.stop()};function Ce(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Fe(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const q=$.autoReset,we=ae.enabled,Be=ae.autoUpdate,Me=ae.needsUpdate,ye=ae.type;Qe(),$.autoReset=q,ae.enabled=we,ae.autoUpdate=Be,ae.needsUpdate=Me,ae.type=ye}function Re(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function ot(q){const we=q.target;we.removeEventListener("dispose",ot),Kt(we)}function Kt(q){bt(q),ce.remove(q)}function bt(q){const we=ce.get(q).programs;we!==void 0&&(we.forEach(function(Be){Ee.releaseProgram(Be)}),q.isShaderMaterial&&Ee.releaseShaderCache(q))}this.renderBufferDirect=function(q,we,Be,Me,ye,Pe){we===null&&(we=ne);const Ze=ye.isMesh&&ye.matrixWorld.determinant()<0,qe=ar(q,we,Be,Me,ye);Z.setMaterial(Me,Ze);let tt=Be.index,pt=1;if(Me.wireframe===!0){if(tt=fe.getWireframeAttribute(Be),tt===void 0)return;pt=2}const ut=Be.drawRange,ct=Be.attributes.position;let Zt=ut.start*pt,fr=(ut.start+ut.count)*pt;Pe!==null&&(Zt=Math.max(Zt,Pe.start*pt),fr=Math.min(fr,(Pe.start+Pe.count)*pt)),tt!==null?(Zt=Math.max(Zt,0),fr=Math.min(fr,tt.count)):ct!=null&&(Zt=Math.max(Zt,0),fr=Math.min(fr,ct.count));const _r=fr-Zt;if(_r<0||_r===1/0)return;Oe.setup(ye,Me,qe,Be,tt);let Nr,ur=Ie;if(tt!==null&&(Nr=K.get(tt),ur=ke,ur.setIndex(Nr)),ye.isMesh)Me.wireframe===!0?(Z.setLineWidth(Me.wireframeLinewidth*Te()),ur.setMode(re.LINES)):ur.setMode(re.TRIANGLES);else if(ye.isLine){let st=Me.linewidth;st===void 0&&(st=1),Z.setLineWidth(st*Te()),ye.isLineSegments?ur.setMode(re.LINES):ye.isLineLoop?ur.setMode(re.LINE_LOOP):ur.setMode(re.LINE_STRIP)}else ye.isPoints?ur.setMode(re.POINTS):ye.isSprite&&ur.setMode(re.TRIANGLES);if(ye.isBatchedMesh)if(ye._multiDrawInstances!==null)ur.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(he.get("WEBGL_multi_draw"))ur.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const st=ye._multiDrawStarts,Bi=ye._multiDrawCounts,kc=ye._multiDrawCount,Sa=tt?K.get(tt).bytesPerElement:1,rh=ce.get(Me).currentProgram.getUniforms();for(let hs=0;hs<kc;hs++)rh.setValue(re,"_gl_DrawID",hs),ur.render(st[hs]/Sa,Bi[hs])}else if(ye.isInstancedMesh)ur.renderInstances(Zt,_r,ye.count);else if(Be.isInstancedBufferGeometry){const st=Be._maxInstanceCount!==void 0?Be._maxInstanceCount:1/0,Bi=Math.min(Be.instanceCount,st);ur.renderInstances(Zt,_r,Bi)}else ur.render(Zt,_r)};function it(q,we,Be){q.transparent===!0&&q.side===pi&&q.forceSinglePass===!1?(q.side=ti,q.needsUpdate=!0,Xt(q,we,Be),q.side=Ns,q.needsUpdate=!0,Xt(q,we,Be),q.side=pi):Xt(q,we,Be)}this.compile=function(q,we,Be=null){Be===null&&(Be=q),g=G.get(Be),g.init(we),v.push(g),Be.traverseVisible(function(ye){ye.isLight&&ye.layers.test(we.layers)&&(g.pushLight(ye),ye.castShadow&&g.pushShadow(ye))}),q!==Be&&q.traverseVisible(function(ye){ye.isLight&&ye.layers.test(we.layers)&&(g.pushLight(ye),ye.castShadow&&g.pushShadow(ye))}),g.setupLights();const Me=new Set;return q.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const Pe=ye.material;if(Pe)if(Array.isArray(Pe))for(let Ze=0;Ze<Pe.length;Ze++){const qe=Pe[Ze];it(qe,Be,ye),Me.add(qe)}else it(Pe,Be,ye),Me.add(Pe)}),v.pop(),g=null,Me},this.compileAsync=function(q,we,Be=null){const Me=this.compile(q,we,Be);return new Promise(ye=>{function Pe(){if(Me.forEach(function(Ze){ce.get(Ze).currentProgram.isReady()&&Me.delete(Ze)}),Me.size===0){ye(q);return}setTimeout(Pe,10)}he.get("KHR_parallel_shader_compile")!==null?Pe():setTimeout(Pe,10)})};let Rr=null;function Ct(q){Rr&&Rr(q)}function tr(){Nt.stop()}function Vs(){Nt.start()}const Nt=new S8;Nt.setAnimationLoop(Ct),typeof self<"u"&&Nt.setContext(self),this.setAnimationLoop=function(q){Rr=q,xe.setAnimationLoop(q),q===null?Nt.stop():Nt.start()},xe.addEventListener("sessionstart",tr),xe.addEventListener("sessionend",Vs),this.render=function(q,we){if(we!==void 0&&we.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;if(q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),we.parent===null&&we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),xe.enabled===!0&&xe.isPresenting===!0&&(xe.cameraAutoUpdate===!0&&xe.updateCamera(we),we=xe.getCamera()),q.isScene===!0&&q.onBeforeRender(y,q,we,B),g=G.get(q,v.length),g.init(we),v.push(g),le.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),me.setFromProjectionMatrix(le),U=this.localClippingEnabled,ee=te.init(this.clippingPlanes,U),m=P.get(q,p.length),m.init(),p.push(m),xe.enabled===!0&&xe.isPresenting===!0){const Pe=y.xr.getDepthSensingMesh();Pe!==null&&er(Pe,we,-1/0,y.sortObjects)}er(q,we,0,y.sortObjects),m.finish(),y.sortObjects===!0&&m.sort(Q,z),de=xe.enabled===!1||xe.isPresenting===!1||xe.hasDepthSensing()===!1,de&&pe.addToRenderList(m,q),this.info.render.frame++,ee===!0&&te.beginShadows();const Be=g.state.shadowsArray;ae.render(Be,q,we),ee===!0&&te.endShadows(),this.info.autoReset===!0&&this.info.reset();const Me=m.opaque,ye=m.transmissive;if(g.setupLights(),we.isArrayCamera){const Pe=we.cameras;if(ye.length>0)for(let Ze=0,qe=Pe.length;Ze<qe;Ze++){const tt=Pe[Ze];Yt(Me,ye,q,tt)}de&&pe.render(q);for(let Ze=0,qe=Pe.length;Ze<qe;Ze++){const tt=Pe[Ze];Ws(m,q,tt,tt.viewport)}}else ye.length>0&&Yt(Me,ye,q,we),de&&pe.render(q),Ws(m,q,we);B!==null&&(W.updateMultisampleRenderTarget(B),W.updateRenderTargetMipmap(B)),q.isScene===!0&&q.onAfterRender(y,q,we),Oe.resetDefaultState(),M=-1,R=null,v.pop(),v.length>0?(g=v[v.length-1],ee===!0&&te.setGlobalState(y.clippingPlanes,g.state.camera)):g=null,p.pop(),p.length>0?m=p[p.length-1]:m=null};function er(q,we,Be,Me){if(q.visible===!1)return;if(q.layers.test(we.layers)){if(q.isGroup)Be=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(we);else if(q.isLight)g.pushLight(q),q.castShadow&&g.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||me.intersectsSprite(q)){Me&&ge.setFromMatrixPosition(q.matrixWorld).applyMatrix4(le);const Pe=ie.update(q),Ze=q.material;Ze.visible&&m.push(q,Pe,Ze,Be,ge.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||me.intersectsObject(q))){const Pe=ie.update(q),Ze=q.material;if(Me&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),ge.copy(q.boundingSphere.center)):(Pe.boundingSphere===null&&Pe.computeBoundingSphere(),ge.copy(Pe.boundingSphere.center)),ge.applyMatrix4(q.matrixWorld).applyMatrix4(le)),Array.isArray(Ze)){const qe=Pe.groups;for(let tt=0,pt=qe.length;tt<pt;tt++){const ut=qe[tt],ct=Ze[ut.materialIndex];ct&&ct.visible&&m.push(q,Pe,ct,Be,ge.z,ut)}}else Ze.visible&&m.push(q,Pe,Ze,Be,ge.z,null)}}const ye=q.children;for(let Pe=0,Ze=ye.length;Pe<Ze;Pe++)er(ye[Pe],we,Be,Me)}function Ws(q,we,Be,Me){const ye=q.opaque,Pe=q.transmissive,Ze=q.transparent;g.setupLightsView(Be),ee===!0&&te.setGlobalState(y.clippingPlanes,Be),Me&&Z.viewport(I.copy(Me)),ye.length>0&&Vt(ye,we,Be),Pe.length>0&&Vt(Pe,we,Be),Ze.length>0&&Vt(Ze,we,Be),Z.buffers.depth.setTest(!0),Z.buffers.depth.setMask(!0),Z.buffers.color.setMask(!0),Z.setPolygonOffset(!1)}function Yt(q,we,Be,Me){if((Be.isScene===!0?Be.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[Me.id]===void 0&&(g.state.transmissionRenderTarget[Me.id]=new $o(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")||he.has("EXT_color_buffer_float")?No:tA,minFilter:qa,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:xt.workingColorSpace}));const ye=g.state.transmissionRenderTarget[Me.id],Pe=Me.viewport||I;ye.setSize(Pe.z,Pe.w);const Ze=y.getRenderTarget();y.setRenderTarget(ye),y.getClearColor(w),b=y.getClearAlpha(),b<1&&y.setClearColor(16777215,.5),y.clear(),de&&pe.render(Be);const qe=y.toneMapping;y.toneMapping=cc;const tt=Me.viewport;if(Me.viewport!==void 0&&(Me.viewport=void 0),g.setupLightsView(Me),ee===!0&&te.setGlobalState(y.clippingPlanes,Me),Vt(q,Be,Me),W.updateMultisampleRenderTarget(ye),W.updateRenderTargetMipmap(ye),he.has("WEBGL_multisampled_render_to_texture")===!1){let pt=!1;for(let ut=0,ct=we.length;ut<ct;ut++){const Zt=we[ut],fr=Zt.object,_r=Zt.geometry,Nr=Zt.material,ur=Zt.group;if(Nr.side===pi&&fr.layers.test(Me.layers)){const st=Nr.side;Nr.side=ti,Nr.needsUpdate=!0,Ks(fr,Be,Me,_r,Nr,ur),Nr.side=st,Nr.needsUpdate=!0,pt=!0}}pt===!0&&(W.updateMultisampleRenderTarget(ye),W.updateRenderTargetMipmap(ye))}y.setRenderTarget(Ze),y.setClearColor(w,b),tt!==void 0&&(Me.viewport=tt),y.toneMapping=qe}function Vt(q,we,Be){const Me=we.isScene===!0?we.overrideMaterial:null;for(let ye=0,Pe=q.length;ye<Pe;ye++){const Ze=q[ye],qe=Ze.object,tt=Ze.geometry,pt=Me===null?Ze.material:Me,ut=Ze.group;qe.layers.test(Be.layers)&&Ks(qe,we,Be,tt,pt,ut)}}function Ks(q,we,Be,Me,ye,Pe){q.onBeforeRender(y,we,Be,Me,ye,Pe),q.modelViewMatrix.multiplyMatrices(Be.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),ye.onBeforeRender(y,we,Be,Me,q,Pe),ye.transparent===!0&&ye.side===pi&&ye.forceSinglePass===!1?(ye.side=ti,ye.needsUpdate=!0,y.renderBufferDirect(Be,we,Me,ye,q,Pe),ye.side=Ns,ye.needsUpdate=!0,y.renderBufferDirect(Be,we,Me,ye,q,Pe),ye.side=pi):y.renderBufferDirect(Be,we,Me,ye,q,Pe),q.onAfterRender(y,we,Be,Me,ye,Pe)}function Xt(q,we,Be){we.isScene!==!0&&(we=ne);const Me=ce.get(q),ye=g.state.lights,Pe=g.state.shadowsArray,Ze=ye.state.version,qe=Ee.getParameters(q,ye.state,Pe,we,Be),tt=Ee.getProgramCacheKey(qe);let pt=Me.programs;Me.environment=q.isMeshStandardMaterial?we.environment:null,Me.fog=we.fog,Me.envMap=(q.isMeshStandardMaterial?J:V).get(q.envMap||Me.environment),Me.envMapRotation=Me.environment!==null&&q.envMap===null?we.environmentRotation:q.envMapRotation,pt===void 0&&(q.addEventListener("dispose",ot),pt=new Map,Me.programs=pt);let ut=pt.get(tt);if(ut!==void 0){if(Me.currentProgram===ut&&Me.lightsStateVersion===Ze)return us(q,qe),ut}else qe.uniforms=Ee.getUniforms(q),q.onBeforeCompile(qe,y),ut=Ee.acquireProgram(qe,tt),pt.set(tt,ut),Me.uniforms=qe.uniforms;const ct=Me.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(ct.clippingPlanes=te.uniform),us(q,qe),Me.needsLights=Ei(q),Me.lightsStateVersion=Ze,Me.needsLights&&(ct.ambientLightColor.value=ye.state.ambient,ct.lightProbe.value=ye.state.probe,ct.directionalLights.value=ye.state.directional,ct.directionalLightShadows.value=ye.state.directionalShadow,ct.spotLights.value=ye.state.spot,ct.spotLightShadows.value=ye.state.spotShadow,ct.rectAreaLights.value=ye.state.rectArea,ct.ltc_1.value=ye.state.rectAreaLTC1,ct.ltc_2.value=ye.state.rectAreaLTC2,ct.pointLights.value=ye.state.point,ct.pointLightShadows.value=ye.state.pointShadow,ct.hemisphereLights.value=ye.state.hemi,ct.directionalShadowMap.value=ye.state.directionalShadowMap,ct.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,ct.spotShadowMap.value=ye.state.spotShadowMap,ct.spotLightMatrix.value=ye.state.spotLightMatrix,ct.spotLightMap.value=ye.state.spotLightMap,ct.pointShadowMap.value=ye.state.pointShadowMap,ct.pointShadowMatrix.value=ye.state.pointShadowMatrix),Me.currentProgram=ut,Me.uniformsList=null,ut}function rr(q){if(q.uniformsList===null){const we=q.currentProgram.getUniforms();q.uniformsList=Cw.seqWithValue(we.seq,q.uniforms)}return q.uniformsList}function us(q,we){const Be=ce.get(q);Be.outputColorSpace=we.outputColorSpace,Be.batching=we.batching,Be.batchingColor=we.batchingColor,Be.instancing=we.instancing,Be.instancingColor=we.instancingColor,Be.instancingMorph=we.instancingMorph,Be.skinning=we.skinning,Be.morphTargets=we.morphTargets,Be.morphNormals=we.morphNormals,Be.morphColors=we.morphColors,Be.morphTargetsCount=we.morphTargetsCount,Be.numClippingPlanes=we.numClippingPlanes,Be.numIntersection=we.numClipIntersection,Be.vertexAlphas=we.vertexAlphas,Be.vertexTangents=we.vertexTangents,Be.toneMapping=we.toneMapping}function ar(q,we,Be,Me,ye){we.isScene!==!0&&(we=ne),W.resetTextureUnits();const Pe=we.fog,Ze=Me.isMeshStandardMaterial?we.environment:null,qe=B===null?y.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:Bn,tt=(Me.isMeshStandardMaterial?J:V).get(Me.envMap||Ze),pt=Me.vertexColors===!0&&!!Be.attributes.color&&Be.attributes.color.itemSize===4,ut=!!Be.attributes.tangent&&(!!Me.normalMap||Me.anisotropy>0),ct=!!Be.morphAttributes.position,Zt=!!Be.morphAttributes.normal,fr=!!Be.morphAttributes.color;let _r=cc;Me.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(_r=y.toneMapping);const Nr=Be.morphAttributes.position||Be.morphAttributes.normal||Be.morphAttributes.color,ur=Nr!==void 0?Nr.length:0,st=ce.get(Me),Bi=g.state.lights;if(ee===!0&&(U===!0||q!==R)){const Ys=q===R&&Me.id===M;te.setState(Me,q,Ys)}let kc=!1;Me.version===st.__version?(st.needsLights&&st.lightsStateVersion!==Bi.state.version||st.outputColorSpace!==qe||ye.isBatchedMesh&&st.batching===!1||!ye.isBatchedMesh&&st.batching===!0||ye.isBatchedMesh&&st.batchingColor===!0&&ye.colorTexture===null||ye.isBatchedMesh&&st.batchingColor===!1&&ye.colorTexture!==null||ye.isInstancedMesh&&st.instancing===!1||!ye.isInstancedMesh&&st.instancing===!0||ye.isSkinnedMesh&&st.skinning===!1||!ye.isSkinnedMesh&&st.skinning===!0||ye.isInstancedMesh&&st.instancingColor===!0&&ye.instanceColor===null||ye.isInstancedMesh&&st.instancingColor===!1&&ye.instanceColor!==null||ye.isInstancedMesh&&st.instancingMorph===!0&&ye.morphTexture===null||ye.isInstancedMesh&&st.instancingMorph===!1&&ye.morphTexture!==null||st.envMap!==tt||Me.fog===!0&&st.fog!==Pe||st.numClippingPlanes!==void 0&&(st.numClippingPlanes!==te.numPlanes||st.numIntersection!==te.numIntersection)||st.vertexAlphas!==pt||st.vertexTangents!==ut||st.morphTargets!==ct||st.morphNormals!==Zt||st.morphColors!==fr||st.toneMapping!==_r||st.morphTargetsCount!==ur)&&(kc=!0):(kc=!0,st.__version=Me.version);let Sa=st.currentProgram;kc===!0&&(Sa=Xt(Me,we,ye));let rh=!1,hs=!1,hx=!1;const sn=Sa.getUniforms(),dA=st.uniforms;if(Z.useProgram(Sa.program)&&(rh=!0,hs=!0,hx=!0),Me.id!==M&&(M=Me.id,hs=!0),rh||R!==q){oe.reverseDepthBuffer?(se.copy(q.projectionMatrix),nee(se),iee(se),sn.setValue(re,"projectionMatrix",se)):sn.setValue(re,"projectionMatrix",q.projectionMatrix),sn.setValue(re,"viewMatrix",q.matrixWorldInverse);const Ys=sn.map.cameraPosition;Ys!==void 0&&Ys.setValue(re,Ae.setFromMatrixPosition(q.matrixWorld)),oe.logarithmicDepthBuffer&&sn.setValue(re,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshLambertMaterial||Me.isMeshBasicMaterial||Me.isMeshStandardMaterial||Me.isShaderMaterial)&&sn.setValue(re,"isOrthographic",q.isOrthographicCamera===!0),R!==q&&(R=q,hs=!0,hx=!0)}if(ye.isSkinnedMesh){sn.setOptional(re,ye,"bindMatrix"),sn.setOptional(re,ye,"bindMatrixInverse");const Ys=ye.skeleton;Ys&&(Ys.boneTexture===null&&Ys.computeBoneTexture(),sn.setValue(re,"boneTexture",Ys.boneTexture,W))}ye.isBatchedMesh&&(sn.setOptional(re,ye,"batchingTexture"),sn.setValue(re,"batchingTexture",ye._matricesTexture,W),sn.setOptional(re,ye,"batchingIdTexture"),sn.setValue(re,"batchingIdTexture",ye._indirectTexture,W),sn.setOptional(re,ye,"batchingColorTexture"),ye._colorsTexture!==null&&sn.setValue(re,"batchingColorTexture",ye._colorsTexture,W));const dx=Be.morphAttributes;if((dx.position!==void 0||dx.normal!==void 0||dx.color!==void 0)&&ve.update(ye,Be,Sa),(hs||st.receiveShadow!==ye.receiveShadow)&&(st.receiveShadow=ye.receiveShadow,sn.setValue(re,"receiveShadow",ye.receiveShadow)),Me.isMeshGouraudMaterial&&Me.envMap!==null&&(dA.envMap.value=tt,dA.flipEnvMap.value=tt.isCubeTexture&&tt.isRenderTargetTexture===!1?-1:1),Me.isMeshStandardMaterial&&Me.envMap===null&&we.environment!==null&&(dA.envMapIntensity.value=we.environmentIntensity),hs&&(sn.setValue(re,"toneMappingExposure",y.toneMappingExposure),st.needsLights&&or(dA,hx),Pe&&Me.fog===!0&&C.refreshFogUniforms(dA,Pe),C.refreshMaterialUniforms(dA,Me,k,F,g.state.transmissionRenderTarget[q.id]),Cw.upload(re,rr(st),dA,W)),Me.isShaderMaterial&&Me.uniformsNeedUpdate===!0&&(Cw.upload(re,rr(st),dA,W),Me.uniformsNeedUpdate=!1),Me.isSpriteMaterial&&sn.setValue(re,"center",ye.center),sn.setValue(re,"modelViewMatrix",ye.modelViewMatrix),sn.setValue(re,"normalMatrix",ye.normalMatrix),sn.setValue(re,"modelMatrix",ye.matrixWorld),Me.isShaderMaterial||Me.isRawShaderMaterial){const Ys=Me.uniformsGroups;for(let fx=0,CV=Ys.length;fx<CV;fx++){const wU=Ys[fx];ue.update(wU,Sa),ue.bind(wU,Sa)}}return Sa}function or(q,we){q.ambientLightColor.needsUpdate=we,q.lightProbe.needsUpdate=we,q.directionalLights.needsUpdate=we,q.directionalLightShadows.needsUpdate=we,q.pointLights.needsUpdate=we,q.pointLightShadows.needsUpdate=we,q.spotLights.needsUpdate=we,q.spotLightShadows.needsUpdate=we,q.rectAreaLights.needsUpdate=we,q.hemisphereLights.needsUpdate=we}function Ei(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(q,we,Be){ce.get(q.texture).__webglTexture=we,ce.get(q.depthTexture).__webglTexture=Be;const Me=ce.get(q);Me.__hasExternalTextures=!0,Me.__autoAllocateDepthBuffer=Be===void 0,Me.__autoAllocateDepthBuffer||he.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Me.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(q,we){const Be=ce.get(q);Be.__webglFramebuffer=we,Be.__useDefaultFramebuffer=we===void 0},this.setRenderTarget=function(q,we=0,Be=0){B=q,E=we,x=Be;let Me=!0,ye=null,Pe=!1,Ze=!1;if(q){const qe=ce.get(q);if(qe.__useDefaultFramebuffer!==void 0)Z.bindFramebuffer(re.FRAMEBUFFER,null),Me=!1;else if(qe.__webglFramebuffer===void 0)W.setupRenderTarget(q);else if(qe.__hasExternalTextures)W.rebindTextures(q,ce.get(q.texture).__webglTexture,ce.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const ut=q.depthTexture;if(qe.__boundDepthTexture!==ut){if(ut!==null&&ce.has(ut)&&(q.width!==ut.image.width||q.height!==ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");W.setupDepthRenderbuffer(q)}}const tt=q.texture;(tt.isData3DTexture||tt.isDataArrayTexture||tt.isCompressedArrayTexture)&&(Ze=!0);const pt=ce.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(pt[we])?ye=pt[we][Be]:ye=pt[we],Pe=!0):q.samples>0&&W.useMultisampledRTT(q)===!1?ye=ce.get(q).__webglMultisampledFramebuffer:Array.isArray(pt)?ye=pt[Be]:ye=pt,I.copy(q.viewport),L.copy(q.scissor),D=q.scissorTest}else I.copy(j).multiplyScalar(k).floor(),L.copy(T).multiplyScalar(k).floor(),D=H;if(Z.bindFramebuffer(re.FRAMEBUFFER,ye)&&Me&&Z.drawBuffers(q,ye),Z.viewport(I),Z.scissor(L),Z.setScissorTest(D),Pe){const qe=ce.get(q.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+we,qe.__webglTexture,Be)}else if(Ze){const qe=ce.get(q.texture),tt=we||0;re.framebufferTextureLayer(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,qe.__webglTexture,Be||0,tt)}M=-1},this.readRenderTargetPixels=function(q,we,Be,Me,ye,Pe,Ze){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let qe=ce.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&Ze!==void 0&&(qe=qe[Ze]),qe){Z.bindFramebuffer(re.FRAMEBUFFER,qe);try{const tt=q.texture,pt=tt.format,ut=tt.type;if(!oe.textureFormatReadable(pt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!oe.textureTypeReadable(ut)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}we>=0&&we<=q.width-Me&&Be>=0&&Be<=q.height-ye&&re.readPixels(we,Be,Me,ye,Le.convert(pt),Le.convert(ut),Pe)}finally{const tt=B!==null?ce.get(B).__webglFramebuffer:null;Z.bindFramebuffer(re.FRAMEBUFFER,tt)}}},this.readRenderTargetPixelsAsync=async function(q,we,Be,Me,ye,Pe,Ze){if(!(q&&q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qe=ce.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&Ze!==void 0&&(qe=qe[Ze]),qe){const tt=q.texture,pt=tt.format,ut=tt.type;if(!oe.textureFormatReadable(pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!oe.textureTypeReadable(ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(we>=0&&we<=q.width-Me&&Be>=0&&Be<=q.height-ye){Z.bindFramebuffer(re.FRAMEBUFFER,qe);const ct=re.createBuffer();re.bindBuffer(re.PIXEL_PACK_BUFFER,ct),re.bufferData(re.PIXEL_PACK_BUFFER,Pe.byteLength,re.STREAM_READ),re.readPixels(we,Be,Me,ye,Le.convert(pt),Le.convert(ut),0);const Zt=B!==null?ce.get(B).__webglFramebuffer:null;Z.bindFramebuffer(re.FRAMEBUFFER,Zt);const fr=re.fenceSync(re.SYNC_GPU_COMMANDS_COMPLETE,0);return re.flush(),await ree(re,fr,4),re.bindBuffer(re.PIXEL_PACK_BUFFER,ct),re.getBufferSubData(re.PIXEL_PACK_BUFFER,0,Pe),re.deleteBuffer(ct),re.deleteSync(fr),Pe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(q,we=null,Be=0){q.isTexture!==!0&&(Tw("WebGLRenderer: copyFramebufferToTexture function signature has changed."),we=arguments[0]||null,q=arguments[1]);const Me=Math.pow(2,-Be),ye=Math.floor(q.image.width*Me),Pe=Math.floor(q.image.height*Me),Ze=we!==null?we.x:0,qe=we!==null?we.y:0;W.setTexture2D(q,0),re.copyTexSubImage2D(re.TEXTURE_2D,Be,0,0,Ze,qe,ye,Pe),Z.unbindTexture()},this.copyTextureToTexture=function(q,we,Be=null,Me=null,ye=0){q.isTexture!==!0&&(Tw("WebGLRenderer: copyTextureToTexture function signature has changed."),Me=arguments[0]||null,q=arguments[1],we=arguments[2],ye=arguments[3]||0,Be=null);let Pe,Ze,qe,tt,pt,ut;Be!==null?(Pe=Be.max.x-Be.min.x,Ze=Be.max.y-Be.min.y,qe=Be.min.x,tt=Be.min.y):(Pe=q.image.width,Ze=q.image.height,qe=0,tt=0),Me!==null?(pt=Me.x,ut=Me.y):(pt=0,ut=0);const ct=Le.convert(we.format),Zt=Le.convert(we.type);W.setTexture2D(we,0),re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,we.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,we.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,we.unpackAlignment);const fr=re.getParameter(re.UNPACK_ROW_LENGTH),_r=re.getParameter(re.UNPACK_IMAGE_HEIGHT),Nr=re.getParameter(re.UNPACK_SKIP_PIXELS),ur=re.getParameter(re.UNPACK_SKIP_ROWS),st=re.getParameter(re.UNPACK_SKIP_IMAGES),Bi=q.isCompressedTexture?q.mipmaps[ye]:q.image;re.pixelStorei(re.UNPACK_ROW_LENGTH,Bi.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,Bi.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,qe),re.pixelStorei(re.UNPACK_SKIP_ROWS,tt),q.isDataTexture?re.texSubImage2D(re.TEXTURE_2D,ye,pt,ut,Pe,Ze,ct,Zt,Bi.data):q.isCompressedTexture?re.compressedTexSubImage2D(re.TEXTURE_2D,ye,pt,ut,Bi.width,Bi.height,ct,Bi.data):re.texSubImage2D(re.TEXTURE_2D,ye,pt,ut,Pe,Ze,ct,Zt,Bi),re.pixelStorei(re.UNPACK_ROW_LENGTH,fr),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,_r),re.pixelStorei(re.UNPACK_SKIP_PIXELS,Nr),re.pixelStorei(re.UNPACK_SKIP_ROWS,ur),re.pixelStorei(re.UNPACK_SKIP_IMAGES,st),ye===0&&we.generateMipmaps&&re.generateMipmap(re.TEXTURE_2D),Z.unbindTexture()},this.copyTextureToTexture3D=function(q,we,Be=null,Me=null,ye=0){q.isTexture!==!0&&(Tw("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Be=arguments[0]||null,Me=arguments[1]||null,q=arguments[2],we=arguments[3],ye=arguments[4]||0);let Pe,Ze,qe,tt,pt,ut,ct,Zt,fr;const _r=q.isCompressedTexture?q.mipmaps[ye]:q.image;Be!==null?(Pe=Be.max.x-Be.min.x,Ze=Be.max.y-Be.min.y,qe=Be.max.z-Be.min.z,tt=Be.min.x,pt=Be.min.y,ut=Be.min.z):(Pe=_r.width,Ze=_r.height,qe=_r.depth,tt=0,pt=0,ut=0),Me!==null?(ct=Me.x,Zt=Me.y,fr=Me.z):(ct=0,Zt=0,fr=0);const Nr=Le.convert(we.format),ur=Le.convert(we.type);let st;if(we.isData3DTexture)W.setTexture3D(we,0),st=re.TEXTURE_3D;else if(we.isDataArrayTexture||we.isCompressedArrayTexture)W.setTexture2DArray(we,0),st=re.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}re.pixelStorei(re.UNPACK_FLIP_Y_WEBGL,we.flipY),re.pixelStorei(re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,we.premultiplyAlpha),re.pixelStorei(re.UNPACK_ALIGNMENT,we.unpackAlignment);const Bi=re.getParameter(re.UNPACK_ROW_LENGTH),kc=re.getParameter(re.UNPACK_IMAGE_HEIGHT),Sa=re.getParameter(re.UNPACK_SKIP_PIXELS),rh=re.getParameter(re.UNPACK_SKIP_ROWS),hs=re.getParameter(re.UNPACK_SKIP_IMAGES);re.pixelStorei(re.UNPACK_ROW_LENGTH,_r.width),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,_r.height),re.pixelStorei(re.UNPACK_SKIP_PIXELS,tt),re.pixelStorei(re.UNPACK_SKIP_ROWS,pt),re.pixelStorei(re.UNPACK_SKIP_IMAGES,ut),q.isDataTexture||q.isData3DTexture?re.texSubImage3D(st,ye,ct,Zt,fr,Pe,Ze,qe,Nr,ur,_r.data):we.isCompressedArrayTexture?re.compressedTexSubImage3D(st,ye,ct,Zt,fr,Pe,Ze,qe,Nr,_r.data):re.texSubImage3D(st,ye,ct,Zt,fr,Pe,Ze,qe,Nr,ur,_r),re.pixelStorei(re.UNPACK_ROW_LENGTH,Bi),re.pixelStorei(re.UNPACK_IMAGE_HEIGHT,kc),re.pixelStorei(re.UNPACK_SKIP_PIXELS,Sa),re.pixelStorei(re.UNPACK_SKIP_ROWS,rh),re.pixelStorei(re.UNPACK_SKIP_IMAGES,hs),ye===0&&we.generateMipmaps&&re.generateMipmap(st),Z.unbindTexture()},this.initRenderTarget=function(q){ce.get(q).__webglFramebuffer===void 0&&W.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?W.setTextureCube(q,0):q.isData3DTexture?W.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?W.setTexture2DArray(q,0):W.setTexture2D(q,0),Z.unbindTexture()},this.resetState=function(){E=0,x=0,B=null,Z.reset(),Oe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ql}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const r=this.getContext();r.drawingBufferColorSpace=e===RI?"display-p3":"srgb",r.unpackColorSpace=xt.workingColorSpace===u_?"display-p3":"srgb"}}class zg extends Lt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new en,this.environmentIntensity=1,this.environmentRotation=new en,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class mse{constructor(e,r){this.isInterleavedBuffer=!0,this.array=e,this.stride=r,this.count=e!==void 0?e.length/r:0,this.usage=SC,this.updateRanges=[],this.version=0,this.uuid=ro()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,n){e*=this.stride,n*=r.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=r.array[n+i];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ro()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(r,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ro()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Mi=new Y;class DI{constructor(e,r,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=r,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,n=this.data.count;r<n;r++)Mi.fromBufferAttribute(this,r),Mi.applyMatrix4(e),this.setXYZ(r,Mi.x,Mi.y,Mi.z);return this}applyNormalMatrix(e){for(let r=0,n=this.count;r<n;r++)Mi.fromBufferAttribute(this,r),Mi.applyNormalMatrix(e),this.setXYZ(r,Mi.x,Mi.y,Mi.z);return this}transformDirection(e){for(let r=0,n=this.count;r<n;r++)Mi.fromBufferAttribute(this,r),Mi.transformDirection(e),this.setXYZ(r,Mi.x,Mi.y,Mi.z);return this}getComponent(e,r){let n=this.array[e*this.data.stride+this.offset+r];return this.normalized&&(n=Xa(n,this.array)),n}setComponent(e,r,n){return this.normalized&&(n=lr(n,this.array)),this.data.array[e*this.data.stride+this.offset+r]=n,this}setX(e,r){return this.normalized&&(r=lr(r,this.array)),this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.normalized&&(r=lr(r,this.array)),this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.normalized&&(r=lr(r,this.array)),this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.normalized&&(r=lr(r,this.array)),this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){let r=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(r=Xa(r,this.array)),r}getY(e){let r=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(r=Xa(r,this.array)),r}getZ(e){let r=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(r=Xa(r,this.array)),r}getW(e){let r=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(r=Xa(r,this.array)),r}setXY(e,r,n){return e=e*this.data.stride+this.offset,this.normalized&&(r=lr(r,this.array),n=lr(n,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this}setXYZ(e,r,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(r=lr(r,this.array),n=lr(n,this.array),i=lr(i,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,r,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(r=lr(r,this.array),n=lr(n,this.array),i=lr(i,this.array),s=lr(s,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)r.push(this.data.array[i+s])}return new lt(new this.array.constructor(r),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new DI(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)r.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Wk=new Y,Kk=new kt,Yk=new kt,gse=new Y,Xk=new je,Fv=new Y,GE=new wi,Zk=new je,VE=new Yu;class no extends Ar{constructor(e,r){super(e,r),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=tk,this.bindMatrix=new je,this.bindMatrixInverse=new je,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Dr),this.boundingBox.makeEmpty();const r=e.getAttribute("position");for(let n=0;n<r.count;n++)this.getVertexPosition(n,Fv),this.boundingBox.expandByPoint(Fv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new wi),this.boundingSphere.makeEmpty();const r=e.getAttribute("position");for(let n=0;n<r.count;n++)this.getVertexPosition(n,Fv),this.boundingSphere.expandByPoint(Fv)}copy(e,r){return super.copy(e,r),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,r){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),GE.copy(this.boundingSphere),GE.applyMatrix4(i),e.ray.intersectsSphere(GE)!==!1&&(Zk.copy(i).invert(),VE.copy(e.ray).applyMatrix4(Zk),!(this.boundingBox!==null&&VE.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,r,VE)))}getVertexPosition(e,r){return super.getVertexPosition(e,r),this.applyBoneTransform(e,r),r}bind(e,r){this.skeleton=e,r===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),r=this.matrixWorld),this.bindMatrix.copy(r),this.bindMatrixInverse.copy(r).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new kt,r=this.geometry.attributes.skinWeight;for(let n=0,i=r.count;n<i;n++){e.fromBufferAttribute(r,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),r.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===tk?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===_$?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,r){const n=this.skeleton,i=this.geometry;Kk.fromBufferAttribute(i.attributes.skinIndex,e),Yk.fromBufferAttribute(i.attributes.skinWeight,e),Wk.copy(r).applyMatrix4(this.bindMatrix),r.set(0,0,0);for(let s=0;s<4;s++){const a=Yk.getComponent(s);if(a!==0){const o=Kk.getComponent(s);Xk.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),r.addScaledVector(gse.copy(Wk).applyMatrix4(Xk),a)}}return r.applyMatrix4(this.bindMatrixInverse)}}class N1 extends Lt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class _u extends Sr{constructor(e=null,r=1,n=1,i,s,a,o,l,A=Vn,c=Vn,u,h){super(null,a,o,l,A,c,i,s,u,h),this.isDataTexture=!0,this.image={data:e,width:r,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Jk=new je,vse=new je;class Rc{constructor(e=[],r=[]){this.uuid=ro(),this.bones=e.slice(0),this.boneInverses=r,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,r=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),r.length===0)this.calculateInverses();else if(e.length!==r.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new je)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,r=this.bones.length;e<r;e++){const n=new je;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,r=this.bones.length;e<r;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,r=this.bones.length;e<r;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,r=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:vse;Jk.multiplyMatrices(o,r[s]),Jk.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Rc(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const r=new Float32Array(e*e*4);r.set(this.boneMatrices);const n=new _u(r,e,e,kn,mi);return n.needsUpdate=!0,this.boneMatrices=r,this.boneTexture=n,this}getBoneByName(e){for(let r=0,n=this.bones.length;r<n;r++){const i=this.bones[r];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,r){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let a=r[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new N1),this.bones.push(a),this.boneInverses.push(new je().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const r=this.bones,n=this.boneInverses;for(let i=0,s=r.length;i<s;i++){const a=r[i];e.bones.push(a.uuid);const o=n[i];e.boneInverses.push(o.toArray())}return e}}class Gg extends lt{constructor(e,r,n,i=1){super(e,r,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const wh=new je,qk=new je,kv=[],$k=new Dr,yse=new je,kp=new Ar,Lp=new wi;class p_ extends Ar{constructor(e,r,n){super(e,r),this.isInstancedMesh=!0,this.instanceMatrix=new Gg(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,yse)}computeBoundingBox(){const e=this.geometry,r=this.count;this.boundingBox===null&&(this.boundingBox=new Dr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<r;n++)this.getMatrixAt(n,wh),$k.copy(e.boundingBox).applyMatrix4(wh),this.boundingBox.union($k)}computeBoundingSphere(){const e=this.geometry,r=this.count;this.boundingSphere===null&&(this.boundingSphere=new wi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<r;n++)this.getMatrixAt(n,wh),Lp.copy(e.boundingSphere).applyMatrix4(wh),this.boundingSphere.union(Lp)}copy(e,r){return super.copy(e,r),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,r){r.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,r){r.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,r){const n=r.morphTargetInfluences,i=this.morphTexture.source.data.data,s=n.length+1,a=e*s+1;for(let o=0;o<n.length;o++)n[o]=i[a+o]}raycast(e,r){const n=this.matrixWorld,i=this.count;if(kp.geometry=this.geometry,kp.material=this.material,kp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Lp.copy(this.boundingSphere),Lp.applyMatrix4(n),e.ray.intersectsSphere(Lp)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,wh),qk.multiplyMatrices(n,wh),kp.matrixWorld=qk,kp.raycast(e,kv);for(let a=0,o=kv.length;a<o;a++){const l=kv[a];l.instanceId=s,l.object=this,r.push(l)}kv.length=0}}setColorAt(e,r){this.instanceColor===null&&(this.instanceColor=new Gg(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),r.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,r){r.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,r){const n=r.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new _u(new Float32Array(i*this.count),i,this.count,TI,mi));const s=this.morphTexture.source.data.data;let a=0;for(let A=0;A<n.length;A++)a+=n[A];const o=this.geometry.morphTargetsRelative?1:1-a,l=i*e;s[l]=o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function wse(t,e){return t.z-e.z}function bse(t,e){return e.z-t.z}class _se{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,r,n){const i=this.pool,s=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const a=i[this.index];s.push(a),this.index++,a.start=e.start,a.count=e.count,a.z=r,a.index=n}reset(){this.list.length=0,this.index=0}}const xA=new je,WE=new je,xse=new je,Ese=new He(1,1,1),eL=new je,KE=new d_,Lv=new Dr,zc=new wi,Pp=new Y,tL=new Y,Bse=new Y,YE=new _se,Ai=new Ar,Pv=[];function Mse(t,e,r=0){const n=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const i=t.count;for(let s=0;s<i;s++)for(let a=0;a<n;a++)e.setComponent(s+r,a,t.getComponent(s,a))}else e.array.set(t.array,r*n);e.needsUpdate=!0}class Tse extends Ar{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,r,n=r*2,i){super(new $t,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._availableInstanceIds=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=r,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const r=new Float32Array(e*e*4),n=new _u(r,e,e,kn,mi);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const r=new Uint32Array(e*e),n=new _u(r,e,e,c_,vc);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const r=new Float32Array(e*e*4).fill(1),n=new _u(r,e,e,kn,mi);n.colorSpace=xt.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const r=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:l,normalized:A}=a,c=new o.constructor(n*l),u=new lt(c,l,A);r.setAttribute(s,u)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(i):new Uint16Array(i);r.setIndex(new lt(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const r=this.geometry;if(!!e.getIndex()!=!!r.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in r.attributes){if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=r.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Dr);const e=this.boundingBox,r=this._drawInfo;e.makeEmpty();for(let n=0,i=r.length;n<i;n++){if(r[n].active===!1)continue;const s=r[n].geometryIndex;this.getMatrixAt(n,xA),this.getBoundingBoxAt(s,Lv).applyMatrix4(xA),e.union(Lv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wi);const e=this.boundingSphere,r=this._drawInfo;e.makeEmpty();for(let n=0,i=r.length;n<i;n++){if(r[n].active===!1)continue;const s=r[n].geometryIndex;this.getMatrixAt(n,xA),this.getBoundingSphereAt(s,zc).applyMatrix4(xA),e.union(zc)}}addInstance(e){if(this._drawInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const r={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(n=this._availableInstanceIds.pop(),this._drawInfo[n]=r):(n=this._drawInfo.length,this._drawInfo.push(r));const i=this._matricesTexture,s=i.image.data;xse.toArray(s,n*16),i.needsUpdate=!0;const a=this._colorsTexture;return a&&(Ese.toArray(a.image.data,n*4),a.needsUpdate=!0),n}addGeometry(e,r=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const a=this._reservedRanges,o=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=a[a.length-1]),r===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=r,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const A=e.getIndex(),c=A!==null;if(c&&(n===-1?i.indexCount=A.count:i.indexCount=n,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const u=this._geometryCount;return this._geometryCount++,a.push(i),o.push({start:c?i.indexStart:i.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Dr,sphereInitialized:!1,sphere:new wi}),this.setGeometryAt(u,e),u}setGeometryAt(e,r){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(r);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),a=r.getIndex(),o=this._reservedRanges[e];if(i&&a.count>o.indexCount||r.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,A=o.vertexCount;for(const d in n.attributes){const f=r.getAttribute(d),m=n.getAttribute(d);Mse(f,m,l);const g=f.itemSize;for(let p=f.count,v=A;p<v;p++){const y=l+p;for(let _=0;_<g;_++)m.setComponent(y,_,0)}m.needsUpdate=!0,m.addUpdateRange(l*g,A*g)}if(i){const d=o.indexStart;for(let f=0;f<a.count;f++)s.setX(d+f,l+a.getX(f));for(let f=a.count,m=o.indexCount;f<m;f++)s.setX(d+f,l);s.needsUpdate=!0,s.addUpdateRange(d,o.indexCount)}const c=this._bounds[e];r.boundingBox!==null?(c.box.copy(r.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,r.boundingSphere!==null?(c.sphere.copy(r.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const u=this._drawRanges[e],h=r.getAttribute("position");return u.count=i?a.count:h.count,this._visibilityChanged=!0,e}deleteInstance(e){const r=this._drawInfo;return e>=r.length||r[e].active===!1?this:(r[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}getBoundingBoxAt(e,r){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.box,s=this.geometry;if(n.boxInitialized===!1){i.makeEmpty();const a=s.index,o=s.attributes.position,l=this._drawRanges[e];for(let A=l.start,c=l.start+l.count;A<c;A++){let u=A;a&&(u=a.getX(u)),i.expandByPoint(Pp.fromBufferAttribute(o,u))}n.boxInitialized=!0}return r.copy(i),r}getBoundingSphereAt(e,r){if(e>=this._geometryCount)return null;const n=this._bounds[e],i=n.sphere,s=this.geometry;if(n.sphereInitialized===!1){i.makeEmpty(),this.getBoundingBoxAt(e,Lv),Lv.getCenter(i.center);const a=s.index,o=s.attributes.position,l=this._drawRanges[e];let A=0;for(let c=l.start,u=l.start+l.count;c<u;c++){let h=c;a&&(h=a.getX(h)),Pp.fromBufferAttribute(o,h),A=Math.max(A,i.center.distanceToSquared(Pp))}i.radius=Math.sqrt(A),n.sphereInitialized=!0}return r.copy(i),r}setMatrixAt(e,r){const n=this._drawInfo,i=this._matricesTexture,s=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?this:(r.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,r){const n=this._drawInfo,i=this._matricesTexture.image.data;return e>=n.length||n[e].active===!1?null:r.fromArray(i,e*16)}setColorAt(e,r){this._colorsTexture===null&&this._initColorsTexture();const n=this._colorsTexture,i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(r.toArray(i,e*4),n.needsUpdate=!0,this)}getColorAt(e,r){const n=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||i[e].active===!1?null:r.fromArray(n,e*4)}setVisibleAt(e,r){const n=this._drawInfo;return e>=n.length||n[e].active===!1||n[e].visible===r?this:(n[e].visible=r,this._visibilityChanged=!0,this)}getVisibleAt(e){const r=this._drawInfo;return e>=r.length||r[e].active===!1?!1:r[e].visible}setGeometryIdAt(e,r){const n=this._drawInfo;return e>=n.length||n[e].active===!1||r<0||r>=this._geometryCount?null:(n[e].geometryIndex=r,this)}getGeometryIdAt(e){const r=this._drawInfo;return e>=r.length||r[e].active===!1?-1:r[e].geometryIndex}getGeometryRangeAt(e,r={}){if(e<0||e>=this._geometryCount)return null;const n=this._drawRanges[e];return r.start=n.start,r.count=n.count,r}raycast(e,r){const n=this._drawInfo,i=this._drawRanges,s=this.matrixWorld,a=this.geometry;Ai.material=this.material,Ai.geometry.index=a.index,Ai.geometry.attributes=a.attributes,Ai.geometry.boundingBox===null&&(Ai.geometry.boundingBox=new Dr),Ai.geometry.boundingSphere===null&&(Ai.geometry.boundingSphere=new wi);for(let o=0,l=n.length;o<l;o++){if(!n[o].visible||!n[o].active)continue;const A=n[o].geometryIndex,c=i[A];Ai.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(o,Ai.matrixWorld).premultiply(s),this.getBoundingBoxAt(A,Ai.geometry.boundingBox),this.getBoundingSphereAt(A,Ai.geometry.boundingSphere),Ai.raycast(e,Pv);for(let u=0,h=Pv.length;u<h;u++){const d=Pv[u];d.object=this,d.batchId=o,r.push(d)}Pv.length=0}Ai.material=null,Ai.geometry.index=null,Ai.geometry.attributes={},Ai.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(r=>({...r})),this._reservedRanges=e._reservedRanges.map(r=>({...r})),this._drawInfo=e._drawInfo.map(r=>({...r})),this._bounds=e._bounds.map(r=>({boxInitialized:r.boxInitialized,box:r.box.clone(),sphereInitialized:r.sphereInitialized,sphere:r.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,r,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=i.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._drawInfo,A=this._multiDrawStarts,c=this._multiDrawCounts,u=this._drawRanges,h=this.perObjectFrustumCulled,d=this._indirectTexture,f=d.image.data;h&&(eL.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),KE.setFromProjectionMatrix(eL,e.coordinateSystem));let m=0;if(this.sortObjects){WE.copy(this.matrixWorld).invert(),Pp.setFromMatrixPosition(n.matrixWorld).applyMatrix4(WE),tL.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(WE);for(let v=0,y=l.length;v<y;v++)if(l[v].visible&&l[v].active){const _=l[v].geometryIndex;this.getMatrixAt(v,xA),this.getBoundingSphereAt(_,zc).applyMatrix4(xA);let E=!1;if(h&&(E=!KE.intersectsSphere(zc)),!E){const x=Bse.subVectors(zc.center,Pp).dot(tL);YE.push(u[_],x,v)}}const g=YE.list,p=this.customSort;p===null?g.sort(s.transparent?bse:wse):p.call(this,g,n);for(let v=0,y=g.length;v<y;v++){const _=g[v];A[m]=_.start*o,c[m]=_.count,f[m]=_.index,m++}YE.reset()}else for(let g=0,p=l.length;g<p;g++)if(l[g].visible&&l[g].active){const v=l[g].geometryIndex;let y=!1;if(h&&(this.getMatrixAt(g,xA),this.getBoundingSphereAt(v,zc).applyMatrix4(xA),y=!KE.intersectsSphere(zc)),!y){const _=u[v];A[m]=_.start*o,c[m]=_.count,f[m]=g,m++}}d.needsUpdate=!0,this._multiDrawCount=m,this._visibilityChanged=!1}onBeforeShadow(e,r,n,i,s,a){this.onBeforeRender(e,null,i,s,a)}}class lA extends is{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new He(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Q1=new Y,H1=new Y,rL=new je,Op=new Yu,Ov=new wi,XE=new Y,nL=new Y;class Xf extends Lt{constructor(e=new $t,r=new lA){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,n=[0];for(let i=1,s=r.count;i<s;i++)Q1.fromBufferAttribute(r,i-1),H1.fromBufferAttribute(r,i),n[i]=n[i-1],n[i]+=Q1.distanceTo(H1);e.setAttribute("lineDistance",new vr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ov.copy(n.boundingSphere),Ov.applyMatrix4(i),Ov.radius+=s,e.ray.intersectsSphere(Ov)===!1)return;rL.copy(i).invert(),Op.copy(e.ray).applyMatrix4(rL);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,A=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(c!==null){const h=Math.max(0,a.start),d=Math.min(c.count,a.start+a.count);for(let f=h,m=d-1;f<m;f+=A){const g=c.getX(f),p=c.getX(f+1),v=Dv(this,e,Op,l,g,p);v&&r.push(v)}if(this.isLineLoop){const f=c.getX(d-1),m=c.getX(h),g=Dv(this,e,Op,l,f,m);g&&r.push(g)}}else{const h=Math.max(0,a.start),d=Math.min(u.count,a.start+a.count);for(let f=h,m=d-1;f<m;f+=A){const g=Dv(this,e,Op,l,f,f+1);g&&r.push(g)}if(this.isLineLoop){const f=Dv(this,e,Op,l,d-1,h);f&&r.push(f)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,r=Object.keys(e);if(r.length>0){const n=e[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=n.length;i<s;i++){const a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}function Dv(t,e,r,n,i,s){const a=t.geometry.attributes.position;if(Q1.fromBufferAttribute(a,i),H1.fromBufferAttribute(a,s),r.distanceSqToSegment(Q1,H1,XE,nL)>n)return;XE.applyMatrix4(t.matrixWorld);const o=e.ray.origin.distanceTo(XE);if(!(o<e.near||o>e.far))return{distance:o,point:nL.clone().applyMatrix4(t.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:t}}const iL=new Y,sL=new Y;class w0 extends Xf{constructor(e,r){super(e,r),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,n=[];for(let i=0,s=r.count;i<s;i+=2)iL.fromBufferAttribute(r,i),sL.fromBufferAttribute(r,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+iL.distanceTo(sL);e.setAttribute("lineDistance",new vr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Cse extends Xf{constructor(e,r){super(e,r),this.isLineLoop=!0,this.type="LineLoop"}}class k8 extends is{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new He(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const aL=new je,RC=new Yu,Nv=new wi,Qv=new Y;class Sse extends Lt{constructor(e=new $t,r=new k8){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,r){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Nv.copy(n.boundingSphere),Nv.applyMatrix4(i),Nv.radius+=s,e.ray.intersectsSphere(Nv)===!1)return;aL.copy(i).invert(),RC.copy(e.ray).applyMatrix4(aL);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,A=n.index,c=n.attributes.position;if(A!==null){const u=Math.max(0,a.start),h=Math.min(A.count,a.start+a.count);for(let d=u,f=h;d<f;d++){const m=A.getX(d);Qv.fromBufferAttribute(c,m),oL(Qv,m,l,i,e,r,this)}}else{const u=Math.max(0,a.start),h=Math.min(c.count,a.start+a.count);for(let d=u,f=h;d<f;d++)Qv.fromBufferAttribute(c,d),oL(Qv,d,l,i,e,r,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,r=Object.keys(e);if(r.length>0){const n=e[r[0]];if(n!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,s=n.length;i<s;i++){const a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}function oL(t,e,r,n,i,s,a){const o=RC.distanceSqToPoint(t);if(o<r){const l=new Y;RC.closestPointToPoint(t,l),l.applyMatrix4(n);const A=i.ray.origin.distanceTo(l);if(A<i.near||A>i.far)return;s.push({distance:A,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class ZE extends Sr{constructor(e,r,n,i,s,a,o,l,A,c,u,h){super(null,a,o,l,A,c,i,s,u,h),this.isCompressedTexture=!0,this.image={width:r,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Ise extends Sr{constructor(e,r,n,i,s,a,o,l,A){super(e,r,n,i,s,a,o,l,A),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Rse{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){const n=this.getUtoTmapping(e);return this.getPoint(n,r)}getPoints(e=5){const r=[];for(let n=0;n<=e;n++)r.push(this.getPoint(n/e));return r}getSpacedPoints(e=5){const r=[];for(let n=0;n<=e;n++)r.push(this.getPointAt(n/e));return r}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let n,i=this.getPoint(0),s=0;r.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(i),r.push(s),i=n;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){const n=this.getLengths();let i=0;const s=n.length;let a;r?a=r:a=e*n[s-1];let o=0,l=s-1,A;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),A=n[i]-a,A<0)o=i+1;else if(A>0)l=i-1;else{l=i;break}if(i=l,n[i]===a)return i/(s-1);const c=n[i],u=n[i+1]-c,h=(a-c)/u;return(i+h)/(s-1)}getTangent(e,r){let n=e-1e-4,i=e+1e-4;n<0&&(n=0),i>1&&(i=1);const s=this.getPoint(n),a=this.getPoint(i),o=r||(s.isVector2?new Ke:new Y);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,r){const n=this.getUtoTmapping(e);return this.getTangent(n,r)}computeFrenetFrames(e,r){const n=new Y,i=[],s=[],a=[],o=new Y,l=new je;for(let d=0;d<=e;d++){const f=d/e;i[d]=this.getTangentAt(f,new Y)}s[0]=new Y,a[0]=new Y;let A=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=A&&(A=c,n.set(1,0,0)),u<=A&&(A=u,n.set(0,1,0)),h<=A&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],o),a[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(i[d-1],i[d]),o.length()>Number.EPSILON){o.normalize();const f=Math.acos(dn(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(o,f))}a[d].crossVectors(i[d],s[d])}if(r===!0){let d=Math.acos(dn(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(o.crossVectors(s[0],s[e]))>0&&(d=-d);for(let f=1;f<=e;f++)s[f].applyMatrix4(l.makeRotationAxis(i[f],d*f)),a[f].crossVectors(i[f],s[f])}return{tangents:i,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class m_ extends $t{constructor(e=1,r=1,n=1,i=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:n,radialSegments:i,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const A=this;i=Math.floor(i),s=Math.floor(s);const c=[],u=[],h=[],d=[];let f=0;const m=[],g=n/2;let p=0;v(),a===!1&&(e>0&&y(!0),r>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new vr(u,3)),this.setAttribute("normal",new vr(h,3)),this.setAttribute("uv",new vr(d,2));function v(){const _=new Y,E=new Y;let x=0;const B=(r-e)/n;for(let M=0;M<=s;M++){const R=[],I=M/s,L=I*(r-e)+e;for(let D=0;D<=i;D++){const w=D/i,b=w*l+o,S=Math.sin(b),F=Math.cos(b);E.x=L*S,E.y=-I*n+g,E.z=L*F,u.push(E.x,E.y,E.z),_.set(S,B,F).normalize(),h.push(_.x,_.y,_.z),d.push(w,1-I),R.push(f++)}m.push(R)}for(let M=0;M<i;M++)for(let R=0;R<s;R++){const I=m[R][M],L=m[R+1][M],D=m[R+1][M+1],w=m[R][M+1];e>0&&(c.push(I,L,w),x+=3),r>0&&(c.push(L,D,w),x+=3)}A.addGroup(p,x,0),p+=x}function y(_){const E=f,x=new Ke,B=new Y;let M=0;const R=_===!0?e:r,I=_===!0?1:-1;for(let D=1;D<=i;D++)u.push(0,g*I,0),h.push(0,I,0),d.push(.5,.5),f++;const L=f;for(let D=0;D<=i;D++){const w=D/i*l+o,b=Math.cos(w),S=Math.sin(w);B.x=R*S,B.y=g*I,B.z=R*b,u.push(B.x,B.y,B.z),h.push(0,I,0),x.x=b*.5+.5,x.y=S*.5*I+.5,d.push(x.x,x.y),f++}for(let D=0;D<i;D++){const w=E+D,b=L+D;_===!0?c.push(b,b+1,w):c.push(b+1,b,w),M+=3}A.addGroup(p,M,_===!0?1:2),p+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new m_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}const Use={triangulate:function(t,e,r=2){const n=e&&e.length,i=n?e[0]*r:t.length;let s=L8(t,0,i,r,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,A,c,u,h,d;if(n&&(s=Ose(t,e,s,r)),t.length>80*r){o=A=t[0],l=c=t[1];for(let f=r;f<i;f+=r)u=t[f],h=t[f+1],u<o&&(o=u),h<l&&(l=h),u>A&&(A=u),h>c&&(c=h);d=Math.max(A-o,c-l),d=d!==0?32767/d:0}return Vg(s,a,r,o,l,d,0),a}};function L8(t,e,r,n,i){let s,a;if(i===Yse(t,e,r,n)>0)for(s=e;s<r;s+=n)a=lL(s,t[s],t[s+1],a);else for(s=r-n;s>=e;s-=n)a=lL(s,t[s],t[s+1],a);return a&&g_(a,a.next)&&(Kg(a),a=a.next),a}function Lu(t,e){if(!t)return t;e||(e=t);let r=t,n;do if(n=!1,!r.steiner&&(g_(r,r.next)||Vr(r.prev,r,r.next)===0)){if(Kg(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function Vg(t,e,r,n,i,s,a){if(!t)return;!a&&s&&jse(t,n,i,s);let o=t,l,A;for(;t.prev!==t.next;){if(l=t.prev,A=t.next,s?kse(t,n,i,s):Fse(t)){e.push(l.i/r|0),e.push(t.i/r|0),e.push(A.i/r|0),Kg(t),t=A.next,o=A.next;continue}if(t=A,t===o){a?a===1?(t=Lse(Lu(t),e,r),Vg(t,e,r,n,i,s,2)):a===2&&Pse(t,e,r,n,i,s):Vg(Lu(t),e,r,n,i,s,1);break}}}function Fse(t){const e=t.prev,r=t,n=t.next;if(Vr(e,r,n)>=0)return!1;const i=e.x,s=r.x,a=n.x,o=e.y,l=r.y,A=n.y,c=i<s?i<a?i:a:s<a?s:a,u=o<l?o<A?o:A:l<A?l:A,h=i>s?i>a?i:a:s>a?s:a,d=o>l?o>A?o:A:l>A?l:A;let f=n.next;for(;f!==e;){if(f.x>=c&&f.x<=h&&f.y>=u&&f.y<=d&&Dd(i,o,s,l,a,A,f.x,f.y)&&Vr(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function kse(t,e,r,n){const i=t.prev,s=t,a=t.next;if(Vr(i,s,a)>=0)return!1;const o=i.x,l=s.x,A=a.x,c=i.y,u=s.y,h=a.y,d=o<l?o<A?o:A:l<A?l:A,f=c<u?c<h?c:h:u<h?u:h,m=o>l?o>A?o:A:l>A?l:A,g=c>u?c>h?c:h:u>h?u:h,p=UC(d,f,e,r,n),v=UC(m,g,e,r,n);let y=t.prevZ,_=t.nextZ;for(;y&&y.z>=p&&_&&_.z<=v;){if(y.x>=d&&y.x<=m&&y.y>=f&&y.y<=g&&y!==i&&y!==a&&Dd(o,c,l,u,A,h,y.x,y.y)&&Vr(y.prev,y,y.next)>=0||(y=y.prevZ,_.x>=d&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==a&&Dd(o,c,l,u,A,h,_.x,_.y)&&Vr(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;y&&y.z>=p;){if(y.x>=d&&y.x<=m&&y.y>=f&&y.y<=g&&y!==i&&y!==a&&Dd(o,c,l,u,A,h,y.x,y.y)&&Vr(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;_&&_.z<=v;){if(_.x>=d&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==a&&Dd(o,c,l,u,A,h,_.x,_.y)&&Vr(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Lse(t,e,r){let n=t;do{const i=n.prev,s=n.next.next;!g_(i,s)&&P8(i,n,n.next,s)&&Wg(i,s)&&Wg(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),Kg(n),Kg(n.next),n=t=s),n=n.next}while(n!==t);return Lu(n)}function Pse(t,e,r,n,i,s){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Vse(a,o)){let l=O8(a,o);a=Lu(a,a.next),l=Lu(l,l.next),Vg(a,e,r,n,i,s,0),Vg(l,e,r,n,i,s,0);return}o=o.next}a=a.next}while(a!==t)}function Ose(t,e,r,n){const i=[];let s,a,o,l,A;for(s=0,a=e.length;s<a;s++)o=e[s]*n,l=s<a-1?e[s+1]*n:t.length,A=L8(t,o,l,n,!1),A===A.next&&(A.steiner=!0),i.push(Gse(A));for(i.sort(Dse),s=0;s<i.length;s++)r=Nse(i[s],r);return r}function Dse(t,e){return t.x-e.x}function Nse(t,e){const r=Qse(t,e);if(!r)return e;const n=O8(r,t);return Lu(n,n.next),Lu(r,r.next)}function Qse(t,e){let r=e,n=-1/0,i;const s=t.x,a=t.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const h=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=s&&h>n&&(n=h,i=r.x<r.next.x?r:r.next,h===s))return i}r=r.next}while(r!==e);if(!i)return null;const o=i,l=i.x,A=i.y;let c=1/0,u;r=i;do s>=r.x&&r.x>=l&&s!==r.x&&Dd(a<A?s:n,a,l,A,a<A?n:s,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(s-r.x),Wg(r,t)&&(u<c||u===c&&(r.x>i.x||r.x===i.x&&Hse(i,r)))&&(i=r,c=u)),r=r.next;while(r!==o);return i}function Hse(t,e){return Vr(t.prev,t,e.prev)<0&&Vr(e.next,t,t.next)<0}function jse(t,e,r,n){let i=t;do i.z===0&&(i.z=UC(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,zse(i)}function zse(t){let e,r,n,i,s,a,o,l,A=1;do{for(r=t,t=null,s=null,a=0;r;){for(a++,n=r,o=0,e=0;e<A&&(o++,n=n.nextZ,!!n);e++);for(l=A;o>0||l>0&&n;)o!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,A*=2}while(a>1);return t}function UC(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Gse(t){let e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function Dd(t,e,r,n,i,s,a,o){return(i-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(r-a)*(e-o)&&(r-a)*(s-o)>=(i-a)*(n-o)}function Vse(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Wse(t,e)&&(Wg(t,e)&&Wg(e,t)&&Kse(t,e)&&(Vr(t.prev,t,e.prev)||Vr(t,e.prev,e))||g_(t,e)&&Vr(t.prev,t,t.next)>0&&Vr(e.prev,e,e.next)>0)}function Vr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function g_(t,e){return t.x===e.x&&t.y===e.y}function P8(t,e,r,n){const i=jv(Vr(t,e,r)),s=jv(Vr(t,e,n)),a=jv(Vr(r,n,t)),o=jv(Vr(r,n,e));return!!(i!==s&&a!==o||i===0&&Hv(t,r,e)||s===0&&Hv(t,n,e)||a===0&&Hv(r,t,n)||o===0&&Hv(r,e,n))}function Hv(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function jv(t){return t>0?1:t<0?-1:0}function Wse(t,e){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&P8(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Wg(t,e){return Vr(t.prev,t,t.next)<0?Vr(t,e,t.next)>=0&&Vr(t,t.prev,e)>=0:Vr(t,e,t.prev)<0||Vr(t,t.next,e)<0}function Kse(t,e){let r=t,n=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function O8(t,e){const r=new FC(t.i,t.x,t.y),n=new FC(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function lL(t,e,r,n){const i=new FC(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Kg(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function FC(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yse(t,e,r,n){let i=0;for(let s=e,a=r-n;s<r;s+=n)i+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return i}class NI{static area(e){const r=e.length;let n=0;for(let i=r-1,s=0;s<r;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return NI.area(e)<0}static triangulateShape(e,r){const n=[],i=[],s=[];AL(e),cL(n,e);let a=e.length;r.forEach(AL);for(let l=0;l<r.length;l++)i.push(a),a+=r[l].length,cL(n,r[l]);const o=Use.triangulate(n,i);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function AL(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function cL(t,e){for(let r=0;r<e.length;r++)t.push(e[r].x),t.push(e[r].y)}class QI extends $t{constructor(e=1,r=32,n=16,i=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:n,phiStart:i,phiLength:s,thetaStart:a,thetaLength:o},r=Math.max(3,Math.floor(r)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let A=0;const c=[],u=new Y,h=new Y,d=[],f=[],m=[],g=[];for(let p=0;p<=n;p++){const v=[],y=p/n;let _=0;p===0&&a===0?_=.5/r:p===n&&l===Math.PI&&(_=-.5/r);for(let E=0;E<=r;E++){const x=E/r;u.x=-e*Math.cos(i+x*s)*Math.sin(a+y*o),u.y=e*Math.cos(a+y*o),u.z=e*Math.sin(i+x*s)*Math.sin(a+y*o),f.push(u.x,u.y,u.z),h.copy(u).normalize(),m.push(h.x,h.y,h.z),g.push(x+_,1-y),v.push(A++)}c.push(v)}for(let p=0;p<n;p++)for(let v=0;v<r;v++){const y=c[p][v+1],_=c[p][v],E=c[p+1][v],x=c[p+1][v+1];(p!==0||a>0)&&d.push(y,_,x),(p!==n-1||l<Math.PI)&&d.push(_,E,x)}this.setIndex(d),this.setAttribute("position",new vr(f,3)),this.setAttribute("normal",new vr(m,3)),this.setAttribute("uv",new vr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new QI(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Df extends is{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new He(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kf,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new en,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class il extends Df{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ke(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new He(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new He(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new He(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class JE extends is{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new He(16777215),this.specular=new He(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kf,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new en,this.combine=l_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xse extends is{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kf,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Zse extends is{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new He(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new He(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Kf,this.normalScale=new Ke(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new en,this.combine=l_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function zv(t,e,r){return!t||!r&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function Jse(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function qse(t){function e(i,s){return t[i]-t[s]}const r=t.length,n=new Array(r);for(let i=0;i!==r;++i)n[i]=i;return n.sort(e),n}function uL(t,e,r){const n=t.length,i=new t.constructor(n);for(let s=0,a=0;a!==n;++s){const o=r[s]*e;for(let l=0;l!==e;++l)i[a++]=t[o+l]}return i}function D8(t,e,r,n){let i=1,s=t[0];for(;s!==void 0&&s[n]===void 0;)s=t[i++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),r.push.apply(r,a)),s=t[i++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(r,r.length)),s=t[i++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),r.push(a)),s=t[i++];while(s!==void 0)}class b0{constructor(e,r,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new r.constructor(n),this.sampleValues=r,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const r=this.parameterPositions;let n=this._cachedIndex,i=r[n],s=r[n-1];e:{t:{let a;r:{n:if(!(e<i)){for(let o=n+2;;){if(i===void 0){if(e<s)break n;return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=i,i=r[++n],e<i)break t}a=r.length;break r}if(!(e>=s)){const o=r[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(i=s,s=r[--n-1],e>=s)break t}a=n,n=0;break r}break e}for(;n<a;){const o=n+a>>>1;e<r[o]?a=o:n=o+1}if(i=r[n],s=r[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=r.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let a=0;a!==i;++a)r[a]=n[s+a];return r}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $se extends b0{constructor(e,r,n,i){super(e,r,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ld,endingEnd:Ld}}intervalChanged_(e,r,n){const i=this.parameterPositions;let s=e-2,a=e+1,o=i[s],l=i[a];if(o===void 0)switch(this.getSettings_().endingStart){case Pd:s=e,o=2*r-n;break;case k1:s=i.length-2,o=r+i[s]-i[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case Pd:a=e,l=2*n-r;break;case k1:a=1,l=n+i[1]-i[0];break;default:a=e-1,l=r}const A=(n-r)*.5,c=this.valueSize;this._weightPrev=A/(r-o),this._weightNext=A/(l-n),this._offsetPrev=s*c,this._offsetNext=a*c}interpolate_(e,r,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,A=l-o,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-r)/(i-r),m=f*f,g=m*f,p=-h*g+2*h*m-h*f,v=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*f+1,y=(-1-d)*g+(1.5+d)*m+.5*f,_=d*g-d*m;for(let E=0;E!==o;++E)s[E]=p*a[c+E]+v*a[A+E]+y*a[l+E]+_*a[u+E];return s}}class N8 extends b0{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e,r,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,A=l-o,c=(n-r)/(i-r),u=1-c;for(let h=0;h!==o;++h)s[h]=a[A+h]*u+a[l+h]*c;return s}}class eae extends b0{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class sl{constructor(e,r,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(r===void 0||r.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zv(r,this.TimeBufferType),this.values=zv(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const r=e.constructor;let n;if(r.toJSON!==this.toJSON)n=r.toJSON(e);else{n={name:e.name,times:zv(e.times,Array),values:zv(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new eae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new N8(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new $se(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let r;switch(e){case kf:r=this.InterpolantFactoryMethodDiscrete;break;case Lf:r=this.InterpolantFactoryMethodLinear;break;case pE:r=this.InterpolantFactoryMethodSmooth;break}if(r===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=r,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return kf;case this.InterpolantFactoryMethodLinear:return Lf;case this.InterpolantFactoryMethodSmooth:return pE}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]+=e}return this}scale(e){if(e!==1){const r=this.times;for(let n=0,i=r.length;n!==i;++n)r[n]*=e}return this}trim(e,r){const n=this.times,i=n.length;let s=0,a=i-1;for(;s!==i&&n[s]<e;)++s;for(;a!==-1&&n[a]>r;)--a;if(++a,s!==0||a!==i){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const r=this.getValueSize();r-Math.floor(r)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(i!==void 0&&Jse(i))for(let o=0,l=i.length;o!==l;++o){const A=i[o];if(isNaN(A)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,A),e=!1;break}}return e}optimize(){const e=this.times.slice(),r=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===pE,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const A=e[o],c=e[o+1];if(A!==c&&(o!==1||A!==e[0]))if(i)l=!0;else{const u=o*n,h=u-n,d=u+n;for(let f=0;f!==n;++f){const m=r[u+f];if(m!==r[h+f]||m!==r[d+f]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const u=o*n,h=a*n;for(let d=0;d!==n;++d)r[h+d]=r[u+d]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,A=0;A!==n;++A)r[l+A]=r[o+A];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=r.slice(0,a*n)):(this.times=e,this.values=r),this}clone(){const e=this.times.slice(),r=this.values.slice(),n=this.constructor,i=new n(this.name,e,r);return i.createInterpolant=this.createInterpolant,i}}sl.prototype.TimeBufferType=Float32Array;sl.prototype.ValueBufferType=Float32Array;sl.prototype.DefaultInterpolation=Lf;class Zf extends sl{constructor(e,r,n){super(e,r,n)}}Zf.prototype.ValueTypeName="bool";Zf.prototype.ValueBufferType=Array;Zf.prototype.DefaultInterpolation=kf;Zf.prototype.InterpolantFactoryMethodLinear=void 0;Zf.prototype.InterpolantFactoryMethodSmooth=void 0;class Q8 extends sl{}Q8.prototype.ValueTypeName="color";class Pu extends sl{}Pu.prototype.ValueTypeName="number";class tae extends b0{constructor(e,r,n,i){super(e,r,n,i)}interpolate_(e,r,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-r)/(i-r);let A=e*o;for(let c=A+o;A!==c;A+=4)et.slerpFlat(s,0,a,A-o,a,A,l);return s}}class el extends sl{InterpolantFactoryMethodLinear(e){return new tae(this.times,this.values,this.getValueSize(),e)}}el.prototype.ValueTypeName="quaternion";el.prototype.InterpolantFactoryMethodSmooth=void 0;class Jf extends sl{constructor(e,r,n){super(e,r,n)}}Jf.prototype.ValueTypeName="string";Jf.prototype.ValueBufferType=Array;Jf.prototype.DefaultInterpolation=kf;Jf.prototype.InterpolantFactoryMethodLinear=void 0;Jf.prototype.InterpolantFactoryMethodSmooth=void 0;class rA extends sl{}rA.prototype.ValueTypeName="vector";class Ou{constructor(e="",r=-1,n=[],i=II){this.name=e,this.tracks=n,this.duration=r,this.blendMode=i,this.uuid=ro(),this.duration<0&&this.resetDuration()}static parse(e){const r=[],n=e.tracks,i=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)r.push(nae(n[a]).scale(i));const s=new this(e.name,e.duration,r,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const r=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:r,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)r.push(sl.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,r,n,i){const s=r.length,a=[];for(let o=0;o<s;o++){let l=[],A=[];l.push((o+s-1)%s,o,(o+1)%s),A.push(0,1,0);const c=qse(l);l=uL(l,1,c),A=uL(A,1,c),!i&&l[0]===0&&(l.push(s),A.push(A[0])),a.push(new Pu(".morphTargetInfluences["+r[o].name+"]",l,A).scale(1/n))}return new this(e,-1,a)}static findByName(e,r){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===r)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,r,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const A=e[o],c=A.name.match(s);if(c&&c.length>1){const u=c[1];let h=i[u];h||(i[u]=h=[]),h.push(A)}}const a=[];for(const o in i)a.push(this.CreateFromMorphTargetSequence(o,i[o],r,n));return a}static parseAnimation(e,r){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(c,u,h,d,f){if(h.length!==0){const m=[],g=[];D8(h,m,g,d),m.length!==0&&f.push(new c(u,m,g))}},i=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const A=e.hierarchy||[];for(let c=0;c<A.length;c++){const u=A[c].keys;if(!(!u||u.length===0))if(u[0].morphTargets){const h={};let d;for(d=0;d<u.length;d++)if(u[d].morphTargets)for(let f=0;f<u[d].morphTargets.length;f++)h[u[d].morphTargets[f]]=-1;for(const f in h){const m=[],g=[];for(let p=0;p!==u[d].morphTargets.length;++p){const v=u[d];m.push(v.time),g.push(v.morphTarget===f?1:0)}i.push(new Pu(".morphTargetInfluence["+f+"]",m,g))}l=h.length*a}else{const h=".bones["+r[c].name+"]";n(rA,h+".position",u,"pos",i),n(el,h+".quaternion",u,"rot",i),n(rA,h+".scale",u,"scl",i)}}return i.length===0?null:new this(s,l,i,o)}resetDuration(){const e=this.tracks;let r=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];r=Math.max(r,s.times[s.times.length-1])}return this.duration=r,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let r=0;r<this.tracks.length;r++)e=e&&this.tracks[r].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function rae(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pu;case"vector":case"vector2":case"vector3":case"vector4":return rA;case"color":return Q8;case"quaternion":return el;case"bool":case"boolean":return Zf;case"string":return Jf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function nae(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=rae(t.type);if(t.times===void 0){const r=[],n=[];D8(t.keys,r,n,"value"),t.times=r,t.values=n}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const YA={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class H8{constructor(e,r,n){const i=this;let s=!1,a=0,o=0,l;const A=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=n,this.itemStart=function(c){o++,s===!1&&i.onStart!==void 0&&i.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,i.onProgress!==void 0&&i.onProgress(c,a,o),a===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,u){return A.push(c,u),this},this.removeHandler=function(c){const u=A.indexOf(c);return u!==-1&&A.splice(u,2),this},this.getHandler=function(c){for(let u=0,h=A.length;u<h;u+=2){const d=A[u],f=A[u+1];if(d.global&&(d.lastIndex=0),d.test(c))return f}return null}}}const iae=new H8;class tl{constructor(e){this.manager=e!==void 0?e:iae,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){const n=this;return new Promise(function(i,s){n.load(e,i,r,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}tl.DEFAULT_MATERIAL_NAME="__DEFAULT";const pl={};class sae extends Error{constructor(e,r){super(e),this.response=r}}class v_ extends tl{constructor(e){super(e)}load(e,r,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=YA.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{r&&r(s),this.manager.itemEnd(e)},0),s;if(pl[e]!==void 0){pl[e].push({onLoad:r,onProgress:n,onError:i});return}pl[e]=[],pl[e].push({onLoad:r,onProgress:n,onError:i});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(A=>{if(A.status===200||A.status===0){if(A.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||A.body===void 0||A.body.getReader===void 0)return A;const c=pl[e],u=A.body.getReader(),h=A.headers.get("X-File-Size")||A.headers.get("Content-Length"),d=h?parseInt(h):0,f=d!==0;let m=0;const g=new ReadableStream({start(p){v();function v(){u.read().then(({done:y,value:_})=>{if(y)p.close();else{m+=_.byteLength;const E=new ProgressEvent("progress",{lengthComputable:f,loaded:m,total:d});for(let x=0,B=c.length;x<B;x++){const M=c[x];M.onProgress&&M.onProgress(E)}p.enqueue(_),v()}},y=>{p.error(y)})}}});return new Response(g)}else throw new sae(`fetch for "${A.url}" responded with ${A.status}: ${A.statusText}`,A)}).then(A=>{switch(l){case"arraybuffer":return A.arrayBuffer();case"blob":return A.blob();case"document":return A.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return A.json();default:if(o===void 0)return A.text();{const c=/charset="?([^;"\s]*)"?/i.exec(o),u=c&&c[1]?c[1].toLowerCase():void 0,h=new TextDecoder(u);return A.arrayBuffer().then(d=>h.decode(d))}}}).then(A=>{YA.add(e,A);const c=pl[e];delete pl[e];for(let u=0,h=c.length;u<h;u++){const d=c[u];d.onLoad&&d.onLoad(A)}}).catch(A=>{const c=pl[e];if(c===void 0)throw this.manager.itemError(e),A;delete pl[e];for(let u=0,h=c.length;u<h;u++){const d=c[u];d.onError&&d.onError(A)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class j8 extends tl{constructor(e){super(e)}load(e,r,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=YA.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){r&&r(a),s.manager.itemEnd(e)},0),a;const o=jg("img");function l(){c(),YA.add(e,this),r&&r(this),s.manager.itemEnd(e)}function A(u){c(),i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",A,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",A,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class aae extends tl{constructor(e){super(e)}load(e,r,n,i){const s=this,a=new _u,o=new v_(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let A;try{A=s.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}A.image!==void 0?a.image=A.image:A.data!==void 0&&(a.image.width=A.width,a.image.height=A.height,a.image.data=A.data),a.wrapS=A.wrapS!==void 0?A.wrapS:Ss,a.wrapT=A.wrapT!==void 0?A.wrapT:Ss,a.magFilter=A.magFilter!==void 0?A.magFilter:Un,a.minFilter=A.minFilter!==void 0?A.minFilter:Un,a.anisotropy=A.anisotropy!==void 0?A.anisotropy:1,A.colorSpace!==void 0&&(a.colorSpace=A.colorSpace),A.flipY!==void 0&&(a.flipY=A.flipY),A.format!==void 0&&(a.format=A.format),A.type!==void 0&&(a.type=A.type),A.mipmaps!==void 0&&(a.mipmaps=A.mipmaps,a.minFilter=qa),A.mipmapCount===1&&(a.minFilter=Un),A.generateMipmaps!==void 0&&(a.generateMipmaps=A.generateMipmaps),a.needsUpdate=!0,r&&r(a,A)},n,i),a}}class Uc extends tl{constructor(e){super(e)}load(e,r,n,i){const s=new Sr,a=new j8(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,r!==void 0&&r(s)},n,i),s}}class y_ extends Lt{constructor(e,r=1){super(),this.isLight=!0,this.type="Light",this.color=new He(e),this.intensity=r}dispose(){}copy(e,r){return super.copy(e,r),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(r.object.target=this.target.uuid),r}}const qE=new je,hL=new Y,dL=new Y;class HI{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ke(512,512),this.map=null,this.mapPass=null,this.matrix=new je,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new d_,this._frameExtents=new Ke(1,1),this._viewportCount=1,this._viewports=[new kt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,n=this.matrix;hL.setFromMatrixPosition(e.matrixWorld),r.position.copy(hL),dL.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(dL),r.updateMatrixWorld(),qE.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qE),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(qE)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class oae extends HI{constructor(){super(new In(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const r=this.camera,n=Pf*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||r.far;(n!==r.fov||i!==r.aspect||s!==r.far)&&(r.fov=n,r.aspect=i,r.far=s,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class z8 extends y_{constructor(e,r,n=0,i=Math.PI/3,s=0,a=2){super(e,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Lt.DEFAULT_UP),this.updateMatrix(),this.target=new Lt,this.distance=n,this.angle=i,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new oae}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const fL=new je,Dp=new Y,$E=new Y;class lae extends HI{constructor(){super(new In(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ke(4,2),this._viewportCount=6,this._viewports=[new kt(2,1,1,1),new kt(0,1,1,1),new kt(3,1,1,1),new kt(1,1,1,1),new kt(3,0,1,1),new kt(1,0,1,1)],this._cubeDirections=[new Y(1,0,0),new Y(-1,0,0),new Y(0,0,1),new Y(0,0,-1),new Y(0,1,0),new Y(0,-1,0)],this._cubeUps=[new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,1,0),new Y(0,0,1),new Y(0,0,-1)]}updateMatrices(e,r=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Dp.setFromMatrixPosition(e.matrixWorld),n.position.copy(Dp),$E.copy(n.position),$E.add(this._cubeDirections[r]),n.up.copy(this._cubeUps[r]),n.lookAt($E),n.updateMatrixWorld(),i.makeTranslation(-Dp.x,-Dp.y,-Dp.z),fL.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fL)}}class kC extends y_{constructor(e,r,n=0,i=2){super(e,r),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new lae}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Aae extends HI{constructor(){super(new v0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class jI extends y_{constructor(e,r){super(e,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Lt.DEFAULT_UP),this.updateMatrix(),this.target=new Lt,this.shadow=new Aae}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class G8 extends y_{constructor(e,r){super(e,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class of{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let r="";for(let n=0,i=e.length;n<i;n++)r+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(r))}catch{return r}}static extractUrlBase(e){const r=e.lastIndexOf("/");return r===-1?"./":e.slice(0,r+1)}static resolveURL(e,r){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(r)&&/^\//.test(e)&&(r=r.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:r+e)}}class cae extends tl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,r,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=YA.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(A=>{r&&r(A),s.manager.itemEnd(e)}).catch(A=>{i&&i(A)});return}return setTimeout(function(){r&&r(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader;const l=fetch(e,o).then(function(A){return A.blob()}).then(function(A){return createImageBitmap(A,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(A){return YA.add(e,A),r&&r(A),s.manager.itemEnd(e),A}).catch(function(A){i&&i(A),YA.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});YA.add(e,l),s.manager.itemStart(e)}}class w_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=pL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=pL();e=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=e}return e}}function pL(){return performance.now()}class uae{constructor(e,r,n){this.binding=e,this.valueSize=n;let i,s,a;switch(r){case"quaternion":i=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,r){const n=this.buffer,i=this.valueSize,s=e*i+i;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==i;++o)n[s+o]=n[o];a=r}else{a+=r;const o=r/a;this._mixBufferRegion(n,s,0,o,i)}this.cumulativeWeight=a}accumulateAdditive(e){const r=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(r,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const r=this.valueSize,n=this.buffer,i=e*r+r,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=r*this._origIndex;this._mixBufferRegion(n,i,l,1-s,r)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*r,1,r);for(let l=r,A=r+r;l!==A;++l)if(n[l]!==n[l+r]){o.setValue(n,i);break}}saveOriginalState(){const e=this.binding,r=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(r,i);for(let s=n,a=i;s!==a;++s)r[s]=r[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,r=e+this.valueSize;for(let n=e;n<r;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,r=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[r+n]=this.buffer[e+n]}_select(e,r,n,i,s){if(i>=.5)for(let a=0;a!==s;++a)e[r+a]=e[n+a]}_slerp(e,r,n,i){et.slerpFlat(e,r,e,r,e,n,i)}_slerpAdditive(e,r,n,i,s){const a=this._workIndex*s;et.multiplyQuaternionsFlat(e,a,e,r,e,n),et.slerpFlat(e,r,e,r,e,a,i)}_lerp(e,r,n,i,s){const a=1-i;for(let o=0;o!==s;++o){const l=r+o;e[l]=e[l]*a+e[n+o]*i}}_lerpAdditive(e,r,n,i,s){for(let a=0;a!==s;++a){const o=r+a;e[o]=e[o]+e[n+a]*i}}}const zI="\\[\\]\\.:\\/",hae=new RegExp("["+zI+"]","g"),GI="[^"+zI+"]",dae="[^"+zI.replace("\\.","")+"]",fae=/((?:WC+[\/:])*)/.source.replace("WC",GI),pae=/(WCOD+)?/.source.replace("WCOD",dae),mae=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",GI),gae=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",GI),vae=new RegExp("^"+fae+pae+mae+gae+"$"),yae=["material","materials","bones","map"];class wae{constructor(e,r,n){const i=n||Tt.parseTrackName(r);this._targetGroup=e,this._bindings=e.subscribe_(r,i)}getValue(e,r){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,r)}setValue(e,r){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,r)}bind(){const e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=e.length;r!==n;++r)e[r].bind()}unbind(){const e=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=e.length;r!==n;++r)e[r].unbind()}}class Tt{constructor(e,r,n){this.path=r,this.parsedPath=n||Tt.parseTrackName(r),this.node=Tt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,r,n){return e&&e.isAnimationObjectGroup?new Tt.Composite(e,r,n):new Tt(e,r,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hae,"")}static parseTrackName(e){const r=vae.exec(e);if(r===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);yae.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,r){if(r===void 0||r===""||r==="."||r===-1||r===e.name||r===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(r);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===r||o.uuid===r)return o;const l=n(o.children);if(l)return l}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,r){e[r]=this.targetObject[this.propertyName]}_getValue_array(e,r){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[r++]=n[i]}_getValue_arrayElement(e,r){e[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,r){this.resolvedProperty.toArray(e,r)}_setValue_direct(e,r){this.targetObject[this.propertyName]=e[r]}_setValue_direct_setNeedsUpdate(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,r){this.targetObject[this.propertyName]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,r){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[r++]}_setValue_array_setNeedsUpdate(e,r){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,r){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,r){this.resolvedProperty[this.propertyIndex]=e[r]}_setValue_arrayElement_setNeedsUpdate(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,r){this.resolvedProperty[this.propertyIndex]=e[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,r){this.resolvedProperty.fromArray(e,r)}_setValue_fromArray_setNeedsUpdate(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,r){this.resolvedProperty.fromArray(e,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,r){this.bind(),this.getValue(e,r)}_setValue_unbound(e,r){this.bind(),this.setValue(e,r)}bind(){let e=this.node;const r=this.parsedPath,n=r.objectName,i=r.propertyName;let s=r.propertyIndex;if(e||(e=Tt.findNode(this.rootNode,r.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let A=r.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===A){A=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(A!==void 0){if(e[A]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[A]}}const a=e[i];if(a===void 0){const A=r.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+A+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Tt.Composite=wae;Tt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Tt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Tt.prototype.GetterByBindingType=[Tt.prototype._getValue_direct,Tt.prototype._getValue_array,Tt.prototype._getValue_arrayElement,Tt.prototype._getValue_toArray];Tt.prototype.SetterByBindingTypeAndVersioning=[[Tt.prototype._setValue_direct,Tt.prototype._setValue_direct_setNeedsUpdate,Tt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Tt.prototype._setValue_array,Tt.prototype._setValue_array_setNeedsUpdate,Tt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Tt.prototype._setValue_arrayElement,Tt.prototype._setValue_arrayElement_setNeedsUpdate,Tt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Tt.prototype._setValue_fromArray,Tt.prototype._setValue_fromArray_setNeedsUpdate,Tt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class bae{constructor(e,r,n=null,i=r.blendMode){this._mixer=e,this._clip=r,this._localRoot=n,this.blendMode=i;const s=r.tracks,a=s.length,o=new Array(a),l={endingStart:Ld,endingEnd:Ld};for(let A=0;A!==a;++A){const c=s[A].createInterpolant(null);o[A]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=E$,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,r){return this.loop=e,this.repetitions=r,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,r,n){if(e.fadeOut(r),this.fadeIn(r),n){const i=this._clip.duration,s=e._clip.duration,a=s/i,o=i/s;e.warp(1,a,r),this.warp(o,1,r)}return this}crossFadeTo(e,r,n){return e.crossFadeFrom(this,r,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,r,n){const i=this._mixer,s=i.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,A=o.sampleValues;return l[0]=s,l[1]=s+n,A[0]=e/a,A[1]=r/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,r,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?r=0:(this._startTime=null,r=n*l)}r*=this._updateTimeScale(e);const a=this._updateTime(r),o=this._updateWeight(e);if(o>0){const l=this._interpolants,A=this._propertyBindings;switch(this.blendMode){case M$:for(let c=0,u=l.length;c!==u;++c)l[c].evaluate(a),A[c].accumulateAdditive(o);break;case II:default:for(let c=0,u=l.length;c!==u;++c)l[c].evaluate(a),A[c].accumulate(i,o)}}}_updateWeight(e){let r=0;if(this.enabled){r=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];r*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=r,r}_updateTimeScale(e){let r=0;if(!this.paused){r=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];r*=i,e>n.parameterPositions[1]&&(this.stopWarping(),r===0?this.paused=!0:this.timeScale=r)}}return this._effectiveTimeScale=r,r}_updateTime(e){const r=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const a=n===B$;if(e===0)return s===-1?i:a&&(s&1)===1?r-i:i;if(n===x$){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=r)i=r;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),i>=r||i<0){const o=Math.floor(i/r);i-=r*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?r:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const A=e<0;this._setEndings(A,!A,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&(s&1)===1)return r-i}return i}_setEndings(e,r,n){const i=this._interpolantSettings;n?(i.endingStart=Pd,i.endingEnd=Pd):(e?i.endingStart=this.zeroSlopeAtStart?Pd:Ld:i.endingStart=k1,r?i.endingEnd=this.zeroSlopeAtEnd?Pd:Ld:i.endingEnd=k1)}_scheduleFading(e,r,n){const i=this._mixer,s=i.time;let a=this._weightInterpolant;a===null&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=r,o[1]=s+e,l[1]=n,this}}const _ae=new Float32Array(1);class xae extends Ic{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,r){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,A=this._bindingsByRootAndName;let c=A[l];c===void 0&&(c={},A[l]=c);for(let u=0;u!==s;++u){const h=i[u],d=h.name;let f=c[d];if(f!==void 0)++f.referenceCount,a[u]=f;else{if(f=a[u],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,l,d));continue}const m=r&&r._propertyBindings[u].binding.parsedPath;f=new uae(Tt.create(n,d,m),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,l,d),a[u]=f}o[u].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const r=e._propertyBindings;for(let n=0,i=r.length;n!==i;++n){const s=r[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const r=e._propertyBindings;for(let n=0,i=r.length;n!==i;++n){const s=r[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const r=e._cacheIndex;return r!==null&&r<this._nActiveActions}_addInactiveAction(e,r,n){const i=this._actions,s=this._actionsByClip;let a=s[r];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[r]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const r=this._actions,n=r[r.length-1],i=e._cacheIndex;n._cacheIndex=i,r[i]=n,r.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,A=l[l.length-1],c=e._byClipCacheIndex;A._byClipCacheIndex=c,l[c]=A,l.pop(),e._byClipCacheIndex=null;const u=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete u[h],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const r=e._propertyBindings;for(let n=0,i=r.length;n!==i;++n){const s=r[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const r=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=r[i];e._cacheIndex=i,r[i]=e,s._cacheIndex=n,r[n]=s}_takeBackAction(e){const r=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=r[i];e._cacheIndex=i,r[i]=e,s._cacheIndex=n,r[n]=s}_addInactiveBinding(e,r,n){const i=this._bindingsByRootAndName,s=this._bindings;let a=i[r];a===void 0&&(a={},i[r]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const r=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[i],l=r[r.length-1],A=e._cacheIndex;l._cacheIndex=A,r[A]=l,r.pop(),delete o[s],Object.keys(o).length===0&&delete a[i]}_lendBinding(e){const r=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=r[i];e._cacheIndex=i,r[i]=e,s._cacheIndex=n,r[n]=s}_takeBackBinding(e){const r=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=r[i];e._cacheIndex=i,r[i]=e,s._cacheIndex=n,r[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,r=this._nActiveControlInterpolants++;let n=e[r];return n===void 0&&(n=new N8(new Float32Array(2),new Float32Array(2),1,_ae),n.__cacheIndex=r,e[r]=n),n}_takeBackControlInterpolant(e){const r=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=r[i];e.__cacheIndex=i,r[i]=e,s.__cacheIndex=n,r[n]=s}clipAction(e,r,n){const i=r||this._root,s=i.uuid;let a=typeof e=="string"?Ou.findByName(i,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let A=null;if(n===void 0&&(a!==null?n=a.blendMode:n=II),l!==void 0){const u=l.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;A=l.knownActions[0],a===null&&(a=A._clip)}if(a===null)return null;const c=new bae(this,a,r,n);return this._bindAction(c,A),this._addInactiveAction(c,o,s),c}existingAction(e,r){const n=r||this._root,i=n.uuid,s=typeof e=="string"?Ou.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[i]||null}stopAllAction(){const e=this._actions,r=this._nActiveActions;for(let n=r-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const r=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let A=0;A!==n;++A)r[A]._update(i,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let A=0;A!==l;++A)o[A].apply(a);return this}setTime(e){this.time=0;for(let r=0;r<this._actions.length;r++)this._actions[r].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const r=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const A=a[o];this._deactivateAction(A);const c=A._cacheIndex,u=r[r.length-1];A._cacheIndex=null,A._byClipCacheIndex=null,u._cacheIndex=c,r[c]=u,r.pop(),this._removeInactiveBindingsForAction(A)}delete i[n]}}uncacheRoot(e){const r=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[r];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[r];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,r){const n=this.existingAction(e,r);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class VI{constructor(e){this.value=e}clone(){return new VI(this.value.clone===void 0?this.value:this.value.clone())}}class mL{constructor(e,r,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=r,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,r){return this.type=e,this.elementSize=r,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const gL=new je;class V8{constructor(e,r,n=0,i=1/0){this.ray=new Yu(e,r),this.near=n,this.far=i,this.camera=null,this.layers=new kI,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,r){this.ray.set(e,r)}setFromCamera(e,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}setFromXRController(e){return gL.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(gL),this}intersectObject(e,r=!0,n=[]){return LC(e,this,n,r),n.sort(vL),n}intersectObjects(e,r=!0,n=[]){for(let i=0,s=e.length;i<s;i++)LC(e[i],this,n,r);return n.sort(vL),n}}function vL(t,e){return t.distance-e.distance}function LC(t,e,r,n){let i=!0;if(t.layers.test(e.layers)&&t.raycast(e,r)===!1&&(i=!1),i===!0&&n===!0){const s=t.children;for(let a=0,o=s.length;a<o;a++)LC(s[a],e,r,!0)}}class yL{constructor(e=1,r=0,n=0){return this.radius=e,this.phi=r,this.theta=n,this}set(e,r,n){return this.radius=e,this.phi=r,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,n){return this.radius=Math.sqrt(e*e+r*r+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(dn(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const wL=new Y,Gv=new Y;class Gl{constructor(e=new Y,r=new Y){this.start=e,this.end=r}set(e,r){return this.start.copy(e),this.end.copy(r),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,r){return this.delta(r).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,r){wL.subVectors(e,this.start),Gv.subVectors(this.end,this.start);const n=Gv.dot(Gv);let i=Gv.dot(wL)/n;return r&&(i=dn(i,0,1)),i}closestPointToPoint(e,r,n){const i=this.closestPointToPointParameter(e,r);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}class Eae extends w0{constructor(e=1){const r=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new $t;i.setAttribute("position",new vr(r,3)),i.setAttribute("color",new vr(n,3));const s=new lA({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,r,n){const i=new He,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(r),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bae extends Ic{constructor(e,r=null){super(),this.object=e,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:eA}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=eA);const bL={type:"change"},WI={type:"start"},W8={type:"end"},Vv=new Yu,_L=new So,Mae=Math.cos(70*Et.DEG2RAD),Tn=new Y,Hi=2*Math.PI,hr={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},eB=1e-6;class Tae extends Bae{constructor(e,r=null){super(e,r),this.state=hr.NONE,this.enabled=!0,this.target=new Y,this.cursor=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:rf.ROTATE,MIDDLE:rf.DOLLY,RIGHT:rf.PAN},this.touches={ONE:Fd.ROTATE,TWO:Fd.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Y,this._lastQuaternion=new et,this._lastTargetPosition=new Y,this._quat=new et().setFromUnitVectors(e.up,new Y(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new yL,this._sphericalDelta=new yL,this._scale=1,this._panOffset=new Y,this._rotateStart=new Ke,this._rotateEnd=new Ke,this._rotateDelta=new Ke,this._panStart=new Ke,this._panEnd=new Ke,this._panDelta=new Ke,this._dollyStart=new Ke,this._dollyEnd=new Ke,this._dollyDelta=new Ke,this._dollyDirection=new Y,this._mouse=new Ke,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=Sae.bind(this),this._onPointerDown=Cae.bind(this),this._onPointerUp=Iae.bind(this),this._onContextMenu=Oae.bind(this),this._onMouseWheel=Fae.bind(this),this._onKeyDown=kae.bind(this),this._onTouchStart=Lae.bind(this),this._onTouchMove=Pae.bind(this),this._onMouseDown=Rae.bind(this),this._onMouseMove=Uae.bind(this),this._interceptControlDown=Dae.bind(this),this._interceptControlUp=Nae.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(bL),this.update(),this.state=hr.NONE}update(e=null){const r=this.object.position;Tn.copy(r).sub(this.target),Tn.applyQuaternion(this._quat),this._spherical.setFromVector3(Tn),this.autoRotate&&this.state===hr.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=Hi:n>Math.PI&&(n-=Hi),i<-Math.PI?i+=Hi:i>Math.PI&&(i-=Hi),n<=i?this._spherical.theta=Math.max(n,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+i)/2?Math.max(n,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=a!=this._spherical.radius}if(Tn.setFromSpherical(this._spherical),Tn.applyQuaternion(this._quatInverse),r.copy(this.target).add(Tn),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let a=null;if(this.object.isPerspectiveCamera){const o=Tn.length();a=this._clampDistance(o*this._scale);const l=o-a;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const o=new Y(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const A=new Y(this._mouse.x,this._mouse.y,0);A.unproject(this.object),this.object.position.sub(A).add(o),this.object.updateMatrixWorld(),a=Tn.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;a!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(a).add(this.object.position):(Vv.origin.copy(this.object.position),Vv.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Vv.direction))<Mae?this.object.lookAt(this.target):(_L.setFromNormalAndCoplanarPoint(this.object.up,this.target),Vv.intersectPlane(_L,this.target))))}else if(this.object.isOrthographicCamera){const a=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),a!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>eB||8*(1-this._lastQuaternion.dot(this.object.quaternion))>eB||this._lastTargetPosition.distanceToSquared(this.target)>eB?(this.dispatchEvent(bL),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Hi/60*this.autoRotateSpeed*e:Hi/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){Tn.setFromMatrixColumn(r,0),Tn.multiplyScalar(-e),this._panOffset.add(Tn)}_panUp(e,r){this.screenSpacePanning===!0?Tn.setFromMatrixColumn(r,1):(Tn.setFromMatrixColumn(r,0),Tn.crossVectors(this.object.up,Tn)),Tn.multiplyScalar(e),this._panOffset.add(Tn)}_pan(e,r){const n=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;Tn.copy(i).sub(this.target);let s=Tn.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/n.clientHeight,this.object.matrix),this._panUp(2*r*s/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const n=this.domElement.getBoundingClientRect(),i=e-n.left,s=r-n.top,a=n.width,o=n.height;this._mouse.x=i/a*2-1,this._mouse.y=-(s/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Hi*this._rotateDelta.x/r.clientHeight),this._rotateUp(Hi*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(Hi*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-Hi*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(Hi*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-Hi*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._rotateStart.set(n,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._panStart.set(n,i)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),n=e.pageX-r.x,i=e.pageY-r.y,s=Math.sqrt(n*n+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const n=this._getSecondPointerPosition(e),i=.5*(e.pageX+n.x),s=.5*(e.pageY+n.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Hi*this._rotateDelta.x/r.clientHeight),this._rotateUp(Hi*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),n=.5*(e.pageX+r.x),i=.5*(e.pageY+r.y);this._panEnd.set(n,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),n=e.pageX-r.x,i=e.pageY-r.y,s=Math.sqrt(n*n+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const a=(e.pageX+r.x)*.5,o=(e.pageY+r.y)*.5;this._updateZoomParameters(a,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new Ke,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function Cae(t){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(t)&&(this._addPointer(t),t.pointerType==="touch"?this._onTouchStart(t):this._onMouseDown(t)))}function Sae(t){this.enabled!==!1&&(t.pointerType==="touch"?this._onTouchMove(t):this._onMouseMove(t))}function Iae(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(W8),this.state=hr.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function Rae(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case rf.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(t),this.state=hr.DOLLY;break;case rf.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=hr.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=hr.ROTATE}break;case rf.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(t),this.state=hr.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(t),this.state=hr.PAN}break;default:this.state=hr.NONE}this.state!==hr.NONE&&this.dispatchEvent(WI)}function Uae(t){switch(this.state){case hr.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(t);break;case hr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(t);break;case hr.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(t);break}}function Fae(t){this.enabled===!1||this.enableZoom===!1||this.state!==hr.NONE||(t.preventDefault(),this.dispatchEvent(WI),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(W8))}function kae(t){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(t)}function Lae(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case Fd.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(t),this.state=hr.TOUCH_ROTATE;break;case Fd.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(t),this.state=hr.TOUCH_PAN;break;default:this.state=hr.NONE}break;case 2:switch(this.touches.TWO){case Fd.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(t),this.state=hr.TOUCH_DOLLY_PAN;break;case Fd.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(t),this.state=hr.TOUCH_DOLLY_ROTATE;break;default:this.state=hr.NONE}break;default:this.state=hr.NONE}this.state!==hr.NONE&&this.dispatchEvent(WI)}function Pae(t){switch(this._trackPointer(t),this.state){case hr.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(t),this.update();break;case hr.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(t),this.update();break;case hr.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(t),this.update();break;case hr.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=hr.NONE}}function Oae(t){this.enabled!==!1&&t.preventDefault()}function Dae(t){t.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function Nae(t){t.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function K8(t){let e,r,n,i=-1,s=0;for(let A=0;A<t.length;++A){const c=t[A];if(e===void 0&&(e=c.array.constructor),e!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=c.itemSize),r!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=c.normalized),n!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(i===-1&&(i=c.gpuType),i!==c.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=c.count*r}const a=new e(s),o=new lt(a,r,n);let l=0;for(let A=0;A<t.length;++A){const c=t[A];if(c.isInterleavedBufferAttribute){const u=l/r;for(let h=0,d=c.count;h<d;h++)for(let f=0;f<r;f++){const m=c.getComponent(h,f);o.setComponent(h+u,f,m)}}else a.set(c.array,l);l+=c.count*r}return i!==void 0&&(o.gpuType=i),o}function xL(t,e){if(e===T$)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===CC||e===w8){let r=t.getIndex();if(r===null){const a=[],o=t.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);t.setIndex(a),r=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const n=r.count-2,i=[];if(e===CC)for(let a=1;a<=n;a++)i.push(r.getX(0)),i.push(r.getX(a)),i.push(r.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(i.push(r.getX(a)),i.push(r.getX(a+1)),i.push(r.getX(a+2))):(i.push(r.getX(a+2)),i.push(r.getX(a+1)),i.push(r.getX(a)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=t.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class Y8 extends tl{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new Gae(r)}),this.register(function(r){return new Vae(r)}),this.register(function(r){return new eoe(r)}),this.register(function(r){return new toe(r)}),this.register(function(r){return new roe(r)}),this.register(function(r){return new Kae(r)}),this.register(function(r){return new Yae(r)}),this.register(function(r){return new Xae(r)}),this.register(function(r){return new Zae(r)}),this.register(function(r){return new zae(r)}),this.register(function(r){return new Jae(r)}),this.register(function(r){return new Wae(r)}),this.register(function(r){return new $ae(r)}),this.register(function(r){return new qae(r)}),this.register(function(r){return new Hae(r)}),this.register(function(r){return new noe(r)}),this.register(function(r){return new ioe(r)})}load(e,r,n,i){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const A=of.extractUrlBase(e);a=of.resolveURL(A,this.path)}else a=of.extractUrlBase(e);this.manager.itemStart(e);const o=function(A){i?i(A):console.error(A),s.manager.itemError(e),s.manager.itemEnd(e)},l=new v_(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(A){try{s.parse(A,a,function(c){r(c),s.manager.itemEnd(e)},o)}catch(c){o(c)}},n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,r,n,i){let s;const a={},o={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===X8){try{a[Ft.KHR_BINARY_GLTF]=new soe(e)}catch(c){i&&i(c);return}s=JSON.parse(a[Ft.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const A=new voe(s,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});A.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const u=this.pluginCallbacks[c](A);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[u.name]=u,a[u.name]=!0}if(s.extensionsUsed)for(let c=0;c<s.extensionsUsed.length;++c){const u=s.extensionsUsed[c],h=s.extensionsRequired||[];switch(u){case Ft.KHR_MATERIALS_UNLIT:a[u]=new jae;break;case Ft.KHR_DRACO_MESH_COMPRESSION:a[u]=new aoe(s,this.dracoLoader);break;case Ft.KHR_TEXTURE_TRANSFORM:a[u]=new ooe;break;case Ft.KHR_MESH_QUANTIZATION:a[u]=new loe;break;default:h.indexOf(u)>=0&&o[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}A.setExtensions(a),A.setPlugins(o),A.parse(n,i)}parseAsync(e,r){const n=this;return new Promise(function(i,s){n.parse(e,r,i,s)})}}function Qae(){let t={};return{get:function(e){return t[e]},add:function(e,r){t[e]=r},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const Ft={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Hae{constructor(e){this.parser=e,this.name=Ft.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,r=this.parser.json.nodes||[];for(let n=0,i=r.length;n<i;n++){const s=r[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const r=this.parser,n="light:"+e;let i=r.cache.get(n);if(i)return i;const s=r.json,a=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let o;const l=new He(16777215);a.color!==void 0&&l.setRGB(a.color[0],a.color[1],a.color[2],Bn);const A=a.range!==void 0?a.range:0;switch(a.type){case"directional":o=new jI(l),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new kC(l),o.distance=A;break;case"spot":o=new z8(l),o.distance=A,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,o.angle=a.spot.outerConeAngle,o.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return o.position.set(0,0,0),o.decay=2,Il(o,a),a.intensity!==void 0&&(o.intensity=a.intensity),o.name=r.createUniqueName(a.name||"light_"+e),i=Promise.resolve(o),r.cache.add(n,i),i}getDependency(e,r){if(e==="light")return this._loadLight(r)}createNodeAttachment(e){const r=this,n=this.parser,i=n.json.nodes[e],s=(i.extensions&&i.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(a){return n._getNodeRef(r.cache,s,a)})}}let jae=class{constructor(){this.name=Ft.KHR_MATERIALS_UNLIT}getMaterialType(){return Zi}extendParams(t,e,r){const n=[];t.color=new He(1,1,1),t.opacity=1;const i=e.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const s=i.baseColorFactor;t.color.setRGB(s[0],s[1],s[2],Bn),t.opacity=s[3]}i.baseColorTexture!==void 0&&n.push(r.assignTexture(t,"map",i.baseColorTexture,Ut))}return Promise.all(n)}},zae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name].emissiveStrength;return n!==void 0&&(e.emissiveIntensity=n),Promise.resolve()}},Gae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser,n=r.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=[],s=n.extensions[this.name];if(s.clearcoatFactor!==void 0&&(e.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&i.push(r.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&i.push(r.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(i.push(r.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){const a=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Ke(a,a)}return Promise.all(i)}},Vae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_DISPERSION}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name];return e.dispersion=n.dispersion!==void 0?n.dispersion:0,Promise.resolve()}},Wae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser,n=r.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=[],s=n.extensions[this.name];return s.iridescenceFactor!==void 0&&(e.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&i.push(r.assignTexture(e,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(e.iridescenceIOR=s.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&i.push(r.assignTexture(e,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}},Kae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser,n=r.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=[];e.sheenColor=new He(0,0,0),e.sheenRoughness=0,e.sheen=1;const s=n.extensions[this.name];if(s.sheenColorFactor!==void 0){const a=s.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],Bn)}return s.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&i.push(r.assignTexture(e,"sheenColorMap",s.sheenColorTexture,Ut)),s.sheenRoughnessTexture!==void 0&&i.push(r.assignTexture(e,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}},Yae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser,n=r.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=[],s=n.extensions[this.name];return s.transmissionFactor!==void 0&&(e.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&i.push(r.assignTexture(e,"transmissionMap",s.transmissionTexture)),Promise.all(i)}},Xae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser,n=r.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=[],s=n.extensions[this.name];e.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&i.push(r.assignTexture(e,"thicknessMap",s.thicknessTexture)),e.attenuationDistance=s.attenuationDistance||1/0;const a=s.attenuationColor||[1,1,1];return e.attenuationColor=new He().setRGB(a[0],a[1],a[2],Bn),Promise.all(i)}},Zae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name];return e.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}},Jae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser,n=r.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=[],s=n.extensions[this.name];e.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&i.push(r.assignTexture(e,"specularIntensityMap",s.specularTexture));const a=s.specularColorFactor||[1,1,1];return e.specularColor=new He().setRGB(a[0],a[1],a[2],Bn),s.specularColorTexture!==void 0&&i.push(r.assignTexture(e,"specularColorMap",s.specularColorTexture,Ut)),Promise.all(i)}},qae=class{constructor(t){this.parser=t,this.name=Ft.EXT_MATERIALS_BUMP}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser,n=r.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=[],s=n.extensions[this.name];return e.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&i.push(r.assignTexture(e,"bumpMap",s.bumpTexture)),Promise.all(i)}},$ae=class{constructor(t){this.parser=t,this.name=Ft.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const e=this.parser.json.materials[t];return!e.extensions||!e.extensions[this.name]?null:il}extendMaterialParams(t,e){const r=this.parser,n=r.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=[],s=n.extensions[this.name];return s.anisotropyStrength!==void 0&&(e.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(e.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&i.push(r.assignTexture(e,"anisotropyMap",s.anisotropyTexture)),Promise.all(i)}};class eoe{constructor(e){this.parser=e,this.name=Ft.KHR_TEXTURE_BASISU}loadTexture(e){const r=this.parser,n=r.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],a=r.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(e,s.source,a)}}class toe{constructor(e){this.parser=e,this.name=Ft.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const r=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[r])return null;const a=s.extensions[r],o=i.images[a.source];let l=n.textureLoader;if(o.uri){const A=n.options.manager.getHandler(o.uri);A!==null&&(l=A)}return this.detectSupport().then(function(A){if(A)return n.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){e(r.height===1)}})),this.isSupported}}class roe{constructor(e){this.parser=e,this.name=Ft.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const r=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[r])return null;const a=s.extensions[r],o=i.images[a.source];let l=n.textureLoader;if(o.uri){const A=n.options.manager.getHandler(o.uri);A!==null&&(l=A)}return this.detectSupport().then(function(A){if(A)return n.loadTextureImage(e,a.source,l);if(i.extensionsRequired&&i.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){e(r.height===1)}})),this.isSupported}}class noe{constructor(e){this.name=Ft.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const r=this.parser.json,n=r.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=i.byteOffset||0,A=i.byteLength||0,c=i.count,u=i.byteStride,h=new Uint8Array(o,l,A);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(c,u,h,i.mode,i.filter).then(function(d){return d.buffer}):a.ready.then(function(){const d=new ArrayBuffer(c*u);return a.decodeGltfBuffer(new Uint8Array(d),c,u,h,i.mode,i.filter),d})})}else return null}}let ioe=class{constructor(t){this.name=Ft.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,r=e.nodes[t];if(!r.extensions||!r.extensions[this.name]||r.mesh===void 0)return null;const n=e.meshes[r.mesh];for(const o of n.primitives)if(o.mode!==ta.TRIANGLES&&o.mode!==ta.TRIANGLE_STRIP&&o.mode!==ta.TRIANGLE_FAN&&o.mode!==void 0)return null;const i=r.extensions[this.name].attributes,s=[],a={};for(const o in i)s.push(this.parser.getDependency("accessor",i[o]).then(l=>(a[o]=l,a[o])));return s.length<1?null:(s.push(this.parser.createNodeMesh(t)),Promise.all(s).then(o=>{const l=o.pop(),A=l.isGroup?l.children:[l],c=o[0].count,u=[];for(const h of A){const d=new je,f=new Y,m=new et,g=new Y(1,1,1),p=new p_(h.geometry,h.material,c);for(let v=0;v<c;v++)a.TRANSLATION&&f.fromBufferAttribute(a.TRANSLATION,v),a.ROTATION&&m.fromBufferAttribute(a.ROTATION,v),a.SCALE&&g.fromBufferAttribute(a.SCALE,v),p.setMatrixAt(v,d.compose(f,m,g));for(const v in a)if(v==="_COLOR_0"){const y=a[v];p.instanceColor=new Gg(y.array,y.itemSize,y.normalized)}else v!=="TRANSLATION"&&v!=="ROTATION"&&v!=="SCALE"&&h.geometry.setAttribute(v,a[v]);Lt.prototype.copy.call(p,h),this.parser.assignFinalMaterial(p),u.push(p)}return l.isGroup?(l.clear(),l.add(...u),l):u[0]}))}};const X8="glTF",Np=12,EL={JSON:1313821514,BIN:5130562};class soe{constructor(e){this.name=Ft.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(e,0,Np),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==X8)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Np,s=new DataView(e,Np);let a=0;for(;a<i;){const o=s.getUint32(a,!0);a+=4;const l=s.getUint32(a,!0);if(a+=4,l===EL.JSON){const A=new Uint8Array(e,Np+a,o);this.content=n.decode(A)}else if(l===EL.BIN){const A=Np+a;this.body=e.slice(A,A+o)}a+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class aoe{constructor(e,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ft.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(e,r){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},A={};for(const c in a){const u=PC[c]||c.toLowerCase();o[u]=a[c]}for(const c in e.attributes){const u=PC[c]||c.toLowerCase();if(a[c]!==void 0){const h=n.accessors[e.attributes[c]],d=lf[h.componentType];A[u]=d.name,l[u]=h.normalized===!0}}return r.getDependency("bufferView",s).then(function(c){return new Promise(function(u,h){i.decodeDracoFile(c,function(d){for(const f in d.attributes){const m=d.attributes[f],g=l[f];g!==void 0&&(m.normalized=g)}u(d)},o,A,Bn,h)})})}}class ooe{constructor(){this.name=Ft.KHR_TEXTURE_TRANSFORM}extendTexture(e,r){return(r.texCoord===void 0||r.texCoord===e.channel)&&r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(e=e.clone(),r.texCoord!==void 0&&(e.channel=r.texCoord),r.offset!==void 0&&e.offset.fromArray(r.offset),r.rotation!==void 0&&(e.rotation=r.rotation),r.scale!==void 0&&e.repeat.fromArray(r.scale),e.needsUpdate=!0),e}}class loe{constructor(){this.name=Ft.KHR_MESH_QUANTIZATION}}class Z8 extends b0{constructor(e,r,n,i){super(e,r,n,i)}copySampleValue_(e){const r=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let a=0;a!==i;a++)r[a]=n[s+a];return r}interpolate_(e,r,n,i){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,A=o*3,c=i-r,u=(n-r)/c,h=u*u,d=h*u,f=e*A,m=f-A,g=-2*d+3*h,p=d-h,v=1-g,y=p-h+u;for(let _=0;_!==o;_++){const E=a[m+_+o],x=a[m+_+l]*c,B=a[f+_+o],M=a[f+_]*c;s[_]=v*E+y*x+g*B+p*M}return s}}const Aoe=new et;class coe extends Z8{interpolate_(e,r,n,i){const s=super.interpolate_(e,r,n,i);return Aoe.fromArray(s).normalize().toArray(s),s}}const ta={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},lf={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},BL={9728:Vn,9729:Un,9984:xI,9985:$m,9986:kd,9987:qa},ML={33071:Ss,33648:Qg,10497:Qs},tB={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},PC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},EA={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uoe={CUBICSPLINE:void 0,LINEAR:Lf,STEP:kf},rB={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function hoe(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Df({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ns})),t.DefaultMaterial}function Gc(t,e,r){for(const n in r.extensions)t[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=r.extensions[n])}function Il(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function doe(t,e,r){let n=!1,i=!1,s=!1;for(let A=0,c=e.length;A<c;A++){const u=e[A];if(u.POSITION!==void 0&&(n=!0),u.NORMAL!==void 0&&(i=!0),u.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(t);const a=[],o=[],l=[];for(let A=0,c=e.length;A<c;A++){const u=e[A];if(n){const h=u.POSITION!==void 0?r.getDependency("accessor",u.POSITION):t.attributes.position;a.push(h)}if(i){const h=u.NORMAL!==void 0?r.getDependency("accessor",u.NORMAL):t.attributes.normal;o.push(h)}if(s){const h=u.COLOR_0!==void 0?r.getDependency("accessor",u.COLOR_0):t.attributes.color;l.push(h)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(A){const c=A[0],u=A[1],h=A[2];return n&&(t.morphAttributes.position=c),i&&(t.morphAttributes.normal=u),s&&(t.morphAttributes.color=h),t.morphTargetsRelative=!0,t})}function foe(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let r=0,n=e.weights.length;r<n;r++)t.morphTargetInfluences[r]=e.weights[r];if(e.extras&&Array.isArray(e.extras.targetNames)){const r=e.extras.targetNames;if(t.morphTargetInfluences.length===r.length){t.morphTargetDictionary={};for(let n=0,i=r.length;n<i;n++)t.morphTargetDictionary[r[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function poe(t){let e;const r=t.extensions&&t.extensions[Ft.KHR_DRACO_MESH_COMPRESSION];if(r?e="draco:"+r.bufferView+":"+r.indices+":"+nB(r.attributes):e=t.indices+":"+nB(t.attributes)+":"+t.mode,t.targets!==void 0)for(let n=0,i=t.targets.length;n<i;n++)e+=":"+nB(t.targets[n]);return e}function nB(t){let e="";const r=Object.keys(t).sort();for(let n=0,i=r.length;n<i;n++)e+=r[n]+":"+t[r[n]]+";";return e}function OC(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function moe(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const goe=new je;class voe{constructor(e={},r={}){this.json=e,this.extensions={},this.plugins={},this.options=r,this.cache=new Qae,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=-1,s=!1,a=-1;if(typeof navigator<"u"){const o=navigator.userAgent;n=/^((?!chrome|android).)*safari/i.test(o)===!0;const l=o.match(/Version\/(\d+)/);i=n&&l?parseInt(l[1],10):-1,s=o.indexOf("Firefox")>-1,a=s?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||n&&i<17||s&&a<98?this.textureLoader=new Uc(this.options.manager):this.textureLoader=new cae(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new v_(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,r){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const o={scene:a[0][i.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:i.asset,parser:n,userData:{}};return Gc(s,o,i),Il(o,i),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(r)}_markDefs(){const e=this.json.nodes||[],r=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=r.length;i<s;i++){const a=r[i].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const a=e[i];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(n[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,r){r!==void 0&&(e.refs[r]===void 0&&(e.refs[r]=e.uses[r]=0),e.refs[r]++)}_getNodeRef(e,r,n){if(e.refs[r]<=1)return n;const i=n.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[A,c]of a.children.entries())s(c,o.children[A])};return s(n,i),i.name+="_instance_"+e.uses[r]++,i}_invokeOne(e){const r=Object.values(this.plugins);r.push(this);for(let n=0;n<r.length;n++){const i=e(r[n]);if(i)return i}return null}_invokeAll(e){const r=Object.values(this.plugins);r.unshift(this);const n=[];for(let i=0;i<r.length;i++){const s=e(r[i]);s&&n.push(s)}return n}getDependency(e,r){const n=e+":"+r;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(r);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(r)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(r)});break;case"accessor":i=this.loadAccessor(r);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(r)});break;case"buffer":i=this.loadBuffer(r);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(r)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(r)});break;case"skin":i=this.loadSkin(r);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(r)});break;case"camera":i=this.loadCamera(r);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,r)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let r=this.cache.get(e);if(!r){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];r=Promise.all(i.map(function(s,a){return n.getDependency(e,a)})),this.cache.add(e,r)}return r}loadBuffer(e){const r=this.json.buffers[e],n=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ft.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,a){n.load(of.resolveURL(r.uri,i.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(e){const r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(n){const i=r.byteLength||0,s=r.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const r=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const a=tB[i.type],o=lf[i.componentType],l=i.normalized===!0,A=new o(i.count*a);return Promise.resolve(new lt(A,a,l))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=tB[i.type],A=lf[i.componentType],c=A.BYTES_PER_ELEMENT,u=c*l,h=i.byteOffset||0,d=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,f=i.normalized===!0;let m,g;if(d&&d!==u){const p=Math.floor(h/d),v="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+p+":"+i.count;let y=r.cache.get(v);y||(m=new A(o,p*d,i.count*d/c),y=new mse(m,d/c),r.cache.add(v,y)),g=new DI(y,l,h%d/c,f)}else o===null?m=new A(i.count*l):m=new A(o,h,i.count*l),g=new lt(m,l,f);if(i.sparse!==void 0){const p=tB.SCALAR,v=lf[i.sparse.indices.componentType],y=i.sparse.indices.byteOffset||0,_=i.sparse.values.byteOffset||0,E=new v(a[1],y,i.sparse.count*p),x=new A(a[2],_,i.sparse.count*l);o!==null&&(g=new lt(g.array.slice(),g.itemSize,g.normalized)),g.normalized=!1;for(let B=0,M=E.length;B<M;B++){const R=E[B];if(g.setX(R,x[B*l]),l>=2&&g.setY(R,x[B*l+1]),l>=3&&g.setZ(R,x[B*l+2]),l>=4&&g.setW(R,x[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}g.normalized=f}return g})}loadTexture(e){const r=this.json,n=this.options,i=r.textures[e].source,s=r.images[i];let a=this.textureLoader;if(s.uri){const o=n.manager.getHandler(s.uri);o!==null&&(a=o)}return this.loadTextureImage(e,i,a)}loadTextureImage(e,r,n){const i=this,s=this.json,a=s.textures[e],o=s.images[r],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const A=this.loadImageSource(r,n).then(function(c){c.flipY=!1,c.name=a.name||o.name||"",c.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(c.name=o.uri);const u=(s.samplers||{})[a.sampler]||{};return c.magFilter=BL[u.magFilter]||Un,c.minFilter=BL[u.minFilter]||qa,c.wrapS=ML[u.wrapS]||Qs,c.wrapT=ML[u.wrapT]||Qs,i.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=A,A}loadImageSource(e,r){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const a=i.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",A=!1;if(a.bufferView!==void 0)l=n.getDependency("bufferView",a.bufferView).then(function(u){A=!0;const h=new Blob([u],{type:a.mimeType});return l=o.createObjectURL(h),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(u){return new Promise(function(h,d){let f=h;r.isImageBitmapLoader===!0&&(f=function(m){const g=new Sr(m);g.needsUpdate=!0,h(g)}),r.load(of.resolveURL(u,s.path),f,void 0,d)})}).then(function(u){return A===!0&&o.revokeObjectURL(l),Il(u,a),u.userData.mimeType=a.mimeType||moe(a.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=c,c}assignTexture(e,r,n,i){const s=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(a=a.clone(),a.channel=n.texCoord),s.extensions[Ft.KHR_TEXTURE_TRANSFORM]){const o=n.extensions!==void 0?n.extensions[Ft.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[Ft.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return i!==void 0&&(a.colorSpace=i),e[r]=a,a})}assignFinalMaterial(e){const r=e.geometry;let n=e.material;const i=r.attributes.tangent===void 0,s=r.attributes.color!==void 0,a=r.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new k8,is.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(o,l)),n=l}else if(e.isLine){const o="LineBasicMaterial:"+n.uuid;let l=this.cache.get(o);l||(l=new lA,is.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(o,l)),n=l}if(i||s||a){let o="ClonedMaterial:"+n.uuid+":";i&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=n.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),i&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(n))),n=l}e.material=n}getMaterialType(){return Df}loadMaterial(e){const r=this,n=this.json,i=this.extensions,s=n.materials[e];let a;const o={},l=s.extensions||{},A=[];if(l[Ft.KHR_MATERIALS_UNLIT]){const u=i[Ft.KHR_MATERIALS_UNLIT];a=u.getMaterialType(),A.push(u.extendParams(o,s,r))}else{const u=s.pbrMetallicRoughness||{};if(o.color=new He(1,1,1),o.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;o.color.setRGB(h[0],h[1],h[2],Bn),o.opacity=h[3]}u.baseColorTexture!==void 0&&A.push(r.assignTexture(o,"map",u.baseColorTexture,Ut)),o.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,o.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(A.push(r.assignTexture(o,"metalnessMap",u.metallicRoughnessTexture)),A.push(r.assignTexture(o,"roughnessMap",u.metallicRoughnessTexture))),a=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),A.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=pi);const c=s.alphaMode||rB.OPAQUE;if(c===rB.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===rB.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Zi&&(A.push(r.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Ke(1,1),s.normalTexture.scale!==void 0)){const u=s.normalTexture.scale;o.normalScale.set(u,u)}if(s.occlusionTexture!==void 0&&a!==Zi&&(A.push(r.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Zi){const u=s.emissiveFactor;o.emissive=new He().setRGB(u[0],u[1],u[2],Bn)}return s.emissiveTexture!==void 0&&a!==Zi&&A.push(r.assignTexture(o,"emissiveMap",s.emissiveTexture,Ut)),Promise.all(A).then(function(){const u=new a(o);return s.name&&(u.name=s.name),Il(u,s),r.associations.set(u,{materials:e}),s.extensions&&Gc(i,u,s),u})}createUniqueName(e){const r=Tt.sanitizeNodeName(e||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(e){const r=this,n=this.extensions,i=this.primitiveCache;function s(o){return n[Ft.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,r).then(function(l){return TL(l,o,r)})}const a=[];for(let o=0,l=e.length;o<l;o++){const A=e[o],c=poe(A),u=i[c];if(u)a.push(u.promise);else{let h;A.extensions&&A.extensions[Ft.KHR_DRACO_MESH_COMPRESSION]?h=s(A):h=TL(new $t,A,r),i[c]={primitive:A,promise:h},a.push(h)}}return Promise.all(a)}loadMesh(e){const r=this,n=this.json,i=this.extensions,s=n.meshes[e],a=s.primitives,o=[];for(let l=0,A=a.length;l<A;l++){const c=a[l].material===void 0?hoe(this.cache):this.getDependency("material",a[l].material);o.push(c)}return o.push(r.loadGeometries(a)),Promise.all(o).then(function(l){const A=l.slice(0,l.length-1),c=l[l.length-1],u=[];for(let d=0,f=c.length;d<f;d++){const m=c[d],g=a[d];let p;const v=A[d];if(g.mode===ta.TRIANGLES||g.mode===ta.TRIANGLE_STRIP||g.mode===ta.TRIANGLE_FAN||g.mode===void 0)p=s.isSkinnedMesh===!0?new no(m,v):new Ar(m,v),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),g.mode===ta.TRIANGLE_STRIP?p.geometry=xL(p.geometry,w8):g.mode===ta.TRIANGLE_FAN&&(p.geometry=xL(p.geometry,CC));else if(g.mode===ta.LINES)p=new w0(m,v);else if(g.mode===ta.LINE_STRIP)p=new Xf(m,v);else if(g.mode===ta.LINE_LOOP)p=new Cse(m,v);else if(g.mode===ta.POINTS)p=new Sse(m,v);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(p.geometry.morphAttributes).length>0&&foe(p,s),p.name=r.createUniqueName(s.name||"mesh_"+e),Il(p,s),g.extensions&&Gc(i,p,g),r.assignFinalMaterial(p),u.push(p)}for(let d=0,f=u.length;d<f;d++)r.associations.set(u[d],{meshes:e,primitives:d});if(u.length===1)return s.extensions&&Gc(i,u[0],s),u[0];const h=new qn;s.extensions&&Gc(i,h,s),r.associations.set(h,{meshes:e});for(let d=0,f=u.length;d<f;d++)h.add(u[d]);return h})}loadCamera(e){let r;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?r=new In(Et.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(r=new v0(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(r.name=this.createUniqueName(n.name)),Il(r,n),Promise.resolve(r)}loadSkin(e){const r=this.json.skins[e],n=[];for(let i=0,s=r.joints.length;i<s;i++)n.push(this._loadNodeShallow(r.joints[i]));return r.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",r.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),a=i,o=[],l=[];for(let A=0,c=a.length;A<c;A++){const u=a[A];if(u){o.push(u);const h=new je;s!==null&&h.fromArray(s.array,A*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[A])}return new Rc(o,l)})}loadAnimation(e){const r=this.json,n=this,i=r.animations[e],s=i.name?i.name:"animation_"+e,a=[],o=[],l=[],A=[],c=[];for(let u=0,h=i.channels.length;u<h;u++){const d=i.channels[u],f=i.samplers[d.sampler],m=d.target,g=m.node,p=i.parameters!==void 0?i.parameters[f.input]:f.input,v=i.parameters!==void 0?i.parameters[f.output]:f.output;m.node!==void 0&&(a.push(this.getDependency("node",g)),o.push(this.getDependency("accessor",p)),l.push(this.getDependency("accessor",v)),A.push(f),c.push(m))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(A),Promise.all(c)]).then(function(u){const h=u[0],d=u[1],f=u[2],m=u[3],g=u[4],p=[];for(let v=0,y=h.length;v<y;v++){const _=h[v],E=d[v],x=f[v],B=m[v],M=g[v];if(_===void 0)continue;_.updateMatrix&&_.updateMatrix();const R=n._createAnimationTracks(_,E,x,B,M);if(R)for(let I=0;I<R.length;I++)p.push(R[I])}return new Ou(s,void 0,p)})}createNodeMesh(e){const r=this.json,n=this,i=r.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const a=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,A=i.weights.length;l<A;l++)o.morphTargetInfluences[l]=i.weights[l]}),a})}loadNode(e){const r=this.json,n=this,i=r.nodes[e],s=n._loadNodeShallow(e),a=[],o=i.children||[];for(let A=0,c=o.length;A<c;A++)a.push(n.getDependency("node",o[A]));const l=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(a),l]).then(function(A){const c=A[0],u=A[1],h=A[2];h!==null&&c.traverse(function(d){d.isSkinnedMesh&&d.bind(h,goe)});for(let d=0,f=u.length;d<f;d++)c.add(u[d]);return c})}_loadNodeShallow(e){const r=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=r.nodes[e],a=s.name?i.createUniqueName(s.name):"",o=[],l=i._invokeOne(function(A){return A.createNodeMesh&&A.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(i.getDependency("camera",s.camera).then(function(A){return i._getNodeRef(i.cameraCache,s.camera,A)})),i._invokeAll(function(A){return A.createNodeAttachment&&A.createNodeAttachment(e)}).forEach(function(A){o.push(A)}),this.nodeCache[e]=Promise.all(o).then(function(A){let c;if(s.isBone===!0?c=new N1:A.length>1?c=new qn:A.length===1?c=A[0]:c=new Lt,c!==A[0])for(let u=0,h=A.length;u<h;u++)c.add(A[u]);if(s.name&&(c.userData.name=s.name,c.name=a),Il(c,s),s.extensions&&Gc(n,c,s),s.matrix!==void 0){const u=new je;u.fromArray(s.matrix),c.applyMatrix4(u)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return i.associations.has(c)||i.associations.set(c,{}),i.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const r=this.extensions,n=this.json.scenes[e],i=this,s=new qn;n.name&&(s.name=i.createUniqueName(n.name)),Il(s,n),n.extensions&&Gc(r,s,n);const a=n.nodes||[],o=[];for(let l=0,A=a.length;l<A;l++)o.push(i.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let c=0,u=l.length;c<u;c++)s.add(l[c]);const A=c=>{const u=new Map;for(const[h,d]of i.associations)(h instanceof is||h instanceof Sr)&&u.set(h,d);return c.traverse(h=>{const d=i.associations.get(h);d!=null&&u.set(h,d)}),u};return i.associations=A(s),s})}_createAnimationTracks(e,r,n,i,s){const a=[],o=e.name?e.name:e.uuid,l=[];EA[s.path]===EA.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(o);let A;switch(EA[s.path]){case EA.weights:A=Pu;break;case EA.rotation:A=el;break;case EA.position:case EA.scale:A=rA;break;default:switch(n.itemSize){case 1:A=Pu;break;case 2:case 3:default:A=rA;break}break}const c=i.interpolation!==void 0?uoe[i.interpolation]:Lf,u=this._getArrayFromAccessor(n);for(let h=0,d=l.length;h<d;h++){const f=new A(l[h]+"."+EA[s.path],r.array,u,c);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(f),a.push(f)}return a}_getArrayFromAccessor(e){let r=e.array;if(e.normalized){const n=OC(r.constructor),i=new Float32Array(r.length);for(let s=0,a=r.length;s<a;s++)i[s]=r[s]*n;r=i}return r}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(r){const n=this instanceof el?coe:Z8;return new n(this.times,this.values,this.getValueSize()/3,r)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function yoe(t,e,r){const n=e.attributes,i=new Dr;if(n.POSITION!==void 0){const o=r.json.accessors[n.POSITION],l=o.min,A=o.max;if(l!==void 0&&A!==void 0){if(i.set(new Y(l[0],l[1],l[2]),new Y(A[0],A[1],A[2])),o.normalized){const c=OC(lf[o.componentType]);i.min.multiplyScalar(c),i.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new Y,l=new Y;for(let A=0,c=s.length;A<c;A++){const u=s[A];if(u.POSITION!==void 0){const h=r.json.accessors[u.POSITION],d=h.min,f=h.max;if(d!==void 0&&f!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(f[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(f[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(f[2]))),h.normalized){const m=OC(lf[h.componentType]);l.multiplyScalar(m)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(o)}t.boundingBox=i;const a=new wi;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=a}function TL(t,e,r){const n=e.attributes,i=[];function s(a,o){return r.getDependency("accessor",a).then(function(l){t.setAttribute(o,l)})}for(const a in n){const o=PC[a]||a.toLowerCase();o in t.attributes||i.push(s(n[a],o))}if(e.indices!==void 0&&!t.index){const a=r.getDependency("accessor",e.indices).then(function(o){t.setIndex(o)});i.push(a)}return xt.workingColorSpace!==Bn&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${xt.workingColorSpace}" not supported.`),Il(t,e),yoe(t,e,r),Promise.all(i).then(function(){return e.targets!==void 0?doe(t,e.targets,r):t})}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var aa=Uint8Array,Nd=Uint16Array,woe=Int32Array,J8=new aa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),q8=new aa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),boe=new aa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$8=function(t,e){for(var r=new Nd(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new woe(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)i[s]=s-r[n]<<5|n;return{b:r,r:i}},ej=$8(J8,2),tj=ej.b,_oe=ej.r;tj[28]=258,_oe[258]=28;var xoe=$8(q8,0),Eoe=xoe.b,DC=new Nd(32768);for(var Tr=0;Tr<32768;++Tr){var BA=(Tr&43690)>>1|(Tr&21845)<<1;BA=(BA&52428)>>2|(BA&13107)<<2,BA=(BA&61680)>>4|(BA&3855)<<4,DC[Tr]=((BA&65280)>>8|(BA&255)<<8)>>1}var rg=function(t,e,r){for(var n=t.length,i=0,s=new Nd(e);i<n;++i)t[i]&&++s[t[i]-1];var a=new Nd(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(r){o=new Nd(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var A=i<<4|t[i],c=e-t[i],u=a[t[i]-1]++<<c,h=u|(1<<c)-1;u<=h;++u)o[DC[u]>>l]=A}else for(o=new Nd(n),i=0;i<n;++i)t[i]&&(o[i]=DC[a[t[i]-1]++]>>15-t[i]);return o},_0=new aa(288);for(var Tr=0;Tr<144;++Tr)_0[Tr]=8;for(var Tr=144;Tr<256;++Tr)_0[Tr]=9;for(var Tr=256;Tr<280;++Tr)_0[Tr]=7;for(var Tr=280;Tr<288;++Tr)_0[Tr]=8;var rj=new aa(32);for(var Tr=0;Tr<32;++Tr)rj[Tr]=5;var Boe=rg(_0,9,1),Moe=rg(rj,5,1),iB=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},Pa=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},sB=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},Toe=function(t){return(t+7)/8|0},Coe=function(t,e,r){return(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length),new aa(t.subarray(e,r))},Soe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Va=function(t,e,r){var n=new Error(e||Soe[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Va),!r)throw n;return n},Ioe=function(t,e,r,n){var i=t.length,s=n?n.length:0;if(!i||e.f&&!e.l)return r||new aa(0);var a=!r,o=a||e.i!=2,l=e.i;a&&(r=new aa(i*3));var A=function(de){var Te=r.length;if(de>Te){var re=new aa(Math.max(Te*2,de));re.set(r),r=re}},c=e.f||0,u=e.p||0,h=e.b||0,d=e.l,f=e.d,m=e.m,g=e.n,p=i*8;do{if(!d){c=Pa(t,u,1);var v=Pa(t,u+1,3);if(u+=3,v)if(v==1)d=Boe,f=Moe,m=9,g=5;else if(v==2){var y=Pa(t,u,31)+257,_=Pa(t,u+10,15)+4,E=y+Pa(t,u+5,31)+1;u+=14;for(var x=new aa(E),B=new aa(19),M=0;M<_;++M)B[boe[M]]=Pa(t,u+M*3,7);u+=_*3;for(var R=iB(B),I=(1<<R)-1,L=rg(B,R,1),M=0;M<E;){var D=L[Pa(t,u,I)];u+=D&15;var w=D>>4;if(w<16)x[M++]=w;else{var b=0,S=0;for(w==16?(S=3+Pa(t,u,3),u+=2,b=x[M-1]):w==17?(S=3+Pa(t,u,7),u+=3):w==18&&(S=11+Pa(t,u,127),u+=7);S--;)x[M++]=b}}var F=x.subarray(0,y),k=x.subarray(y);m=iB(F),g=iB(k),d=rg(F,m,1),f=rg(k,g,1)}else Va(1);else{var w=Toe(u)+4,Q=t[w-4]|t[w-3]<<8,z=w+Q;if(z>i){l&&Va(0);break}o&&A(h+Q),r.set(t.subarray(w,z),h),e.b=h+=Q,e.p=u=z*8,e.f=c;continue}if(u>p){l&&Va(0);break}}o&&A(h+131072);for(var j=(1<<m)-1,T=(1<<g)-1,H=u;;H=u){var b=d[sB(t,u)&j],me=b>>4;if(u+=b&15,u>p){l&&Va(0);break}if(b||Va(2),me<256)r[h++]=me;else if(me==256){H=u,d=null;break}else{var ee=me-254;if(me>264){var M=me-257,U=J8[M];ee=Pa(t,u,(1<<U)-1)+tj[M],u+=U}var se=f[sB(t,u)&T],le=se>>4;se||Va(3),u+=se&15;var k=Eoe[le];if(le>3){var U=q8[le];k+=sB(t,u)&(1<<U)-1,u+=U}if(u>p){l&&Va(0);break}o&&A(h+131072);var Ae=h+ee;if(h<k){var ge=s-k,ne=Math.min(k,Ae);for(ge+h<0&&Va(3);h<ne;++h)r[h]=n[ge+h]}for(;h<Ae;++h)r[h]=r[h-k]}}e.l=d,e.p=H,e.b=h,e.f=c,d&&(c=1,e.m=m,e.d=f,e.n=g)}while(!c);return h!=r.length&&a?Coe(r,0,h):r.subarray(0,h)},Roe=new aa(0),Uoe=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Va(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&Va(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Foe(t,e){return Ioe(t.subarray(Uoe(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var koe=typeof TextDecoder<"u"&&new TextDecoder,Loe=0;try{koe.decode(Roe,{stream:!0}),Loe=1}catch{}function nj(t,e,r){const n=r.length-t-1;if(e>=r[n])return n-1;if(e<=r[t])return t;let i=t,s=n,a=Math.floor((i+s)/2);for(;e<r[a]||e>=r[a+1];)e<r[a]?s=a:i=a,a=Math.floor((i+s)/2);return a}function Poe(t,e,r,n){const i=[],s=[],a=[];i[0]=1;for(let o=1;o<=r;++o){s[o]=e-n[t+1-o],a[o]=n[t+o]-e;let l=0;for(let A=0;A<o;++A){const c=a[A+1],u=s[o-A],h=i[A]/(c+u);i[A]=l+c*h,l=u*h}i[o]=l}return i}function Ooe(t,e,r,n){const i=nj(t,n,e),s=Poe(i,n,t,e),a=new kt(0,0,0,0);for(let o=0;o<=t;++o){const l=r[i-t+o],A=s[o],c=l.w*A;a.x+=l.x*c,a.y+=l.y*c,a.z+=l.z*c,a.w+=l.w*A}return a}function Doe(t,e,r,n,i){const s=[];for(let u=0;u<=r;++u)s[u]=0;const a=[];for(let u=0;u<=n;++u)a[u]=s.slice(0);const o=[];for(let u=0;u<=r;++u)o[u]=s.slice(0);o[0][0]=1;const l=s.slice(0),A=s.slice(0);for(let u=1;u<=r;++u){l[u]=e-i[t+1-u],A[u]=i[t+u]-e;let h=0;for(let d=0;d<u;++d){const f=A[d+1],m=l[u-d];o[u][d]=f+m;const g=o[d][u-1]/o[u][d];o[d][u]=h+f*g,h=m*g}o[u][u]=h}for(let u=0;u<=r;++u)a[0][u]=o[u][r];for(let u=0;u<=r;++u){let h=0,d=1;const f=[];for(let m=0;m<=r;++m)f[m]=s.slice(0);f[0][0]=1;for(let m=1;m<=n;++m){let g=0;const p=u-m,v=r-m;u>=m&&(f[d][0]=f[h][0]/o[v+1][p],g=f[d][0]*o[p][v]);const y=p>=-1?1:-p,_=u-1<=v?m-1:r-u;for(let x=y;x<=_;++x)f[d][x]=(f[h][x]-f[h][x-1])/o[v+1][p+x],g+=f[d][x]*o[p+x][v];u<=v&&(f[d][m]=-f[h][m-1]/o[v+1][u],g+=f[d][m]*o[u][v]),a[m][u]=g;const E=h;h=d,d=E}}let c=r;for(let u=1;u<=n;++u){for(let h=0;h<=r;++h)a[u][h]*=c;c*=r-u}return a}function Noe(t,e,r,n,i){const s=i<t?i:t,a=[],o=nj(t,n,e),l=Doe(o,n,t,s,e),A=[];for(let c=0;c<r.length;++c){const u=r[c].clone(),h=u.w;u.x*=h,u.y*=h,u.z*=h,A[c]=u}for(let c=0;c<=s;++c){const u=A[o-t].clone().multiplyScalar(l[c][0]);for(let h=1;h<=t;++h)u.add(A[o-t+h].clone().multiplyScalar(l[c][h]));a[c]=u}for(let c=s+1;c<=i+1;++c)a[c]=new kt(0,0,0);return a}function Qoe(t,e){let r=1;for(let i=2;i<=t;++i)r*=i;let n=1;for(let i=2;i<=e;++i)n*=i;for(let i=2;i<=t-e;++i)n*=i;return r/n}function Hoe(t){const e=t.length,r=[],n=[];for(let s=0;s<e;++s){const a=t[s];r[s]=new Y(a.x,a.y,a.z),n[s]=a.w}const i=[];for(let s=0;s<e;++s){const a=r[s].clone();for(let o=1;o<=s;++o)a.sub(i[s-o].clone().multiplyScalar(Qoe(s,o)*n[o]));i[s]=a.divideScalar(n[0])}return i}function joe(t,e,r,n,i){const s=Noe(t,e,r,n,i);return Hoe(s)}class zoe extends Rse{constructor(e,r,n,i,s){super(),this.degree=e,this.knots=r,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let a=0;a<n.length;++a){const o=n[a];this.controlPoints[a]=new kt(o.x,o.y,o.z,o.w)}}getPoint(e,r=new Y){const n=r,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Ooe(this.degree,this.knots,this.controlPoints,i);return s.w!==1&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,r=new Y){const n=r,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=joe(this.degree,this.knots,this.controlPoints,i,1);return n.copy(s[1]).normalize(),n}}let Mt,An,Ci;class Goe extends tl{constructor(e){super(e)}load(e,r,n,i){const s=this,a=s.path===""?of.extractUrlBase(e):s.path,o=new v_(this.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{r(s.parse(l,a))}catch(A){i?i(A):console.error(A),s.manager.itemError(e)}},n,i)}parse(e,r){if(Zoe(e))Mt=new Xoe().parse(e);else{const i=aj(e);if(!Joe(i))throw new Error("THREE.FBXLoader: Unknown format.");if(SL(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+SL(i));Mt=new Yoe().parse(i)}const n=new Uc(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin);return new Voe(n,this.manager).parse(Mt)}}class Voe{constructor(e,r){this.textureLoader=e,this.manager=r}parse(){An=this.parseConnections();const e=this.parseImages(),r=this.parseTextures(e),n=this.parseMaterials(r),i=this.parseDeformers(),s=new Woe().parse(i);return this.parseScene(i,s,n),Ci}parseConnections(){const e=new Map;return"Connections"in Mt&&Mt.Connections.connections.forEach(function(r){const n=r[0],i=r[1],s=r[2];e.has(n)||e.set(n,{parents:[],children:[]});const a={ID:i,relationship:s};e.get(n).parents.push(a),e.has(i)||e.set(i,{parents:[],children:[]});const o={ID:n,relationship:s};e.get(i).children.push(o)}),e}parseImages(){const e={},r={};if("Video"in Mt.Objects){const n=Mt.Objects.Video;for(const i in n){const s=n[i],a=parseInt(i);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const o=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(o||l){const A=this.parseImage(n[i]);r[s.RelativeFilename||s.Filename]=A}}}}for(const n in e){const i=e[n];r[i]!==void 0?e[n]=r[i]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const r=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof r=="string")return"data:"+s+";base64,"+r;{const a=new Uint8Array(r);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const r=new Map;if("Texture"in Mt.Objects){const n=Mt.Objects.Texture;for(const i in n){const s=this.parseTexture(n[i],e);r.set(parseInt(i),s)}}return r}parseTexture(e,r){const n=this.loadTexture(e,r);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,a=i!==void 0?i.value:0,o=s!==void 0?s.value:0;if(n.wrapS=a===0?Qs:Ss,n.wrapT=o===0?Qs:Ss,"Scaling"in e){const l=e.Scaling.value;n.repeat.x=l[0],n.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;n.offset.x=l[0],n.offset.y=l[1]}return n}loadTexture(e,r){const n=new Set(["tga","tif","tiff","exr","dds","hdr","ktx2"]),i=e.FileName.split(".").pop().toLowerCase(),s=n.has(i)?this.manager.getHandler(`.${i}`):this.textureLoader;if(!s)return console.warn(`FBXLoader: ${i.toUpperCase()} loader not found, creating placeholder texture for`,e.RelativeFilename),new Sr;const a=s.path;a||s.setPath(this.textureLoader.path);const o=An.get(e.id).children;let l;o!==void 0&&o.length>0&&r[o[0].ID]!==void 0&&(l=r[o[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&s.setPath(void 0));const A=s.load(l);return s.setPath(a),A}parseMaterials(e){const r=new Map;if("Material"in Mt.Objects){const n=Mt.Objects.Material;for(const i in n){const s=this.parseMaterial(n[i],e);s!==null&&r.set(parseInt(i),s)}}return r}parseMaterial(e,r){const n=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!An.has(n))return null;const a=this.parseParameters(e,r,n);let o;switch(s.toLowerCase()){case"phong":o=new JE;break;case"lambert":o=new Zse;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new JE;break}return o.setValues(a),o.name=i,o}parseParameters(e,r,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=xt.toWorkingColorSpace(new He().fromArray(e.Diffuse.value),Ut):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=xt.toWorkingColorSpace(new He().fromArray(e.DiffuseColor.value),Ut)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=xt.toWorkingColorSpace(new He().fromArray(e.Emissive.value),Ut):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=xt.toWorkingColorSpace(new He().fromArray(e.EmissiveColor.value),Ut)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=xt.toWorkingColorSpace(new He().fromArray(e.Specular.value),Ut):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=xt.toWorkingColorSpace(new He().fromArray(e.SpecularColor.value),Ut));const s=this;return An.get(n).children.forEach(function(a){const o=a.relationship;switch(o){case"Bump":i.bumpMap=s.getTexture(r,a.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(r,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(r,a.ID),i.map!==void 0&&(i.map.colorSpace=Ut);break;case"DisplacementColor":i.displacementMap=s.getTexture(r,a.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(r,a.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=Ut);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(r,a.ID);break;case"ReflectionColor":i.envMap=s.getTexture(r,a.ID),i.envMap!==void 0&&(i.envMap.mapping=Ng,i.envMap.colorSpace=Ut);break;case"SpecularColor":i.specularMap=s.getTexture(r,a.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=Ut);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(r,a.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),i}getTexture(e,r){return"LayeredTexture"in Mt.Objects&&r in Mt.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=An.get(r).children[0].ID),e.get(r)}parseDeformers(){const e={},r={};if("Deformer"in Mt.Objects){const n=Mt.Objects.Deformer;for(const i in n){const s=n[i],a=An.get(parseInt(i));if(s.attrType==="Skin"){const o=this.parseSkeleton(a,n);o.ID=i,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[i]=o}else if(s.attrType==="BlendShape"){const o={id:i};o.rawTargets=this.parseMorphTargets(a,n),o.id=i,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[i]=o}}}return{skeletons:e,morphTargets:r}}parseSkeleton(e,r){const n=[];return e.children.forEach(function(i){const s=r[i.ID];if(s.attrType!=="Cluster")return;const a={ID:i.ID,indices:[],weights:[],transformLink:new je().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),n.push(a)}),{rawBones:n,bones:[]}}parseMorphTargets(e,r){const n=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],a=r[s.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;o.geoID=An.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,n.push(o)}return n}parseScene(e,r,n){Ci=new qn;const i=this.parseModels(e.skeletons,r,n),s=Mt.Objects.Model,a=this;i.forEach(function(l){const A=s[l.ID];a.setLookAtProperties(l,A),An.get(l.ID).parents.forEach(function(c){const u=i.get(c.ID);u!==void 0&&u.add(l)}),l.parent===null&&Ci.add(l)}),this.bindSkeleton(e.skeletons,r,i),this.addGlobalSceneSettings(),Ci.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const A=sj(l.userData.transformData);l.applyMatrix4(A),l.updateWorldMatrix()}});const o=new Koe().parse();Ci.children.length===1&&Ci.children[0].isGroup&&(Ci.children[0].animations=o,Ci=Ci.children[0]),Ci.animations=o}parseModels(e,r,n){const i=new Map,s=Mt.Objects.Model;for(const a in s){const o=parseInt(a),l=s[a],A=An.get(o);let c=this.buildSkeleton(A,e,o,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(A);break;case"Light":c=this.createLight(A);break;case"Mesh":c=this.createMesh(A,r,n);break;case"NurbsCurve":c=this.createCurve(A,r);break;case"LimbNode":case"Root":c=new N1;break;case"Null":default:c=new qn;break}c.name=l.attrName?Tt.sanitizeNodeName(l.attrName):"",c.userData.originalName=l.attrName,c.ID=o}this.getTransformData(c,l),i.set(o,c)}return i}buildSkeleton(e,r,n,i){let s=null;return e.parents.forEach(function(a){for(const o in r){const l=r[o];l.rawBones.forEach(function(A,c){if(A.ID===a.ID){const u=s;s=new N1,s.matrixWorld.copy(A.transformLink),s.name=i?Tt.sanitizeNodeName(i):"",s.userData.originalName=i,s.ID=n,l.bones[c]=s,u!==null&&s.add(u)}})}}),s}createCamera(e){let r,n;if(e.children.forEach(function(i){const s=Mt.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)r=new Lt;else{let i=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(i=1);let s=1;n.NearPlane!==void 0&&(s=n.NearPlane.value/1e3);let a=1e3;n.FarPlane!==void 0&&(a=n.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(o=n.AspectWidth.value,l=n.AspectHeight.value);const A=o/l;let c=45;n.FieldOfView!==void 0&&(c=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(i){case 0:r=new In(c,A,s,a),u!==null&&r.setFocalLength(u);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),r=new Lt;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),r=new Lt;break}}return r}createLight(e){let r,n;if(e.children.forEach(function(i){const s=Mt.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)r=new Lt;else{let i;n.LightType===void 0?i=0:i=n.LightType.value;let s=16777215;n.Color!==void 0&&(s=xt.toWorkingColorSpace(new He().fromArray(n.Color.value),Ut));let a=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(a=0);let o=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?o=0:o=n.FarAttenuationEnd.value);const l=1;switch(i){case 0:r=new kC(s,a,o,l);break;case 1:r=new jI(s,a);break;case 2:let A=Math.PI/3;n.InnerAngle!==void 0&&(A=Et.degToRad(n.InnerAngle.value));let c=0;n.OuterAngle!==void 0&&(c=Et.degToRad(n.OuterAngle.value),c=Math.max(c,1)),r=new z8(s,a,o,A,c,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),r=new kC(s,a);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(r.castShadow=!0)}return r}createMesh(e,r,n){let i,s=null,a=null;const o=[];return e.children.forEach(function(l){r.has(l.ID)&&(s=r.get(l.ID)),n.has(l.ID)&&o.push(n.get(l.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new JE({name:tl.DEFAULT_MATERIAL_NAME,color:13421772}),o.push(a)),"color"in s.attributes&&o.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(i=new no(s,a),i.normalizeSkinWeights()):i=new Ar(s,a),i}createCurve(e,r){const n=e.children.reduce(function(s,a){return r.has(a.ID)&&(s=r.get(a.ID)),s},null),i=new lA({name:tl.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new Xf(n,i)}getTransformData(e,r){const n={};"InheritType"in r&&(n.inheritType=parseInt(r.InheritType.value)),"RotationOrder"in r?n.eulerOrder=Yg(r.RotationOrder.value):n.eulerOrder=Yg(0),"Lcl_Translation"in r&&(n.translation=r.Lcl_Translation.value),"PreRotation"in r&&(n.preRotation=r.PreRotation.value),"Lcl_Rotation"in r&&(n.rotation=r.Lcl_Rotation.value),"PostRotation"in r&&(n.postRotation=r.PostRotation.value),"Lcl_Scaling"in r&&(n.scale=r.Lcl_Scaling.value),"ScalingOffset"in r&&(n.scalingOffset=r.ScalingOffset.value),"ScalingPivot"in r&&(n.scalingPivot=r.ScalingPivot.value),"RotationOffset"in r&&(n.rotationOffset=r.RotationOffset.value),"RotationPivot"in r&&(n.rotationPivot=r.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,r){"LookAtProperty"in r&&An.get(e.ID).children.forEach(function(n){if(n.relationship==="LookAtProperty"){const i=Mt.Objects.Model[n.ID];if("Lcl_Translation"in i){const s=i.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),Ci.add(e.target)):e.lookAt(new Y().fromArray(s))}}})}bindSkeleton(e,r,n){const i=this.parsePoseNodes();for(const s in e){const a=e[s];An.get(parseInt(a.ID)).parents.forEach(function(o){if(r.has(o.ID)){const l=o.ID;An.get(l).parents.forEach(function(A){n.has(A.ID)&&n.get(A.ID).bind(new Rc(a.bones),i[A.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Mt.Objects){const r=Mt.Objects.Pose;for(const n in r)if(r[n].attrType==="BindPose"&&r[n].NbPoseNodes>0){const i=r[n].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new je().fromArray(s.Matrix.a)}):e[i.Node]=new je().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in Mt){if("AmbientColor"in Mt.GlobalSettings){const e=Mt.GlobalSettings.AmbientColor.value,r=e[0],n=e[1],i=e[2];if(r!==0||n!==0||i!==0){const s=new He().setRGB(r,n,i,Ut);Ci.add(new G8(s,1))}}"UnitScaleFactor"in Mt.GlobalSettings&&(Ci.userData.unitScaleFactor=Mt.GlobalSettings.UnitScaleFactor.value)}}}class Woe{constructor(){this.negativeMaterialIndices=!1}parse(e){const r=new Map;if("Geometry"in Mt.Objects){const n=Mt.Objects.Geometry;for(const i in n){const s=An.get(parseInt(i)),a=this.parseGeometry(s,n[i],e);r.set(parseInt(i),a)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),r}parseGeometry(e,r,n){switch(r.attrType){case"Mesh":return this.parseMeshGeometry(e,r,n);case"NurbsCurve":return this.parseNurbsGeometry(r)}}parseMeshGeometry(e,r,n){const i=n.skeletons,s=[],a=e.parents.map(function(u){return Mt.Objects.Model[u.ID]});if(a.length===0)return;const o=e.children.reduce(function(u,h){return i[h.ID]!==void 0&&(u=i[h.ID]),u},null);e.children.forEach(function(u){n.morphTargets[u.ID]!==void 0&&s.push(n.morphTargets[u.ID])});const l=a[0],A={};"RotationOrder"in l&&(A.eulerOrder=Yg(l.RotationOrder.value)),"InheritType"in l&&(A.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(A.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(A.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(A.scale=l.GeometricScaling.value);const c=sj(A);return this.genGeometry(r,o,s,c)}genGeometry(e,r,n,i){const s=new $t;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,r),o=this.genBuffers(a),l=new vr(o.vertex,3);if(l.applyMatrix4(i),s.setAttribute("position",l),o.colors.length>0&&s.setAttribute("color",new vr(o.colors,3)),r&&(s.setAttribute("skinIndex",new h_(o.weightsIndices,4)),s.setAttribute("skinWeight",new vr(o.vertexWeights,4)),s.FBX_Deformer=r),o.normal.length>0){const A=new dt().getNormalMatrix(i),c=new vr(o.normal,3);c.applyNormalMatrix(A),s.setAttribute("normal",c)}if(o.uvs.forEach(function(A,c){const u=c===0?"uv":`uv${c}`;s.setAttribute(u,new vr(o.uvs[c],2))}),a.material&&a.material.mappingType!=="AllSame"){let A=o.materialIndex[0],c=0;if(o.materialIndex.forEach(function(u,h){u!==A&&(s.addGroup(c,h-c,A),A=u,c=h)}),s.groups.length>0){const u=s.groups[s.groups.length-1],h=u.start+u.count;h!==o.materialIndex.length&&s.addGroup(h,o.materialIndex.length-h,A)}s.groups.length===0&&s.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(s,e,n,i),s}parseGeoNode(e,r){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return n.weightTable={},r!==null&&(n.skeleton=r,r.rawBones.forEach(function(i,s){i.indices.forEach(function(a,o){n.weightTable[a]===void 0&&(n.weightTable[a]=[]),n.weightTable[a].push({id:s,weight:i.weights[o]})})})),n}genBuffers(e){const r={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,i=0,s=!1,a=[],o=[],l=[],A=[],c=[],u=[];const h=this;return e.vertexIndices.forEach(function(d,f){let m,g=!1;d<0&&(d=d^-1,g=!0);let p=[],v=[];if(a.push(d*3,d*3+1,d*3+2),e.color){const y=Wv(f,n,d,e.color);l.push(y[0],y[1],y[2])}if(e.skeleton){if(e.weightTable[d]!==void 0&&e.weightTable[d].forEach(function(y){v.push(y.weight),p.push(y.id)}),v.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const y=[0,0,0,0],_=[0,0,0,0];v.forEach(function(E,x){let B=E,M=p[x];_.forEach(function(R,I,L){if(B>R){L[I]=B,B=R;const D=y[I];y[I]=M,M=D}})}),p=y,v=_}for(;v.length<4;)v.push(0),p.push(0);for(let y=0;y<4;++y)c.push(v[y]),u.push(p[y])}if(e.normal){const y=Wv(f,n,d,e.normal);o.push(y[0],y[1],y[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=Wv(f,n,d,e.material)[0],m<0&&(h.negativeMaterialIndices=!0,m=0)),e.uv&&e.uv.forEach(function(y,_){const E=Wv(f,n,d,y);A[_]===void 0&&(A[_]=[]),A[_].push(E[0]),A[_].push(E[1])}),i++,g&&(h.genFace(r,e,a,m,o,l,A,c,u,i),n++,i=0,a=[],o=[],l=[],A=[],c=[],u=[])}),r}getNormalNewell(e){const r=new Y(0,0,0);for(let n=0;n<e.length;n++){const i=e[n],s=e[(n+1)%e.length];r.x+=(i.y-s.y)*(i.z+s.z),r.y+=(i.z-s.z)*(i.x+s.x),r.z+=(i.x-s.x)*(i.y+s.y)}return r.normalize(),r}getNormalTangentAndBitangent(e){const r=this.getNormalNewell(e),n=(Math.abs(r.z)>.5?new Y(0,1,0):new Y(0,0,1)).cross(r).normalize(),i=r.clone().cross(n).normalize();return{normal:r,tangent:n,bitangent:i}}flattenVertex(e,r,n){return new Ke(e.dot(r),e.dot(n))}genFace(e,r,n,i,s,a,o,l,A,c){let u;if(c>3){const h=[],d=r.baseVertexPositions||r.vertexPositions;for(let p=0;p<n.length;p+=3)h.push(new Y(d[n[p]],d[n[p+1]],d[n[p+2]]));const{tangent:f,bitangent:m}=this.getNormalTangentAndBitangent(h),g=[];for(const p of h)g.push(this.flattenVertex(p,f,m));u=NI.triangulateShape(g,[])}else u=[[0,1,2]];for(const[h,d,f]of u)e.vertex.push(r.vertexPositions[n[h*3]]),e.vertex.push(r.vertexPositions[n[h*3+1]]),e.vertex.push(r.vertexPositions[n[h*3+2]]),e.vertex.push(r.vertexPositions[n[d*3]]),e.vertex.push(r.vertexPositions[n[d*3+1]]),e.vertex.push(r.vertexPositions[n[d*3+2]]),e.vertex.push(r.vertexPositions[n[f*3]]),e.vertex.push(r.vertexPositions[n[f*3+1]]),e.vertex.push(r.vertexPositions[n[f*3+2]]),r.skeleton&&(e.vertexWeights.push(l[h*4]),e.vertexWeights.push(l[h*4+1]),e.vertexWeights.push(l[h*4+2]),e.vertexWeights.push(l[h*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.vertexWeights.push(l[f*4]),e.vertexWeights.push(l[f*4+1]),e.vertexWeights.push(l[f*4+2]),e.vertexWeights.push(l[f*4+3]),e.weightsIndices.push(A[h*4]),e.weightsIndices.push(A[h*4+1]),e.weightsIndices.push(A[h*4+2]),e.weightsIndices.push(A[h*4+3]),e.weightsIndices.push(A[d*4]),e.weightsIndices.push(A[d*4+1]),e.weightsIndices.push(A[d*4+2]),e.weightsIndices.push(A[d*4+3]),e.weightsIndices.push(A[f*4]),e.weightsIndices.push(A[f*4+1]),e.weightsIndices.push(A[f*4+2]),e.weightsIndices.push(A[f*4+3])),r.color&&(e.colors.push(a[h*3]),e.colors.push(a[h*3+1]),e.colors.push(a[h*3+2]),e.colors.push(a[d*3]),e.colors.push(a[d*3+1]),e.colors.push(a[d*3+2]),e.colors.push(a[f*3]),e.colors.push(a[f*3+1]),e.colors.push(a[f*3+2])),r.material&&r.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),r.normal&&(e.normal.push(s[h*3]),e.normal.push(s[h*3+1]),e.normal.push(s[h*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2]),e.normal.push(s[f*3]),e.normal.push(s[f*3+1]),e.normal.push(s[f*3+2])),r.uv&&r.uv.forEach(function(m,g){e.uvs[g]===void 0&&(e.uvs[g]=[]),e.uvs[g].push(o[g][h*2]),e.uvs[g].push(o[g][h*2+1]),e.uvs[g].push(o[g][d*2]),e.uvs[g].push(o[g][d*2+1]),e.uvs[g].push(o[g][f*2]),e.uvs[g].push(o[g][f*2+1])})}addMorphTargets(e,r,n,i){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(a){a.rawTargets.forEach(function(o){const l=Mt.Objects.Geometry[o.geoID];l!==void 0&&s.genMorphGeometry(e,r,l,i,o.name)})})}genMorphGeometry(e,r,n,i,s){const a=r.Vertices!==void 0?r.Vertices.a:[],o=r.PolygonVertexIndex!==void 0?r.PolygonVertexIndex.a:[],l=n.Vertices!==void 0?n.Vertices.a:[],A=n.Indexes!==void 0?n.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let m=0;m<A.length;m++){const g=A[m]*3;u[g]=l[m*3],u[g+1]=l[m*3+1],u[g+2]=l[m*3+2]}const h={vertexIndices:o,vertexPositions:u,baseVertexPositions:a},d=this.genBuffers(h),f=new vr(d.vertex,3);f.name=s||n.attrName,f.applyMatrix4(i),e.morphAttributes.position.push(f)}parseNormals(e){const r=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a;let s=[];return n==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:r,referenceType:n}}parseUVs(e){const r=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a;let s=[];return n==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:r,referenceType:n}}parseVertexColors(e){const r=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a;let s=[];n==="IndexToDirect"&&(s=e.ColorIndex.a);for(let a=0,o=new He;a<i.length;a+=4)o.fromArray(i,a),xt.toWorkingColorSpace(o,Ut),o.toArray(i,a);return{dataSize:4,buffer:i,indices:s,mappingType:r,referenceType:n}}parseMaterialIndices(e){const r=e.MappingInformationType,n=e.ReferenceInformationType;if(r==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const i=e.Materials.a,s=[];for(let a=0;a<i.length;++a)s.push(a);return{dataSize:1,buffer:i,indices:s,mappingType:r,referenceType:n}}parseNurbsGeometry(e){const r=parseInt(e.Order);if(isNaN(r))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new $t;const n=r-1,i=e.KnotVector.a,s=[],a=e.Points.a;for(let c=0,u=a.length;c<u;c+=4)s.push(new kt().fromArray(a,c));let o,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){o=n,l=i.length-1-o;for(let c=0;c<n;++c)s.push(s[c])}const A=new zoe(n,i,s,o,l).getPoints(s.length*12);return new $t().setFromPoints(A)}}class Koe{parse(){const e=[],r=this.parseClips();if(r!==void 0)for(const n in r){const i=r[n],s=this.addClip(i);e.push(s)}return e}parseClips(){if(Mt.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const r=this.parseAnimationLayers(e);return this.parseAnimStacks(r)}parseAnimationCurveNodes(){const e=Mt.Objects.AnimationCurveNode,r=new Map;for(const n in e){const i=e[n];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};r.set(s.id,s)}}return r}parseAnimationCurves(e){const r=Mt.Objects.AnimationCurve;for(const n in r){const i={id:r[n].id,times:r[n].KeyTime.a.map(qoe),values:r[n].KeyValueFloat.a},s=An.get(i.id);if(s!==void 0){const a=s.parents[0].ID,o=s.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=i:o.match(/Y/)?e.get(a).curves.y=i:o.match(/Z/)?e.get(a).curves.z=i:o.match(/DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=i)}}}parseAnimationLayers(e){const r=Mt.Objects.AnimationLayer,n=new Map;for(const i in r){const s=[],a=An.get(parseInt(i));a!==void 0&&(a.children.forEach(function(o,l){if(e.has(o.ID)){const A=e.get(o.ID);if(A.curves.x!==void 0||A.curves.y!==void 0||A.curves.z!==void 0){if(s[l]===void 0){const c=An.get(o.ID).parents.filter(function(u){return u.relationship!==void 0})[0].ID;if(c!==void 0){const u=Mt.Objects.Model[c.toString()];if(u===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",o);return}const h={modelName:u.attrName?Tt.sanitizeNodeName(u.attrName):"",ID:u.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Ci.traverse(function(d){d.ID===u.id&&(h.transform=d.matrix,d.userData.transformData&&(h.eulerOrder=d.userData.transformData.eulerOrder))}),h.transform||(h.transform=new je),"PreRotation"in u&&(h.preRotation=u.PreRotation.value),"PostRotation"in u&&(h.postRotation=u.PostRotation.value),s[l]=h}}s[l]&&(s[l][A.attr]=A)}else if(A.curves.morph!==void 0){if(s[l]===void 0){const c=An.get(o.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,u=An.get(c).parents[0].ID,h=An.get(u).parents[0].ID,d=An.get(h).parents[0].ID,f=Mt.Objects.Model[d],m={modelName:f.attrName?Tt.sanitizeNodeName(f.attrName):"",morphName:Mt.Objects.Deformer[c].attrName};s[l]=m}s[l][A.attr]=A}}}),n.set(parseInt(i),s))}return n}parseAnimStacks(e){const r=Mt.Objects.AnimationStack,n={};for(const i in r){const s=An.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);n[i]={name:r[i].attrName,layer:a}}return n}addClip(e){let r=[];const n=this;return e.layer.forEach(function(i){r=r.concat(n.generateTracks(i))}),new Ou(e.name,-1,r)}generateTracks(e){const r=[];let n=new Y,i=new Y;if(e.transform&&e.transform.decompose(n,new et,i),n=n.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");s!==void 0&&r.push(s)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const s=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);s!==void 0&&r.push(s)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const s=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");s!==void 0&&r.push(s)}if(e.DeformPercent!==void 0){const s=this.generateMorphTrack(e);s!==void 0&&r.push(s)}return r}generateVectorTrack(e,r,n,i){const s=this.getTimesForAllAxes(r),a=this.getKeyframeTrackValues(s,r,n);return new rA(e+"."+i,s,a)}generateRotationTrack(e,r,n,i,s){let a,o;if(r.x!==void 0&&r.y!==void 0&&r.z!==void 0){const h=this.interpolateRotations(r.x,r.y,r.z,s);a=h[0],o=h[1]}const l=Yg(0);n!==void 0&&(n=n.map(Et.degToRad),n.push(l),n=new en().fromArray(n),n=new et().setFromEuler(n)),i!==void 0&&(i=i.map(Et.degToRad),i.push(l),i=new en().fromArray(i),i=new et().setFromEuler(i).invert());const A=new et,c=new en,u=[];if(!o||!a)return new el(e+".quaternion",[0],[0]);for(let h=0;h<o.length;h+=3)c.set(o[h],o[h+1],o[h+2],s),A.setFromEuler(c),n!==void 0&&A.premultiply(n),i!==void 0&&A.multiply(i),h>2&&new et().fromArray(u,(h-3)/3*4).dot(A)<0&&A.set(-A.x,-A.y,-A.z,-A.w),A.toArray(u,h/3*4);return new el(e+".quaternion",a,u)}generateMorphTrack(e){const r=e.DeformPercent.curves.morph,n=r.values.map(function(s){return s/100}),i=Ci.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Pu(e.modelName+".morphTargetInfluences["+i+"]",r.times,n)}getTimesForAllAxes(e){let r=[];if(e.x!==void 0&&(r=r.concat(e.x.times)),e.y!==void 0&&(r=r.concat(e.y.times)),e.z!==void 0&&(r=r.concat(e.z.times)),r=r.sort(function(n,i){return n-i}),r.length>1){let n=1,i=r[0];for(let s=1;s<r.length;s++){const a=r[s];a!==i&&(r[n]=a,i=a,n++)}r=r.slice(0,n)}return r}getKeyframeTrackValues(e,r,n){const i=n,s=[];let a=-1,o=-1,l=-1;return e.forEach(function(A){if(r.x&&(a=r.x.times.indexOf(A)),r.y&&(o=r.y.times.indexOf(A)),r.z&&(l=r.z.times.indexOf(A)),a!==-1){const c=r.x.values[a];s.push(c),i[0]=c}else s.push(i[0]);if(o!==-1){const c=r.y.values[o];s.push(c),i[1]=c}else s.push(i[1]);if(l!==-1){const c=r.z.values[l];s.push(c),i[2]=c}else s.push(i[2])}),s}interpolateRotations(e,r,n,i){const s=[],a=[];s.push(e.times[0]),a.push(Et.degToRad(e.values[0])),a.push(Et.degToRad(r.values[0])),a.push(Et.degToRad(n.values[0]));for(let o=1;o<e.values.length;o++){const l=[e.values[o-1],r.values[o-1],n.values[o-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const A=l.map(Et.degToRad),c=[e.values[o],r.values[o],n.values[o]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;const u=c.map(Et.degToRad),h=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],d=[Math.abs(h[0]),Math.abs(h[1]),Math.abs(h[2])];if(d[0]>=180||d[1]>=180||d[2]>=180){const f=Math.max(...d)/180,m=new en(...A,i),g=new en(...u,i),p=new et().setFromEuler(m),v=new et().setFromEuler(g);p.dot(v)&&v.set(-v.x,-v.y,-v.z,-v.w);const y=e.times[o-1],_=e.times[o]-y,E=new et,x=new en;for(let B=0;B<1;B+=1/f)E.copy(p.clone().slerp(v.clone(),B)),s.push(y+B*_),x.setFromQuaternion(E,i),a.push(x.x),a.push(x.y),a.push(x.z)}else s.push(e.times[o]),a.push(Et.degToRad(e.values[o])),a.push(Et.degToRad(r.values[o])),a.push(Et.degToRad(n.values[o]))}return[s,a]}}class Yoe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,r){this.currentProp=e,this.currentPropName=r}parse(e){this.currentIndent=0,this.allNodes=new ij,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const r=this,n=e.split(/[\r\n]+/);return n.forEach(function(i,s){const a=i.match(/^[\s\t]*;/),o=i.match(/^[\s\t]*$/);if(a||o)return;const l=i.match("^\\t{"+r.currentIndent+"}(\\w+):(.*){",""),A=i.match("^\\t{"+r.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=i.match("^\\t{"+(r.currentIndent-1)+"}}");l?r.parseNodeBegin(i,l):A?r.parseNodeProperty(i,A,n[++s]):c?r.popStack():i.match(/^[^\s\t}]/)&&r.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,r){const n=r[1].trim().replace(/^"/,"").replace(/"$/,""),i=r[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},a=this.parseNodeAttr(i),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,s):n in o?(n==="PoseNode"?o.PoseNode.push(s):o[n].id!==void 0&&(o[n]={},o[n][o[n].id]=o[n]),a.id!==""&&(o[n][a.id]=s)):typeof a.id=="number"?(o[n]={},o[n][a.id]=s):n!=="Properties70"&&(n==="PoseNode"?o[n]=[s]:o[n]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let r=e[0];e[0]!==""&&(r=parseInt(e[0]),isNaN(r)&&(r=e[0]));let n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:r,name:n,type:i}}parseNodeProperty(e,r,n){let i=r[1].replace(/^"/,"").replace(/"$/,"").trim(),s=r[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const o=s.split(",").slice(1),l=parseInt(o[0]),A=parseInt(o[1]);let c=s.split(",").slice(3);c=c.map(function(u){return u.trim().replace(/^"/,"")}),i="connections",s=[l,A],ele(s,c),a[i]===void 0&&(a[i]=[])}i==="Node"&&(a.id=s),i in a&&Array.isArray(a[i])?a[i].push(s):i!=="a"?a[i]=s:a.a=s,this.setCurrentProp(a,i),i==="a"&&s.slice(-1)!==","&&(a.a=oB(s))}parseNodePropertyContinued(e){const r=this.getCurrentNode();r.a+=e,e.slice(-1)!==","&&(r.a=oB(r.a))}parseNodeSpecialProperty(e,r,n){const i=n.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],a=i[1],o=i[2],l=i[3];let A=i[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":A=parseFloat(A);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":A=oB(A);break}this.getPrevNode()[s]={type:a,type2:o,flag:l,value:A},this.setCurrentProp(this.getPrevNode(),s)}}class Xoe{parse(e){const r=new CL(e);r.skip(23);const n=r.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const i=new ij;for(;!this.endOfContent(r);){const s=this.parseNode(r,n);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,r){const n={},i=r>=7500?e.getUint64():e.getUint32(),s=r>=7500?e.getUint64():e.getUint32();r>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),o=e.getString(a);if(i===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const A=l.length>0?l[0]:"",c=l.length>1?l[1]:"",u=l.length>2?l[2]:"";for(n.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const h=this.parseNode(e,r);h!==null&&this.parseSubNode(o,n,h)}return n.propertyList=l,typeof A=="number"&&(n.id=A),c!==""&&(n.attrName=c),u!==""&&(n.attrType=u),o!==""&&(n.name=o),n}parseSubNode(e,r,n){if(n.singleProperty===!0){const i=n.propertyList[0];Array.isArray(i)?(r[n.name]=n,n.a=i):r[n.name]=i}else if(e==="Connections"&&n.name==="C"){const i=[];n.propertyList.forEach(function(s,a){a!==0&&i.push(s)}),r.connections===void 0&&(r.connections=[]),r.connections.push(i)}else if(n.name==="Properties70")Object.keys(n).forEach(function(i){r[i]=n[i]});else if(e==="Properties70"&&n.name==="P"){let i=n.propertyList[0],s=n.propertyList[1];const a=n.propertyList[2],o=n.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:l=n.propertyList[4],r[i]={type:s,type2:a,flag:o,value:l}}else r[n.name]===void 0?typeof n.id=="number"?(r[n.name]={},r[n.name][n.id]=n):r[n.name]=n:n.name==="PoseNode"?(Array.isArray(r[n.name])||(r[n.name]=[r[n.name]]),r[n.name].push(n)):r[n.name][n.id]===void 0&&(r[n.name][n.id]=n)}parseProperty(e){const r=e.getString(1);let n;switch(r){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(r){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const o=Foe(new Uint8Array(e.getArrayBuffer(a))),l=new CL(o.buffer);switch(r){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+r)}}}class CL{constructor(e,r){this.dv=new DataView(e),this.offset=0,this.littleEndian=r!==void 0?r:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const r=[];for(let n=0;n<e;n++)r.push(this.getBoolean());return r}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const r=[];for(let n=0;n<e;n++)r.push(this.getInt32());return r}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,r;return this.littleEndian?(e=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),e=this.getUint32()),r&2147483648?(r=~r&4294967295,e=~e&4294967295,e===4294967295&&(r=r+1&4294967295),e=e+1&4294967295,-(r*4294967296+e)):r*4294967296+e}getInt64Array(e){const r=[];for(let n=0;n<e;n++)r.push(this.getInt64());return r}getUint64(){let e,r;return this.littleEndian?(e=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),e=this.getUint32()),r*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const r=[];for(let n=0;n<e;n++)r.push(this.getFloat32());return r}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const r=[];for(let n=0;n<e;n++)r.push(this.getFloat64());return r}getArrayBuffer(e){const r=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}getString(e){const r=this.offset;let n=new Uint8Array(this.dv.buffer,r,e);this.skip(e);const i=n.indexOf(0);return i>=0&&(n=new Uint8Array(this.dv.buffer,r,i)),this._textDecoder.decode(n)}}class ij{add(e,r){this[e]=r}}function Zoe(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===aj(t,0,e.length)}function Joe(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let r=0;function n(i){const s=t[i-1];return t=t.slice(r+i),r++,s}for(let i=0;i<e.length;++i)if(n(1)===e[i])return!1;return!0}function SL(t){const e=/FBXVersion: (\d+)/,r=t.match(e);if(r)return parseInt(r[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function qoe(t){return t/46186158e3}const $oe=[];function Wv(t,e,r,n){let i;switch(n.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=r;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(i=n.indices[i]);const s=i*n.dataSize,a=s+n.dataSize;return tle($oe,n.buffer,s,a)}const aB=new en,bh=new Y;function sj(t){const e=new je,r=new je,n=new je,i=new je,s=new je,a=new je,o=new je,l=new je,A=new je,c=new je,u=new je,h=new je,d=t.inheritType?t.inheritType:0;t.translation&&e.setPosition(bh.fromArray(t.translation));const f=Yg(0);if(t.preRotation){const L=t.preRotation.map(Et.degToRad);L.push(f),r.makeRotationFromEuler(aB.fromArray(L))}if(t.rotation){const L=t.rotation.map(Et.degToRad);L.push(t.eulerOrder||f),n.makeRotationFromEuler(aB.fromArray(L))}if(t.postRotation){const L=t.postRotation.map(Et.degToRad);L.push(f),i.makeRotationFromEuler(aB.fromArray(L)),i.invert()}t.scale&&s.scale(bh.fromArray(t.scale)),t.scalingOffset&&o.setPosition(bh.fromArray(t.scalingOffset)),t.scalingPivot&&a.setPosition(bh.fromArray(t.scalingPivot)),t.rotationOffset&&l.setPosition(bh.fromArray(t.rotationOffset)),t.rotationPivot&&A.setPosition(bh.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(u.copy(t.parentMatrix),c.copy(t.parentMatrixWorld));const m=r.clone().multiply(n).multiply(i),g=new je;g.extractRotation(c);const p=new je;p.copyPosition(c);const v=p.clone().invert().multiply(c),y=g.clone().invert().multiply(v),_=s,E=new je;if(d===0)E.copy(g).multiply(m).multiply(y).multiply(_);else if(d===1)E.copy(g).multiply(y).multiply(m).multiply(_);else{const L=new je().scale(new Y().setFromMatrixScale(u)).clone().invert(),D=y.clone().multiply(L);E.copy(g).multiply(m).multiply(D).multiply(_)}const x=A.clone().invert(),B=a.clone().invert();let M=e.clone().multiply(l).multiply(A).multiply(r).multiply(n).multiply(i).multiply(x).multiply(o).multiply(a).multiply(s).multiply(B);const R=new je().copyPosition(M),I=c.clone().multiply(R);return h.copyPosition(I),M=h.clone().multiply(E),M.premultiply(c.invert()),M}function Yg(t){t=t||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function oB(t){return t.split(",").map(function(e){return parseFloat(e)})}function aj(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=t.byteLength),new TextDecoder().decode(new Uint8Array(t,e,r))}function ele(t,e){for(let r=0,n=t.length,i=e.length;r<i;r++,n++)t[n]=e[r]}function tle(t,e,r,n){for(let i=r,s=0;i<n;i++,s++)t[s]=e[i];return t}let Qp,lB,_h,Kv;function AB(t,e=1/0,r=null){lB||(lB=new oA(2,2,1,1)),_h||(_h=new fn({uniforms:{blitTexture:new VI(t)},vertexShader:`
			varying vec2 vUv;
			void main(){
				vUv = uv;
				gl_Position = vec4(position.xy * 1.0,0.,.999999);
			}`,fragmentShader:`
			uniform sampler2D blitTexture; 
			varying vec2 vUv;

			void main(){ 
				gl_FragColor = vec4(vUv.xy, 0, 1);
				
				#ifdef IS_SRGB
				gl_FragColor = sRGBTransferOETF( texture2D( blitTexture, vUv) );
				#else
				gl_FragColor = texture2D( blitTexture, vUv);
				#endif
			}`})),_h.uniforms.blitTexture.value=t,_h.defines.IS_SRGB=t.colorSpace==Ut,_h.needsUpdate=!0,Kv||(Kv=new Ar(lB,_h),Kv.frustumCulled=!1);const n=new In,i=new zg;i.add(Kv),r===null&&(r=Qp=new y0({antialias:!1}));const s=Math.min(t.image.width,e),a=Math.min(t.image.height,e);r.setSize(s,a),r.clear(),r.render(i,n);const o=document.createElement("canvas"),l=o.getContext("2d");o.width=s,o.height=a,l.drawImage(r.domElement,0,0,s,a);const A=new Ise(o);return A.minFilter=t.minFilter,A.magFilter=t.magFilter,A.wrapS=t.wrapS,A.wrapT=t.wrapT,A.colorSpace=t.colorSpace,A.name=t.name,Qp&&(Qp.forceContextLoss(),Qp.dispose(),Qp=null),A}const IL={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class KI{constructor(){this.pluginCallbacks=[],this.register(function(e){return new ule(e)}),this.register(function(e){return new hle(e)}),this.register(function(e){return new mle(e)}),this.register(function(e){return new gle(e)}),this.register(function(e){return new vle(e)}),this.register(function(e){return new yle(e)}),this.register(function(e){return new dle(e)}),this.register(function(e){return new fle(e)}),this.register(function(e){return new ple(e)}),this.register(function(e){return new wle(e)}),this.register(function(e){return new ble(e)}),this.register(function(e){return new _le(e)}),this.register(function(e){return new xle(e)}),this.register(function(e){return new Ele(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,r,n,i){const s=new cle,a=[];for(let o=0,l=this.pluginCallbacks.length;o<l;o++)a.push(this.pluginCallbacks[o](s));s.setPlugins(a),s.write(e,r,i).catch(n)}parseAsync(e,r){const n=this;return new Promise(function(i,s){n.parse(e,i,s,r)})}}const Rt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},cB="KHR_mesh_quantization",Is={};Is[Vn]=Rt.NEAREST;Is[xI]=Rt.NEAREST_MIPMAP_NEAREST;Is[kd]=Rt.NEAREST_MIPMAP_LINEAR;Is[Un]=Rt.LINEAR;Is[$m]=Rt.LINEAR_MIPMAP_NEAREST;Is[qa]=Rt.LINEAR_MIPMAP_LINEAR;Is[Ss]=Rt.CLAMP_TO_EDGE;Is[Qs]=Rt.REPEAT;Is[Qg]=Rt.MIRRORED_REPEAT;const RL={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},rle=new He,UL=12,nle=1179937895,ile=2,FL=8,sle=1313821514,ale=5130562;function xm(t,e){return t.length===e.length&&t.every(function(r,n){return r===e[n]})}function ole(t){return new TextEncoder().encode(t).buffer}function lle(t){return xm(t.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Ale(t,e,r){const n={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=e;i<e+r;i++)for(let s=0;s<t.itemSize;s++){let a;t.itemSize>4?a=t.array[i*t.itemSize+s]:(s===0?a=t.getX(i):s===1?a=t.getY(i):s===2?a=t.getZ(i):s===3&&(a=t.getW(i)),t.normalized===!0&&(a=Et.normalize(a,t.array))),n.min[s]=Math.min(n.min[s],a),n.max[s]=Math.max(n.max[s],a)}return n}function oj(t){return Math.ceil(t/4)*4}function uB(t,e=0){const r=oj(t.byteLength);if(r!==t.byteLength){const n=new Uint8Array(r);if(n.set(new Uint8Array(t)),e!==0)for(let i=t.byteLength;i<r;i++)n[i]=e;return n.buffer}return t}function kL(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function LL(t,e){if(t.toBlob!==void 0)return new Promise(n=>t.toBlob(n,e));let r;return e==="image/jpeg"?r=.92:e==="image/webp"&&(r=.8),t.convertToBlob({type:e,quality:r})}class cle{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+eA}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,r,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const i=this,s=i.buffers,a=i.json;n=i.options;const o=i.extensionsUsed,l=i.extensionsRequired,A=new Blob(s,{type:"application/octet-stream"}),c=Object.keys(o),u=Object.keys(l);if(c.length>0&&(a.extensionsUsed=c),u.length>0&&(a.extensionsRequired=u),a.buffers&&a.buffers.length>0&&(a.buffers[0].byteLength=A.size),n.binary===!0){const h=new FileReader;h.readAsArrayBuffer(A),h.onloadend=function(){const d=uB(h.result),f=new DataView(new ArrayBuffer(FL));f.setUint32(0,d.byteLength,!0),f.setUint32(4,ale,!0);const m=uB(ole(JSON.stringify(a)),32),g=new DataView(new ArrayBuffer(FL));g.setUint32(0,m.byteLength,!0),g.setUint32(4,sle,!0);const p=new ArrayBuffer(UL),v=new DataView(p);v.setUint32(0,nle,!0),v.setUint32(4,ile,!0);const y=UL+g.byteLength+m.byteLength+f.byteLength+d.byteLength;v.setUint32(8,y,!0);const _=new Blob([p,g,m,f,d],{type:"application/octet-stream"}),E=new FileReader;E.readAsArrayBuffer(_),E.onloadend=function(){r(E.result)}}}else if(a.buffers&&a.buffers.length>0){const h=new FileReader;h.readAsDataURL(A),h.onloadend=function(){const d=h.result;a.buffers[0].uri=d,r(a)}}else r(a)}serializeUserData(e,r){if(Object.keys(e.userData).length===0)return;const n=this.options,i=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&s.gltfExtensions){r.extensions===void 0&&(r.extensions={});for(const a in s.gltfExtensions)r.extensions[a]=s.gltfExtensions[a],i[a]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(r.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,r=!1){if(this.uids.has(e)===!1){const n=new Map;n.set(!0,this.uid++),n.set(!1,this.uid++),this.uids.set(e,n)}return this.uids.get(e).get(r)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const r=new Y;for(let n=0,i=e.count;n<i;n++)if(Math.abs(r.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const r=this.cache;if(r.attributesNormalized.has(e))return r.attributesNormalized.get(e);const n=e.clone(),i=new Y;for(let s=0,a=n.count;s<a;s++)i.fromBufferAttribute(n,s),i.x===0&&i.y===0&&i.z===0?i.setX(1):i.normalize(),n.setXYZ(s,i.x,i.y,i.z);return r.attributesNormalized.set(e,n),n}applyTextureTransform(e,r){let n=!1;const i={};(r.offset.x!==0||r.offset.y!==0)&&(i.offset=r.offset.toArray(),n=!0),r.rotation!==0&&(i.rotation=r.rotation,n=!0),(r.repeat.x!==1||r.repeat.y!==1)&&(i.scale=r.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=i,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,r){if(e===r)return e;function n(h){return h.colorSpace===Ut?function(d){return d<.04045?d*.0773993808:Math.pow(d*.9478672986+.0521327014,2.4)}:function(d){return d}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof ZE&&(e=AB(e)),r instanceof ZE&&(r=AB(r));const i=e?e.image:null,s=r?r.image:null,a=Math.max(i?i.width:0,s?s.width:0),o=Math.max(i?i.height:0,s?s.height:0),l=kL();l.width=a,l.height=o;const A=l.getContext("2d",{willReadFrequently:!0});A.fillStyle="#00ffff",A.fillRect(0,0,a,o);const c=A.getImageData(0,0,a,o);if(i){A.drawImage(i,0,0,a,o);const h=n(e),d=A.getImageData(0,0,a,o).data;for(let f=2;f<d.length;f+=4)c.data[f]=h(d[f]/256)*256}if(s){A.drawImage(s,0,0,a,o);const h=n(r),d=A.getImageData(0,0,a,o).data;for(let f=1;f<d.length;f+=4)c.data[f]=h(d[f]/256)*256}A.putImageData(c,0,0);const u=(e||r).clone();return u.source=new FI(l),u.colorSpace=Fo,u.channel=(e||r).channel,e&&r&&e.channel!==r.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),u}processBuffer(e){const r=this.json,n=this.buffers;return r.buffers||(r.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,r,n,i,s){const a=this.json;a.bufferViews||(a.bufferViews=[]);let o;switch(r){case Rt.BYTE:case Rt.UNSIGNED_BYTE:o=1;break;case Rt.SHORT:case Rt.UNSIGNED_SHORT:o=2;break;default:o=4}let l=e.itemSize*o;s===Rt.ARRAY_BUFFER&&(l=Math.ceil(l/4)*4);const A=oj(i*l),c=new DataView(new ArrayBuffer(A));let u=0;for(let d=n;d<n+i;d++){for(let f=0;f<e.itemSize;f++){let m;e.itemSize>4?m=e.array[d*e.itemSize+f]:(f===0?m=e.getX(d):f===1?m=e.getY(d):f===2?m=e.getZ(d):f===3&&(m=e.getW(d)),e.normalized===!0&&(m=Et.normalize(m,e.array))),r===Rt.FLOAT?c.setFloat32(u,m,!0):r===Rt.INT?c.setInt32(u,m,!0):r===Rt.UNSIGNED_INT?c.setUint32(u,m,!0):r===Rt.SHORT?c.setInt16(u,m,!0):r===Rt.UNSIGNED_SHORT?c.setUint16(u,m,!0):r===Rt.BYTE?c.setInt8(u,m):r===Rt.UNSIGNED_BYTE&&c.setUint8(u,m),u+=o}u%l!==0&&(u+=l-u%l)}const h={buffer:this.processBuffer(c.buffer),byteOffset:this.byteOffset,byteLength:A};return s!==void 0&&(h.target=s),s===Rt.ARRAY_BUFFER&&(h.byteStride=l),this.byteOffset+=A,a.bufferViews.push(h),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const r=this,n=r.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(i){const s=new FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){const a=uB(s.result),o={buffer:r.processBuffer(a),byteOffset:r.byteOffset,byteLength:a.byteLength};r.byteOffset+=a.byteLength,i(n.bufferViews.push(o)-1)}})}processAccessor(e,r,n,i){const s=this.json,a={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let o;if(e.array.constructor===Float32Array)o=Rt.FLOAT;else if(e.array.constructor===Int32Array)o=Rt.INT;else if(e.array.constructor===Uint32Array)o=Rt.UNSIGNED_INT;else if(e.array.constructor===Int16Array)o=Rt.SHORT;else if(e.array.constructor===Uint16Array)o=Rt.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)o=Rt.BYTE;else if(e.array.constructor===Uint8Array)o=Rt.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(n===void 0&&(n=0),(i===void 0||i===1/0)&&(i=e.count),i===0)return null;const l=Ale(e,n,i);let A;r!==void 0&&(A=e===r.index?Rt.ELEMENT_ARRAY_BUFFER:Rt.ARRAY_BUFFER);const c=this.processBufferView(e,o,n,i,A),u={bufferView:c.id,byteOffset:c.byteOffset,componentType:o,count:i,max:l.max,min:l.min,type:a[e.itemSize]};return e.normalized===!0&&(u.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(u)-1}processImage(e,r,n,i="image/png"){if(e!==null){const s=this,a=s.cache,o=s.json,l=s.options,A=s.pending;a.images.has(e)||a.images.set(e,{});const c=a.images.get(e),u=i+":flipY/"+n.toString();if(c[u]!==void 0)return c[u];o.images||(o.images=[]);const h={mimeType:i},d=kL();d.width=Math.min(e.width,l.maxTextureSize),d.height=Math.min(e.height,l.maxTextureSize);const f=d.getContext("2d",{willReadFrequently:!0});if(n===!0&&(f.translate(0,d.height),f.scale(1,-1)),e.data!==void 0){r!==kn&&console.error("GLTFExporter: Only RGBAFormat is supported.",r),(e.width>l.maxTextureSize||e.height>l.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const g=new Uint8ClampedArray(e.height*e.width*4);for(let p=0;p<g.length;p+=4)g[p+0]=e.data[p+0],g[p+1]=e.data[p+1],g[p+2]=e.data[p+2],g[p+3]=e.data[p+3];f.putImageData(new ImageData(g,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)f.drawImage(e,0,0,d.width,d.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");l.binary===!0?A.push(LL(d,i).then(g=>s.processBufferViewImage(g)).then(g=>{h.bufferView=g})):d.toDataURL!==void 0?h.uri=d.toDataURL(i):A.push(LL(d,i).then(g=>new FileReader().readAsDataURL(g)).then(g=>{h.uri=g}));const m=o.images.push(h)-1;return c[u]=m,m}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const r=this.json;r.samplers||(r.samplers=[]);const n={magFilter:Is[e.magFilter],minFilter:Is[e.minFilter],wrapS:Is[e.wrapS],wrapT:Is[e.wrapT]};return r.samplers.push(n)-1}processTexture(e){const r=this.options,n=this.cache,i=this.json;if(n.textures.has(e))return n.textures.get(e);i.textures||(i.textures=[]),e instanceof ZE&&(e=AB(e,r.maxTextureSize));let s=e.userData.mimeType;s==="image/webp"&&(s="image/png");const a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(a.name=e.name),this._invokeAll(function(l){l.writeTexture&&l.writeTexture(e,a)});const o=i.textures.push(a)-1;return n.textures.set(e,o),o}processMaterial(e){const r=this.cache,n=this.json;if(r.materials.has(e))return r.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const i={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(xm(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const o=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),l={index:this.processTexture(o),channel:o.channel};this.applyTextureTransform(l,o),i.pbrMetallicRoughness.metallicRoughnessTexture=l}if(e.map){const o={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(o,e.map),i.pbrMetallicRoughness.baseColorTexture=o}if(e.emissive){const o=e.emissive;if(Math.max(o.r,o.g,o.b)>0&&(i.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const l={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(l,e.emissiveMap),i.emissiveTexture=l}}if(e.normalMap){const o={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(o.scale=e.normalScale.x),this.applyTextureTransform(o,e.normalMap),i.normalTexture=o}if(e.aoMap){const o={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(o.strength=e.aoMapIntensity),this.applyTextureTransform(o,e.aoMap),i.occlusionTexture=o}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===pi&&(i.doubleSided=!0),e.name!==""&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll(function(o){o.writeMaterial&&o.writeMaterial(e,i)});const a=n.materials.push(i)-1;return r.materials.set(e,a),a}processMesh(e){const r=this.cache,n=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let _=0,E=e.material.length;_<E;_++)i.push(e.material[_].uuid);else i.push(e.material.uuid);const s=i.join(":");if(r.meshes.has(s))return r.meshes.get(s);const a=e.geometry;let o;e.isLineSegments?o=Rt.LINES:e.isLineLoop?o=Rt.LINE_LOOP:e.isLine?o=Rt.LINE_STRIP:e.isPoints?o=Rt.POINTS:o=e.material.wireframe?Rt.LINES:Rt.TRIANGLES;const l={},A={},c=[],u=[],h={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=a.getAttribute("normal");d!==void 0&&!this.isNormalizedNormalAttribute(d)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(d)));let f=null;for(let _ in a.attributes){if(_.slice(0,5)==="morph")continue;const E=a.attributes[_];if(_=h[_]||_.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(_)||(_="_"+_),r.attributes.has(this.getUID(E))){A[_]=r.attributes.get(this.getUID(E));continue}f=null;const x=E.array;_==="JOINTS_0"&&!(x instanceof Uint16Array)&&!(x instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),f=new lt(new Uint16Array(x),E.itemSize,E.normalized));const B=this.processAccessor(f||E,a);B!==null&&(_.startsWith("_")||this.detectMeshQuantization(_,E),A[_]=B,r.attributes.set(this.getUID(E),B))}if(d!==void 0&&a.setAttribute("normal",d),Object.keys(A).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){const _=[],E=[],x={};if(e.morphTargetDictionary!==void 0)for(const B in e.morphTargetDictionary)x[e.morphTargetDictionary[B]]=B;for(let B=0;B<e.morphTargetInfluences.length;++B){const M={};let R=!1;for(const I in a.morphAttributes){if(I!=="position"&&I!=="normal"){R||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),R=!0);continue}const L=a.morphAttributes[I][B],D=I.toUpperCase(),w=a.attributes[I];if(r.attributes.has(this.getUID(L,!0))){M[D]=r.attributes.get(this.getUID(L,!0));continue}const b=L.clone();if(!a.morphTargetsRelative)for(let S=0,F=L.count;S<F;S++)for(let k=0;k<L.itemSize;k++)k===0&&b.setX(S,L.getX(S)-w.getX(S)),k===1&&b.setY(S,L.getY(S)-w.getY(S)),k===2&&b.setZ(S,L.getZ(S)-w.getZ(S)),k===3&&b.setW(S,L.getW(S)-w.getW(S));M[D]=this.processAccessor(b,a),r.attributes.set(this.getUID(w,!0),M[D])}u.push(M),_.push(e.morphTargetInfluences[B]),e.morphTargetDictionary!==void 0&&E.push(x[B])}l.weights=_,E.length>0&&(l.extras={},l.extras.targetNames=E)}const m=Array.isArray(e.material);if(m&&a.groups.length===0)return null;let g=!1;if(m&&a.index===null){const _=[];for(let E=0,x=a.attributes.position.count;E<x;E++)_[E]=E;a.setIndex(_),g=!0}const p=m?e.material:[e.material],v=m?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let _=0,E=v.length;_<E;_++){const x={mode:o,attributes:A};if(this.serializeUserData(a,x),u.length>0&&(x.targets=u),a.index!==null){let M=this.getUID(a.index);(v[_].start!==void 0||v[_].count!==void 0)&&(M+=":"+v[_].start+":"+v[_].count),r.attributes.has(M)?x.indices=r.attributes.get(M):(x.indices=this.processAccessor(a.index,a,v[_].start,v[_].count),r.attributes.set(M,x.indices)),x.indices===null&&delete x.indices}const B=this.processMaterial(p[v[_].materialIndex]);B!==null&&(x.material=B),c.push(x)}g===!0&&a.setIndex(null),l.primitives=c,n.meshes||(n.meshes=[]),this._invokeAll(function(_){_.writeMesh&&_.writeMesh(e,l)});const y=n.meshes.push(l)-1;return r.meshes.set(s,y),y}detectMeshQuantization(e,r){if(this.extensionsUsed[cB])return;let n;switch(r.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}r.normalized&&(n+=" normalized");const i=e.split("_",1)[0];IL[i]&&IL[i].includes(n)&&(this.extensionsUsed[cB]=!0,this.extensionsRequired[cB]=!0)}processCamera(e){const r=this.json;r.cameras||(r.cameras=[]);const n=e.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:Et.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(i.name=e.type),r.cameras.push(i)-1}processAnimation(e,r){const n=this.json,i=this.nodeMap;n.animations||(n.animations=[]),e=KI.Utils.mergeMorphTargetTracks(e.clone(),r);const s=e.tracks,a=[],o=[];for(let l=0;l<s.length;++l){const A=s[l],c=Tt.parseTrackName(A.name);let u=Tt.findNode(r,c.nodeName);const h=RL[c.propertyName];if(c.objectName==="bones"&&(u.isSkinnedMesh===!0?u=u.skeleton.getBoneByName(c.objectIndex):u=void 0),!u||!h){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',A.name);continue}const d=1;let f=A.values.length/A.times.length;h===RL.morphTargetInfluences&&(f/=u.morphTargetInfluences.length);let m;A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(m="CUBICSPLINE",f/=3):A.getInterpolation()===kf?m="STEP":m="LINEAR",o.push({input:this.processAccessor(new lt(A.times,d)),output:this.processAccessor(new lt(A.values,f)),interpolation:m}),a.push({sampler:o.length-1,target:{node:i.get(u),path:h}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:o,channels:a}),n.animations.length-1}processSkin(e){const r=this.json,n=this.nodeMap,i=r.nodes[n.get(e)],s=e.skeleton;if(s===void 0)return null;const a=e.skeleton.bones[0];if(a===void 0)return null;const o=[],l=new Float32Array(s.bones.length*16),A=new je;for(let c=0;c<s.bones.length;++c)o.push(n.get(s.bones[c])),A.copy(s.boneInverses[c]),A.multiply(e.bindMatrix).toArray(l,c*16);return r.skins===void 0&&(r.skins=[]),r.skins.push({inverseBindMatrices:this.processAccessor(new lt(l,16)),joints:o,skeleton:n.get(a)}),i.skin=r.skins.length-1}processNode(e){const r=this.json,n=this.options,i=this.nodeMap;r.nodes||(r.nodes=[]);const s={};if(n.trs){const o=e.quaternion.toArray(),l=e.position.toArray(),A=e.scale.toArray();xm(o,[0,0,0,1])||(s.rotation=o),xm(l,[0,0,0])||(s.translation=l),xm(A,[1,1,1])||(s.scale=A)}else e.matrixAutoUpdate&&e.updateMatrix(),lle(e.matrix)===!1&&(s.matrix=e.matrix.elements);if(e.name!==""&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const o=this.processMesh(e);o!==null&&(s.mesh=o)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const o=[];for(let l=0,A=e.children.length;l<A;l++){const c=e.children[l];if(c.visible||n.onlyVisible===!1){const u=this.processNode(c);u!==null&&o.push(u)}}o.length>0&&(s.children=o)}this._invokeAll(function(o){o.writeNode&&o.writeNode(e,s)});const a=r.nodes.push(s)-1;return i.set(e,a),a}processScene(e){const r=this.json,n=this.options;r.scenes||(r.scenes=[],r.scene=0);const i={};e.name!==""&&(i.name=e.name),r.scenes.push(i);const s=[];for(let a=0,o=e.children.length;a<o;a++){const l=e.children[a];if(l.visible||n.onlyVisible===!1){const A=this.processNode(l);A!==null&&s.push(A)}}s.length>0&&(i.nodes=s),this.serializeUserData(e,i)}processObjects(e){const r=new zg;r.name="AuxScene";for(let n=0;n<e.length;n++)r.children.push(e[n]);this.processScene(r)}processInput(e){const r=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(i){i.beforeParse&&i.beforeParse(e)});const n=[];for(let i=0;i<e.length;i++)e[i]instanceof zg?this.processScene(e[i]):n.push(e[i]);n.length>0&&this.processObjects(n);for(let i=0;i<this.skins.length;++i)this.processSkin(this.skins[i]);for(let i=0;i<r.animations.length;++i)this.processAnimation(r.animations[i],e[0]);this._invokeAll(function(i){i.afterParse&&i.afterParse(e)})}_invokeAll(e){for(let r=0,n=this.plugins.length;r<n;r++)e(this.plugins[r])}}class ule{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,r){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}const n=this.writer,i=n.json,s=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(1-e.penumbra)*e.angle,a.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(i.extensions=i.extensions||{},i.extensions[this.name]={lights:[]},s[this.name]=!0);const o=i.extensions[this.name].lights;o.push(a),r.extensions=r.extensions||{},r.extensions[this.name]={light:o.length-1}}}class hle{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,r){if(!e.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;r.extensions=r.extensions||{},r.extensions[this.name]={},n[this.name]=!0,r.pbrMetallicRoughness.metallicFactor=0,r.pbrMetallicRoughness.roughnessFactor=.9}}class dle{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const a={index:n.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(a,e.clearcoatMap),s.clearcoatTexture=a}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const a={index:n.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(a,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=a}if(e.clearcoatNormalMap){const a={index:n.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(a.scale=e.clearcoatNormalScale.x),n.applyTextureTransform(a,e.clearcoatNormalMap),s.clearcoatNormalTexture=a}r.extensions=r.extensions||{},r.extensions[this.name]=s,i[this.name]=!0}}class fle{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;const n=this.writer.extensionsUsed,i={};i.dispersion=e.dispersion,r.extensions=r.extensions||{},r.extensions[this.name]=i,n[this.name]=!0}}class ple{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const a={index:n.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(a,e.iridescenceMap),s.iridescenceTexture=a}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const a={index:n.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(a,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=a}r.extensions=r.extensions||{},r.extensions[this.name]=s,i[this.name]=!0}}class mle{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const a={index:n.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(a,e.transmissionMap),s.transmissionTexture=a}r.extensions=r.extensions||{},r.extensions[this.name]=s,i[this.name]=!0}}class gle{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;const n=this.writer,i=n.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const a={index:n.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(a,e.thicknessMap),s.thicknessTexture=a}e.attenuationDistance!==1/0&&(s.attenuationDistance=e.attenuationDistance),s.attenuationColor=e.attenuationColor.toArray(),r.extensions=r.extensions||{},r.extensions[this.name]=s,i[this.name]=!0}}class vle{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;const n=this.writer.extensionsUsed,i={};i.ior=e.ior,r.extensions=r.extensions||{},r.extensions[this.name]=i,n[this.name]=!0}}class yle{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(rle)&&!e.specularIntensityMap&&!e.specularColorMap)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.specularIntensityMap){const a={index:n.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(a,e.specularIntensityMap),s.specularTexture=a}if(e.specularColorMap){const a={index:n.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(a,e.specularColorMap),s.specularColorTexture=a}s.specularFactor=e.specularIntensity,s.specularColorFactor=e.specularColor.toArray(),r.extensions=r.extensions||{},r.extensions[this.name]=s,i[this.name]=!0}}class wle{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.sheenRoughnessMap){const a={index:n.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(a,e.sheenRoughnessMap),s.sheenRoughnessTexture=a}if(e.sheenColorMap){const a={index:n.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(a,e.sheenColorMap),s.sheenColorTexture=a}s.sheenRoughnessFactor=e.sheenRoughness,s.sheenColorFactor=e.sheenColor.toArray(),r.extensions=r.extensions||{},r.extensions[this.name]=s,i[this.name]=!0}}class ble{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,r){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.anisotropyMap){const a={index:n.processTexture(e.anisotropyMap)};n.applyTextureTransform(a,e.anisotropyMap),s.anisotropyTexture=a}s.anisotropyStrength=e.anisotropy,s.anisotropyRotation=e.anisotropyRotation,r.extensions=r.extensions||{},r.extensions[this.name]=s,i[this.name]=!0}}class _le{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,r){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;const n=this.writer.extensionsUsed,i={};i.emissiveStrength=e.emissiveIntensity,r.extensions=r.extensions||{},r.extensions[this.name]=i,n[this.name]=!0}}class xle{constructor(e){this.writer=e,this.name="EXT_materials_bump"}writeMaterial(e,r){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;const n=this.writer,i=n.extensionsUsed,s={};if(e.bumpMap){const a={index:n.processTexture(e.bumpMap),texCoord:e.bumpMap.channel};n.applyTextureTransform(a,e.bumpMap),s.bumpTexture=a}s.bumpFactor=e.bumpScale,r.extensions=r.extensions||{},r.extensions[this.name]=s,i[this.name]=!0}}class Ele{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,r){if(!e.isInstancedMesh)return;const n=this.writer,i=e,s=new Float32Array(i.count*3),a=new Float32Array(i.count*4),o=new Float32Array(i.count*3),l=new je,A=new Y,c=new et,u=new Y;for(let d=0;d<i.count;d++)i.getMatrixAt(d,l),l.decompose(A,c,u),A.toArray(s,d*3),c.toArray(a,d*4),u.toArray(o,d*3);const h={TRANSLATION:n.processAccessor(new lt(s,3)),ROTATION:n.processAccessor(new lt(a,4)),SCALE:n.processAccessor(new lt(o,3))};i.instanceColor&&(h._COLOR_0=n.processAccessor(i.instanceColor)),r.extensions=r.extensions||{},r.extensions[this.name]={attributes:h},n.extensionsUsed[this.name]=!0,n.extensionsRequired[this.name]=!0}}KI.Utils={insertKeyframe:function(t,e){const r=t.getValueSize(),n=new t.TimeBufferType(t.times.length+1),i=new t.ValueBufferType(t.values.length+r),s=t.createInterpolant(new t.ValueBufferType(r));let a;if(t.times.length===0){n[0]=e;for(let o=0;o<r;o++)i[o]=0;a=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<.001)return 0;n[0]=e,n.set(t.times,1),i.set(s.evaluate(e),0),i.set(t.values,r),a=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<.001)return t.times.length-1;n[n.length-1]=e,n.set(t.times,0),i.set(t.values,0),i.set(s.evaluate(e),t.values.length),a=n.length-1}else for(let o=0;o<t.times.length;o++){if(Math.abs(t.times[o]-e)<.001)return o;if(t.times[o]<e&&t.times[o+1]>e){n.set(t.times.slice(0,o+1),0),n[o+1]=e,n.set(t.times.slice(o+1),o+2),i.set(t.values.slice(0,(o+1)*r),0),i.set(s.evaluate(e),(o+1)*r),i.set(t.values.slice((o+1)*r),(o+2)*r),a=o+1;break}}return t.times=n,t.values=i,a},mergeMorphTargetTracks:function(t,e){const r=[],n={},i=t.tracks;for(let s=0;s<i.length;++s){let a=i[s];const o=Tt.parseTrackName(a.name),l=Tt.findNode(e,o.nodeName);if(o.propertyName!=="morphTargetInfluences"||o.propertyIndex===void 0){r.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(Lf)}const A=l.morphTargetInfluences.length,c=l.morphTargetDictionary[o.propertyIndex];if(c===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+o.propertyIndex);let u;if(n[l.uuid]===void 0){u=a.clone();const d=new u.ValueBufferType(A*u.times.length);for(let f=0;f<u.times.length;f++)d[f*A+c]=u.values[f];u.name=(o.nodeName||"")+".morphTargetInfluences",u.values=d,n[l.uuid]=u,r.push(u);continue}const h=a.createInterpolant(new a.ValueBufferType(1));u=n[l.uuid];for(let d=0;d<u.times.length;d++)u.values[d*A+c]=h.evaluate(u.times[d]);for(let d=0;d<a.times.length;d++){const f=this.insertKeyframe(u,a.times[d]);u.values[f*A+c]=a.values[d]}}return t.tracks=r,t}};var lj={},b_={};b_.byteLength=Tle;b_.toByteArray=Sle;b_.fromByteArray=Ule;var ko=[],ra=[],Ble=typeof Uint8Array<"u"?Uint8Array:Array,hB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var xh=0,Mle=hB.length;xh<Mle;++xh)ko[xh]=hB[xh],ra[hB.charCodeAt(xh)]=xh;ra["-".charCodeAt(0)]=62;ra["_".charCodeAt(0)]=63;function Aj(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Tle(t){var e=Aj(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Cle(t,e,r){return(e+r)*3/4-r}function Sle(t){var e,r=Aj(t),n=r[0],i=r[1],s=new Ble(Cle(t,n,i)),a=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)e=ra[t.charCodeAt(l)]<<18|ra[t.charCodeAt(l+1)]<<12|ra[t.charCodeAt(l+2)]<<6|ra[t.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=ra[t.charCodeAt(l)]<<2|ra[t.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=ra[t.charCodeAt(l)]<<10|ra[t.charCodeAt(l+1)]<<4|ra[t.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function Ile(t){return ko[t>>18&63]+ko[t>>12&63]+ko[t>>6&63]+ko[t&63]}function Rle(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Ile(n));return i.join("")}function Ule(t){for(var e,r=t.length,n=r%3,i=[],s=16383,a=0,o=r-n;a<o;a+=s)i.push(Rle(t,a,a+s>o?o:a+s));return n===1?(e=t[r-1],i.push(ko[e>>2]+ko[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(ko[e>>10]+ko[e>>4&63]+ko[e<<2&63]+"=")),i.join("")}var YI={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */YI.read=function(t,e,r,n,i){var s,a,o=i*8-n-1,l=(1<<o)-1,A=l>>1,c=-7,u=r?i-1:0,h=r?-1:1,d=t[e+u];for(u+=h,s=d&(1<<-c)-1,d>>=-c,c+=o;c>0;s=s*256+t[e+u],u+=h,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;c>0;a=a*256+t[e+u],u+=h,c-=8);if(s===0)s=1-A;else{if(s===l)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-A}return(d?-1:1)*a*Math.pow(2,s-n)};YI.write=function(t,e,r,n,i,s){var a,o,l,A=s*8-i-1,c=(1<<A)-1,u=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,f=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+u>=1?e+=h/l:e+=h*Math.pow(2,1-u),e*l>=2&&(a++,l/=2),a+u>=c?(o=0,a=c):a+u>=1?(o=(e*l-1)*Math.pow(2,i),a=a+u):(o=e*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=o&255,d+=f,o/=256,i-=8);for(a=a<<i|o,A+=i;A>0;t[r+d]=a&255,d+=f,a/=256,A-=8);t[r+d-f]|=m*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=b_,r=YI,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const C=new Uint8Array(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,Uint8Array.prototype),Object.setPrototypeOf(C,P),C.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function a(C){if(C>i)throw new RangeError('The value "'+C+'" is invalid for option "size"');const P=new Uint8Array(C);return Object.setPrototypeOf(P,o.prototype),P}function o(C,P,G){if(typeof C=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(C)}return l(C,P,G)}o.poolSize=8192;function l(C,P,G){if(typeof C=="string")return h(C,P);if(ArrayBuffer.isView(C))return f(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(J(C,ArrayBuffer)||C&&J(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(J(C,SharedArrayBuffer)||C&&J(C.buffer,SharedArrayBuffer)))return m(C,P,G);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const te=C.valueOf&&C.valueOf();if(te!=null&&te!==C)return o.from(te,P,G);const ae=g(C);if(ae)return ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return o.from(C[Symbol.toPrimitive]("string"),P,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}o.from=function(C,P,G){return l(C,P,G)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function A(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function c(C,P,G){return A(C),C<=0?a(C):P!==void 0?typeof G=="string"?a(C).fill(P,G):a(C).fill(P):a(C)}o.alloc=function(C,P,G){return c(C,P,G)};function u(C){return A(C),a(C<0?0:p(C)|0)}o.allocUnsafe=function(C){return u(C)},o.allocUnsafeSlow=function(C){return u(C)};function h(C,P){if((typeof P!="string"||P==="")&&(P="utf8"),!o.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const G=y(C,P)|0;let te=a(G);const ae=te.write(C,P);return ae!==G&&(te=te.slice(0,ae)),te}function d(C){const P=C.length<0?0:p(C.length)|0,G=a(P);for(let te=0;te<P;te+=1)G[te]=C[te]&255;return G}function f(C){if(J(C,Uint8Array)){const P=new Uint8Array(C);return m(P.buffer,P.byteOffset,P.byteLength)}return d(C)}function m(C,P,G){if(P<0||C.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<P+(G||0))throw new RangeError('"length" is outside of buffer bounds');let te;return P===void 0&&G===void 0?te=new Uint8Array(C):G===void 0?te=new Uint8Array(C,P):te=new Uint8Array(C,P,G),Object.setPrototypeOf(te,o.prototype),te}function g(C){if(o.isBuffer(C)){const P=p(C.length)|0,G=a(P);return G.length===0||C.copy(G,0,0,P),G}if(C.length!==void 0)return typeof C.length!="number"||K(C.length)?a(0):d(C);if(C.type==="Buffer"&&Array.isArray(C.data))return d(C.data)}function p(C){if(C>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return C|0}function v(C){return+C!=C&&(C=0),o.alloc(+C)}o.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==o.prototype},o.compare=function(C,P){if(J(C,Uint8Array)&&(C=o.from(C,C.offset,C.byteLength)),J(P,Uint8Array)&&(P=o.from(P,P.offset,P.byteLength)),!o.isBuffer(C)||!o.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===P)return 0;let G=C.length,te=P.length;for(let ae=0,pe=Math.min(G,te);ae<pe;++ae)if(C[ae]!==P[ae]){G=C[ae],te=P[ae];break}return G<te?-1:te<G?1:0},o.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(C,P){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return o.alloc(0);let G;if(P===void 0)for(P=0,G=0;G<C.length;++G)P+=C[G].length;const te=o.allocUnsafe(P);let ae=0;for(G=0;G<C.length;++G){let pe=C[G];if(J(pe,Uint8Array))ae+pe.length>te.length?(o.isBuffer(pe)||(pe=o.from(pe)),pe.copy(te,ae)):Uint8Array.prototype.set.call(te,pe,ae);else if(o.isBuffer(pe))pe.copy(te,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=pe.length}return te};function y(C,P){if(o.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||J(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const G=C.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&G===0)return 0;let ae=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return Z(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return W(C).length;default:if(ae)return te?-1:Z(C).length;P=(""+P).toLowerCase(),ae=!0}}o.byteLength=y;function _(C,P,G){let te=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,P>>>=0,G<=P))return"";for(C||(C="utf8");;)switch(C){case"hex":return z(this,P,G);case"utf8":case"utf-8":return b(this,P,G);case"ascii":return k(this,P,G);case"latin1":case"binary":return Q(this,P,G);case"base64":return w(this,P,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,P,G);default:if(te)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),te=!0}}o.prototype._isBuffer=!0;function E(C,P,G){const te=C[P];C[P]=C[G],C[G]=te}o.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let P=0;P<C;P+=2)E(this,P,P+1);return this},o.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let P=0;P<C;P+=4)E(this,P,P+3),E(this,P+1,P+2);return this},o.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let P=0;P<C;P+=8)E(this,P,P+7),E(this,P+1,P+6),E(this,P+2,P+5),E(this,P+3,P+4);return this},o.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?b(this,0,C):_.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(C){if(!o.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:o.compare(this,C)===0},o.prototype.inspect=function(){let C="";const P=t.INSPECT_MAX_BYTES;return C=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(C+=" ... "),"<Buffer "+C+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(C,P,G,te,ae){if(J(C,Uint8Array)&&(C=o.from(C,C.offset,C.byteLength)),!o.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(P===void 0&&(P=0),G===void 0&&(G=C?C.length:0),te===void 0&&(te=0),ae===void 0&&(ae=this.length),P<0||G>C.length||te<0||ae>this.length)throw new RangeError("out of range index");if(te>=ae&&P>=G)return 0;if(te>=ae)return-1;if(P>=G)return 1;if(P>>>=0,G>>>=0,te>>>=0,ae>>>=0,this===C)return 0;let pe=ae-te,ve=G-P;const Ie=Math.min(pe,ve),ke=this.slice(te,ae),Le=C.slice(P,G);for(let Oe=0;Oe<Ie;++Oe)if(ke[Oe]!==Le[Oe]){pe=ke[Oe],ve=Le[Oe];break}return pe<ve?-1:ve<pe?1:0};function x(C,P,G,te,ae){if(C.length===0)return-1;if(typeof G=="string"?(te=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,K(G)&&(G=ae?0:C.length-1),G<0&&(G=C.length+G),G>=C.length){if(ae)return-1;G=C.length-1}else if(G<0)if(ae)G=0;else return-1;if(typeof P=="string"&&(P=o.from(P,te)),o.isBuffer(P))return P.length===0?-1:B(C,P,G,te,ae);if(typeof P=="number")return P=P&255,typeof Uint8Array.prototype.indexOf=="function"?ae?Uint8Array.prototype.indexOf.call(C,P,G):Uint8Array.prototype.lastIndexOf.call(C,P,G):B(C,[P],G,te,ae);throw new TypeError("val must be string, number or Buffer")}function B(C,P,G,te,ae){let pe=1,ve=C.length,Ie=P.length;if(te!==void 0&&(te=String(te).toLowerCase(),te==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(C.length<2||P.length<2)return-1;pe=2,ve/=2,Ie/=2,G/=2}function ke(Oe,ue){return pe===1?Oe[ue]:Oe.readUInt16BE(ue*pe)}let Le;if(ae){let Oe=-1;for(Le=G;Le<ve;Le++)if(ke(C,Le)===ke(P,Oe===-1?0:Le-Oe)){if(Oe===-1&&(Oe=Le),Le-Oe+1===Ie)return Oe*pe}else Oe!==-1&&(Le-=Le-Oe),Oe=-1}else for(G+Ie>ve&&(G=ve-Ie),Le=G;Le>=0;Le--){let Oe=!0;for(let ue=0;ue<Ie;ue++)if(ke(C,Le+ue)!==ke(P,ue)){Oe=!1;break}if(Oe)return Le}return-1}o.prototype.includes=function(C,P,G){return this.indexOf(C,P,G)!==-1},o.prototype.indexOf=function(C,P,G){return x(this,C,P,G,!0)},o.prototype.lastIndexOf=function(C,P,G){return x(this,C,P,G,!1)};function M(C,P,G,te){G=Number(G)||0;const ae=C.length-G;te?(te=Number(te),te>ae&&(te=ae)):te=ae;const pe=P.length;te>pe/2&&(te=pe/2);let ve;for(ve=0;ve<te;++ve){const Ie=parseInt(P.substr(ve*2,2),16);if(K(Ie))return ve;C[G+ve]=Ie}return ve}function R(C,P,G,te){return V(Z(P,C.length-G),C,G,te)}function I(C,P,G,te){return V($(P),C,G,te)}function L(C,P,G,te){return V(W(P),C,G,te)}function D(C,P,G,te){return V(ce(P,C.length-G),C,G,te)}o.prototype.write=function(C,P,G,te){if(P===void 0)te="utf8",G=this.length,P=0;else if(G===void 0&&typeof P=="string")te=P,G=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(G)?(G=G>>>0,te===void 0&&(te="utf8")):(te=G,G=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-P;if((G===void 0||G>ae)&&(G=ae),C.length>0&&(G<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let pe=!1;for(;;)switch(te){case"hex":return M(this,C,P,G);case"utf8":case"utf-8":return R(this,C,P,G);case"ascii":case"latin1":case"binary":return I(this,C,P,G);case"base64":return L(this,C,P,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,C,P,G);default:if(pe)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),pe=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(C,P,G){return P===0&&G===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(P,G))}function b(C,P,G){G=Math.min(C.length,G);const te=[];let ae=P;for(;ae<G;){const pe=C[ae];let ve=null,Ie=pe>239?4:pe>223?3:pe>191?2:1;if(ae+Ie<=G){let ke,Le,Oe,ue;switch(Ie){case 1:pe<128&&(ve=pe);break;case 2:ke=C[ae+1],(ke&192)===128&&(ue=(pe&31)<<6|ke&63,ue>127&&(ve=ue));break;case 3:ke=C[ae+1],Le=C[ae+2],(ke&192)===128&&(Le&192)===128&&(ue=(pe&15)<<12|(ke&63)<<6|Le&63,ue>2047&&(ue<55296||ue>57343)&&(ve=ue));break;case 4:ke=C[ae+1],Le=C[ae+2],Oe=C[ae+3],(ke&192)===128&&(Le&192)===128&&(Oe&192)===128&&(ue=(pe&15)<<18|(ke&63)<<12|(Le&63)<<6|Oe&63,ue>65535&&ue<1114112&&(ve=ue))}}ve===null?(ve=65533,Ie=1):ve>65535&&(ve-=65536,te.push(ve>>>10&1023|55296),ve=56320|ve&1023),te.push(ve),ae+=Ie}return F(te)}const S=4096;function F(C){const P=C.length;if(P<=S)return String.fromCharCode.apply(String,C);let G="",te=0;for(;te<P;)G+=String.fromCharCode.apply(String,C.slice(te,te+=S));return G}function k(C,P,G){let te="";G=Math.min(C.length,G);for(let ae=P;ae<G;++ae)te+=String.fromCharCode(C[ae]&127);return te}function Q(C,P,G){let te="";G=Math.min(C.length,G);for(let ae=P;ae<G;++ae)te+=String.fromCharCode(C[ae]);return te}function z(C,P,G){const te=C.length;(!P||P<0)&&(P=0),(!G||G<0||G>te)&&(G=te);let ae="";for(let pe=P;pe<G;++pe)ae+=fe[C[pe]];return ae}function j(C,P,G){const te=C.slice(P,G);let ae="";for(let pe=0;pe<te.length-1;pe+=2)ae+=String.fromCharCode(te[pe]+te[pe+1]*256);return ae}o.prototype.slice=function(C,P){const G=this.length;C=~~C,P=P===void 0?G:~~P,C<0?(C+=G,C<0&&(C=0)):C>G&&(C=G),P<0?(P+=G,P<0&&(P=0)):P>G&&(P=G),P<C&&(P=C);const te=this.subarray(C,P);return Object.setPrototypeOf(te,o.prototype),te};function T(C,P,G){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+P>G)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(C,P,G){C=C>>>0,P=P>>>0,G||T(C,P,this.length);let te=this[C],ae=1,pe=0;for(;++pe<P&&(ae*=256);)te+=this[C+pe]*ae;return te},o.prototype.readUintBE=o.prototype.readUIntBE=function(C,P,G){C=C>>>0,P=P>>>0,G||T(C,P,this.length);let te=this[C+--P],ae=1;for(;P>0&&(ae*=256);)te+=this[C+--P]*ae;return te},o.prototype.readUint8=o.prototype.readUInt8=function(C,P){return C=C>>>0,P||T(C,1,this.length),this[C]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(C,P){return C=C>>>0,P||T(C,2,this.length),this[C]|this[C+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(C,P){return C=C>>>0,P||T(C,2,this.length),this[C]<<8|this[C+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(C,P){return C=C>>>0,P||T(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(C,P){return C=C>>>0,P||T(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},o.prototype.readBigUInt64LE=ie(function(C){C=C>>>0,re(C,"offset");const P=this[C],G=this[C+7];(P===void 0||G===void 0)&&N(C,this.length-8);const te=P+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,ae=this[++C]+this[++C]*2**8+this[++C]*2**16+G*2**24;return BigInt(te)+(BigInt(ae)<<BigInt(32))}),o.prototype.readBigUInt64BE=ie(function(C){C=C>>>0,re(C,"offset");const P=this[C],G=this[C+7];(P===void 0||G===void 0)&&N(C,this.length-8);const te=P*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],ae=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+G;return(BigInt(te)<<BigInt(32))+BigInt(ae)}),o.prototype.readIntLE=function(C,P,G){C=C>>>0,P=P>>>0,G||T(C,P,this.length);let te=this[C],ae=1,pe=0;for(;++pe<P&&(ae*=256);)te+=this[C+pe]*ae;return ae*=128,te>=ae&&(te-=Math.pow(2,8*P)),te},o.prototype.readIntBE=function(C,P,G){C=C>>>0,P=P>>>0,G||T(C,P,this.length);let te=P,ae=1,pe=this[C+--te];for(;te>0&&(ae*=256);)pe+=this[C+--te]*ae;return ae*=128,pe>=ae&&(pe-=Math.pow(2,8*P)),pe},o.prototype.readInt8=function(C,P){return C=C>>>0,P||T(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},o.prototype.readInt16LE=function(C,P){C=C>>>0,P||T(C,2,this.length);const G=this[C]|this[C+1]<<8;return G&32768?G|4294901760:G},o.prototype.readInt16BE=function(C,P){C=C>>>0,P||T(C,2,this.length);const G=this[C+1]|this[C]<<8;return G&32768?G|4294901760:G},o.prototype.readInt32LE=function(C,P){return C=C>>>0,P||T(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},o.prototype.readInt32BE=function(C,P){return C=C>>>0,P||T(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},o.prototype.readBigInt64LE=ie(function(C){C=C>>>0,re(C,"offset");const P=this[C],G=this[C+7];(P===void 0||G===void 0)&&N(C,this.length-8);const te=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(G<<24);return(BigInt(te)<<BigInt(32))+BigInt(P+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),o.prototype.readBigInt64BE=ie(function(C){C=C>>>0,re(C,"offset");const P=this[C],G=this[C+7];(P===void 0||G===void 0)&&N(C,this.length-8);const te=(P<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(te)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+G)}),o.prototype.readFloatLE=function(C,P){return C=C>>>0,P||T(C,4,this.length),r.read(this,C,!0,23,4)},o.prototype.readFloatBE=function(C,P){return C=C>>>0,P||T(C,4,this.length),r.read(this,C,!1,23,4)},o.prototype.readDoubleLE=function(C,P){return C=C>>>0,P||T(C,8,this.length),r.read(this,C,!0,52,8)},o.prototype.readDoubleBE=function(C,P){return C=C>>>0,P||T(C,8,this.length),r.read(this,C,!1,52,8)};function H(C,P,G,te,ae,pe){if(!o.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>ae||P<pe)throw new RangeError('"value" argument is out of bounds');if(G+te>C.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(C,P,G,te){if(C=+C,P=P>>>0,G=G>>>0,!te){const ve=Math.pow(2,8*G)-1;H(this,C,P,G,ve,0)}let ae=1,pe=0;for(this[P]=C&255;++pe<G&&(ae*=256);)this[P+pe]=C/ae&255;return P+G},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(C,P,G,te){if(C=+C,P=P>>>0,G=G>>>0,!te){const ve=Math.pow(2,8*G)-1;H(this,C,P,G,ve,0)}let ae=G-1,pe=1;for(this[P+ae]=C&255;--ae>=0&&(pe*=256);)this[P+ae]=C/pe&255;return P+G},o.prototype.writeUint8=o.prototype.writeUInt8=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,1,255,0),this[P]=C&255,P+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,2,65535,0),this[P]=C&255,this[P+1]=C>>>8,P+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,2,65535,0),this[P]=C>>>8,this[P+1]=C&255,P+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,4,4294967295,0),this[P+3]=C>>>24,this[P+2]=C>>>16,this[P+1]=C>>>8,this[P]=C&255,P+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,4,4294967295,0),this[P]=C>>>24,this[P+1]=C>>>16,this[P+2]=C>>>8,this[P+3]=C&255,P+4};function me(C,P,G,te,ae){Te(P,te,ae,C,G,7);let pe=Number(P&BigInt(4294967295));C[G++]=pe,pe=pe>>8,C[G++]=pe,pe=pe>>8,C[G++]=pe,pe=pe>>8,C[G++]=pe;let ve=Number(P>>BigInt(32)&BigInt(4294967295));return C[G++]=ve,ve=ve>>8,C[G++]=ve,ve=ve>>8,C[G++]=ve,ve=ve>>8,C[G++]=ve,G}function ee(C,P,G,te,ae){Te(P,te,ae,C,G,7);let pe=Number(P&BigInt(4294967295));C[G+7]=pe,pe=pe>>8,C[G+6]=pe,pe=pe>>8,C[G+5]=pe,pe=pe>>8,C[G+4]=pe;let ve=Number(P>>BigInt(32)&BigInt(4294967295));return C[G+3]=ve,ve=ve>>8,C[G+2]=ve,ve=ve>>8,C[G+1]=ve,ve=ve>>8,C[G]=ve,G+8}o.prototype.writeBigUInt64LE=ie(function(C,P=0){return me(this,C,P,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=ie(function(C,P=0){return ee(this,C,P,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(C,P,G,te){if(C=+C,P=P>>>0,!te){const Ie=Math.pow(2,8*G-1);H(this,C,P,G,Ie-1,-Ie)}let ae=0,pe=1,ve=0;for(this[P]=C&255;++ae<G&&(pe*=256);)C<0&&ve===0&&this[P+ae-1]!==0&&(ve=1),this[P+ae]=(C/pe>>0)-ve&255;return P+G},o.prototype.writeIntBE=function(C,P,G,te){if(C=+C,P=P>>>0,!te){const Ie=Math.pow(2,8*G-1);H(this,C,P,G,Ie-1,-Ie)}let ae=G-1,pe=1,ve=0;for(this[P+ae]=C&255;--ae>=0&&(pe*=256);)C<0&&ve===0&&this[P+ae+1]!==0&&(ve=1),this[P+ae]=(C/pe>>0)-ve&255;return P+G},o.prototype.writeInt8=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,1,127,-128),C<0&&(C=255+C+1),this[P]=C&255,P+1},o.prototype.writeInt16LE=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,2,32767,-32768),this[P]=C&255,this[P+1]=C>>>8,P+2},o.prototype.writeInt16BE=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,2,32767,-32768),this[P]=C>>>8,this[P+1]=C&255,P+2},o.prototype.writeInt32LE=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,4,2147483647,-2147483648),this[P]=C&255,this[P+1]=C>>>8,this[P+2]=C>>>16,this[P+3]=C>>>24,P+4},o.prototype.writeInt32BE=function(C,P,G){return C=+C,P=P>>>0,G||H(this,C,P,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[P]=C>>>24,this[P+1]=C>>>16,this[P+2]=C>>>8,this[P+3]=C&255,P+4},o.prototype.writeBigInt64LE=ie(function(C,P=0){return me(this,C,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=ie(function(C,P=0){return ee(this,C,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function U(C,P,G,te,ae,pe){if(G+te>C.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function se(C,P,G,te,ae){return P=+P,G=G>>>0,ae||U(C,P,G,4),r.write(C,P,G,te,23,4),G+4}o.prototype.writeFloatLE=function(C,P,G){return se(this,C,P,!0,G)},o.prototype.writeFloatBE=function(C,P,G){return se(this,C,P,!1,G)};function le(C,P,G,te,ae){return P=+P,G=G>>>0,ae||U(C,P,G,8),r.write(C,P,G,te,52,8),G+8}o.prototype.writeDoubleLE=function(C,P,G){return le(this,C,P,!0,G)},o.prototype.writeDoubleBE=function(C,P,G){return le(this,C,P,!1,G)},o.prototype.copy=function(C,P,G,te){if(!o.isBuffer(C))throw new TypeError("argument should be a Buffer");if(G||(G=0),!te&&te!==0&&(te=this.length),P>=C.length&&(P=C.length),P||(P=0),te>0&&te<G&&(te=G),te===G||C.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),C.length-P<te-G&&(te=C.length-P+G);const ae=te-G;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(P,G,te):Uint8Array.prototype.set.call(C,this.subarray(G,te),P),ae},o.prototype.fill=function(C,P,G,te){if(typeof C=="string"){if(typeof P=="string"?(te=P,P=0,G=this.length):typeof G=="string"&&(te=G,G=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!o.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(C.length===1){const pe=C.charCodeAt(0);(te==="utf8"&&pe<128||te==="latin1")&&(C=pe)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(P<0||this.length<P||this.length<G)throw new RangeError("Out of range index");if(G<=P)return this;P=P>>>0,G=G===void 0?this.length:G>>>0,C||(C=0);let ae;if(typeof C=="number")for(ae=P;ae<G;++ae)this[ae]=C;else{const pe=o.isBuffer(C)?C:o.from(C,te),ve=pe.length;if(ve===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(ae=0;ae<G-P;++ae)this[ae+P]=pe[ae%ve]}return this};const Ae={};function ge(C,P,G){Ae[C]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(C,P){return`The "${C}" argument must be of type number. Received type ${typeof P}`},TypeError),ge("ERR_OUT_OF_RANGE",function(C,P,G){let te=`The value of "${C}" is out of range.`,ae=G;return Number.isInteger(G)&&Math.abs(G)>2**32?ae=ne(String(G)):typeof G=="bigint"&&(ae=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(ae=ne(ae)),ae+="n"),te+=` It must be ${P}. Received ${ae}`,te},RangeError);function ne(C){let P="",G=C.length;const te=C[0]==="-"?1:0;for(;G>=te+4;G-=3)P=`_${C.slice(G-3,G)}${P}`;return`${C.slice(0,G)}${P}`}function de(C,P,G){re(P,"offset"),(C[P]===void 0||C[P+G]===void 0)&&N(P,C.length-(G+1))}function Te(C,P,G,te,ae,pe){if(C>G||C<P){const ve=typeof P=="bigint"?"n":"";let Ie;throw pe>3?P===0||P===BigInt(0)?Ie=`>= 0${ve} and < 2${ve} ** ${(pe+1)*8}${ve}`:Ie=`>= -(2${ve} ** ${(pe+1)*8-1}${ve}) and < 2 ** ${(pe+1)*8-1}${ve}`:Ie=`>= ${P}${ve} and <= ${G}${ve}`,new Ae.ERR_OUT_OF_RANGE("value",Ie,C)}de(te,ae,pe)}function re(C,P){if(typeof C!="number")throw new Ae.ERR_INVALID_ARG_TYPE(P,"number",C)}function N(C,P,G){throw Math.floor(C)!==C?(re(C,G),new Ae.ERR_OUT_OF_RANGE(G||"offset","an integer",C)):P<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE(G||"offset",`>= ${G?1:0} and <= ${P}`,C)}const he=/[^+/0-9A-Za-z-_]/g;function oe(C){if(C=C.split("=")[0],C=C.trim().replace(he,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function Z(C,P){P=P||1/0;let G;const te=C.length;let ae=null;const pe=[];for(let ve=0;ve<te;++ve){if(G=C.charCodeAt(ve),G>55295&&G<57344){if(!ae){if(G>56319){(P-=3)>-1&&pe.push(239,191,189);continue}else if(ve+1===te){(P-=3)>-1&&pe.push(239,191,189);continue}ae=G;continue}if(G<56320){(P-=3)>-1&&pe.push(239,191,189),ae=G;continue}G=(ae-55296<<10|G-56320)+65536}else ae&&(P-=3)>-1&&pe.push(239,191,189);if(ae=null,G<128){if((P-=1)<0)break;pe.push(G)}else if(G<2048){if((P-=2)<0)break;pe.push(G>>6|192,G&63|128)}else if(G<65536){if((P-=3)<0)break;pe.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if((P-=4)<0)break;pe.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return pe}function $(C){const P=[];for(let G=0;G<C.length;++G)P.push(C.charCodeAt(G)&255);return P}function ce(C,P){let G,te,ae;const pe=[];for(let ve=0;ve<C.length&&!((P-=2)<0);++ve)G=C.charCodeAt(ve),te=G>>8,ae=G%256,pe.push(ae),pe.push(te);return pe}function W(C){return e.toByteArray(oe(C))}function V(C,P,G,te){let ae;for(ae=0;ae<te&&!(ae+G>=P.length||ae>=C.length);++ae)P[ae+G]=C[ae];return ae}function J(C,P){return C instanceof P||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===P.name}function K(C){return C!==C}const fe=function(){const C="0123456789abcdef",P=new Array(256);for(let G=0;G<16;++G){const te=G*16;for(let ae=0;ae<16;++ae)P[te+ae]=C[G]+C[ae]}return P}();function ie(C){return typeof BigInt>"u"?Ee:C}function Ee(){throw new Error("BigInt not supported")}})(lj);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var NC=function(t,e){return NC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},NC(t,e)};function Ao(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");NC(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function $s(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})}function ps(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(A){return function(c){return l([A,c])}}function l(A){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=A[0]&2?i.return:A[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,A[1])).done)return s;switch(i=0,s&&(A=[A[0]&2,s.value]),A[0]){case 0:case 1:s=A;break;case 4:return r.label++,{value:A[1],done:!1};case 5:r.label++,i=A[1],A=[0];continue;case 7:A=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(A[0]===6||A[0]===2)){r=0;continue}if(A[0]===3&&(!s||A[1]>s[0]&&A[1]<s[3])){r.label=A[1];break}if(A[0]===6&&r.label<s[1]){r.label=s[1],s=A;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(A);break}s[2]&&r.ops.pop(),r.trys.pop();continue}A=e.call(t,r)}catch(c){A=[6,c],i=0}finally{n=s=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}var Du=function(){function t(e,r,n,i){this.left=e,this.top=r,this.width=n,this.height=i}return t.prototype.add=function(e,r,n,i){return new t(this.left+e,this.top+r,this.width+n,this.height+i)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(i){return i.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),XI=function(t,e){return Du.fromClientRect(t,e.getBoundingClientRect())},__=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e},ln=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],i=-1,s="";++i<r;){var a=t[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},PL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fle=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yv=0;Yv<PL.length;Yv++)Fle[PL.charCodeAt(Yv)]=Yv;var OL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Em=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xv=0;Xv<OL.length;Xv++)Em[OL.charCodeAt(Xv)]=Xv;var kle=function(t){var e=t.length*.75,r=t.length,n,i=0,s,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)s=Em[t.charCodeAt(n)],a=Em[t.charCodeAt(n+1)],o=Em[t.charCodeAt(n+2)],l=Em[t.charCodeAt(n+3)],c[i++]=s<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|l&63;return A},Lle=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},Ple=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},xu=5,ZI=6+5,dB=2,Ole=ZI-xu,cj=65536>>xu,Dle=1<<xu,fB=Dle-1,Nle=1024>>xu,Qle=cj+Nle,Hle=Qle,jle=32,zle=Hle+jle,Gle=65536>>ZI,Vle=1<<Ole,Wle=Vle-1,DL=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Kle=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Yle=function(t,e){var r=kle(t),n=Array.isArray(r)?Ple(r):new Uint32Array(r),i=Array.isArray(r)?Lle(r):new Uint16Array(r),s=24,a=DL(i,s/2,n[4]/2),o=n[5]===2?DL(i,(s+n[4])/2):Kle(n,Math.ceil((s+n[4])/4));return new Xle(n[0],n[1],n[2],n[3],a,o)},Xle=function(){function t(e,r,n,i,s,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>xu],r=(r<<dB)+(e&fB),this.data[r];if(e<=65535)return r=this.index[cj+(e-55296>>xu)],r=(r<<dB)+(e&fB),this.data[r];if(e<this.highStart)return r=zle-Gle+(e>>ZI),r=this.index[r],r+=e>>xu&Wle,r=this.index[r],r=(r<<dB)+(e&fB),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),NL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zle=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zv=0;Zv<NL.length;Zv++)Zle[NL.charCodeAt(Zv)]=Zv;var Jle="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",QL=50,qle=1,uj=2,hj=3,$le=4,eAe=5,HL=7,dj=8,jL=9,XA=10,QC=11,zL=12,HC=13,tAe=14,Bm=15,jC=16,Jv=17,Hp=18,rAe=19,GL=20,zC=21,jp=22,pB=23,Eh=24,ms=25,Mm=26,Tm=27,Bh=28,nAe=29,Qd=30,iAe=31,qv=32,$v=33,GC=34,VC=35,WC=36,Xg=37,KC=38,Sw=39,Iw=40,mB=41,fj=42,sAe=43,aAe=[9001,65288],pj="!",Si="",ey="",YC=Yle(Jle),ml=[Qd,WC],XC=[qle,uj,hj,eAe],mj=[XA,dj],VL=[Tm,Mm],oAe=XC.concat(mj),WL=[KC,Sw,Iw,GC,VC],lAe=[Bm,HC],AAe=function(t,e){e===void 0&&(e="strict");var r=[],n=[],i=[];return t.forEach(function(s,a){var o=YC.get(s);if(o>QL?(i.push(!0),o-=QL):i.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(a),r.push(jC);if(o===$le||o===QC){if(a===0)return n.push(a),r.push(Qd);var l=r[a-1];return oAe.indexOf(l)===-1?(n.push(n[a-1]),r.push(l)):(n.push(a),r.push(Qd))}if(n.push(a),o===iAe)return r.push(e==="strict"?zC:Xg);if(o===fj||o===nAe)return r.push(Qd);if(o===sAe)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Xg):r.push(Qd);r.push(o)}),[n,r,i]},gB=function(t,e,r,n){var i=n[r];if(Array.isArray(t)?t.indexOf(i)!==-1:t===i)for(var s=r;s<=n.length;){s++;var a=n[s];if(a===e)return!0;if(a!==XA)break}if(i===XA)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var a=n[l];if(a===e)return!0;if(a!==XA)break}if(o!==XA)break}return!1},KL=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===XA)r--;else return n}return 0},cAe=function(t,e,r,n,i){if(r[n]===0)return Si;var s=n-1;if(Array.isArray(i)&&i[s]===!0)return Si;var a=s-1,o=s+1,l=e[s],A=a>=0?e[a]:0,c=e[o];if(l===uj&&c===hj)return Si;if(XC.indexOf(l)!==-1)return pj;if(XC.indexOf(c)!==-1||mj.indexOf(c)!==-1)return Si;if(KL(s,e)===dj)return ey;if(YC.get(t[s])===QC||(l===qv||l===$v)&&YC.get(t[o])===QC||l===HL||c===HL||l===jL||[XA,HC,Bm].indexOf(l)===-1&&c===jL||[Jv,Hp,rAe,Eh,Bh].indexOf(c)!==-1||KL(s,e)===jp||gB(pB,jp,s,e)||gB([Jv,Hp],zC,s,e)||gB(zL,zL,s,e))return Si;if(l===XA)return ey;if(l===pB||c===pB)return Si;if(c===jC||l===jC)return ey;if([HC,Bm,zC].indexOf(c)!==-1||l===tAe||A===WC&&lAe.indexOf(l)!==-1||l===Bh&&c===WC||c===GL||ml.indexOf(c)!==-1&&l===ms||ml.indexOf(l)!==-1&&c===ms||l===Tm&&[Xg,qv,$v].indexOf(c)!==-1||[Xg,qv,$v].indexOf(l)!==-1&&c===Mm||ml.indexOf(l)!==-1&&VL.indexOf(c)!==-1||VL.indexOf(l)!==-1&&ml.indexOf(c)!==-1||[Tm,Mm].indexOf(l)!==-1&&(c===ms||[jp,Bm].indexOf(c)!==-1&&e[o+1]===ms)||[jp,Bm].indexOf(l)!==-1&&c===ms||l===ms&&[ms,Bh,Eh].indexOf(c)!==-1)return Si;if([ms,Bh,Eh,Jv,Hp].indexOf(c)!==-1)for(var u=s;u>=0;){var h=e[u];if(h===ms)return Si;if([Bh,Eh].indexOf(h)!==-1)u--;else break}if([Tm,Mm].indexOf(c)!==-1)for(var u=[Jv,Hp].indexOf(l)!==-1?a:s;u>=0;){var h=e[u];if(h===ms)return Si;if([Bh,Eh].indexOf(h)!==-1)u--;else break}if(KC===l&&[KC,Sw,GC,VC].indexOf(c)!==-1||[Sw,GC].indexOf(l)!==-1&&[Sw,Iw].indexOf(c)!==-1||[Iw,VC].indexOf(l)!==-1&&c===Iw||WL.indexOf(l)!==-1&&[GL,Mm].indexOf(c)!==-1||WL.indexOf(c)!==-1&&l===Tm||ml.indexOf(l)!==-1&&ml.indexOf(c)!==-1||l===Eh&&ml.indexOf(c)!==-1||ml.concat(ms).indexOf(l)!==-1&&c===jp&&aAe.indexOf(t[o])===-1||ml.concat(ms).indexOf(c)!==-1&&l===Hp)return Si;if(l===mB&&c===mB){for(var d=r[s],f=1;d>0&&(d--,e[d]===mB);)f++;if(f%2!==0)return Si}return l===qv&&c===$v?Si:ey},uAe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=AAe(t,e.lineBreak),n=r[0],i=r[1],s=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(i=i.map(function(o){return[ms,Qd,fj].indexOf(o)!==-1?Xg:o}));var a=e.wordBreak==="keep-all"?s.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,i,a]},hAe=function(){function t(e,r,n,i){this.codePoints=e,this.required=r===pj,this.start=n,this.end=i}return t.prototype.slice=function(){return ln.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),dAe=function(t,e){var r=__(t),n=uAe(r,e),i=n[0],s=n[1],a=n[2],o=r.length,l=0,A=0;return{next:function(){if(A>=o)return{done:!0,value:null};for(var c=Si;A<o&&(c=cAe(r,s,i,++A,a))===Si;);if(c!==Si||A===o){var u=new hAe(r,c,l,A);return l=A,{value:u,done:!1}}return{done:!0,value:null}}}},fAe=1,pAe=2,x0=4,YL=8,j1=10,XL=47,ng=92,mAe=9,gAe=32,ty=34,zp=61,vAe=35,yAe=36,wAe=37,ry=39,ny=40,Gp=41,bAe=95,Vi=45,_Ae=33,xAe=60,EAe=62,BAe=64,MAe=91,TAe=93,CAe=61,SAe=123,iy=63,IAe=125,ZL=124,RAe=126,UAe=128,JL=65533,vB=42,uu=43,FAe=44,kAe=58,LAe=59,Zg=46,PAe=0,OAe=8,DAe=11,NAe=14,QAe=31,HAe=127,mo=-1,gj=48,vj=97,yj=101,jAe=102,zAe=117,GAe=122,wj=65,bj=69,_j=70,VAe=85,WAe=90,Ri=function(t){return t>=gj&&t<=57},KAe=function(t){return t>=55296&&t<=57343},Mh=function(t){return Ri(t)||t>=wj&&t<=_j||t>=vj&&t<=jAe},YAe=function(t){return t>=vj&&t<=GAe},XAe=function(t){return t>=wj&&t<=WAe},ZAe=function(t){return YAe(t)||XAe(t)},JAe=function(t){return t>=UAe},sy=function(t){return t===j1||t===mAe||t===gAe},z1=function(t){return ZAe(t)||JAe(t)||t===bAe},qL=function(t){return z1(t)||Ri(t)||t===Vi},qAe=function(t){return t>=PAe&&t<=OAe||t===DAe||t>=NAe&&t<=QAe||t===HAe},PA=function(t,e){return t!==ng?!1:e!==j1},ay=function(t,e,r){return t===Vi?z1(e)||PA(e,r):z1(t)?!0:!!(t===ng&&PA(t,e))},yB=function(t,e,r){return t===uu||t===Vi?Ri(e)?!0:e===Zg&&Ri(r):Ri(t===Zg?e:t)},$Ae=function(t){var e=0,r=1;(t[e]===uu||t[e]===Vi)&&(t[e]===Vi&&(r=-1),e++);for(var n=[];Ri(t[e]);)n.push(t[e++]);var i=n.length?parseInt(ln.apply(void 0,n),10):0;t[e]===Zg&&e++;for(var s=[];Ri(t[e]);)s.push(t[e++]);var a=s.length,o=a?parseInt(ln.apply(void 0,s),10):0;(t[e]===bj||t[e]===yj)&&e++;var l=1;(t[e]===uu||t[e]===Vi)&&(t[e]===Vi&&(l=-1),e++);for(var A=[];Ri(t[e]);)A.push(t[e++]);var c=A.length?parseInt(ln.apply(void 0,A),10):0;return r*(i+o*Math.pow(10,-a))*Math.pow(10,l*c)},ece={type:2},tce={type:3},rce={type:4},nce={type:13},ice={type:8},sce={type:21},ace={type:9},oce={type:10},lce={type:11},Ace={type:12},cce={type:14},oy={type:23},uce={type:1},hce={type:25},dce={type:24},fce={type:26},pce={type:27},mce={type:28},gce={type:29},vce={type:31},ZC={type:32},xj=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(__(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==ZC;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case ty:return this.consumeStringToken(ty);case vAe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(qL(r)||PA(n,i)){var s=ay(r,n,i)?pAe:fAe,a=this.consumeName();return{type:5,value:a,flags:s}}break;case yAe:if(this.peekCodePoint(0)===zp)return this.consumeCodePoint(),nce;break;case ry:return this.consumeStringToken(ry);case ny:return ece;case Gp:return tce;case vB:if(this.peekCodePoint(0)===zp)return this.consumeCodePoint(),cce;break;case uu:if(yB(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case FAe:return rce;case Vi:var o=e,l=this.peekCodePoint(0),A=this.peekCodePoint(1);if(yB(o,l,A))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(ay(o,l,A))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===Vi&&A===EAe)return this.consumeCodePoint(),this.consumeCodePoint(),dce;break;case Zg:if(yB(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case XL:if(this.peekCodePoint(0)===vB)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===vB&&(c=this.consumeCodePoint(),c===XL))return this.consumeToken();if(c===mo)return this.consumeToken()}break;case kAe:return fce;case LAe:return pce;case xAe:if(this.peekCodePoint(0)===_Ae&&this.peekCodePoint(1)===Vi&&this.peekCodePoint(2)===Vi)return this.consumeCodePoint(),this.consumeCodePoint(),hce;break;case BAe:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),d=this.peekCodePoint(2);if(ay(u,h,d)){var a=this.consumeName();return{type:7,value:a}}break;case MAe:return mce;case ng:if(PA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case TAe:return gce;case CAe:if(this.peekCodePoint(0)===zp)return this.consumeCodePoint(),ice;break;case SAe:return lce;case IAe:return Ace;case zAe:case VAe:var f=this.peekCodePoint(0),m=this.peekCodePoint(1);return f===uu&&(Mh(m)||m===iy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case ZL:if(this.peekCodePoint(0)===zp)return this.consumeCodePoint(),ace;if(this.peekCodePoint(0)===ZL)return this.consumeCodePoint(),sce;break;case RAe:if(this.peekCodePoint(0)===zp)return this.consumeCodePoint(),oce;break;case mo:return ZC}return sy(e)?(this.consumeWhiteSpace(),vce):Ri(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):z1(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ln(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Mh(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===iy&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(ln.apply(void 0,e.map(function(l){return l===iy?gj:l})),16),s=parseInt(ln.apply(void 0,e.map(function(l){return l===iy?_j:l})),16);return{type:30,start:i,end:s}}var a=parseInt(ln.apply(void 0,e),16);if(this.peekCodePoint(0)===Vi&&Mh(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Mh(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(ln.apply(void 0,o),16);return{type:30,start:a,end:s}}else return{type:30,start:a,end:a}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===ny?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ny?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===mo)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===ry||r===ty){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===mo||this.peekCodePoint(0)===Gp)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),oy)}for(;;){var i=this.consumeCodePoint();if(i===mo||i===Gp)return{type:22,value:ln.apply(void 0,e)};if(sy(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===mo||this.peekCodePoint(0)===Gp?(this.consumeCodePoint(),{type:22,value:ln.apply(void 0,e)}):(this.consumeBadUrlRemnants(),oy);if(i===ty||i===ry||i===ny||qAe(i))return this.consumeBadUrlRemnants(),oy;if(i===ng)if(PA(i,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),oy;else e.push(i)}},t.prototype.consumeWhiteSpace=function(){for(;sy(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Gp||e===mo)return;PA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var i=Math.min(r,e);n+=ln.apply(void 0,this._value.splice(0,i)),e-=i}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var i=this._value[n];if(i===mo||i===void 0||i===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(i===j1)return this._value.splice(0,n),uce;if(i===ng){var s=this._value[n+1];s!==mo&&s!==void 0&&(s===j1?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):PA(i,s)&&(r+=this.consumeStringSlice(n),r+=ln(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=x0,n=this.peekCodePoint(0);for((n===uu||n===Vi)&&e.push(this.consumeCodePoint());Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===Zg&&Ri(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=YL;Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===bj||n===yj)&&((i===uu||i===Vi)&&Ri(s)||Ri(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=YL;Ri(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[$Ae(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],i=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(ay(i,s,a)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return i===wAe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Mh(e)){for(var r=ln(e);Mh(this.peekCodePoint(0))&&r.length<6;)r+=ln(this.consumeCodePoint());sy(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||KAe(n)||n>1114111?JL:n}return e===mo?JL:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(qL(r))e+=ln(r);else if(PA(r,this.peekCodePoint(0)))e+=ln(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),Ej=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new xj;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||yce(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?ZC:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),E0=function(t){return t.type===15},x_=function(t){return t.type===17},nn=function(t){return t.type===20},JC=function(t,e){return nn(t)&&t.value===e},E_=function(t){return t.type!==31&&t.type!==4},al=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},yce=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},yc=function(t){return t.type===17||t.type===15},bn=function(t){return t.type===16||yc(t)},Bj=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},$n={type:17,number:0,flags:x0},JI={type:16,number:50,flags:x0},ZA={type:16,number:100,flags:x0},Cm=function(t,e,r){var n=t[0],i=t[1];return[yr(n,e),yr(typeof i<"u"?i:n,r)]},yr=function(t,e){if(t.type===16)return t.number/100*e;if(E0(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},Mj="deg",Tj="grad",Cj="rad",Sj="turn",B_={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case Mj:return Math.PI*e.number/180;case Tj:return Math.PI/200*e.number;case Cj:return e.number;case Sj:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Ij=function(t){return t.type===15&&(t.unit===Mj||t.unit===Tj||t.unit===Cj||t.unit===Sj)},Rj=function(t){var e=t.filter(nn).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[$n,$n];case"to top":case"bottom":return ua(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[$n,ZA];case"to right":case"left":return ua(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ZA,ZA];case"to bottom":case"top":return ua(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ZA,$n];case"to left":case"right":return ua(270)}return 0},ua=function(t){return Math.PI*t/180},uc={name:"color",parse:function(t,e){if(e.type===18){var r=wce[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3);return JA(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),i=e.value.substring(1,2),s=e.value.substring(2,3),a=e.value.substring(3,4);return JA(parseInt(n+n,16),parseInt(i+i,16),parseInt(s+s,16),parseInt(a+a,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6);return JA(parseInt(n,16),parseInt(i,16),parseInt(s,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),i=e.value.substring(2,4),s=e.value.substring(4,6),a=e.value.substring(6,8);return JA(parseInt(n,16),parseInt(i,16),parseInt(s,16),parseInt(a,16)/255)}}if(e.type===20){var o=Jg[e.value.toUpperCase()];if(typeof o<"u")return o}return Jg.TRANSPARENT}},Af=function(t){return(255&t)===0},Dn=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+n+","+r+","+e/255+")":"rgb("+i+","+n+","+r+")"},JA=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},$L=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},eP=function(t,e){var r=e.filter(E_);if(r.length===3){var n=r.map($L),i=n[0],s=n[1],a=n[2];return JA(i,s,a,1)}if(r.length===4){var o=r.map($L),i=o[0],s=o[1],a=o[2],l=o[3];return JA(i,s,a,l)}return 0};function wB(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var tP=function(t,e){var r=e.filter(E_),n=r[0],i=r[1],s=r[2],a=r[3],o=(n.type===17?ua(n.number):B_.parse(t,n))/(Math.PI*2),l=bn(i)?i.number/100:0,A=bn(s)?s.number/100:0,c=typeof a<"u"&&bn(a)?yr(a,1):1;if(l===0)return JA(A*255,A*255,A*255,1);var u=A<=.5?A*(l+1):A+l-A*l,h=A*2-u,d=wB(h,u,o+1/3),f=wB(h,u,o),m=wB(h,u,o-1/3);return JA(d*255,f*255,m*255,c)},wce={hsl:tP,hsla:tP,rgb:eP,rgba:eP},rP=function(t,e){return uc.parse(t,Ej.create(e).parseComponentValue())},Jg={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},bce={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(nn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},_ce={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},M_=function(t,e){var r=uc.parse(t,e[0]),n=e[1];return n&&bn(n)?{color:r,stop:n}:{color:r,stop:null}},nP=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=$n),n.stop===null&&(n.stop=ZA);for(var i=[],s=0,a=0;a<t.length;a++){var o=t[a].stop;if(o!==null){var l=yr(o,e);l>s?i.push(l):i.push(s),s=l}else i.push(null)}for(var A=null,a=0;a<i.length;a++){var c=i[a];if(c===null)A===null&&(A=a);else if(A!==null){for(var u=a-A,h=i[A-1],d=(c-h)/(u+1),f=1;f<=u;f++)i[A+f-1]=d*f;A=null}}return t.map(function(m,g){var p=m.color;return{color:p,stop:Math.max(Math.min(1,i[g]/e),0)}})},xce=function(t,e,r){var n=e/2,i=r/2,s=yr(t[0],e)-n,a=i-yr(t[1],r);return(Math.atan2(a,s)+Math.PI*2)%(Math.PI*2)},Ece=function(t,e,r){var n=typeof t=="number"?t:xce(t,e,r),i=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),s=e/2,a=r/2,o=i/2,l=Math.sin(n-Math.PI/2)*o,A=Math.cos(n-Math.PI/2)*o;return[i,s-A,s+A,a-l,a+l]},Na=function(t,e){return Math.sqrt(t*t+e*e)},iP=function(t,e,r,n,i){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce(function(a,o){var l=o[0],A=o[1],c=Na(r-l,n-A);return(i?c<a.optimumDistance:c>a.optimumDistance)?{optimumCorner:o,optimumDistance:c}:a},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Bce=function(t,e,r,n,i){var s=0,a=0;switch(t.size){case 0:t.shape===0?s=a=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-i)):t.shape===1&&(s=Math.min(Math.abs(e),Math.abs(e-n)),a=Math.min(Math.abs(r),Math.abs(r-i)));break;case 2:if(t.shape===0)s=a=Math.min(Na(e,r),Na(e,r-i),Na(e-n,r),Na(e-n,r-i));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-i))/Math.min(Math.abs(e),Math.abs(e-n)),l=iP(n,i,e,r,!0),A=l[0],c=l[1];s=Na(A-e,(c-r)/o),a=o*s}break;case 1:t.shape===0?s=a=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-i)):t.shape===1&&(s=Math.max(Math.abs(e),Math.abs(e-n)),a=Math.max(Math.abs(r),Math.abs(r-i)));break;case 3:if(t.shape===0)s=a=Math.max(Na(e,r),Na(e,r-i),Na(e-n,r),Na(e-n,r-i));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-i))/Math.max(Math.abs(e),Math.abs(e-n)),u=iP(n,i,e,r,!1),A=u[0],c=u[1];s=Na(A-e,(c-r)/o),a=o*s}break}return Array.isArray(t.size)&&(s=yr(t.size[0],n),a=t.size.length===2?yr(t.size[1],i):s),[s,a]},Mce=function(t,e){var r=ua(180),n=[];return al(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&a.value==="to"){r=Rj(i);return}else if(Ij(a)){r=B_.parse(t,a);return}}var o=M_(t,i);n.push(o)}),{angle:r,stops:n,type:1}},ly=function(t,e){var r=ua(180),n=[];return al(e).forEach(function(i,s){if(s===0){var a=i[0];if(a.type===20&&["top","left","right","bottom"].indexOf(a.value)!==-1){r=Rj(i);return}else if(Ij(a)){r=(B_.parse(t,a)+ua(270))%ua(360);return}}var o=M_(t,i);n.push(o)}),{angle:r,stops:n,type:1}},Tce=function(t,e){var r=ua(180),n=[],i=1,s=0,a=3,o=[];return al(e).forEach(function(l,A){var c=l[0];if(A===0){if(nn(c)&&c.value==="linear"){i=1;return}else if(nn(c)&&c.value==="radial"){i=2;return}}if(c.type===18){if(c.name==="from"){var u=uc.parse(t,c.values[0]);n.push({stop:$n,color:u})}else if(c.name==="to"){var u=uc.parse(t,c.values[0]);n.push({stop:ZA,color:u})}else if(c.name==="color-stop"){var h=c.values.filter(E_);if(h.length===2){var u=uc.parse(t,h[1]),d=h[0];x_(d)&&n.push({stop:{type:16,number:d.number*100,flags:d.flags},color:u})}}}}),i===1?{angle:(r+ua(180))%ua(360),stops:n,type:i}:{size:a,shape:s,stops:n,position:o,type:i}},Uj="closest-side",Fj="farthest-side",kj="closest-corner",Lj="farthest-corner",Pj="circle",Oj="ellipse",Dj="cover",Nj="contain",Cce=function(t,e){var r=0,n=3,i=[],s=[];return al(e).forEach(function(a,o){var l=!0;if(o===0){var A=!1;l=a.reduce(function(u,h){if(A)if(nn(h))switch(h.value){case"center":return s.push(JI),u;case"top":case"left":return s.push($n),u;case"right":case"bottom":return s.push(ZA),u}else(bn(h)||yc(h))&&s.push(h);else if(nn(h))switch(h.value){case Pj:return r=0,!1;case Oj:return r=1,!1;case"at":return A=!0,!1;case Uj:return n=0,!1;case Dj:case Fj:return n=1,!1;case Nj:case kj:return n=2,!1;case Lj:return n=3,!1}else if(yc(h)||bn(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return u},l)}if(l){var c=M_(t,a);i.push(c)}}),{size:n,shape:r,stops:i,position:s,type:2}},Ay=function(t,e){var r=0,n=3,i=[],s=[];return al(e).forEach(function(a,o){var l=!0;if(o===0?l=a.reduce(function(c,u){if(nn(u))switch(u.value){case"center":return s.push(JI),!1;case"top":case"left":return s.push($n),!1;case"right":case"bottom":return s.push(ZA),!1}else if(bn(u)||yc(u))return s.push(u),!1;return c},l):o===1&&(l=a.reduce(function(c,u){if(nn(u))switch(u.value){case Pj:return r=0,!1;case Oj:return r=1,!1;case Nj:case Uj:return n=0,!1;case Fj:return n=1,!1;case kj:return n=2,!1;case Dj:case Lj:return n=3,!1}else if(yc(u)||bn(u))return Array.isArray(n)||(n=[]),n.push(u),!1;return c},l)),l){var A=M_(t,a);i.push(A)}}),{size:n,shape:r,stops:i,position:s,type:2}},Sce=function(t){return t.type===1},Ice=function(t){return t.type===2},qI={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=Qj[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function Rce(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!Qj[t.name])}var Qj={"linear-gradient":Mce,"-moz-linear-gradient":ly,"-ms-linear-gradient":ly,"-o-linear-gradient":ly,"-webkit-linear-gradient":ly,"radial-gradient":Cce,"-moz-radial-gradient":Ay,"-ms-radial-gradient":Ay,"-o-radial-gradient":Ay,"-webkit-radial-gradient":Ay,"-webkit-gradient":Tce},Uce={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return E_(n)&&Rce(n)}).map(function(n){return qI.parse(t,n)})}},Fce={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(nn(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},kce={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return al(e).map(function(r){return r.filter(bn)}).map(Bj)}},Lce={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return al(e).map(function(r){return r.filter(nn).map(function(n){return n.value}).join(" ")}).map(Pce)}},Pce=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},cf;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(cf||(cf={}));var Oce={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return al(e).map(function(r){return r.filter(Dce)})}},Dce=function(t){return nn(t)||bn(t)},T_=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Nce=T_("top"),Qce=T_("right"),Hce=T_("bottom"),jce=T_("left"),C_=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return Bj(r.filter(bn))}}},zce=C_("top-left"),Gce=C_("top-right"),Vce=C_("bottom-right"),Wce=C_("bottom-left"),S_=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Kce=S_("top"),Yce=S_("right"),Xce=S_("bottom"),Zce=S_("left"),I_=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return E0(r)?r.number:0}}},Jce=I_("top"),qce=I_("right"),$ce=I_("bottom"),eue=I_("left"),tue={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},rue={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},nue={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(nn).reduce(function(r,n){return r|iue(n.value)},0)}},iue=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},sue={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},aue={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},G1;(function(t){t.NORMAL="normal",t.STRICT="strict"})(G1||(G1={}));var oue={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return G1.STRICT;case"normal":default:return G1.NORMAL}}},lue={name:"line-height",initialValue:"normal",prefix:!1,type:4},sP=function(t,e){return nn(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:bn(t)?yr(t,e):e},Aue={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:qI.parse(t,e)}},cue={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},uue={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},R_=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},hue=R_("top"),due=R_("right"),fue=R_("bottom"),pue=R_("left"),mue={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(nn).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},gue={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},U_=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},vue=U_("top"),yue=U_("right"),wue=U_("bottom"),bue=U_("left"),_ue={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},xue={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Eue={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&JC(e[0],"none")?[]:al(e).map(function(r){for(var n={color:Jg.TRANSPARENT,offsetX:$n,offsetY:$n,blur:$n},i=0,s=0;s<r.length;s++){var a=r[s];yc(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:n.blur=a,i++):n.color=uc.parse(t,a)}return n})}},Bue={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Mue={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=Sue[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},Tue=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},Cue=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var i=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var a=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,i,s,a,o]:null},Sue={matrix:Tue,matrix3d:Cue},aP={type:16,number:50,flags:x0},Iue=[aP,aP],Rue={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(bn);return r.length!==2?Iue:[r[0],r[1]]}},Uue={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ig;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(ig||(ig={}));var Fue={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ig.BREAK_ALL;case"keep-all":return ig.KEEP_ALL;case"normal":default:return ig.NORMAL}}},kue={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(x_(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Hj={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},Lue={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return x_(e)?e.number:1}},Pue={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Oue={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(nn).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Due={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(i){switch(i.type){case 20:case 0:r.push(i.value);break;case 17:r.push(i.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},Nue={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Que={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(x_(e))return e.number;if(nn(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Hue={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(nn).map(function(r){return r.value})}},jue={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Rn=function(t,e){return(t&e)!==0},zue={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(E0).map(function(r){return Hj.parse(t,r)})}},Gue={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&JC(e[0],"none")?[]:al(e).map(function(r){for(var n={color:255,offsetX:$n,offsetY:$n,blur:$n,spread:$n,inset:!1},i=0,s=0;s<r.length;s++){var a=r[s];JC(a,"inset")?n.inset=!0:yc(a)?(i===0?n.offsetX=a:i===1?n.offsetY=a:i===2?n.blur=a:n.spread=a,i++):n.color=uc.parse(t,a)}return n})}},Vue={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(nn).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},Wue={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Kue={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return E0(e)?e.number:0}},Yue=function(){function t(e,r){var n,i;this.animationDuration=$e(e,zue,r.animationDuration),this.backgroundClip=$e(e,bce,r.backgroundClip),this.backgroundColor=$e(e,_ce,r.backgroundColor),this.backgroundImage=$e(e,Uce,r.backgroundImage),this.backgroundOrigin=$e(e,Fce,r.backgroundOrigin),this.backgroundPosition=$e(e,kce,r.backgroundPosition),this.backgroundRepeat=$e(e,Lce,r.backgroundRepeat),this.backgroundSize=$e(e,Oce,r.backgroundSize),this.borderTopColor=$e(e,Nce,r.borderTopColor),this.borderRightColor=$e(e,Qce,r.borderRightColor),this.borderBottomColor=$e(e,Hce,r.borderBottomColor),this.borderLeftColor=$e(e,jce,r.borderLeftColor),this.borderTopLeftRadius=$e(e,zce,r.borderTopLeftRadius),this.borderTopRightRadius=$e(e,Gce,r.borderTopRightRadius),this.borderBottomRightRadius=$e(e,Vce,r.borderBottomRightRadius),this.borderBottomLeftRadius=$e(e,Wce,r.borderBottomLeftRadius),this.borderTopStyle=$e(e,Kce,r.borderTopStyle),this.borderRightStyle=$e(e,Yce,r.borderRightStyle),this.borderBottomStyle=$e(e,Xce,r.borderBottomStyle),this.borderLeftStyle=$e(e,Zce,r.borderLeftStyle),this.borderTopWidth=$e(e,Jce,r.borderTopWidth),this.borderRightWidth=$e(e,qce,r.borderRightWidth),this.borderBottomWidth=$e(e,$ce,r.borderBottomWidth),this.borderLeftWidth=$e(e,eue,r.borderLeftWidth),this.boxShadow=$e(e,Gue,r.boxShadow),this.color=$e(e,tue,r.color),this.direction=$e(e,rue,r.direction),this.display=$e(e,nue,r.display),this.float=$e(e,sue,r.cssFloat),this.fontFamily=$e(e,Due,r.fontFamily),this.fontSize=$e(e,Nue,r.fontSize),this.fontStyle=$e(e,jue,r.fontStyle),this.fontVariant=$e(e,Hue,r.fontVariant),this.fontWeight=$e(e,Que,r.fontWeight),this.letterSpacing=$e(e,aue,r.letterSpacing),this.lineBreak=$e(e,oue,r.lineBreak),this.lineHeight=$e(e,lue,r.lineHeight),this.listStyleImage=$e(e,Aue,r.listStyleImage),this.listStylePosition=$e(e,cue,r.listStylePosition),this.listStyleType=$e(e,uue,r.listStyleType),this.marginTop=$e(e,hue,r.marginTop),this.marginRight=$e(e,due,r.marginRight),this.marginBottom=$e(e,fue,r.marginBottom),this.marginLeft=$e(e,pue,r.marginLeft),this.opacity=$e(e,Lue,r.opacity);var s=$e(e,mue,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=$e(e,gue,r.overflowWrap),this.paddingTop=$e(e,vue,r.paddingTop),this.paddingRight=$e(e,yue,r.paddingRight),this.paddingBottom=$e(e,wue,r.paddingBottom),this.paddingLeft=$e(e,bue,r.paddingLeft),this.paintOrder=$e(e,Vue,r.paintOrder),this.position=$e(e,xue,r.position),this.textAlign=$e(e,_ue,r.textAlign),this.textDecorationColor=$e(e,Pue,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=$e(e,Oue,(i=r.textDecorationLine)!==null&&i!==void 0?i:r.textDecoration),this.textShadow=$e(e,Eue,r.textShadow),this.textTransform=$e(e,Bue,r.textTransform),this.transform=$e(e,Mue,r.transform),this.transformOrigin=$e(e,Rue,r.transformOrigin),this.visibility=$e(e,Uue,r.visibility),this.webkitTextStrokeColor=$e(e,Wue,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=$e(e,Kue,r.webkitTextStrokeWidth),this.wordBreak=$e(e,Fue,r.wordBreak),this.zIndex=$e(e,kue,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return Af(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Rn(this.display,4)||Rn(this.display,33554432)||Rn(this.display,268435456)||Rn(this.display,536870912)||Rn(this.display,67108864)||Rn(this.display,134217728)},t}(),$e=function(t,e,r){var n=new xj,i=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(i);var s=new Ej(n.read());switch(e.type){case 2:var a=s.parseComponentValue();return e.parse(t,nn(a)?a.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return B_.parse(t,s.parseComponentValue());case"color":return uc.parse(t,s.parseComponentValue());case"image":return qI.parse(t,s.parseComponentValue());case"length":var o=s.parseComponentValue();return yc(o)?o:$n;case"length-percentage":var l=s.parseComponentValue();return bn(l)?l:$n;case"time":return Hj.parse(t,s.parseComponentValue())}break}},Xue="data-html2canvas-debug",Zue=function(t){var e=t.getAttribute(Xue);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},oP=function(t,e){var r=Zue(t);return r===1||e===r},ol=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,oP(r,3))debugger;this.styles=new Yue(e,window.getComputedStyle(r,null)),Zhe(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=XI(this.context,r),oP(r,4)&&(this.flags|=16)}return t}(),Jue="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",lP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Sm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cy=0;cy<lP.length;cy++)Sm[lP.charCodeAt(cy)]=cy;var que=function(t){var e=t.length*.75,r=t.length,n,i=0,s,a,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var A=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),c=Array.isArray(A)?A:new Uint8Array(A);for(n=0;n<r;n+=4)s=Sm[t.charCodeAt(n)],a=Sm[t.charCodeAt(n+1)],o=Sm[t.charCodeAt(n+2)],l=Sm[t.charCodeAt(n+3)],c[i++]=s<<2|a>>4,c[i++]=(a&15)<<4|o>>2,c[i++]=(o&3)<<6|l&63;return A},$ue=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},ehe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Eu=5,$I=6+5,bB=2,the=$I-Eu,jj=65536>>Eu,rhe=1<<Eu,_B=rhe-1,nhe=1024>>Eu,ihe=jj+nhe,she=ihe,ahe=32,ohe=she+ahe,lhe=65536>>$I,Ahe=1<<the,che=Ahe-1,AP=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},uhe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},hhe=function(t,e){var r=que(t),n=Array.isArray(r)?ehe(r):new Uint32Array(r),i=Array.isArray(r)?$ue(r):new Uint16Array(r),s=24,a=AP(i,s/2,n[4]/2),o=n[5]===2?AP(i,(s+n[4])/2):uhe(n,Math.ceil((s+n[4])/4));return new dhe(n[0],n[1],n[2],n[3],a,o)},dhe=function(){function t(e,r,n,i,s,a){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=s,this.data=a}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Eu],r=(r<<bB)+(e&_B),this.data[r];if(e<=65535)return r=this.index[jj+(e-55296>>Eu)],r=(r<<bB)+(e&_B),this.data[r];if(e<this.highStart)return r=ohe-lhe+(e>>$I),r=this.index[r],r+=e>>Eu&che,r=this.index[r],r=(r<<bB)+(e&_B),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),cP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fhe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uy=0;uy<cP.length;uy++)fhe[cP.charCodeAt(uy)]=uy;var phe=1,xB=2,EB=3,uP=4,hP=5,mhe=7,dP=8,BB=9,MB=10,fP=11,pP=12,mP=13,gP=14,TB=15,ghe=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=t.charCodeAt(r++);(s&64512)===56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e},vhe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],i=-1,s="";++i<r;){var a=t[i];a<=65535?n.push(a):(a-=65536,n.push((a>>10)+55296,a%1024+56320)),(i+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},yhe=hhe(Jue),hu="",vP="",whe=function(t){return yhe.get(t)},bhe=function(t,e,r){var n=r-2,i=e[n],s=e[r-1],a=e[r];if(s===xB&&a===EB)return hu;if(s===xB||s===EB||s===uP||a===xB||a===EB||a===uP)return vP;if(s===dP&&[dP,BB,fP,pP].indexOf(a)!==-1||(s===fP||s===BB)&&(a===BB||a===MB)||(s===pP||s===MB)&&a===MB||a===mP||a===hP||a===mhe||s===phe)return hu;if(s===mP&&a===gP){for(;i===hP;)i=e[--n];if(i===gP)return hu}if(s===TB&&a===TB){for(var o=0;i===TB;)o++,i=e[--n];if(o%2===0)return hu}return vP},_he=function(t){var e=ghe(t),r=e.length,n=0,i=0,s=e.map(whe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var a=hu;n<r&&(a=bhe(e,s,++n))===hu;);if(a!==hu||n===r){var o=vhe.apply(null,e.slice(i,n));return i=n,{value:o,done:!1}}return{done:!0,value:null}}}},xhe=function(t){for(var e=_he(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},Ehe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var i=r.getBoundingClientRect(),s=Math.round(i.height);if(t.body.removeChild(n),s===e)return!0}}return!1},Bhe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,i=__(n.data).map(function(l){return ln(l)}),s=0,a={},o=i.every(function(l,A){r.setStart(n,s),r.setEnd(n,s+l.length);var c=r.getBoundingClientRect();s+=l.length;var u=c.x>a.x||c.y>a.y;return a=c,A===0?!0:u});return t.body.removeChild(e),o},Mhe=function(){return typeof new Image().crossOrigin<"u"},The=function(){return typeof new XMLHttpRequest().responseType=="string"},Che=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},yP=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},She=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var i=new Image,s=e.toDataURL();i.src=s;var a=qC(r,r,0,0,i);return n.fillStyle="red",n.fillRect(0,0,r,r),wP(a).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var A=t.createElement("div");return A.style.backgroundImage="url("+s+")",A.style.height=r+"px",yP(l)?wP(qC(r,r,0,0,A)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),yP(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},qC=function(t,e,r,n,i){var s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return a.setAttributeNS(null,"width",t.toString()),a.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(o),o.appendChild(i),a},wP=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ys={get SUPPORT_RANGE_BOUNDS(){var t=Ehe(document);return Object.defineProperty(ys,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ys.SUPPORT_RANGE_BOUNDS&&Bhe(document);return Object.defineProperty(ys,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=Che(document);return Object.defineProperty(ys,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?She(document):Promise.resolve(!1);return Object.defineProperty(ys,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=Mhe();return Object.defineProperty(ys,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=The();return Object.defineProperty(ys,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ys,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ys,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},sg=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),Ihe=function(t,e,r,n){var i=Fhe(e,r),s=[],a=0;return i.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ys.SUPPORT_RANGE_BOUNDS){var l=bP(n,a,o.length).getClientRects();if(l.length>1){var A=eR(o),c=0;A.forEach(function(h){s.push(new sg(h,Du.fromDOMRectList(t,bP(n,c+a,h.length).getClientRects()))),c+=h.length})}else s.push(new sg(o,Du.fromDOMRectList(t,l)))}else{var u=n.splitText(o.length);s.push(new sg(o,Rhe(t,n))),n=u}else ys.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));a+=o.length}),s},Rhe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var i=e.parentNode;if(i){i.replaceChild(n,e);var s=XI(t,n);return n.firstChild&&i.replaceChild(n.firstChild,n),s}}return Du.EMPTY},bP=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(t,e),i.setEnd(t,e+r),i},eR=function(t){if(ys.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return xhe(t)},Uhe=function(t,e){if(ys.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return Lhe(t,e)},Fhe=function(t,e){return e.letterSpacing!==0?eR(t):Uhe(t,e)},khe=[32,160,4961,65792,65793,4153,4241],Lhe=function(t,e){for(var r=dAe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],i,s=function(){if(i.value){var a=i.value.slice(),o=__(a),l="";o.forEach(function(A){khe.indexOf(A)===-1?l+=ln(A):(l.length&&n.push(l),n.push(ln(A)),l="")}),l.length&&n.push(l)}};!(i=r.next()).done;)s();return n},Phe=function(){function t(e,r,n){this.text=Ohe(r.data,n.textTransform),this.textBounds=Ihe(e,this.text,n,r)}return t}(),Ohe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(Dhe,Nhe);case 2:return t.toUpperCase();default:return t}},Dhe=/(^|\s|:|-|\(|\))([a-z])/g,Nhe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},zj=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return e}(ol),Gj=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return e}(ol),Vj=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this,s=new XMLSerializer,a=XI(r,n);return n.setAttribute("width",a.width+"px"),n.setAttribute("height",a.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return e}(ol),Wj=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.value=n.value,i}return e}(ol),$C=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return e}(ol),Qhe=[{type:15,flags:0,unit:"px",number:3}],Hhe=[{type:16,flags:0,number:50}],jhe=function(t){return t.width>t.height?new Du(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new Du(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},zhe=function(t){var e=t.type===Ghe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},V1="checkbox",W1="radio",Ghe="password",_P=707406591,tR=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=zhe(n),(i.type===V1||i.type===W1)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=jhe(i.bounds)),i.type){case V1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Qhe;break;case W1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Hhe;break}return i}return e}(ol),Kj=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return i.value=s&&s.text||"",i}return e}(ol),Yj=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.value=n.value,i}return e}(ol),Xj=function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=Whe(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?rP(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Jg.TRANSPARENT,a=n.contentWindow.document.body?rP(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):Jg.TRANSPARENT;i.backgroundColor=Af(s)?Af(a)?i.styles.backgroundColor:a:s}}catch{}return i}return e}(ol),Vhe=["OL","UL","MENU"],Rw=function(t,e,r,n){for(var i=e.firstChild,s=void 0;i;i=s)if(s=i.nextSibling,Xhe(i)&&i.data.trim().length>0)r.textNodes.push(new Phe(t,i,r.styles));else if(Jj(i))if(sde(i)&&i.assignedNodes)i.assignedNodes().forEach(function(o){return Rw(t,o,r,n)});else{var a=Zj(t,i);a.styles.isVisible()&&(Khe(i,a,n)?a.flags|=4:Yhe(a.styles)&&(a.flags|=2),Vhe.indexOf(i.tagName)!==-1&&(a.flags|=8),r.elements.push(a),i.slot,i.shadowRoot?Rw(t,i.shadowRoot,a,n):!$j(i)&&!qj(i)&&!ez(i)&&Rw(t,i,a,n))}},Zj=function(t,e){return nde(e)?new zj(t,e):rde(e)?new Gj(t,e):qj(e)?new Vj(t,e):qhe(e)?new Wj(t,e):$he(e)?new $C(t,e):ede(e)?new tR(t,e):ez(e)?new Kj(t,e):$j(e)?new Yj(t,e):ide(e)?new Xj(t,e):new ol(t,e)},Whe=function(t,e){var r=Zj(t,e);return r.flags|=4,Rw(t,e,r,r),r},Khe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||tde(t)&&r.styles.isTransparent()},Yhe=function(t){return t.isPositioned()||t.isFloating()},Xhe=function(t){return t.nodeType===Node.TEXT_NODE},Jj=function(t){return t.nodeType===Node.ELEMENT_NODE},Zhe=function(t){return Jj(t)&&typeof t.style<"u"&&!Jhe(t)},Jhe=function(t){return typeof t.className=="object"},qhe=function(t){return t.tagName==="LI"},$he=function(t){return t.tagName==="OL"},ede=function(t){return t.tagName==="INPUT"},qj=function(t){return t.tagName==="svg"},tde=function(t){return t.tagName==="BODY"},rde=function(t){return t.tagName==="CANVAS"},nde=function(t){return t.tagName==="IMG"},ide=function(t){return t.tagName==="IFRAME"},$j=function(t){return t.tagName==="TEXTAREA"},ez=function(t){return t.tagName==="SELECT"},sde=function(t){return t.tagName==="SLOT"},xP={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},EP={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ade={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ode={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Th=function(t,e,r,n,i,s){return t<e||t>r?rR(t,i,s.length>0):n.integers.reduce(function(a,o,l){for(;t>=o;)t-=o,a+=n.values[l];return a},"")+s},tz=function(t,e,r,n){var i="";do r||t--,i=n(t)+i,t/=e;while(t*e>=e);return i},an=function(t,e,r,n,i){var s=r-e+1;return(t<0?"-":"")+(tz(Math.abs(t),s,n,function(a){return ln(Math.floor(a%s)+e)})+i)},Vc=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return tz(Math.abs(t),n,!1,function(i){return e[Math.floor(i%n)]})+r},Wh=1,UA=2,FA=4,Im=8,gl=function(t,e,r,n,i,s){if(t<-9999||t>9999)return rR(t,4,i.length>0);var a=Math.abs(t),o=i;if(a===0)return e[0]+o;for(var l=0;a>0&&l<=4;l++){var A=a%10;A===0&&Rn(s,Wh)&&o!==""?o=e[A]+o:A>1||A===1&&l===0||A===1&&l===1&&Rn(s,UA)||A===1&&l===1&&Rn(s,FA)&&t>100||A===1&&l>1&&Rn(s,Im)?o=e[A]+(l>0?r[l-1]:"")+o:A===1&&l>0&&(o=r[l-1]+o),a=Math.floor(a/10)}return(t<0?n:"")+o},BP="",MP="",TP="",CB="",rR=function(t,e,r){var n=r?". ":"",i=r?"":"",s=r?", ":"",a=r?" ":"";switch(e){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var o=an(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Vc(t,"",i);case 6:return Th(t,1,3999,xP,3,n).toLowerCase();case 7:return Th(t,1,3999,xP,3,n);case 8:return an(t,945,969,!1,n);case 9:return an(t,97,122,!1,n);case 10:return an(t,65,90,!1,n);case 11:return an(t,1632,1641,!0,n);case 12:case 49:return Th(t,1,9999,EP,3,n);case 35:return Th(t,1,9999,EP,3,n).toLowerCase();case 13:return an(t,2534,2543,!0,n);case 14:case 30:return an(t,6112,6121,!0,n);case 15:return Vc(t,"",i);case 16:return Vc(t,"",i);case 17:case 48:return gl(t,"",BP,"",i,UA|FA|Im);case 47:return gl(t,"",MP,"",i,Wh|UA|FA|Im);case 42:return gl(t,"",BP,"",i,UA|FA|Im);case 41:return gl(t,"",MP,"",i,Wh|UA|FA|Im);case 26:return gl(t,"","",TP,i,0);case 25:return gl(t,"","",TP,i,Wh|UA|FA);case 31:return gl(t,"","",CB,s,Wh|UA|FA);case 33:return gl(t,"","",CB,s,0);case 32:return gl(t,"","",CB,s,Wh|UA|FA);case 18:return an(t,2406,2415,!0,n);case 20:return Th(t,1,19999,ode,3,n);case 21:return an(t,2790,2799,!0,n);case 22:return an(t,2662,2671,!0,n);case 22:return Th(t,1,10999,ade,3,n);case 23:return Vc(t,"");case 24:return Vc(t,"");case 27:return an(t,3302,3311,!0,n);case 28:return Vc(t,"",i);case 29:return Vc(t,"",i);case 34:return an(t,3792,3801,!0,n);case 37:return an(t,6160,6169,!0,n);case 38:return an(t,4160,4169,!0,n);case 39:return an(t,2918,2927,!0,n);case 40:return an(t,1776,1785,!0,n);case 43:return an(t,3046,3055,!0,n);case 44:return an(t,3174,3183,!0,n);case 45:return an(t,3664,3673,!0,n);case 46:return an(t,3872,3881,!0,n);case 3:default:return an(t,48,57,!0,n)}},CP;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(CP||(CP={}));var lde=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),Xe=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Ch=function(t,e,r){return new Xe(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},hy=function(){function t(e,r,n,i){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=i}return t.prototype.subdivide=function(e,r){var n=Ch(this.start,this.startControl,e),i=Ch(this.startControl,this.endControl,e),s=Ch(this.endControl,this.end,e),a=Ch(n,i,e),o=Ch(i,s,e),l=Ch(a,o,e);return r?new t(this.start,n,a,l):new t(l,o,s,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),sa=function(t){return t.type===1},Ade=function(){function t(e){var r=e.styles,n=e.bounds,i=Cm(r.borderTopLeftRadius,n.width,n.height),s=i[0],a=i[1],o=Cm(r.borderTopRightRadius,n.width,n.height),l=o[0],A=o[1],c=Cm(r.borderBottomRightRadius,n.width,n.height),u=c[0],h=c[1],d=Cm(r.borderBottomLeftRadius,n.width,n.height),f=d[0],m=d[1],g=[];g.push((s+l)/n.width),g.push((f+u)/n.width),g.push((a+m)/n.height),g.push((A+h)/n.height);var p=Math.max.apply(Math,g);p>1&&(s/=p,a/=p,l/=p,A/=p,u/=p,h/=p,f/=p,m/=p);var v=n.width-l,y=n.height-h,_=n.width-u,E=n.height-m,x=r.borderTopWidth,B=r.borderRightWidth,M=r.borderBottomWidth,R=r.borderLeftWidth,I=yr(r.paddingTop,e.bounds.width),L=yr(r.paddingRight,e.bounds.width),D=yr(r.paddingBottom,e.bounds.width),w=yr(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||a>0?Ur(n.left+R/3,n.top+x/3,s-R/3,a-x/3,nr.TOP_LEFT):new Xe(n.left+R/3,n.top+x/3),this.topRightBorderDoubleOuterBox=s>0||a>0?Ur(n.left+v,n.top+x/3,l-B/3,A-x/3,nr.TOP_RIGHT):new Xe(n.left+n.width-B/3,n.top+x/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?Ur(n.left+_,n.top+y,u-B/3,h-M/3,nr.BOTTOM_RIGHT):new Xe(n.left+n.width-B/3,n.top+n.height-M/3),this.bottomLeftBorderDoubleOuterBox=f>0||m>0?Ur(n.left+R/3,n.top+E,f-R/3,m-M/3,nr.BOTTOM_LEFT):new Xe(n.left+R/3,n.top+n.height-M/3),this.topLeftBorderDoubleInnerBox=s>0||a>0?Ur(n.left+R*2/3,n.top+x*2/3,s-R*2/3,a-x*2/3,nr.TOP_LEFT):new Xe(n.left+R*2/3,n.top+x*2/3),this.topRightBorderDoubleInnerBox=s>0||a>0?Ur(n.left+v,n.top+x*2/3,l-B*2/3,A-x*2/3,nr.TOP_RIGHT):new Xe(n.left+n.width-B*2/3,n.top+x*2/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?Ur(n.left+_,n.top+y,u-B*2/3,h-M*2/3,nr.BOTTOM_RIGHT):new Xe(n.left+n.width-B*2/3,n.top+n.height-M*2/3),this.bottomLeftBorderDoubleInnerBox=f>0||m>0?Ur(n.left+R*2/3,n.top+E,f-R*2/3,m-M*2/3,nr.BOTTOM_LEFT):new Xe(n.left+R*2/3,n.top+n.height-M*2/3),this.topLeftBorderStroke=s>0||a>0?Ur(n.left+R/2,n.top+x/2,s-R/2,a-x/2,nr.TOP_LEFT):new Xe(n.left+R/2,n.top+x/2),this.topRightBorderStroke=s>0||a>0?Ur(n.left+v,n.top+x/2,l-B/2,A-x/2,nr.TOP_RIGHT):new Xe(n.left+n.width-B/2,n.top+x/2),this.bottomRightBorderStroke=u>0||h>0?Ur(n.left+_,n.top+y,u-B/2,h-M/2,nr.BOTTOM_RIGHT):new Xe(n.left+n.width-B/2,n.top+n.height-M/2),this.bottomLeftBorderStroke=f>0||m>0?Ur(n.left+R/2,n.top+E,f-R/2,m-M/2,nr.BOTTOM_LEFT):new Xe(n.left+R/2,n.top+n.height-M/2),this.topLeftBorderBox=s>0||a>0?Ur(n.left,n.top,s,a,nr.TOP_LEFT):new Xe(n.left,n.top),this.topRightBorderBox=l>0||A>0?Ur(n.left+v,n.top,l,A,nr.TOP_RIGHT):new Xe(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||h>0?Ur(n.left+_,n.top+y,u,h,nr.BOTTOM_RIGHT):new Xe(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=f>0||m>0?Ur(n.left,n.top+E,f,m,nr.BOTTOM_LEFT):new Xe(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||a>0?Ur(n.left+R,n.top+x,Math.max(0,s-R),Math.max(0,a-x),nr.TOP_LEFT):new Xe(n.left+R,n.top+x),this.topRightPaddingBox=l>0||A>0?Ur(n.left+Math.min(v,n.width-B),n.top+x,v>n.width+B?0:Math.max(0,l-B),Math.max(0,A-x),nr.TOP_RIGHT):new Xe(n.left+n.width-B,n.top+x),this.bottomRightPaddingBox=u>0||h>0?Ur(n.left+Math.min(_,n.width-R),n.top+Math.min(y,n.height-M),Math.max(0,u-B),Math.max(0,h-M),nr.BOTTOM_RIGHT):new Xe(n.left+n.width-B,n.top+n.height-M),this.bottomLeftPaddingBox=f>0||m>0?Ur(n.left+R,n.top+Math.min(E,n.height-M),Math.max(0,f-R),Math.max(0,m-M),nr.BOTTOM_LEFT):new Xe(n.left+R,n.top+n.height-M),this.topLeftContentBox=s>0||a>0?Ur(n.left+R+w,n.top+x+I,Math.max(0,s-(R+w)),Math.max(0,a-(x+I)),nr.TOP_LEFT):new Xe(n.left+R+w,n.top+x+I),this.topRightContentBox=l>0||A>0?Ur(n.left+Math.min(v,n.width+R+w),n.top+x+I,v>n.width+R+w?0:l-R+w,A-(x+I),nr.TOP_RIGHT):new Xe(n.left+n.width-(B+L),n.top+x+I),this.bottomRightContentBox=u>0||h>0?Ur(n.left+Math.min(_,n.width-(R+w)),n.top+Math.min(y,n.height+x+I),Math.max(0,u-(B+L)),h-(M+D),nr.BOTTOM_RIGHT):new Xe(n.left+n.width-(B+L),n.top+n.height-(M+D)),this.bottomLeftContentBox=f>0||m>0?Ur(n.left+R+w,n.top+E,Math.max(0,f-(R+w)),m-(M+D),nr.BOTTOM_LEFT):new Xe(n.left+R+w,n.top+n.height-(M+D))}return t}(),nr;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(nr||(nr={}));var Ur=function(t,e,r,n,i){var s=4*((Math.sqrt(2)-1)/3),a=r*s,o=n*s,l=t+r,A=e+n;switch(i){case nr.TOP_LEFT:return new hy(new Xe(t,A),new Xe(t,A-o),new Xe(l-a,e),new Xe(l,e));case nr.TOP_RIGHT:return new hy(new Xe(t,e),new Xe(t+a,e),new Xe(l,A-o),new Xe(l,A));case nr.BOTTOM_RIGHT:return new hy(new Xe(l,e),new Xe(l,e+o),new Xe(t+a,A),new Xe(t,A));case nr.BOTTOM_LEFT:default:return new hy(new Xe(l,A),new Xe(l-a,A),new Xe(t,e+o),new Xe(t,e))}},K1=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},cde=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},Y1=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},ude=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),dy=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),hde=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),dde=function(t){return t.type===0},rz=function(t){return t.type===1},fde=function(t){return t.type===2},SP=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},pde=function(t,e,r,n,i){return t.map(function(s,a){switch(a){case 0:return s.add(e,r);case 1:return s.add(e+n,r);case 2:return s.add(e+n,r+i);case 3:return s.add(e,r+i)}return s})},nz=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),iz=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new Ade(this.container),this.container.styles.opacity<1&&this.effects.push(new hde(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new ude(n,i,s))}if(this.container.styles.overflowX!==0){var a=K1(this.curves),o=Y1(this.curves);SP(a,o)?this.effects.push(new dy(a,6)):(this.effects.push(new dy(a,2)),this.effects.push(new dy(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var s=n.effects.filter(function(l){return!rz(l)});if(r||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var a=K1(n.curves),o=Y1(n.curves);SP(a,o)||i.unshift(new dy(o,6))}}else i.unshift.apply(i,s);n=n.parent}return i.filter(function(l){return Rn(l.target,e)})},t}(),eS=function(t,e,r,n){t.container.elements.forEach(function(i){var s=Rn(i.flags,4),a=Rn(i.flags,2),o=new iz(i,t);Rn(i.styles.display,2048)&&n.push(o);var l=Rn(i.flags,8)?[]:n;if(s||a){var A=s||i.styles.isPositioned()?r:e,c=new nz(o);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var u=i.styles.zIndex.order;if(u<0){var h=0;A.negativeZIndex.some(function(f,m){return u>f.element.container.styles.zIndex.order?(h=m,!1):h>0}),A.negativeZIndex.splice(h,0,c)}else if(u>0){var d=0;A.positiveZIndex.some(function(f,m){return u>=f.element.container.styles.zIndex.order?(d=m+1,!1):d>0}),A.positiveZIndex.splice(d,0,c)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else i.styles.isFloating()?A.nonPositionedFloats.push(c):A.nonPositionedInlineLevel.push(c);eS(o,c,s?c:r,l)}else i.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),eS(o,e,r,l);Rn(i.flags,8)&&sz(i,l)})},sz=function(t,e){for(var r=t instanceof $C?t.start:1,n=t instanceof $C?t.reversed:!1,i=0;i<e.length;i++){var s=e[i];s.container instanceof Wj&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=rR(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},mde=function(t){var e=new iz(t,null),r=new nz(e),n=[];return eS(e,r,r,n),sz(e.container,n),r},IP=function(t,e){switch(e){case 0:return ha(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return ha(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return ha(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return ha(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},gde=function(t,e){switch(e){case 0:return ha(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return ha(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return ha(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return ha(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},vde=function(t,e){switch(e){case 0:return ha(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return ha(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return ha(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return ha(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},yde=function(t,e){switch(e){case 0:return fy(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return fy(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return fy(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return fy(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},fy=function(t,e){var r=[];return sa(t)?r.push(t.subdivide(.5,!1)):r.push(t),sa(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},ha=function(t,e,r,n){var i=[];return sa(t)?i.push(t.subdivide(.5,!1)):i.push(t),sa(r)?i.push(r.subdivide(.5,!0)):i.push(r),sa(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),sa(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},az=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},X1=function(t){var e=t.styles,r=t.bounds,n=yr(e.paddingLeft,r.width),i=yr(e.paddingRight,r.width),s=yr(e.paddingTop,r.width),a=yr(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+i),-(e.borderTopWidth+e.borderBottomWidth+s+a))},wde=function(t,e){return t===0?e.bounds:t===2?X1(e):az(e)},bde=function(t,e){return t===0?e.bounds:t===2?X1(e):az(e)},SB=function(t,e,r){var n=wde(Kh(t.styles.backgroundOrigin,e),t),i=bde(Kh(t.styles.backgroundClip,e),t),s=_de(Kh(t.styles.backgroundSize,e),r,n),a=s[0],o=s[1],l=Cm(Kh(t.styles.backgroundPosition,e),n.width-a,n.height-o),A=xde(Kh(t.styles.backgroundRepeat,e),l,s,n,i),c=Math.round(n.left+l[0]),u=Math.round(n.top+l[1]);return[A,c,u,a,o]},Sh=function(t){return nn(t)&&t.value===cf.AUTO},py=function(t){return typeof t=="number"},_de=function(t,e,r){var n=e[0],i=e[1],s=e[2],a=t[0],o=t[1];if(!a)return[0,0];if(bn(a)&&o&&bn(o))return[yr(a,r.width),yr(o,r.height)];var l=py(s);if(nn(a)&&(a.value===cf.CONTAIN||a.value===cf.COVER)){if(py(s)){var A=r.width/r.height;return A<s!=(a.value===cf.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var c=py(n),u=py(i),h=c||u;if(Sh(a)&&(!o||Sh(o))){if(c&&u)return[n,i];if(!l&&!h)return[r.width,r.height];if(h&&l){var d=c?n:i*s,f=u?i:n/s;return[d,f]}var m=c?n:r.width,g=u?i:r.height;return[m,g]}if(l){var p=0,v=0;return bn(a)?p=yr(a,r.width):bn(o)&&(v=yr(o,r.height)),Sh(a)?p=v*s:(!o||Sh(o))&&(v=p/s),[p,v]}var y=null,_=null;if(bn(a)?y=yr(a,r.width):o&&bn(o)&&(_=yr(o,r.height)),y!==null&&(!o||Sh(o))&&(_=c&&u?y/n*i:r.height),_!==null&&Sh(a)&&(y=c&&u?_/i*n:r.width),y!==null&&_!==null)return[y,_];throw new Error("Unable to calculate background-size for element")},Kh=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},xde=function(t,e,r,n,i){var s=e[0],a=e[1],o=r[0],l=r[1];switch(t){case 2:return[new Xe(Math.round(n.left),Math.round(n.top+a)),new Xe(Math.round(n.left+n.width),Math.round(n.top+a)),new Xe(Math.round(n.left+n.width),Math.round(l+n.top+a)),new Xe(Math.round(n.left),Math.round(l+n.top+a))];case 3:return[new Xe(Math.round(n.left+s),Math.round(n.top)),new Xe(Math.round(n.left+s+o),Math.round(n.top)),new Xe(Math.round(n.left+s+o),Math.round(n.height+n.top)),new Xe(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new Xe(Math.round(n.left+s),Math.round(n.top+a)),new Xe(Math.round(n.left+s+o),Math.round(n.top+a)),new Xe(Math.round(n.left+s+o),Math.round(n.top+a+l)),new Xe(Math.round(n.left+s),Math.round(n.top+a+l))];default:return[new Xe(Math.round(i.left),Math.round(i.top)),new Xe(Math.round(i.left+i.width),Math.round(i.top)),new Xe(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Xe(Math.round(i.left),Math.round(i.height+i.top))]}},Ede="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",RP="Hidden Text",Bde=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),i=this._document.createElement("img"),s=this._document.createElement("span"),a=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",a.appendChild(n),i.src=Ede,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(RP)),n.appendChild(s),n.appendChild(i);var o=i.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(RP)),n.style.lineHeight="normal",i.style.verticalAlign="super";var l=i.offsetTop-n.offsetTop+2;return a.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),oz=function(){function t(e,r){this.context=e,this.options=r}return t}(),Mde=1e4;(function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new Bde(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(i){return n.applyEffect(i)})},e.prototype.applyEffect=function(r){this.ctx.save(),fde(r)&&(this.ctx.globalAlpha=r.opacity),dde(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),rz(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return $s(this,void 0,void 0,function(){var n;return ps(this,function(i){switch(i.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return $s(this,void 0,void 0,function(){return ps(this,function(n){switch(n.label){case 0:if(Rn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,i){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+i);else{var a=eR(r.text);a.reduce(function(o,l){return s.ctx.fillText(l,o,r.bounds.top+i),o+s.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(a){return a==="normal"||a==="small-caps"}).join(""),i=Rde(r.fontFamily).join(", "),s=E0(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,i].join(" "),i,s]},e.prototype.renderTextNode=function(r,n){return $s(this,void 0,void 0,function(){var i,s,a,o,l,A,c,u,h=this;return ps(this,function(d){return i=this.createFontStyle(n),s=i[0],a=i[1],o=i[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(a,o),A=l.baseline,c=l.middle,u=n.paintOrder,r.textBounds.forEach(function(f){u.forEach(function(m){switch(m){case 0:h.ctx.fillStyle=Dn(n.color),h.renderTextWithLetterSpacing(f,n.letterSpacing,A);var g=n.textShadow;g.length&&f.text.trim().length&&(g.slice(0).reverse().forEach(function(p){h.ctx.shadowColor=Dn(p.color),h.ctx.shadowOffsetX=p.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=p.offsetY.number*h.options.scale,h.ctx.shadowBlur=p.blur.number,h.renderTextWithLetterSpacing(f,n.letterSpacing,A)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Dn(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(p){switch(p){case 1:h.ctx.fillRect(f.bounds.left,Math.round(f.bounds.top+A),f.bounds.width,1);break;case 2:h.ctx.fillRect(f.bounds.left,Math.round(f.bounds.top),f.bounds.width,1);break;case 3:h.ctx.fillRect(f.bounds.left,Math.ceil(f.bounds.top+c),f.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&f.text.trim().length&&(h.ctx.strokeStyle=Dn(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(f.text,f.bounds.left,f.bounds.top+A)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,i){if(i&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=X1(r),a=Y1(n);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return $s(this,void 0,void 0,function(){var n,i,s,a,o,l,v,v,A,c,u,h,_,d,f,E,m,g,p,v,y,_,E;return ps(this,function(x){switch(x.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,i=r.curves,s=n.styles,a=0,o=n.textNodes,x.label=1;case 1:return a<o.length?(l=o[a],[4,this.renderTextNode(l,s)]):[3,4];case 2:x.sent(),x.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof zj))return[3,8];x.label=5;case 5:return x.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return v=x.sent(),this.renderReplacedElement(n,i,v),[3,8];case 7:return x.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Gj&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof Vj))return[3,12];x.label=9;case 9:return x.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return v=x.sent(),this.renderReplacedElement(n,i,v),[3,12];case 11:return x.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Xj&&n.tree?(A=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,A.render(n.tree)]):[3,14];case 13:c=x.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),x.label=14;case 14:if(n instanceof tR&&(u=Math.min(n.bounds.width,n.bounds.height),n.type===V1?n.checked&&(this.ctx.save(),this.path([new Xe(n.bounds.left+u*.39363,n.bounds.top+u*.79),new Xe(n.bounds.left+u*.16,n.bounds.top+u*.5549),new Xe(n.bounds.left+u*.27347,n.bounds.top+u*.44071),new Xe(n.bounds.left+u*.39694,n.bounds.top+u*.5649),new Xe(n.bounds.left+u*.72983,n.bounds.top+u*.23),new Xe(n.bounds.left+u*.84,n.bounds.top+u*.34085),new Xe(n.bounds.left+u*.39363,n.bounds.top+u*.79)]),this.ctx.fillStyle=Dn(_P),this.ctx.fill(),this.ctx.restore()):n.type===W1&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+u/2,n.bounds.top+u/2,u/4,0,Math.PI*2,!0),this.ctx.fillStyle=Dn(_P),this.ctx.fill(),this.ctx.restore())),Tde(n)&&n.value.length){switch(h=this.createFontStyle(s),_=h[0],d=h[1],f=this.fontMetrics.getMetrics(_,d).baseline,this.ctx.font=_,this.ctx.fillStyle=Dn(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Sde(n.styles.textAlign),E=X1(n),m=0,n.styles.textAlign){case 1:m+=E.width/2;break;case 2:m+=E.width;break}g=E.add(m,0,0,-E.height/2+1),this.ctx.save(),this.path([new Xe(E.left,E.top),new Xe(E.left+E.width,E.top),new Xe(E.left+E.width,E.top+E.height),new Xe(E.left,E.top+E.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new sg(n.value,g),s.letterSpacing,f),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Rn(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(p=n.styles.listStyleImage,p.type!==0)return[3,18];v=void 0,y=p.url,x.label=15;case 15:return x.trys.push([15,17,,18]),[4,this.context.cache.match(y)];case 16:return v=x.sent(),this.ctx.drawImage(v,n.bounds.left-(v.width+10),n.bounds.top),[3,18];case 17:return x.sent(),this.context.logger.error("Error loading list-style-image "+y),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(_=this.createFontStyle(s)[0],this.ctx.font=_,this.ctx.fillStyle=Dn(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",E=new Du(n.bounds.left,n.bounds.top+yr(n.styles.paddingTop,n.bounds.width),n.bounds.width,sP(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new sg(r.listValue,E),s.letterSpacing,sP(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),x.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return $s(this,void 0,void 0,function(){var n,i,p,s,a,p,o,l,p,A,c,p,u,h,p,d,f,p,m,g,p;return ps(this,function(v){switch(v.label){case 0:if(Rn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:v.sent(),n=0,i=r.negativeZIndex,v.label=2;case 2:return n<i.length?(p=i[n],[4,this.renderStack(p)]):[3,5];case 3:v.sent(),v.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:v.sent(),s=0,a=r.nonInlineLevel,v.label=7;case 7:return s<a.length?(p=a[s],[4,this.renderNode(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return s++,[3,7];case 10:o=0,l=r.nonPositionedFloats,v.label=11;case 11:return o<l.length?(p=l[o],[4,this.renderStack(p)]):[3,14];case 12:v.sent(),v.label=13;case 13:return o++,[3,11];case 14:A=0,c=r.nonPositionedInlineLevel,v.label=15;case 15:return A<c.length?(p=c[A],[4,this.renderStack(p)]):[3,18];case 16:v.sent(),v.label=17;case 17:return A++,[3,15];case 18:u=0,h=r.inlineLevel,v.label=19;case 19:return u<h.length?(p=h[u],[4,this.renderNode(p)]):[3,22];case 20:v.sent(),v.label=21;case 21:return u++,[3,19];case 22:d=0,f=r.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return d<f.length?(p=f[d],[4,this.renderStack(p)]):[3,26];case 24:v.sent(),v.label=25;case 25:return d++,[3,23];case 26:m=0,g=r.positiveZIndex,v.label=27;case 27:return m<g.length?(p=g[m],[4,this.renderStack(p)]):[3,30];case 28:v.sent(),v.label=29;case 29:return m++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(i,s){var a=sa(i)?i.start:i;s===0?n.ctx.moveTo(a.x,a.y):n.ctx.lineTo(a.x,a.y),sa(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},e.prototype.renderRepeat=function(r,n,i,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},e.prototype.resizeImage=function(r,n,i){var s;if(r.width===n&&r.height===i)return r;var a=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=a.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,i);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,i),o},e.prototype.renderBackgroundImage=function(r){return $s(this,void 0,void 0,function(){var n,i,s,a,o,l;return ps(this,function(A){switch(A.label){case 0:n=r.styles.backgroundImage.length-1,i=function(c){var u,h,d,I,F,k,w,b,M,f,I,F,k,w,b,m,g,p,v,y,_,E,x,B,M,R,I,L,D,w,b,S,F,k,Q,z,j,T,H,me,ee,U;return ps(this,function(se){switch(se.label){case 0:if(c.type!==0)return[3,5];u=void 0,h=c.url,se.label=1;case 1:return se.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return u=se.sent(),[3,4];case 3:return se.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return u&&(d=SB(r,n,[u.width,u.height,u.width/u.height]),I=d[0],F=d[1],k=d[2],w=d[3],b=d[4],M=s.ctx.createPattern(s.resizeImage(u,w,b),"repeat"),s.renderRepeat(I,M,F,k)),[3,6];case 5:Sce(c)?(f=SB(r,n,[null,null,null]),I=f[0],F=f[1],k=f[2],w=f[3],b=f[4],m=Ece(c.angle,w,b),g=m[0],p=m[1],v=m[2],y=m[3],_=m[4],E=document.createElement("canvas"),E.width=w,E.height=b,x=E.getContext("2d"),B=x.createLinearGradient(p,y,v,_),nP(c.stops,g).forEach(function(le){return B.addColorStop(le.stop,Dn(le.color))}),x.fillStyle=B,x.fillRect(0,0,w,b),w>0&&b>0&&(M=s.ctx.createPattern(E,"repeat"),s.renderRepeat(I,M,F,k))):Ice(c)&&(R=SB(r,n,[null,null,null]),I=R[0],L=R[1],D=R[2],w=R[3],b=R[4],S=c.position.length===0?[JI]:c.position,F=yr(S[0],w),k=yr(S[S.length-1],b),Q=Bce(c,F,k,w,b),z=Q[0],j=Q[1],z>0&&j>0&&(T=s.ctx.createRadialGradient(L+F,D+k,0,L+F,D+k,z),nP(c.stops,z*2).forEach(function(le){return T.addColorStop(le.stop,Dn(le.color))}),s.path(I),s.ctx.fillStyle=T,z!==j?(H=r.bounds.left+.5*r.bounds.width,me=r.bounds.top+.5*r.bounds.height,ee=j/z,U=1/ee,s.ctx.save(),s.ctx.translate(H,me),s.ctx.transform(1,0,0,ee,0,0),s.ctx.translate(-H,-me),s.ctx.fillRect(L,U*(D-me)+me,w,b*U),s.ctx.restore()):s.ctx.fill())),se.label=6;case 6:return n--,[2]}})},s=this,a=0,o=r.styles.backgroundImage.slice(0).reverse(),A.label=1;case 1:return a<o.length?(l=o[a],[5,i(l)]):[3,4];case 2:A.sent(),A.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,i){return $s(this,void 0,void 0,function(){return ps(this,function(s){return this.path(IP(i,n)),this.ctx.fillStyle=Dn(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,i,s){return $s(this,void 0,void 0,function(){var a,o;return ps(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,i,s)]:[3,2];case 1:return l.sent(),[2];case 2:return a=gde(s,i),this.path(a),this.ctx.fillStyle=Dn(r),this.ctx.fill(),o=vde(s,i),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return $s(this,void 0,void 0,function(){var n,i,s,a,o,l,A,c,u=this;return ps(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,i=!Af(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],a=Cde(Kh(n.backgroundClip,0),r.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(a),this.ctx.clip(),Af(n.backgroundColor)||(this.ctx.fillStyle=Dn(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(d){u.ctx.save();var f=K1(r.curves),m=d.inset?0:Mde,g=pde(f,-m+(d.inset?1:-1)*d.spread.number,(d.inset?1:-1)*d.spread.number,d.spread.number*(d.inset?-2:2),d.spread.number*(d.inset?-2:2));d.inset?(u.path(f),u.ctx.clip(),u.mask(g)):(u.mask(f),u.ctx.clip(),u.path(g)),u.ctx.shadowOffsetX=d.offsetX.number+m,u.ctx.shadowOffsetY=d.offsetY.number,u.ctx.shadowColor=Dn(d.color),u.ctx.shadowBlur=d.blur.number,u.ctx.fillStyle=d.inset?Dn(d.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),h.label=2;case 2:o=0,l=0,A=s,h.label=3;case 3:return l<A.length?(c=A[l],c.style!==0&&!Af(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,i,s,a){return $s(this,void 0,void 0,function(){var o,l,A,c,u,h,d,f,m,g,p,v,y,_,E,x,E,x;return ps(this,function(B){return this.ctx.save(),o=yde(s,i),l=IP(s,i),a===2&&(this.path(l),this.ctx.clip()),sa(l[0])?(A=l[0].start.x,c=l[0].start.y):(A=l[0].x,c=l[0].y),sa(l[1])?(u=l[1].end.x,h=l[1].end.y):(u=l[1].x,h=l[1].y),i===0||i===2?d=Math.abs(A-u):d=Math.abs(c-h),this.ctx.beginPath(),a===3?this.formatPath(o):this.formatPath(l.slice(0,2)),f=n<3?n*3:n*2,m=n<3?n*2:n,a===3&&(f=n,m=n),g=!0,d<=f*2?g=!1:d<=f*2+m?(p=d/(2*f+m),f*=p,m*=p):(v=Math.floor((d+m)/(f+m)),y=(d-v*f)/(v-1),_=(d-(v+1)*f)/v,m=_<=0||Math.abs(m-y)<Math.abs(m-_)?y:_),g&&(a===3?this.ctx.setLineDash([0,f+m]):this.ctx.setLineDash([f,m])),a===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Dn(r),this.ctx.stroke(),this.ctx.setLineDash([]),a===2&&(sa(l[0])&&(E=l[3],x=l[0],this.ctx.beginPath(),this.formatPath([new Xe(E.end.x,E.end.y),new Xe(x.start.x,x.start.y)]),this.ctx.stroke()),sa(l[1])&&(E=l[1],x=l[2],this.ctx.beginPath(),this.formatPath([new Xe(E.end.x,E.end.y),new Xe(x.start.x,x.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return $s(this,void 0,void 0,function(){var n;return ps(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Dn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=mde(r),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},e})(oz);var Tde=function(t){return t instanceof Yj||t instanceof Kj?!0:t instanceof tR&&t.type!==W1&&t.type!==V1},Cde=function(t,e){switch(t){case 0:return K1(e);case 2:return cde(e);case 1:default:return Y1(e)}},Sde=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Ide=["-apple-system","system-ui"],Rde=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return Ide.indexOf(e)===-1}):t};(function(t){Ao(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return e.prototype.render=function(r){return $s(this,void 0,void 0,function(){var n,i;return ps(this,function(s){switch(s.label){case 0:return n=qC(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Ude(n)];case 1:return i=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Dn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e})(oz);var Ude=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})};typeof window<"u"&&lde.setContext(window);/*!
 * @pixiv/three-vrm v3.1.4
 * VRM file loader for three.js.
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */var my=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{o(r.next(l))}catch(A){i(A)}},a=l=>{try{o(r.throw(l))}catch(A){i(A)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((r=r.apply(t,e)).next())}),Jt=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{o(r.next(l))}catch(A){i(A)}},a=l=>{try{o(r.throw(l))}catch(A){i(A)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((r=r.apply(t,e)).next())}),Z1=class extends Lt{constructor(t){super(),this.weight=0,this.isBinary=!1,this.overrideBlink="none",this.overrideLookAt="none",this.overrideMouth="none",this._binds=[],this.name=`VRMExpression_${t}`,this.expressionName=t,this.type="VRMExpression",this.visible=!1}get overrideBlinkAmount(){return this.overrideBlink==="block"?0<this.outputWeight?1:0:this.overrideBlink==="blend"?this.outputWeight:0}get overrideLookAtAmount(){return this.overrideLookAt==="block"?0<this.outputWeight?1:0:this.overrideLookAt==="blend"?this.outputWeight:0}get overrideMouthAmount(){return this.overrideMouth==="block"?0<this.outputWeight?1:0:this.overrideMouth==="blend"?this.outputWeight:0}get outputWeight(){return this.isBinary?this.weight>.5?1:0:this.weight}addBind(t){this._binds.push(t)}applyWeight(t){var e;let r=this.outputWeight;r*=(e=t==null?void 0:t.multiplier)!=null?e:1,this.isBinary&&r<1&&(r=0),this._binds.forEach(n=>n.applyWeight(r))}clearAppliedWeight(){this._binds.forEach(t=>t.clearAppliedWeight())}};function lz(t,e,r){var n,i;const s=t.parser.json,a=(n=s.nodes)==null?void 0:n[e];if(a==null)return console.warn(`extractPrimitivesInternal: Attempt to use nodes[${e}] of glTF but the node doesn't exist`),null;const o=a.mesh;if(o==null)return null;const l=(i=s.meshes)==null?void 0:i[o];if(l==null)return console.warn(`extractPrimitivesInternal: Attempt to use meshes[${o}] of glTF but the mesh doesn't exist`),null;const A=l.primitives.length,c=[];return r.traverse(u=>{c.length<A&&u.isMesh&&c.push(u)}),c}function UP(t,e){return Jt(this,null,function*(){const r=yield t.parser.getDependency("node",e);return lz(t,e,r)})}function FP(t){return Jt(this,null,function*(){const e=yield t.parser.getDependencies("node"),r=new Map;return e.forEach((n,i)=>{const s=lz(t,i,n);s!=null&&r.set(i,s)}),r})}var zn={Aa:"aa",Ih:"ih",Ou:"ou",Ee:"ee",Oh:"oh",Blink:"blink",Happy:"happy",Angry:"angry",Sad:"sad",Relaxed:"relaxed",LookUp:"lookUp",Surprised:"surprised",LookDown:"lookDown",LookLeft:"lookLeft",LookRight:"lookRight",BlinkLeft:"blinkLeft",BlinkRight:"blinkRight",Neutral:"neutral"};function Az(t){return Math.max(Math.min(t,1),0)}var J1=class cz{constructor(){this.blinkExpressionNames=["blink","blinkLeft","blinkRight"],this.lookAtExpressionNames=["lookLeft","lookRight","lookUp","lookDown"],this.mouthExpressionNames=["aa","ee","ih","oh","ou"],this._expressions=[],this._expressionMap={}}get expressions(){return this._expressions.concat()}get expressionMap(){return Object.assign({},this._expressionMap)}get presetExpressionMap(){const e={},r=new Set(Object.values(zn));return Object.entries(this._expressionMap).forEach(([n,i])=>{r.has(n)&&(e[n]=i)}),e}get customExpressionMap(){const e={},r=new Set(Object.values(zn));return Object.entries(this._expressionMap).forEach(([n,i])=>{r.has(n)||(e[n]=i)}),e}copy(e){return this._expressions.concat().forEach(r=>{this.unregisterExpression(r)}),e._expressions.forEach(r=>{this.registerExpression(r)}),this.blinkExpressionNames=e.blinkExpressionNames.concat(),this.lookAtExpressionNames=e.lookAtExpressionNames.concat(),this.mouthExpressionNames=e.mouthExpressionNames.concat(),this}clone(){return new cz().copy(this)}getExpression(e){var r;return(r=this._expressionMap[e])!=null?r:null}registerExpression(e){this._expressions.push(e),this._expressionMap[e.expressionName]=e}unregisterExpression(e){const r=this._expressions.indexOf(e);r===-1&&console.warn("VRMExpressionManager: The specified expressions is not registered"),this._expressions.splice(r,1),delete this._expressionMap[e.expressionName]}getValue(e){var r;const n=this.getExpression(e);return(r=n==null?void 0:n.weight)!=null?r:null}setValue(e,r){const n=this.getExpression(e);n&&(n.weight=Az(r))}resetValues(){this._expressions.forEach(e=>{e.weight=0})}getExpressionTrackName(e){const r=this.getExpression(e);return r?`${r.name}.weight`:null}update(){const e=this._calculateWeightMultipliers();this._expressions.forEach(r=>{r.clearAppliedWeight()}),this._expressions.forEach(r=>{let n=1;const i=r.expressionName;this.blinkExpressionNames.indexOf(i)!==-1&&(n*=e.blink),this.lookAtExpressionNames.indexOf(i)!==-1&&(n*=e.lookAt),this.mouthExpressionNames.indexOf(i)!==-1&&(n*=e.mouth),r.applyWeight({multiplier:n})})}_calculateWeightMultipliers(){let e=1,r=1,n=1;return this._expressions.forEach(i=>{e-=i.overrideBlinkAmount,r-=i.overrideLookAtAmount,n-=i.overrideMouthAmount}),e=Math.max(0,e),r=Math.max(0,r),n=Math.max(0,n),{blink:e,lookAt:r,mouth:n}}},Vp={Color:"color",EmissionColor:"emissionColor",ShadeColor:"shadeColor",MatcapColor:"matcapColor",RimColor:"rimColor",OutlineColor:"outlineColor"},Fde={_Color:Vp.Color,_EmissionColor:Vp.EmissionColor,_ShadeColor:Vp.ShadeColor,_RimColor:Vp.RimColor,_OutlineColor:Vp.OutlineColor},kde=new He,uz=class hz{constructor({material:e,type:r,targetValue:n,targetAlpha:i}){this.material=e,this.type=r,this.targetValue=n,this.targetAlpha=i??1;const s=this._initColorBindState(),a=this._initAlphaBindState();this._state={color:s,alpha:a}}applyWeight(e){const{color:r,alpha:n}=this._state;if(r!=null){const{propertyName:i,deltaValue:s}=r,a=this.material[i];a!=null&&a.add(kde.copy(s).multiplyScalar(e))}if(n!=null){const{propertyName:i,deltaValue:s}=n;this.material[i]!=null&&(this.material[i]+=s*e)}}clearAppliedWeight(){const{color:e,alpha:r}=this._state;if(e!=null){const{propertyName:n,initialValue:i}=e,s=this.material[n];s!=null&&s.copy(i)}if(r!=null){const{propertyName:n,initialValue:i}=r;this.material[n]!=null&&(this.material[n]=i)}}_initColorBindState(){var e,r,n;const{material:i,type:s,targetValue:a}=this,o=this._getPropertyNameMap(),l=(r=(e=o==null?void 0:o[s])==null?void 0:e[0])!=null?r:null;if(l==null)return console.warn(`Tried to add a material color bind to the material ${(n=i.name)!=null?n:"(no name)"}, the type ${s} but the material or the type is not supported.`),null;const A=i[l].clone(),c=new He(a.r-A.r,a.g-A.g,a.b-A.b);return{propertyName:l,initialValue:A,deltaValue:c}}_initAlphaBindState(){var e,r,n;const{material:i,type:s,targetAlpha:a}=this,o=this._getPropertyNameMap(),l=(r=(e=o==null?void 0:o[s])==null?void 0:e[1])!=null?r:null;if(l==null&&a!==1)return console.warn(`Tried to add a material alpha bind to the material ${(n=i.name)!=null?n:"(no name)"}, the type ${s} but the material or the type does not support alpha.`),null;if(l==null)return null;const A=i[l],c=a-A;return{propertyName:l,initialValue:A,deltaValue:c}}_getPropertyNameMap(){var e,r;return(r=(e=Object.entries(hz._propertyNameMapMap).find(([n])=>this.material[n]===!0))==null?void 0:e[1])!=null?r:null}};uz._propertyNameMapMap={isMeshStandardMaterial:{color:["color","opacity"],emissionColor:["emissive",null]},isMeshBasicMaterial:{color:["color","opacity"]},isMToonMaterial:{color:["color","opacity"],emissionColor:["emissive",null],outlineColor:["outlineColorFactor",null],matcapColor:["matcapFactor",null],rimColor:["parametricRimColorFactor",null],shadeColor:["shadeColorFactor",null]}};var kP=uz,q1=class{constructor({primitives:t,index:e,weight:r}){this.primitives=t,this.index=e,this.weight=r}applyWeight(t){this.primitives.forEach(e=>{var r;((r=e.morphTargetInfluences)==null?void 0:r[this.index])!=null&&(e.morphTargetInfluences[this.index]+=this.weight*t)})}clearAppliedWeight(){this.primitives.forEach(t=>{var e;((e=t.morphTargetInfluences)==null?void 0:e[this.index])!=null&&(t.morphTargetInfluences[this.index]=0)})}},LP=new Ke,dz=class fz{constructor({material:e,scale:r,offset:n}){var i,s;this.material=e,this.scale=r,this.offset=n;const a=(i=Object.entries(fz._propertyNamesMap).find(([o])=>e[o]===!0))==null?void 0:i[1];a==null?(console.warn(`Tried to add a texture transform bind to the material ${(s=e.name)!=null?s:"(no name)"} but the material is not supported.`),this._properties=[]):(this._properties=[],a.forEach(o=>{var l;const A=(l=e[o])==null?void 0:l.clone();if(!A)return null;e[o]=A;const c=A.offset.clone(),u=A.repeat.clone(),h=n.clone().sub(c),d=r.clone().sub(u);this._properties.push({name:o,initialOffset:c,deltaOffset:h,initialScale:u,deltaScale:d})}))}applyWeight(e){this._properties.forEach(r=>{const n=this.material[r.name];n!==void 0&&(n.offset.add(LP.copy(r.deltaOffset).multiplyScalar(e)),n.repeat.add(LP.copy(r.deltaScale).multiplyScalar(e)))})}clearAppliedWeight(){this._properties.forEach(e=>{const r=this.material[e.name];r!==void 0&&(r.offset.copy(e.initialOffset),r.repeat.copy(e.initialScale))})}};dz._propertyNamesMap={isMeshStandardMaterial:["map","emissiveMap","bumpMap","normalMap","displacementMap","roughnessMap","metalnessMap","alphaMap"],isMeshBasicMaterial:["map","specularMap","alphaMap"],isMToonMaterial:["map","normalMap","emissiveMap","shadeMultiplyTexture","rimMultiplyTexture","outlineWidthMultiplyTexture","uvAnimationMaskTexture"]};var PP=dz,Lde=new Set(["1.0","1.0-beta"]),pz=class mz{get name(){return"VRMExpressionLoaderPlugin"}constructor(e){this.parser=e}afterRoot(e){return Jt(this,null,function*(){e.userData.vrmExpressionManager=yield this._import(e)})}_import(e){return Jt(this,null,function*(){const r=yield this._v1Import(e);return r||(yield this._v0Import(e))||null})}_v1Import(e){return Jt(this,null,function*(){var r,n;const i=this.parser.json;if(((r=i.extensionsUsed)==null?void 0:r.indexOf("VRMC_vrm"))===-1)return null;const s=(n=i.extensions)==null?void 0:n.VRMC_vrm;if(!s)return null;const a=s.specVersion;if(!Lde.has(a))return console.warn(`VRMExpressionLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const o=s.expressions;if(!o)return null;const l=new Set(Object.values(zn)),A=new Map;o.preset!=null&&Object.entries(o.preset).forEach(([u,h])=>{if(h!=null){if(!l.has(u)){console.warn(`VRMExpressionLoaderPlugin: Unknown preset name "${u}" detected. Ignoring the expression`);return}A.set(u,h)}}),o.custom!=null&&Object.entries(o.custom).forEach(([u,h])=>{if(l.has(u)){console.warn(`VRMExpressionLoaderPlugin: Custom expression cannot have preset name "${u}". Ignoring the expression`);return}A.set(u,h)});const c=new J1;return yield Promise.all(Array.from(A.entries()).map(u=>Jt(this,[u],function*([h,d]){var f,m,g,p,v,y,_;const E=new Z1(h);if(e.scene.add(E),E.isBinary=(f=d.isBinary)!=null?f:!1,E.overrideBlink=(m=d.overrideBlink)!=null?m:"none",E.overrideLookAt=(g=d.overrideLookAt)!=null?g:"none",E.overrideMouth=(p=d.overrideMouth)!=null?p:"none",(v=d.morphTargetBinds)==null||v.forEach(x=>Jt(this,null,function*(){var B;if(x.node===void 0||x.index===void 0)return;const M=yield UP(e,x.node),R=x.index;if(!M.every(I=>Array.isArray(I.morphTargetInfluences)&&R<I.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${d.name} attempts to index morph #${R} but not found.`);return}E.addBind(new q1({primitives:M,index:R,weight:(B=x.weight)!=null?B:1}))})),d.materialColorBinds||d.textureTransformBinds){const x=[];e.scene.traverse(B=>{const M=B.material;M&&x.push(M)}),(y=d.materialColorBinds)==null||y.forEach(B=>Jt(this,null,function*(){x.filter(M=>{var R;const I=(R=this.parser.associations.get(M))==null?void 0:R.materials;return B.material===I}).forEach(M=>{E.addBind(new kP({material:M,type:B.type,targetValue:new He().fromArray(B.targetValue),targetAlpha:B.targetValue[3]}))})})),(_=d.textureTransformBinds)==null||_.forEach(B=>Jt(this,null,function*(){x.filter(M=>{var R;const I=(R=this.parser.associations.get(M))==null?void 0:R.materials;return B.material===I}).forEach(M=>{var R,I;E.addBind(new PP({material:M,offset:new Ke().fromArray((R=B.offset)!=null?R:[0,0]),scale:new Ke().fromArray((I=B.scale)!=null?I:[1,1])}))})}))}c.registerExpression(E)}))),c})}_v0Import(e){return Jt(this,null,function*(){var r;const n=this.parser.json,i=(r=n.extensions)==null?void 0:r.VRM;if(!i)return null;const s=i.blendShapeMaster;if(!s)return null;const a=new J1,o=s.blendShapeGroups;if(!o)return a;const l=new Set;return yield Promise.all(o.map(A=>Jt(this,null,function*(){var c;const u=A.presetName,h=u!=null&&mz.v0v1PresetNameMap[u]||null,d=h??A.name;if(d==null){console.warn("VRMExpressionLoaderPlugin: One of custom expressions has no name. Ignoring the expression");return}if(l.has(d)){console.warn(`VRMExpressionLoaderPlugin: An expression preset ${u} has duplicated entries. Ignoring the expression`);return}l.add(d);const f=new Z1(d);e.scene.add(f),f.isBinary=(c=A.isBinary)!=null?c:!1,A.binds&&A.binds.forEach(g=>Jt(this,null,function*(){var p;if(g.mesh===void 0||g.index===void 0)return;const v=[];(p=n.nodes)==null||p.forEach((_,E)=>{_.mesh===g.mesh&&v.push(E)});const y=g.index;yield Promise.all(v.map(_=>Jt(this,null,function*(){var E;const x=yield UP(e,_);if(!x.every(B=>Array.isArray(B.morphTargetInfluences)&&y<B.morphTargetInfluences.length)){console.warn(`VRMExpressionLoaderPlugin: ${A.name} attempts to index ${y}th morph but not found.`);return}f.addBind(new q1({primitives:x,index:y,weight:.01*((E=g.weight)!=null?E:100)}))})))}));const m=A.materialValues;m&&m.length!==0&&m.forEach(g=>{if(g.materialName===void 0||g.propertyName===void 0||g.targetValue===void 0)return;const p=[];e.scene.traverse(y=>{if(y.material){const _=y.material;Array.isArray(_)?p.push(..._.filter(E=>(E.name===g.materialName||E.name===g.materialName+" (Outline)")&&p.indexOf(E)===-1)):_.name===g.materialName&&p.indexOf(_)===-1&&p.push(_)}});const v=g.propertyName;p.forEach(y=>{if(v==="_MainTex_ST"){const E=new Ke(g.targetValue[0],g.targetValue[1]),x=new Ke(g.targetValue[2],g.targetValue[3]);x.y=1-x.y-E.y,f.addBind(new PP({material:y,scale:E,offset:x}));return}const _=Fde[v];if(_){f.addBind(new kP({material:y,type:_,targetValue:new He().fromArray(g.targetValue),targetAlpha:g.targetValue[3]}));return}console.warn(v+" is not supported")})}),a.registerExpression(f)}))),a})}};pz.v0v1PresetNameMap={a:"aa",e:"ee",i:"ih",o:"oh",u:"ou",blink:"blink",joy:"happy",angry:"angry",sorrow:"sad",fun:"relaxed",lookup:"lookUp",lookdown:"lookDown",lookleft:"lookLeft",lookright:"lookRight",blink_l:"blinkLeft",blink_r:"blinkRight",neutral:"neutral"};var Pde=pz,nR=class Yh{constructor(e,r){this._firstPersonOnlyLayer=Yh.DEFAULT_FIRSTPERSON_ONLY_LAYER,this._thirdPersonOnlyLayer=Yh.DEFAULT_THIRDPERSON_ONLY_LAYER,this._initializedLayers=!1,this.humanoid=e,this.meshAnnotations=r}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMFirstPerson: humanoid must be same in order to copy");return this.meshAnnotations=e.meshAnnotations.map(r=>({meshes:r.meshes.concat(),type:r.type})),this}clone(){return new Yh(this.humanoid,this.meshAnnotations).copy(this)}get firstPersonOnlyLayer(){return this._firstPersonOnlyLayer}get thirdPersonOnlyLayer(){return this._thirdPersonOnlyLayer}setup({firstPersonOnlyLayer:e=Yh.DEFAULT_FIRSTPERSON_ONLY_LAYER,thirdPersonOnlyLayer:r=Yh.DEFAULT_THIRDPERSON_ONLY_LAYER}={}){this._initializedLayers||(this._firstPersonOnlyLayer=e,this._thirdPersonOnlyLayer=r,this.meshAnnotations.forEach(n=>{n.meshes.forEach(i=>{n.type==="firstPersonOnly"?(i.layers.set(this._firstPersonOnlyLayer),i.traverse(s=>s.layers.set(this._firstPersonOnlyLayer))):n.type==="thirdPersonOnly"?(i.layers.set(this._thirdPersonOnlyLayer),i.traverse(s=>s.layers.set(this._thirdPersonOnlyLayer))):n.type==="auto"&&this._createHeadlessModel(i)})}),this._initializedLayers=!0)}_excludeTriangles(e,r,n,i){let s=0;if(r!=null&&r.length>0)for(let a=0;a<e.length;a+=3){const o=e[a],l=e[a+1],A=e[a+2],c=r[o],u=n[o];if(c[0]>0&&i.includes(u[0])||c[1]>0&&i.includes(u[1])||c[2]>0&&i.includes(u[2])||c[3]>0&&i.includes(u[3]))continue;const h=r[l],d=n[l];if(h[0]>0&&i.includes(d[0])||h[1]>0&&i.includes(d[1])||h[2]>0&&i.includes(d[2])||h[3]>0&&i.includes(d[3]))continue;const f=r[A],m=n[A];f[0]>0&&i.includes(m[0])||f[1]>0&&i.includes(m[1])||f[2]>0&&i.includes(m[2])||f[3]>0&&i.includes(m[3])||(e[s++]=o,e[s++]=l,e[s++]=A)}return s}_createErasedMesh(e,r){const n=new no(e.geometry.clone(),e.material);n.name=`${e.name}(erase)`,n.frustumCulled=e.frustumCulled,n.layers.set(this._firstPersonOnlyLayer);const i=n.geometry,s=i.getAttribute("skinIndex"),a=s instanceof mL?[]:s.array,o=[];for(let m=0;m<a.length;m+=4)o.push([a[m],a[m+1],a[m+2],a[m+3]]);const l=i.getAttribute("skinWeight"),A=l instanceof mL?[]:l.array,c=[];for(let m=0;m<A.length;m+=4)c.push([A[m],A[m+1],A[m+2],A[m+3]]);const u=i.getIndex();if(!u)throw new Error("The geometry doesn't have an index buffer");const h=Array.from(u.array),d=this._excludeTriangles(h,c,o,r),f=[];for(let m=0;m<d;m++)f[m]=h[m];return i.setIndex(f),e.onBeforeRender&&(n.onBeforeRender=e.onBeforeRender),n.bind(new Rc(e.skeleton.bones,e.skeleton.boneInverses),new je),n}_createHeadlessModelForSkinnedMesh(e,r){const n=[];if(r.skeleton.bones.forEach((s,a)=>{this._isEraseTarget(s)&&n.push(a)}),!n.length){r.layers.enable(this._thirdPersonOnlyLayer),r.layers.enable(this._firstPersonOnlyLayer);return}r.layers.set(this._thirdPersonOnlyLayer);const i=this._createErasedMesh(r,n);e.add(i)}_createHeadlessModel(e){if(e.type==="Group")if(e.layers.set(this._thirdPersonOnlyLayer),this._isEraseTarget(e))e.traverse(r=>r.layers.set(this._thirdPersonOnlyLayer));else{const r=new qn;r.name=`_headless_${e.name}`,r.layers.set(this._firstPersonOnlyLayer),e.parent.add(r),e.children.filter(n=>n.type==="SkinnedMesh").forEach(n=>{const i=n;this._createHeadlessModelForSkinnedMesh(r,i)})}else if(e.type==="SkinnedMesh"){const r=e;this._createHeadlessModelForSkinnedMesh(e.parent,r)}else this._isEraseTarget(e)&&(e.layers.set(this._thirdPersonOnlyLayer),e.traverse(r=>r.layers.set(this._thirdPersonOnlyLayer)))}_isEraseTarget(e){return e===this.humanoid.getRawBoneNode("head")?!0:e.parent?this._isEraseTarget(e.parent):!1}};nR.DEFAULT_FIRSTPERSON_ONLY_LAYER=9;nR.DEFAULT_THIRDPERSON_ONLY_LAYER=10;var OP=nR,Ode=new Set(["1.0","1.0-beta"]),Dde=class{get name(){return"VRMFirstPersonLoaderPlugin"}constructor(t){this.parser=t}afterRoot(t){return Jt(this,null,function*(){const e=t.userData.vrmHumanoid;if(e!==null){if(e===void 0)throw new Error("VRMFirstPersonLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");t.userData.vrmFirstPerson=yield this._import(t,e)}})}_import(t,e){return Jt(this,null,function*(){if(e==null)return null;const r=yield this._v1Import(t,e);return r||(yield this._v0Import(t,e))||null})}_v1Import(t,e){return Jt(this,null,function*(){var r,n;const i=this.parser.json;if(((r=i.extensionsUsed)==null?void 0:r.indexOf("VRMC_vrm"))===-1)return null;const s=(n=i.extensions)==null?void 0:n.VRMC_vrm;if(!s)return null;const a=s.specVersion;if(!Ode.has(a))return console.warn(`VRMFirstPersonLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const o=s.firstPerson;if(!o)return null;const l=[],A=yield FP(t);return Array.from(A.entries()).forEach(([c,u])=>{var h;const d=o.meshAnnotations?o.meshAnnotations.find(f=>f.node===c):void 0;l.push({meshes:u,type:(h=d==null?void 0:d.type)!=null?h:"both"})}),new OP(e,l)})}_v0Import(t,e){return Jt(this,null,function*(){var r;const n=this.parser.json,i=(r=n.extensions)==null?void 0:r.VRM;if(!i)return null;const s=i.firstPerson;if(!s)return null;const a=[],o=yield FP(t);return Array.from(o.entries()).forEach(([l,A])=>{const c=n.nodes[l],u=s.meshAnnotations?s.meshAnnotations.find(h=>h.mesh===c.mesh):void 0;a.push({meshes:A,type:this._convertV0FlagToV1Type(u==null?void 0:u.firstPersonFlag)})}),new OP(e,a)})}_convertV0FlagToV1Type(t){return t==="FirstPersonOnly"?"firstPersonOnly":t==="ThirdPersonOnly"?"thirdPersonOnly":t==="Auto"?"auto":"both"}},DP=new Y,NP=new Y,Nde=new et,QP=class extends qn{constructor(t){super(),this.vrmHumanoid=t,this._boneAxesMap=new Map,Object.values(t.humanBones).forEach(e=>{const r=new Eae(1);r.matrixAutoUpdate=!1,r.material.depthTest=!1,r.material.depthWrite=!1,this.add(r),this._boneAxesMap.set(e,r)})}dispose(){Array.from(this._boneAxesMap.values()).forEach(t=>{t.geometry.dispose(),t.material.dispose()})}updateMatrixWorld(t){Array.from(this._boneAxesMap.entries()).forEach(([e,r])=>{e.node.updateWorldMatrix(!0,!1),e.node.matrixWorld.decompose(DP,Nde,NP);const n=DP.set(.1,.1,.1).divide(NP);r.matrix.copy(e.node.matrixWorld).scale(n)}),super.updateMatrixWorld(t)}},IB=["hips","spine","chest","upperChest","neck","head","leftEye","rightEye","jaw","leftUpperLeg","leftLowerLeg","leftFoot","leftToes","rightUpperLeg","rightLowerLeg","rightFoot","rightToes","leftShoulder","leftUpperArm","leftLowerArm","leftHand","rightShoulder","rightUpperArm","rightLowerArm","rightHand","leftThumbMetacarpal","leftThumbProximal","leftThumbDistal","leftIndexProximal","leftIndexIntermediate","leftIndexDistal","leftMiddleProximal","leftMiddleIntermediate","leftMiddleDistal","leftRingProximal","leftRingIntermediate","leftRingDistal","leftLittleProximal","leftLittleIntermediate","leftLittleDistal","rightThumbMetacarpal","rightThumbProximal","rightThumbDistal","rightIndexProximal","rightIndexIntermediate","rightIndexDistal","rightMiddleProximal","rightMiddleIntermediate","rightMiddleDistal","rightRingProximal","rightRingIntermediate","rightRingDistal","rightLittleProximal","rightLittleIntermediate","rightLittleDistal"],qg={Hips:"hips",Spine:"spine",Chest:"chest",UpperChest:"upperChest",Neck:"neck",Head:"head",LeftEye:"leftEye",RightEye:"rightEye",Jaw:"jaw",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",LeftToes:"leftToes",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",RightToes:"rightToes",LeftShoulder:"leftShoulder",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightShoulder:"rightShoulder",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand",LeftThumbMetacarpal:"leftThumbMetacarpal",LeftThumbProximal:"leftThumbProximal",LeftThumbDistal:"leftThumbDistal",LeftIndexProximal:"leftIndexProximal",LeftIndexIntermediate:"leftIndexIntermediate",LeftIndexDistal:"leftIndexDistal",LeftMiddleProximal:"leftMiddleProximal",LeftMiddleIntermediate:"leftMiddleIntermediate",LeftMiddleDistal:"leftMiddleDistal",LeftRingProximal:"leftRingProximal",LeftRingIntermediate:"leftRingIntermediate",LeftRingDistal:"leftRingDistal",LeftLittleProximal:"leftLittleProximal",LeftLittleIntermediate:"leftLittleIntermediate",LeftLittleDistal:"leftLittleDistal",RightThumbMetacarpal:"rightThumbMetacarpal",RightThumbProximal:"rightThumbProximal",RightThumbDistal:"rightThumbDistal",RightIndexProximal:"rightIndexProximal",RightIndexIntermediate:"rightIndexIntermediate",RightIndexDistal:"rightIndexDistal",RightMiddleProximal:"rightMiddleProximal",RightMiddleIntermediate:"rightMiddleIntermediate",RightMiddleDistal:"rightMiddleDistal",RightRingProximal:"rightRingProximal",RightRingIntermediate:"rightRingIntermediate",RightRingDistal:"rightRingDistal",RightLittleProximal:"rightLittleProximal",RightLittleIntermediate:"rightLittleIntermediate",RightLittleDistal:"rightLittleDistal"},Qde={hips:null,spine:"hips",chest:"spine",upperChest:"chest",neck:"upperChest",head:"neck",leftEye:"head",rightEye:"head",jaw:"head",leftUpperLeg:"hips",leftLowerLeg:"leftUpperLeg",leftFoot:"leftLowerLeg",leftToes:"leftFoot",rightUpperLeg:"hips",rightLowerLeg:"rightUpperLeg",rightFoot:"rightLowerLeg",rightToes:"rightFoot",leftShoulder:"upperChest",leftUpperArm:"leftShoulder",leftLowerArm:"leftUpperArm",leftHand:"leftLowerArm",rightShoulder:"upperChest",rightUpperArm:"rightShoulder",rightLowerArm:"rightUpperArm",rightHand:"rightLowerArm",leftThumbMetacarpal:"leftHand",leftThumbProximal:"leftThumbMetacarpal",leftThumbDistal:"leftThumbProximal",leftIndexProximal:"leftHand",leftIndexIntermediate:"leftIndexProximal",leftIndexDistal:"leftIndexIntermediate",leftMiddleProximal:"leftHand",leftMiddleIntermediate:"leftMiddleProximal",leftMiddleDistal:"leftMiddleIntermediate",leftRingProximal:"leftHand",leftRingIntermediate:"leftRingProximal",leftRingDistal:"leftRingIntermediate",leftLittleProximal:"leftHand",leftLittleIntermediate:"leftLittleProximal",leftLittleDistal:"leftLittleIntermediate",rightThumbMetacarpal:"rightHand",rightThumbProximal:"rightThumbMetacarpal",rightThumbDistal:"rightThumbProximal",rightIndexProximal:"rightHand",rightIndexIntermediate:"rightIndexProximal",rightIndexDistal:"rightIndexIntermediate",rightMiddleProximal:"rightHand",rightMiddleIntermediate:"rightMiddleProximal",rightMiddleDistal:"rightMiddleIntermediate",rightRingProximal:"rightHand",rightRingIntermediate:"rightRingProximal",rightRingDistal:"rightRingIntermediate",rightLittleProximal:"rightHand",rightLittleIntermediate:"rightLittleProximal",rightLittleDistal:"rightLittleIntermediate"};function gz(t){return t.invert?t.invert():t.inverse(),t}var Wc=new Y,Kc=new et,tS=class{constructor(t){this.humanBones=t,this.restPose=this.getAbsolutePose()}getAbsolutePose(){const t={};return Object.keys(this.humanBones).forEach(e=>{const r=e,n=this.getBoneNode(r);n&&(Wc.copy(n.position),Kc.copy(n.quaternion),t[r]={position:Wc.toArray(),rotation:Kc.toArray()})}),t}getPose(){const t={};return Object.keys(this.humanBones).forEach(e=>{const r=e,n=this.getBoneNode(r);if(!n)return;Wc.set(0,0,0),Kc.identity();const i=this.restPose[r];i!=null&&i.position&&Wc.fromArray(i.position).negate(),i!=null&&i.rotation&&gz(Kc.fromArray(i.rotation)),Wc.add(n.position),Kc.premultiply(n.quaternion),t[r]={position:Wc.toArray(),rotation:Kc.toArray()}}),t}setPose(t){Object.entries(t).forEach(([e,r])=>{const n=e,i=this.getBoneNode(n);if(!i)return;const s=this.restPose[n];s&&(r!=null&&r.position&&(i.position.fromArray(r.position),s.position&&i.position.add(Wc.fromArray(s.position))),r!=null&&r.rotation&&(i.quaternion.fromArray(r.rotation),s.rotation&&i.quaternion.multiply(Kc.fromArray(s.rotation))))})}resetPose(){Object.entries(this.restPose).forEach(([t,e])=>{const r=this.getBoneNode(t);r&&(e!=null&&e.position&&r.position.fromArray(e.position),e!=null&&e.rotation&&r.quaternion.fromArray(e.rotation))})}getBone(t){var e;return(e=this.humanBones[t])!=null?e:void 0}getBoneNode(t){var e,r;return(r=(e=this.humanBones[t])==null?void 0:e.node)!=null?r:null}},RB=new Y,Hde=new et,jde=new Y,HP=class vz extends tS{static _setupTransforms(e){const r=new Lt;r.name="VRMHumanoidRig";const n={},i={},s={};IB.forEach(o=>{var l;const A=e.getBoneNode(o);if(A){const c=new Y,u=new et;A.updateWorldMatrix(!0,!1),A.matrixWorld.decompose(c,u,RB),n[o]=c,i[o]=A.quaternion.clone();const h=new et;(l=A.parent)==null||l.matrixWorld.decompose(RB,h,RB),s[o]=h}});const a={};return IB.forEach(o=>{var l;const A=e.getBoneNode(o);if(A){const c=n[o];let u=o,h;for(;h==null&&(u=Qde[u],u!=null);)h=n[u];const d=new Lt;d.name="Normalized_"+A.name,(u?(l=a[u])==null?void 0:l.node:r).add(d),d.position.copy(c),h&&d.position.sub(h),a[o]={node:d}}}),{rigBones:a,root:r,parentWorldRotations:s,boneRotations:i}}constructor(e){const{rigBones:r,root:n,parentWorldRotations:i,boneRotations:s}=vz._setupTransforms(e);super(r),this.original=e,this.root=n,this._parentWorldRotations=i,this._boneRotations=s}update(){IB.forEach(e=>{const r=this.original.getBoneNode(e);if(r!=null){const n=this.getBoneNode(e),i=this._parentWorldRotations[e],s=Hde.copy(i).invert(),a=this._boneRotations[e];if(r.quaternion.copy(n.quaternion).multiply(i).premultiply(s).multiply(a),e==="hips"){const o=n.getWorldPosition(jde);r.parent.updateWorldMatrix(!0,!1);const l=r.parent.matrixWorld,A=o.applyMatrix4(l.invert());r.position.copy(A)}}})}},jP=class yz{get restPose(){return console.warn("VRMHumanoid: restPose is deprecated. Use either rawRestPose or normalizedRestPose instead."),this.rawRestPose}get rawRestPose(){return this._rawHumanBones.restPose}get normalizedRestPose(){return this._normalizedHumanBones.restPose}get humanBones(){return this._rawHumanBones.humanBones}get rawHumanBones(){return this._rawHumanBones.humanBones}get normalizedHumanBones(){return this._normalizedHumanBones.humanBones}get normalizedHumanBonesRoot(){return this._normalizedHumanBones.root}constructor(e,r){var n;this.autoUpdateHumanBones=(n=r==null?void 0:r.autoUpdateHumanBones)!=null?n:!0,this._rawHumanBones=new tS(e),this._normalizedHumanBones=new HP(this._rawHumanBones)}copy(e){return this.autoUpdateHumanBones=e.autoUpdateHumanBones,this._rawHumanBones=new tS(e.humanBones),this._normalizedHumanBones=new HP(this._rawHumanBones),this}clone(){return new yz(this.humanBones,{autoUpdateHumanBones:this.autoUpdateHumanBones}).copy(this)}getAbsolutePose(){return console.warn("VRMHumanoid: getAbsolutePose() is deprecated. Use either getRawAbsolutePose() or getNormalizedAbsolutePose() instead."),this.getRawAbsolutePose()}getRawAbsolutePose(){return this._rawHumanBones.getAbsolutePose()}getNormalizedAbsolutePose(){return this._normalizedHumanBones.getAbsolutePose()}getPose(){return console.warn("VRMHumanoid: getPose() is deprecated. Use either getRawPose() or getNormalizedPose() instead."),this.getRawPose()}getRawPose(){return this._rawHumanBones.getPose()}getNormalizedPose(){return this._normalizedHumanBones.getPose()}setPose(e){return console.warn("VRMHumanoid: setPose() is deprecated. Use either setRawPose() or setNormalizedPose() instead."),this.setRawPose(e)}setRawPose(e){return this._rawHumanBones.setPose(e)}setNormalizedPose(e){return this._normalizedHumanBones.setPose(e)}resetPose(){return console.warn("VRMHumanoid: resetPose() is deprecated. Use either resetRawPose() or resetNormalizedPose() instead."),this.resetRawPose()}resetRawPose(){return this._rawHumanBones.resetPose()}resetNormalizedPose(){return this._normalizedHumanBones.resetPose()}getBone(e){return console.warn("VRMHumanoid: getBone() is deprecated. Use either getRawBone() or getNormalizedBone() instead."),this.getRawBone(e)}getRawBone(e){return this._rawHumanBones.getBone(e)}getNormalizedBone(e){return this._normalizedHumanBones.getBone(e)}getBoneNode(e){return console.warn("VRMHumanoid: getBoneNode() is deprecated. Use either getRawBoneNode() or getNormalizedBoneNode() instead."),this.getRawBoneNode(e)}getRawBoneNode(e){return this._rawHumanBones.getBoneNode(e)}getNormalizedBoneNode(e){return this._normalizedHumanBones.getBoneNode(e)}update(){this.autoUpdateHumanBones&&this._normalizedHumanBones.update()}},zde={Hips:"hips",Spine:"spine",Head:"head",LeftUpperLeg:"leftUpperLeg",LeftLowerLeg:"leftLowerLeg",LeftFoot:"leftFoot",RightUpperLeg:"rightUpperLeg",RightLowerLeg:"rightLowerLeg",RightFoot:"rightFoot",LeftUpperArm:"leftUpperArm",LeftLowerArm:"leftLowerArm",LeftHand:"leftHand",RightUpperArm:"rightUpperArm",RightLowerArm:"rightLowerArm",RightHand:"rightHand"},Gde=new Set(["1.0","1.0-beta"]),zP={leftThumbProximal:"leftThumbMetacarpal",leftThumbIntermediate:"leftThumbProximal",rightThumbProximal:"rightThumbMetacarpal",rightThumbIntermediate:"rightThumbProximal"},Vde=class{get name(){return"VRMHumanoidLoaderPlugin"}constructor(t,e){this.parser=t,this.helperRoot=e==null?void 0:e.helperRoot,this.autoUpdateHumanBones=e==null?void 0:e.autoUpdateHumanBones}afterRoot(t){return Jt(this,null,function*(){t.userData.vrmHumanoid=yield this._import(t)})}_import(t){return Jt(this,null,function*(){const e=yield this._v1Import(t);return e||(yield this._v0Import(t))||null})}_v1Import(t){return Jt(this,null,function*(){var e,r;const n=this.parser.json;if(((e=n.extensionsUsed)==null?void 0:e.indexOf("VRMC_vrm"))===-1)return null;const i=(r=n.extensions)==null?void 0:r.VRMC_vrm;if(!i)return null;const s=i.specVersion;if(!Gde.has(s))return console.warn(`VRMHumanoidLoaderPlugin: Unknown VRMC_vrm specVersion "${s}"`),null;const a=i.humanoid;if(!a)return null;const o=a.humanBones.leftThumbIntermediate!=null||a.humanBones.rightThumbIntermediate!=null,l={};a.humanBones!=null&&(yield Promise.all(Object.entries(a.humanBones).map(c=>Jt(this,[c],function*([u,h]){let d=u;const f=h.node;if(o){const g=zP[d];g!=null&&(d=g)}const m=yield this.parser.getDependency("node",f);if(m==null){console.warn(`A glTF node bound to the humanoid bone ${d} (index = ${f}) does not exist`);return}l[d]={node:m}}))));const A=new jP(this._ensureRequiredBonesExist(l),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(t.scene.add(A.normalizedHumanBonesRoot),this.helperRoot){const c=new QP(A);this.helperRoot.add(c),c.renderOrder=this.helperRoot.renderOrder}return A})}_v0Import(t){return Jt(this,null,function*(){var e;const r=(e=this.parser.json.extensions)==null?void 0:e.VRM;if(!r)return null;const n=r.humanoid;if(!n)return null;const i={};n.humanBones!=null&&(yield Promise.all(n.humanBones.map(a=>Jt(this,null,function*(){const o=a.bone,l=a.node;if(o==null||l==null)return;const A=yield this.parser.getDependency("node",l);if(A==null){console.warn(`A glTF node bound to the humanoid bone ${o} (index = ${l}) does not exist`);return}const c=zP[o],u=c??o;if(i[u]!=null){console.warn(`Multiple bone entries for ${u} detected (index = ${l}), ignoring duplicated entries.`);return}i[u]={node:A}}))));const s=new jP(this._ensureRequiredBonesExist(i),{autoUpdateHumanBones:this.autoUpdateHumanBones});if(t.scene.add(s.normalizedHumanBonesRoot),this.helperRoot){const a=new QP(s);this.helperRoot.add(a),a.renderOrder=this.helperRoot.renderOrder}return s})}_ensureRequiredBonesExist(t){const e=Object.values(zde).filter(r=>t[r]==null);if(e.length>0)throw new Error(`VRMHumanoidLoaderPlugin: These humanoid bones are required but not exist: ${e.join(", ")}`);return t}},GP=class extends $t{constructor(){super(),this._currentTheta=0,this._currentRadius=0,this.theta=0,this.radius=0,this._currentTheta=0,this._currentRadius=0,this._attrPos=new lt(new Float32Array(65*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(3*63),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let t=!1;this._currentTheta!==this.theta&&(this._currentTheta=this.theta,t=!0),this._currentRadius!==this.radius&&(this._currentRadius=this.radius,t=!0),t&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,0,0,0);for(let t=0;t<64;t++){const e=t/63*this._currentTheta;this._attrPos.setXYZ(t+1,this._currentRadius*Math.sin(e),0,this._currentRadius*Math.cos(e))}this._attrPos.needsUpdate=!0}_buildIndex(){for(let t=0;t<63;t++)this._attrIndex.setXYZ(t*3,0,t+1,t+2);this._attrIndex.needsUpdate=!0}},Wde=class extends $t{constructor(){super(),this.radius=0,this._currentRadius=0,this.tail=new Y,this._currentTail=new Y,this._attrPos=new lt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let t=!1;this._currentRadius!==this.radius&&(this._currentRadius=this.radius,t=!0),this._currentTail.equals(this.tail)||(this._currentTail.copy(this.tail),t=!0),t&&this._buildPosition()}_buildPosition(){for(let t=0;t<32;t++){const e=t/16*Math.PI;this._attrPos.setXYZ(t,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+t,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+t,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let t=0;t<32;t++){const e=(t+1)%32;this._attrIndex.setXY(t*2,t,e),this._attrIndex.setXY(64+t*2,32+t,32+e),this._attrIndex.setXY(128+t*2,64+t,64+e)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}},gy=new et,VP=new et,Wp=new Y,WP=new Y,KP=Math.sqrt(2)/2,Kde=new et(0,0,-KP,KP),Yde=new Y(0,1,0),Xde=class extends qn{constructor(t){super(),this.matrixAutoUpdate=!1,this.vrmLookAt=t;{const e=new GP;e.radius=.5;const r=new Zi({color:65280,transparent:!0,opacity:.5,side:pi,depthTest:!1,depthWrite:!1});this._meshPitch=new Ar(e,r),this.add(this._meshPitch)}{const e=new GP;e.radius=.5;const r=new Zi({color:16711680,transparent:!0,opacity:.5,side:pi,depthTest:!1,depthWrite:!1});this._meshYaw=new Ar(e,r),this.add(this._meshYaw)}{const e=new Wde;e.radius=.1;const r=new lA({color:16777215,depthTest:!1,depthWrite:!1});this._lineTarget=new w0(e,r),this._lineTarget.frustumCulled=!1,this.add(this._lineTarget)}}dispose(){this._meshYaw.geometry.dispose(),this._meshYaw.material.dispose(),this._meshPitch.geometry.dispose(),this._meshPitch.material.dispose(),this._lineTarget.geometry.dispose(),this._lineTarget.material.dispose()}updateMatrixWorld(t){const e=Et.DEG2RAD*this.vrmLookAt.yaw;this._meshYaw.geometry.theta=e,this._meshYaw.geometry.update();const r=Et.DEG2RAD*this.vrmLookAt.pitch;this._meshPitch.geometry.theta=r,this._meshPitch.geometry.update(),this.vrmLookAt.getLookAtWorldPosition(Wp),this.vrmLookAt.getLookAtWorldQuaternion(gy),gy.multiply(this.vrmLookAt.getFaceFrontQuaternion(VP)),this._meshYaw.position.copy(Wp),this._meshYaw.quaternion.copy(gy),this._meshPitch.position.copy(Wp),this._meshPitch.quaternion.copy(gy),this._meshPitch.quaternion.multiply(VP.setFromAxisAngle(Yde,e)),this._meshPitch.quaternion.multiply(Kde);const{target:n,autoUpdate:i}=this.vrmLookAt;n!=null&&i&&(n.getWorldPosition(WP).sub(Wp),this._lineTarget.geometry.tail.copy(WP),this._lineTarget.geometry.update(),this._lineTarget.position.copy(Wp)),super.updateMatrixWorld(t)}},Zde=new Y,Jde=new Y;function rS(t,e){return t.matrixWorld.decompose(Zde,e,Jde),e}function Uw(t){return[Math.atan2(-t.z,t.x),Math.atan2(t.y,Math.sqrt(t.x*t.x+t.z*t.z))]}function YP(t){const e=Math.round(t/2/Math.PI);return t-2*Math.PI*e}var XP=new Y(0,0,1),qde=new Y,$de=new Y,efe=new Y,tfe=new et,UB=new et,ZP=new et,rfe=new et,FB=new en,wz=class bz{constructor(e,r){this.offsetFromHeadBone=new Y,this.autoUpdate=!0,this.faceFront=new Y(0,0,1),this.humanoid=e,this.applier=r,this._yaw=0,this._pitch=0,this._needsUpdate=!0,this._restHeadWorldQuaternion=this.getLookAtWorldQuaternion(new et)}get yaw(){return this._yaw}set yaw(e){this._yaw=e,this._needsUpdate=!0}get pitch(){return this._pitch}set pitch(e){this._pitch=e,this._needsUpdate=!0}get euler(){return console.warn("VRMLookAt: euler is deprecated. use getEuler() instead."),this.getEuler(new en)}getEuler(e){return e.set(Et.DEG2RAD*this._pitch,Et.DEG2RAD*this._yaw,0,"YXZ")}copy(e){if(this.humanoid!==e.humanoid)throw new Error("VRMLookAt: humanoid must be same in order to copy");return this.offsetFromHeadBone.copy(e.offsetFromHeadBone),this.applier=e.applier,this.autoUpdate=e.autoUpdate,this.target=e.target,this.faceFront.copy(e.faceFront),this}clone(){return new bz(this.humanoid,this.applier).copy(this)}reset(){this._yaw=0,this._pitch=0,this._needsUpdate=!0}getLookAtWorldPosition(e){const r=this.humanoid.getRawBoneNode("head");return e.copy(this.offsetFromHeadBone).applyMatrix4(r.matrixWorld)}getLookAtWorldQuaternion(e){const r=this.humanoid.getRawBoneNode("head");return rS(r,e)}getFaceFrontQuaternion(e){if(this.faceFront.distanceToSquared(XP)<.01)return e.copy(this._restHeadWorldQuaternion).invert();const[r,n]=Uw(this.faceFront);return FB.set(0,.5*Math.PI+r,n,"YZX"),e.setFromEuler(FB).premultiply(rfe.copy(this._restHeadWorldQuaternion).invert())}getLookAtWorldDirection(e){return this.getLookAtWorldQuaternion(UB),this.getFaceFrontQuaternion(ZP),e.copy(XP).applyQuaternion(UB).applyQuaternion(ZP).applyEuler(this.getEuler(FB))}lookAt(e){const r=tfe.copy(this._restHeadWorldQuaternion).multiply(gz(this.getLookAtWorldQuaternion(UB))),n=this.getLookAtWorldPosition($de),i=efe.copy(e).sub(n).applyQuaternion(r).normalize(),[s,a]=Uw(this.faceFront),[o,l]=Uw(i),A=YP(o-s),c=YP(a-l);this._yaw=Et.RAD2DEG*A,this._pitch=Et.RAD2DEG*c,this._needsUpdate=!0}update(e){this.target!=null&&this.autoUpdate&&this.lookAt(this.target.getWorldPosition(qde)),this._needsUpdate&&(this._needsUpdate=!1,this.applier.applyYawPitch(this._yaw,this._pitch))}};wz.EULER_ORDER="YXZ";var nfe=wz,ife=new Y(0,0,1),go=new et,Ih=new et,Js=new en(0,0,0,"YXZ"),Fw=class{constructor(t,e,r,n,i){this.humanoid=t,this.rangeMapHorizontalInner=e,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=n,this.rangeMapVerticalUp=i,this.faceFront=new Y(0,0,1),this._restQuatLeftEye=new et,this._restQuatRightEye=new et,this._restLeftEyeParentWorldQuat=new et,this._restRightEyeParentWorldQuat=new et;const s=this.humanoid.getRawBoneNode("leftEye"),a=this.humanoid.getRawBoneNode("rightEye");s&&(this._restQuatLeftEye.copy(s.quaternion),rS(s.parent,this._restLeftEyeParentWorldQuat)),a&&(this._restQuatRightEye.copy(a.quaternion),rS(a.parent,this._restRightEyeParentWorldQuat))}applyYawPitch(t,e){const r=this.humanoid.getRawBoneNode("leftEye"),n=this.humanoid.getRawBoneNode("rightEye"),i=this.humanoid.getNormalizedBoneNode("leftEye"),s=this.humanoid.getNormalizedBoneNode("rightEye");r&&(e<0?Js.x=-Et.DEG2RAD*this.rangeMapVerticalDown.map(-e):Js.x=Et.DEG2RAD*this.rangeMapVerticalUp.map(e),t<0?Js.y=-Et.DEG2RAD*this.rangeMapHorizontalInner.map(-t):Js.y=Et.DEG2RAD*this.rangeMapHorizontalOuter.map(t),go.setFromEuler(Js),this._getWorldFaceFrontQuat(Ih),i.quaternion.copy(Ih).multiply(go).multiply(Ih.invert()),go.copy(this._restLeftEyeParentWorldQuat),r.quaternion.copy(i.quaternion).multiply(go).premultiply(go.invert()).multiply(this._restQuatLeftEye)),n&&(e<0?Js.x=-Et.DEG2RAD*this.rangeMapVerticalDown.map(-e):Js.x=Et.DEG2RAD*this.rangeMapVerticalUp.map(e),t<0?Js.y=-Et.DEG2RAD*this.rangeMapHorizontalOuter.map(-t):Js.y=Et.DEG2RAD*this.rangeMapHorizontalInner.map(t),go.setFromEuler(Js),this._getWorldFaceFrontQuat(Ih),s.quaternion.copy(Ih).multiply(go).multiply(Ih.invert()),go.copy(this._restRightEyeParentWorldQuat),n.quaternion.copy(s.quaternion).multiply(go).premultiply(go.invert()).multiply(this._restQuatRightEye))}lookAt(t){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const e=Et.RAD2DEG*t.y,r=Et.RAD2DEG*t.x;this.applyYawPitch(e,r)}_getWorldFaceFrontQuat(t){if(this.faceFront.distanceToSquared(ife)<.01)return t.identity();const[e,r]=Uw(this.faceFront);return Js.set(0,.5*Math.PI+e,r,"YZX"),t.setFromEuler(Js)}};Fw.type="bone";var nS=class{constructor(t,e,r,n,i){this.expressions=t,this.rangeMapHorizontalInner=e,this.rangeMapHorizontalOuter=r,this.rangeMapVerticalDown=n,this.rangeMapVerticalUp=i}applyYawPitch(t,e){e<0?(this.expressions.setValue("lookDown",0),this.expressions.setValue("lookUp",this.rangeMapVerticalUp.map(-e))):(this.expressions.setValue("lookUp",0),this.expressions.setValue("lookDown",this.rangeMapVerticalDown.map(e))),t<0?(this.expressions.setValue("lookLeft",0),this.expressions.setValue("lookRight",this.rangeMapHorizontalOuter.map(-t))):(this.expressions.setValue("lookRight",0),this.expressions.setValue("lookLeft",this.rangeMapHorizontalOuter.map(t)))}lookAt(t){console.warn("VRMLookAtBoneApplier: lookAt() is deprecated. use apply() instead.");const e=Et.RAD2DEG*t.y,r=Et.RAD2DEG*t.x;this.applyYawPitch(e,r)}};nS.type="expression";var JP=class{constructor(t,e){this.inputMaxValue=t,this.outputScale=e}map(t){return this.outputScale*Az(t/this.inputMaxValue)}},sfe=new Set(["1.0","1.0-beta"]),vy=.01,afe=class{get name(){return"VRMLookAtLoaderPlugin"}constructor(t,e){this.parser=t,this.helperRoot=e==null?void 0:e.helperRoot}afterRoot(t){return Jt(this,null,function*(){const e=t.userData.vrmHumanoid;if(e===null)return;if(e===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmHumanoid is undefined. VRMHumanoidLoaderPlugin have to be used first");const r=t.userData.vrmExpressionManager;if(r!==null){if(r===void 0)throw new Error("VRMLookAtLoaderPlugin: vrmExpressionManager is undefined. VRMExpressionLoaderPlugin have to be used first");t.userData.vrmLookAt=yield this._import(t,e,r)}})}_import(t,e,r){return Jt(this,null,function*(){if(e==null||r==null)return null;const n=yield this._v1Import(t,e,r);return n||(yield this._v0Import(t,e,r))||null})}_v1Import(t,e,r){return Jt(this,null,function*(){var n,i,s;const a=this.parser.json;if(((n=a.extensionsUsed)==null?void 0:n.indexOf("VRMC_vrm"))===-1)return null;const o=(i=a.extensions)==null?void 0:i.VRMC_vrm;if(!o)return null;const l=o.specVersion;if(!sfe.has(l))return console.warn(`VRMLookAtLoaderPlugin: Unknown VRMC_vrm specVersion "${l}"`),null;const A=o.lookAt;if(!A)return null;const c=A.type==="expression"?1:10,u=this._v1ImportRangeMap(A.rangeMapHorizontalInner,c),h=this._v1ImportRangeMap(A.rangeMapHorizontalOuter,c),d=this._v1ImportRangeMap(A.rangeMapVerticalDown,c),f=this._v1ImportRangeMap(A.rangeMapVerticalUp,c);let m;A.type==="expression"?m=new nS(r,u,h,d,f):m=new Fw(e,u,h,d,f);const g=this._importLookAt(e,m);return g.offsetFromHeadBone.fromArray((s=A.offsetFromHeadBone)!=null?s:[0,.06,0]),g})}_v1ImportRangeMap(t,e){var r,n;let i=(r=t==null?void 0:t.inputMaxValue)!=null?r:90;const s=(n=t==null?void 0:t.outputScale)!=null?n:e;return i<vy&&(console.warn("VRMLookAtLoaderPlugin: inputMaxValue of a range map is too small. Consider reviewing the range map!"),i=vy),new JP(i,s)}_v0Import(t,e,r){return Jt(this,null,function*(){var n,i,s,a;const o=(n=this.parser.json.extensions)==null?void 0:n.VRM;if(!o)return null;const l=o.firstPerson;if(!l)return null;const A=l.lookAtTypeName==="BlendShape"?1:10,c=this._v0ImportDegreeMap(l.lookAtHorizontalInner,A),u=this._v0ImportDegreeMap(l.lookAtHorizontalOuter,A),h=this._v0ImportDegreeMap(l.lookAtVerticalDown,A),d=this._v0ImportDegreeMap(l.lookAtVerticalUp,A);let f;l.lookAtTypeName==="BlendShape"?f=new nS(r,c,u,h,d):f=new Fw(e,c,u,h,d);const m=this._importLookAt(e,f);return l.firstPersonBoneOffset?m.offsetFromHeadBone.set((i=l.firstPersonBoneOffset.x)!=null?i:0,(s=l.firstPersonBoneOffset.y)!=null?s:.06,-((a=l.firstPersonBoneOffset.z)!=null?a:0)):m.offsetFromHeadBone.set(0,.06,0),m.faceFront.set(0,0,-1),f instanceof Fw&&f.faceFront.set(0,0,-1),m})}_v0ImportDegreeMap(t,e){var r,n;const i=t==null?void 0:t.curve;JSON.stringify(i)!=="[0,0,0,1,1,1,1,0]"&&console.warn("Curves of LookAtDegreeMap defined in VRM 0.0 are not supported");let s=(r=t==null?void 0:t.xRange)!=null?r:90;const a=(n=t==null?void 0:t.yRange)!=null?n:e;return s<vy&&(console.warn("VRMLookAtLoaderPlugin: xRange of a degree map is too small. Consider reviewing the degree map!"),s=vy),new JP(s,a)}_importLookAt(t,e){const r=new nfe(t,e);if(this.helperRoot){const n=new Xde(r);this.helperRoot.add(n),n.renderOrder=this.helperRoot.renderOrder}return r}};function ofe(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}var lfe=new Set(["1.0","1.0-beta"]),Afe=class{get name(){return"VRMMetaLoaderPlugin"}constructor(t,e){var r,n,i;this.parser=t,this.needThumbnailImage=(r=e==null?void 0:e.needThumbnailImage)!=null?r:!1,this.acceptLicenseUrls=(n=e==null?void 0:e.acceptLicenseUrls)!=null?n:["https://vrm.dev/licenses/1.0/"],this.acceptV0Meta=(i=e==null?void 0:e.acceptV0Meta)!=null?i:!0}afterRoot(t){return Jt(this,null,function*(){t.userData.vrmMeta=yield this._import(t)})}_import(t){return Jt(this,null,function*(){const e=yield this._v1Import(t);return e??(yield this._v0Import(t))??null})}_v1Import(t){return Jt(this,null,function*(){var e,r,n;const i=this.parser.json;if(((e=i.extensionsUsed)==null?void 0:e.indexOf("VRMC_vrm"))===-1)return null;const s=(r=i.extensions)==null?void 0:r.VRMC_vrm;if(s==null)return null;const a=s.specVersion;if(!lfe.has(a))return console.warn(`VRMMetaLoaderPlugin: Unknown VRMC_vrm specVersion "${a}"`),null;const o=s.meta;if(!o)return null;const l=o.licenseUrl;if(!new Set(this.acceptLicenseUrls).has(l))throw new Error(`VRMMetaLoaderPlugin: The license url "${l}" is not accepted`);let A;return this.needThumbnailImage&&o.thumbnailImage!=null&&(A=(n=yield this._extractGLTFImage(o.thumbnailImage))!=null?n:void 0),{metaVersion:"1",name:o.name,version:o.version,authors:o.authors,copyrightInformation:o.copyrightInformation,contactInformation:o.contactInformation,references:o.references,thirdPartyLicenses:o.thirdPartyLicenses,thumbnailImage:A,licenseUrl:o.licenseUrl,avatarPermission:o.avatarPermission,allowExcessivelyViolentUsage:o.allowExcessivelyViolentUsage,allowExcessivelySexualUsage:o.allowExcessivelySexualUsage,commercialUsage:o.commercialUsage,allowPoliticalOrReligiousUsage:o.allowPoliticalOrReligiousUsage,allowAntisocialOrHateUsage:o.allowAntisocialOrHateUsage,creditNotation:o.creditNotation,allowRedistribution:o.allowRedistribution,modification:o.modification,otherLicenseUrl:o.otherLicenseUrl}})}_v0Import(t){return Jt(this,null,function*(){var e;const r=(e=this.parser.json.extensions)==null?void 0:e.VRM;if(!r)return null;const n=r.meta;if(!n)return null;if(!this.acceptV0Meta)throw new Error("VRMMetaLoaderPlugin: Attempted to load VRM0.0 meta but acceptV0Meta is false");let i;return this.needThumbnailImage&&n.texture!=null&&n.texture!==-1&&(i=yield this.parser.getDependency("texture",n.texture)),{metaVersion:"0",allowedUserName:n.allowedUserName,author:n.author,commercialUssageName:n.commercialUssageName,contactInformation:n.contactInformation,licenseName:n.licenseName,otherLicenseUrl:n.otherLicenseUrl,otherPermissionUrl:n.otherPermissionUrl,reference:n.reference,sexualUssageName:n.sexualUssageName,texture:i??void 0,title:n.title,version:n.version,violentUssageName:n.violentUssageName}})}_extractGLTFImage(t){return Jt(this,null,function*(){var e;const r=(e=this.parser.json.images)==null?void 0:e[t];if(r==null)return console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${t}] of glTF as a thumbnail but the image doesn't exist`),null;let n=r.uri;if(r.bufferView!=null){const i=yield this.parser.getDependency("bufferView",r.bufferView),s=new Blob([i],{type:r.mimeType});n=URL.createObjectURL(s)}return n==null?(console.warn(`VRMMetaLoaderPlugin: Attempt to use images[${t}] of glTF as a thumbnail but the image couldn't load properly`),null):yield new j8().loadAsync(ofe(n,this.parser.options.path)).catch(i=>(console.error(i),console.warn("VRMMetaLoaderPlugin: Failed to load a thumbnail image"),null))})}},cfe=class{constructor(t){this.scene=t.scene,this.meta=t.meta,this.humanoid=t.humanoid,this.expressionManager=t.expressionManager,this.firstPerson=t.firstPerson,this.lookAt=t.lookAt}update(t){this.humanoid.update(),this.lookAt&&this.lookAt.update(t),this.expressionManager&&this.expressionManager.update()}},ufe=class extends cfe{constructor(t){super(t),this.materials=t.materials,this.springBoneManager=t.springBoneManager,this.nodeConstraintManager=t.nodeConstraintManager}update(t){super.update(t),this.nodeConstraintManager&&this.nodeConstraintManager.update(),this.springBoneManager&&this.springBoneManager.update(t),this.materials&&this.materials.forEach(e=>{e.update&&e.update(t)})}},hfe=Object.defineProperty,qP=Object.getOwnPropertySymbols,dfe=Object.prototype.hasOwnProperty,ffe=Object.prototype.propertyIsEnumerable,$P=(t,e,r)=>e in t?hfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eO=(t,e)=>{for(var r in e||(e={}))dfe.call(e,r)&&$P(t,r,e[r]);if(qP)for(var r of qP(e))ffe.call(e,r)&&$P(t,r,e[r]);return t},du=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{o(r.next(l))}catch(A){i(A)}},a=l=>{try{o(r.throw(l))}catch(A){i(A)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((r=r.apply(t,e)).next())}),pfe={"":3e3,srgb:3001};function mfe(t,e){parseInt(eA,10)>=152?t.colorSpace=e:t.encoding=pfe[e]}var gfe=class{get pending(){return Promise.all(this._pendings)}constructor(t,e){this._parser=t,this._materialParams=e,this._pendings=[]}assignPrimitive(t,e){e!=null&&(this._materialParams[t]=e)}assignColor(t,e,r){e!=null&&(this._materialParams[t]=new He().fromArray(e),r&&this._materialParams[t].convertSRGBToLinear())}assignTexture(t,e,r){return du(this,null,function*(){const n=(()=>du(this,null,function*(){e!=null&&(yield this._parser.assignTexture(this._materialParams,t,e),r&&mfe(this._materialParams[t],"srgb"))}))();return this._pendings.push(n),n})}assignTextureByIndex(t,e,r){return du(this,null,function*(){return this.assignTexture(t,e!=null?{index:e}:void 0,r)})}},vfe=`// #define PHONG

varying vec3 vViewPosition;

#ifndef FLAT_SHADED
  varying vec3 vNormal;
#endif

#include <common>

// #include <uv_pars_vertex>
#ifdef MTOON_USE_UV
  varying vec2 vUv;

  // COMPAT: pre-r151 uses a common uvTransform
  #if THREE_VRM_THREE_REVISION < 151
    uniform mat3 uvTransform;
  #endif
#endif

// #include <uv2_pars_vertex>
// COMAPT: pre-r151 uses uv2 for lightMap and aoMap
#if THREE_VRM_THREE_REVISION < 151
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    attribute vec2 uv2;
    varying vec2 vUv2;
    uniform mat3 uv2Transform;
  #endif
#endif

// #include <displacementmap_pars_vertex>
// #include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
  uniform sampler2D outlineWidthMultiplyTexture;
  uniform mat3 outlineWidthMultiplyTextureUvTransform;
#endif

uniform float outlineWidthFactor;

void main() {

  // #include <uv_vertex>
  #ifdef MTOON_USE_UV
    // COMPAT: pre-r151 uses a common uvTransform
    #if THREE_VRM_THREE_REVISION >= 151
      vUv = uv;
    #else
      vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
    #endif
  #endif

  // #include <uv2_vertex>
  // COMAPT: pre-r151 uses uv2 for lightMap and aoMap
  #if THREE_VRM_THREE_REVISION < 151
    #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
      vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
    #endif
  #endif

  #include <color_vertex>

  #include <beginnormal_vertex>
  #include <morphnormal_vertex>
  #include <skinbase_vertex>
  #include <skinnormal_vertex>

  // we need this to compute the outline properly
  objectNormal = normalize( objectNormal );

  #include <defaultnormal_vertex>

  #ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED
    vNormal = normalize( transformedNormal );
  #endif

  #include <begin_vertex>

  #include <morphtarget_vertex>
  #include <skinning_vertex>
  // #include <displacementmap_vertex>
  #include <project_vertex>
  #include <logdepthbuf_vertex>
  #include <clipping_planes_vertex>

  vViewPosition = - mvPosition.xyz;

  #ifdef OUTLINE
    float worldNormalLength = length( transformedNormal );
    vec3 outlineOffset = outlineWidthFactor * worldNormalLength * objectNormal;

    #ifdef USE_OUTLINEWIDTHMULTIPLYTEXTURE
      vec2 outlineWidthMultiplyTextureUv = ( outlineWidthMultiplyTextureUvTransform * vec3( vUv, 1 ) ).xy;
      float outlineTex = texture2D( outlineWidthMultiplyTexture, outlineWidthMultiplyTextureUv ).g;
      outlineOffset *= outlineTex;
    #endif

    #ifdef OUTLINE_WIDTH_SCREEN
      outlineOffset *= vViewPosition.z / projectionMatrix[ 1 ].y;
    #endif

    gl_Position = projectionMatrix * modelViewMatrix * vec4( outlineOffset + transformed, 1.0 );

    gl_Position.z += 1E-6 * gl_Position.w; // anti-artifact magic
  #endif

  #include <worldpos_vertex>
  // #include <envmap_vertex>
  #include <shadowmap_vertex>
  #include <fog_vertex>

}`,yfe=`// #define PHONG

uniform vec3 litFactor;

uniform float opacity;

uniform vec3 shadeColorFactor;
#ifdef USE_SHADEMULTIPLYTEXTURE
  uniform sampler2D shadeMultiplyTexture;
  uniform mat3 shadeMultiplyTextureUvTransform;
#endif

uniform float shadingShiftFactor;
uniform float shadingToonyFactor;

#ifdef USE_SHADINGSHIFTTEXTURE
  uniform sampler2D shadingShiftTexture;
  uniform mat3 shadingShiftTextureUvTransform;
  uniform float shadingShiftTextureScale;
#endif

uniform float giEqualizationFactor;

uniform vec3 parametricRimColorFactor;
#ifdef USE_RIMMULTIPLYTEXTURE
  uniform sampler2D rimMultiplyTexture;
  uniform mat3 rimMultiplyTextureUvTransform;
#endif
uniform float rimLightingMixFactor;
uniform float parametricRimFresnelPowerFactor;
uniform float parametricRimLiftFactor;

#ifdef USE_MATCAPTEXTURE
  uniform vec3 matcapFactor;
  uniform sampler2D matcapTexture;
  uniform mat3 matcapTextureUvTransform;
#endif

uniform vec3 emissive;
uniform float emissiveIntensity;

uniform vec3 outlineColorFactor;
uniform float outlineLightingMixFactor;

#ifdef USE_UVANIMATIONMASKTEXTURE
  uniform sampler2D uvAnimationMaskTexture;
  uniform mat3 uvAnimationMaskTextureUvTransform;
#endif

uniform float uvAnimationScrollXOffset;
uniform float uvAnimationScrollYOffset;
uniform float uvAnimationRotationPhase;

#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>

// #include <uv_pars_fragment>
#if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
  varying vec2 vUv;
#endif

// #include <uv2_pars_fragment>
// COMAPT: pre-r151 uses uv2 for lightMap and aoMap
#if THREE_VRM_THREE_REVISION < 151
  #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
    varying vec2 vUv2;
  #endif
#endif

#include <map_pars_fragment>

#ifdef USE_MAP
  uniform mat3 mapUvTransform;
#endif

// #include <alphamap_pars_fragment>

#include <alphatest_pars_fragment>

#include <aomap_pars_fragment>
// #include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>

#ifdef USE_EMISSIVEMAP
  uniform mat3 emissiveMapUvTransform;
#endif

// #include <envmap_common_pars_fragment>
// #include <envmap_pars_fragment>
// #include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>

// #include <bsdfs>
// COMPAT: pre-r151 doesn't have BRDF_Lambert in <common>
#if THREE_VRM_THREE_REVISION < 151
  vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
    return RECIPROCAL_PI * diffuseColor;
  }
#endif

#include <lights_pars_begin>

#include <normal_pars_fragment>

// #include <lights_phong_pars_fragment>
varying vec3 vViewPosition;

struct MToonMaterial {
  vec3 diffuseColor;
  vec3 shadeColor;
  float shadingShift;
};

float linearstep( float a, float b, float t ) {
  return clamp( ( t - a ) / ( b - a ), 0.0, 1.0 );
}

/**
 * Convert NdotL into toon shading factor using shadingShift and shadingToony
 */
float getShading(
  const in float dotNL,
  const in float shadow,
  const in float shadingShift
) {
  float shading = dotNL;
  shading = shading + shadingShift;
  shading = linearstep( -1.0 + shadingToonyFactor, 1.0 - shadingToonyFactor, shading );
  shading *= shadow;
  return shading;
}

/**
 * Mix diffuseColor and shadeColor using shading factor and light color
 */
vec3 getDiffuse(
  const in MToonMaterial material,
  const in float shading,
  in vec3 lightColor
) {
  #ifdef DEBUG_LITSHADERATE
    return vec3( BRDF_Lambert( shading * lightColor ) );
  #endif

  vec3 col = lightColor * BRDF_Lambert( mix( material.shadeColor, material.diffuseColor, shading ) );

  // The "comment out if you want to PBR absolutely" line
  #ifdef V0_COMPAT_SHADE
    col = min( col, material.diffuseColor );
  #endif

  return col;
}

// COMPAT: pre-r156 uses a struct GeometricContext
#if THREE_VRM_THREE_REVISION >= 157
  void RE_Direct_MToon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
    float dotNL = clamp( dot( geometryNormal, directLight.direction ), -1.0, 1.0 );
    vec3 irradiance = directLight.color;

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;

    irradiance *= dotNL;

    float shading = getShading( dotNL, shadow, material.shadingShift );

    // toon shaded diffuse
    reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
  }

  void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
    // indirect diffuse will use diffuseColor, no shadeColor involved
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;
  }
#else
  void RE_Direct_MToon( const in IncidentLight directLight, const in GeometricContext geometry, const in MToonMaterial material, const in float shadow, inout ReflectedLight reflectedLight ) {
    float dotNL = clamp( dot( geometry.normal, directLight.direction ), -1.0, 1.0 );
    vec3 irradiance = directLight.color;

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;

    irradiance *= dotNL;

    float shading = getShading( dotNL, shadow, material.shadingShift );

    // toon shaded diffuse
    reflectedLight.directDiffuse += getDiffuse( material, shading, directLight.color );
  }

  void RE_IndirectDiffuse_MToon( const in vec3 irradiance, const in GeometricContext geometry, const in MToonMaterial material, inout ReflectedLight reflectedLight ) {
    // indirect diffuse will use diffuseColor, no shadeColor involved
    reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );

    // directSpecular will be used for rim lighting, not an actual specular
    reflectedLight.directSpecular += irradiance;
  }
#endif

#define RE_Direct RE_Direct_MToon
#define RE_IndirectDiffuse RE_IndirectDiffuse_MToon
#define Material_LightProbeLOD( material ) (0)

#include <shadowmap_pars_fragment>
// #include <bumpmap_pars_fragment>

// #include <normalmap_pars_fragment>
#ifdef USE_NORMALMAP

  uniform sampler2D normalMap;
  uniform mat3 normalMapUvTransform;
  uniform vec2 normalScale;

#endif

// COMPAT: pre-r151
// USE_NORMALMAP_OBJECTSPACE used to be OBJECTSPACE_NORMALMAP in pre-r151
#if defined( USE_NORMALMAP_OBJECTSPACE ) || defined( OBJECTSPACE_NORMALMAP )

  uniform mat3 normalMatrix;

#endif

// COMPAT: pre-r151
// USE_NORMALMAP_TANGENTSPACE used to be TANGENTSPACE_NORMALMAP in pre-r151
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( TANGENTSPACE_NORMALMAP ) )

  // Per-Pixel Tangent Space Normal Mapping
  // http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html

  // three-vrm specific change: it requires \`uv\` as an input in order to support uv scrolls

  // Temporary compat against shader change @ Three.js r126, r151
  #if THREE_VRM_THREE_REVISION >= 151

    mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {

      vec3 q0 = dFdx( eye_pos.xyz );
      vec3 q1 = dFdy( eye_pos.xyz );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = surf_norm;

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );

      return mat3( T * scale, B * scale, N );

    }

  #else

    vec3 perturbNormal2Arb( vec2 uv, vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {

      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
      vec2 st0 = dFdx( uv.st );
      vec2 st1 = dFdy( uv.st );

      vec3 N = normalize( surf_norm );

      vec3 q1perp = cross( q1, N );
      vec3 q0perp = cross( N, q0 );

      vec3 T = q1perp * st0.x + q0perp * st1.x;
      vec3 B = q1perp * st0.y + q0perp * st1.y;

      // three-vrm specific change: Workaround for the issue that happens when delta of uv = 0.0
      // TODO: Is this still required? Or shall I make a PR about it?
      if ( length( T ) == 0.0 || length( B ) == 0.0 ) {
        return surf_norm;
      }

      float det = max( dot( T, T ), dot( B, B ) );
      float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );

      return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );

    }

  #endif

#endif

// #include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

// == post correction ==========================================================
void postCorrection() {
  #include <tonemapping_fragment>
  #include <colorspace_fragment>
  #include <fog_fragment>
  #include <premultiplied_alpha_fragment>
  #include <dithering_fragment>
}

// == main procedure ===========================================================
void main() {
  #include <clipping_planes_fragment>

  vec2 uv = vec2(0.5, 0.5);

  #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
    uv = vUv;

    float uvAnimMask = 1.0;
    #ifdef USE_UVANIMATIONMASKTEXTURE
      vec2 uvAnimationMaskTextureUv = ( uvAnimationMaskTextureUvTransform * vec3( uv, 1 ) ).xy;
      uvAnimMask = texture2D( uvAnimationMaskTexture, uvAnimationMaskTextureUv ).b;
    #endif

    float uvRotCos = cos( uvAnimationRotationPhase * uvAnimMask );
    float uvRotSin = sin( uvAnimationRotationPhase * uvAnimMask );
    uv = mat2( uvRotCos, -uvRotSin, uvRotSin, uvRotCos ) * ( uv - 0.5 ) + 0.5;
    uv = uv + vec2( uvAnimationScrollXOffset, uvAnimationScrollYOffset ) * uvAnimMask;
  #endif

  #ifdef DEBUG_UV
    gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
    #if ( defined( MTOON_USE_UV ) && !defined( MTOON_UVS_VERTEX_ONLY ) )
      gl_FragColor = vec4( uv, 0.0, 1.0 );
    #endif
    return;
  #endif

  vec4 diffuseColor = vec4( litFactor, opacity );
  ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
  vec3 totalEmissiveRadiance = emissive * emissiveIntensity;

  #include <logdepthbuf_fragment>

  // #include <map_fragment>
  #ifdef USE_MAP
    vec2 mapUv = ( mapUvTransform * vec3( uv, 1 ) ).xy;
    vec4 sampledDiffuseColor = texture2D( map, mapUv );
    #ifdef DECODE_VIDEO_TEXTURE
      sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
    #endif
    diffuseColor *= sampledDiffuseColor;
  #endif

  // #include <color_fragment>
  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    diffuseColor.rgb *= vColor;
  #endif

  // #include <alphamap_fragment>

  #include <alphatest_fragment>

  // #include <specularmap_fragment>

  // #include <normal_fragment_begin>
  float faceDirection = gl_FrontFacing ? 1.0 : -1.0;

  #ifdef FLAT_SHADED

    vec3 fdx = dFdx( vViewPosition );
    vec3 fdy = dFdy( vViewPosition );
    vec3 normal = normalize( cross( fdx, fdy ) );

  #else

    vec3 normal = normalize( vNormal );

    #ifdef DOUBLE_SIDED

      normal *= faceDirection;

    #endif

  #endif

  #ifdef USE_NORMALMAP

    vec2 normalMapUv = ( normalMapUvTransform * vec3( uv, 1 ) ).xy;

  #endif

  #ifdef USE_NORMALMAP_TANGENTSPACE

    #ifdef USE_TANGENT

      mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

    #else

      mat3 tbn = getTangentFrame( - vViewPosition, normal, normalMapUv );

    #endif

    #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

      tbn[0] *= faceDirection;
      tbn[1] *= faceDirection;

    #endif

  #endif

  #ifdef USE_CLEARCOAT_NORMALMAP

    #ifdef USE_TANGENT

      mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );

    #else

      mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );

    #endif

    #if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )

      tbn2[0] *= faceDirection;
      tbn2[1] *= faceDirection;

    #endif

  #endif

  // non perturbed normal for clearcoat among others

  vec3 nonPerturbedNormal = normal;

  #ifdef OUTLINE
    normal *= -1.0;
  #endif

  // #include <normal_fragment_maps>

  // COMPAT: pre-r151
  // USE_NORMALMAP_OBJECTSPACE used to be OBJECTSPACE_NORMALMAP in pre-r151
  #if defined( USE_NORMALMAP_OBJECTSPACE ) || defined( OBJECTSPACE_NORMALMAP )

    normal = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals

    #ifdef FLIP_SIDED

      normal = - normal;

    #endif

    #ifdef DOUBLE_SIDED

      normal = normal * faceDirection;

    #endif

    normal = normalize( normalMatrix * normal );

  // COMPAT: pre-r151
  // USE_NORMALMAP_TANGENTSPACE used to be TANGENTSPACE_NORMALMAP in pre-r151
  #elif defined( USE_NORMALMAP_TANGENTSPACE ) || defined( TANGENTSPACE_NORMALMAP )

    vec3 mapN = texture2D( normalMap, normalMapUv ).xyz * 2.0 - 1.0;
    mapN.xy *= normalScale;

    // COMPAT: pre-r151
    #if THREE_VRM_THREE_REVISION >= 151 || defined( USE_TANGENT )

      normal = normalize( tbn * mapN );

    #else

      normal = perturbNormal2Arb( uv, -vViewPosition, normal, mapN, faceDirection );

    #endif

  #endif

  // #include <emissivemap_fragment>
  #ifdef USE_EMISSIVEMAP
    vec2 emissiveMapUv = ( emissiveMapUvTransform * vec3( uv, 1 ) ).xy;
    totalEmissiveRadiance *= texture2D( emissiveMap, emissiveMapUv ).rgb;
  #endif

  #ifdef DEBUG_NORMAL
    gl_FragColor = vec4( 0.5 + 0.5 * normal, 1.0 );
    return;
  #endif

  // -- MToon: lighting --------------------------------------------------------
  // accumulation
  // #include <lights_phong_fragment>
  MToonMaterial material;

  material.diffuseColor = diffuseColor.rgb;

  material.shadeColor = shadeColorFactor;
  #ifdef USE_SHADEMULTIPLYTEXTURE
    vec2 shadeMultiplyTextureUv = ( shadeMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadeColor *= texture2D( shadeMultiplyTexture, shadeMultiplyTextureUv ).rgb;
  #endif

  #if ( defined( USE_COLOR ) && !defined( IGNORE_VERTEX_COLOR ) )
    material.shadeColor.rgb *= vColor;
  #endif

  material.shadingShift = shadingShiftFactor;
  #ifdef USE_SHADINGSHIFTTEXTURE
    vec2 shadingShiftTextureUv = ( shadingShiftTextureUvTransform * vec3( uv, 1 ) ).xy;
    material.shadingShift += texture2D( shadingShiftTexture, shadingShiftTextureUv ).r * shadingShiftTextureScale;
  #endif

  // #include <lights_fragment_begin>

  // MToon Specific changes:
  // Since we want to take shadows into account of shading instead of irradiance,
  // we had to modify the codes that multiplies the results of shadowmap into color of direct lights.

  // COMPAT: pre-r156 uses a struct GeometricContext
  #if THREE_VRM_THREE_REVISION >= 157
    vec3 geometryPosition = - vViewPosition;
    vec3 geometryNormal = normal;
    vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

    vec3 geometryClearcoatNormal;

    #ifdef USE_CLEARCOAT

      geometryClearcoatNormal = clearcoatNormal;

    #endif
  #else
    GeometricContext geometry;

    geometry.position = - vViewPosition;
    geometry.normal = normal;
    geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

    #ifdef USE_CLEARCOAT

      geometry.clearcoatNormal = clearcoatNormal;

    #endif
  #endif

  IncidentLight directLight;

  // since these variables will be used in unrolled loop, we have to define in prior
  float shadow;

  #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

    PointLight pointLight;
    #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
    PointLightShadow pointLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

      pointLight = pointLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getPointLightInfo( pointLight, geometryPosition, directLight );
      #else
        getPointLightInfo( pointLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
      pointLightShadow = pointLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

    SpotLight spotLight;
    #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
    SpotLightShadow spotLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

      spotLight = spotLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getSpotLightInfo( spotLight, geometryPosition, directLight );
      #else
        getSpotLightInfo( spotLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
      spotLightShadow = spotLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )

    DirectionalLight directionalLight;
    #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
    DirectionalLightShadow directionalLightShadow;
    #endif

    #pragma unroll_loop_start
    for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

      directionalLight = directionalLights[ i ];

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        getDirectionalLightInfo( directionalLight, directLight );
      #else
        getDirectionalLightInfo( directionalLight, geometry, directLight );
      #endif

      shadow = 1.0;
      #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
      directionalLightShadow = directionalLightShadows[ i ];
      // COMPAT: pre-r166
      // r166 introduced shadowIntensity
      #if THREE_VRM_THREE_REVISION >= 166
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #else
        shadow = all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
      #endif
      #endif

      // COMPAT: pre-r156 uses a struct GeometricContext
      #if THREE_VRM_THREE_REVISION >= 157
        RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, shadow, reflectedLight );
      #else
        RE_Direct( directLight, geometry, material, shadow, reflectedLight );
      #endif

    }
    #pragma unroll_loop_end

  #endif

  // #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

  //   RectAreaLight rectAreaLight;

  //   #pragma unroll_loop_start
  //   for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

  //     rectAreaLight = rectAreaLights[ i ];
  //     RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );

  //   }
  //   #pragma unroll_loop_end

  // #endif

  #if defined( RE_IndirectDiffuse )

    vec3 iblIrradiance = vec3( 0.0 );

    vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

    // COMPAT: pre-r156 uses a struct GeometricContext
    // COMPAT: pre-r156 doesn't have a define USE_LIGHT_PROBES
    #if THREE_VRM_THREE_REVISION >= 157
      #if defined( USE_LIGHT_PROBES )
        irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
      #endif
    #else
      irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
    #endif

    #if ( NUM_HEMI_LIGHTS > 0 )

      #pragma unroll_loop_start
      for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

        // COMPAT: pre-r156 uses a struct GeometricContext
        #if THREE_VRM_THREE_REVISION >= 157
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
        #else
          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
        #endif

      }
      #pragma unroll_loop_end

    #endif

  #endif

  // #if defined( RE_IndirectSpecular )

  //   vec3 radiance = vec3( 0.0 );
  //   vec3 clearcoatRadiance = vec3( 0.0 );

  // #endif

  #include <lights_fragment_maps>
  #include <lights_fragment_end>

  // modulation
  #include <aomap_fragment>

  vec3 col = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;

  #ifdef DEBUG_LITSHADERATE
    gl_FragColor = vec4( col, diffuseColor.a );
    postCorrection();
    return;
  #endif

  // -- MToon: rim lighting -----------------------------------------
  vec3 viewDir = normalize( vViewPosition );

  #ifndef PHYSICALLY_CORRECT_LIGHTS
    reflectedLight.directSpecular /= PI;
  #endif
  vec3 rimMix = mix( vec3( 1.0 ), reflectedLight.directSpecular, 1.0 );

  vec3 rim = parametricRimColorFactor * pow( saturate( 1.0 - dot( viewDir, normal ) + parametricRimLiftFactor ), parametricRimFresnelPowerFactor );

  #ifdef USE_MATCAPTEXTURE
    {
      vec3 x = normalize( vec3( viewDir.z, 0.0, -viewDir.x ) );
      vec3 y = cross( viewDir, x ); // guaranteed to be normalized
      vec2 sphereUv = 0.5 + 0.5 * vec2( dot( x, normal ), -dot( y, normal ) );
      sphereUv = ( matcapTextureUvTransform * vec3( sphereUv, 1 ) ).xy;
      vec3 matcap = texture2D( matcapTexture, sphereUv ).rgb;
      rim += matcapFactor * matcap;
    }
  #endif

  #ifdef USE_RIMMULTIPLYTEXTURE
    vec2 rimMultiplyTextureUv = ( rimMultiplyTextureUvTransform * vec3( uv, 1 ) ).xy;
    rim *= texture2D( rimMultiplyTexture, rimMultiplyTextureUv ).rgb;
  #endif

  col += rimMix * rim;

  // -- MToon: Emission --------------------------------------------------------
  col += totalEmissiveRadiance;

  // #include <envmap_fragment>

  // -- Almost done! -----------------------------------------------------------
  #if defined( OUTLINE )
    col = outlineColorFactor.rgb * mix( vec3( 1.0 ), col, outlineLightingMixFactor );
  #endif

  #ifdef OPAQUE
    diffuseColor.a = 1.0;
  #endif

  gl_FragColor = vec4( col, diffuseColor.a );
  postCorrection();
}
`,wfe={None:"none",Normal:"normal",LitShadeRate:"litShadeRate",UV:"uv"},tO={None:"none",WorldCoordinates:"worldCoordinates",ScreenCoordinates:"screenCoordinates"},bfe={3e3:"",3001:"srgb"};function kB(t){return parseInt(eA,10)>=152?t.colorSpace:bfe[t.encoding]}var _z=class extends fn{constructor(t={}){var e;super({vertexShader:vfe,fragmentShader:yfe}),this.uvAnimationScrollXSpeedFactor=0,this.uvAnimationScrollYSpeedFactor=0,this.uvAnimationRotationSpeedFactor=0,this.fog=!0,this.normalMapType=Kf,this._ignoreVertexColor=!0,this._v0CompatShade=!1,this._debugMode=wfe.None,this._outlineWidthMode=tO.None,this._isOutline=!1,t.transparentWithZWrite&&(t.depthWrite=!0),delete t.transparentWithZWrite,t.fog=!0,t.lights=!0,t.clipping=!0,this.uniforms=LI.merge([Ge.common,Ge.normalmap,Ge.emissivemap,Ge.fog,Ge.lights,{litFactor:{value:new He(1,1,1)},mapUvTransform:{value:new dt},colorAlpha:{value:1},normalMapUvTransform:{value:new dt},shadeColorFactor:{value:new He(0,0,0)},shadeMultiplyTexture:{value:null},shadeMultiplyTextureUvTransform:{value:new dt},shadingShiftFactor:{value:0},shadingShiftTexture:{value:null},shadingShiftTextureUvTransform:{value:new dt},shadingShiftTextureScale:{value:1},shadingToonyFactor:{value:.9},giEqualizationFactor:{value:.9},matcapFactor:{value:new He(1,1,1)},matcapTexture:{value:null},matcapTextureUvTransform:{value:new dt},parametricRimColorFactor:{value:new He(0,0,0)},rimMultiplyTexture:{value:null},rimMultiplyTextureUvTransform:{value:new dt},rimLightingMixFactor:{value:1},parametricRimFresnelPowerFactor:{value:5},parametricRimLiftFactor:{value:0},emissive:{value:new He(0,0,0)},emissiveIntensity:{value:1},emissiveMapUvTransform:{value:new dt},outlineWidthMultiplyTexture:{value:null},outlineWidthMultiplyTextureUvTransform:{value:new dt},outlineWidthFactor:{value:0},outlineColorFactor:{value:new He(0,0,0)},outlineLightingMixFactor:{value:1},uvAnimationMaskTexture:{value:null},uvAnimationMaskTextureUvTransform:{value:new dt},uvAnimationScrollXOffset:{value:0},uvAnimationScrollYOffset:{value:0},uvAnimationRotationPhase:{value:0}},(e=t.uniforms)!=null?e:{}]),this.setValues(t),this._uploadUniformsWorkaround(),this.customProgramCacheKey=()=>[...Object.entries(this._generateDefines()).map(([r,n])=>`${r}:${n}`),this.matcapTexture?`matcapTextureColorSpace:${kB(this.matcapTexture)}`:"",this.shadeMultiplyTexture?`shadeMultiplyTextureColorSpace:${kB(this.shadeMultiplyTexture)}`:"",this.rimMultiplyTexture?`rimMultiplyTextureColorSpace:${kB(this.rimMultiplyTexture)}`:""].join(","),this.onBeforeCompile=r=>{const n=parseInt(eA,10),i=Object.entries(eO(eO({},this._generateDefines()),this.defines)).filter(([s,a])=>!!a).map(([s,a])=>`#define ${s} ${a}`).join(`
`)+`
`;r.vertexShader=i+r.vertexShader,r.fragmentShader=i+r.fragmentShader,n<154&&(r.fragmentShader=r.fragmentShader.replace("#include <colorspace_fragment>","#include <encodings_fragment>"))}}get color(){return this.uniforms.litFactor.value}set color(t){this.uniforms.litFactor.value=t}get map(){return this.uniforms.map.value}set map(t){this.uniforms.map.value=t}get normalMap(){return this.uniforms.normalMap.value}set normalMap(t){this.uniforms.normalMap.value=t}get normalScale(){return this.uniforms.normalScale.value}set normalScale(t){this.uniforms.normalScale.value=t}get emissive(){return this.uniforms.emissive.value}set emissive(t){this.uniforms.emissive.value=t}get emissiveIntensity(){return this.uniforms.emissiveIntensity.value}set emissiveIntensity(t){this.uniforms.emissiveIntensity.value=t}get emissiveMap(){return this.uniforms.emissiveMap.value}set emissiveMap(t){this.uniforms.emissiveMap.value=t}get shadeColorFactor(){return this.uniforms.shadeColorFactor.value}set shadeColorFactor(t){this.uniforms.shadeColorFactor.value=t}get shadeMultiplyTexture(){return this.uniforms.shadeMultiplyTexture.value}set shadeMultiplyTexture(t){this.uniforms.shadeMultiplyTexture.value=t}get shadingShiftFactor(){return this.uniforms.shadingShiftFactor.value}set shadingShiftFactor(t){this.uniforms.shadingShiftFactor.value=t}get shadingShiftTexture(){return this.uniforms.shadingShiftTexture.value}set shadingShiftTexture(t){this.uniforms.shadingShiftTexture.value=t}get shadingShiftTextureScale(){return this.uniforms.shadingShiftTextureScale.value}set shadingShiftTextureScale(t){this.uniforms.shadingShiftTextureScale.value=t}get shadingToonyFactor(){return this.uniforms.shadingToonyFactor.value}set shadingToonyFactor(t){this.uniforms.shadingToonyFactor.value=t}get giEqualizationFactor(){return this.uniforms.giEqualizationFactor.value}set giEqualizationFactor(t){this.uniforms.giEqualizationFactor.value=t}get matcapFactor(){return this.uniforms.matcapFactor.value}set matcapFactor(t){this.uniforms.matcapFactor.value=t}get matcapTexture(){return this.uniforms.matcapTexture.value}set matcapTexture(t){this.uniforms.matcapTexture.value=t}get parametricRimColorFactor(){return this.uniforms.parametricRimColorFactor.value}set parametricRimColorFactor(t){this.uniforms.parametricRimColorFactor.value=t}get rimMultiplyTexture(){return this.uniforms.rimMultiplyTexture.value}set rimMultiplyTexture(t){this.uniforms.rimMultiplyTexture.value=t}get rimLightingMixFactor(){return this.uniforms.rimLightingMixFactor.value}set rimLightingMixFactor(t){this.uniforms.rimLightingMixFactor.value=t}get parametricRimFresnelPowerFactor(){return this.uniforms.parametricRimFresnelPowerFactor.value}set parametricRimFresnelPowerFactor(t){this.uniforms.parametricRimFresnelPowerFactor.value=t}get parametricRimLiftFactor(){return this.uniforms.parametricRimLiftFactor.value}set parametricRimLiftFactor(t){this.uniforms.parametricRimLiftFactor.value=t}get outlineWidthMultiplyTexture(){return this.uniforms.outlineWidthMultiplyTexture.value}set outlineWidthMultiplyTexture(t){this.uniforms.outlineWidthMultiplyTexture.value=t}get outlineWidthFactor(){return this.uniforms.outlineWidthFactor.value}set outlineWidthFactor(t){this.uniforms.outlineWidthFactor.value=t}get outlineColorFactor(){return this.uniforms.outlineColorFactor.value}set outlineColorFactor(t){this.uniforms.outlineColorFactor.value=t}get outlineLightingMixFactor(){return this.uniforms.outlineLightingMixFactor.value}set outlineLightingMixFactor(t){this.uniforms.outlineLightingMixFactor.value=t}get uvAnimationMaskTexture(){return this.uniforms.uvAnimationMaskTexture.value}set uvAnimationMaskTexture(t){this.uniforms.uvAnimationMaskTexture.value=t}get uvAnimationScrollXOffset(){return this.uniforms.uvAnimationScrollXOffset.value}set uvAnimationScrollXOffset(t){this.uniforms.uvAnimationScrollXOffset.value=t}get uvAnimationScrollYOffset(){return this.uniforms.uvAnimationScrollYOffset.value}set uvAnimationScrollYOffset(t){this.uniforms.uvAnimationScrollYOffset.value=t}get uvAnimationRotationPhase(){return this.uniforms.uvAnimationRotationPhase.value}set uvAnimationRotationPhase(t){this.uniforms.uvAnimationRotationPhase.value=t}get ignoreVertexColor(){return this._ignoreVertexColor}set ignoreVertexColor(t){this._ignoreVertexColor=t,this.needsUpdate=!0}get v0CompatShade(){return this._v0CompatShade}set v0CompatShade(t){this._v0CompatShade=t,this.needsUpdate=!0}get debugMode(){return this._debugMode}set debugMode(t){this._debugMode=t,this.needsUpdate=!0}get outlineWidthMode(){return this._outlineWidthMode}set outlineWidthMode(t){this._outlineWidthMode=t,this.needsUpdate=!0}get isOutline(){return this._isOutline}set isOutline(t){this._isOutline=t,this.needsUpdate=!0}get isMToonMaterial(){return!0}update(t){this._uploadUniformsWorkaround(),this._updateUVAnimation(t)}copy(t){return super.copy(t),this.map=t.map,this.normalMap=t.normalMap,this.emissiveMap=t.emissiveMap,this.shadeMultiplyTexture=t.shadeMultiplyTexture,this.shadingShiftTexture=t.shadingShiftTexture,this.matcapTexture=t.matcapTexture,this.rimMultiplyTexture=t.rimMultiplyTexture,this.outlineWidthMultiplyTexture=t.outlineWidthMultiplyTexture,this.uvAnimationMaskTexture=t.uvAnimationMaskTexture,this.normalMapType=t.normalMapType,this.uvAnimationScrollXSpeedFactor=t.uvAnimationScrollXSpeedFactor,this.uvAnimationScrollYSpeedFactor=t.uvAnimationScrollYSpeedFactor,this.uvAnimationRotationSpeedFactor=t.uvAnimationRotationSpeedFactor,this.ignoreVertexColor=t.ignoreVertexColor,this.v0CompatShade=t.v0CompatShade,this.debugMode=t.debugMode,this.outlineWidthMode=t.outlineWidthMode,this.isOutline=t.isOutline,this.needsUpdate=!0,this}_updateUVAnimation(t){this.uniforms.uvAnimationScrollXOffset.value+=t*this.uvAnimationScrollXSpeedFactor,this.uniforms.uvAnimationScrollYOffset.value+=t*this.uvAnimationScrollYSpeedFactor,this.uniforms.uvAnimationRotationPhase.value+=t*this.uvAnimationRotationSpeedFactor,this.uniforms.alphaTest.value=this.alphaTest,this.uniformsNeedUpdate=!0}_uploadUniformsWorkaround(){this.uniforms.opacity.value=this.opacity,this._updateTextureMatrix(this.uniforms.map,this.uniforms.mapUvTransform),this._updateTextureMatrix(this.uniforms.normalMap,this.uniforms.normalMapUvTransform),this._updateTextureMatrix(this.uniforms.emissiveMap,this.uniforms.emissiveMapUvTransform),this._updateTextureMatrix(this.uniforms.shadeMultiplyTexture,this.uniforms.shadeMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.shadingShiftTexture,this.uniforms.shadingShiftTextureUvTransform),this._updateTextureMatrix(this.uniforms.matcapTexture,this.uniforms.matcapTextureUvTransform),this._updateTextureMatrix(this.uniforms.rimMultiplyTexture,this.uniforms.rimMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.outlineWidthMultiplyTexture,this.uniforms.outlineWidthMultiplyTextureUvTransform),this._updateTextureMatrix(this.uniforms.uvAnimationMaskTexture,this.uniforms.uvAnimationMaskTextureUvTransform),this.uniformsNeedUpdate=!0}_generateDefines(){const t=parseInt(eA,10),e=this.outlineWidthMultiplyTexture!==null,r=this.map!==null||this.normalMap!==null||this.emissiveMap!==null||this.shadeMultiplyTexture!==null||this.shadingShiftTexture!==null||this.rimMultiplyTexture!==null||this.uvAnimationMaskTexture!==null;return{THREE_VRM_THREE_REVISION:t,OUTLINE:this._isOutline,MTOON_USE_UV:e||r,MTOON_UVS_VERTEX_ONLY:e&&!r,V0_COMPAT_SHADE:this._v0CompatShade,USE_SHADEMULTIPLYTEXTURE:this.shadeMultiplyTexture!==null,USE_SHADINGSHIFTTEXTURE:this.shadingShiftTexture!==null,USE_MATCAPTEXTURE:this.matcapTexture!==null,USE_RIMMULTIPLYTEXTURE:this.rimMultiplyTexture!==null,USE_OUTLINEWIDTHMULTIPLYTEXTURE:this._isOutline&&this.outlineWidthMultiplyTexture!==null,USE_UVANIMATIONMASKTEXTURE:this.uvAnimationMaskTexture!==null,IGNORE_VERTEX_COLOR:this._ignoreVertexColor===!0,DEBUG_NORMAL:this._debugMode==="normal",DEBUG_LITSHADERATE:this._debugMode==="litShadeRate",DEBUG_UV:this._debugMode==="uv",OUTLINE_WIDTH_SCREEN:this._isOutline&&this._outlineWidthMode===tO.ScreenCoordinates}}_updateTextureMatrix(t,e){t.value&&(t.value.matrixAutoUpdate&&t.value.updateMatrix(),e.value.copy(t.value.matrix))}},_fe=new Set(["1.0","1.0-beta"]),xz=class kw{get name(){return kw.EXTENSION_NAME}constructor(e,r={}){var n,i,s,a;this.parser=e,this.materialType=(n=r.materialType)!=null?n:_z,this.renderOrderOffset=(i=r.renderOrderOffset)!=null?i:0,this.v0CompatShade=(s=r.v0CompatShade)!=null?s:!1,this.debugMode=(a=r.debugMode)!=null?a:"none",this._mToonMaterialSet=new Set}beforeRoot(){return du(this,null,function*(){this._removeUnlitExtensionIfMToonExists()})}afterRoot(e){return du(this,null,function*(){e.userData.vrmMToonMaterials=Array.from(this._mToonMaterialSet)})}getMaterialType(e){return this._getMToonExtension(e)?this.materialType:null}extendMaterialParams(e,r){const n=this._getMToonExtension(e);return n?this._extendMaterialParams(n,r):null}loadMesh(e){return du(this,null,function*(){var r;const n=this.parser,i=(r=n.json.meshes)==null?void 0:r[e];if(i==null)throw new Error(`MToonMaterialLoaderPlugin: Attempt to use meshes[${e}] of glTF but the mesh doesn't exist`);const s=i.primitives,a=yield n.loadMesh(e);if(s.length===1){const o=a,l=s[0].material;l!=null&&this._setupPrimitive(o,l)}else{const o=a;for(let l=0;l<s.length;l++){const A=o.children[l],c=s[l].material;c!=null&&this._setupPrimitive(A,c)}}return a})}_removeUnlitExtensionIfMToonExists(){const e=this.parser.json.materials;e==null||e.map((r,n)=>{var i;this._getMToonExtension(n)&&(i=r.extensions)!=null&&i.KHR_materials_unlit&&delete r.extensions.KHR_materials_unlit})}_getMToonExtension(e){var r,n;const i=(r=this.parser.json.materials)==null?void 0:r[e];if(i==null){console.warn(`MToonMaterialLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const s=(n=i.extensions)==null?void 0:n[kw.EXTENSION_NAME];if(s==null)return;const a=s.specVersion;if(!_fe.has(a)){console.warn(`MToonMaterialLoaderPlugin: Unknown ${kw.EXTENSION_NAME} specVersion "${a}"`);return}return s}_extendMaterialParams(e,r){return du(this,null,function*(){var n;delete r.metalness,delete r.roughness;const i=new gfe(this.parser,r);i.assignPrimitive("transparentWithZWrite",e.transparentWithZWrite),i.assignColor("shadeColorFactor",e.shadeColorFactor),i.assignTexture("shadeMultiplyTexture",e.shadeMultiplyTexture,!0),i.assignPrimitive("shadingShiftFactor",e.shadingShiftFactor),i.assignTexture("shadingShiftTexture",e.shadingShiftTexture,!0),i.assignPrimitive("shadingShiftTextureScale",(n=e.shadingShiftTexture)==null?void 0:n.scale),i.assignPrimitive("shadingToonyFactor",e.shadingToonyFactor),i.assignPrimitive("giEqualizationFactor",e.giEqualizationFactor),i.assignColor("matcapFactor",e.matcapFactor),i.assignTexture("matcapTexture",e.matcapTexture,!0),i.assignColor("parametricRimColorFactor",e.parametricRimColorFactor),i.assignTexture("rimMultiplyTexture",e.rimMultiplyTexture,!0),i.assignPrimitive("rimLightingMixFactor",e.rimLightingMixFactor),i.assignPrimitive("parametricRimFresnelPowerFactor",e.parametricRimFresnelPowerFactor),i.assignPrimitive("parametricRimLiftFactor",e.parametricRimLiftFactor),i.assignPrimitive("outlineWidthMode",e.outlineWidthMode),i.assignPrimitive("outlineWidthFactor",e.outlineWidthFactor),i.assignTexture("outlineWidthMultiplyTexture",e.outlineWidthMultiplyTexture,!1),i.assignColor("outlineColorFactor",e.outlineColorFactor),i.assignPrimitive("outlineLightingMixFactor",e.outlineLightingMixFactor),i.assignTexture("uvAnimationMaskTexture",e.uvAnimationMaskTexture,!1),i.assignPrimitive("uvAnimationScrollXSpeedFactor",e.uvAnimationScrollXSpeedFactor),i.assignPrimitive("uvAnimationScrollYSpeedFactor",e.uvAnimationScrollYSpeedFactor),i.assignPrimitive("uvAnimationRotationSpeedFactor",e.uvAnimationRotationSpeedFactor),i.assignPrimitive("v0CompatShade",this.v0CompatShade),i.assignPrimitive("debugMode",this.debugMode),yield i.pending})}_setupPrimitive(e,r){const n=this._getMToonExtension(r);if(n){const i=this._parseRenderOrder(n);e.renderOrder=i+this.renderOrderOffset,this._generateOutline(e),this._addToMaterialSet(e);return}}_shouldGenerateOutline(e){return typeof e.outlineWidthMode=="string"&&e.outlineWidthMode!=="none"&&typeof e.outlineWidthFactor=="number"&&e.outlineWidthFactor>0}_generateOutline(e){const r=e.material;if(!(r instanceof is)||!this._shouldGenerateOutline(r))return;e.material=[r];const n=r.clone();n.name+=" (Outline)",n.isOutline=!0,n.side=ti,e.material.push(n);const i=e.geometry,s=i.index?i.index.count:i.attributes.position.count/3;i.addGroup(0,s,0),i.addGroup(0,s,1)}_addToMaterialSet(e){const r=e.material,n=new Set;Array.isArray(r)?r.forEach(i=>n.add(i)):n.add(r);for(const i of n)this._mToonMaterialSet.add(i)}_parseRenderOrder(e){var r;return(e.transparentWithZWrite?0:19)+((r=e.renderQueueOffsetNumber)!=null?r:0)}};xz.EXTENSION_NAME="VRMC_materials_mtoon";var xfe=xz,Efe=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{o(r.next(l))}catch(A){i(A)}},a=l=>{try{o(r.throw(l))}catch(A){i(A)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((r=r.apply(t,e)).next())}),Ez=class iS{get name(){return iS.EXTENSION_NAME}constructor(e){this.parser=e}extendMaterialParams(e,r){return Efe(this,null,function*(){const n=this._getHDREmissiveMultiplierExtension(e);if(n==null)return;console.warn("VRMMaterialsHDREmissiveMultiplierLoaderPlugin: `VRMC_materials_hdr_emissiveMultiplier` is archived. Use `KHR_materials_emissive_strength` instead.");const i=n.emissiveMultiplier;r.emissiveIntensity=i})}_getHDREmissiveMultiplierExtension(e){var r,n;const i=(r=this.parser.json.materials)==null?void 0:r[e];if(i==null){console.warn(`VRMMaterialsHDREmissiveMultiplierLoaderPlugin: Attempt to use materials[${e}] of glTF but the material doesn't exist`);return}const s=(n=i.extensions)==null?void 0:n[iS.EXTENSION_NAME];if(s!=null)return s}};Ez.EXTENSION_NAME="VRMC_materials_hdr_emissiveMultiplier";var Bfe=Ez,Mfe=Object.defineProperty,Tfe=Object.defineProperties,Cfe=Object.getOwnPropertyDescriptors,rO=Object.getOwnPropertySymbols,Sfe=Object.prototype.hasOwnProperty,Ife=Object.prototype.propertyIsEnumerable,nO=(t,e,r)=>e in t?Mfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vo=(t,e)=>{for(var r in e||(e={}))Sfe.call(e,r)&&nO(t,r,e[r]);if(rO)for(var r of rO(e))Ife.call(e,r)&&nO(t,r,e[r]);return t},iO=(t,e)=>Tfe(t,Cfe(e)),Rfe=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{o(r.next(l))}catch(A){i(A)}},a=l=>{try{o(r.throw(l))}catch(A){i(A)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((r=r.apply(t,e)).next())});function Rh(t){return Math.pow(t,2.2)}var Ufe=class{get name(){return"VRMMaterialsV0CompatPlugin"}constructor(t){var e;this.parser=t,this._renderQueueMapTransparent=new Map,this._renderQueueMapTransparentZWrite=new Map;const r=this.parser.json;r.extensionsUsed=(e=r.extensionsUsed)!=null?e:[],r.extensionsUsed.indexOf("KHR_texture_transform")===-1&&r.extensionsUsed.push("KHR_texture_transform")}beforeRoot(){return Rfe(this,null,function*(){var t;const e=this.parser.json,r=(t=e.extensions)==null?void 0:t.VRM,n=r==null?void 0:r.materialProperties;n&&(this._populateRenderQueueMap(n),n.forEach((i,s)=>{var a,o;const l=(a=e.materials)==null?void 0:a[s];if(l==null){console.warn(`VRMMaterialsV0CompatPlugin: Attempt to use materials[${s}] of glTF but the material doesn't exist`);return}if(i.shader==="VRM/MToon"){const A=this._parseV0MToonProperties(i,l);e.materials[s]=A}else if((o=i.shader)!=null&&o.startsWith("VRM/Unlit")){const A=this._parseV0UnlitProperties(i,l);e.materials[s]=A}else i.shader==="VRM_USE_GLTFSHADER"||console.warn(`VRMMaterialsV0CompatPlugin: Unknown shader: ${i.shader}`)}))})}_parseV0MToonProperties(t,e){var r,n,i,s,a,o,l,A,c,u,h,d,f,m,g,p,v,y,_,E,x,B,M,R,I,L,D,w,b,S,F,k,Q,z,j,T,H,me,ee,U,se,le,Ae,ge,ne,de,Te,re,N,he,oe,Z,$,ce,W;const V=(n=(r=t.keywordMap)==null?void 0:r._ALPHABLEND_ON)!=null?n:!1,J=((i=t.floatProperties)==null?void 0:i._ZWrite)===1&&V,K=this._v0ParseRenderQueue(t),fe=(a=(s=t.keywordMap)==null?void 0:s._ALPHATEST_ON)!=null?a:!1,ie=V?"BLEND":fe?"MASK":"OPAQUE",Ee=fe?(l=(o=t.floatProperties)==null?void 0:o._Cutoff)!=null?l:.5:void 0,C=((c=(A=t.floatProperties)==null?void 0:A._CullMode)!=null?c:2)===0,P=this._portTextureTransform(t),G=((h=(u=t.vectorProperties)==null?void 0:u._Color)!=null?h:[1,1,1,1]).map((Be,Me)=>Me===3?Be:Rh(Be)),te=(d=t.textureProperties)==null?void 0:d._MainTex,ae=te!=null?{index:te,extensions:vo({},P)}:void 0,pe=(m=(f=t.floatProperties)==null?void 0:f._BumpScale)!=null?m:1,ve=(g=t.textureProperties)==null?void 0:g._BumpMap,Ie=ve!=null?{index:ve,scale:pe,extensions:vo({},P)}:void 0,ke=((v=(p=t.vectorProperties)==null?void 0:p._EmissionColor)!=null?v:[0,0,0,1]).map(Rh),Le=(y=t.textureProperties)==null?void 0:y._EmissionMap,Oe=Le!=null?{index:Le,extensions:vo({},P)}:void 0,ue=((E=(_=t.vectorProperties)==null?void 0:_._ShadeColor)!=null?E:[.97,.81,.86,1]).map(Rh),Qe=(x=t.textureProperties)==null?void 0:x._ShadeTexture,xe=Qe!=null?{index:Qe,extensions:vo({},P)}:void 0;let Ce=(M=(B=t.floatProperties)==null?void 0:B._ShadeShift)!=null?M:0,Fe=(I=(R=t.floatProperties)==null?void 0:R._ShadeToony)!=null?I:.9;Fe=Et.lerp(Fe,1,.5+.5*Ce),Ce=-Ce-(1-Fe);const Re=(D=(L=t.floatProperties)==null?void 0:L._IndirectLightIntensity)!=null?D:.1,ot=Re?1-Re:void 0,Kt=(w=t.textureProperties)==null?void 0:w._SphereAdd,bt=Kt!=null?[1,1,1]:void 0,it=Kt!=null?{index:Kt}:void 0,Rr=(S=(b=t.floatProperties)==null?void 0:b._RimLightingMix)!=null?S:0,Ct=(F=t.textureProperties)==null?void 0:F._RimTexture,tr=Ct!=null?{index:Ct,extensions:vo({},P)}:void 0,Vs=((Q=(k=t.vectorProperties)==null?void 0:k._RimColor)!=null?Q:[0,0,0,1]).map(Rh),Nt=(j=(z=t.floatProperties)==null?void 0:z._RimFresnelPower)!=null?j:1,er=(H=(T=t.floatProperties)==null?void 0:T._RimLift)!=null?H:0,Ws=["none","worldCoordinates","screenCoordinates"][(ee=(me=t.floatProperties)==null?void 0:me._OutlineWidthMode)!=null?ee:0];let Yt=(se=(U=t.floatProperties)==null?void 0:U._OutlineWidth)!=null?se:0;Yt=.01*Yt;const Vt=(le=t.textureProperties)==null?void 0:le._OutlineWidthTexture,Ks=Vt!=null?{index:Vt,extensions:vo({},P)}:void 0,Xt=((ge=(Ae=t.vectorProperties)==null?void 0:Ae._OutlineColor)!=null?ge:[0,0,0]).map(Rh),rr=((de=(ne=t.floatProperties)==null?void 0:ne._OutlineColorMode)!=null?de:0)===1?(re=(Te=t.floatProperties)==null?void 0:Te._OutlineLightingMix)!=null?re:1:0,us=(N=t.textureProperties)==null?void 0:N._UvAnimMaskTexture,ar=us!=null?{index:us,extensions:vo({},P)}:void 0,or=(oe=(he=t.floatProperties)==null?void 0:he._UvAnimScrollX)!=null?oe:0;let Ei=($=(Z=t.floatProperties)==null?void 0:Z._UvAnimScrollY)!=null?$:0;Ei!=null&&(Ei=-Ei);const q=(W=(ce=t.floatProperties)==null?void 0:ce._UvAnimRotation)!=null?W:0,we={specVersion:"1.0",transparentWithZWrite:J,renderQueueOffsetNumber:K,shadeColorFactor:ue,shadeMultiplyTexture:xe,shadingShiftFactor:Ce,shadingToonyFactor:Fe,giEqualizationFactor:ot,matcapFactor:bt,matcapTexture:it,rimLightingMixFactor:Rr,rimMultiplyTexture:tr,parametricRimColorFactor:Vs,parametricRimFresnelPowerFactor:Nt,parametricRimLiftFactor:er,outlineWidthMode:Ws,outlineWidthFactor:Yt,outlineWidthMultiplyTexture:Ks,outlineColorFactor:Xt,outlineLightingMixFactor:rr,uvAnimationMaskTexture:ar,uvAnimationScrollXSpeedFactor:or,uvAnimationScrollYSpeedFactor:Ei,uvAnimationRotationSpeedFactor:q};return iO(vo({},e),{pbrMetallicRoughness:{baseColorFactor:G,baseColorTexture:ae},normalTexture:Ie,emissiveTexture:Oe,emissiveFactor:ke,alphaMode:ie,alphaCutoff:Ee,doubleSided:C,extensions:{VRMC_materials_mtoon:we}})}_parseV0UnlitProperties(t,e){var r,n,i,s,a;const o=t.shader==="VRM/UnlitTransparentZWrite",l=t.shader==="VRM/UnlitTransparent"||o,A=this._v0ParseRenderQueue(t),c=t.shader==="VRM/UnlitCutout",u=l?"BLEND":c?"MASK":"OPAQUE",h=c?(n=(r=t.floatProperties)==null?void 0:r._Cutoff)!=null?n:.5:void 0,d=this._portTextureTransform(t),f=((s=(i=t.vectorProperties)==null?void 0:i._Color)!=null?s:[1,1,1,1]).map(Rh),m=(a=t.textureProperties)==null?void 0:a._MainTex,g=m!=null?{index:m,extensions:vo({},d)}:void 0,p={specVersion:"1.0",transparentWithZWrite:o,renderQueueOffsetNumber:A,shadeColorFactor:f,shadeMultiplyTexture:g};return iO(vo({},e),{pbrMetallicRoughness:{baseColorFactor:f,baseColorTexture:g},alphaMode:u,alphaCutoff:h,extensions:{VRMC_materials_mtoon:p}})}_portTextureTransform(t){var e,r,n,i,s;const a=(e=t.vectorProperties)==null?void 0:e._MainTex;if(a==null)return{};const o=[(r=a==null?void 0:a[0])!=null?r:0,(n=a==null?void 0:a[1])!=null?n:0],l=[(i=a==null?void 0:a[2])!=null?i:1,(s=a==null?void 0:a[3])!=null?s:1];return o[1]=1-l[1]-o[1],{KHR_texture_transform:{offset:o,scale:l}}}_v0ParseRenderQueue(t){var e,r;const n=t.shader==="VRM/UnlitTransparentZWrite",i=((e=t.keywordMap)==null?void 0:e._ALPHABLEND_ON)!=null||t.shader==="VRM/UnlitTransparent"||n,s=((r=t.floatProperties)==null?void 0:r._ZWrite)===1||n;let a=0;if(i){const o=t.renderQueue;o!=null&&(s?a=this._renderQueueMapTransparentZWrite.get(o):a=this._renderQueueMapTransparent.get(o))}return a}_populateRenderQueueMap(t){const e=new Set,r=new Set;t.forEach(n=>{var i,s;const a=n.shader==="VRM/UnlitTransparentZWrite",o=((i=n.keywordMap)==null?void 0:i._ALPHABLEND_ON)!=null||n.shader==="VRM/UnlitTransparent"||a,l=((s=n.floatProperties)==null?void 0:s._ZWrite)===1||a;if(o){const A=n.renderQueue;A!=null&&(l?r.add(A):e.add(A))}}),e.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${e.size} render queues for Transparent materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),r.size>10&&console.warn(`VRMMaterialsV0CompatPlugin: This VRM uses ${r.size} render queues for TransparentZWrite materials while VRM 1.0 only supports up to 10 render queues. The model might not be rendered correctly.`),Array.from(e).sort().forEach((n,i)=>{const s=Math.min(Math.max(i-e.size+1,-9),0);this._renderQueueMapTransparent.set(n,s)}),Array.from(r).sort().forEach((n,i)=>{const s=Math.min(Math.max(i,0),9);this._renderQueueMapTransparentZWrite.set(n,s)})}},sO=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{o(r.next(l))}catch(A){i(A)}},a=l=>{try{o(r.throw(l))}catch(A){i(A)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((r=r.apply(t,e)).next())}),MA=new Y,LB=class extends qn{constructor(t){super(),this._attrPosition=new lt(new Float32Array([0,0,0,0,0,0]),3),this._attrPosition.setUsage(D$);const e=new $t;e.setAttribute("position",this._attrPosition);const r=new lA({color:16711935,depthTest:!1,depthWrite:!1});this._line=new Xf(e,r),this.add(this._line),this.constraint=t}updateMatrixWorld(t){MA.setFromMatrixPosition(this.constraint.destination.matrixWorld),this._attrPosition.setXYZ(0,MA.x,MA.y,MA.z),this.constraint.source&&MA.setFromMatrixPosition(this.constraint.source.matrixWorld),this._attrPosition.setXYZ(1,MA.x,MA.y,MA.z),this._attrPosition.needsUpdate=!0,super.updateMatrixWorld(t)}};function aO(t,e){return e.set(t.elements[12],t.elements[13],t.elements[14])}var Ffe=new Y,kfe=new Y;function Lfe(t,e){return t.decompose(Ffe,e,kfe),e}function $1(t){return t.invert?t.invert():t.inverse(),t}var iR=class{constructor(t,e){this.destination=t,this.source=e,this.weight=1}},Pfe=new Y,Ofe=new Y,Dfe=new Y,Nfe=new et,Qfe=new et,Hfe=new et,jfe=class extends iR{get aimAxis(){return this._aimAxis}set aimAxis(t){this._aimAxis=t,this._v3AimAxis.set(t==="PositiveX"?1:t==="NegativeX"?-1:0,t==="PositiveY"?1:t==="NegativeY"?-1:0,t==="PositiveZ"?1:t==="NegativeZ"?-1:0)}get dependencies(){const t=new Set([this.source]);return this.destination.parent&&t.add(this.destination.parent),t}constructor(t,e){super(t,e),this._aimAxis="PositiveX",this._v3AimAxis=new Y(1,0,0),this._dstRestQuat=new et}setInitState(){this._dstRestQuat.copy(this.destination.quaternion)}update(){this.destination.updateWorldMatrix(!0,!1),this.source.updateWorldMatrix(!0,!1);const t=Nfe.identity(),e=Qfe.identity();this.destination.parent&&(Lfe(this.destination.parent.matrixWorld,t),$1(e.copy(t)));const r=Pfe.copy(this._v3AimAxis).applyQuaternion(this._dstRestQuat).applyQuaternion(t),n=aO(this.source.matrixWorld,Ofe).sub(aO(this.destination.matrixWorld,Dfe)).normalize(),i=Hfe.setFromUnitVectors(r,n).premultiply(e).multiply(t).multiply(this._dstRestQuat);this.destination.quaternion.copy(this._dstRestQuat).slerp(i,this.weight)}};function zfe(t,e){const r=[t];let n=t.parent;for(;n!==null;)r.unshift(n),n=n.parent;r.forEach(i=>{e(i)})}var Gfe=class{constructor(){this._constraints=new Set,this._objectConstraintsMap=new Map}get constraints(){return this._constraints}addConstraint(t){this._constraints.add(t);let e=this._objectConstraintsMap.get(t.destination);e==null&&(e=new Set,this._objectConstraintsMap.set(t.destination,e)),e.add(t)}deleteConstraint(t){this._constraints.delete(t),this._objectConstraintsMap.get(t.destination).delete(t)}setInitState(){const t=new Set,e=new Set;for(const r of this._constraints)this._processConstraint(r,t,e,n=>n.setInitState())}update(){const t=new Set,e=new Set;for(const r of this._constraints)this._processConstraint(r,t,e,n=>n.update())}_processConstraint(t,e,r,n){if(r.has(t))return;if(e.has(t))throw new Error("VRMNodeConstraintManager: Circular dependency detected while updating constraints");e.add(t);const i=t.dependencies;for(const s of i)zfe(s,a=>{const o=this._objectConstraintsMap.get(a);if(o)for(const l of o)this._processConstraint(l,e,r,n)});n(t),r.add(t)}},Vfe=new et,Wfe=new et,Kfe=class extends iR{get dependencies(){return new Set([this.source])}constructor(t,e){super(t,e),this._dstRestQuat=new et,this._invSrcRestQuat=new et}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),$1(this._invSrcRestQuat.copy(this.source.quaternion))}update(){const t=Vfe.copy(this._invSrcRestQuat).multiply(this.source.quaternion),e=Wfe.copy(this._dstRestQuat).multiply(t);this.destination.quaternion.copy(this._dstRestQuat).slerp(e,this.weight)}},Yfe=new Y,Xfe=new et,Zfe=new et,Jfe=class extends iR{get rollAxis(){return this._rollAxis}set rollAxis(t){this._rollAxis=t,this._v3RollAxis.set(t==="X"?1:0,t==="Y"?1:0,t==="Z"?1:0)}get dependencies(){return new Set([this.source])}constructor(t,e){super(t,e),this._rollAxis="X",this._v3RollAxis=new Y(1,0,0),this._dstRestQuat=new et,this._invDstRestQuat=new et,this._invSrcRestQuatMulDstRestQuat=new et}setInitState(){this._dstRestQuat.copy(this.destination.quaternion),$1(this._invDstRestQuat.copy(this._dstRestQuat)),$1(this._invSrcRestQuatMulDstRestQuat.copy(this.source.quaternion)).multiply(this._dstRestQuat)}update(){const t=Xfe.copy(this._invDstRestQuat).multiply(this.source.quaternion).multiply(this._invSrcRestQuatMulDstRestQuat),e=Yfe.copy(this._v3RollAxis).applyQuaternion(t),r=Zfe.setFromUnitVectors(e,this._v3RollAxis).premultiply(this._dstRestQuat).multiply(t);this.destination.quaternion.copy(this._dstRestQuat).slerp(r,this.weight)}},qfe=new Set(["1.0","1.0-beta"]),Bz=class Rm{get name(){return Rm.EXTENSION_NAME}constructor(e,r){this.parser=e,this.helperRoot=r==null?void 0:r.helperRoot}afterRoot(e){return sO(this,null,function*(){e.userData.vrmNodeConstraintManager=yield this._import(e)})}_import(e){return sO(this,null,function*(){var r;const n=this.parser.json;if(((r=n.extensionsUsed)==null?void 0:r.indexOf(Rm.EXTENSION_NAME))===-1)return null;const i=new Gfe,s=yield this.parser.getDependencies("node");return s.forEach((a,o)=>{var l;const A=n.nodes[o],c=(l=A==null?void 0:A.extensions)==null?void 0:l[Rm.EXTENSION_NAME];if(c==null)return;const u=c.specVersion;if(!qfe.has(u)){console.warn(`VRMNodeConstraintLoaderPlugin: Unknown ${Rm.EXTENSION_NAME} specVersion "${u}"`);return}const h=c.constraint;if(h.roll!=null){const d=this._importRollConstraint(a,s,h.roll);i.addConstraint(d)}else if(h.aim!=null){const d=this._importAimConstraint(a,s,h.aim);i.addConstraint(d)}else if(h.rotation!=null){const d=this._importRotationConstraint(a,s,h.rotation);i.addConstraint(d)}}),e.scene.updateMatrixWorld(),i.setInitState(),i})}_importRollConstraint(e,r,n){const{source:i,rollAxis:s,weight:a}=n,o=r[i],l=new Jfe(e,o);if(s!=null&&(l.rollAxis=s),a!=null&&(l.weight=a),this.helperRoot){const A=new LB(l);this.helperRoot.add(A)}return l}_importAimConstraint(e,r,n){const{source:i,aimAxis:s,weight:a}=n,o=r[i],l=new jfe(e,o);if(s!=null&&(l.aimAxis=s),a!=null&&(l.weight=a),this.helperRoot){const A=new LB(l);this.helperRoot.add(A)}return l}_importRotationConstraint(e,r,n){const{source:i,weight:s}=n,a=r[i],o=new Kfe(e,a);if(s!=null&&(o.weight=s),this.helperRoot){const l=new LB(o);this.helperRoot.add(l)}return o}};Bz.EXTENSION_NAME="VRMC_node_constraint";var $fe=Bz,yy=(t,e,r)=>new Promise((n,i)=>{var s=l=>{try{o(r.next(l))}catch(A){i(A)}},a=l=>{try{o(r.throw(l))}catch(A){i(A)}},o=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,a);o((r=r.apply(t,e)).next())}),sR=class{},PB=new Y,Uh=new Y,Mz=class extends sR{get type(){return"capsule"}constructor(t){var e,r,n,i;super(),this.offset=(e=t==null?void 0:t.offset)!=null?e:new Y(0,0,0),this.tail=(r=t==null?void 0:t.tail)!=null?r:new Y(0,0,0),this.radius=(n=t==null?void 0:t.radius)!=null?n:0,this.inside=(i=t==null?void 0:t.inside)!=null?i:!1}calculateCollision(t,e,r,n){PB.copy(this.offset).applyMatrix4(t),Uh.copy(this.tail).applyMatrix4(t),Uh.sub(PB);const i=Uh.lengthSq();n.copy(e).sub(PB);const s=Uh.dot(n);s<=0||(i<=s||Uh.multiplyScalar(s/i),n.sub(Uh));const a=this.inside?this.radius-r-n.length():n.length()-r-this.radius;return n.normalize(),this.inside&&n.negate(),a}},OB=new Y,oO=new dt,Tz=class extends sR{get type(){return"plane"}constructor(t){var e,r;super(),this.offset=(e=t==null?void 0:t.offset)!=null?e:new Y(0,0,0),this.normal=(r=t==null?void 0:t.normal)!=null?r:new Y(0,0,1)}calculateCollision(t,e,r,n){n.copy(this.offset).applyMatrix4(t),n.negate().add(e),oO.getNormalMatrix(t),OB.copy(this.normal).applyNormalMatrix(oO).normalize();const i=n.dot(OB)-r;return n.copy(OB),i}},Cz=class extends sR{get type(){return"sphere"}constructor(t){var e,r,n;super(),this.offset=(e=t==null?void 0:t.offset)!=null?e:new Y(0,0,0),this.radius=(r=t==null?void 0:t.radius)!=null?r:0,this.inside=(n=t==null?void 0:t.inside)!=null?n:!1}calculateCollision(t,e,r,n){n.copy(this.offset).applyMatrix4(t),n.negate().add(e);const i=this.inside?this.radius-r-n.length():n.length()-r-this.radius;return n.normalize(),this.inside&&n.negate(),i}},yo=new Y,epe=class extends $t{constructor(t){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new Y,this._currentTail=new Y,this._shape=t,this._attrPos=new lt(new Float32Array(396),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(264),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let t=!1;const e=this._shape.radius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,t=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),t=!0);const r=yo.copy(this._shape.tail).divideScalar(this.worldScale);this._currentTail.distanceToSquared(r)>1e-10&&(this._currentTail.copy(r),t=!0),t&&this._buildPosition()}_buildPosition(){yo.copy(this._currentTail).sub(this._currentOffset);const t=yo.length()/this._currentRadius;for(let n=0;n<=16;n++){const i=n/16*Math.PI;this._attrPos.setXYZ(n,-Math.sin(i),-Math.cos(i),0),this._attrPos.setXYZ(17+n,t+Math.sin(i),Math.cos(i),0),this._attrPos.setXYZ(34+n,-Math.sin(i),0,-Math.cos(i)),this._attrPos.setXYZ(51+n,t+Math.sin(i),0,Math.cos(i))}for(let n=0;n<32;n++){const i=n/16*Math.PI;this._attrPos.setXYZ(68+n,0,Math.sin(i),Math.cos(i)),this._attrPos.setXYZ(100+n,t,Math.sin(i),Math.cos(i))}const e=Math.atan2(yo.y,Math.sqrt(yo.x*yo.x+yo.z*yo.z)),r=-Math.atan2(yo.z,yo.x);this.rotateZ(e),this.rotateY(r),this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let t=0;t<34;t++){const e=(t+1)%34;this._attrIndex.setXY(t*2,t,e),this._attrIndex.setXY(68+t*2,34+t,34+e)}for(let t=0;t<32;t++){const e=(t+1)%32;this._attrIndex.setXY(136+t*2,68+t,68+e),this._attrIndex.setXY(200+t*2,100+t,100+e)}this._attrIndex.needsUpdate=!0}},tpe=class extends $t{constructor(t){super(),this.worldScale=1,this._currentOffset=new Y,this._currentNormal=new Y,this._shape=t,this._attrPos=new lt(new Float32Array(6*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(10),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let t=!1;this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),t=!0),this._currentNormal.equals(this._shape.normal)||(this._currentNormal.copy(this._shape.normal),t=!0),t&&this._buildPosition()}_buildPosition(){this._attrPos.setXYZ(0,-.5,-.5,0),this._attrPos.setXYZ(1,.5,-.5,0),this._attrPos.setXYZ(2,.5,.5,0),this._attrPos.setXYZ(3,-.5,.5,0),this._attrPos.setXYZ(4,0,0,0),this._attrPos.setXYZ(5,0,0,.25),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this.lookAt(this._currentNormal),this._attrPos.needsUpdate=!0}_buildIndex(){this._attrIndex.setXY(0,0,1),this._attrIndex.setXY(2,1,2),this._attrIndex.setXY(4,2,3),this._attrIndex.setXY(6,3,0),this._attrIndex.setXY(8,4,5),this._attrIndex.needsUpdate=!0}},rpe=class extends $t{constructor(t){super(),this.worldScale=1,this._currentRadius=0,this._currentOffset=new Y,this._shape=t,this._attrPos=new lt(new Float32Array(32*3*3),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(64*3),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let t=!1;const e=this._shape.radius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,t=!0),this._currentOffset.equals(this._shape.offset)||(this._currentOffset.copy(this._shape.offset),t=!0),t&&this._buildPosition()}_buildPosition(){for(let t=0;t<32;t++){const e=t/16*Math.PI;this._attrPos.setXYZ(t,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+t,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+t,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentOffset.x,this._currentOffset.y,this._currentOffset.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let t=0;t<32;t++){const e=(t+1)%32;this._attrIndex.setXY(t*2,t,e),this._attrIndex.setXY(64+t*2,32+t,32+e),this._attrIndex.setXY(128+t*2,64+t,64+e)}this._attrIndex.needsUpdate=!0}},npe=new Y,DB=class extends qn{constructor(t){if(super(),this.matrixAutoUpdate=!1,this.collider=t,this.collider.shape instanceof Cz)this._geometry=new rpe(this.collider.shape);else if(this.collider.shape instanceof Mz)this._geometry=new epe(this.collider.shape);else if(this.collider.shape instanceof Tz)this._geometry=new tpe(this.collider.shape);else throw new Error("VRMSpringBoneColliderHelper: Unknown collider shape type detected");const e=new lA({color:16711935,depthTest:!1,depthWrite:!1});this._line=new w0(this._geometry,e),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(t){this.collider.updateWorldMatrix(!0,!1),this.matrix.copy(this.collider.matrixWorld);const e=this.matrix.elements;this._geometry.worldScale=npe.set(e[0],e[1],e[2]).length(),this._geometry.update(),super.updateMatrixWorld(t)}},ipe=class extends $t{constructor(t){super(),this.worldScale=1,this._currentRadius=0,this._currentTail=new Y,this._springBone=t,this._attrPos=new lt(new Float32Array(294),3),this.setAttribute("position",this._attrPos),this._attrIndex=new lt(new Uint16Array(194),1),this.setIndex(this._attrIndex),this._buildIndex(),this.update()}update(){let t=!1;const e=this._springBone.settings.hitRadius/this.worldScale;this._currentRadius!==e&&(this._currentRadius=e,t=!0),this._currentTail.equals(this._springBone.initialLocalChildPosition)||(this._currentTail.copy(this._springBone.initialLocalChildPosition),t=!0),t&&this._buildPosition()}_buildPosition(){for(let t=0;t<32;t++){const e=t/16*Math.PI;this._attrPos.setXYZ(t,Math.cos(e),Math.sin(e),0),this._attrPos.setXYZ(32+t,0,Math.cos(e),Math.sin(e)),this._attrPos.setXYZ(64+t,Math.sin(e),0,Math.cos(e))}this.scale(this._currentRadius,this._currentRadius,this._currentRadius),this.translate(this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.setXYZ(96,0,0,0),this._attrPos.setXYZ(97,this._currentTail.x,this._currentTail.y,this._currentTail.z),this._attrPos.needsUpdate=!0}_buildIndex(){for(let t=0;t<32;t++){const e=(t+1)%32;this._attrIndex.setXY(t*2,t,e),this._attrIndex.setXY(64+t*2,32+t,32+e),this._attrIndex.setXY(128+t*2,64+t,64+e)}this._attrIndex.setXY(192,96,97),this._attrIndex.needsUpdate=!0}},spe=new Y,ape=class extends qn{constructor(t){super(),this.matrixAutoUpdate=!1,this.springBone=t,this._geometry=new ipe(this.springBone);const e=new lA({color:16776960,depthTest:!1,depthWrite:!1});this._line=new w0(this._geometry,e),this.add(this._line)}dispose(){this._geometry.dispose()}updateMatrixWorld(t){this.springBone.bone.updateWorldMatrix(!0,!1),this.matrix.copy(this.springBone.bone.matrixWorld);const e=this.matrix.elements;this._geometry.worldScale=spe.set(e[0],e[1],e[2]).length(),this._geometry.update(),super.updateMatrixWorld(t)}},Lw=class extends Lt{constructor(t){super(),this.shape=t}},ope=new je;function Sz(t){return t.invert?t.invert():t.getInverse(ope.copy(t)),t}var lpe=class{constructor(t){this._inverseCache=new je,this._shouldUpdateInverse=!0,this.matrix=t;const e={set:(r,n,i)=>(this._shouldUpdateInverse=!0,r[n]=i,!0)};this._originalElements=t.elements,t.elements=new Proxy(t.elements,e)}get inverse(){return this._shouldUpdateInverse&&(Sz(this._inverseCache.copy(this.matrix)),this._shouldUpdateInverse=!1),this._inverseCache}revert(){this.matrix.elements=this._originalElements}},Ape=new je,vl=new Y,Kp=new Y,cpe=new Y,Fh=new Y,lO=new Y,Yp=new Y,AO=new et,kh=new je,upe=new je,hpe=class{constructor(t,e,r={},n=[]){this._currentTail=new Y,this._prevTail=new Y,this._boneAxis=new Y,this._worldSpaceBoneLength=0,this._center=null,this._initialLocalMatrix=new je,this._initialLocalRotation=new et,this._initialLocalChildPosition=new Y;var i,s,a,o,l,A;this.bone=t,this.bone.matrixAutoUpdate=!1,this.child=e,this.settings={hitRadius:(i=r.hitRadius)!=null?i:0,stiffness:(s=r.stiffness)!=null?s:1,gravityPower:(a=r.gravityPower)!=null?a:0,gravityDir:(l=(o=r.gravityDir)==null?void 0:o.clone())!=null?l:new Y(0,-1,0),dragForce:(A=r.dragForce)!=null?A:.4},this.colliderGroups=n}get center(){return this._center}set center(t){var e;(e=this._center)!=null&&e.userData.inverseCacheProxy&&(this._center.userData.inverseCacheProxy.revert(),delete this._center.userData.inverseCacheProxy),this._center=t,this._center&&(this._center.userData.inverseCacheProxy||(this._center.userData.inverseCacheProxy=new lpe(this._center.matrixWorld)))}get initialLocalChildPosition(){return this._initialLocalChildPosition}get _parentMatrixWorld(){return this.bone.parent?this.bone.parent.matrixWorld:Ape}setInitState(){this._initialLocalMatrix.copy(this.bone.matrix),this._initialLocalRotation.copy(this.bone.quaternion),this.child?this._initialLocalChildPosition.copy(this.child.position):this._initialLocalChildPosition.copy(this.bone.position).normalize().multiplyScalar(.07);const t=this._getMatrixWorldToCenter(kh);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(t),this._prevTail.copy(this._currentTail),this._boneAxis.copy(this._initialLocalChildPosition).normalize()}reset(){this.bone.quaternion.copy(this._initialLocalRotation),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix);const t=this._getMatrixWorldToCenter(kh);this.bone.localToWorld(this._currentTail.copy(this._initialLocalChildPosition)).applyMatrix4(t),this._prevTail.copy(this._currentTail)}update(t){if(t<=0)return;this._calcWorldSpaceBoneLength(),Fh.setFromMatrixPosition(this.bone.matrixWorld);let e=this._getMatrixWorldToCenter(kh);lO.copy(Fh).applyMatrix4(e);const r=AO.setFromRotationMatrix(e),n=upe.copy(e).multiply(this._parentMatrixWorld),i=Kp.copy(this._boneAxis).applyMatrix4(this._initialLocalMatrix).applyMatrix4(n).sub(lO).normalize(),s=cpe.copy(this.settings.gravityDir).applyQuaternion(r).normalize(),a=this._getMatrixCenterToWorld(kh);Yp.copy(this._currentTail).add(vl.copy(this._currentTail).sub(this._prevTail).multiplyScalar(1-this.settings.dragForce)).add(vl.copy(i).multiplyScalar(this.settings.stiffness*t)).add(vl.copy(s).multiplyScalar(this.settings.gravityPower*t)).applyMatrix4(a),Yp.sub(Fh).normalize().multiplyScalar(this._worldSpaceBoneLength).add(Fh),this._collision(Yp),e=this._getMatrixWorldToCenter(kh),this._prevTail.copy(this._currentTail),this._currentTail.copy(vl.copy(Yp).applyMatrix4(e));const o=Sz(kh.copy(this._parentMatrixWorld).multiply(this._initialLocalMatrix)),l=AO.setFromUnitVectors(this._boneAxis,vl.copy(Yp).applyMatrix4(o).normalize());this.bone.quaternion.copy(this._initialLocalRotation).multiply(l),this.bone.updateMatrix(),this.bone.matrixWorld.multiplyMatrices(this._parentMatrixWorld,this.bone.matrix)}_collision(t){this.colliderGroups.forEach(e=>{e.colliders.forEach(r=>{const n=r.shape.calculateCollision(r.matrixWorld,t,this.settings.hitRadius,vl);n<0&&(t.add(vl.multiplyScalar(-n)),t.sub(Fh).normalize().multiplyScalar(this._worldSpaceBoneLength).add(Fh))})})}_calcWorldSpaceBoneLength(){vl.setFromMatrixPosition(this.bone.matrixWorld),this.child?Kp.setFromMatrixPosition(this.child.matrixWorld):(Kp.copy(this._initialLocalChildPosition),Kp.applyMatrix4(this.bone.matrixWorld)),this._worldSpaceBoneLength=vl.sub(Kp).length()}_getMatrixCenterToWorld(t){return this._center?t.copy(this._center.matrixWorld):t.identity(),t}_getMatrixWorldToCenter(t){return this._center?t.copy(this._center.userData.inverseCacheProxy.inverse):t.identity(),t}};function dpe(t,e){const r=[];let n=t;for(;n!==null;)r.unshift(n),n=n.parent;r.forEach(i=>{e(i)})}function Iz(t,e){t.children.forEach(r=>{e(r)||Iz(r,e)})}var cO=class{constructor(){this._joints=new Set,this._hasWarnedCircularDependency=!1,this._objectSpringBonesMap=new Map}get joints(){return this._joints}get springBones(){return console.warn("VRMSpringBoneManager: springBones is deprecated. use joints instead."),this._joints}get colliderGroups(){const t=new Set;return this._joints.forEach(e=>{e.colliderGroups.forEach(r=>{t.add(r)})}),Array.from(t)}get colliders(){const t=new Set;return this.colliderGroups.forEach(e=>{e.colliders.forEach(r=>{t.add(r)})}),Array.from(t)}addJoint(t){this._joints.add(t);let e=this._objectSpringBonesMap.get(t.bone);e==null&&(e=new Set,this._objectSpringBonesMap.set(t.bone,e)),e.add(t)}addSpringBone(t){console.warn("VRMSpringBoneManager: addSpringBone() is deprecated. use addJoint() instead."),this.addJoint(t)}deleteJoint(t){this._joints.delete(t),this._objectSpringBonesMap.get(t.bone).delete(t)}deleteSpringBone(t){console.warn("VRMSpringBoneManager: deleteSpringBone() is deprecated. use deleteJoint() instead."),this.deleteJoint(t)}setInitState(){const t=new Set,e=new Set,r=new Set;for(const n of this._joints)this._processSpringBone(n,t,e,r,i=>i.setInitState())}reset(){const t=new Set,e=new Set,r=new Set;for(const n of this._joints)this._processSpringBone(n,t,e,r,i=>i.reset())}update(t){const e=new Set,r=new Set,n=new Set;for(const i of this._joints)this._processSpringBone(i,e,r,n,s=>s.update(t)),Iz(i.bone,s=>{var a,o;return((o=(a=this._objectSpringBonesMap.get(s))==null?void 0:a.size)!=null?o:0)>0?!0:(s.updateWorldMatrix(!1,!1),!1)})}_processSpringBone(t,e,r,n,i){if(r.has(t))return;if(e.has(t)){this._hasWarnedCircularDependency||(console.warn("VRMSpringBoneManager: Circular dependency detected while updating springbones"),this._hasWarnedCircularDependency=!0);return}e.add(t);const s=this._getDependencies(t);for(const a of s)dpe(a,o=>{const l=this._objectSpringBonesMap.get(o);if(l)for(const A of l)this._processSpringBone(A,e,r,n,i);else n.has(o)||(o.updateWorldMatrix(!1,!1),n.add(o))});t.bone.updateMatrix(),t.bone.updateWorldMatrix(!1,!1),i(t),n.add(t.bone),r.add(t)}_getDependencies(t){const e=new Set,r=t.bone.parent;return r&&e.add(r),t.colliderGroups.forEach(n=>{n.colliders.forEach(i=>{e.add(i)})}),e}},uO="VRMC_springBone_extended_collider",fpe=new Set(["1.0","1.0-beta"]),ppe=new Set(["1.0"]),Rz=class Xh{get name(){return Xh.EXTENSION_NAME}constructor(e,r){var n;this.parser=e,this.jointHelperRoot=r==null?void 0:r.jointHelperRoot,this.colliderHelperRoot=r==null?void 0:r.colliderHelperRoot,this.useExtendedColliders=(n=r==null?void 0:r.useExtendedColliders)!=null?n:!0}afterRoot(e){return yy(this,null,function*(){e.userData.vrmSpringBoneManager=yield this._import(e)})}_import(e){return yy(this,null,function*(){const r=yield this._v1Import(e);return r??(yield this._v0Import(e))??null})}_v1Import(e){return yy(this,null,function*(){var r,n,i,s,a;const o=e.parser.json;if(((r=o.extensionsUsed)==null?void 0:r.indexOf(Xh.EXTENSION_NAME))===-1)return null;const l=new cO,A=yield e.parser.getDependencies("node"),c=(n=o.extensions)==null?void 0:n[Xh.EXTENSION_NAME];if(!c)return null;const u=c.specVersion;if(!fpe.has(u))return console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${Xh.EXTENSION_NAME} specVersion "${u}"`),null;const h=(i=c.colliders)==null?void 0:i.map((f,m)=>{var g,p,v,y,_,E,x,B,M,R,I,L,D,w,b;const S=A[f.node],F=f.shape,k=(g=f.extensions)==null?void 0:g[uO];if(this.useExtendedColliders&&k!=null){const Q=k.specVersion;if(!ppe.has(Q))console.warn(`VRMSpringBoneLoaderPlugin: Unknown ${uO} specVersion "${Q}". Fallbacking to the ${Xh.EXTENSION_NAME} definition`);else{const z=k.shape;if(z.sphere)return this._importSphereCollider(S,{offset:new Y().fromArray((p=z.sphere.offset)!=null?p:[0,0,0]),radius:(v=z.sphere.radius)!=null?v:0,inside:(y=z.sphere.inside)!=null?y:!1});if(z.capsule)return this._importCapsuleCollider(S,{offset:new Y().fromArray((_=z.capsule.offset)!=null?_:[0,0,0]),radius:(E=z.capsule.radius)!=null?E:0,tail:new Y().fromArray((x=z.capsule.tail)!=null?x:[0,0,0]),inside:(B=z.capsule.inside)!=null?B:!1});if(z.plane)return this._importPlaneCollider(S,{offset:new Y().fromArray((M=z.plane.offset)!=null?M:[0,0,0]),normal:new Y().fromArray((R=z.plane.normal)!=null?R:[0,0,1])})}}if(F.sphere)return this._importSphereCollider(S,{offset:new Y().fromArray((I=F.sphere.offset)!=null?I:[0,0,0]),radius:(L=F.sphere.radius)!=null?L:0,inside:!1});if(F.capsule)return this._importCapsuleCollider(S,{offset:new Y().fromArray((D=F.capsule.offset)!=null?D:[0,0,0]),radius:(w=F.capsule.radius)!=null?w:0,tail:new Y().fromArray((b=F.capsule.tail)!=null?b:[0,0,0]),inside:!1});throw new Error(`VRMSpringBoneLoaderPlugin: The collider #${m} has no valid shape`)}),d=(s=c.colliderGroups)==null?void 0:s.map((f,m)=>{var g;return{colliders:((g=f.colliders)!=null?g:[]).map(p=>{const v=h==null?void 0:h[p];if(v==null)throw new Error(`VRMSpringBoneLoaderPlugin: The colliderGroup #${m} attempted to use a collider #${p} but not found`);return v}),name:f.name}});return(a=c.springs)==null||a.forEach((f,m)=>{var g;const p=f.joints,v=(g=f.colliderGroups)==null?void 0:g.map(E=>{const x=d==null?void 0:d[E];if(x==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${m} attempted to use a colliderGroup ${E} but not found`);return x}),y=f.center!=null?A[f.center]:void 0;let _;p.forEach(E=>{if(_){const x=_.node,B=A[x],M=E.node,R=A[M],I={hitRadius:_.hitRadius,dragForce:_.dragForce,gravityPower:_.gravityPower,stiffness:_.stiffness,gravityDir:_.gravityDir!=null?new Y().fromArray(_.gravityDir):void 0},L=this._importJoint(B,R,I,v);y&&(L.center=y),l.addJoint(L)}_=E})}),l.setInitState(),l})}_v0Import(e){return yy(this,null,function*(){var r,n,i;const s=e.parser.json;if(((r=s.extensionsUsed)==null?void 0:r.indexOf("VRM"))===-1)return null;const a=(n=s.extensions)==null?void 0:n.VRM,o=a==null?void 0:a.secondaryAnimation;if(!o)return null;const l=o==null?void 0:o.boneGroups;if(!l)return null;const A=new cO,c=yield e.parser.getDependencies("node"),u=(i=o.colliderGroups)==null?void 0:i.map(h=>{var d;const f=c[h.node];return{colliders:((d=h.colliders)!=null?d:[]).map((m,g)=>{var p,v,y;const _=new Y(0,0,0);return m.offset&&_.set((p=m.offset.x)!=null?p:0,(v=m.offset.y)!=null?v:0,m.offset.z?-m.offset.z:0),this._importSphereCollider(f,{offset:_,radius:(y=m.radius)!=null?y:0,inside:!1})})}});return l==null||l.forEach((h,d)=>{const f=h.bones;f&&f.forEach(m=>{var g,p,v,y;const _=c[m],E=new Y;h.gravityDir?E.set((g=h.gravityDir.x)!=null?g:0,(p=h.gravityDir.y)!=null?p:0,(v=h.gravityDir.z)!=null?v:0):E.set(0,-1,0);const x=h.center!=null?c[h.center]:void 0,B={hitRadius:h.hitRadius,dragForce:h.dragForce,gravityPower:h.gravityPower,stiffness:h.stiffiness,gravityDir:E},M=(y=h.colliderGroups)==null?void 0:y.map(R=>{const I=u==null?void 0:u[R];if(I==null)throw new Error(`VRMSpringBoneLoaderPlugin: The spring #${d} attempted to use a colliderGroup ${R} but not found`);return I});_.traverse(R=>{var I;const L=(I=R.children[0])!=null?I:null,D=this._importJoint(R,L,B,M);x&&(D.center=x),A.addJoint(D)})})}),e.scene.updateMatrixWorld(),A.setInitState(),A})}_importJoint(e,r,n,i){const s=new hpe(e,r,n,i);if(this.jointHelperRoot){const a=new ape(s);this.jointHelperRoot.add(a),a.renderOrder=this.jointHelperRoot.renderOrder}return s}_importSphereCollider(e,r){const n=new Cz(r),i=new Lw(n);if(e.add(i),this.colliderHelperRoot){const s=new DB(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}_importCapsuleCollider(e,r){const n=new Mz(r),i=new Lw(n);if(e.add(i),this.colliderHelperRoot){const s=new DB(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}_importPlaneCollider(e,r){const n=new Tz(r),i=new Lw(n);if(e.add(i),this.colliderHelperRoot){const s=new DB(i);this.colliderHelperRoot.add(s),s.renderOrder=this.colliderHelperRoot.renderOrder}return i}};Rz.EXTENSION_NAME="VRMC_springBone";var mpe=Rz,gpe=class{get name(){return"VRMLoaderPlugin"}constructor(t,e){var r,n,i,s,a,o,l,A,c,u;this.parser=t;const h=e==null?void 0:e.helperRoot,d=e==null?void 0:e.autoUpdateHumanBones;this.expressionPlugin=(r=e==null?void 0:e.expressionPlugin)!=null?r:new Pde(t),this.firstPersonPlugin=(n=e==null?void 0:e.firstPersonPlugin)!=null?n:new Dde(t),this.humanoidPlugin=(i=e==null?void 0:e.humanoidPlugin)!=null?i:new Vde(t,{helperRoot:h,autoUpdateHumanBones:d}),this.lookAtPlugin=(s=e==null?void 0:e.lookAtPlugin)!=null?s:new afe(t,{helperRoot:h}),this.metaPlugin=(a=e==null?void 0:e.metaPlugin)!=null?a:new Afe(t),this.mtoonMaterialPlugin=(o=e==null?void 0:e.mtoonMaterialPlugin)!=null?o:new xfe(t),this.materialsHDREmissiveMultiplierPlugin=(l=e==null?void 0:e.materialsHDREmissiveMultiplierPlugin)!=null?l:new Bfe(t),this.materialsV0CompatPlugin=(A=e==null?void 0:e.materialsV0CompatPlugin)!=null?A:new Ufe(t),this.springBonePlugin=(c=e==null?void 0:e.springBonePlugin)!=null?c:new mpe(t,{colliderHelperRoot:h,jointHelperRoot:h}),this.nodeConstraintPlugin=(u=e==null?void 0:e.nodeConstraintPlugin)!=null?u:new $fe(t,{helperRoot:h})}beforeRoot(){return my(this,null,function*(){yield this.materialsV0CompatPlugin.beforeRoot(),yield this.mtoonMaterialPlugin.beforeRoot()})}loadMesh(t){return my(this,null,function*(){return yield this.mtoonMaterialPlugin.loadMesh(t)})}getMaterialType(t){return this.mtoonMaterialPlugin.getMaterialType(t)??null}extendMaterialParams(t,e){return my(this,null,function*(){yield this.materialsHDREmissiveMultiplierPlugin.extendMaterialParams(t,e),yield this.mtoonMaterialPlugin.extendMaterialParams(t,e)})}afterRoot(t){return my(this,null,function*(){yield this.metaPlugin.afterRoot(t),yield this.humanoidPlugin.afterRoot(t),yield this.expressionPlugin.afterRoot(t),yield this.lookAtPlugin.afterRoot(t),yield this.firstPersonPlugin.afterRoot(t),yield this.springBonePlugin.afterRoot(t),yield this.nodeConstraintPlugin.afterRoot(t),yield this.mtoonMaterialPlugin.afterRoot(t);const e=t.userData.vrmMeta,r=t.userData.vrmHumanoid;if(e&&r){const n=new ufe({scene:t.scene,expressionManager:t.userData.vrmExpressionManager,firstPerson:t.userData.vrmFirstPerson,humanoid:r,lookAt:t.userData.vrmLookAt,meta:e,materials:t.userData.vrmMToonMaterials,springBoneManager:t.userData.vrmSpringBoneManager,nodeConstraintManager:t.userData.vrmNodeConstraintManager});t.userData.vrm=n}})}};function hO(t){if(Object.values(t).forEach(e=>{e!=null&&e.isTexture&&e.dispose()}),t.isShaderMaterial){const e=t.uniforms;e&&Object.values(e).forEach(r=>{const n=r.value;n!=null&&n.isTexture&&n.dispose()})}t.dispose()}function vpe(t){const e=t.geometry;e&&e.dispose();const r=t.skeleton;r&&r.dispose();const n=t.material;n&&(Array.isArray(n)?n.forEach(i=>hO(i)):n&&hO(n))}function ype(t){t.traverse(vpe)}function wpe(t,e){var r;const n=(r=e==null?void 0:e.experimentalSameBoneCounts)!=null?r:!1,i=[];t.traverse(o=>{o.type==="SkinnedMesh"&&i.push(o)});const s=new Map;let a=0;for(const o of i){const l=o.geometry.getAttribute("skinIndex"),A=[],c=[],u={},h=l.array;for(let d=0;d<h.length;d++){const f=h[d];u[f]==null&&(u[f]=A.length,A.push(o.skeleton.bones[f]),c.push(o.skeleton.boneInverses[f])),h[d]=u[f]}l.copyArray(h),l.needsUpdate=!0,s.set(o,{bones:A,boneInverses:c}),a=Math.max(a,A.length)}for(const o of i){const{bones:l,boneInverses:A}=s.get(o);if(n)for(let u=l.length;u<a;u++)l[u]=l[0],A[u]=A[0];const c=new Rc(l,A);o.bind(c,new je)}}function bpe(t){const e=new Map;t.traverse(r=>{var n,i,s,a;if(!r.isMesh)return;const o=r,l=o.geometry,A=l.index;if(A==null)return;const c=e.get(l);if(c!=null){o.geometry=c;return}const u=new $t;u.name=l.name,u.morphTargetsRelative=l.morphTargetsRelative,l.groups.forEach(m=>{u.addGroup(m.start,m.count,m.materialIndex)}),u.boundingBox=(i=(n=l.boundingBox)==null?void 0:n.clone())!=null?i:null,u.boundingSphere=(a=(s=l.boundingSphere)==null?void 0:s.clone())!=null?a:null,u.setDrawRange(l.drawRange.start,l.drawRange.count),u.userData=l.userData,e.set(l,u);const h=[],d=[];{const m=A.array,g=new m.constructor(m.length);let p=0;for(let v=0;v<m.length;v++){const y=m[v];let _=h[y];_==null&&(h[y]=p,d[p]=y,_=p,p++),g[v]=_}u.setIndex(new lt(g,1,!1))}Object.keys(l.attributes).forEach(m=>{const g=l.attributes[m];if(g.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const p=g.array,{itemSize:v,normalized:y}=g,_=new p.constructor(d.length*v);d.forEach((E,x)=>{for(let B=0;B<v;B++)_[x*v+B]=p[E*v+B]}),u.setAttribute(m,new lt(_,v,y))});let f=!0;Object.keys(l.morphAttributes).forEach(m=>{u.morphAttributes[m]=[];const g=l.morphAttributes[m];for(let p=0;p<g.length;p++){const v=g[p];if(v.isInterleavedBufferAttribute)throw new Error("removeUnnecessaryVertices: InterleavedBufferAttribute is not supported");const y=v.array,{itemSize:_,normalized:E}=v,x=new y.constructor(d.length*_);d.forEach((B,M)=>{for(let R=0;R<_;R++)x[M*_+R]=y[B*_+R]}),f=f&&x.every(B=>B===0),u.morphAttributes[m][p]=new lt(x,_,E)}}),f&&(u.morphAttributes={}),o.geometry=u}),Array.from(e.keys()).forEach(r=>{r.dispose()})}function _pe(t){var e;((e=t.meta)==null?void 0:e.metaVersion)==="0"&&(t.scene.rotation.y=Math.PI)}var B0=class{constructor(){}};B0.deepDispose=ype;B0.removeUnnecessaryJoints=wpe;B0.removeUnnecessaryVertices=bpe;B0.rotateVRM0=_pe;/*!
 * @pixiv/three-vrm-core v3.1.4
 * The implementation of core features of VRM, for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-core is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-mtoon v3.1.4
 * MToon (toon material) module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-materials-mtoon is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier v3.1.4
 * Support VRMC_hdr_emissiveMultiplier for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-materials-hdr-emissive-multiplier is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-materials-v0compat v3.1.4
 * VRM0.0 materials compatibility layer plugin for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-materials-v0compat is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-node-constraint v3.1.4
 * Node constraint module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-node-constraint is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 *//*!
 * @pixiv/three-vrm-springbone v3.1.4
 * Spring bone module for @pixiv/three-vrm
 *
 * Copyright (c) 2019-2024 pixiv Inc.
 * @pixiv/three-vrm-springbone is distributed under MIT License
 * https://github.com/pixiv/three-vrm/blob/release/LICENSE
 */var gn;(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.LINEAR=9729]="LINEAR",t[t.REPEAT=10497]="REPEAT"})(gn||(gn={}));const eb="blend_",dO="vrmColliderSphere";class xpe{parse(e,r,n,i){const s=e.humanoid,a=e.meta,o=e.materials,l={},A={},c={},u=e.lookAt,h={generator:"UniGLTF-2.0.0",version:"2.0"};if(r)if(s)if(a)if(o){if(!u)throw new Error("lookAt is undefined or null")}else throw new Error("materials is undefined or null");else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const d=o.filter((ne,de,Te)=>Te.findIndex(re=>re.name===ne.name.replace(" (Outline)",""))===de).map(ne=>ne),f=d.map(ne=>ne.name),m=n?{name:"icon",imageBitmap:n.image}:null,g=d.filter(ne=>ne.map).map(ne=>{if(!ne.map)throw new Error(ne.name+" map is null");return{name:ne.name,imageBitmap:ne.map.image}}),p=d.filter(ne=>ne.userData.shadeTexture).map(ne=>{if(!ne.userData.shadeTexture)throw new Error(ne.userData.shadeTexture+" map is null");return{name:ne.name+"_shade",imageBitmap:ne.userData.shadeTexture.image}}),v=g.concat(p),y=Cpe(v,m),_=Spe(y),E=Ipe(y),x=Tpe(d,v),B=r.children.filter(ne=>ne.children.length>0&&ne.children[0].type===Ui.Bone)[0],M=Uz(B).filter(ne=>ne.name!==dO),R=M.map(ne=>ne.name),I=M.map(ne=>({children:ne.children.filter(de=>de.name!==dO).map(de=>R.indexOf(de.name)),name:ne.name,rotation:[ne.quaternion.x,ne.quaternion.y,ne.quaternion.z,ne.quaternion.w],scale:[ne.scale.x,ne.scale.y,ne.scale.z],translation:[ne.position.x,ne.position.y,ne.position.z]})),L=[],D=r.children.filter(ne=>ne.type===Ui.Group||ne.type===Ui.SkinnedMesh),w=[];D.forEach(ne=>{const de=ne.type===Ui.Group?ne.children[0]:ne,Te=de.geometry.attributes;w.push(new yl(Te.position,gn.FLOAT,ir.POSITION,ja.VEC3,de.name,void 0)),w.push(new yl(Te.normal,gn.FLOAT,ir.NORMAL,ja.VEC3,de.name,void 0)),w.push(new yl(Te.uv,gn.FLOAT,ir.UV,ja.VEC2,de.name,void 0)),w.push(new yl(Te.skinWeight,gn.FLOAT,ir.SKIN_WEIGHT,ja.VEC4,de.name,void 0)),w.push(new yl(Te.skinIndex,gn.UNSIGNED_SHORT,ir.SKIN_INDEX,ja.VEC4,de.name,void 0)),(ne.type===Ui.Group?ne.children.map(re=>re):[ne]).forEach(re=>{if(!re.geometry.index)throw new Error(re.name+" geometry.index is null");w.push(new yl(re.geometry.index,gn.UNSIGNED_INT,ir.INDEX,ja.SCALAR,de.name,re.name))}),de.morphTargetDictionary||(de.morphTargetDictionary={},de.morphTargetInfluences=[],de.geometry.morphAttributes={},de.updateMorphTargets()),de.geometry.userData.targetNames=[];for(const re in e.expressionManager.expressionMap){const N=e.expressionManager.expressionMap[re],he=N._binds.map(Z=>({node:M.length,index:Z.index,weight:Z.weight}));let oe=!1;for(const Z in zn)if(re.toLowerCase()===zn[Z].toLowerCase()){l[zn[Z]]={morphTargetBinds:he,isBinary:N.isBinary,overrideBlink:N.overrideBlink,overrideLookAt:N.overrideLookAt,overrideMouth:N.overrideMouth},oe=!0;break}!oe&&re.toLowerCase()==="surprise"&&(l.surprised={morphTargetBinds:he,isBinary:N.isBinary,overrideBlink:N.overrideBlink,overrideLookAt:N.overrideLookAt,overrideMouth:N.overrideMouth},oe=!0),oe===!1&&(A[re]={morphTargetBinds:he,isBinary:N.isBinary,overrideBlink:N.overrideBlink,overrideLookAt:N.overrideLookAt,overrideMouth:N.overrideMouth})}for(const re in de.morphTargetDictionary){de.geometry.userData.targetNames.push(re);const N=de.morphTargetDictionary[re],he=de.geometry.morphAttributes;w.push(new yl(he.position[N],gn.FLOAT,ir.BLEND_POSITION,ja.VEC3,de.name,eb+re)),w.push(new yl(he.normal[N],gn.FLOAT,ir.BLEND_NORMAL,ja.VEC3,de.name,eb+re))}}),Object.keys(l).length>0&&(c.preset=l),Object.keys(A).length>0&&(c.custom=A),D.forEach(ne=>{const de=ne.type===Ui.Group?ne.children[0]:ne,Te=new Float32Array(de.skeleton.boneInverses.map(re=>re.elements).flat());w.push(new yl(new lt(Te,16),gn.FLOAT,ir.BIND_MATRIX,ja.MAT4,de.name,de.name))}),L.push(...w.map(ne=>({bufferView:-1,byteOffset:0,componentType:ne.valueType,count:ne.attribute.count,max:ne.max,min:ne.min,normalized:!1,type:ne.accessorsType})));const b=Bpe(D,w,f);D.forEach((ne,de)=>{I.push({mesh:de,name:ne.name,rotation:[ne.quaternion.x,ne.quaternion.y,ne.quaternion.z,ne.quaternion.w],scale:[ne.scale.x,ne.scale.y,ne.scale.z],skin:de,translation:[ne.position.x,ne.position.y,ne.position.z]})});const S=Mpe(D,w,R),F={offsetFromHeadBone:[0,0,0],rangeMapHorizontalInner:{inputMaxValue:u.applier.rangeMapHorizontalInner.inputMaxValue,outputScale:u.applier.rangeMapHorizontalInner.outputScale},rangeMapHorizontalOuter:{inputMaxValue:u.applier.rangeMapHorizontalOuter.inputMaxValue,outputScale:u.applier.rangeMapHorizontalOuter.outputScale},rangeMapVerticalDown:{inputMaxValue:u.applier.rangeMapVerticalDown.inputMaxValue,outputScale:u.applier.rangeMapVerticalDown.outputScale},rangeMapVerticalUp:{inputMaxValue:u.applier.rangeMapVerticalUp.inputMaxValue,outputScale:u.applier.rangeMapVerticalUp.outputScale},type:"bone"},k={humanBones:{}};for(const ne in s.humanBones)k.humanBones[ne]={node:R.indexOf(s.humanBones[ne].node.name)};const Q=a,z=[];z.push(...v.map(ne=>({buffer:fO(ne.imageBitmap),type:ir.IMAGE}))),z.push(...w.map(ne=>({buffer:ne.buffer,type:ne.type}))),m&&z.push({buffer:fO(m.imageBitmap),type:ir.IMAGE});let j=0,T=0,H=0;const me=z.map((ne,de)=>{const Te={buffer:0,byteLength:ne.buffer.byteLength,byteOffset:j,target:ne.type===ir.IMAGE||ne.type===ir.BIND_MATRIX?void 0:ne.type===ir.INDEX?gn.ELEMENT_ARRAY_BUFFER:gn.ARRAY_BUFFER};return j+=ne.buffer.byteLength,ne.type===ir.IMAGE?y[T++].bufferView=de:L[H++].bufferView=de,Te}),ee=Rpe(r,I),U={accessors:L,asset:h,buffers:[{byteLength:j}],bufferViews:me,extensions:{VRMC_vrm:{expressions:c,humanoid:k,lookAt:F,meta:Q,specVersion:"1.0"}},extensionsUsed:["KHR_materials_unlit","KHR_texture_transform","VRMC_materials_mtoon","VRMC_vrm"],images:y,materials:x,meshes:b,nodes:I,samplers:_,avatar:0,scenes:ee,skins:S,textures:E},se=new pO(aS(JSON.stringify(U,void 0,2)),"JSON"),le=new pO(Um(z.map(ne=>ne.buffer)),"BIN\0"),Ae=Um([se.buffer,le.buffer]),ge=Um([aS("glTF"),sS(2,4),sS(Ae.byteLength+12,4)]);i(Um([ge,Ae]))}}function Uz(t){return t.children.length<=0?[t]:[t].concat(t.children.map(e=>Uz(e)).flat())}function fO(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0);const r=e.toDataURL("image/png"),n=atob(r.split(",")[1]),i=new ArrayBuffer(n.length),s=new DataView(i);for(let a=0;a<n.length;a++)s.setUint8(a,n.charCodeAt(a));return i}function sS(t,e){const r=new ArrayBuffer(e);return new DataView(r).setUint32(0,t,!0),r}function aS(t){return new TextEncoder().encode(t).buffer}function Um(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;const r=new Uint8Array(e);let n=0;for(let i=0;i<t.length;++i)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r.buffer}function Epe(t,e){const r=e===gn.UNSIGNED_SHORT?2:4,n=t.array;let i=0;const s=new ArrayBuffer(t.count*t.itemSize*r),a=new DataView(s);for(let o=0;o<t.count;o++)for(let l=0;l<t.itemSize;l++){let A;t.itemSize>4?A=n[o*t.itemSize+l]:l===0?A=t.getX(o):l===1?A=t.getY(o):l===2?A=t.getZ(o):A=t.getW(o),e===gn.UNSIGNED_SHORT?a.setUint16(i,A,!0):e===gn.UNSIGNED_INT?a.setUint32(i,A,!0):a.setFloat32(i,A,!0),i+=r}return s}let pO=class{constructor(t,e){this.data=t,this.type=e;const r=this.data;this.buffer=Um([sS(r.byteLength,4),aS(this.type),r])}paddingBinary(t,e){const r=Math.ceil(t.byteLength/4)*4;if(t.byteLength===r)return t;const n=new Uint8Array(r);n.set(new Uint8Array(t),0);for(let i=t.byteLength;i<r;i++)n.set(new Uint8Array(e),i);return n.buffer}},yl=class{constructor(t,e,r,n,i,s){this.attribute=t,this.type=r,this.valueType=e,this.accessorsType=n,this.meshName=i,this.name=s,this.buffer=Epe(this.attribute,this.valueType),this.max=r===ir.POSITION||r===ir.BLEND_POSITION?[Math.max.apply(null,Array.from(this.attribute.array).filter((a,o)=>o%3===0)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,o)=>o%3===1)),Math.max.apply(null,Array.from(this.attribute.array).filter((a,o)=>o%3===2))]:void 0,this.min=r===ir.POSITION||r===ir.BLEND_POSITION?[Math.min.apply(null,Array.from(this.attribute.array).filter((a,o)=>o%3===0)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,o)=>o%3===1)),Math.min.apply(null,Array.from(this.attribute.array).filter((a,o)=>o%3===2))]:void 0}};var Hd;(function(t){t.MeshBasicMaterial="MeshBasicMaterial",t.MeshStandardMaterial="MeshStandardMaterial",t.MToonMaterial="MToonMaterial"})(Hd||(Hd={}));var ja;(function(t){t.SCALAR="SCALAR",t.VEC2="VEC2",t.VEC3="VEC3",t.VEC4="VEC4",t.MAT4="MAT4"})(ja||(ja={}));var ir;(function(t){t.POSITION="POSITION",t.NORMAL="NORMAL",t.UV="UV",t.INDEX="INDEX",t.SKIN_WEIGHT="SKIN_WEIGHT",t.SKIN_INDEX="SKIN_INDEX",t.BLEND_POSITION="BLEND_POSITION",t.BLEND_NORMAL="BLEND_NORMAL",t.BIND_MATRIX="BIND_MATRIX",t.IMAGE="IMAGE"})(ir||(ir={}));var Ui;(function(t){t.Group="Group",t.SkinnedMesh="SkinnedMesh",t.Object3D="Object3D",t.Bone="Bone"})(Ui||(Ui={}));const Bpe=(t,e,r)=>t.map(n=>{const i=n.type===Ui.Group?n.children[0]:n,s=n.type===Ui.Group?n.children.map(a=>a):[n];return{name:n.name,primitives:s.map(a=>{const o=e.map(A=>A.meshName===i.name?A.type:null),l=Array.isArray(a.material)?a.material[0].name:a.material.name;return{attributes:{JOINTS_0:o.indexOf(ir.SKIN_INDEX),NORMAL:o.indexOf(ir.NORMAL),POSITION:o.indexOf(ir.POSITION),TEXCOORD_0:o.indexOf(ir.UV),WEIGHTS_0:o.indexOf(ir.SKIN_WEIGHT)},extras:{targetNames:a.geometry.userData.targetNames},indices:e.map(A=>A.type===ir.INDEX&&A.meshName===i.name?A.name:null).indexOf(a.name),material:r.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(A=>({NORMAL:e.map(c=>c.type===ir.BLEND_NORMAL&&c.meshName===i.name?c.name:null).indexOf(eb+A),POSITION:e.map(c=>c.type===ir.BLEND_POSITION&&c.meshName===i.name?c.name:null).indexOf(eb+A)})):void 0}})}}),Mpe=(t,e,r)=>t.map(n=>{const i=n.type===Ui.Group?n.children[0]:n;return{inverseBindMatrices:e.map(s=>s.type===ir.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>r.indexOf(s.name)),skeleton:r.indexOf(i.skeleton.bones[0].name)}}),Tpe=(t,e)=>t.map(r=>{let n,i=null;if(r=r.userData.vrmMaterial?r.userData.vrmMaterial:r,r.type==="ShaderMaterial")i=r.userData.gltfExtensions.VRMC_materials_mtoon,i.shadeMultiplyTexture={index:e.map(A=>A.name).indexOf(r.uniforms.shadeMultiplyTexture.name)},n=r.color?[1,1,1,1]:void 0;else{const A=r;n=A.color?[A.color.r,A.color.g,A.color.b,1]:void 0}let s=-1;r.map?s=e.map(A=>A.name).indexOf(r.name):r.uniforms&&r.uniforms.map&&(s=e.map(A=>A.name).indexOf(r.uniforms.map.name));const a=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,o=(()=>{switch(r.type){case Hd.MeshStandardMaterial:return r.metalness;case Hd.MeshBasicMaterial:return 0;default:return 0}})(),l=(()=>{switch(r.type){case Hd.MeshStandardMaterial:return r.roughness;case Hd.MeshBasicMaterial:return .9;default:return .9}})();return{alphaCutoff:r.alphaTest>0?r.alphaTest:void 0,alphaMode:r.transparent?"BLEND":r.alphaTest>0?"MASK":"OPAQUE",doubleSided:r.side===2,extensions:r.type==="ShaderMaterial"?{KHR_materials_unlit:{},VRMC_materials_mtoon:i}:void 0,name:r.name,pbrMetallicRoughness:{baseColorFactor:n,baseColorTexture:a,metallicFactor:o,roughnessFactor:l}}}),Cpe=(t,e)=>(e?t.concat(e):t).filter(r=>r&&r.imageBitmap).map(r=>({bufferView:-1,mimeType:"image/png",name:r.name})),Spe=t=>t.map(()=>({magFilter:gn.LINEAR,minFilter:gn.LINEAR,wrapS:gn.REPEAT,wrapT:gn.REPEAT})),Ipe=t=>t.map((e,r)=>({sampler:0,source:r})),Rpe=(t,e)=>{const r=e.map(n=>n.name);return[{nodes:t.children.filter(n=>n.type===Ui.Object3D||n.type===Ui.SkinnedMesh||n.type===Ui.Group||n.type===Ui.Bone).map(n=>r.indexOf(n.name))}]},Fz=0,Upe=1,kz=2,mO=2,NB=1.25,gO=1,ag=6*4+4+4,F_=65535,Fpe=Math.pow(2,-24),QB=Symbol("SKIP_GENERATION");function kpe(t){return t.index?t.index.count:t.attributes.position.count}function qf(t){return kpe(t)/3}function Lpe(t,e=ArrayBuffer){return t>65535?new Uint32Array(new e(4*t)):new Uint16Array(new e(2*t))}function Ppe(t,e){if(!t.index){const r=t.attributes.position.count,n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=Lpe(r,n);t.setIndex(new lt(i,1));for(let s=0;s<r;s++)i[s]=s}}function Lz(t,e){const r=qf(t),n=e||t.drawRange,i=n.start/3,s=(n.start+n.count)/3,a=Math.max(0,i),o=Math.min(r,s)-a;return[{offset:Math.floor(a),count:Math.floor(o)}]}function Pz(t,e){if(!t.groups||!t.groups.length)return Lz(t,e);const r=[],n=new Set,i=e||t.drawRange,s=i.start/3,a=(i.start+i.count)/3;for(const l of t.groups){const A=l.start/3,c=(l.start+l.count)/3;n.add(Math.max(s,A)),n.add(Math.min(a,c))}const o=Array.from(n.values()).sort((l,A)=>l-A);for(let l=0;l<o.length-1;l++){const A=o[l],c=o[l+1];r.push({offset:Math.floor(A),count:Math.floor(c-A)})}return r}function Ope(t,e){const r=qf(t),n=Pz(t,e).sort((a,o)=>a.offset-o.offset),i=n[n.length-1];i.count=Math.min(r-i.offset,i.count);let s=0;return n.forEach(({count:a})=>s+=a),r!==s}function HB(t,e,r,n,i){let s=1/0,a=1/0,o=1/0,l=-1/0,A=-1/0,c=-1/0,u=1/0,h=1/0,d=1/0,f=-1/0,m=-1/0,g=-1/0;for(let p=e*6,v=(e+r)*6;p<v;p+=6){const y=t[p+0],_=t[p+1],E=y-_,x=y+_;E<s&&(s=E),x>l&&(l=x),y<u&&(u=y),y>f&&(f=y);const B=t[p+2],M=t[p+3],R=B-M,I=B+M;R<a&&(a=R),I>A&&(A=I),B<h&&(h=B),B>m&&(m=B);const L=t[p+4],D=t[p+5],w=L-D,b=L+D;w<o&&(o=w),b>c&&(c=b),L<d&&(d=L),L>g&&(g=L)}n[0]=s,n[1]=a,n[2]=o,n[3]=l,n[4]=A,n[5]=c,i[0]=u,i[1]=h,i[2]=d,i[3]=f,i[4]=m,i[5]=g}function Dpe(t,e=null,r=null,n=null){const i=t.attributes.position,s=t.index?t.index.array:null,a=qf(t),o=i.normalized;let l;e===null?(l=new Float32Array(a*6),r=0,n=a):(l=e,r=r||0,n=n||a);const A=i.array,c=i.offset||0;let u=3;i.isInterleavedBufferAttribute&&(u=i.data.stride);const h=["getX","getY","getZ"];for(let d=r;d<r+n;d++){const f=d*3,m=d*6;let g=f+0,p=f+1,v=f+2;s&&(g=s[g],p=s[p],v=s[v]),o||(g=g*u+c,p=p*u+c,v=v*u+c);for(let y=0;y<3;y++){let _,E,x;o?(_=i[h[y]](g),E=i[h[y]](p),x=i[h[y]](v)):(_=A[g+y],E=A[p+y],x=A[v+y]);let B=_;E<B&&(B=E),x<B&&(B=x);let M=_;E>M&&(M=E),x>M&&(M=x);const R=(M-B)/2,I=y*2;l[m+I+0]=B+R,l[m+I+1]=R+(Math.abs(B)+R)*Fpe}}return l}function $r(t,e,r){return r.min.x=e[t],r.min.y=e[t+1],r.min.z=e[t+2],r.max.x=e[t+3],r.max.y=e[t+4],r.max.z=e[t+5],r}function vO(t){let e=-1,r=-1/0;for(let n=0;n<3;n++){const i=t[n+3]-t[n];i>r&&(r=i,e=n)}return e}function yO(t,e){e.set(t)}function wO(t,e,r){let n,i;for(let s=0;s<3;s++){const a=s+3;n=t[s],i=e[s],r[s]=n<i?n:i,n=t[a],i=e[a],r[a]=n>i?n:i}}function wy(t,e,r){for(let n=0;n<3;n++){const i=e[t+2*n],s=e[t+2*n+1],a=i-s,o=i+s;a<r[n]&&(r[n]=a),o>r[n+3]&&(r[n+3]=o)}}function Xp(t){const e=t[3]-t[0],r=t[4]-t[1],n=t[5]-t[2];return 2*(e*r+r*n+n*e)}const El=32,Npe=(t,e)=>t.candidate-e.candidate,TA=new Array(El).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),by=new Float32Array(6);function Qpe(t,e,r,n,i,s){let a=-1,o=0;if(s===Fz)a=vO(e),a!==-1&&(o=(e[a]+e[a+3])/2);else if(s===Upe)a=vO(t),a!==-1&&(o=Hpe(r,n,i,a));else if(s===kz){const l=Xp(t);let A=NB*i;const c=n*6,u=(n+i)*6;for(let h=0;h<3;h++){const d=e[h],f=(e[h+3]-d)/El;if(i<El/4){const m=[...TA];m.length=i;let g=0;for(let v=c;v<u;v+=6,g++){const y=m[g];y.candidate=r[v+2*h],y.count=0;const{bounds:_,leftCacheBounds:E,rightCacheBounds:x}=y;for(let B=0;B<3;B++)x[B]=1/0,x[B+3]=-1/0,E[B]=1/0,E[B+3]=-1/0,_[B]=1/0,_[B+3]=-1/0;wy(v,r,_)}m.sort(Npe);let p=i;for(let v=0;v<p;v++){const y=m[v];for(;v+1<p&&m[v+1].candidate===y.candidate;)m.splice(v+1,1),p--}for(let v=c;v<u;v+=6){const y=r[v+2*h];for(let _=0;_<p;_++){const E=m[_];y>=E.candidate?wy(v,r,E.rightCacheBounds):(wy(v,r,E.leftCacheBounds),E.count++)}}for(let v=0;v<p;v++){const y=m[v],_=y.count,E=i-y.count,x=y.leftCacheBounds,B=y.rightCacheBounds;let M=0;_!==0&&(M=Xp(x)/l);let R=0;E!==0&&(R=Xp(B)/l);const I=gO+NB*(M*_+R*E);I<A&&(a=h,A=I,o=y.candidate)}}else{for(let p=0;p<El;p++){const v=TA[p];v.count=0,v.candidate=d+f+p*f;const y=v.bounds;for(let _=0;_<3;_++)y[_]=1/0,y[_+3]=-1/0}for(let p=c;p<u;p+=6){let v=~~((r[p+2*h]-d)/f);v>=El&&(v=El-1);const y=TA[v];y.count++,wy(p,r,y.bounds)}const m=TA[El-1];yO(m.bounds,m.rightCacheBounds);for(let p=El-2;p>=0;p--){const v=TA[p],y=TA[p+1];wO(v.bounds,y.rightCacheBounds,v.rightCacheBounds)}let g=0;for(let p=0;p<El-1;p++){const v=TA[p],y=v.count,_=v.bounds,E=TA[p+1].rightCacheBounds;y!==0&&(g===0?yO(_,by):wO(_,by,by)),g+=y;let x=0,B=0;g!==0&&(x=Xp(by)/l);const M=i-g;M!==0&&(B=Xp(E)/l);const R=gO+NB*(x*g+B*M);R<A&&(a=h,A=R,o=v.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:a,pos:o}}function Hpe(t,e,r,n){let i=0;for(let s=e,a=e+r;s<a;s++)i+=t[s*6+n*2];return i/r}class jB{constructor(){this.boundingData=new Float32Array(6)}}function jpe(t,e,r,n,i,s){let a=n,o=n+i-1;const l=s.pos,A=s.axis*2;for(;;){for(;a<=o&&r[a*6+A]<l;)a++;for(;a<=o&&r[o*6+A]>=l;)o--;if(a<o){for(let c=0;c<3;c++){let u=e[a*3+c];e[a*3+c]=e[o*3+c],e[o*3+c]=u}for(let c=0;c<6;c++){let u=r[a*6+c];r[a*6+c]=r[o*6+c],r[o*6+c]=u}a++,o--}else return a}}function zpe(t,e,r,n,i,s){let a=n,o=n+i-1;const l=s.pos,A=s.axis*2;for(;;){for(;a<=o&&r[a*6+A]<l;)a++;for(;a<=o&&r[o*6+A]>=l;)o--;if(a<o){let c=t[a];t[a]=t[o],t[o]=c;for(let u=0;u<6;u++){let h=r[a*6+u];r[a*6+u]=r[o*6+u],r[o*6+u]=h}a++,o--}else return a}}function Yi(t,e){return e[t+15]===65535}function Rs(t,e){return e[t+6]}function da(t,e){return e[t+14]}function fa(t){return t+8}function pa(t,e){return e[t+6]}function Oz(t,e){return e[t+7]}let Dz,Fm,Pw,Nz;const Gpe=Math.pow(2,32);function oS(t){return"count"in t?1:1+oS(t.left)+oS(t.right)}function Vpe(t,e,r){return Dz=new Float32Array(r),Fm=new Uint32Array(r),Pw=new Uint16Array(r),Nz=new Uint8Array(r),lS(t,e)}function lS(t,e){const r=t/4,n=t/2,i="count"in e,s=e.boundingData;for(let a=0;a<6;a++)Dz[r+a]=s[a];if(i)if(e.buffer){const a=e.buffer;Nz.set(new Uint8Array(a),t);for(let o=t,l=t+a.byteLength;o<l;o+=ag){const A=o/2;Yi(A,Pw)||(Fm[o/4+6]+=r)}return t+a.byteLength}else{const a=e.offset,o=e.count;return Fm[r+6]=a,Pw[n+14]=o,Pw[n+15]=F_,t+ag}else{const a=e.left,o=e.right,l=e.splitAxis;let A;if(A=lS(t+ag,a),A/4>Gpe)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return Fm[r+6]=A/4,A=lS(A,o),Fm[r+7]=l,A}}function Wpe(t,e){const r=(t.index?t.index.count:t.attributes.position.count)/3,n=r>2**16,i=n?4:2,s=e?new SharedArrayBuffer(r*i):new ArrayBuffer(r*i),a=n?new Uint32Array(s):new Uint16Array(s);for(let o=0,l=a.length;o<l;o++)a[o]=o;return a}function Kpe(t,e,r,n,i){const{maxDepth:s,verbose:a,maxLeafTris:o,strategy:l,onProgress:A,indirect:c}=i,u=t._indirectBuffer,h=t.geometry,d=h.index?h.index.array:null,f=c?zpe:jpe,m=qf(h),g=new Float32Array(6);let p=!1;const v=new jB;return HB(e,r,n,v.boundingData,g),_(v,r,n,g),v;function y(E){A&&A(E/m)}function _(E,x,B,M=null,R=0){if(!p&&R>=s&&(p=!0,a&&(console.warn(`MeshBVH: Max depth of ${s} reached when generating BVH. Consider increasing maxDepth.`),console.warn(h))),B<=o||R>=s)return y(x+B),E.offset=x,E.count=B,E;const I=Qpe(E.boundingData,M,e,x,B,l);if(I.axis===-1)return y(x+B),E.offset=x,E.count=B,E;const L=f(u,d,e,x,B,I);if(L===x||L===x+B)y(x+B),E.offset=x,E.count=B;else{E.splitAxis=I.axis;const D=new jB,w=x,b=L-x;E.left=D,HB(e,w,b,D.boundingData,g),_(D,w,b,g,R+1);const S=new jB,F=L,k=B-b;E.right=S,HB(e,F,k,S.boundingData,g),_(S,F,k,g,R+1)}return E}}function Ype(t,e){const r=t.geometry;e.indirect&&(t._indirectBuffer=Wpe(r,e.useSharedArrayBuffer),Ope(r,e.range)&&!e.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),t._indirectBuffer||Ppe(r,e);const n=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=Dpe(r),s=e.indirect?Lz(r,e.range):Pz(r,e.range);t._roots=s.map(a=>{const o=Kpe(t,i,a.offset,a.count,e),l=oS(o),A=new n(ag*l);return Vpe(0,o,A),A})}class nA{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,r){let n=1/0,i=-1/0;for(let s=0,a=e.length;s<a;s++){const o=e[s][r];n=o<n?o:n,i=o>i?o:i}this.min=n,this.max=i}setFromPoints(e,r){let n=1/0,i=-1/0;for(let s=0,a=r.length;s<a;s++){const o=r[s],l=e.dot(o);n=l<n?l:n,i=l>i?l:i}this.min=n,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}nA.prototype.setFromBox=function(){const t=new Y;return function(e,r){const n=r.min,i=r.max;let s=1/0,a=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let A=0;A<=1;A++){t.x=n.x*o+i.x*(1-o),t.y=n.y*l+i.y*(1-l),t.z=n.z*A+i.z*(1-A);const c=e.dot(t);s=Math.min(c,s),a=Math.max(c,a)}this.min=s,this.max=a}}();const Xpe=function(){const t=new Y,e=new Y,r=new Y;return function(n,i,s){const a=n.start,o=t,l=i.start,A=e;r.subVectors(a,l),t.subVectors(n.end,n.start),e.subVectors(i.end,i.start);const c=r.dot(A),u=A.dot(o),h=A.dot(A),d=r.dot(o),f=o.dot(o)*h-u*u;let m,g;f!==0?m=(c*u-d*h)/f:m=0,g=(c+m*u)/h,s.x=m,s.y=g}}(),aR=function(){const t=new Ke,e=new Y,r=new Y;return function(n,i,s,a){Xpe(n,i,t);let o=t.x,l=t.y;if(o>=0&&o<=1&&l>=0&&l<=1){n.at(o,s),i.at(l,a);return}else if(o>=0&&o<=1){l<0?i.at(0,a):i.at(1,a),n.closestPointToPoint(a,!0,s);return}else if(l>=0&&l<=1){o<0?n.at(0,s):n.at(1,s),i.closestPointToPoint(s,!0,a);return}else{let A;o<0?A=n.start:A=n.end;let c;l<0?c=i.start:c=i.end;const u=e,h=r;if(n.closestPointToPoint(c,!0,e),i.closestPointToPoint(A,!0,r),u.distanceToSquared(c)<=h.distanceToSquared(A)){s.copy(u),a.copy(c);return}else{s.copy(A),a.copy(h);return}}}}(),Zpe=function(){const t=new Y,e=new Y,r=new So,n=new Gl;return function(i,s){const{radius:a,center:o}=i,{a:l,b:A,c}=s;if(n.start=l,n.end=A,n.closestPointToPoint(o,!0,t).distanceTo(o)<=a||(n.start=l,n.end=c,n.closestPointToPoint(o,!0,t).distanceTo(o)<=a)||(n.start=A,n.end=c,n.closestPointToPoint(o,!0,t).distanceTo(o)<=a))return!0;const u=s.getPlane(r);if(Math.abs(u.distanceToPoint(o))<=a){const h=u.projectPoint(o,e);if(s.containsPoint(h))return!0}return!1}}(),Jpe=1e-15;function zB(t){return Math.abs(t)<Jpe}class oo extends Gn{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new Y),this.satBounds=new Array(4).fill().map(()=>new nA),this.points=[this.a,this.b,this.c],this.sphere=new wi,this.plane=new So,this.needsUpdate=!0}intersectsSphere(e){return Zpe(e,this)}update(){const e=this.a,r=this.b,n=this.c,i=this.points,s=this.satAxes,a=this.satBounds,o=s[0],l=a[0];this.getNormal(o),l.setFromPoints(o,i);const A=s[1],c=a[1];A.subVectors(e,r),c.setFromPoints(A,i);const u=s[2],h=a[2];u.subVectors(r,n),h.setFromPoints(u,i);const d=s[3],f=a[3];d.subVectors(n,e),f.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(o,e),this.needsUpdate=!1}}oo.prototype.closestPointToSegment=function(){const t=new Y,e=new Y,r=new Gl;return function(n,i=null,s=null){const{start:a,end:o}=n,l=this.points;let A,c=1/0;for(let u=0;u<3;u++){const h=(u+1)%3;r.start.copy(l[u]),r.end.copy(l[h]),aR(r,n,t,e),A=t.distanceToSquared(e),A<c&&(c=A,i&&i.copy(t),s&&s.copy(e))}return this.closestPointToPoint(a,t),A=a.distanceToSquared(t),A<c&&(c=A,i&&i.copy(t),s&&s.copy(a)),this.closestPointToPoint(o,t),A=o.distanceToSquared(t),A<c&&(c=A,i&&i.copy(t),s&&s.copy(o)),Math.sqrt(c)}}();oo.prototype.intersectsTriangle=function(){const t=new oo,e=new Array(3),r=new Array(3),n=new nA,i=new nA,s=new Y,a=new Y,o=new Y,l=new Y,A=new Y,c=new Gl,u=new Gl,h=new Gl,d=new Y;function f(m,g,p){const v=m.points;let y=0,_=-1;for(let E=0;E<3;E++){const{start:x,end:B}=c;x.copy(v[E]),B.copy(v[(E+1)%3]),c.delta(a);const M=zB(g.distanceToPoint(x));if(zB(g.normal.dot(a))&&M){p.copy(c),y=2;break}const R=g.intersectLine(c,d);if(!R&&M&&d.copy(x),(R||M)&&!zB(d.distanceTo(B))){if(y<=1)(y===1?p.start:p.end).copy(d),M&&(_=y);else if(y>=2){(_===1?p.start:p.end).copy(d),y=2;break}if(y++,y===2&&_===-1)break}}return y}return function(m,g=null,p=!1){this.needsUpdate&&this.update(),m.isExtendedTriangle?m.needsUpdate&&m.update():(t.copy(m),t.update(),m=t);const v=this.plane,y=m.plane;if(Math.abs(v.normal.dot(y.normal))>1-1e-10){const _=this.satBounds,E=this.satAxes;r[0]=m.a,r[1]=m.b,r[2]=m.c;for(let M=0;M<4;M++){const R=_[M],I=E[M];if(n.setFromPoints(I,r),R.isSeparated(n))return!1}const x=m.satBounds,B=m.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let M=0;M<4;M++){const R=x[M],I=B[M];if(n.setFromPoints(I,e),R.isSeparated(n))return!1}for(let M=0;M<4;M++){const R=E[M];for(let I=0;I<4;I++){const L=B[I];if(s.crossVectors(R,L),n.setFromPoints(s,e),i.setFromPoints(s,r),n.isSeparated(i))return!1}}return g&&(p||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),g.start.set(0,0,0),g.end.set(0,0,0)),!0}else{const _=f(this,y,u);if(_===1&&m.containsPoint(u.end))return g&&(g.start.copy(u.end),g.end.copy(u.end)),!0;if(_!==2)return!1;const E=f(m,v,h);if(E===1&&this.containsPoint(h.end))return g&&(g.start.copy(h.end),g.end.copy(h.end)),!0;if(E!==2)return!1;if(u.delta(o),h.delta(l),o.dot(l)<0){let D=h.start;h.start=h.end,h.end=D}const x=u.start.dot(o),B=u.end.dot(o),M=h.start.dot(o),R=h.end.dot(o),I=B<M,L=x<R;return x!==R&&M!==B&&I===L?!1:(g&&(A.subVectors(u.start,h.start),A.dot(o)>0?g.start.copy(u.start):g.start.copy(h.start),A.subVectors(u.end,h.end),A.dot(o)<0?g.end.copy(u.end):g.end.copy(h.end)),!0)}}}();oo.prototype.distanceToPoint=function(){const t=new Y;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}();oo.prototype.distanceToTriangle=function(){const t=new Y,e=new Y,r=["a","b","c"],n=new Gl,i=new Gl;return function(s,a=null,o=null){const l=a||o?n:null;if(this.intersectsTriangle(s,l))return(a||o)&&(a&&l.getCenter(a),o&&l.getCenter(o)),0;let A=1/0;for(let c=0;c<3;c++){let u;const h=r[c],d=s[h];this.closestPointToPoint(d,t),u=d.distanceToSquared(t),u<A&&(A=u,a&&a.copy(t),o&&o.copy(d));const f=this[h];s.closestPointToPoint(f,t),u=f.distanceToSquared(t),u<A&&(A=u,a&&a.copy(f),o&&o.copy(t))}for(let c=0;c<3;c++){const u=r[c],h=r[(c+1)%3];n.set(this[u],this[h]);for(let d=0;d<3;d++){const f=r[d],m=r[(d+1)%3];i.set(s[f],s[m]),aR(n,i,t,e);const g=t.distanceToSquared(e);g<A&&(A=g,a&&a.copy(t),o&&o.copy(e))}}return Math.sqrt(A)}}();class Ni{constructor(e,r,n){this.isOrientedBox=!0,this.min=new Y,this.max=new Y,this.matrix=new je,this.invMatrix=new je,this.points=new Array(8).fill().map(()=>new Y),this.satAxes=new Array(3).fill().map(()=>new Y),this.satBounds=new Array(3).fill().map(()=>new nA),this.alignedSatBounds=new Array(3).fill().map(()=>new nA),this.needsUpdate=!1,e&&this.min.copy(e),r&&this.max.copy(r),n&&this.matrix.copy(n)}set(e,r,n){this.min.copy(e),this.max.copy(r),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Ni.prototype.update=function(){return function(){const t=this.matrix,e=this.min,r=this.max,n=this.points;for(let l=0;l<=1;l++)for(let A=0;A<=1;A++)for(let c=0;c<=1;c++){const u=1*l|2*A|4*c,h=n[u];h.x=l?r.x:e.x,h.y=A?r.y:e.y,h.z=c?r.z:e.z,h.applyMatrix4(t)}const i=this.satBounds,s=this.satAxes,a=n[0];for(let l=0;l<3;l++){const A=s[l],c=i[l],u=1<<l,h=n[u];A.subVectors(a,h),c.setFromPoints(A,n)}const o=this.alignedSatBounds;o[0].setFromPointsField(n,"x"),o[1].setFromPointsField(n,"y"),o[2].setFromPointsField(n,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Ni.prototype.intersectsBox=function(){const t=new nA;return function(e){this.needsUpdate&&this.update();const r=e.min,n=e.max,i=this.satBounds,s=this.satAxes,a=this.alignedSatBounds;if(t.min=r.x,t.max=n.x,a[0].isSeparated(t)||(t.min=r.y,t.max=n.y,a[1].isSeparated(t))||(t.min=r.z,t.max=n.z,a[2].isSeparated(t)))return!1;for(let o=0;o<3;o++){const l=s[o],A=i[o];if(t.setFromBox(l,e),A.isSeparated(t))return!1}return!0}}();Ni.prototype.intersectsTriangle=function(){const t=new oo,e=new Array(3),r=new nA,n=new nA,i=new Y;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(t.copy(s),t.update(),s=t);const a=this.satBounds,o=this.satAxes;e[0]=s.a,e[1]=s.b,e[2]=s.c;for(let u=0;u<3;u++){const h=a[u],d=o[u];if(r.setFromPoints(d,e),h.isSeparated(r))return!1}const l=s.satBounds,A=s.satAxes,c=this.points;for(let u=0;u<3;u++){const h=l[u],d=A[u];if(r.setFromPoints(d,c),h.isSeparated(r))return!1}for(let u=0;u<3;u++){const h=o[u];for(let d=0;d<4;d++){const f=A[d];if(i.crossVectors(h,f),r.setFromPoints(i,e),n.setFromPoints(i,c),r.isSeparated(n))return!1}}return!0}}();Ni.prototype.closestPointToPoint=function(){return function(t,e){return this.needsUpdate&&this.update(),e.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),e}}();Ni.prototype.distanceToPoint=function(){const t=new Y;return function(e){return this.closestPointToPoint(e,t),e.distanceTo(t)}}();Ni.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map(()=>new Gl),r=new Array(12).fill().map(()=>new Gl),n=new Y,i=new Y;return function(s,a=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(o||l)&&(s.getCenter(i),this.closestPointToPoint(i,n),s.closestPointToPoint(n,i),o&&o.copy(n),l&&l.copy(i)),0;const A=a*a,c=s.min,u=s.max,h=this.points;let d=1/0;for(let m=0;m<8;m++){const g=h[m];i.copy(g).clamp(c,u);const p=g.distanceToSquared(i);if(p<d&&(d=p,o&&o.copy(g),l&&l.copy(i),p<A))return Math.sqrt(p)}let f=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let p=0;p<=1;p++){const v=(m+1)%3,y=(m+2)%3,_=g<<v|p<<y,E=1<<m|g<<v|p<<y,x=h[_],B=h[E];e[f].set(x,B);const M=t[m],R=t[v],I=t[y],L=r[f],D=L.start,w=L.end;D[M]=c[M],D[R]=g?c[R]:u[R],D[I]=p?c[I]:u[R],w[M]=u[M],w[R]=g?c[R]:u[R],w[I]=p?c[I]:u[R],f++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let p=0;p<=1;p++){i.x=m?u.x:c.x,i.y=g?u.y:c.y,i.z=p?u.z:c.z,this.closestPointToPoint(i,n);const v=i.distanceToSquared(n);if(v<d&&(d=v,o&&o.copy(n),l&&l.copy(i),v<A))return Math.sqrt(v)}for(let m=0;m<12;m++){const g=e[m];for(let p=0;p<12;p++){const v=r[p];aR(g,v,n,i);const y=n.distanceToSquared(i);if(y<d&&(d=y,o&&o.copy(n),l&&l.copy(i),y<A))return Math.sqrt(y)}}return Math.sqrt(d)}}();class oR{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class qpe extends oR{constructor(){super(()=>new oo)}}const ma=new qpe;class $pe{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let r=null;this.setBuffer=n=>{r&&e.push(r),r=n,this.float32Array=new Float32Array(n),this.uint16Array=new Uint16Array(n),this.uint32Array=new Uint32Array(n)},this.clearBuffer=()=>{r=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,e.length!==0&&this.setBuffer(e.pop())}}}const Ir=new $pe;let qA,jd;const Lh=[],_y=new oR(()=>new Dr);function eme(t,e,r,n,i,s){qA=_y.getPrimitive(),jd=_y.getPrimitive(),Lh.push(qA,jd),Ir.setBuffer(t._roots[e]);const a=AS(0,t.geometry,r,n,i,s);Ir.clearBuffer(),_y.releasePrimitive(qA),_y.releasePrimitive(jd),Lh.pop(),Lh.pop();const o=Lh.length;return o>0&&(jd=Lh[o-1],qA=Lh[o-2]),a}function AS(t,e,r,n,i=null,s=0,a=0){const{float32Array:o,uint16Array:l,uint32Array:A}=Ir;let c=t*2;if(Yi(c,l)){const u=Rs(t,A),h=da(c,l);return $r(t,o,qA),n(u,h,!1,a,s+t,qA)}else{let u=function(L){const{uint16Array:D,uint32Array:w}=Ir;let b=L*2;for(;!Yi(b,D);)L=fa(L),b=L*2;return Rs(L,w)},h=function(L){const{uint16Array:D,uint32Array:w}=Ir;let b=L*2;for(;!Yi(b,D);)L=pa(L,w),b=L*2;return Rs(L,w)+da(b,D)};const d=fa(t),f=pa(t,A);let m=d,g=f,p,v,y,_;if(i&&(y=qA,_=jd,$r(m,o,y),$r(g,o,_),p=i(y),v=i(_),v<p)){m=f,g=d;const L=p;p=v,v=L,y=_}y||(y=qA,$r(m,o,y));const E=Yi(m*2,l),x=r(y,E,p,a+1,s+m);let B;if(x===mO){const L=u(m),D=h(m)-L;B=n(L,D,!0,a+1,s+m,y)}else B=x&&AS(m,e,r,n,i,s,a+1);if(B)return!0;_=jd,$r(g,o,_);const M=Yi(g*2,l),R=r(_,M,v,a+1,s+g);let I;if(R===mO){const L=u(g),D=h(g)-L;I=n(L,D,!0,a+1,s+g,_)}else I=R&&AS(g,e,r,n,i,s,a+1);return!!I}}const Zp=new Y,GB=new Y;function tme(t,e,r={},n=0,i=1/0){const s=n*n,a=i*i;let o=1/0,l=null;if(t.shapecast({boundsTraverseOrder:c=>(Zp.copy(e).clamp(c.min,c.max),Zp.distanceToSquared(e)),intersectsBounds:(c,u,h)=>h<o&&h<a,intersectsTriangle:(c,u)=>{c.closestPointToPoint(e,Zp);const h=e.distanceToSquared(Zp);return h<o&&(GB.copy(Zp),o=h,l=u),h<s}}),o===1/0)return null;const A=Math.sqrt(o);return r.point?r.point.copy(GB):r.point=GB.clone(),r.distance=A,r.faceIndex=l,r}const rme=parseInt(eA)>=169,Yc=new Y,Xc=new Y,Zc=new Y,xy=new Ke,Ey=new Ke,By=new Ke,bO=new Y,_O=new Y,xO=new Y,Jp=new Y;function nme(t,e,r,n,i,s,a,o){let l;if(s===ti?l=t.intersectTriangle(n,r,e,!0,i):l=t.intersectTriangle(e,r,n,s!==pi,i),l===null)return null;const A=t.origin.distanceTo(i);return A<a||A>o?null:{distance:A,point:i.clone()}}function ime(t,e,r,n,i,s,a,o,l,A,c){Yc.fromBufferAttribute(e,s),Xc.fromBufferAttribute(e,a),Zc.fromBufferAttribute(e,o);const u=nme(t,Yc,Xc,Zc,Jp,l,A,c);if(u){const h=new Y;Gn.getBarycoord(Jp,Yc,Xc,Zc,h),n&&(xy.fromBufferAttribute(n,s),Ey.fromBufferAttribute(n,a),By.fromBufferAttribute(n,o),u.uv=Gn.getInterpolation(Jp,Yc,Xc,Zc,xy,Ey,By,new Ke)),i&&(xy.fromBufferAttribute(i,s),Ey.fromBufferAttribute(i,a),By.fromBufferAttribute(i,o),u.uv1=Gn.getInterpolation(Jp,Yc,Xc,Zc,xy,Ey,By,new Ke)),r&&(bO.fromBufferAttribute(r,s),_O.fromBufferAttribute(r,a),xO.fromBufferAttribute(r,o),u.normal=Gn.getInterpolation(Jp,Yc,Xc,Zc,bO,_O,xO,new Y),u.normal.dot(t.direction)>0&&u.normal.multiplyScalar(-1));const d={a:s,b:a,c:o,normal:new Y,materialIndex:0};Gn.getNormal(Yc,Xc,Zc,d.normal),u.face=d,u.faceIndex=s,rme&&(u.barycoord=h)}return u}function k_(t,e,r,n,i,s,a){const o=n*3;let l=o+0,A=o+1,c=o+2;const u=t.index;t.index&&(l=u.getX(l),A=u.getX(A),c=u.getX(c));const{position:h,normal:d,uv:f,uv1:m}=t.attributes,g=ime(r,h,d,f,m,l,A,c,e,s,a);return g?(g.faceIndex=n,i&&i.push(g),g):null}function En(t,e,r,n){const i=t.a,s=t.b,a=t.c;let o=e,l=e+1,A=e+2;r&&(o=r.getX(o),l=r.getX(l),A=r.getX(A)),i.x=n.getX(o),i.y=n.getY(o),i.z=n.getZ(o),s.x=n.getX(l),s.y=n.getY(l),s.z=n.getZ(l),a.x=n.getX(A),a.y=n.getY(A),a.z=n.getZ(A)}function sme(t,e,r,n,i,s,a,o){const{geometry:l,_indirectBuffer:A}=t;for(let c=n,u=n+i;c<u;c++)k_(l,e,r,c,s,a,o)}function ame(t,e,r,n,i,s,a){const{geometry:o,_indirectBuffer:l}=t;let A=1/0,c=null;for(let u=n,h=n+i;u<h;u++){let d;d=k_(o,e,r,u,null,s,a),d&&d.distance<A&&(c=d,A=d.distance)}return c}function ome(t,e,r,n,i,s,a){const{geometry:o}=r,{index:l}=o,A=o.attributes.position;for(let c=t,u=e+t;c<u;c++){let h;if(h=c,En(a,h*3,l,A),a.needsUpdate=!0,n(a,h,i,s))return!0}return!1}function lme(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));const r=t.geometry,n=r.index?r.index.array:null,i=r.attributes.position;let s,a,o,l,A=0;const c=t._roots;for(let h=0,d=c.length;h<d;h++)s=c[h],a=new Uint32Array(s),o=new Uint16Array(s),l=new Float32Array(s),u(0,A),A+=s.byteLength;function u(h,d,f=!1){const m=h*2;if(o[m+15]===F_){const g=a[h+6],p=o[m+14];let v=1/0,y=1/0,_=1/0,E=-1/0,x=-1/0,B=-1/0;for(let M=3*g,R=3*(g+p);M<R;M++){let I=n[M];const L=i.getX(I),D=i.getY(I),w=i.getZ(I);L<v&&(v=L),L>E&&(E=L),D<y&&(y=D),D>x&&(x=D),w<_&&(_=w),w>B&&(B=w)}return l[h+0]!==v||l[h+1]!==y||l[h+2]!==_||l[h+3]!==E||l[h+4]!==x||l[h+5]!==B?(l[h+0]=v,l[h+1]=y,l[h+2]=_,l[h+3]=E,l[h+4]=x,l[h+5]=B,!0):!1}else{const g=h+8,p=a[h+6],v=g+d,y=p+d;let _=f,E=!1,x=!1;e?_||(E=e.has(v),x=e.has(y),_=!E&&!x):(E=!0,x=!0);const B=_||E,M=_||x;let R=!1;B&&(R=u(g,d,_));let I=!1;M&&(I=u(p,d,_));const L=R||I;if(L)for(let D=0;D<3;D++){const w=g+D,b=p+D,S=l[w],F=l[w+3],k=l[b],Q=l[b+3];l[h+D]=S<k?S:k,l[h+D+3]=F>Q?F:Q}return L}}}function wc(t,e,r,n,i){let s,a,o,l,A,c;const u=1/r.direction.x,h=1/r.direction.y,d=1/r.direction.z,f=r.origin.x,m=r.origin.y,g=r.origin.z;let p=e[t],v=e[t+3],y=e[t+1],_=e[t+3+1],E=e[t+2],x=e[t+3+2];return u>=0?(s=(p-f)*u,a=(v-f)*u):(s=(v-f)*u,a=(p-f)*u),h>=0?(o=(y-m)*h,l=(_-m)*h):(o=(_-m)*h,l=(y-m)*h),s>l||o>a||((o>s||isNaN(s))&&(s=o),(l<a||isNaN(a))&&(a=l),d>=0?(A=(E-g)*d,c=(x-g)*d):(A=(x-g)*d,c=(E-g)*d),s>c||A>a)?!1:((A>s||s!==s)&&(s=A),(c<a||a!==a)&&(a=c),s<=i&&a>=n)}function Ame(t,e,r,n,i,s,a,o){const{geometry:l,_indirectBuffer:A}=t;for(let c=n,u=n+i;c<u;c++){let h=A?A[c]:c;k_(l,e,r,h,s,a,o)}}function cme(t,e,r,n,i,s,a){const{geometry:o,_indirectBuffer:l}=t;let A=1/0,c=null;for(let u=n,h=n+i;u<h;u++){let d;d=k_(o,e,r,l?l[u]:u,null,s,a),d&&d.distance<A&&(c=d,A=d.distance)}return c}function ume(t,e,r,n,i,s,a){const{geometry:o}=r,{index:l}=o,A=o.attributes.position;for(let c=t,u=e+t;c<u;c++){let h;if(h=r.resolveTriangleIndex(c),En(a,h*3,l,A),a.needsUpdate=!0,n(a,h,i,s))return!0}return!1}function hme(t,e,r,n,i,s,a){Ir.setBuffer(t._roots[e]),cS(0,t,r,n,i,s,a),Ir.clearBuffer()}function cS(t,e,r,n,i,s,a){const{float32Array:o,uint16Array:l,uint32Array:A}=Ir,c=t*2;if(Yi(c,l)){const u=Rs(t,A),h=da(c,l);sme(e,r,n,u,h,i,s,a)}else{const u=fa(t);wc(u,o,n,s,a)&&cS(u,e,r,n,i,s,a);const h=pa(t,A);wc(h,o,n,s,a)&&cS(h,e,r,n,i,s,a)}}const dme=["x","y","z"];function fme(t,e,r,n,i,s){Ir.setBuffer(t._roots[e]);const a=uS(0,t,r,n,i,s);return Ir.clearBuffer(),a}function uS(t,e,r,n,i,s){const{float32Array:a,uint16Array:o,uint32Array:l}=Ir;let A=t*2;if(Yi(A,o)){const c=Rs(t,l),u=da(A,o);return ame(e,r,n,c,u,i,s)}else{const c=Oz(t,l),u=dme[c],h=n.direction[u]>=0;let d,f;h?(d=fa(t),f=pa(t,l)):(d=pa(t,l),f=fa(t));const m=wc(d,a,n,i,s)?uS(d,e,r,n,i,s):null;if(m){const p=m.point[u];if(h?p<=a[f+c]:p>=a[f+c+3])return m}const g=wc(f,a,n,i,s)?uS(f,e,r,n,i,s):null;return m&&g?m.distance<=g.distance?m:g:m||g||null}}const My=new Dr,Ph=new oo,Oh=new oo,qp=new je,EO=new Ni,Ty=new Ni;function pme(t,e,r,n){Ir.setBuffer(t._roots[e]);const i=hS(0,t,r,n);return Ir.clearBuffer(),i}function hS(t,e,r,n,i=null){const{float32Array:s,uint16Array:a,uint32Array:o}=Ir;let l=t*2;if(i===null&&(r.boundingBox||r.computeBoundingBox(),EO.set(r.boundingBox.min,r.boundingBox.max,n),i=EO),Yi(l,a)){const A=e.geometry,c=A.index,u=A.attributes.position,h=r.index,d=r.attributes.position,f=Rs(t,o),m=da(l,a);if(qp.copy(n).invert(),r.boundsTree)return $r(t,s,Ty),Ty.matrix.copy(qp),Ty.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:g=>Ty.intersectsBox(g),intersectsTriangle:g=>{g.a.applyMatrix4(n),g.b.applyMatrix4(n),g.c.applyMatrix4(n),g.needsUpdate=!0;for(let p=f*3,v=(m+f)*3;p<v;p+=3)if(En(Oh,p,c,u),Oh.needsUpdate=!0,g.intersectsTriangle(Oh))return!0;return!1}});for(let g=f*3,p=(m+f)*3;g<p;g+=3){En(Ph,g,c,u),Ph.a.applyMatrix4(qp),Ph.b.applyMatrix4(qp),Ph.c.applyMatrix4(qp),Ph.needsUpdate=!0;for(let v=0,y=h.count;v<y;v+=3)if(En(Oh,v,h,d),Oh.needsUpdate=!0,Ph.intersectsTriangle(Oh))return!0}}else{const A=t+8,c=o[t+6];return $r(A,s,My),!!(i.intersectsBox(My)&&hS(A,e,r,n,i)||($r(c,s,My),i.intersectsBox(My)&&hS(c,e,r,n,i)))}}const Cy=new je,VB=new Ni,$p=new Ni,mme=new Y,gme=new Y,vme=new Y,yme=new Y;function wme(t,e,r,n={},i={},s=0,a=1/0){e.boundingBox||e.computeBoundingBox(),VB.set(e.boundingBox.min,e.boundingBox.max,r),VB.needsUpdate=!0;const o=t.geometry,l=o.attributes.position,A=o.index,c=e.attributes.position,u=e.index,h=ma.getPrimitive(),d=ma.getPrimitive();let f=mme,m=gme,g=null,p=null;i&&(g=vme,p=yme);let v=1/0,y=null,_=null;return Cy.copy(r).invert(),$p.matrix.copy(Cy),t.shapecast({boundsTraverseOrder:E=>VB.distanceToBox(E),intersectsBounds:(E,x,B)=>B<v&&B<a?(x&&($p.min.copy(E.min),$p.max.copy(E.max),$p.needsUpdate=!0),!0):!1,intersectsRange:(E,x)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:B=>$p.distanceToBox(B),intersectsBounds:(B,M,R)=>R<v&&R<a,intersectsRange:(B,M)=>{for(let R=B,I=B+M;R<I;R++){En(d,3*R,u,c),d.a.applyMatrix4(r),d.b.applyMatrix4(r),d.c.applyMatrix4(r),d.needsUpdate=!0;for(let L=E,D=E+x;L<D;L++){En(h,3*L,A,l),h.needsUpdate=!0;const w=h.distanceToTriangle(d,f,g);if(w<v&&(m.copy(f),p&&p.copy(g),v=w,y=L,_=R),w<s)return!0}}}});{const B=qf(e);for(let M=0,R=B;M<R;M++){En(d,3*M,u,c),d.a.applyMatrix4(r),d.b.applyMatrix4(r),d.c.applyMatrix4(r),d.needsUpdate=!0;for(let I=E,L=E+x;I<L;I++){En(h,3*I,A,l),h.needsUpdate=!0;const D=h.distanceToTriangle(d,f,g);if(D<v&&(m.copy(f),p&&p.copy(g),v=D,y=I,_=M),D<s)return!0}}}}}),ma.releasePrimitive(h),ma.releasePrimitive(d),v===1/0?null:(n.point?n.point.copy(m):n.point=m.clone(),n.distance=v,n.faceIndex=y,i&&(i.point?i.point.copy(p):i.point=p.clone(),i.point.applyMatrix4(Cy),m.applyMatrix4(Cy),i.distance=m.sub(i.point).length(),i.faceIndex=_),n)}function bme(t,e=null){e&&Array.isArray(e)&&(e=new Set(e));const r=t.geometry,n=r.index?r.index.array:null,i=r.attributes.position;let s,a,o,l,A=0;const c=t._roots;for(let h=0,d=c.length;h<d;h++)s=c[h],a=new Uint32Array(s),o=new Uint16Array(s),l=new Float32Array(s),u(0,A),A+=s.byteLength;function u(h,d,f=!1){const m=h*2;if(o[m+15]===F_){const g=a[h+6],p=o[m+14];let v=1/0,y=1/0,_=1/0,E=-1/0,x=-1/0,B=-1/0;for(let M=g,R=g+p;M<R;M++){const I=3*t.resolveTriangleIndex(M);for(let L=0;L<3;L++){let D=I+L;D=n?n[D]:D;const w=i.getX(D),b=i.getY(D),S=i.getZ(D);w<v&&(v=w),w>E&&(E=w),b<y&&(y=b),b>x&&(x=b),S<_&&(_=S),S>B&&(B=S)}}return l[h+0]!==v||l[h+1]!==y||l[h+2]!==_||l[h+3]!==E||l[h+4]!==x||l[h+5]!==B?(l[h+0]=v,l[h+1]=y,l[h+2]=_,l[h+3]=E,l[h+4]=x,l[h+5]=B,!0):!1}else{const g=h+8,p=a[h+6],v=g+d,y=p+d;let _=f,E=!1,x=!1;e?_||(E=e.has(v),x=e.has(y),_=!E&&!x):(E=!0,x=!0);const B=_||E,M=_||x;let R=!1;B&&(R=u(g,d,_));let I=!1;M&&(I=u(p,d,_));const L=R||I;if(L)for(let D=0;D<3;D++){const w=g+D,b=p+D,S=l[w],F=l[w+3],k=l[b],Q=l[b+3];l[h+D]=S<k?S:k,l[h+D+3]=F>Q?F:Q}return L}}}function _me(t,e,r,n,i,s,a){Ir.setBuffer(t._roots[e]),dS(0,t,r,n,i,s,a),Ir.clearBuffer()}function dS(t,e,r,n,i,s,a){const{float32Array:o,uint16Array:l,uint32Array:A}=Ir,c=t*2;if(Yi(c,l)){const u=Rs(t,A),h=da(c,l);Ame(e,r,n,u,h,i,s,a)}else{const u=fa(t);wc(u,o,n,s,a)&&dS(u,e,r,n,i,s,a);const h=pa(t,A);wc(h,o,n,s,a)&&dS(h,e,r,n,i,s,a)}}const xme=["x","y","z"];function Eme(t,e,r,n,i,s){Ir.setBuffer(t._roots[e]);const a=fS(0,t,r,n,i,s);return Ir.clearBuffer(),a}function fS(t,e,r,n,i,s){const{float32Array:a,uint16Array:o,uint32Array:l}=Ir;let A=t*2;if(Yi(A,o)){const c=Rs(t,l),u=da(A,o);return cme(e,r,n,c,u,i,s)}else{const c=Oz(t,l),u=xme[c],h=n.direction[u]>=0;let d,f;h?(d=fa(t),f=pa(t,l)):(d=pa(t,l),f=fa(t));const m=wc(d,a,n,i,s)?fS(d,e,r,n,i,s):null;if(m){const p=m.point[u];if(h?p<=a[f+c]:p>=a[f+c+3])return m}const g=wc(f,a,n,i,s)?fS(f,e,r,n,i,s):null;return m&&g?m.distance<=g.distance?m:g:m||g||null}}const Sy=new Dr,Dh=new oo,Nh=new oo,em=new je,BO=new Ni,Iy=new Ni;function Bme(t,e,r,n){Ir.setBuffer(t._roots[e]);const i=pS(0,t,r,n);return Ir.clearBuffer(),i}function pS(t,e,r,n,i=null){const{float32Array:s,uint16Array:a,uint32Array:o}=Ir;let l=t*2;if(i===null&&(r.boundingBox||r.computeBoundingBox(),BO.set(r.boundingBox.min,r.boundingBox.max,n),i=BO),Yi(l,a)){const A=e.geometry,c=A.index,u=A.attributes.position,h=r.index,d=r.attributes.position,f=Rs(t,o),m=da(l,a);if(em.copy(n).invert(),r.boundsTree)return $r(t,s,Iy),Iy.matrix.copy(em),Iy.needsUpdate=!0,r.boundsTree.shapecast({intersectsBounds:g=>Iy.intersectsBox(g),intersectsTriangle:g=>{g.a.applyMatrix4(n),g.b.applyMatrix4(n),g.c.applyMatrix4(n),g.needsUpdate=!0;for(let p=f,v=m+f;p<v;p++)if(En(Nh,3*e.resolveTriangleIndex(p),c,u),Nh.needsUpdate=!0,g.intersectsTriangle(Nh))return!0;return!1}});for(let g=f,p=m+f;g<p;g++){const v=e.resolveTriangleIndex(g);En(Dh,3*v,c,u),Dh.a.applyMatrix4(em),Dh.b.applyMatrix4(em),Dh.c.applyMatrix4(em),Dh.needsUpdate=!0;for(let y=0,_=h.count;y<_;y+=3)if(En(Nh,y,h,d),Nh.needsUpdate=!0,Dh.intersectsTriangle(Nh))return!0}}else{const A=t+8,c=o[t+6];return $r(A,s,Sy),!!(i.intersectsBox(Sy)&&pS(A,e,r,n,i)||($r(c,s,Sy),i.intersectsBox(Sy)&&pS(c,e,r,n,i)))}}const Ry=new je,WB=new Ni,tm=new Ni,Mme=new Y,Tme=new Y,Cme=new Y,Sme=new Y;function Ime(t,e,r,n={},i={},s=0,a=1/0){e.boundingBox||e.computeBoundingBox(),WB.set(e.boundingBox.min,e.boundingBox.max,r),WB.needsUpdate=!0;const o=t.geometry,l=o.attributes.position,A=o.index,c=e.attributes.position,u=e.index,h=ma.getPrimitive(),d=ma.getPrimitive();let f=Mme,m=Tme,g=null,p=null;i&&(g=Cme,p=Sme);let v=1/0,y=null,_=null;return Ry.copy(r).invert(),tm.matrix.copy(Ry),t.shapecast({boundsTraverseOrder:E=>WB.distanceToBox(E),intersectsBounds:(E,x,B)=>B<v&&B<a?(x&&(tm.min.copy(E.min),tm.max.copy(E.max),tm.needsUpdate=!0),!0):!1,intersectsRange:(E,x)=>{if(e.boundsTree){const B=e.boundsTree;return B.shapecast({boundsTraverseOrder:M=>tm.distanceToBox(M),intersectsBounds:(M,R,I)=>I<v&&I<a,intersectsRange:(M,R)=>{for(let I=M,L=M+R;I<L;I++){const D=B.resolveTriangleIndex(I);En(d,3*D,u,c),d.a.applyMatrix4(r),d.b.applyMatrix4(r),d.c.applyMatrix4(r),d.needsUpdate=!0;for(let w=E,b=E+x;w<b;w++){const S=t.resolveTriangleIndex(w);En(h,3*S,A,l),h.needsUpdate=!0;const F=h.distanceToTriangle(d,f,g);if(F<v&&(m.copy(f),p&&p.copy(g),v=F,y=w,_=I),F<s)return!0}}}})}else{const B=qf(e);for(let M=0,R=B;M<R;M++){En(d,3*M,u,c),d.a.applyMatrix4(r),d.b.applyMatrix4(r),d.c.applyMatrix4(r),d.needsUpdate=!0;for(let I=E,L=E+x;I<L;I++){const D=t.resolveTriangleIndex(I);En(h,3*D,A,l),h.needsUpdate=!0;const w=h.distanceToTriangle(d,f,g);if(w<v&&(m.copy(f),p&&p.copy(g),v=w,y=I,_=M),w<s)return!0}}}}}),ma.releasePrimitive(h),ma.releasePrimitive(d),v===1/0?null:(n.point?n.point.copy(m):n.point=m.clone(),n.distance=v,n.faceIndex=y,i&&(i.point?i.point.copy(p):i.point=p.clone(),i.point.applyMatrix4(Ry),m.applyMatrix4(Ry),i.distance=m.sub(i.point).length(),i.faceIndex=_),n)}function Rme(){return typeof SharedArrayBuffer<"u"}const og=new Ir.constructor,tb=new Ir.constructor,OA=new oR(()=>new Dr),Qh=new Dr,Hh=new Dr,KB=new Dr,YB=new Dr;let XB=!1;function Ume(t,e,r,n){if(XB)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");XB=!0;const i=t._roots,s=e._roots;let a,o=0,l=0;const A=new je().copy(r).invert();for(let c=0,u=i.length;c<u;c++){og.setBuffer(i[c]),l=0;const h=OA.getPrimitive();$r(0,og.float32Array,h),h.applyMatrix4(A);for(let d=0,f=s.length;d<f&&(tb.setBuffer(s[d]),a=Qa(0,0,r,A,n,o,l,0,0,h),tb.clearBuffer(),l+=s[d].length,!a);d++);if(OA.releasePrimitive(h),og.clearBuffer(),o+=i[c].length,a)break}return XB=!1,a}function Qa(t,e,r,n,i,s=0,a=0,o=0,l=0,A=null,c=!1){let u,h;c?(u=tb,h=og):(u=og,h=tb);const d=u.float32Array,f=u.uint32Array,m=u.uint16Array,g=h.float32Array,p=h.uint32Array,v=h.uint16Array,y=t*2,_=e*2,E=Yi(y,m),x=Yi(_,v);let B=!1;if(x&&E)c?B=i(Rs(e,p),da(e*2,v),Rs(t,f),da(t*2,m),l,a+e,o,s+t):B=i(Rs(t,f),da(t*2,m),Rs(e,p),da(e*2,v),o,s+t,l,a+e);else if(x){const M=OA.getPrimitive();$r(e,g,M),M.applyMatrix4(r);const R=fa(t),I=pa(t,f);$r(R,d,Qh),$r(I,d,Hh);const L=M.intersectsBox(Qh),D=M.intersectsBox(Hh);B=L&&Qa(e,R,n,r,i,a,s,l,o+1,M,!c)||D&&Qa(e,I,n,r,i,a,s,l,o+1,M,!c),OA.releasePrimitive(M)}else{const M=fa(e),R=pa(e,p);$r(M,g,KB),$r(R,g,YB);const I=A.intersectsBox(KB),L=A.intersectsBox(YB);if(I&&L)B=Qa(t,M,r,n,i,s,a,o,l+1,A,c)||Qa(t,R,r,n,i,s,a,o,l+1,A,c);else if(I)if(E)B=Qa(t,M,r,n,i,s,a,o,l+1,A,c);else{const D=OA.getPrimitive();D.copy(KB).applyMatrix4(r);const w=fa(t),b=pa(t,f);$r(w,d,Qh),$r(b,d,Hh);const S=D.intersectsBox(Qh),F=D.intersectsBox(Hh);B=S&&Qa(M,w,n,r,i,a,s,l,o+1,D,!c)||F&&Qa(M,b,n,r,i,a,s,l,o+1,D,!c),OA.releasePrimitive(D)}else if(L)if(E)B=Qa(t,R,r,n,i,s,a,o,l+1,A,c);else{const D=OA.getPrimitive();D.copy(YB).applyMatrix4(r);const w=fa(t),b=pa(t,f);$r(w,d,Qh),$r(b,d,Hh);const S=D.intersectsBox(Qh),F=D.intersectsBox(Hh);B=S&&Qa(R,w,n,r,i,a,s,l,o+1,D,!c)||F&&Qa(R,b,n,r,i,a,s,l,o+1,D,!c),OA.releasePrimitive(D)}}return B}const Uy=new Ni,MO=new Dr,Fme={strategy:Fz,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class lR{static serialize(e,r={}){r={cloneBuffers:!0,...r};const n=e.geometry,i=e._roots,s=e._indirectBuffer,a=n.getIndex();let o;return r.cloneBuffers?o={roots:i.map(l=>l.slice()),index:a?a.array.slice():null,indirectBuffer:s?s.slice():null}:o={roots:i,index:a?a.array:null,indirectBuffer:s},o}static deserialize(e,r,n={}){n={setIndex:!0,indirect:!!e.indirectBuffer,...n};const{index:i,roots:s,indirectBuffer:a}=e,o=new lR(r,{...n,[QB]:!0});if(o._roots=s,o._indirectBuffer=a||null,n.setIndex){const l=r.getIndex();if(l===null){const A=new lt(e.index,1,!1);r.setIndex(A)}else l.array!==i&&(l.array.set(i),l.needsUpdate=!0)}return o}get indirect(){return!!this._indirectBuffer}constructor(e,r={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(r=Object.assign({...Fme,[QB]:!1},r),r.useSharedArrayBuffer&&!Rme())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,r[QB]||(Ype(this,r),!e.boundingBox&&r.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Dr))),this.resolveTriangleIndex=r.indirect?n=>this._indirectBuffer[n]:n=>n}refit(e=null){return(this.indirect?bme:lme)(this,e)}traverse(e,r=0){const n=this._roots[r],i=new Uint32Array(n),s=new Uint16Array(n);a(0);function a(o,l=0){const A=o*2,c=s[A+15]===F_;if(c){const u=i[o+6],h=s[A+14];e(l,c,new Float32Array(n,o*4,6),u,h)}else{const u=o+ag/4,h=i[o+6],d=i[o+7];e(l,c,new Float32Array(n,o*4,6),d)||(a(u,l+1),a(h,l+1))}}}raycast(e,r=Ns,n=0,i=1/0){const s=this._roots,a=this.geometry,o=[],l=r.isMaterial,A=Array.isArray(r),c=a.groups,u=l?r.side:r,h=this.indirect?_me:hme;for(let d=0,f=s.length;d<f;d++){const m=A?r[c[d].materialIndex].side:u,g=o.length;if(h(this,d,m,e,o,n,i),A){const p=c[d].materialIndex;for(let v=g,y=o.length;v<y;v++)o[v].face.materialIndex=p}}return o}raycastFirst(e,r=Ns,n=0,i=1/0){const s=this._roots,a=this.geometry,o=r.isMaterial,l=Array.isArray(r);let A=null;const c=a.groups,u=o?r.side:r,h=this.indirect?Eme:fme;for(let d=0,f=s.length;d<f;d++){const m=l?r[c[d].materialIndex].side:u,g=h(this,d,m,e,n,i);g!=null&&(A==null||g.distance<A.distance)&&(A=g,l&&(g.face.materialIndex=c[d].materialIndex))}return A}intersectsGeometry(e,r){let n=!1;const i=this._roots,s=this.indirect?Bme:pme;for(let a=0,o=i.length;a<o&&(n=s(this,a,e,r),!n);a++);return n}shapecast(e){const r=ma.getPrimitive(),n=this.indirect?ume:ome;let{boundsTraverseOrder:i,intersectsBounds:s,intersectsRange:a,intersectsTriangle:o}=e;if(a&&o){const u=a;a=(h,d,f,m,g)=>u(h,d,f,m,g)?!0:n(h,d,this,o,f,m,r)}else a||(o?a=(u,h,d,f)=>n(u,h,this,o,d,f,r):a=(u,h,d)=>d);let l=!1,A=0;const c=this._roots;for(let u=0,h=c.length;u<h;u++){const d=c[u];if(l=eme(this,u,s,a,i,A),l)break;A+=d.byteLength}return ma.releasePrimitive(r),l}bvhcast(e,r,n){let{intersectsRanges:i,intersectsTriangles:s}=n;const a=ma.getPrimitive(),o=this.geometry.index,l=this.geometry.attributes.position,A=this.indirect?f=>{const m=this.resolveTriangleIndex(f);En(a,m*3,o,l)}:f=>{En(a,f*3,o,l)},c=ma.getPrimitive(),u=e.geometry.index,h=e.geometry.attributes.position,d=e.indirect?f=>{const m=e.resolveTriangleIndex(f);En(c,m*3,u,h)}:f=>{En(c,f*3,u,h)};if(s){const f=(m,g,p,v,y,_,E,x)=>{for(let B=p,M=p+v;B<M;B++){d(B),c.a.applyMatrix4(r),c.b.applyMatrix4(r),c.c.applyMatrix4(r),c.needsUpdate=!0;for(let R=m,I=m+g;R<I;R++)if(A(R),a.needsUpdate=!0,s(a,c,R,B,y,_,E,x))return!0}return!1};if(i){const m=i;i=function(g,p,v,y,_,E,x,B){return m(g,p,v,y,_,E,x,B)?!0:f(g,p,v,y,_,E,x,B)}}else i=f}return Ume(this,e,r,i)}intersectsBox(e,r){return Uy.set(e.min,e.max,r),Uy.needsUpdate=!0,this.shapecast({intersectsBounds:n=>Uy.intersectsBox(n),intersectsTriangle:n=>Uy.intersectsTriangle(n)})}intersectsSphere(e){return this.shapecast({intersectsBounds:r=>e.intersectsBox(r),intersectsTriangle:r=>r.intersectsSphere(e)})}closestPointToGeometry(e,r,n={},i={},s=0,a=1/0){return(this.indirect?Ime:wme)(this,e,r,n,i,s,a)}closestPointToPoint(e,r={},n=0,i=1/0){return tme(this,e,r,n,i)}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(r=>{$r(0,new Float32Array(r),MO),e.union(MO)}),e}}function TO(t,e,r){return t===null?null:(t.point.applyMatrix4(e.matrixWorld),t.distance=t.point.distanceTo(r.ray.origin),t.object=e,t)}const Fy=new Yu,CO=new Y,SO=new je,kme=Ar.prototype.raycast,Lme=Tse.prototype.raycast,IO=new Y,Xn=new Ar,ky=[];function Pme(t,e){this.isBatchedMesh?Ome.call(this,t,e):Dme.call(this,t,e)}function Ome(t,e){if(this.boundsTrees){const r=this.boundsTrees,n=this._drawInfo,i=this._drawRanges,s=this.matrixWorld;Xn.material=this.material,Xn.geometry=this.geometry;const a=Xn.geometry.boundsTree,o=Xn.geometry.drawRange;Xn.geometry.boundingSphere===null&&(Xn.geometry.boundingSphere=new wi);for(let l=0,A=n.length;l<A;l++){if(!this.getVisibleAt(l))continue;const c=n[l].geometryIndex;if(Xn.geometry.boundsTree=r[c],this.getMatrixAt(l,Xn.matrixWorld).premultiply(s),!Xn.geometry.boundsTree){this.getBoundingBoxAt(c,Xn.geometry.boundingBox),this.getBoundingSphereAt(c,Xn.geometry.boundingSphere);const u=i[c];Xn.geometry.setDrawRange(u.start,u.count)}Xn.raycast(t,ky);for(let u=0,h=ky.length;u<h;u++){const d=ky[u];d.object=this,d.batchId=l,e.push(d)}ky.length=0}Xn.geometry.boundsTree=a,Xn.geometry.drawRange=o,Xn.material=null,Xn.geometry=null}else Lme.call(this,t,e)}function Dme(t,e){if(this.geometry.boundsTree){if(this.material===void 0)return;SO.copy(this.matrixWorld).invert(),Fy.copy(t.ray).applyMatrix4(SO),IO.setFromMatrixScale(this.matrixWorld),CO.copy(Fy.direction).multiply(IO);const r=CO.length(),n=t.near/r,i=t.far/r,s=this.geometry.boundsTree;if(t.firstHitOnly===!0){const a=TO(s.raycastFirst(Fy,this.material,n,i),this,t);a&&e.push(a)}else{const a=s.raycast(Fy,this.material,n,i);for(let o=0,l=a.length;o<l;o++){const A=TO(a[o],this,t);A&&e.push(A)}}}else kme.call(this,t,e)}function Nme(t={}){return this.boundsTree=new lR(this,t),this.boundsTree}function Qme(){this.boundsTree=null}let ZB=new Y,rm=new Y;const RO=[],Ly=new V8,Hme=.03,jme=.03,zme=new Zi({side:Ns}),Gme=new Zi({side:ti});let km;$t.prototype.computeBoundsTree=Nme;$t.prototype.disposeBoundsTree=Qme;Ar.prototype.raycast=Pme;const Vme=t=>{const e=t.attributes.position,r=t.index,n=new Gn,i=new Y,s=new Y,a=new Y,o=[];for(let l=0;l<r.array.length/3;l++){const A=l*3;i.fromBufferAttribute(e,r.getX(A+0)),s.fromBufferAttribute(e,r.getX(A+1)),a.fromBufferAttribute(e,r.getX(A+2)),n.set(i,s,a),o.push(n.getNormal(new Y))}t.userData.faceNormals=o},Wme=t=>{const e=t.geometry.clone();let r=[];if(Array.isArray(t.material))for(let i=0;i<t.material.length;i++)r.push(t.material[i].clone());else r=t.material.clone();if(!t.userData.isVRM0){const i=e.attributes.position;for(let s=0;s<i.array.length;s+=3)i.array[s]=-i.array[s],i.array[s+2]=-i.array[s+2];i.needsUpdate=!0}const n=new Ar(e,r);return Vme(n.geometry),n.geometry.computeBoundsTree({strategy:kz}),n},Ow=t=>{t.isMesh&&(t.geometry.userData.faceNormals=null,t.geometry.dispose(),t.geometry.disposeBoundsTree(),t.parent&&t.parent.remove(t),t.userData.cancelMesh&&Ow(t.userData.cancelMesh))},Qz=t=>{var e,r;t.userData.cullingClone&&(Ow(t.userData.cullingClone),t.userData.cullingClone=null,Ow(t.userData.cullingCloneP),t.userData.cullingCloneP=null,Ow(t.userData.cullingCloneN),t.userData.cullingCloneN=null,((e=t.userData)==null?void 0:e.clippedIndexGeometry)!=null&&(t.userData.clippedIndexGeometry=null),((r=t.userData)==null?void 0:r.origIndexBuffer)!=null&&(t.userData.origIndexBuffer=null))},Kme=async t=>{if(t==null){console.warn("Null parameter for meshes was provided. Skipping mesh culling.");return}if(!Array.isArray(t)){console.warn("No valid mesh array was provided. Skipping mesh culling.");return}if(t.length==0){console.warn("No mesh array with elements was provided. Skipping mesh culling.");return}const e=[];km=t[0].parent,km.lines!=null&&(km.lines.forEach(i=>{i.visible=!1}),km.lines.length=0),t.forEach(i=>{if(i.userData.cullLayer!=null){i.userData.origIndexBuffer==null&&(i.userData.origIndexBuffer=i.geometry.index.clone()),e[i.userData.cullLayer]==null&&(e[i.userData.cullLayer]={origMeshes:[],cloneMeshes:[],posMeshes:[],negMeshes:[],scaleMeshes:[],positionMeshes:[]}),i.userData.cullingClone==null&&(i.userData.cullingClone=Wme(i),i.userData.cullingCloneP=i.userData.cullingClone.clone(),i.userData.cullingCloneN=i.userData.cullingClone.clone());const s=i.userData.cullingClone,a=i.userData.cullingCloneP,o=i.userData.cullingCloneN;a.material=zme,o.userData.cancelMesh=a,o.material=Gme,a.userData.maxCullDistance=o.userData.maxCullDistance=i.userData.maxCullDistance,e[i.userData.cullLayer].origMeshes.push(i),e[i.userData.cullLayer].cloneMeshes.push(s),e[i.userData.cullLayer].posMeshes.push(a),e[i.userData.cullLayer].negMeshes.push(o),i.geometry.setIndex(i.userData.origIndexBuffer)}});for(let i=e.length-1;i>=0;i--)e[i]==null&&e.splice(i,1);let r=[];const n=[];for(let i=e.length-1;i>=0;i--){if(r.length!=0||e.length>=1)for(let s=0;s<e[i].origMeshes.length;s++){const a=e[i].origMeshes[s],o=e[i].cloneMeshes[s],l=a.userData.origIndexBuffer.array,A=o.geometry.attributes.position.array,c=o.geometry.attributes.normal.array,u=o.geometry.userData.faceNormals;n.push({geom:a.geometry,index:Xme(l,A,c,u,r,a.userData.cullDistance)})}r=[...r,...e[i].posMeshes,...e[i].negMeshes]}n.forEach(i=>{i.geom.setIndex(i.index)})},Yme=t=>{let e=Hme,r=jme;return t&&(isNaN(t)?Array.isArray(t)&&(isNaN(t[0])||(e=t[0]),isNaN(t[1])||(r=t[1])):e=t),[e,r]},Xme=(t,e,r,n,i,s,a=!1)=>{const o=[],l=Yme(s);let A=l[0],c=l[1];Ly.far=A+c;for(let h=0;h<t.length/3;h++){n&&rm.set(n[h].x,n[h].y,n[h].z).normalize();const d=h*3;let f=[];for(let m=0;m<3;m++){RO.length=0;const g=t[d+m]*3;n==null&&rm.set(r[g],r[g+1],r[g+2]).normalize(),ZB.set(e[g],e[g+1],e[g+2]).add(rm.clone().multiplyScalar(A)),Ly.set(ZB,rm.clone().multiplyScalar(-1));const p=Ly.intersectObjects(i,!1,RO);for(let v=p.length-1;v>=0;v--)A-p[v].distance>=p[v].object.userData.maxCullDistance&&p.splice(v,1);if(p.length===0){for(let v=0;v<3;v++)o.push(t[d+v]);break}else{const v=p.map(y=>y.object);for(let y=0;y<v.length;y++){const _=v[y];if(_!=null&&_.userData.cancelMesh){const E=v.indexOf(_.userData.cancelMesh);v[y]=null,E!=-1&&E<y&&(v[E]=null)}}if(v.filter(y=>y).length===0){for(let y=0;y<3;y++)o.push(t[d+y]);break}if(m===0)f=p.map(y=>y.object);else if(f=p.map(y=>{if(f.indexOf(y.object)!==-1)return y.object}),f=f.filter(y=>y),m===2&&f.filter(y=>y).length===0)for(let y=0;y<3;y++)o.push(t[d+y]);a&&Zme(ZB,rm.clone().multiplyScalar(-1),Ly.far,16711680,km)}}}const u=new Uint32Array(o);return new lt(u,1,!1)};function Zme(t,e,r,n,i){i.lines==null&&(i.lines=[]);let s=new Y;s.addVectors(t,e.clone().multiplyScalar(r));const a=[];a.push(t),a.push(s);const o=new $t().setFromPoints(a),l=[];l.push(new He(0)),l.push(new He(16777215));let A=new lA({color:n});var c=new Xf(o,A);c.renderOrder=100,i.add(c),i.lines.push(c)}function Jme(t,e=10){if(t<=0)return[];const r=t,n=[{w:e,h:e,x:0,y:0}];function i(a,o,l,A){if(o<=0)return;const c=a.w/2,u=[{w:c,h:c,x:l,y:A},{w:c,h:c,x:l+c,y:A},{w:c,h:c,x:l,y:A+c},{w:c,h:c,x:l+c,y:A+c}];n.push(...u);const h=n.find(p=>p.x===l&&p.y===A&&p.w===a.w&&p.h===a.h);if(n.splice(n.indexOf(h),1),t<=n.length)return;const d=Math.max(...n.map(p=>p.w)),f=n.find(p=>p.w===d),m=f.x,g=f.y;i({w:f.w,h:f.h},o-1,m,g)}if(t==1)return{squares:n,fill:1};for(i({w:e,h:e},r,0,0),n.sort((a,o)=>o.w-a.w);n.length>t;)n.pop();const s=n.reduce((a,o)=>a+o.w*o.h,0)/(e*e);return{squares:n,fill:s}}class L_{constructor(e,r){De(this,"width"),De(this,"height"),De(this,"cameraRTT",null),De(this,"sceneRTT",null),De(this,"materials",[]),De(this,"quads",[]),De(this,"renderer",null),De(this,"rtTexture",null),this.width=e,this.height=r}_addPlane(e,r=0){if(!this.sceneRTT)return;const n=new Zi({side:pi,transparent:!0,opacity:1,color:new He(1,1,1)});this.materials.push(n);const i=new oA(1,1),s=new Ar(i,n);s.position.z=r*1e-4,s.scale.set(this.width,this.height,1),this.quads.push(s),this.sceneRTT.add(s)}render(e,r,n,i,s=!0){var a;const o=At(e);if(o.length===0&&(e=At(L_.createSolidColorTexture(n,this.width,this.height))),this.renderer==null){this.sceneRTT=new zg,this.cameraRTT=new v0(-this.width/2,this.width/2,this.height/2,-this.height/2,-1e4,1e4),this.cameraRTT.position.z=100,this.sceneRTT.add(this.cameraRTT);for(let A=0;A<o.length;A++){const c=o[A];c&&this._addPlane(c,A)}this.renderer=new y0,this.renderer.setPixelRatio(1),this.renderer.setSize(this.width,this.height),this.renderer.autoClear=!1}else this.cameraRTT&&(this.cameraRTT.left=-this.width/2,this.cameraRTT.right=this.width/2,this.cameraRTT.top=this.height/2,this.cameraRTT.bottom=-this.height/2,this.cameraRTT.updateProjectionMatrix()),this.quads.forEach(A=>{A==null||A.scale.set(this.width,this.height,1)}),this.renderer.setSize(this.width,this.height);if(o.length>this.materials.length){const A=o.length-this.materials.length;for(let c=0;c<A;c++){const u=o[c];this._addPlane(u,c)}}else{if(this.materials.length=o.length,this.quads.length>o.length)for(let A=o.length;A<this.quads.length;A++)(a=this.sceneRTT)==null||a.remove(this.quads[A]);this.quads.length=o.length}this.rtTexture=new $o(this.width,this.height),this.rtTexture.texture.colorSpace=s?Ut:Fo;for(let A=0;A<o.length;A++){const c=o[A];c&&(this.materials[A].map=c,this.materials[A].color=r.clone())}this.renderer.setClearColor(n.clone(),i?0:1),this.renderer.setRenderTarget(this.rtTexture),this.renderer.clear(),this.sceneRTT&&this.cameraRTT&&this.renderer.render(this.sceneRTT,this.cameraRTT);let l=new Uint8ClampedArray(this.rtTexture.width*this.rtTexture.height*4);return this.renderer.readRenderTargetPixels(this.rtTexture,0,0,this.width,this.height,l),new ImageData(l,this.width,this.height)}clearRenderer(){var e,r;(e=this.rtTexture)==null||e.dispose(),this.rtTexture=null,(r=this.materials)!=null&&r.length&&this.materials.forEach(n=>{var i;(i=n.map)==null||i.dispose(),n.map=null})}destroy(){var e,r;this.cameraRTT=null,(e=this.sceneRTT)==null||e.clear(),this.sceneRTT=null,this.materials.forEach(n=>{var i;(i=n.map)==null||i.dispose(),n.map=null}),this.quads.forEach(n=>{var i;(i=this.sceneRTT)==null||i.remove(n),n=null}),this.materials.length=0,this.quads.length=0,(r=this.renderer)==null||r.dispose(),this.renderer=null,this.rtTexture=null}static createSolidColorTexture(e,r,n){const i=r*n,s=new Uint8Array(4*i),a=Math.floor(e.r*255),o=Math.floor(e.g*255),l=Math.floor(e.b*255);for(let c=0;c<i;c++){const u=c*4;s[u]=a,s[u+1]=o,s[u+2]=l,s[u+3]=255}const A=new _u(s,r,n);return A.needsUpdate=!0,A}}function rb(t,e){return t=t.length==null?t:t[0],t[e]&&t[e].image}function qme(t,e){return t=t.length==null?t:t[0],t[e]&&t[e].clone()}function $A(t,e,r,n,i){const s=(t-e)/(r-e);return n+s*(i-n)}const mS={diffuse:["map"],normal:["normalMap"],orm:["ormMap","aoMap","roughnessMap","metalnessMap"]},$me=async({transparentColor:t,meshes:e,includeNonTexturedMeshesInAtlas:r=!1,atlasSize:n=4096,mtoon:i=!0,transparentMaterial:s=!1,transparentTexture:a=!1,twoSidedMaterial:o=!1})=>typeof window>"u"?await ege({meshes:e,atlasSize:n,mtoon:i,transparentMaterial:s,transparentTexture:a}):await tge({backColor:t,meshes:e,atlasSize:n,mtoon:i,includeNonTexturedMeshesInAtlas:r,transparentMaterial:s,transparentTexture:a,twoSidedMaterial:o}),ege=async({meshes:t,atlasSize:e,mtoon:r,transparentMaterial:n,transparentTexture:i})=>{const s=e,a=["diffuse"],o=[];t.forEach(x=>{const B=x.material;let M=o.find(R=>R.material===B);if(!M)o.push({material:B,mesh:x});else{const{dest:R}=P_({meshes:[M.mesh,x]});M.mesh.geometry=R}});const l=Object.fromEntries(a.map(x=>[x,cR({width:s,height:s,transparent:i})])),A=Math.floor(Math.sqrt(t.length)+1),c=s/A,u=new Map(o.map((x,B)=>{const M=new Ke(B%A,Math.floor(B/A)).multiplyScalar(1/A),R=new Ke(M.x+1/A,M.y+1/A);return[x.mesh,{min:M,max:R}]})),h=[],d=[];o.forEach(x=>{const{min:B,max:M}=u.get(x.mesh);d.push(M),h.push(B)});const f=new Ke(Math.max(...d.map(x=>x.x)),Math.max(...d.map(x=>x.y))),m=new Ke(Math.min(...h.map(x=>x.x)),Math.min(...h.map(x=>x.y))),g=1/(f.x-m.x),p=1/(f.y-m.y),v=c*g,y=c*p,_=new Map(o.map(x=>{let{min:B,max:M}=u.get(x.mesh);return B.x=B.x*g,B.y=B.y*p,M.x=M.x*g,M.y=M.y*p,[x.mesh,{min:B,max:M}]}));o.forEach(x=>{const{material:B,mesh:M}=x,{min:R,max:I}=_.get(M);a.forEach(b=>{const S=l[b];S.globalCompositeOperation="source-over";let F=rb(B,mS[b].find(k=>rb(B,k)));if(F!==""&&F!==void 0)try{const k=new Uint8ClampedArray(F.data),Q=new ImageData(k,v,y),z=document.createElement("canvas");z.width=v,z.height=y;const j=z.getContext("2d");j.putImageData(Q,0,0),j.save(),S.drawImage(z,R.x*s,R.y*s,v,y)}catch(k){console.error("error",k)}else S.fillStyle=b==="diffuse"?`#${B.color.clone().getHexString()}`:b==="normal"?"#bcbcff":b==="orm"?`#${new He(B.aoMapIntensity,B.roughness,B.metalness).getHexString()}`:"#7F7F7F",S.fillRect(R.x*s,R.y*s,v,y)});const L=M.geometry,D=L.attributes.uv;if(D)for(let b=0;b<D.array.length;b+=2)D.array[b]=$A(D.array[b],0,1,R.x,I.x),D.array[b+1]=$A(D.array[b+1],0,1,R.y,I.y);const w=L.attributes.uv2;if(w)for(let b=0;b<w.array.length;b+=2)w.array[b]=$A(w.array[b],0,1,R.x,I.x),w.array[b+1]=$A(w.array[b+1],0,1,R.y,I.y);else L.attributes.uv2=L.attributes.uv});const E=Object.fromEntries(await Promise.all(a.map(async x=>{const B=new Sr(l[x].canvas);return B.flipY=!1,[x,B]})));return{bakeObjects:o,textures:E,uvs:_}},tge=async({backColor:t,includeNonTexturedMeshesInAtlas:e=!1,meshes:r,atlasSize:n,mtoon:i,transparentMaterial:s,transparentTexture:a,twoSidedMaterial:o})=>{const l=n,A=i?["diffuse"]:["diffuse","orm","normal"],c=[];let u=null;r.forEach(k=>{k=k.clone();const Q=k.material.length==null?k.material:k.material[0];i&&u==null&&Q.type=="ShaderMaterial"&&(u=Q.clone());let z=c.find(j=>{j.material});if(!z)c.push({material:Q,mesh:k});else{const{dest:j}=P_({meshes:[z.mesh,k]});z.mesh.geometry=j}});const h=Object.fromEntries(A.map(k=>[k,cR({width:l,height:l,transparent:a&&k=="diffuse"})])),d=new Set,f=new Map,m=c.map(k=>{const Q=k.mesh.geometry;if(e==!1){if(!k.mesh.visible)return d.add(k.mesh),[k.mesh,0];let z=!0;for(const j of A)for(const T of mS[j])if(rb(k.material,T)&&z){z=!1;break}if(z){const j=k.material;if(j instanceof fn)return[k.mesh,2];if(f.size==0)return f.set(j,[k.mesh]),[k.mesh,1];for(let[T,H]of Array.from(f.entries()))if((()=>T.color.r.toFixed(5)==j.color.r.toFixed(5)&&T.color.g.toFixed(5)==j.color.g.toFixed(5)&&T.color.b.toFixed(5)==j.color.b.toFixed(5)&&T.emissive.equals(j.emissive)&&T.aoMapIntensity==j.aoMapIntensity&&T.metalness==j.metalness&&T.normalScale.equals(j.normalScale)&&T.roughness==j.roughness&&T.transparent==j.transparent&&T.vertexColors==j.vertexColors)())return H.push(k.mesh),[k.mesh,0];return f.set(j,[k.mesh]),[k.mesh,1]}}return[k.mesh,Q.index?Q.index.count/3:Q.attributes.position.count/3]}).sort((k,Q)=>Q[1]-k[1]),g=m.filter(([,k])=>k!=0),{squares:p,fill:v}=Jme(g.length,l);console.log("squaresplit",v);const y=p.map(k=>({x:k.x,y:k.y,width:k.w,height:k.h})),_=new Map(y.map((k,Q)=>[m[Q][0],k]));f.forEach(k=>{if(k.length>1){const Q=_.get(k[0]);k.forEach(z=>{_.set(z,Q)})}});const E=new Map(Array.from(_.entries()).map(([k,Q])=>{const z=new Ke(Q.x,Q.y),j=new Ke(Q.x+Q.width,Q.y+Q.height);return[k,{min:z,max:j}]})),x=[];Array.from(_.keys()).forEach(k=>{if(d.has(k))return;const{min:Q,max:z}=E.get(k);x.push(Q)});const B=new Ke(Math.min(...x.map(k=>k.x)),Math.min(...x.map(k=>k.y))),M=1/(l-B.x),R=1/(l-B.y),I=new Map(Array.from(_.keys()).map(k=>{if(d.has(k))return;let{min:Q,max:z}=E.get(k);return Q.x=Q.x*M,Q.y=Q.y*R,z.x=z.x*M,z.y=z.y*R,[k,{min:Q,max:z}]}).filter(k=>k));let L=!1;const D=new L_(l,l);Array.from(_.keys()).forEach(k=>{const Q=c.find(se=>se.mesh===k),{material:z}=Q;let j,T;const H=I.get(k);if(H?(j=H.min,T=H.max):(j=new Ke(0,0),T=new Ke(0,0)),!d.has(Q.mesh)){const se=_.get(k).width,le=_.get(k).height;A.forEach(Ae=>{var ge;const ne=h[Ae];ne.globalCompositeOperation="source-over";let de,Te=new He(1,1,1);switch(Ae){case"diffuse":de=z.color||t,(ge=z.uniforms)!=null&&ge.litFactor?Te=z.uniforms.litFactor.value:Te=z.color;break;case"normal":de=new He(12369151);break;case"orm":de=new He(0,z.roughness,z.metalness);break;default:de=new He(1,1,1);break}let re=qme(z,mS[Ae].find(he=>rb(z,he)));L==!1&&Ae=="normal"&&re!=null&&(L=!0);const N=D.render(re,Te,de,Ae=="diffuse"&&a,Ae!="normal");createImageBitmap(N).then(he=>ne.drawImage(he,j.x*l,j.y*l,se,le))})}const me=k.geometry.clone();k.geometry=me;const ee=me.attributes.uv.clone();if(me.attributes.uv=ee,ee)for(let se=0;se<me.attributes.uv.array.length;se+=2)ee.array[se]=(ee.array[se]%1+1)%1,ee.array[se+1]=(ee.array[se+1]%1+1)%1,ee.array[se]=$A(ee.array[se],0,1,j.x,T.x),ee.array[se+1]=$A(ee.array[se+1],0,1,j.y,T.y);const U=me.attributes.uv2;if(U)for(let se=0;se<U.array.length;se+=2)U.array[se]=(U.array[se]%1+1)%1,U.array[se+1]=(U.array[se+1]%1+1)%1,U.array[se]=$A(U.array[se],0,1,j.x,T.x),U.array[se+1]=$A(U.array[se+1],0,1,j.y,T.y);else me.attributes.uv2=me.attributes.uv}),D.destroy();const w=Object.fromEntries(await Promise.all(A.map(async k=>{const Q=new Sr(h[k].canvas);return Q.flipY=!1,[k,Q]}))),b=o?pi:Ns;let S;const F=s?"transparent":"opaque";return i?(S=new Df({map:w.diffuse,transparent:s,side:b}),u==null&&(u=new _z),u.side=b,u.uniforms.map=w.diffuse,u.uniforms.shadeMultiplyTexture=w.diffuse,u.transparent=s,a&&!s&&(S.alphaTest=.5,u.alphaTest=.5),S.userData.vrmMaterial=u,S.userData.shadeTexture=w.uniformColor,S.name="mToon_"+F,S.map.name=S.name):(S=new Df({map:w.diffuse,roughnessMap:w.orm,metalnessMap:w.orm,normalMap:L?w.normal:null,transparent:s,side:b}),a&&!s&&(S.alphaTest=.5),S.name="standard_"+F,S.roughnessMap!=null&&(S.roughnessMap.name=S.name+"_orm"),S.normalMap!=null&&(S.normalMap.name=S.name+"_normal")),{bakeObjects:c,material:S}};function Hz(t){const e=new Map;for(const n of t.skeleton.bones){const i=n.clone(!1);e.set(n,i)}t.skeleton.bones[0].traverse(n=>{if(n.type!=="Bone")return;const i=e.get(n);for(const s of n.children){const a=e.get(s);a&&i.add(a)}});const r=new Rc(t.skeleton.bones.map(n=>e.get(n)));return r.boneInverses=t.skeleton.boneInverses,r.pose(),r}function jz(t,e){const r=new Map;new Y(-1,1,-1),new je,new Y;let n=0;t.forEach(o=>{if(o.skeleton){var l=Hz(o);const A=l.bones;l.bones.forEach((c,u)=>{var h;if(A.indexOf(c)!==-1){const d=r.get(c.name);if(d==null){const f={index:n,boneInverses:l.boneInverses[u],bone:c.clone(!1),parentName:((h=c.parent)==null?void 0:h.type)=="Bone"?c.parent.name:null};n++,r.set(c.name,f)}else c.userData.VRMcolliders!=null&&(d.bone.userData.VRMcolliders==null?d.bone.userData.VRMcolliders=c.userData.VRMcolliders:c.userData.VRMcollidersID!=d.bone.userData.VRMcollidersID&&(d.bone.userData.VRMcolliders=[...d.bone.userData.VRMcolliders,...c.userData.VRMcolliders]))}})}});const i=[],s=[];[...r.values()].forEach(o=>{var l;if(i.push(o.bone),s.push(o.boneInverses),o.parentName!=null){const A=(l=r.get(o.parentName))==null?void 0:l.bone;A&&A.add(o.bone)}});const a=new Rc(i,s);return a.bones.forEach(o=>{var l;const A=(l=o.userData)==null?void 0:l.vrm0RestPosition;A&&o.position.set(-A.x,A.y,-A.z),o.position.set(o.position.x*e,o.position.y*e,o.position.z*e)}),a}function rge(t,e){if(!e.skeleton)return;const r=new Map;if(e.skeleton){e.skeleton.bones.forEach((a,o)=>{const l=t.bones.filter(c=>c.name===a.name),A=l.length>0?t.bones.indexOf(l[0]):-1;r.set(o,A)});const n=[],i=e.geometry.attributes.skinIndex.array;for(let a=0;a<i.length;a++)n[a]=r.get(i[a]);const s=new Uint16Array(n);return new lt(s,4,!1)}}function zz(t){const e=[...t];return e.sort(),e.filter((r,n)=>e.indexOf(r)===n)}function nge(t){const e=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].filter(r=>t.constructor===r);return e.length&&e[0]||null}function nb(t,e){const r=[];for(let s=0;s<e.length;s++){const a=s*t.itemSize;for(let o=0;o<t.itemSize;o++)r[a+o]=t.array[e[s]*t.itemSize+o]}const n=nge(t.array),i=new n(r);return new lt(i,t.itemSize,t.normalized)}function ige(t,e,r){for(let n=0;n<t.attributes.skinIndex.array.length;n+=4){const i=[t.attributes.skinIndex.array[n],t.attributes.skinIndex.array[n+1],t.attributes.skinIndex.array[n+2],t.attributes.skinIndex.array[n+3]];for(let s=0;s<4;s++){const a=i[s],o=sge(a,e,r);i[s]=o}t.attributes.skinIndex.array[n]=i[0],t.attributes.skinIndex.array[n+1]=i[1],t.attributes.skinIndex.array[n+2]=i[2],t.attributes.skinIndex.array[n+3]=i[3]}t.attributes.skinIndex.needsUpdate=!0}function sge(t,e,r){const n=e.bones[t],i=r.bones.find(s=>s.name===n.name);return i?r.bones.indexOf(i):-1}async function age(t,e,r){const{scale:n,isVrm0:i,mergeAppliedMorphs:s}=r,a=[],o=[],l=Nf(t,"SkinnedMesh"),A=Vz(e),c=Gz(e).map(d=>d.id);l.forEach(d=>{const f=d.clone();a.push(f),Array.isArray(d.material)?o.push(...d.material):o.push(d.material)});const u=jz(a,n),h=new Lt;return h.name="AvatarRoot",a.forEach(d=>{var f,m;const g=new $t,p={};for(const w in d.geometry.attributes){const b=d.geometry.attributes[w];p[w]=b.clone()}const v={merge:new Set,keep:new Set(A),remove:new Set};if(s){if(!d.morphTargetDictionary||!d.morphTargetInfluences)return;c.forEach(w=>{const b=d.morphTargetDictionary[w];if(b!==void 0&&d.morphTargetInfluences[b]>0)v.merge.add(w);else return v.remove.add(w),null})}if((f=d.userData)!=null&&f.isVRM0)for(let w=0;w<p.position.array.length;w+=3)p.position.array[w]*=-1,p.position.array[w+2]*=-1;const y={attributes:p,morphTargetDictionaries:new Map(l.map(w=>[w,w.morphTargetDictionary||{}])),morphTargetInfluences:new Map(l.map(w=>[w,w.morphTargetInfluences||[]])),index:null,animations:{}},{dest:_,destMorphToMerge:E}=P_({meshes:[d],scale:n,morphTargetsProcess:v},i);if(i)for(let w=0;w<y.attributes.position.array.length;w+=3)y.attributes.position.array[w]*=-1,y.attributes.position.array[w+2]*=-1;y.attributes=_.attributes,y.morphAttributes=_.morphAttributes,g.morphTargetsRelative=!0;const x=d.geometry.index.array,B=zz(d.geometry.index.array),M=[];for(let w=0;w<x.length;w++)M[w]=B.indexOf(x[w]);ige(g,d.skeleton,u);const R=new Uint32Array(M),I=new lt(R,1,!1);g.setIndex(I);for(const w in g.attributes)g.setAttribute(w,nb(g.getAttribute(w),B));for(const w in g.morphAttributes){const b=g.morphAttributes[w];for(let S=0;S<b.length;S++)b[S]=nb(b[S],B)}const L=g.attributes.position.array;for(let w=0;w<L.length;w+=3)if(L[w]*=n,L[w+1]*=n,L[w+2]*=n,s){if(!E.morphTargetInfluences)return;for(let b=0;b<E.morphTargetInfluences.length;b++){const S=(m=E.morphAttributes)==null?void 0:m.position[b];if(S)for(let F=0;F<3;F++)L[w+F]+=S.array[w+F]*E.morphTargetInfluences[b]}}const D=new no(g,d.material);D.name=d.name,D.morphTargetInfluences=_.morphTargetInfluences,D.morphTargetDictionary=_.morphTargetDictionary,D.bind(u),h.add(D),h.add(u.bones[0])}),h.userData.atlasMaterial=o,h}function oge(t){const e=t.parent.name,r=new Y,n=new Y;t.getWorldPosition(r),t.getWorldScale(n),t=t.clone();const i=new je,s=new et;return t.getWorldQuaternion(s),i.makeRotationFromQuaternion(s),t.userData.boneName=e,t.userData.globalPosition=r,t.userData.globalScale=n,t.userData.globalRotationMatrix=i,t}function lge(t,e){const r=new no(e.geometry,e.material),n=t.clone(),i=n.bones.findIndex(d=>d.name===e.userData.boneName),s=e.userData.globalPosition,a=e.userData.globalScale||new Y(1,1,1),o=e.userData.globalRotationMatrix;r.add(n.bones[0]);const l=[],A=[],c=r.geometry.attributes.position.array,u=new Y,h=e.userData.isVRM0?-1:1;for(let d=0;d<c.length;d+=3)u.set(c[d],c[d+1],c[d+2]),u.applyMatrix4(o),c[d]=h*a.x*u.x+s.x,c[d+1]=a.y*u.y+s.y,c[d+2]=h*a.z*u.z+s.z,l.push(i,0,0,0),A.push(1,0,0,0);return r.geometry.setAttribute("skinIndex",new h_(l,4)),r.geometry.setAttribute("skinWeight",new vr(A,4)),r.bind(n),r}async function Age(t,e,r){var n,i;let{transparentColor:s=new He(1,1,1),mToonAtlasSize:a=4096,mToonAtlasSizeTransp:o=4096,stdAtlasSize:l=4096,stdAtlasSizeTransp:A=4096,includeNonTexturedMeshesInAtlas:c=!1,exportMtoonAtlas:u=!1,exportStdAtlas:h=!0,mergeAppliedMorphs:d=!1,isVrm0:f=!1,scale:m=1,twoSidedMaterial:g=!1}=r;const p=Nf(t,["Mesh"]);for(let S=0;S<p.length;S++)p[S]=oge(p[S]);const v=Nf(t,["SkinnedMesh"]),y=[...p,...v];u==!1&&h==!1&&(u=!0);let{stdMesh:_,stdTranspMesh:E,mToonMesh:x,mToonTranspMesh:B,requiresTransparency:M}=fge(y);u==!1&&(_=[..._,...x],E=[...E,...B],B=[],x=[]),h==!1&&(x=[...x,..._],B=[...B,...E],_=[],E=[]);const R=new Lt;R.name="AvatarRoot",R.userData.atlasMaterial=[];const I=jz(y,m),L={standard:{meshArray:_,size:l,isMtoon:!1,transparentMaterial:!1},standardTransparent:{meshArray:E,size:A,isMtoon:!1,transparentMaterial:!0},mToon:{meshArray:x,size:a,isMtoon:!0,transparentMaterial:!1},mToonTransparent:{meshArray:B,size:o,isMtoon:!0,transparentMaterial:!0}},D=Vz(e),w=Gz(e).map(S=>S.id);for(const S in L){const F=L[S],k=F.meshArray;if(k.length>0){const{bakeObjects:Q,material:z}=await $me({transparentColor:s,atlasSize:F.size,meshes:k,mtoon:F.isMtoon,includeNonTexturedMeshesInAtlas:c,transparentMaterial:F.transparentMaterial,transparentTexture:M,twoSidedMaterial:g}),j=Q.map(Ae=>Ae.mesh),T=[],H={merge:new Set,keep:new Set(Object.keys(D)),remove:new Set};j.forEach(Ae=>{if(Ae.type=="Mesh"&&(Ae=lge(I,Ae)),T.push(Ae),d){if(!Ae.morphTargetDictionary||!Ae.morphTargetInfluences)return;w.forEach(he=>{const oe=Ae.morphTargetDictionary[he];if(oe!==void 0&&Ae.morphTargetInfluences[oe]>0)H.merge.add(he);else return H.remove.add(he),null})}const ge=Ae.geometry,ne=ge.index.array,de=zz(Ae.geometry.index.array),Te=[];for(let he=0;he<ne.length;he++)Te[he]=de.indexOf(ne[he]);const re=new Uint32Array(Te),N=new lt(re,1,!1);ge.setIndex(N);for(const he in ge.attributes)ge.setAttribute(he,nb(ge.getAttribute(he),de));for(const he in ge.morphAttributes){const oe=ge.morphAttributes[he];for(let Z=0;Z<oe.length;Z++)oe[Z]=nb(oe[Z],de)}ge.attributes.uv2||(ge.attributes.uv2=ge.attributes.uv),Ae.skeleton!=null&&Ae.geometry.setAttribute("skinIndex",rge(I,Ae));for(let he=0;he<8;he++)delete ge.attributes[`morphTarget${he}`],delete ge.attributes[`morphNormal${he}`]});const{dest:me,destMorphToMerge:ee}=P_({meshes:T,scale:m,morphTargetsProcess:H},f);console.log("destMorphToMerge",ee);const U=new $t;for(let Ae=0;Ae<me.attributes.position.array.length;Ae+=3)me.attributes.position.array[Ae]*=-1,me.attributes.position.array[Ae+2]*=-1;U.attributes=me.attributes,U.morphAttributes=me.morphAttributes,U.morphTargetsRelative=!0,U.setIndex(me.index);const se=U.attributes.position.array;for(let Ae=0;Ae<se.length;Ae+=3)if(se[Ae]*=m,se[Ae+1]*=m,se[Ae+2]*=m,d){if(!ee.morphTargetInfluences)continue;for(let ge=0;ge<ee.morphTargetInfluences.length;ge++){const ne=(n=ee.morphAttributes)==null?void 0:n.position[ge];if(ne)for(let de=0;de<3;de++)se[Ae+de]+=ne.array[Ae+de]*ee.morphTargetInfluences[ge]}}const le=new no(U,z);le.name="CombinedMesh_"+S,le.morphTargetInfluences=me.morphTargetInfluences,le.morphTargetDictionary=me.morphTargetDictionary,le.bind(I),R.add(le),le.userData.bindMorphs={old:D,new:{}},Object.keys(D).forEach(Ae=>{const ge=le.morphTargetDictionary[Ae];ge!==void 0&&(le.userData.bindMorphs.new[Ae]={index:ge,primitives:[le.id]})}),R.userData.atlasMaterial.push(z)}}const b=(i=Object.values(e).find(S=>{var F;return(F=S==null?void 0:S.vrm)==null?void 0:F.expressionManager}))==null?void 0:i.vrm.expressionManager;return R.userData.expressionManagerToClone=b,R.add(I.bones[0]),R}function Gz(t){var e;return((e=Object.values(t).filter(r=>r)[0])==null?void 0:e.traitInfo.manifestData.getAllBlendShapeTraits())||[]}function Vz(t){const e=Object.values(t).map(i=>i==null?void 0:i.vrm).filter(i=>!!i).map(i=>{var s;return(s=i.expressionManager)==null?void 0:s.expressionMap}),r={};let n=[];for(const i of e)if(i)for(const s of Object.values(i)){if(n.includes(s.expressionName))continue;n.push(s.expressionName);const a=s._binds;!a||a.length==0||a.forEach(o=>{function l(c){const u=o.primitives.map(h=>h.morphTargetDictionary).filter(h=>!!h).find(h=>Object.values(h).includes(c));if(u)return Object.entries(u).find(([,h])=>h==c)}const A=l(o.index);A&&(r[A[0]]={index:A[1],primitives:o.primitives.map(c=>c.id)})})}return r}function UO({meshes:t,sourceMorphTargetDictionaries:e,destMorphTargetDictionary:r}){const n=[];return Object.entries(r).map(([i,s])=>{const a=t.find(l=>e.get(l).hasOwnProperty(i)),o=a.morphTargetDictionary[i];n[s]=a.morphTargetInfluences[o]}),n}function cge({sourceAttributes:t}){const e=new Set,r=Array.from(t.values());r.forEach(i=>{Object.keys(i).forEach(s=>e.add(s))});const n={};return Array.from(e.keys()).map(i=>{n[i]=K8(r.map(s=>s[i]).flat().filter(s=>s!==void 0))}),n}function FO(t){const{sourceMorphTargetDictionaries:e,morphTargetsProcess:r}=t,n=new Set;Array.from(e.values()).forEach(s=>{Object.keys(s).forEach(a=>{if(!r)n.add(a);else{if(r.remove.has(a)||r.merge.has(a))return;r.keep.has(a)&&n.add(a)}})});const i={};return Array.from(n.keys()).map((s,a)=>{i[s]=a}),i}function kO({meshes:t,sourceMorphTargetDictionaries:e,sourceMorphAttributes:r,destMorphTargetDictionary:n,scale:i}){const s=new Set;Array.from(r.values()).forEach(A=>{Object.keys(A).forEach(c=>s.add(c))});const a=Array.from(s),o={};a.forEach(A=>{o[A]=[],Object.entries(n).forEach(([c,u])=>{o[A][u]=[],t.forEach(h=>{let d;const f=e.get(h);if(f.hasOwnProperty(c)&&h.geometry.morphAttributes[A]){const m=f[c];d=h.geometry.morphAttributes[A][m]}else{const m=h.geometry.attributes[A],g=new m.array.constructor(new Array(m.array.length).fill(0));d=new lt(g,m.itemSize,m.normalized)}o[A][u].push(d)})})});const l={};return a.forEach(A=>{l[A]=[];for(let c=0;c<Object.entries(n).length;c++){l[A][c]=K8(o[A][c]);const u=l[A][c].array;for(let h=0;h<u.length;h+=3)u[h]*=i,u[h+1]*=i,u[h+2]*=i}}),l}function uge({meshes:t}){var e=0,r=[];return t.forEach(n=>{const i=n.geometry.index;for(var s=0;s<i.count;++s)r.push(i.getX(s)+e);e+=n.geometry.attributes.position.count}),r}function P_({meshes:t,scale:e,morphTargetsProcess:r},n=!1){let i=0;t.forEach(h=>{var d;if(i+=h.geometry.attributes.uv.count,(d=h.userData)!=null&&d.isVRM0)for(let f=0;f<h.geometry.attributes.position.array.length;f+=3)h.geometry.attributes.position.array[f]*=-1,h.geometry.attributes.position.array[f+2]*=-1});const s={meshes:t,attributes:new Map(t.map(h=>[h,h.geometry.attributes])),morphAttributes:new Map(t.map(h=>[h,h.geometry.morphAttributes])),morphTargetDictionaries:new Map(t.map(h=>[h,h.morphTargetDictionary||{}])),morphTargetInfluences:new Map(t.map(h=>[h,h.morphTargetInfluences||[]]))},a={attributes:null,morphTargetDictionary:null,morphAttributes:null,morphTargetInfluences:null,index:null,animations:{}};a.attributes=cge({sourceAttributes:s.attributes});const o=FO({sourceMorphTargetDictionaries:s.morphTargetDictionaries,morphTargetsProcess:{remove:(r==null?void 0:r.remove)||new Set,keep:(r==null?void 0:r.keep)||new Set,merge:(r==null?void 0:r.merge)||new Set}});a.morphTargetDictionary=o,a.morphAttributes=kO({meshes:t,sourceMorphAttributes:s.morphAttributes,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:o,scale:e}),a.morphTargetInfluences=UO({meshes:t,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:o}),a.index=uge({meshes:t});const l={morphAttributes:{},morphTargetDictionaries:{},morphTargetInfluences:null};let A=new Set((r==null?void 0:r.keep)||[]);r==null||r.merge.forEach(h=>{A.add(h)});const c=FO({sourceMorphTargetDictionaries:s.morphTargetDictionaries,morphTargetsProcess:{remove:new Set,keep:A,merge:new Set}});l.morphAttributes=kO({meshes:t,sourceMorphAttributes:s.morphAttributes,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:c,scale:e});const u=UO({meshes:t,sourceMorphTargetDictionaries:s.morphTargetDictionaries,destMorphTargetDictionary:c});return l.morphTargetInfluences=u,l.morphTargetDictionaries=c,a.animations={},{source:s,dest:a,destMorphToMerge:l}}function At(t){return t==null?[]:Array.isArray(t)?t:[t]}function hge(t,e){let r=t.children.slice();r.forEach(n=>t.remove(n)),t.add(e),r.forEach(n=>t.add(n))}async function dge(t,e){const r=await new Uc().load(e);r.colorSpace=Ut,r.flipY=!1,t.traverse(n=>{if(n instanceof Ar){const i=Array.isArray(n.material)?n.material:[n.material];for(let s=0;s<i.length;s++)i[s]instanceof fn?i[s].name.includes("(Outline)")||(console.log(i[s].name),i[s].uniforms.map.value=r,i[s].uniforms.shadeMultiplyTexture.value=r):(i[s].map=r,i[s].emissiveMap=r),i[s].needsUpdate=!0}})}function Vl(t){return t.replace(/^.*[\\/]/,"").split(".").slice(0,-1).join(".")}const JB=t=>{const e=[];for(const r in t){const n=t[r].vrm;if(n){const i=n.data.cullingLayer;i>=0&&n.data.cullingMeshes.map(s=>{s.userData.cullLayer=i,s.userData.cullDistance=n.data.cullingDistance,s.userData.maxCullDistance=n.data.maxCullingDistance,e.push(s)})}}Kme(e)};function fge(t){const e=[],r=[],n=[],i=[];let s=!1;return t.forEach(a=>{var o;const l=At(a.material)[0];l.type=="ShaderMaterial"?l.transparent==!0?(i.push(a),s=!0):(n.push(a),((o=l.uniforms.alphaTest)==null?void 0:o.value)!=0&&(s=!0)):l.transparent==!0?(r.push(a),s=!0):(e.push(a),l.alphaTest!=0&&(s=!0))}),{stdMesh:e,stdTranspMesh:r,mToonMesh:n,mToonTranspMesh:i,requiresTransparency:s}}function pge(t){const e=[],r=[],n=[],i=[],s=[],a=[];return t.forEach(o=>{At(o.material).forEach(l=>{l.type=="ShaderMaterial"?l.transparent==!0?a.push(l):l.uniforms.alphaTest.value!=0?s.push(l):i.push(l):l.transparent==!0?n.push(l):l.alphaTest!=0?r.push(l):e.push(l)})}),{stdMats:e,stdCutoutpMats:r,stdTranspMats:n,mToonMats:i,mToonCutoutMats:s,mToonTranspMats:a}}function LO(t,e){t.data==null?t.data=e:t.data={...t.data,...e}}function mge(t,e){if(t.data!=null)return t.data[e]}function gge(t){const e=mge(t,"cullingMeshes");e&&(e.forEach(r=>{Qz(r)}),t.data.cullingMeshes=null)}function kr(t){switch(t){case 1:return 128;case 2:return 256;case 3:return 512;case 4:return 1024;case 5:return 2048;case 6:return 4096;case 7:return 8192;case 8:return 16384;default:return 4096}}function vge(t){const e=t.scene;gge(t),e.traverse(r=>{r.material&&gS(r.material),r.geometry&&(Qz(r),r.geometry.dispose(),r.geometry.disposeBoundsTree())}),e.parent&&e.parent.remove(e),B0.deepDispose(e),t.expressionManager&&t.expressionManager.expressions.forEach(r=>{r._binds&&r._binds.forEach(n=>{n.primitives&&n.primitives.forEach(i=>{i.geometry.dispose(),i.material&&gS(i.material)})})});for(const r in t)t[r]=null}const gS=t=>{var e,r,n,i,s,a;if(t.length)for(let o=0;o<t.length;++o)gS(t[o]);else(e=t.map)!=null&&e.dispose&&t.map.dispose(),(r=t.normalMap)!=null&&r.dispose&&t.normalMap.dispose(),(n=t.ormMap)!=null&&n.dispose&&t.ormMap.dispose(),(i=t.aoMap)!=null&&i.dispose&&t.aoMap.dispose(),(s=t.roughnessMap)!=null&&s.dispose&&t.roughnessMap.dispose(),(a=t.metalnessMap)!=null&&a.dispose&&t.metalnessMap.dispose(),t.dispose()},AR=t=>{let e,r,n=0;return Array.isArray(t)?(e=t[0]||0,r=t[1]||0,n=t[2]||0):(typeof t=="string"||t instanceof String)&&t.split("-").forEach(i=>{switch(i=i.toLowerCase(),i){case"left":e=-1;break;case"right":e=1;break;case"bottom":case"down":r=-1;break;case"top":case"up":r=1;break;case"back":case"backward":n=-1;break;case"front":case"forward":n=1;break;default:console.warn("unkown cameraPosition name: "+i+" in: "+t+". Please use left, right, bottom, top, back or front");break}}),new Y(e,r,n)},Wz=()=>{const t=new Date().getTime(),e=Math.random().toString(36).substr(2,9);return t+"-"+e},yge=t=>{var e,r,n,i,s,a,o,l,A,c,u;const h=t.humanoid.humanBones;h.hips.node.parent.name="rootBone",h.upperChest==null&&h.neck.node.parent!=h.chest&&(h.neck.node.parent!=h.chest.node?h.upperChest={node:h.neck.node.parent}:h.upperChest!=null&&(h.upperChest={node:h.neck.node.parent},h.chest={node:h.neck.node.parent.parent})),h.leftShoulder==null&&(h.leftUpperArm.node.parent!=((e=h.chest)==null?void 0:e.node)&&h.leftUpperArm.node.parent!=((r=h.upperChest)==null?void 0:r.node)&&h.leftUpperArm.node.parent!=((n=h.spine)==null?void 0:n.node)&&h.leftUpperArm.node.parent!=((i=h.neck)==null?void 0:i.node)&&h.leftUpperArm.node.parent!=((s=h.head)==null?void 0:s.node),h.leftShoulder={node:h.leftUpperArm.node.parent}),h.rightShoulder==null&&(h.rightUpperArm.node.parent!=((a=h.chest)==null?void 0:a.node)&&h.rightUpperArm.node.parent!=((o=h.upperChest)==null?void 0:o.node)&&h.rightUpperArm.node.parent!=((l=h.spine)==null?void 0:l.node)&&h.rightUpperArm.node.parent!=((A=h.neck)==null?void 0:A.node)&&h.rightUpperArm.node.parent!=((c=h.head)==null?void 0:c.node),h.rightShoulder={node:h.rightUpperArm.node.parent});for(let d in qg)d=d.charAt(0).toLowerCase()+d.slice(1),(u=h[d])!=null&&u.node&&(h[d].node.name=d)};function Kz({candidates:t,predicate:e}){if(!t.length)return null;const r=t.shift();return e(r)?r:(t=t.concat(r.children),Kz({candidates:t,predicate:e}))}function Yz(t,e){return Kz({candidates:[t],predicate:r=>r.name===e})}function Xz({candidates:t,predicate:e,results:r=[]}){if(!t.length)return r;const n=t.shift();return e(n)&&r.push(n),t=t.concat(n.children),Xz({candidates:t,predicate:e,results:r})}function Nf(t,e){return Xz({candidates:[t],predicate:r=>At(e).includes(r.type)})}function wge(t,e){if(!t.morphTargetDictionary)return!1;for(const r of Object.keys(t.morphTargetDictionary))if(e[r])return!0;return!1}function cR({width:t,height:e,transparent:r}){const n=document.createElement("canvas");n.width=t,n.height=e;const i=n.getContext("2d");return i.fillStyle="white",r&&(i.globalAlpha=0),i.fillRect(0,0,n.width,n.height),i.globalAlpha=1,i}const bge={mixamorigHips:"hips",mixamorigSpine:"spine",mixamorigSpine1:"chest",mixamorigSpine2:"upperChest",mixamorigNeck:"neck",mixamorigHead:"head",mixamorigLeftShoulder:"leftShoulder",mixamorigLeftArm:"leftUpperArm",mixamorigLeftForeArm:"leftLowerArm",mixamorigLeftHand:"leftHand",mixamorigLeftHandThumb1:"leftThumbMetacarpal",mixamorigLeftHandThumb2:"leftThumbProximal",mixamorigLeftHandThumb3:"leftThumbDistal",mixamorigLeftHandIndex1:"leftIndexProximal",mixamorigLeftHandIndex2:"leftIndexIntermediate",mixamorigLeftHandIndex3:"leftIndexDistal",mixamorigLeftHandMiddle1:"leftMiddleProximal",mixamorigLeftHandMiddle2:"leftMiddleIntermediate",mixamorigLeftHandMiddle3:"leftMiddleDistal",mixamorigLeftHandRing1:"leftRingProximal",mixamorigLeftHandRing2:"leftRingIntermediate",mixamorigLeftHandRing3:"leftRingDistal",mixamorigLeftHandPinky1:"leftLittleProximal",mixamorigLeftHandPinky2:"leftLittleIntermediate",mixamorigLeftHandPinky3:"leftLittleDistal",mixamorigRightShoulder:"rightShoulder",mixamorigRightArm:"rightUpperArm",mixamorigRightForeArm:"rightLowerArm",mixamorigRightHand:"rightHand",mixamorigRightHandPinky1:"rightLittleProximal",mixamorigRightHandPinky2:"rightLittleIntermediate",mixamorigRightHandPinky3:"rightLittleDistal",mixamorigRightHandRing1:"rightRingProximal",mixamorigRightHandRing2:"rightRingIntermediate",mixamorigRightHandRing3:"rightRingDistal",mixamorigRightHandMiddle1:"rightMiddleProximal",mixamorigRightHandMiddle2:"rightMiddleIntermediate",mixamorigRightHandMiddle3:"rightMiddleDistal",mixamorigRightHandIndex1:"rightIndexProximal",mixamorigRightHandIndex2:"rightIndexIntermediate",mixamorigRightHandIndex3:"rightIndexDistal",mixamorigRightHandThumb1:"rightThumbMetacarpal",mixamorigRightHandThumb2:"rightThumbProximal",mixamorigRightHandThumb3:"rightThumbDistal",mixamorigLeftUpLeg:"leftUpperLeg",mixamorigLeftLeg:"leftLowerLeg",mixamorigLeftFoot:"leftFoot",mixamorigLeftToeBase:"leftToes",mixamorigRightUpLeg:"rightUpperLeg",mixamorigRightLeg:"rightLowerLeg",mixamorigRightFoot:"rightFoot",mixamorigRightToeBase:"rightToes"};function Zz(t,e,r){var n;const i=Ou.findByName(t,"mixamo.com");if(i==null)return null;const s=[],a=new et,o=new et,l=new et,A=new Y,c=e.getObjectByName("mixamorigHips").position.y,u=(n=r.humanoid)==null?void 0:n.getNormalizedBoneNode("hips").getWorldPosition(A).y,h=r.scene.getWorldPosition(A).y,d=Math.abs(u-h)/c;return i.tracks.forEach(f=>{const m=f.clone(),g=m.name.split("."),p=g[0],v=bge[p],y=e.getObjectByName(p);if(v!=null){const _=g[1];if(y.getWorldQuaternion(a).invert(),y.parent.getWorldQuaternion(o),m instanceof el){for(let E=0;E<m.values.length;E+=4){const x=m.values.slice(E,E+4);l.fromArray(x),l.premultiply(o).multiply(a),l.toArray(x),x.forEach((B,M)=>{m.values[M+E]=B})}s.push(new el(`${v}.${_}`,m.times,m.values.map((E,x)=>{var B;return((B=r.meta)==null?void 0:B.metaVersion)==="0"&&x%2===0?-E:E})))}else if(m instanceof rA){const E=m.values.map((x,B)=>{var M;return(((M=r.meta)==null?void 0:M.metaVersion)==="0"&&B%3!==1?-x:x)*d});s.push(new rA(`${v}.${_}`,m.times,E))}}}),new Ou("vrmAnimation",i.duration,s)}const _ge=new Goe,xge=new Y8,qB=.2,Ege=t=>Math.floor(Math.random()*t);class PO{constructor(e,r,n,i,s,a,o){var l,A,c,u;this.mixer=new xae(r),this.actions=[],this.to=null,this.from=null,this.vrm=n,this.animationManager=e,this.mixamoModel=null,this.fadeOutActions=null,this.newAnimationWeight=1,this.neckBone=(A=(l=n==null?void 0:n.humanoid)==null?void 0:l.humanBones)==null?void 0:A.neck,this.spineBone=(u=(c=n==null?void 0:n.humanoid)==null?void 0:c.humanBones)==null?void 0:u.spine,this.timeScale=1,i&&(this.setAnimations(i,null,null,o),this.to=this.actions[s],a!=-1&&(this.from=this.actions[a],this.from.reset(),this.from.time=e.getFromActionTime(),this.from.play(),this.to.weight=e.getWeightIn(),this.from.weight=e.getWeightOut()),this.actions[s].reset(),this.actions[s].time=e.getToActionTime(),this.actions[s].play())}setTimeScale(e){this.timeScale=e,this.actions.forEach(r=>{r.timeScale=e})}setMouseLookEnabled(e){this.setAnimations(this.animations,this.mixamoModel,e)}setAnimations(e,r=null,n=null,i=!1){if(n=n??this.animationManager.mouseLookEnabled,this.animations=e,r!=null){if(this.vrm!=null){const s=Zz(e,r,this.vrm);s&&(e=[s],this.mixamoModel=r)}}else{const s=[];e.forEach(a=>{s.push(a.clone())}),e=s}if(n&&e[0].tracks.map((s,a)=>{(s.name==="neck.quaternion"||s.name==="spine.quaternion")&&e[0].tracks.splice(a,1)}),i){this.actions.forEach(s=>{s.weight=0,s.stop()}),this.actions=[],this.newAnimationWeight=1;for(let s=0;s<e.length;s++){const a=this.mixer.clipAction(e[s]);a.timeScale=this.timeScale,this.actions.push(a)}this.actions[0].weight=1,this.actions[0].play()}else{this.fadeOutActions=this.actions,this.actions=[],this.newAnimationWeight=0;for(let s=0;s<e.length;s++){const a=this.mixer.clipAction(e[s]);a.timeScale=this.timeScale,this.actions.push(a)}this.actions[0].weight=0,this.actions[0].play()}}update(e,r){this.fadeOutActions!=null&&(this.newAnimationWeight+=1/5,this.fadeOutActions.forEach(n=>{n.weight=1-this.newAnimationWeight}),this.newAnimationWeight>=1&&(this.newAnimationWeight=1,this.fadeOutActions.forEach(n=>{n.weight=0,n.stop()}),this.fadeOutActions=null),this.actions.forEach(n=>{n.weight=this.newAnimationWeight})),this.from!=null&&(this.from.weight=r),this.to!=null&&(this.to.weight=e),this.mixer.update(1/30)}reset(){this.mixer.setTime(0),this.to.paused=!0}resume(){this.to.paused=!1}setTime(e){this.mixer.setTime(e)}getTime(){return this.mixer.time}dispose(){this.animationManager.disposeAnimation(this)}}class Bge{constructor(){this.animationPaths=[],this.defaultAnimations=[],this.lastAnimID=null,this.mainControl=null,this.animationControl=null,this.animations=null,this.paused=!1,this.scale=1,this.curLoadAnim=0,this.currentAnimationName="",this.weightIn=NaN,this.weightOut=NaN,this.lastAnimID=-1,this.curAnimID=0,this.animationControls=[],this.started=!1,this.mouseLookEnabled=!1,this.mixamoModel=null,this.mixamoAnimations=null,this.currentClip=null,setInterval(()=>{this.update()},1e3/30)}enableMouseLook(e){this.mouseLookEnabled=e,this.animationControls.forEach(r=>{r.setMouseLookEnabled(e)})}setScale(e){this.scale=e}async loadAnimation(e,r,n=0,i=!0,s="",a=""){const o=s+(s!=""?"/":"")+At(e)[0];a=a==""?Vl(o):a,this.currentAnimationName=a;const l=await(i?_ge:xge).loadAsync(o);l.scale.set(this.scale,this.scale,this.scale),this._scaleOffsetHips(l.animations);const A=Ou.findByName(l.animations,"mixamo.com");A!=null?(this.mixamoModel=l.clone(),this.mixamoAnimations=l.animations,this.currentClip=A):(this.mixamoModel=null,this.animations=l.animations,this.currentClip=l.animations[0]),this.mainControl==null&&(this.curAnimID=0,this.lastAnimID=-1,this.mainControl=new PO(this,l,null,l.animations,this.curAnimID,this.lastAnimID,r),this.animationControls.push(this.mainControl)),this.animationControls.forEach(c=>{c.setAnimations(l.animations,this.mixamoModel,this.mouseLookEnabled,r)}),this.setTime(n),r?this.pause():this.play()}getCurrentClip(){return this.currentClip}getCurrentClipDuration(){return this.currentClip?this.currentClip.duration:0}getCurrentAnimationName(){return this.currentAnimationName}clearCurrentAnimations(){this.animationPaths=this.defaultAnimations,this.animationControls=[],this.mainControl=null}storeAnimationPaths(e,r,n=!0){const i=At(e);n?this.animationPaths=[...this.defaultAnimations,...i.map(s=>`${r}/${s}`)]:this.animationPaths=i.map(s=>r!=""?`${r}/${s}`:s)}storeDefaultAnimationPaths(e,r){const n=At(e);this.defaultAnimations=n.map(i=>r!=""?`${r}/${i}`:i),this.animationPaths=this.defaultAnimations}loadNextAnimation(){this.curLoadAnim==this.animationPaths.length-1?this.curLoadAnim=0:this.curLoadAnim++,this.loadAnimation(this.animationPaths[this.curLoadAnim])}loadPreviousAnimation(){this.curLoadAnim==0?this.curLoadAnim=this.animationPaths.length-1:this.curLoadAnim--,this.loadAnimation(this.animationPaths[this.curLoadAnim])}enableScreenshot(){this.animationControls.forEach(e=>{e.reset()})}disableScreenshot(){this.animationControls.forEach(e=>{e.resume()})}_scaleOffsetHips(e){e.forEach(r=>{for(let n=0;n<r.tracks.length;n++){const i=r.tracks[n];if(i.name.includes(".position"))for(let s=0;s<i.values.length/3;s++){const a=s*3;i.values[a]/=this.scale,i.values[a+1]/=this.scale,i.values[a+2]/=this.scale}}})}addVRM(e){if(e==null){console.error("Non Existing VRM was provided.");return}let r=null;this.mixamoModel!=null?(r=[Zz(this.mixamoAnimations,this.mixamoModel.clone(),e)],this.animations==null&&(this.animations=r)):r=this.animations;const n=new PO(this,e.scene,e,r,this.curAnimID,this.lastAnimID,this.isPaused());this.animationControls.push(n),this.started===!1&&r&&(this.started=!0,this.animRandomizer(r[this.curAnimID].duration)),this.update(!0)}removeVRM(e){const r=this.animationControls.findIndex(n=>n.vrm===e);r!==-1&&this.animationControls.splice(r,1)[0].dispose()}getFromActionTime(){return this.mainControl.actions[this.lastAnimID].time}getToActionTime(){return this.mainControl?this.mainControl.actions[this.curAnimID].time:.1}getWeightIn(){return this.weightIn}getWeightOut(){return this.weightOut}disposeAnimation(e){if(e!=null){const r=this.animationControls.indexOf(e);r!=-1&&this.animationControls.splice(r,1)}}dispose(){this.animationControls.forEach(e=>{e.dispose()})}animRandomizer(e){setTimeout(()=>{this.lastAnimID=this.curAnimID,this.curAnimID=Ege(this.animations.length),this.curAnimID!=this.lastAnimID&&this.animationControls.forEach(r=>{r.from=r.actions[this.lastAnimID],r.to=r.actions[this.curAnimID],this.weightIn=0,this.weightOut=1,r.to.play(),r.to.reset()}),this.animRandomizer(this.animations[this.curAnimID].duration-qB)},e*1e3)}pause(){this.paused=!0}play(){this.paused=!1}isPaused(){return this.paused}setTime(e){this.mainControl&&this.animationControls.forEach(r=>{r.setTime(e)})}setFrame(e){this.setTime(e*30)}setSpeed(e){this.mainControl&&this.animationControls.forEach(r=>{r.setTimeScale(e)})}update(e=!1){(this.mainControl&&!this.paused||e)&&(this.animationControls.forEach(r=>{r.update(this.weightIn,this.weightOut)}),this.weightIn<1?this.weightIn+=1/(30*qB):this.weightIn=1,this.weightOut>0?this.weightOut-=1/(30*qB):this.weightOut=0)}}const Mge={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class $f{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Tge=new v0(-1,1,1,-1,0,1);class Cge extends $t{constructor(){super(),this.setAttribute("position",new vr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new vr([0,2,0,0,2,0],2))}}const Sge=new Cge;class uR{constructor(e){this._mesh=new Ar(Sge,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Tge)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Ige extends $f{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof fn?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=LI.clone(e.uniforms),this.material=new fn({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new uR(this.material)}render(e,r,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class OO extends $f{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,n){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let a,o;this.inverse?(a=0,o=1):(a=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,a,4294967295),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class Rge extends $f{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class Uge{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const n=e.getSize(new Ke);this._width=n.width,this._height=n.height,r=new $o(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:No}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Ige(Mge),this.copyPass.material.blending=zl,this.clock=new w_}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let n=!1;for(let i=0,s=this.passes.length;i<s;i++){const a=this.passes[i];if(a.enabled!==!1){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}OO!==void 0&&(a instanceof OO?n=!0:a instanceof Rge&&(n=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new Ke);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class Fge extends $f{constructor(e,r,n=null,i=null,s=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new He}render(e,r,n){const i=e.autoClear;e.autoClear=!1;let s,a;this.overrideMaterial!==null&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=a),e.autoClear=i}}class kge extends $f{constructor(e,r,n){super(),this.resolution=e,this.fsQuad=new uR(this.material()),this.scene=r,this.camera=n,this.rgbRenderTarget=Py(e,kn,!0),this.normalRenderTarget=Py(e,kn,!1),this.normalMaterial=new Xse}setResolution(e){this.rgbRenderTarget=Py(e,kn,!0),this.normalRenderTarget=Py(e,kn,!1)}render(e,r){e.setRenderTarget(this.rgbRenderTarget),e.render(this.scene,this.camera);const n=this.scene.overrideMaterial;e.setRenderTarget(this.normalRenderTarget),this.scene.overrideMaterial=this.normalMaterial,e.render(this.scene,this.camera),this.scene.overrideMaterial=n;const i=this.fsQuad.material.uniforms;i.tDiffuse.value=this.rgbRenderTarget.texture,i.tDepth.value=this.rgbRenderTarget.depthTexture,i.tNormal.value=this.normalRenderTarget.texture,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(r),this.clear&&e.clear()),this.fsQuad.render(e)}material(){return new fn({uniforms:{tDiffuse:{value:null},tDepth:{value:null},tNormal:{value:null},resolution:{value:new kt(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform sampler2D tDepth;
                uniform sampler2D tNormal;
                uniform vec4 resolution;
                varying vec2 vUv;

                float getDepth(int x, int y) {
                    return texture2D( tDepth, vUv + vec2(x, y) * resolution.zw ).r;
                }

                vec3 getNormal(int x, int y) {
                    return texture2D( tNormal, vUv + vec2(x, y) * resolution.zw ).rgb * 2.0 - 1.0;
                }

                float neighborNormalEdgeIndicator(int x, int y, float depth, vec3 normal) {
                    float depthDiff = getDepth(x, y) - depth;
                    vec3 normalEdgeBias = vec3(1., 1., 1.);
                    float normalDiff = dot(normal - getNormal(x, y), normalEdgeBias);
                    float normalIndicator = clamp(smoothstep(-.01, .01, normalDiff), 0.0, 1.0);
                    float depthIndicator = clamp(sign(depthDiff * .25 + .0025), 0.0, 1.0);
                    return distance(normal, getNormal(x, y)) * depthIndicator * normalIndicator;
                }

                float depthEdgeIndicator() {
                    float depth = getDepth(0, 0);
                    vec3 normal = getNormal(0, 0);
                    float diff = 0.0;
                    diff += clamp(getDepth(1, 0) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(-1, 0) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(0, 1) - depth, 0.0, 1.0);
                    diff += clamp(getDepth(0, -1) - depth, 0.0, 1.0);
                    return floor(smoothstep(0.01, 0.02, diff) * 2.) / 2.;
                }

                float normalEdgeIndicator() {
                    float depth = getDepth(0, 0);
                    vec3 normal = getNormal(0, 0);
                    float indicator = 0.0;
                    indicator += neighborNormalEdgeIndicator(0, -1, depth, normal);
                    indicator += neighborNormalEdgeIndicator(0, 1, depth, normal);
                    indicator += neighborNormalEdgeIndicator(-1, 0, depth, normal);
                    indicator += neighborNormalEdgeIndicator(1, 0, depth, normal);
                    return step(0.1, indicator);
                }

                float lum(vec4 color) {
                    vec4 weights = vec4(.2126, .7152, .0722, .0);
                    return dot(color, weights);
                }

                float smoothSign(float x, float radius) {
                    return smoothstep(-radius, radius, x) * 2.0 - 1.0;
                }

                void main() {
                    vec4 texel = texture2D( tDiffuse, vUv );
                    float tLum = lum(texel);
                    float normalEdgeCoefficient = .3;
                    float depthEdgeCoefficient = .4;
                    float dei = depthEdgeIndicator();
                    float nei = normalEdgeIndicator();
                    float coefficient = dei > 0.0 ? (1.0 - depthEdgeCoefficient * dei) : (1.0 + normalEdgeCoefficient * nei);
                    gl_FragColor = texel * coefficient;
                }
                `})}}function Py(t,e,r){const n=new $o(t.x,t.y,r?{depthTexture:new OI(t.x,t.y),depthBuffer:!0}:void 0);return n.texture.format=e,n.texture.minFilter=Vn,n.texture.magFilter=Vn,n.texture.generateMipmaps=!1,n.stencilBuffer=!1,n}class Lge extends $f{constructor(e){super(),this.resolution=e,this.fsQuad=new uR(this.material())}setResolution(e){this.resolution=e}render(e,r,n){const i=this.fsQuad.material.uniforms;i.tDiffuse.value=n.texture,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(r),this.clear&&e.clear()),this.fsQuad.render(e)}material(){return new fn({uniforms:{tDiffuse:{value:null},resolution:{value:new kt(this.resolution.x,this.resolution.y,1/this.resolution.x,1/this.resolution.y)}},vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                uniform sampler2D tDiffuse;
                uniform vec4 resolution;
                varying vec2 vUv;
                void main() {
                    vec2 iuv = (floor(resolution.xy * vUv) + .5) * resolution.zw;
                    vec4 texel = texture2D( tDiffuse, iuv );
                    texel.rgb = pow(texel.rgb, vec3(1.0 / 2.2));
                    gl_FragColor = texel;
                }
                `})}}const nm=new Y;class Pge{constructor(e){De(this,"camera",null),De(this,"frameOffset",{min:.2,max:.2}),De(this,"boneOffsets"),De(this,"cameraDir",new Y),De(this,"frameTarget",null),this.camera=e||new In,this.boneOffsets={head:null,neck:null,chest:null,hips:null,spine:null,leftUpperLeg:null,leftLowerLeg:null,leftFoot:null,rightUpperLeg:null,rightLowerLeg:null,rightFoot:null}}setupCamera(e,r,n=30){this.camera.position.copy(e),this.camera.lookAt(r),this.camera.fov=n}async calculateBoneOffsets(e,r){for(const n in this.boneOffsets){const i=await this._getMinMaxOffsetByBone(e,n,r);console.log("result",i),this.boneOffsets[n]=i}}setFrameTarget(e){this.frameTarget=e}frameCloseupShot(){this.frameShot("head","head")}frameMediumShot(){this.frameShot("chest","head")}frameCowboyShot(){this.frameShot("hips","head")}frameFullShot(){this.frameShot("leftFoot","head")}frameShot(e,r,n=null,i=!1,s=!0){if(!this.frameTarget){console.error("No target object provided, Call setFrameTarget() first;");return}const a=this._getBoneWorldPositionWithOffset(this.frameTarget,e,i),o=this._getBoneWorldPositionWithOffset(this.frameTarget,r,s);a.y-=this.frameOffset.max,o.y+=this.frameOffset.min,n=n||new Y(0,0,0),this.positionCameraBetweenPoints(a,o,n)}setBottomFrameOffset(e){this.frameOffset.min=e}setTopFrameOffset(e){this.frameOffset.max=e}_getBoneWorldPositionWithOffset(e,r,n){const i=this._getFirstBoneWithName(r,e);if(!i||!this.boneOffsets[r])return console.error(`Bone with name '${r}' not found in the model.`),new Y;const s=new Y;i.getWorldPosition(s);const a=n?this.boneOffsets[r].max:this.boneOffsets[r].min;return s.y+=a.y,s}_getFirstBoneWithName(e,r=void 0){let n=null;const i=r||this.frameTarget;if(!i){console.error("_getFirstBoneWithName: No target object provided, Call setFrameTarget() first or provide a targetObject parameter;");return}return i.traverse(s=>{if(s instanceof no){if(!s.geometry){console.error("Invalid skinned mesh found in children.");return}const a=s.skeleton.bones.findIndex(o=>o.name===e);if(a!==-1){n=s.skeleton.bones[a];return}}}),n}async _getMinMaxOffsetByBone(e,r,n){return new Promise(async(i,s)=>{(!e||!e.traverse)&&(console.error("Invalid parent object provided."),s(null));const a=new Y(1/0,1/0,1/0),o=new Y(-1/0,-1/0,-1/0),l=[];e.traverse(async c=>{c instanceof no&&(l.push(this._saveBonesPos(c.skeleton)),c.skeleton.pose())});let A=0;await(c=>new Promise(u=>setTimeout(u,c)))(10),e.traverse(c=>{if(c instanceof no){if(!c.geometry){console.error("Invalid skinned mesh found in children.");return}const u=c.skeleton.bones.findIndex(m=>m.name===r);if(u===-1){console.error(`Bone with name '${r}' not found in one of the skinned meshes.`);return}const h=c.geometry.getAttribute("position"),d=c.geometry.getAttribute("skinWeight"),f=c.geometry.getAttribute("skinIndex");for(let m=0;m<h.count;m++){const g=new Y().fromBufferAttribute(h,m).applyMatrix4(c.matrixWorld);if(f.getX(m)===u&&d.getX(m)>=n){const p=c.skeleton.bones[u],v=new Y().setFromMatrixPosition(p.matrixWorld),y=g.clone().sub(v);a.min(y),o.max(y)}}this._restoreSavedPose(l[A],c.skeleton),A++}}),i({min:a,max:o})})}_saveBonesPos(e){let r=[];return e.bones.forEach(n=>{r.push({position:n.position.clone(),rotation:n.rotation.clone(),scale:n.scale.clone()})}),r}_restoreSavedPose(e,r){e&&r.bones.forEach((n,i)=>{n.position.copy(e[i].position),n.rotation.copy(e[i].rotation),n.scale.copy(e[i].scale)})}positionCameraBetweenPoints(e,r,n,i=30){const s=new Dr;s.expandByPoint(e),s.expandByPoint(r),this.camera.fov=i;const a=this.camera.fov*(Math.PI/180),o=s.getSize(new Y).length()/(2*Math.tan(a/2));s.getCenter(nm),this.camera.position.copy(nm),n.y*=.5,this.camera.lookAt(nm.clone().sub(n));const l=new Y;this.camera.getWorldDirection(l),this.camera.position.addScaledVector(l,-o),this.camera.updateProjectionMatrix()}setCamera(e,r,n=30){this.camera.position.copy(e),this.camera.fov=n,nm.set(0,0,-1),this.cameraDir=nm.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),this.camera.position.x-=this.cameraDir.x*r,this.camera.position.z-=this.cameraDir.z*r}setCameraFrameWithName(e,r){switch(e.toLowerCase()){case"fullshot":this.frameShot("leftFoot","head",r);break;case"cowboyshot":this.frameShot("hips","head",r);break;case"mediumshot":this.frameShot("chest","head",r);break;case"mediumcloseup":case"mediumcloseupshot":this.frameShot("chest","head",r,!0);break;case"closeup":case"closeupshot":this.frameShot("head","head",r);break;default:console.warn("unkown cameraFrame: "+e+". Please use fullShot, cowboyShot, mediumShot, mediumCloseup or closeup"),this.frameShot("leftFoot","head",r);break}}copyCamera(e){this.camera.position.copy(e.position),this.camera.quaternion.copy(e.quaternion),"fov"in e&&(this.camera.fov=e.fov)}}const ib=4096;class Oge{constructor(e,r,n){const i=new y0({preserveDrawingBuffer:!0,antialias:!1,alpha:!0});this.pixelSize=n,this.domElement=i.domElement;const s=new Ke(ib,ib);i.setClearColor(0,0),i.outputColorSpace=Bn,i.setSize(s.x,s.y),i.setPixelRatio(window.devicePixelRatio);let a=s.clone().divideScalar(n);a.x|=0,a.y|=0;const o=new Uge(i);o.addPass(new Fge(e,r)),this._renderPixelPass=new kge(a,e,r),this._pixelPass=new Lge(a),o.addPass(this._renderPixelPass),o.addPass(this._pixelPass),this.renderer=i,this.composer=o}setSize(e,r){let n=new Ke(e,r).clone().divideScalar(this.pixelSize);n.x|=0,n.y|=0,this.renderer.setSize(e,r),this._renderPixelPass.setResolution(n),this._pixelPass.setResolution(n)}setPixelSize(e){this.pixelSize=e}render(){this.composer.render()}}class Dge{constructor(e,r){De(this,"cameraFrameManager"),this.renderer=new y0({preserveDrawingBuffer:!0,antialias:!0,alpha:!0}),this.renderer.setClearAlpha(0),this.renderer.premultipliedAlpha=!1,this.scene=r,this.characterManager=e,this.renderer.outputColorSpace=Ut,this.renderer.setSize(ib,ib);const n=new In(30,1,.1,1e3);this.textureLoader=new Uc,this.sceneBackground=new He(.1,.1,.1),this.sceneBackgroundAlpha=1,this.usesBackgroundImage=!1,this.backgroundMaterial=new Zi({color:16777215,transparent:!0,opacity:.5});const i=new oA(1e3,1e3),s=new Ar(i,this.backgroundMaterial);s.renderOrder=-1,this.backgroundPlane=s,this.pixelRenderer=new Oge(r,n,20),this.cameraFrameManager=new Pge(n),this.cameraFrameManager.setFrameTarget(this.characterManager.characterModel)}setScene(e){this.scene=e}get camera(){return this.cameraFrameManager.camera}setupCamera(e,r,n=30){this.cameraFrameManager.setupCamera(e,r,n)}_getCharacterMinMax(){let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return this.characterManager.characterModel.traverse(n=>{n.geometry&&(n.geometry.computeBoundingBox(),n.geometry.boundingBox&&(n.geometry.boundingBox.applyMatrix4(n.matrixWorld),n.geometry.boundingBox.min.y<e&&(e=n.geometry.boundingBox.min.y),n.geometry.boundingBox.max.y>r&&(r=n.geometry.boundingBox.max.y)))}),{minY:e,maxY:r}}_getBoneWorldPosition(e,r=void 0){const n=this.cameraFrameManager._getFirstBoneWithName(e,r);return n!=null?new Y().setFromMatrixPosition(n.matrixWorld):(console.warn(`Bone with name '${e}' not found in one of the skinned meshes.`),new Y(0,0,0))}setBackground(e){if(Array.isArray(e)){const r=e[3]==null?1:e[3];this.setBackgroundColor(e[0],e[1],e[2],r)}else this.setBackgroundImage(e)}setBackgroundColor(e,r,n,i){const s=new He(e,r,n,i);this.sceneBackground=s,i==null&&(i=1),i>1&&(i=1),i<0&&(i=0),this.sceneBackgroundAlpha=i,this.backgroundMaterial.color=s,this.usesBackgroundImage=!1}setBackgroundImage(e){return new Promise(async(r,n)=>{try{const i=await this.texureLoader.load(e);i&&(i.wrapS=i.wrapT=Qs,this.sceneBackground=i,this.usesBackgroundImage=!0,this.sceneBackgroundAlpha=1,r())}catch(i){console.error("Error loading background image: ",i),n(i)}})}_setBackground(){if(this.usesBackgroundImage==!1&&this.sceneBackgroundAlpha!=1)if(this.sceneBackgroundAlpha==0)this.scene.background=null;else{this.scene.background=null,this.scene.add(this.backgroundPlane),this.backgroundPlane.position.copy(this.camera.position);var e=new Y(0,0,-1);e.applyQuaternion(this.camera.quaternion);var r=100;this.backgroundPlane.position.addScaledVector(e,r),this.backgroundPlane.lookAt(this.camera.position)}else this.scene.background=this.sceneBackground}_restoreBackground(){this.scene.background=null,this.usesBackgroundImage==!1&&this.sceneBackgroundAlpha!=1&&this.scene.remove(this.backgroundPlane)}getImageData(e,r,n=null){return this._createImage(e,r,n).split("base64,")[1]}_createImage(e,r,n=null){const i=e/r;typeof n=="number"&&this.pixelRenderer.setPixelSize(n),this.renderer.setSize(e,r),this.pixelRenderer.setSize(e,r);const s="image/png";this.camera.aspect=i,this.camera.updateProjectionMatrix();const a=typeof n=="number"?this.pixelRenderer:this.renderer;try{this._setBackground(),a.render(this.scene,this.camera);let o=a.domElement.toDataURL(s);return this._restoreBackground(),o}catch(o){return console.error(o),null}}savePixelScreenshot(e,r,n,i){this.pixelRenderer.setPixelSize(i),this.pixelRenderer.setSize(r,n);const s=this._createImage(r,n,!0),a="image/octet-stream",o="image/png";this.saveFile(s.replace(o,a),e+".png")}saveScreenshot(e,r,n){const i=this._createImage(r,n),s="image/octet-stream",a="image/png";this.saveFile(i.replace(a,s),e+".png")}getScreenshotImage(e,r){const n=this._createImage(e,r),i=new Image;return i.src=n,i}getScreenshotTexture(e,r){const n=this.getScreenshotImage(e,r),i=new Sr(n);return i.needsUpdate=!0,i}getScreenshotBlob(e,r){const n=this._createImage(e,r),i=lj.Buffer.from(n.replace(/^data:image\/\w+;base64,/,""),"base64");return new Blob([i],{type:"image/jpeg"})}saveFile(e,r){const n=document.createElement("a");typeof n.download=="string"?(document.body.appendChild(n),n.download=r,n.href=e,n.click(),document.body.removeChild(n)):window.open(e,"_blank").document.write("<title>"+r+"</title><img src='"+e+"'/>")}}const Nge=2;class Qge{constructor(e=.5,r=.5,n=1,i=5){this.vrmBlinkers=[],this.mode="ready",this.clock=new w_,this.closeTime=e,this.openTime=r,this.continuity=n,this.randomness=i,this._eyeOpen=1,this._blinkCounter=0,this.isTakingScreenShot=!1,this.update()}addVRM(e){this.vrmBlinkers.push(e)}removeVRM(e){const r=this.vrmBlinkers.indexOf(e);r!==-1&&this.vrmBlinkers.splice(r,1)}enableScreenshot(){this.isTakingScreenShot=!0,this._eyeOpen=Nge,this._updateBlinkers()}disableScreenshot(){this.isTakingScreenShot=!1}update(){setInterval(()=>{if(this.isTakingScreenShot)return;const e=this.clock.getDelta();switch(this.mode){case"closing":this._eyeOpen>0?this._eyeOpen-=e/this.closeTime:(this._eyeOpen=0,this.mode="open"),this._updateBlinkers();break;case"open":this._eyeOpen<1?this._eyeOpen+=e/this.openTime:(this._eyeOpen=1,this.mode="ready"),this._updateBlinkers();break;case"ready":this._blinkCounter+=e,this._blinkCounter>=this.continuity&&(Math.floor(Math.random()*this.randomness)===0&&(this.mode="closing"),this._blinkCounter=0);break}},1e3/30)}_updateBlinkers(){this.vrmBlinkers.forEach(e=>{e.expressionManager.setValue(zn.Blink,1-this._eyeOpen),e.expressionManager.update()})}}class Hge{constructor(){De(this,"vrmEmotion"),De(this,"mode"),De(this,"clock"),De(this,"continuous",!1),De(this,"emotionPlaying",null),De(this,"emotionValue",0),De(this,"intensity",1),De(this,"emotionTime",.1),De(this,"isTakingScreenShot",!1),De(this,"_nextEmotion",null),De(this,"_nextEmotionTime",0),De(this,"_nextEmotionValue",0),De(this,"_nextIntensity",1),De(this,"_nextIsContinuous",!1),this.vrmEmotion=[],this.mode="ready",this.clock=new w_,this.isTakingScreenShot=!1,this.update()}get availableEmotions(){var e;const r=Object.keys(zn).map(i=>i.toLowerCase()),n=[];for(const i of this.vrmEmotion)for(const s of r){if(s==="blink"||n.includes(s))continue;const a=(e=i.expressionManager)==null?void 0:e.getExpression(s);a&&a._binds.length>0&&n.push(s)}return n}addVRM(e){e.expressionManager&&this.vrmEmotion.push(e)}hasEmotion(e){return this.availableEmotions.some(r=>r===e)}removeVRM(e){const r=this.vrmEmotion.indexOf(e);r!==-1&&this.vrmEmotion.splice(r,1)}enableScreenshot(){this.isTakingScreenShot=!0,this.emotionPlaying=null,this._updateEmotions()}disableScreenshot(){this.isTakingScreenShot=!1}_isBlink(e){return e==="blink"}playEmotion(e,r=void 0,n=!1,i=1){if(!this.hasEmotion(e)){console.warn(`Emotion ${e} not available`);return}if(this._isBlink(e)){console.warn("Blink is handled by the BlinkManager, ignoring");return}if(e===this.emotionPlaying&&i===this.intensity)return;const s=Math.min(1,Math.max(0,i));if(this.mode==="animating"&&this.emotionPlaying){this.continuous=!1,this._nextEmotion=e,this._nextEmotionTime=r||this.emotionTime,this._nextEmotionValue=0,this._nextIntensity=s,this._nextIsContinuous=n||!1,this.mode="transition";return}this.emotionPlaying=e,this.intensity=s,r&&(this.emotionTime=r),this.continuous=n||!1,this.mode="animating"}_setIsReady(){this.emotionValue=0,this.intensity=1,this.emotionPlaying=null,this.continuous=!1,this.mode="ready"}_removeNextEmotion(){this._nextEmotion=null,this._nextIntensity=1,this._nextEmotionValue=0,this._nextEmotionTime=0,this._nextIsContinuous=!1}update(){setInterval(()=>{if(this.isTakingScreenShot)return;const e=this.clock.getDelta();switch(this.mode){case"animating":this.emotionPlaying?(this.emotionValue<this.intensity&&(this.emotionValue+=e/this.emotionTime,this.emotionValue=Math.min(1,this.emotionValue)),!this.continuous&&this.emotionValue>=this.intensity&&(this.mode="stopping")):this._setIsReady(),this._updateEmotions();break;case"stopping":this.emotionPlaying?(this.emotionValue>0&&(this.emotionValue-=e/this.emotionTime,this.emotionValue=Math.max(0,this.emotionValue)),this.emotionValue<=0&&this._setIsReady()):this._setIsReady(),this._updateEmotions();break;case"transition":this._nextEmotion?(this._nextEmotionValue<this._nextIntensity&&(this._nextEmotionValue+=e/this._nextEmotionTime,this.emotionValue=Math.min(this.intensity,this.emotionValue)),this.emotionValue>0?this.emotionValue-=e/this._nextEmotionTime:(this.emotionValue=this._nextEmotionValue,this.emotionTime=this._nextEmotionTime,this.emotionPlaying=this._nextEmotion,this.intensity=this._nextIntensity,this.continuous=this._nextIsContinuous,this.mode="animating",this._removeNextEmotion())):this.emotionPlaying&&(this.mode="animating"),this._updateEmotions()}},1e3/30)}_updateEmotions(){this.emotionPlaying&&this.vrmEmotion.forEach(e=>{var r,n,i;this._nextEmotion&&((r=e.expressionManager)==null||r.setValue(this._nextEmotion,this._nextEmotionValue)),(n=e.expressionManager)==null||n.setValue(this.emotionPlaying,this.emotionValue),(i=e.expressionManager)==null||i.update()})}}function Jz(){return(Jz=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function jge(){return Jz.apply(this,arguments)}function zge(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}(function(t){t[t.cBASISTexType2D=0]="cBASISTexType2D",t[t.cBASISTexType2DArray=1]="cBASISTexType2DArray",t[t.cBASISTexTypeCubemapArray=2]="cBASISTexTypeCubemapArray",t[t.cBASISTexTypeVideoFrames=3]="cBASISTexTypeVideoFrames",t[t.cBASISTexTypeVolume=4]="cBASISTexTypeVolume"})(yS||(yS={})),function(t){t[t.RAW=0]="RAW",t[t.PNG=1]="PNG",t[t.JPG=2]="JPG"}(wS||(wS={}));class Gge{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class im{constructor(e,r,n,i){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+r,n),this._littleEndian=i,this._offset=0}_nextUint8(){let e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){let e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){let e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){let e=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e+4294967296*r}_nextInt32(){let e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){let r=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,r}_skip(e){return this._offset+=e,this}_scan(e,r=0){let n=this._offset,i=0;for(;this._dataView.getUint8(this._offset)!==r&&i<e;)i++,this._offset++;return i<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,i)}}let DO=new Uint8Array([0]),Zn=[171,75,84,88,32,50,48,187,13,10,26,10];function NO(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Buffer.from(t)}function QO(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Buffer.from(t).toString("utf8")}function sm(t){let e=0;for(let i of t)e+=i.byteLength;let r=new Uint8Array(e),n=0;for(let i of t)r.set(new Uint8Array(i),n),n+=i.byteLength;return r}function Vge(t){let e=new Uint8Array(t.buffer,t.byteOffset,Zn.length);if(e[0]!==Zn[0]||e[1]!==Zn[1]||e[2]!==Zn[2]||e[3]!==Zn[3]||e[4]!==Zn[4]||e[5]!==Zn[5]||e[6]!==Zn[6]||e[7]!==Zn[7]||e[8]!==Zn[8]||e[9]!==Zn[9]||e[10]!==Zn[10]||e[11]!==Zn[11])throw Error("Missing KTX 2.0 identifier.");let r=new Gge,n=17*Uint32Array.BYTES_PER_ELEMENT,i=new im(t,Zn.length,n,!0);r.vkFormat=i._nextUint32(),r.typeSize=i._nextUint32(),r.pixelWidth=i._nextUint32(),r.pixelHeight=i._nextUint32(),r.pixelDepth=i._nextUint32(),r.layerCount=i._nextUint32(),r.faceCount=i._nextUint32();let s=i._nextUint32();r.supercompressionScheme=i._nextUint32();let a=i._nextUint32(),o=i._nextUint32(),l=i._nextUint32(),A=i._nextUint32(),c=i._nextUint64(),u=i._nextUint64(),h=new im(t,Zn.length+n,24*s,!0);for(let F=0;F<s;F++)r.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+h._nextUint64(),h._nextUint64()),uncompressedByteLength:h._nextUint64()});let d=new im(t,a,o,!0),f={vendorId:d._skip(4)._nextUint16(),descriptorType:d._nextUint16(),versionNumber:d._nextUint16(),descriptorBlockSize:d._nextUint16(),colorModel:d._nextUint8(),colorPrimaries:d._nextUint8(),transferFunction:d._nextUint8(),flags:d._nextUint8(),texelBlockDimension:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],bytesPlane:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],samples:[]},m=(f.descriptorBlockSize/4-6)/4;for(let F=0;F<m;F++){let k={bitOffset:d._nextUint16(),bitLength:d._nextUint8(),channelType:d._nextUint8(),samplePosition:[d._nextUint8(),d._nextUint8(),d._nextUint8(),d._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&k.channelType?(k.sampleLower=d._nextInt32(),k.sampleUpper=d._nextInt32()):(k.sampleLower=d._nextUint32(),k.sampleUpper=d._nextUint32()),f.samples[F]=k}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(f);let g=new im(t,l,A,!0);for(;g._offset<A;){let F=g._nextUint32(),k=g._scan(F),Q=QO(k);if(r.keyValue[Q]=g._nextUint8Array(F-k.byteLength-1),Q.match(/^ktx/i)){let j=QO(r.keyValue[Q]);r.keyValue[Q]=j.substring(0,j.lastIndexOf("\0"))}let z=F%4?4-F%4:0;g._skip(z)}if(u<=0)return r;let p=new im(t,c,u,!0),v=p._nextUint16(),y=p._nextUint16(),_=p._nextUint32(),E=p._nextUint32(),x=p._nextUint32(),B=p._nextUint32(),M=[];for(let F=0;F<s;F++)M.push({imageFlags:p._nextUint32(),rgbSliceByteOffset:p._nextUint32(),rgbSliceByteLength:p._nextUint32(),alphaSliceByteOffset:p._nextUint32(),alphaSliceByteLength:p._nextUint32()});let R=c+p._offset,I=R+_,L=I+E,D=new Uint8Array(t.buffer,t.byteOffset+R,_),w=new Uint8Array(t.buffer,t.byteOffset+I,E),b=new Uint8Array(t.buffer,t.byteOffset+L,x),S=new Uint8Array(t.buffer,t.byteOffset+(L+x),B);return r.globalData={endpointCount:v,selectorCount:y,imageDescs:M,endpointsData:D,selectorsData:w,tablesData:b,extendedData:S},r}function vS(){return(vS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}let Wge={keepWriter:!1};function Kge(t,e={}){e=vS({},Wge,e);let r=new ArrayBuffer(0);if(t.globalData){let v=new ArrayBuffer(20+20*t.globalData.imageDescs.length),y=new DataView(v);y.setUint16(0,t.globalData.endpointCount,!0),y.setUint16(2,t.globalData.selectorCount,!0),y.setUint32(4,t.globalData.endpointsData.byteLength,!0),y.setUint32(8,t.globalData.selectorsData.byteLength,!0),y.setUint32(12,t.globalData.tablesData.byteLength,!0),y.setUint32(16,t.globalData.extendedData.byteLength,!0);for(let _=0;_<t.globalData.imageDescs.length;_++){let E=t.globalData.imageDescs[_];y.setUint32(20+20*_+0,E.imageFlags,!0),y.setUint32(20+20*_+4,E.rgbSliceByteOffset,!0),y.setUint32(20+20*_+8,E.rgbSliceByteLength,!0),y.setUint32(20+20*_+12,E.alphaSliceByteOffset,!0),y.setUint32(20+20*_+16,E.alphaSliceByteLength,!0)}r=sm([v,t.globalData.endpointsData,t.globalData.selectorsData,t.globalData.tablesData,t.globalData.extendedData])}let n=[],i=t.keyValue;for(let v in e.keepWriter||(i=vS({},t.keyValue,{KTXwriter:"KTX-Parse v0.6.0"})),i){let y=i[v],_=NO(v),E=typeof y=="string"?sm([NO(y),DO]):y,x=_.byteLength+1+E.byteLength,B=x%4?4-x%4:0;n.push(sm([new Uint32Array([x]),_,DO,E,new Uint8Array(B).fill(0)]))}let s=sm(n);if(t.dataFormatDescriptor.length!==1||t.dataFormatDescriptor[0].descriptorType!==0)throw Error("Only BASICFORMAT Data Format Descriptor output supported.");let a=t.dataFormatDescriptor[0],o=new ArrayBuffer(28+16*a.samples.length),l=new DataView(o),A=24+16*a.samples.length;if(l.setUint32(0,o.byteLength,!0),l.setUint16(4,a.vendorId,!0),l.setUint16(6,a.descriptorType,!0),l.setUint16(8,a.versionNumber,!0),l.setUint16(10,A,!0),l.setUint8(12,a.colorModel),l.setUint8(13,a.colorPrimaries),l.setUint8(14,a.transferFunction),l.setUint8(15,a.flags),!Array.isArray(a.texelBlockDimension))throw Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");l.setUint8(16,a.texelBlockDimension[0]),l.setUint8(17,a.texelBlockDimension[1]),l.setUint8(18,a.texelBlockDimension[2]),l.setUint8(19,a.texelBlockDimension[3]);for(let v=0;v<8;v++)l.setUint8(20+v,a.bytesPlane[v]);for(let v=0;v<a.samples.length;v++){let y=a.samples[v],_=28+16*v;if(y.channelID)throw Error("channelID has been renamed to channelType.");l.setUint16(_+0,y.bitOffset,!0),l.setUint8(_+2,y.bitLength),l.setUint8(_+3,y.channelType),l.setUint8(_+4,y.samplePosition[0]),l.setUint8(_+5,y.samplePosition[1]),l.setUint8(_+6,y.samplePosition[2]),l.setUint8(_+7,y.samplePosition[3]),64&y.channelType?(l.setInt32(_+8,y.sampleLower,!0),l.setInt32(_+12,y.sampleUpper,!0)):(l.setUint32(_+8,y.sampleLower,!0),l.setUint32(_+12,y.sampleUpper,!0))}let c=Zn.length+68+24*t.levels.length,u=c+o.byteLength,h=r.byteLength>0?u+s.byteLength:0;h%8&&(h+=8-h%8);let d=[],f=new DataView(new ArrayBuffer(24*t.levels.length)),m=(h||u+s.byteLength)+r.byteLength;for(let v=0;v<t.levels.length;v++){let y=t.levels[v];d.push(y.levelData),f.setBigUint64(24*v+0,BigInt(m),!0),f.setBigUint64(24*v+8,BigInt(y.levelData.byteLength),!0),f.setBigUint64(24*v+16,BigInt(y.uncompressedByteLength),!0),m+=y.levelData.byteLength}let g=new ArrayBuffer(68),p=new DataView(g);return p.setUint32(0,t.vkFormat,!0),p.setUint32(4,t.typeSize,!0),p.setUint32(8,t.pixelWidth,!0),p.setUint32(12,t.pixelHeight,!0),p.setUint32(16,t.pixelDepth,!0),p.setUint32(20,t.layerCount,!0),p.setUint32(24,t.faceCount,!0),p.setUint32(28,t.levels.length,!0),p.setUint32(32,t.supercompressionScheme,!0),p.setUint32(36,c,!0),p.setUint32(40,o.byteLength,!0),p.setUint32(44,u,!0),p.setUint32(48,s.byteLength,!0),p.setBigUint64(52,BigInt(r.byteLength>0?h:0),!0),p.setBigUint64(60,BigInt(r.byteLength),!0),new Uint8Array(sm([new Uint8Array(Zn).buffer,g,f.buffer,o,s,new ArrayBuffer(h>0?h-(u+s.byteLength):0),r,...d]))}var yS,wS,Yge={enableDebug:!1,isUASTC:!0,isKTX2File:!0,isInputSRGB:!0,generateMipmap:!0,needSupercompression:!0,isSetKTX2SRGBTransferFunc:!0},bS=new OffscreenCanvas(128,128),HO=bS.getContext("2d",{willReadFrequently:!0}),qz=typeof document>"u";function Xge(t){return createImageBitmap(t).then(function(e){return bS.width=e.width,bS.height=e.height,HO.drawImage(e,0,0),HO.getImageData(0,0,e.width,e.height)})}function Zge(t,e){return e===void 0&&(e={}),qge().then(function(r){var n=new r.BasisEncoder;return Jge(e,n),n.setTexType(yS.cBASISTexType2D),zge(t,ArrayBuffer)&&(t=new Blob([t])),Xge(t).then(function(i){n.setSliceSourceImage(0,new Uint8Array(i.data),i.width,i.height,wS.RAW);var s=new Uint8Array(10485760),a=n.encode(s);if(a===0)throw"encode failed";var o=new Uint8Array(s.buffer,0,a),l=Vge(s);if(e.kvData){for(var A in e.kvData)l.keyValue[A]=e.kvData[A];o=Kge(l,{keepWriter:!0})}return o})})}function Jge(t,e){t===void 0&&(t={}),(t=jge({},Yge,t)).enableDebug!==void 0&&e.setDebug(t.enableDebug),t.isUASTC!==void 0&&e.setUASTC(t.isUASTC),t.isKTX2File!==void 0&&e.setCreateKTX2File(t.isKTX2File),t.isSetKTX2SRGBTransferFunc!==void 0&&e.setKTX2SRGBTransferFunc(t.isSetKTX2SRGBTransferFunc),t.generateMipmap!==void 0&&e.setMipGen(t.generateMipmap),t.isYFlip!==void 0&&e.setYFlip(t.isYFlip),t.qualityLevel!==void 0&&e.setQualityLevel(t.qualityLevel),t.compressionLevel!==void 0&&e.setCompressionLevel(t.compressionLevel),t.needSupercompression!==void 0&&e.setKTX2UASTCSupercompression(t.needSupercompression),t.isNormalMap!==void 0&&e.setNormalMap(t.isNormalMap)}var $B=null;function qge(){return $B||($B=new Promise(function(t,e){qz?(importScripts("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js"),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(r){return r.arrayBuffer()}).then(function(r){BASIS({wasmBinary:r}).then(function(n){n.initializeBasis(),t(n)}).catch(e)}).catch(e)):Promise.all([fetch("https://mdn.alipayobjects.com/rms/afts/file/A*SrRkQarYYl4AAAAAAAAAAAAAARQnAQ/basis_encoder.js").then(function(r){return r.text()}),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qFWbTrA0hZYAAAAAAAAAAAAAARQnAQ/basis_encoder.wasm").then(function(r){return r.arrayBuffer()})]).then(function(r){var n=r[0],i=r[1],s=document.createElement("script");s.onload=function(){BASIS({wasmBinary:i}).then(function(a){a.initializeBasis(),t(a)}).catch(e)},s.src=URL.createObjectURL(new Blob([n])),s.onerror=e,document.body.appendChild(s)}).catch(e)})),$B}qz&&self.addEventListener("message",function(t){Zge(t.data).then(function(e){self.postMessage(e)}).catch(function(e){self.postMessage({error:e})})});class $ge{constructor(e,r){if(this.gl=e,this.libktx=null,e!==void 0)if(r===void 0&&LIBKTX!==void 0&&(r=LIBKTX),r!==void 0)this.initializied=this.init(e,r);else{console.error("Failed to initalize KTXDecoder: ktx library undefined");return}else{console.error("Failed to initalize KTXDecoder: WebGL context undefined");return}}async init(e,r){this.libktx=await r({preinitializedWebGLContext:e}),this.libktx.GL.makeContextCurrent(this.libktx.GL.createContext(e.canvas,{majorVersion:2}))}stringToUastcFlags(e){return e==="FASTER"?this.libktx.UastcFlags.LEVEL_FASTER.value:e==="FASTEST"?this.libktx.UastcFlags.LEVEL_FASTEST.value:e==="SLOWER"?this.libktx.UastcFlags.LEVEL_SLOWER.value:e==="SLOWEST"?this.libktx.UastcFlags.LEVEL_VERYSLOW.value:this.libktx.UastcFlags.LEVEL_DEFAULT.value}stringToSupercmpScheme(e){return e==="Zstd"?this.libktx.SupercmpScheme.ZSTD:e==="Zlib"?this.libktx.SupercmpScheme.ZLIB:e==="BasisLZ"?this.libktx.SupercmpScheme.BASIS_LZ:this.libktx.SupercmpScheme.NONE}transcodeRGBA(e){if(!e.needsTranscoding)return;const r=this.libktx.TranscodeTarget.RGBA8888;e.transcodeBasis(r,0)!=this.libktx.ErrorCode.SUCCESS&&console.warn("Texture transcode failed. See console for details.")}transcode(e){if(e.gpuFormat="RGBA8888",e.needsTranscoding){let r,n=!1,i=!1,s=!1,a=!1,o=!1;n=!!this.gl.getExtension("WEBGL_compressed_texture_astc"),i=!!this.gl.getExtension("WEBGL_compressed_texture_etc1"),s=!!this.gl.getExtension("WEBGL_compressed_texture_s3tc"),a=!!this.gl.getExtension("EXT_texture_compression_bptc"),o=!!this.gl.getExtension("WEBGL_compressed_texture_pvrtc")||!!this.gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),n?(r=this.libktx.TranscodeTarget.ASTC_4x4_RGBA,e.gpuFormat="ASTC_4x4_RGBA"):a?(r=this.libktx.TranscodeTarget.BC7_RGBA,e.gpuFormat="BC7_RGBA"):s?(r=this.libktx.TranscodeTarget.BC1_OR_3,e.gpuFormat="BC1_OR_3"):o?(r=this.libktx.TranscodeTarget.PVRTC1_4_RGBA,e.gpuFormat="PVRTC1_4_RGBA"):i?(r=this.libktx.TranscodeTarget.ETC,e.gpuFormat="ETC"):(r=this.libktx.TranscodeTarget.RGBA8888,e.gpuFormat="RGBA8888"),e.transcodeBasis(r,0)!=this.libktx.ErrorCode.SUCCESS&&console.warn("Texture transcode failed. See console for details.")}}async loadKtxFromUri(e){await this.initializied;const r=await fetch(e),n=new Uint8Array(await r.arrayBuffer()),i=new this.libktx.ktxTexture(n);this.transcode(i);let s=i.glUpload();if(s.texture==null){console.error("Could not load KTX data");return}return s.texture.levels=Math.log2(i.baseWidth),s.texture.width=i.baseWidth,s.texture.height=i.baseHeight,s.texture.gpuSize=i.dataSize,s.texture.gpuFormat=i.gpuFormat,s.texture.isSRGB=i.isSRGB,s.texture}async loadKtxFromBuffer(e){await this.initializied;const r=new this.libktx.ktxTexture(e);this.transcode(r);const n=r.glUpload();if(n.texture==null){console.error("Could not load KTX data");return}return n.texture.levels=Math.log2(r.baseWidth),n.texture.width=r.baseWidth,n.texture.height=r.baseHeight,n.texture.gpuSize=r.dataSize,n.texture.gpuFormat=r.gpuFormat,n.texture.isSRGB=r.isSRGB,n.texture}async compress(e,r,n,i,s={}){const a=new this.libktx.ktxTexture(e,r,n,i,s.srgb);if(!s.hasOwnProperty("basisu_options")){const l=new this.libktx.ktxBasisParams;l.uastc=!1,l.noSSE=!0,l.verbose=!1,l.qualityLevel=100,l.compressionLevel=2,s.basisu_options=l}s.hasOwnProperty("compression_level")||(s.compression_level=18),s.hasOwnProperty("supercmp_scheme")||(s.supercmp_scheme=this.libktx.SupercmpScheme.NONE),console.log(s);const o=a.compressBasisU(s.basisu_options,s.supercmp_scheme,s.compression_level);return Uint8ClampedArray.from(o)}}class e0e{constructor(){this.ktxEncoder=null,this.libktx=null,this.init()}async init(){const e=document.createElement("canvas").getContext("webgl"),r=new $ge(e,window.LIBKTX);await r.init(e,window.LIBKTX),this.ktxEncoder=r,this.libktx=r.libktx}async compress(e,r,n,i,s={}){const a=await new this.libktx.ktxBasisParams,o=s;return a.uastc=o.uastc!==void 0?o.uastc:!1,a.noSSE=o.noSSE!==void 0?o.noSSE:!1,a.verbose=o.verbose!==void 0?o.verbose:!1,a.normalMap=o.normalMap!==void 0?o.normalMap:!1,a.compressionLevel=o.compressionLevel!==void 0?o.compressionLevel:1,a.qualityLevel=o.qualityLevel!==void 0?o.qualityLevel:60,a.maxEndpoints=o.ETC1SmaxEndpoints!==void 0?o.ETC1SmaxEndpoints:0,a.endpointRDOThreshold=o.ETC1SEndpointRdoThreshold!==void 0?o.ETC1SEndpointRdoThreshold:1.25,a.maxSelectors=o.ETC1SMaxSelectors!==void 0?o.ETC1SMaxSelectors:0,a.selectorRDOThreshold=o.ETC1SSelectorRdoThreshold!==void 0?o.ETC1SSelectorRdoThreshold:1.25,a.noEndpointRDO=o.ETC1SNoEndpointRdo!==void 0?o.ETC1SNoEndpointRdo:!1,a.noSelectorRDO=o.ETC1SNoSelectorRdo!==void 0?o.ETC1SNoSelectorRdo:!1,a.uastcFlags=this.ktxEncoder.stringToUastcFlags(o.uastcFlags),a.uastcRDO=a.uastcRDO!==void 0?a.uastcRDO:!1,a.uastcRDOQualityScalar=o.uastcRDOQualityScalar!==void 0?o.uastcRDOQualityScalar:1,a.uastcRDODictSize=o.uastcRDODictSize!==void 0?o.uastcRDOQualityScalar:4096,a.uastcRDOMaxSmoothBlockErrorScale=o.uastcRDOMaxSmoothBlockErrorScale!==void 0?o.uastcRDOMaxSmoothBlockErrorScale:10,a.uastcRDOMaxSmoothBlockStdDev=o.uastcRDOMaxSmoothBlockStdDev!==void 0?o.uastcRDOMaxSmoothBlockStdDev:18,a.uastcRDODontFavorSimplerModes=o.uastcRDODontFavorSimplerModes!==void 0?o.uastcRDODontFavorSimplerModes:!1,s.basisu_options=a,s.hasOwnProperty("supercmp_scheme")?s.supercmp_scheme=this.ktxEncoder.stringToSupercmpScheme(s.supercmp_scheme):s.supercmp_scheme=this.libktx.SupercmpScheme.NONE,await this.ktxEncoder.compress(e,r,n,i,s)}}var Jr;(function(t){t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.LINEAR=9729]="LINEAR",t[t.REPEAT=10497]="REPEAT"})(Jr||(Jr={}));const _S="blend_",jO="vrmColliderSphere";function t0e(t){var e;return{title:t.name,version:"v0",author:((e=t.authors)==null?void 0:e.length)>0?t.authors.join(", "):"",reference:t.references!=null?t.references.join(", "):"",contactInformation:t.contactInformation!=null?t.contactInformation:"",otherPermissionUrl:t.otherPermissionUrl,allowedUserName:t.avatarPermission!=null?t.avatarPermission:"",violentUssageName:t.allowExcessivelyViolentUsage?"Allow":"Disallow",sexualUssageName:t.allowExcessivelySexualUsage?"Allow":"Disallow",commercialUssageName:t.commercialUsage=="personalProfit"||t.commercialUsage=="corporation"?"Allow":"Disallow",licenseName:t.copyrightInformation,otherLicenseUrl:t.otherLicenseUrl,metaVersion:"0"}}function r0e(t){const e=[];for(const r in t.humanBones)e.push({bone:r,node:t.humanBones[r].node});return{humanBones:e}}function n0e(t){switch(t){case"happy":return"joy";case"sad":return"sorrow";case"relaxed":return"fun";case"aa":return"a";case"ih":return"i";case"ou":return"u";case"ee":return"e";case"oh":return"o";default:return t}}function i0e(t){if(t.includes("Thumb")){if(t.includes("Metacarpal"))return t.replace("Metacarpal","Proximal");if(t.includes("Proximal"))return t.replace("Proximal","Intermediate")}return t}class s0e{async parse(e,r,n,i,s,a,o){var l;const A=t0e(e.meta),c=r0e(e.humanoid),u=e.materials,h=[],d={generator:"UniGLTF-2.0.0",version:"2.0"};if(r)if(c)if(A){if(!u)throw new Error("materials is undefined or null")}else throw new Error("meta is undefined or null");else throw new Error("humanoid is undefined or null");else throw new Error("avatar is undefined or null");const f=u.filter((K,fe,ie)=>ie.findIndex(Ee=>Ee.name===K.name.replace(" (Outline)",""))===fe).map(K=>K),m=f.map(K=>K.name),g=n?{name:"icon",imageBitmap:n.image}:null,p=f.filter(K=>K.map).map(K=>{if(!K.map)throw new Error(K.name+" map is null");return{name:K.name,imageBitmap:K.map.image}}),v=f.filter(K=>K.userData.shadeTexture).map(K=>{if(!K.userData.shadeTexture)throw new Error(K.userData.shadeTexture+" map is null");return{name:K.name+"_shade",imageBitmap:K.userData.shadeTexture.image}}),y=f.filter(K=>K.roughnessMap).map(K=>K.roughnessMap?{name:K.name+"_orm",imageBitmap:K.roughnessMap.image}:null),_=f.filter(K=>K.roughnessMap).map(K=>K.normalMap?{name:K.name+"_normal",imageBitmap:K.normalMap.image}:null),E=[...p,...v,...y,..._].filter(K=>K!==null),x=u0e(E,g,s?"image/ktx2":"image/png"),B=h0e(x),M=d0e(x,s),R=c0e(f,E),I=r.children.filter(K=>K.children.length>0&&K.children[0].type===Fi.Bone)[0],L=$z(I).filter(K=>K.name!==jO),D=L.map(K=>K.name),w=L.map(K=>{const fe=K.children.filter(ie=>ie.name!==jO).map(ie=>D.indexOf(ie.name));return{name:K.name,rotation:[K.quaternion.x,K.quaternion.y,K.quaternion.z,K.quaternion.w],scale:[K.scale.x,K.scale.y,K.scale.z],translation:[K.position.x,K.position.y,K.position.z],children:fe.length>0?fe:void 0}}),b=[],S=r.children.filter(K=>K.type===Fi.Group||K.type===Fi.SkinnedMesh),F=[];S.forEach((K,fe)=>{const ie=K.type===Fi.Group?K.children[0]:K,Ee=ie.geometry.attributes,C=new CA(Ee.position,Jr.FLOAT,sr.POSITION,Bo.VEC3,ie.name,void 0);F.push(C);const P=F.length-1,G=Ee.normal.array,te=new Float32Array(G.length);for(let ve=0;ve<G.length;ve+=3){const Ie=G[ve],ke=G[ve+1],Le=G[ve+2],Oe=Math.sqrt(Ie*Ie+ke*ke+Le*Le);te[ve]=Ie/Oe,te[ve+1]=ke/Oe,te[ve+2]=Le/Oe}const ae=new CA(new lt(te,3),Jr.FLOAT,sr.NORMAL,Bo.VEC3,ie.name,void 0);F.push(ae),F.push(new CA(Ee.uv,Jr.FLOAT,sr.UV,Bo.VEC2,ie.name,void 0)),F.push(new CA(Ee.skinWeight,Jr.FLOAT,sr.SKIN_WEIGHT,Bo.VEC4,ie.name,void 0)),F.push(new CA(Ee.skinIndex,Jr.UNSIGNED_SHORT,sr.SKIN_INDEX,Bo.VEC4,ie.name,void 0)),(K.type===Fi.Group?K.children.map(ve=>ve):[K]).forEach(ve=>{if(!ve.geometry.index)throw new Error(ve.name+" geometry.index is null");F.push(new CA(ve.geometry.index,Jr.UNSIGNED_INT,sr.INDEX,Bo.SCALAR,ie.name,ve.name))}),ie.morphTargetDictionary||(ie.morphTargetDictionary={},ie.morphTargetInfluences=[],ie.geometry.morphAttributes={},ie.updateMorphTargets()),ie.geometry.userData.targetNames=[];const pe=(ve,Ie,ke,Le)=>{const Oe=[],ue=[];for(let Qe=0;Qe<ve.length;Qe+=3){const xe=ve[Qe],Ce=ve[Qe+1],Fe=ve[Qe+2];(xe!==0||Ce!==0||Fe!==0)&&(Oe.push(Qe/3),ue.push(xe,Ce,Fe))}if(Oe.length>0){const Qe=[...Oe].sort((Fe,Re)=>Fe-Re),xe=[];for(let Fe=0;Fe<Qe.length;Fe++){const Re=Qe[Fe],ot=Oe.indexOf(Re);xe.push(ue[ot*3],ue[ot*3+1],ue[ot*3+2])}const Ce={targetMeshDataIndex:P,count:Qe.length,indices:new Uint32Array(Qe),values:new Float32Array(xe)};F.push(new CA(Le,Jr.FLOAT,ke,Bo.VEC3,ie.name,_S+Ie,Ce))}};for(const ve in ie.morphTargetDictionary){ie.geometry.userData.targetNames.push(ve);const Ie=ie.morphTargetDictionary[ve],ke=ie.geometry.morphAttributes;pe(ke.position[Ie].array,ve,sr.BLEND_POSITION,Ee.position),ke.normal&&pe(ke.normal[Ie].array,ve,sr.BLEND_NORMAL,Ee.normal)}}),console.warn("taking only mesh 0 for morph targets now");for(const K in e.expressionManager.expressionMap){const fe=e.expressionManager.expressionMap[K],ie=fe._binds.map(Ee=>({mesh:0,index:Ee.index,weight:Ee.weight*100}));if(ie.length>0){let Ee=!1;for(const C in zn)if(K===zn[C]&&K!=="surprised"){h.push({name:K,presetName:n0e(K),binds:ie,isBinary:fe.isBinary}),Ee=!0;break}Ee===!1&&h.push({name:K,presetName:"unknown",binds:ie,isBinary:fe.isBinary})}}S.forEach(K=>{const fe=K.type===Fi.Group?K.children[0]:K,ie=new Float32Array(fe.skeleton.boneInverses.map(Ee=>Ee.elements).flat());F.push(new CA(new lt(ie,16),Jr.FLOAT,sr.BIND_MATRIX,Bo.MAT4,fe.name,fe.name))}),b.push(...F.map(K=>({componentType:K.valueType,count:K.attribute.count,max:K.max,min:K.min,normalized:!1,type:K.accessorsType})));const k=l0e(S,F,m);S.forEach((K,fe)=>{w.push({mesh:fe,name:K.name,rotation:[K.quaternion.x,K.quaternion.y,K.quaternion.z,K.quaternion.w],scale:[K.scale.x,K.scale.y,K.scale.z],skin:fe,translation:[K.position.x,K.position.y,K.position.z]})});const Q=A0e(S,F,D),z={humanBones:[]};c.humanBones.forEach(K=>{D.indexOf(K.node.name)!=-1&&z.humanBones.push({bone:i0e(K.bone),node:D.indexOf(K.node.name),useDefaultValues:!0})});const j={floatProperties:{_DstBlend:.5,_ShadeShift:.5,_ShadeToony:.5,_ShadingGradeRate:.5},keywordMap:{_NORMALMAP:!1,MTOON_OUTLINE_COLOR_FIXED:!0,MTOON_OUTLINE_WIDTH_WORLD:!0},name:"VRMCombinedMat",renderQueue:2e3,shader:"VRM/MToon",tagMap:{RenderType:"Opaque"},textureProperties:{_MainTex:0,_ShadeTexture:0},vectorProperties:{_Color:[1,1,1,1],_EmissionColor:[0,0,0,1],_EmissionMap:[0,0,1,1],_MainTex:[0,0,1,1],_OutlineColor:[0,0,0,1],_OutlineWidthTexture:[0,0,1,1],_ReceiveShadowTexture:[0,0,1,1],_RimColor:[0,0,0,1],_RimTexture:[0,0,1,1],_ShadeColor:[.9,.9,.9,1]}},T={name:"STDCombinedMat",shader:"VRM_USE_GLTFSHADER"},H=[];f.forEach(K=>{K.type=="ShaderMaterial"?H.push(Object.assign({},j)):H.push(Object.assign({},T))});const me=A,ee={};i.forEach(K=>{for(let fe=0;fe<L.length;fe++){const ie=L[fe];if(ee[K.name]||(ee[K.name]=[]),ie.name===K.bones.name){ee[K.name].push(fe);break}}});const U=[],se=((l=S.find(K=>K.isSkinnedMesh))==null?void 0:l.skeleton)||null;for(let K=0;K<se.bones.length;K++){const fe=se.bones[K];if(fe.userData.VRMcolliders){const ie={node:D.indexOf(fe.name),colliders:[],name:fe.name};fe.userData.VRMcolliders.forEach(Ee=>{const C=Ee.sphere;ie.colliders.push({radius:C.radius*a,offset:{x:C.offset[0]*a,y:C.offset[1]*a,z:C.offset[2]*a}})}),U.push(ie)}}console.log("COLLIDER GROUPS",U);const le=K=>{for(let fe=0;fe<L.length;fe++)if(L[fe].name===K)return fe;return-1},Ae=[];i.forEach(K=>{var fe;const ie=K.settings,Ee={bones:[],center:-1,colliderGroups:[],dragForce:ie.dragForce,gravityDir:{x:ie.gravityDir.x,y:ie.gravityDir.y,z:ie.gravityDir.z},gravityPower:ie.gravityPower,hitRadius:ie.hitRadius,stiffiness:ie.stiffness};for(const P of K.bones){const G=le(P.name);if(G===-1){console.warn("Spring bone "+P.name+" was removed during cleanup process. Skipping.");return}Ee.bones.push(G)}const C=[];K.colliderGroups.forEach(P=>{const G=P.colliders[0];if(G!=null){const te=G.parent,ae=U.findIndex(pe=>pe.name===te.name);ae!=-1?C.includes(ae)||C.push(ae):console.warn("No collider group for bone name: ",te.name+" was found")}else console.warn("No colliders definition were present in vrm file file for: ",K.name+" spring bones")}),Ee.colliderGroups.push(...C),Ee.center=le((fe=K.center)==null?void 0:fe.name),Ee.center==-1&&console.debug("no center bone for spring bone "+K.name),Ae.push(Ee)});const ge={boneGroups:Ae,colliderGroups:U};console.log(ge),me.texture=g?x.length-1:void 0;const ne=await Promise.all(E.map(async K=>({buffer:s?await zO(K.imageBitmap):GO(K.imageBitmap),type:sr.IMAGE})));F.forEach((K,fe)=>{K.buffer?ne.push({buffer:K.buffer,typeString:"",type:K.type}):K.sparse&&(ne.push({buffer:K.sparse.indices,typeString:"indices",type:K.type,count:K.sparse.count}),ne.push({buffer:K.sparse.values,typeString:"values",type:K.type})),ne.length-1}),g&&ne.push({buffer:s?await zO(g.imageBitmap):GO(g.imageBitmap),type:sr.IMAGE});let de=0,Te=0,re=0,N=0;const he=ne.map(K=>{const fe={buffer:0,byteLength:K.buffer.byteLength,byteOffset:de,target:K.type===sr.IMAGE||K.type===sr.BIND_MATRIX||K.typeString==="indices"||K.typeString==="values"?void 0:K.type===sr.INDEX?Jr.ELEMENT_ARRAY_BUFFER:Jr.ARRAY_BUFFER};return de+=K.buffer.byteLength,K.type===sr.IMAGE?(x[Te++].bufferView=N,N++):F[re].sparse?(b[re].sparse==null&&(b[re].sparse={}),K.typeString==="indices"&&(b[re].sparse.count=K.count,b[re].sparse[K.typeString]={bufferView:N,byteOffset:0,componentType:Jr.UNSIGNED_INT}),K.typeString==="values"&&(b[re].sparse[K.typeString]={bufferView:N,byteOffset:0}),K.typeString==="values"&&re++,N++):(F[re].bufferIndex=N,b[re].bufferView=N,re++,N++),fe}),oe=f0e(r,w);a0e(me);const Z=["KHR_materials_unlit","KHR_texture_transform","VRM"];s&&Z.push("KHR_texture_basisu");for(const K of Q){const fe=b.filter(ie=>ie.type=="MAT4");for(let ie of fe)if(K.joints.length!=ie.count)throw new Error(`The number of joints in the skin is not equal to the number of Accessors of type MAT4. Got ${K.joints.length} when accessors show ${ie.count} This is usually because of a bone count mismatch in your VRMs!`)}const $={accessors:b,asset:d,buffers:[{byteLength:de}],bufferViews:he,extensions:{VRM:{blendShapeMaster:{blendShapeGroups:h},firstPerson:{firstPersonBone:44,firstPersonBoneOffset:new Y,lookAtHorizontalInner:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtHorizontalOuter:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtTypeName:"Bone",lookAtVerticalDown:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10},lookAtVerticalUp:{curve:[0,0,0,1,1,1,1,0],xRange:90,yRange:10}},materialProperties:H,humanoid:z,meta:me,secondaryAnimation:ge,specVersion:"0.0"}},extensionsUsed:Z,images:x,materials:R,meshes:k,nodes:w,samplers:B,scenes:oe,skins:Q,textures:M};console.log("output",$);const ce=new VO(ES(JSON.stringify($,void 0,2)),"JSON"),W=new VO(Lm(ne.map(K=>K.buffer)),"BIN\0"),V=Lm([ce.buffer,W.buffer]),J=Lm([ES("glTF"),xS(2,4),xS(V.byteLength+12,4)]);o(Lm([J,V]))}}function a0e(t){t.title=t.title||"Character",t.version=t.version||"1",t.author=t.author||"Anon",t.contactInformation=t.contactInformation||"",t.reference=t.reference||"",t.allowedUserName=t.allowedUserName||"Everyone",t.violentUssageName=t.violentUssageName||"Disallow",t.sexualUssageName=t.sexualUssageName||"Disallow",t.commercialUssageName=t.commercialUssageName||"Disallow",t.otherPermissionUrl=t.otherPermissionUrl||"",t.licenseName=t.licenseName||"Redistribution_Prohibited",t.otherLicenseUrl=t.otherLicenseUrl||""}function $z(t){return t.children.length<=0?[t]:[t].concat(t.children.map(e=>$z(e)).flat())}const o0e=new e0e;async function zO(t){const e=await createImageBitmap(t),r=document.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");n.drawImage(e,0,0);const i=n.getImageData(0,0,r.width,r.height),s=new Uint8Array(i.data.buffer);return await o0e.compress(s,r.width,r.height,4,{normalMap:!1,uastc:!1,qualityLevel:50,compressionLevel:2,uastcFlags:"DEFAULT",compressionUASTC_Rdo_Level:18,uastcRDO:!1,uastcRDOQualityScalar:1,uastcRDODictSize:4096,uastcRDOMaxSmoothBlockErrorScale:10,uastcRDOMaxSmoothBlockStdDev:18,uastcRDODontFavorSimplerModes:!1,ETC1SQualityLevel:128,ETC1SmaxEndpoints:0,ETC1SEndpointRdoThreshold:1.25,ETC1SMaxSelectors:0,ETC1SSelectorRdoThreshold:1.25,ETC1SNoEndpointRdo:!1,ETC1SNoSelectorRdo:!1,supercmp_scheme:"Zstd"})}function GO(t){const e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0);const r=e.toDataURL("image/png"),n=atob(r.split(",")[1]),i=(4-n.length%4)%4,s=new ArrayBuffer(n.length+i),a=new DataView(s);for(let o=0;o<n.length;o++)a.setUint8(o,n.charCodeAt(o));for(let o=n.length;o<n.length+i;o++)a.setUint8(o,0);return s}function xS(t,e){const r=new ArrayBuffer(e);return new DataView(r).setUint32(0,t,!0),r}function ES(t){return new TextEncoder().encode(t).buffer}function Lm(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;const r=new Uint8Array(e);let n=0;for(let i=0;i<t.length;++i)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r.buffer}function eM(t,e){const r=e===Jr.UNSIGNED_SHORT?2:4,n=t.array;let i=0;const s=new ArrayBuffer(t.count*t.itemSize*r),a=new DataView(s);for(let o=0;o<t.count;o++)for(let l=0;l<t.itemSize;l++){let A;t.itemSize>4?A=n[o*t.itemSize+l]:l===0?A=t.getX(o):l===1?A=t.getY(o):l===2?A=t.getZ(o):A=t.getW(o),e===Jr.UNSIGNED_SHORT?a.setUint16(i,A,!0):e===Jr.UNSIGNED_INT?a.setUint32(i,A,!0):a.setFloat32(i,A,!0),i+=r}return s}class VO{constructor(e,r){this.data=e,this.type=r;const n=this.padBuffer(this.data,r==="JSON"?32:0);this.buffer=Lm([xS(n.byteLength,4),ES(this.type),n])}padBuffer(e,r){const n=Math.ceil(e.byteLength/4)*4;if(e.byteLength===n)return e;const i=new ArrayBuffer(n);return new Uint8Array(i).set(new Uint8Array(e)),new Uint8Array(i).fill(r,e.byteLength),i}}const WO=t=>{const e=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],r=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY];for(let n=0;n<t.length;n+=3)e[0]=Math.max(e[0],t[n]),e[1]=Math.max(e[1],t[n+1]),e[2]=Math.max(e[2],t[n+2]),r[0]=Math.min(r[0],t[n]),r[1]=Math.min(r[1],t[n+1]),r[2]=Math.min(r[2],t[n+2]);return{max:e,min:r}};class CA{constructor(e,r,n,i,s,a,o){if(this.attribute=e,this.type=n,this.valueType=r,this.accessorsType=i,this.meshName=s,this.name=a,o){const{indices:l,values:A,count:c,targetMeshDataIndex:u}=o,h=new lt(l,1),d=new lt(A,e.itemSize);if(this.targetMeshDataIndex=u,this.sparse={targetMeshDataIndex:u,count:c,indices:eM(h,Jr.UNSIGNED_INT),values:eM(d,Jr.FLOAT)},n===sr.POSITION||n===sr.BLEND_POSITION){const{min:f,max:m}=WO(A);this.max=m,this.min=f}}else if(this.buffer=eM(this.attribute,this.valueType),n===sr.POSITION||n===sr.BLEND_POSITION){const{min:l,max:A}=WO(this.attribute.array);this.max=A,this.min=l}}}var zd;(function(t){t.MeshBasicMaterial="MeshBasicMaterial",t.MeshStandardMaterial="MeshStandardMaterial",t.MToonMaterial="MToonMaterial"})(zd||(zd={}));var Bo;(function(t){t.SCALAR="SCALAR",t.VEC2="VEC2",t.VEC3="VEC3",t.VEC4="VEC4",t.MAT4="MAT4"})(Bo||(Bo={}));var sr;(function(t){t.POSITION="POSITION",t.NORMAL="NORMAL",t.UV="UV",t.INDEX="INDEX",t.SKIN_WEIGHT="SKIN_WEIGHT",t.SKIN_INDEX="SKIN_INDEX",t.BLEND_POSITION="BLEND_POSITION",t.BLEND_NORMAL="BLEND_NORMAL",t.BIND_MATRIX="BIND_MATRIX",t.IMAGE="IMAGE"})(sr||(sr={}));var Fi;(function(t){t.Group="Group",t.SkinnedMesh="SkinnedMesh",t.Object3D="Object3D",t.Bone="Bone"})(Fi||(Fi={}));const l0e=(t,e,r)=>t.map(n=>{const i=n.type===Fi.Group?n.children[0]:n,s=n.type===Fi.Group?n.children.map(a=>a):[n];return{name:n.name,primitives:s.map(a=>{const o=e.map(A=>A.meshName===i.name?A.type:null),l=Array.isArray(a.material)?a.material[0].name:a.material.name;return{attributes:{JOINTS_0:o.indexOf(sr.SKIN_INDEX),NORMAL:o.indexOf(sr.NORMAL),POSITION:o.indexOf(sr.POSITION),TEXCOORD_0:o.indexOf(sr.UV),WEIGHTS_0:o.indexOf(sr.SKIN_WEIGHT)},extras:{targetNames:a.geometry.userData.targetNames},indices:e.map(A=>A.type===sr.INDEX&&A.meshName===i.name?A.name:null).indexOf(a.name),material:r.indexOf(l),mode:4,targets:i.geometry.userData.targetNames?i.geometry.userData.targetNames.map(A=>{const c=e.map(d=>d.type===sr.BLEND_NORMAL&&d.meshName===i.name?d.name:null).indexOf(_S+A),u=e.map(d=>d.type===sr.BLEND_POSITION&&d.meshName===i.name?d.name:null).indexOf(_S+A),h={};return u!==-1&&(h.POSITION=u),c!==-1&&(h.NORMAL=c),h}):void 0}})}}),A0e=(t,e,r)=>t.map(n=>{const i=n.type===Fi.Group?n.children[0]:n;return{inverseBindMatrices:e.map(s=>s.type===sr.BIND_MATRIX?s.meshName:null).indexOf(i.name),joints:i.skeleton.bones.map(s=>r.indexOf(s.name)).filter(s=>s!==-1),skeleton:r.indexOf(i.skeleton.bones[0].name)}}),c0e=(t,e)=>t.map(r=>{let n,i=null;if(r=r.userData.vrmMaterial?r.userData.vrmMaterial:r,r.type==="ShaderMaterial")i={},i.shadeMultiplyTexture={index:e.map(d=>d.name).indexOf(r.uniforms.shadeMultiplyTexture.name)},n=r.color?[1,1,1,1]:void 0;else{const d=r;n=d.color?[d.color.r,d.color.g,d.color.b,1]:void 0}let s=-1;r.map?s=e.map(d=>d.name).indexOf(r.name):r.uniforms&&r.uniforms.map&&(s=e.map(d=>d.name).indexOf(r.uniforms.map.name));let a=-1;r.roughnessMap&&(a=e.map(d=>d.name).indexOf(r.name+"_orm"));let o=-1;r.normalMap&&(o=e.map(d=>d.name).indexOf(r.name+"_normal"));const l=s>=0?{extensions:{KHR_texture_transform:{offset:[0,0],scale:[1,1]}},index:s,texCoord:0}:void 0,A={baseColorFactor:n,baseColorTexture:l},c=a>=0?{index:a,texCoord:0}:void 0,u=o>=0?{index:o,texCoord:0}:void 0;if(c)A.metallicRoughnessTexture=c;else{const d=(()=>{switch(r.type){case zd.MeshStandardMaterial:return r.metalness;case zd.MeshBasicMaterial:return 0;default:return 0}})(),f=(()=>{switch(r.type){case zd.MeshStandardMaterial:return r.roughness;case zd.MeshBasicMaterial:return .9;default:return .9}})();A.metallicFactor=d,A.roughnessFactor=f}const h={alphaCutoff:r.alphaTest>0?r.alphaTest:void 0,alphaMode:r.transparent?"BLEND":r.alphaTest>0?"MASK":"OPAQUE",doubleSided:r.side===2,extensions:r.type==="ShaderMaterial"?{KHR_materials_unlit:{}}:void 0,name:r.name,pbrMetallicRoughness:A};return u&&(h.normalTexture=u),h}),u0e=(t,e,r)=>(e?t.concat(e):t).filter(n=>n&&n.imageBitmap).map(n=>({bufferView:-1,mimeType:r,name:n.name})),h0e=t=>t.map(()=>({magFilter:Jr.LINEAR,minFilter:Jr.LINEAR,wrapS:Jr.REPEAT,wrapT:Jr.REPEAT})),d0e=(t,e)=>e?t.map((r,n)=>({sampler:0,extensions:{KHR_texture_basisu:{source:n}}})):t.map((r,n)=>({sampler:0,source:n})),f0e=(t,e)=>{const r=e.map(n=>n.name);return[{nodes:t.children.filter(n=>n.type===Fi.Object3D||n.type===Fi.SkinnedMesh||n.type===Fi.Group||n.type===Fi.Bone).map(n=>r.indexOf(n.name))}]};function p0e(t,e,r){var n,i;const s=[],a=[];for(const A in t)((i=(n=t[A])==null?void 0:n.vrm)==null?void 0:i.meta)!=null&&(t[A].vrm.meta.authors!=null?a.push(t[A].vrm.meta):s.push(t[A].vrm.meta));s.length+a.length==1&&(s.length==1?s[0].title!=null&&(r=s[0].title):a[0].name!=null&&(r=a[0].name)),e!=null&&(e.authors!=null?a.push(e):s.push(e));const o=g0e(s),l=m0e(o,a);return l.licenseUrl="https://vrm.dev/licenses/1.0/",l.name=r,l}function m0e(t,e){let{authors:r=[],otherLicenseUrl:n=[],contactInformation:i=[],references:s=[],allowExcessivelyViolentUsage:a=void 0,allowExcessivelySexualUsage:o=void 0,commercialUsage:l=void 0,copyrightInformation:A="",avatarPermission:c=void 0,otherPermissionUrl:u=[]}=t,h,d,f,m="unnecessary",g,p=[];e.forEach(M=>{r=r.concat(At(M.authors)),n=n.concat(At(M.otherLicenseUrl)),i=i.concat(At(M.contactInformation)),s=s.concat(At(M.references)),u=u.concat(At(M.otherPermissionUrl)),M.allowExcessivelyViolentUsage===!1&&(a=!1),M.allowExcessivelySexualUsage===!1&&(o=!1),l=Ll(w0e,l,M.commercialUsage),A=Ll(eG,A,M.copyrightInformation),c=Ll(b0e,c,M.avatarPermission),M.allowAntisocialOrHateUsage===!1&&(h=h=!1),M.allowPoliticalOrReligiousUsage===!1&&(d=d=!1),M.allowRedistribution===!1&&(f=f=!1),M.creditNotation==="required"&&(m="required"),p=p.concat(At(M.thirdPartyLicenses)),g=Ll(y0e,g,M.modification)});const v=[...new Set(r)].filter(M=>M!=""&&M!=null&&M!="undefined"),y=[...new Set(n)].filter(M=>M!=""&&M!=null&&M!="undefined"),_=[...new Set(i)].filter(M=>M!=""&&M!=null&&M!="undefined"),E=[...new Set(s)].filter(M=>M!=""&&M!=null&&M!="undefined"),x=[...new Set(u)].filter(M=>M!=""&&M!=null&&M!="undefined"),B=[...new Set(p)].filter(M=>M!=""&&M!=null&&M!="undefined");return{authors:v,otherLicenseUrl:y.length==0?"":y.join(", "),contactInformation:_.length==0?"":_.join(", "),references:E,otherPermissionUrl:x.length==0?"":x.join(", "),thirdPartyLicenses:B.length==0?"":B.join(", "),allowExcessivelyViolentUsage:a,allowExcessivelySexualUsage:o,commercialUsage:l,copyrightInformation:A,avatarPermission:c,allowAntisocialOrHateUsage:h,allowPoliticalOrReligiousUsage:d,allowRedistribution:f,creditNotation:m,modification:g}}function g0e(t){let e=[],r=[],n=[],i=[],s=[],a,o,l,A,c;t.forEach(g=>{e=e.concat(At(g.author)),r=r.concat(At(g.contactInformation)),n=n.concat(At(g.reference)),i=i.concat(At(g.otherPermissionUrl)),s=s.concat(At(g.otherLicenseUrl)),a=Ll(_0e,a,g.allowedUsername),o=Ll(tM,o,g.violentUssageName),l=Ll(tM,l,g.sexualUssageName),A=Ll(tM,A,g.commercialUssageName),c=Ll(eG,c,g.licenseName)});const u=[...new Set(e)].filter(g=>g!=""&&g!=null&&g!="undefined"),h=[...new Set(r)].filter(g=>g!=""&&g!=null&&g!="undefined"),d=[...new Set(n)].filter(g=>g!=""&&g!=null&&g!="undefined"),f=[...new Set(i)].filter(g=>g!=""&&g!=null&&g!="undefined"),m=[...new Set(s)].filter(g=>g!=""&&g!=null&&g!="undefined");return{authors:u,otherLicenseUrl:m,contactInformation:h,references:d,allowExcessivelyViolentUsage:o==="Allow",allowExcessivelySexualUsage:l==="Allow",commercialUsage:A==="Allow"?"personalProfit":"personalNonProfit",copyrightInformation:c,avatarPermission:v0e(a),otherPermissionUrl:f}}function v0e(t){if(t=="OnlyAuthor")return"onlyAuthor";if(t=="ExplicitlyLicensedPerson")return"onlySeparatelyLicensedPerson";if(t=="Everyone")return"everyone"}const y0e={prohibited:0,allowModification:1,allowModificationRedistribution:2},w0e={personalNonProfit:0,personalProfit:1,corporation:2},b0e={onlyAuthor:0,onlySeparatelyLicensedPerson:1,everyone:2},_0e={OnlyAuthor:0,ExplicitlyLicensedPerson:1,Everyone:2},tM={Disallow:0,Allow:1},eG={Redistribution_Prohibited:0,Other:1,CC_BY_NC_ND:2,CC_BY_ND:3,CC_BY_NC_SA:4,CC_BY_SA:5,CC_BY_NC:6,CC_BY:7,CC0:8};function Ll(t,e,r){return e===void 0?r:r==null||!(r in t)||t[e]<t[r]?e:r}function tG(t){const e=t.clone(),r=[];return t.traverse(n=>{n.userData.origIndexBuffer&&r.push(n.userData.origIndexBuffer)}),e.traverse(n=>{n.userData.origIndexBuffer&&(n.userData.origIndexBuffer=r.shift())}),e}function x0e(t){const e=tG(t);let r;const n=[];e.traverse(s=>{if(!r&&s.isSkinnedMesh&&(r=Hz(s)),s.isSkinnedMesh){if(s.geometry=s.geometry.clone(),s.skeleton=r,n.push(s),Array.isArray(s.material)){const a=s.material;s.material=new Df,s.material.map=a[0].map}s.userData.origIndexBuffer&&s.geometry.setIndex(s.userData.origIndexBuffer)}});const i=new qn;return n.forEach(s=>{i.add(s)}),i.add(r.bones[0]),i}async function E0e(t,e,r){const n=await hR(t,r),i=await rG(n,e,r);return new Blob([i],{type:"model/gltf-binary"})}function B0e(t,e,r,n){return new Promise(async(i,s)=>{const a=`${r&&r!==""?r:"AvatarCreatorModel"}`;M0e(t,e,n).then(o=>{iG(o,`${a}.vrm`),i()})})}async function M0e(t,e,r){const n=await hR(t,e,r);return rG(n,e,r)}function hR(t,e,r){const n=tG(t);r.mergeAppliedMorphs=!0;const{createTextureAtlas:i=!0}=r;return i?Age(n,e,r):(console.log("no atlas"),age(n,e,r))}async function T0e(t,e="",r){const n=`${e&&e!==""?e:"AvatarCreatorModel"}`,{optimized:i=!0}=r,s=i?await hR(t,r):x0e(t);C0e(s).then(a=>{if(a instanceof ArrayBuffer)iG(a,`${n}.glb`);else{const o=JSON.stringify(a,null,2);k0e(o,`${n}.gltf`)}})}function C0e(t){return new Promise(e=>new KI().parse(t,r=>{e(r)},r=>{console.error("Error parsing",r)},{trs:!1,onlyVisible:!1,truncateDrawRange:!0,binary:!0,forcePowerOfTwoTextures:!1,maxTextureSize:1024}))}function S0e(t){var e,r;const n=[];for(const s in t)if(((r=(e=t[s])==null?void 0:e.vrm)==null?void 0:r.springBoneManager)!=null){const a=t[s].vrm.springBoneManager.joints;for(const o of a)n.some(l=>l.name===o.bone.name)||n.push({name:o.bone.name,settings:o.settings,bone:o.bone,colliderGroups:o.colliderGroups,center:o.center})}const i=[];return n.forEach(s=>{if(n.find(a=>{var o;return a.name==((o=s.bone.parent)==null?void 0:o.name)})==null){i.push({bones:[s],settings:s.settings,center:s.center,colliderGroups:s.colliderGroups,name:s.bone.name});return}}),n.map(s=>{const a=i.find(o=>o.bones.find(l=>{var A;return l.name==((A=s.bone.parent)==null?void 0:A.name)})!=null);a!=null&&a.bones.push({name:s.name,bone:s.bone})}),i}function I0e(t){var e,r;const n=[];for(const s in t)if(((r=(e=t[s])==null?void 0:e.vrm)==null?void 0:r.springBoneManager)!=null){const a=t[s].vrm.springBoneManager.joints;for(const o of a)n.some(l=>l.name===o.bone.name)||n.push({name:o.bone.name,settings:o.settings,bone:o.bone,colliderGroups:o.colliderGroups,center:o.center})}const i=[];return n.forEach(s=>{for(const a in qg)if(s.bone.parent.name==qg[a]){i.push(s);break}}),i}function R0e(t){const e={};return t.skeleton.bones.map(r=>{for(const n in qg)if(qg[n]===r.name){e[r.name]={node:r};break}}),e}function U0e(t,e,r){const n=Nf(t,"SkinnedMesh");return{humanBones:R0e(n[0]),materials:t.userData.atlasMaterial,meta:F0e(e),...r.mergeAppliedMorphs?{expressionManager:O0e(t)}:{}}}function F0e(t){return t=t||{},{authors:["CharacterStudio"],metaVersion:"1",version:"v1",name:"CharacterCreator",licenseUrl:"https://vrm.dev/licenses/1.0/",commercialUssageName:"personalNonProfit",contactInformation:"https://m3org.com/",allowExcessivelyViolentUsage:!1,allowExcessivelySexualUsage:!1,allowPoliticalOrReligiousUsage:!1,allowAntisocialOrHateUsage:!1,creditNotation:"required",allowRedistribution:!1,modification:"prohibited",...t}}function rG(t,e,r){const{screenshot:n=null,isVrm0:i=!1,vrmMeta:s=null,scale:a=1,vrmName:o="CharacterCreator"}=r,l=p0e(e,s,o);return new Promise(async A=>{const c=r.outputVRM0??r.isVrm0??!0,u=c?new s0e:new xpe,h={...P0e(e),...U0e(t,l,r)};let d;t.traverse(m=>{m.isSkinnedMesh&&(d=m)}),(()=>{for(let m=0;m<d.skeleton.bones.length;m++){const g=d.skeleton.bones[m];g.position.x*=-1,g.position.z*=-1}d.skeleton.bones.forEach(m=>{m.updateMatrix(),m.updateMatrixWorld()}),d.skeleton.calculateInverses(),d.skeleton.computeBoneTexture(),d.skeleton.update()})();const f=c?S0e(e):I0e(e);c?u.parse(h,t,n,f,r.ktxCompression,a,m=>{A(m)}):u.parse(h,t,n,m=>{A(m)})})}function nG(t,e){const r=document.createElement("a");r.style.display="none",document.body.appendChild(r),r.href=URL.createObjectURL(t),r.download=e,r.click()}function k0e(t,e){nG(new Blob([t],{type:"text/plain"}),e)}function iG(t,e){nG(L0e(t),e)}function L0e(t){return new Blob([t],{type:"application/octet-stream"})}function P0e(t){for(const e in t)if(t[e].vrm)return t[e].vrm}function O0e(t){const e=new J1;let r=t.userData.expressionManagerToClone;if(!r){r=new J1;for(const n of Object.values(zn)){const i=new Z1(n);r.registerExpression(i)}}e.copy(r),t.userData.expressionManagerToClone=null;for(const n of t.children){if(!n.isMesh&&!n.isSkinnedMesh||!n.morphTargetDictionary)continue;const i=n.userData.bindMorphs;if(!i||!wge(n,i.old))continue;const s=(l,A)=>{var c;return((c=l.find(u=>u.index==A))==null?void 0:c.weight)||0},a=Object.entries(zn).flat(),o=Object.keys(i.old).filter(l=>a.includes(l));for(const l of Object.keys(r.expressionMap)){const A=r.expressionMap[l];if(!A)continue;const c=A._binds;if(!c||c.length==0){e.unregisterExpression(A);continue}for(const u of o){const h=i.new[u]||i.new[u.toLowerCase()],d=i.old[u]||i.old[u.toLowerCase()];if(h){const f=[];t.traverse(p=>{!p.isMesh&&!p.isSkinnedMesh||h.primitives.includes(p.id)&&f.push(p)}),e.unregisterExpression(A),A._binds=[];const m=s(c,d.index),g=new Z1(A.expressionName);g.copy(A),console.log("adding bind",A.expressionName),g.addBind(new q1({index:h.index,weight:m,primitives:f})),e.registerExpression(g)}else e.unregisterExpression(A)}}for(const l of e.expressions){const A=D0e(l)[0][0],c=l._binds,u=i.new[A].index,h=c.map(d=>new q1({index:u,weight:d.weight,primitives:[n]}));l._binds=h}}return e}function D0e(t){const e=t._binds;return e?e.map(r=>{let n=[];return r.primitives.forEach(i=>{const s=Object.entries(i.morphTargetDictionary).find(([a,o])=>o==r.index);s&&n.push(s[0])}),n}):[]}function sG(t,e){return e&&t?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t||e}const N0e=t=>{const e=t.parser.json.meshes,r=t.parser.associations;t.scene.traverse(n=>{var i;if(n instanceof no&&n.morphTargetDictionary){let s=!1;const a=r.get(n);if(typeof a>"u")return;const o=a.meshes||0,l=a.primitives||0,A=e[o],c=A==null?void 0:A.primitives[l];if((i=c==null?void 0:c.extras)!=null&&i.targetNames){const u=c.extras.targetNames;for(let h=0;h<u.length;h++)n.morphTargetDictionary[u[h]]=h,s=!0}if(s)for(const u in n.morphTargetDictionary)isNaN(parseInt(u))||delete n.morphTargetDictionary[u]}})},Q0e=t=>{var e,r;(e=t.parser.json.extensions)!=null&&e.VRM?H0e(t):(r=t.parser.json.extensions)!=null&&r.VRMC_vrm?j0e(t):console.warn("No valid vrm file was provided")},H0e=t=>{var e,r,n;const i=t.parser.json,s=t.scene,a=i.nodes,o=(n=(r=(e=i.extensions)==null?void 0:e.VRM)==null?void 0:r.secondaryAnimation)==null?void 0:n.colliderGroups,l=[],A=a.map(c=>aG(c.name,l));o!=null&&o.forEach(c=>{const u=A[c.node],h=Yz(s,u);if(h!=null){const d=c.colliders;h.userData.VRMcolliders=d.map(f=>({sphere:{radius:f.radius,offset:[f.offset.x,f.offset.y,f.offset.z]}}))}h.userData.VRMcollidersID=Wz()})},j0e=t=>{var e,r,n,i;const s=t.parser.json,a=t.scene,o=s.nodes,l=(r=(e=s.extensions)==null?void 0:e.VRMC_springBone)==null?void 0:r.colliderGroups,A=(i=(n=s.extensions)==null?void 0:n.VRMC_springBone)==null?void 0:i.colliders,c=[],u=o.map(h=>aG(h.name,c));l!=null&&l.forEach(h=>{const d=At(h.colliders);let f=-1,m=null;d.forEach(g=>{if(f!=A[g].node){f=A[g].node;const p=u[f];m=Yz(a,p),m.userData.VRMcolliders=[]}if(m!=null){const p=A[g].shape;for(const v in p){const y=p[v];y!=null&&y.offset&&(y.offset[0]=-y.offset[0])}m.userData.VRMcollidersID=Wz(),m.userData.VRMcolliders.push(p)}else console.error("no node with name "+u[f]+" was found")})})},z0e=t=>{const e=[];return t.scene.traverse(r=>{var n;(n=r.userData)!=null&&n.VRMcolliders&&r.userData.VRMcolliders.length>0&&e.push(r)}),e},aG=(t,e)=>{const r=Tt.sanitizeNodeName(t||"");return r in e?r+"_"+ ++e[r]:(e[r]=0,r)},sb=[0,400,560,2400,4800],ab=[0,500,700,3e3,6e3],BS=[],Bl=[],dR=1024,oG=44100;for(let t=0;t<sb.length;t++)Bl[t]=Math.round(2*dR/oG*sb[t]);for(let t=0;t<ab.length;t++)BS[t]=Math.round(2*dR/oG*ab[t]);class ob{constructor(e){this.vrm=e;const r=(n,i)=>{requestAnimationFrame(r),this.update(n,i)};r()}start(e){this.audioContext=new AudioContext,this.mediaStreamSource=this.audioContext.createMediaStreamSource(e),this.meter=ob.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter)}startFromAudioFile(e){this.audioContext||(this.audioContext=new AudioContext),this.userSpeechAnalyzer||(this.userSpeechAnalyzer=this.audioContext.createAnalyser()),this.userSpeechAnalyzer.smoothingTimeConstant=.5,this.userSpeechAnalyzer.fftSize=dR,this.mediaStreamSource&&this.mediaStreamSource.stop(),this.audioContext.decodeAudioData(e).then(r=>{this.mediaStreamSource=this.audioContext.createBufferSource(),this.mediaStreamSource.buffer=r,this.meter=ob.createAudioMeter(this.audioContext),this.mediaStreamSource.connect(this.meter),this.mediaStreamSource.connect(this.audioContext.destination),this.mediaStreamSource.start(),this.mediaStreamSource.connect(this.userSpeechAnalyzer)})}destroy(){var e,r,n;return(e=this.meter)==null||e.shutdown(),this.meter=null,(r=this.mediaStreamSource)==null||r.disconnect(),((n=this.audioContext)==null?void 0:n.close().catch(()=>{}))||Promise.resolve()}update(e){if(this.meter){const{volume:r}=this.meter;if(r<.01)this.vrm.expressionManager.setValue(zn.Oh,0),this.vrm.expressionManager.setValue(zn.Ah,0),this.vrm.expressionManager.setValue(zn.Ee,0);else{const{ah:n,oh:i,ee:s}=this.update2();this.vrm.expressionManager.setValue(zn.Oh,i),this.vrm.expressionManager.setValue(zn.Ah,n),this.vrm.expressionManager.setValue(zn.Ee,s),this.vrm.expressionManager.update(e)}}}update2(){function e(A){const c=new Float32Array(A.length);for(let u=0;u<A.length;u++)c[u]=.5+(A[u]+20)/140;return c}const r=new Float32Array(this.userSpeechAnalyzer.frequencyBinCount);this.userSpeechAnalyzer.getFloatFrequencyData(r);const n=e(r),i=new Float32Array(sb.length),s=new Float32Array(ab.length);for(let A=0;A<sb.length-1;A++){for(let c=Bl[A];c<=Bl[A+1];c++)n[c]>0&&(i[A]+=n[c]);i[A]/=Bl[A+1]-Bl[A]}for(let A=0;A<ab.length-1;A++){for(let c=Bl[A];c<=Bl[A+1];c++)n[c]>0&&(s[A]+=n[c]);i[A]/=Bl[A+1]-Bl[A],s[A]=s[A]/(BS[A+1]-BS[A])}const a=Math.max(s[1],i[1])>.2?1-2*Math.max(i[2],s[2]):(1-2*Math.max(i[2],s[2]))*5*Math.max(i[1],s[1]),o=3*Math.max(i[3],s[3]),l=.8*(Math.max(i[1],s[1])-Math.max(i[3],s[3]));return{oh:a,ee:l,ah:o}}static createAudioMeter(e){const r=e.createScriptProcessor(512);return r.onaudioprocess=n=>{const i=n.inputBuffer.getChannelData(0),s=i.length;let a=0,o;for(let A=0;A<s;A++)o=i[A],Math.abs(o)>=r.clipLevel&&(r.clipping=!0,r.lastClip=window.performance.now()),a+=o*o;const l=Math.sqrt(a/s);r.volume=Math.max(l,r.volume*r.averaging)},r.clipping=!1,r.lastClip=0,r.volume=0,r.clipLevel=.98,r.averaging=.95,r.clipLag=750,r.connect(e.destination),r.checkClipping=()=>r.clipping?(r.lastClip+r.clipLag<window.performance.now()&&(r.clipping=!1),r.clipping):!1,r.shutdown=()=>{r.disconnect(),r.onaudioprocess=null},r}}const rM=new Y;class G0e{constructor(e,r,n){this.bonesInfo=[],this.curMousePos=new Ke,this.hotzoneSection=s(),this.enabled=!1,this.userActivated=!1,this.lookInterest=1,this.hasInterest=!0,this.interestSpeed=.3,this.onCanvas=!0,this.camera=n,this.maxLookPercent={neck:{maxy:15,miny:10,maxx:30,minx:10},spine:{maxy:0,miny:0,maxx:30,minx:10},left:{maxy:15,miny:20,maxx:35,minx:35},right:{maxy:15,miny:20,maxx:35,minx:35}},window.addEventListener("mousemove",a=>{this.curMousePos={x:a.clientX,y:a.clientY}});const i=document.getElementById(r);i&&(i.addEventListener("mouseleave",()=>{this.onCanvas=!1}),i.addEventListener("mouseenter",()=>{this.onCanvas=!0})),window.addEventListener("resize",()=>{this.hotzoneSection=s()});function s(){const a=window.innerWidth*e/100,o=(window.innerWidth-a)/2;return{xStart:o,xEnd:window.innerWidth-o,yStart:50,yEnd:window.innerHeight-80}}}setActive(e){console.log("is activating"),this.userActivated=e}setCamera(e){this.camera=e}addVRM(e){const r=e.data.isVRM0||!1,n=e.humanoid.humanBones;r||(n.neck.node.userData.inverseLookAt=!0,n.spine.node.userData.inverseLookAt=!0,n.leftEye&&(n.leftEye.node.userData.inverseLookAt=!0),n.rightEye&&(n.rightEye.node.userData.inverseLookAt=!0));const i={vrm:e,neckBone:n.neck.node,spineBone:n.spine.node,leftEyeBone:n.leftEye?n.leftEye.node:null,rightEyeBone:n.rightEye?n.rightEye.node:null};this.bonesInfo.push(i)}removeVRM(e){const r=this.bonesInfo.find(n=>n.vrm===e);if(r){const n=this.bonesInfo.indexOf(r);this.bonesInfo.splice(n,1)}}_getMouseDegrees(e,r,n){let i=0,s=0,a,o,l,A,c={x:window.innerWidth,y:window.innerHeight};return e<=c.x/2&&(a=c.x/2-e,o=a/(c.x/2)*100,i=n.maxx*o/100*-1),e>=c.x/2&&(a=e-c.x/2,o=a/(c.x/2)*100,i=n.minx*o/100),r<=c.y/2&&(l=c.y/2-r,A=l/(c.y/2)*100,s=n.maxy*.5*A/100*-1),r>=c.y/2&&(l=r-c.y/2,A=l/(c.y/2)*100,s=n.miny*A/100),{x:i,y:s}}lerp(e,r,n){return(1-n)*e+n*r}_moveJoint(e,r){const n=e.userData.inverseLookAt===!0?1:-1;if(Object.keys(e).length!==0){const i=(this.camera.position.y-1.8)*window.innerHeight/2;let s=this._getMouseDegrees(this.curMousePos.x,this.curMousePos.y-i,r);const a=.8;e.rotation.y=this.lerp(Et.degToRad(s.x),e.rotation.y,a),e.rotation.x=this.lerp(Et.degToRad(s.y*n),e.rotation.x,a)}}update(){rM.set(0,0,1),rM.applyQuaternion(this.camera.quaternion);const e=rM.z>0;this.curMousePos.x>this.hotzoneSection.xStart&&this.curMousePos.x<this.hotzoneSection.xEnd&&this.curMousePos.y>this.hotzoneSection.yStart&&this.curMousePos.y<this.hotzoneSection.yEnd&&e&&this.enabled&&this.userActivated&&this.bonesInfo.forEach(r=>{this._moveJoint(r.neckBone,this.maxLookPercent.neck),this._moveJoint(r.spineBone,this.maxLookPercent.spine),this._moveJoint(r.leftEyeBone,this.maxLookPercent.left),this._moveJoint(r.rightEyeBone,this.maxLookPercent.right)})}}class V0e{constructor(e){De(this,"targetVRMMeshes",[]),De(this,"baseTexture",null),De(this,"textures",[]),De(this,"applied",new Map),De(this,"imageDataRenderer"),this.characterManager=e,this.imageDataRenderer=new L_(512,512)}get scene(){return this.characterManager.parentModel}get manifest(){return this.characterManager.manifestData}get targetMaterial(){if(!this.targetVRMMeshes.length)throw new Error("No target meshes found, call setTargetVRM");let e=this.targetVRMMeshes.map(n=>At(n.material)).flat(),r=e[0];if(r.map)return r;for(let n=1;n<e.length;n++)if(e[n].map){r=e[n];break}else continue;return r}setTargetVRM(e,r){this.targetVRMMeshes=[],e.scene.traverse(n=>{n instanceof no&&(r&&r.length?r.includes(n.name)&&this.targetVRMMeshes.push(n):this.targetVRMMeshes.push(n))})}async update(){const e=this.targetMaterial,r=e.map.image,n=r.width,i=r.height;this.imageDataRenderer.clearRenderer(),this.imageDataRenderer.width=n,this.imageDataRenderer.height=i;const s=this.imageDataRenderer.render(this.textures,e.color||new He(1,1,1),new He(1,1,1),!0,!0);s||console.error("Failed to update OverlayTextureManager, ImageData is undefined");const a=cR({width:n,height:i,transparent:!0}),o=await createImageBitmap(s);a.drawImage(o,0,0);const l=new Sr(a.canvas);l.colorSpace=Ut,l.flipY=!1,l.needsUpdate=!0,this.targetMaterial.map=l}async loadOverlayTexture(e,r){const n=new Uc,i=e.getAllDecals().find(l=>l.id===r);if(!i)throw new Error("Decal "+r+" not found in trait group");if(this.targetVRMMeshes.length===0)throw new Error("No target meshes found");const s=i.directory;if(!s)throw new Error("Decal not found in trait group");const a=sG(this.manifest.getTraitsDirectory(),s),o=await n.loadAsync(a);return o.colorSpace=Ut,o.flipY=!1,this.textures.length||this.textures.push(this.targetMaterial.map.clone()),this.textures.push(o),this.applied.set(r,o),this.update()}removeOverlayTexture(e){if(this.applied.has(e)){const r=this.applied.get(e);if(!r)return this.applied.delete(e),Promise.resolve();this.textures.splice(this.textures.indexOf(r),1),this.applied.delete(e)}return this.update()}removeAllOverlayedTextures(){this.textures=[this.textures[0]],this.applied.clear(),this.update()}}class W0e{constructor(e){De(this,"traitRestrictions"),De(this,"restrictionMaps",{}),De(this,"itemRestrictions",new Map),De(this,"manifestData"),De(this,"logRules",()=>{const r=[];for(const n in this.restrictionMaps){const i=this.restrictionMaps[n];i.restrictedTypes.size&&r.push(`Trait: ${i.group.trait} is restrciting traits ${Array.from(i.restrictedTraits.values()).join(", ")}`),i.restrictedTypes.size&&r.push(`Trait: ${i.group.trait} also restricts types ${Array.from(i.restrictedTypes.values()).join(", ")}`)}this.itemRestrictions.forEach((n,i)=>{r.push(`Item ${i} is restricting item ${Array.from(n.values()).join(", ")}`)}),console.log(r.join(`
`))}),De(this,"_setupSpecificItemRestrictions",()=>{const r=this.manifestData.getAllTraitOptions();r.forEach(n=>{this.itemRestrictions.set(n.id,new Set)});for(const n of r){if(!n._restrictedItems||n._restrictedItems.length==0)continue;const i=new Set;for(const s of n._restrictedItems){if(!r.find(a=>a.id==s)){console.warn(`[${n.traitGroup.trait}] Restricted item ${s} not found`);continue}i.add(s)}if(this.itemRestrictions.set(n.id,i),i.size>0)for(const s of i){const a=this.itemRestrictions.get(s);a&&(a.has(n.id)||a.add(n.id))}}this.itemRestrictions.forEach((n,i)=>{n.size==0&&this.itemRestrictions.delete(i)})}),De(this,"createTraitRestriction",r=>{if(this.restrictionMaps[r.trait])return this.restrictionMaps[r.trait];const n=new K0e(this,r);return r.restrictions=n,this.restrictionMaps[r.trait]=n,n}),De(this,"getForbiddenTraits",r=>{const n=new Set;for(const i in this.restrictionMaps){if(!r.includes(i))continue;const s=this.restrictionMaps[i];for(const a of s.restrictedTraits)n.add(a)}return Array.from(n.values())}),De(this,"getForbiddenTypes",r=>{const n=new Set;for(const i in this.restrictionMaps){if(!r.includes(i))continue;const s=this.restrictionMaps[i];for(const a of s.restrictedTraits)n.add(a)}return Array.from(n.values())}),De(this,"_validateTraitRestrictions",()=>{const r={};if(this.traitRestrictions)for(const n in this.traitRestrictions)r[n]==null&&(r[n]={restrictedTraits:[],restrictedTypes:[]}),r[n].restrictedTraits=At(this.traitRestrictions[n].restrictedTraits).filter(i=>!!i),r[n].restrictedTypes=At(this.traitRestrictions[n].restrictedTypes).filter(i=>!!i);this.traitRestrictions=r}),this.manifestData=e,this.traitRestrictions=e.traitRestrictions||{},this._validateTraitRestrictions()}_init(){this._setupSpecificItemRestrictions(),this.logRules()}}class K0e{constructor(e,r){De(this,"group"),De(this,"restrictedTraits"),De(this,"restrictedTypes"),De(this,"isTraitAllowed",s=>!this.restrictedTraits.has(s)),De(this,"isTypeAllowed",s=>!this.restrictedTypes.has(s)),De(this,"isReverseTraitAllowed",s=>{const a=this.manifestRestrictions.restrictionMaps[s];if(a){const o=a.isTraitAllowed(this.traitId);return{allowed:o,blockingTrait:o?void 0:this.traitId}}return{allowed:!0,blockingTrait:void 0}}),De(this,"isReverseTypeAllowed",(s,a)=>{if(!s)return{allowed:!0};const o=this.manifestRestrictions.restrictionMaps[a];if(o){const l=o.isTypeAllowed(s);return{allowed:l,blockingType:l?void 0:this.traitId}}return{allowed:!0}}),De(this,"isItemAllowed",(s,a)=>{if(!s)return!0;const o=this.manifestRestrictions.itemRestrictions.get(s);return o?!o.has(a):!0}),De(this,"isReverseItemAllowed",(s,a)=>{if(!s)return{allowed:!0,blockingItemId:void 0};const o=this.manifestRestrictions.itemRestrictions.get(a);if(o){const l=!o.has(s);return{allowed:l,blockingItemId:l?void 0:s}}return{allowed:!0,blockingItemId:void 0}}),De(this,"isReverseAllowed",(s,a,o,l)=>{const A=this.isReverseTraitAllowed(a),c=this.isReverseTypeAllowed(s,a),u=this.isReverseItemAllowed(o,l);return{allowed:A.allowed&&c.allowed&&u.allowed,blocking:{blockingTrait:A.blockingTrait,blockingType:c.blockingType,blockingItemId:u.blockingItemId}}});var n,i;this.manifestRestrictions=e,this.group=r,this.restrictedTraits=new Set(((n=this.manifestRestrictions.traitRestrictions[r.trait])==null?void 0:n.restrictedTraits)||[]),this.restrictedTypes=new Set(((i=this.manifestRestrictions.traitRestrictions[r.trait])==null?void 0:i.restrictedTypes)||[]);for(const s in this.manifestRestrictions.traitRestrictions){if(s==r.trait)continue;const a=this.manifestRestrictions.traitRestrictions[s];for(const o of this.restrictedTraits){const l=this.manifestRestrictions.restrictionMaps[o];l&&(l.restrictedTraits.has(r.trait)||l.restrictedTraits.add(s))}a.restrictedTraits.includes(r.trait)&&!this.restrictedTraits.has(s)&&this.restrictedTraits.add(s)}}get manifestData(){return this.manifestRestrictions.manifestData}get traitId(){return this.group.trait}}class nM{constructor(e){const{assetsLocation:r,traitsDirectory:n,thumbnailsDirectory:i,traitIconsDirectorySvg:s,animationPath:a,exportScale:o,displayScale:l,initialTraits:A,requiredTraits:c,randomTraits:u,colliderTraits:h,lipSyncTraits:d,blinkerTraits:f,traitRestrictions:m,defaultCullingLayer:g,defaultCullingDistance:p,offset:v,vrmMeta:y,traits:_,textureCollections:E,decalCollections:x,colorCollections:B,canDownload:M=!0,downloadOptions:R={}}=e;this.assetsLocation=r,this.traitsDirectory=n,this.thumbnailsDirectory=i,this.traitIconsDirectorySvg=s,this.displayScale=l||o||1,this.animationPath=At(a),this.requiredTraits=At(c),this.randomTraits=At(u),this.initialTraits=A||[...new Set(this.requiredTraits.concat(this.randomTraits))],this.colliderTraits=At(h),this.lipSyncTraits=At(d),this.blinkerTraits=At(f),this.traitRestrictions=m,this.defaultCullingLayer=g,this.defaultCullingDistance=p,this.offset=v,this.canDownload=M,this.downloadOptions=R;const I=()=>{const L=[];for(const D in _)L.push(_[D].trait);return L};this.allTraits=I(),I(),R.vrmMeta=R.vrmMeta||y,R.scale=R.scale||o||1,R.mToonAtlasSize=R.mToonAtlasSize||2048,R.mToonAtlasSizeTransp=R.mToonAtlasSizeTransp||1024,R.stdAtlasSize=R.stdAtlasSize||2048,R.stdAtlasSizeTransp=R.stdAtlasSizeTransp||1024,R.exportStdAtlas=R.exportStdAtlas||!1,R.exportMtoonAtlas=R.exportMtoonAtlas||!0,R.screenshotFaceDistance=R.screenshotFaceDistance||1,R.screenshotFaceOffset=R.screenshotFaceOffset||[0,0,0],R.screenshotResolution=R.screenshotResolution||[512,512],R.screenshotBackground=R.screenshotBackground||[.1,.1,.1],R.screenshotFOV=R.screenshotFOV||75,!R.exportStdAtlas&&!R.exportMtoonAtlas&&(R.exportMtoonAtlas=!0),this.manifestRestrictions=new W0e(this),this.textureTraits=[],this.textureTraitsMap=null,this.createTextureTraits(E),this.decalTraits=[],this.decalTraitsMap=null,this.createDecalTraits(x),this.colorTraits=[],this.colorTraitsMap=null,this.createColorTraits(B),this.modelTraits=[],this.modelTraitsMap=null,this.createModelTraits(_),this.manifestRestrictions._init()}appendManifestData(e,r){e.textureTraits.forEach(n=>{const i=this.getTextureGroup(n.trait);i!=null?i.appendCollection(n,r):(this.textureTraits.push(n),this.textureTraitsMap.set(n.trait,n))}),e.colorTraits.forEach(n=>{const i=this.getColorGroup(n.trait);i!=null?i.appendCollection(n,r):(this.colorTraits.push(n),this.colorTraitsMap.set(n.trait,n))}),e.modelTraits.forEach(n=>{const i=this.getModelGroup(n.trait);i!=null?i.appendCollection(n,r):(this.modelTraits.push(n),this.modelTraitsMap.set(n.trait,n))}),console.log(e)}getExportOptions(){return this.downloadOptions}getGroupModelTraits(){return this.modelTraits}getInitialTraits(){return this.getRandomTraits(this.initialTraits)}getAllTraits(){return this.getRandomTraits(this.allTraits)}getTraitOptionById(e){return this.getAllTraitOptions().find(r=>r.id==e)}getTraitOptionsByType(e){return this.getAllTraitOptions().filter(r=>r.type==e)}getAllTraitOptions(){return this.modelTraits.map(e=>e==null?void 0:e.getCollection()).flat()}getAllBlendShapeTraits(){return this.modelTraits.map(e=>e.getCollection()).flat().map(e=>e.blendshapeTraits).flat().map(e=>e==null?void 0:e.collection).flat().filter(e=>!!e)}isColliderRequired(e){return this.colliderTraits.indexOf(e)!=-1}isLipsyncTrait(e){return this.lipSyncTraits.indexOf(e)!=-1}async getNFTraitOptionsFromURL(e,r){const n=await this._fetchJson(e);return this.getNFTraitOptionsFromObject(n,r)}getNFTraitOptionsFromObject(e,r){const n=e.attributes;if(n){r=At(r);const i=[];return n.forEach(s=>{if(r.indexOf(s.trait_type)==-1){const a=this.getTraitOption(s.trait_type,s.value);a&&i.push(a)}}),i}else return console.warn("No attiributes parameter was found in ",e),null}getRandomTraits(e){const r=[];return(e||this.randomTraits).forEach(n=>{const i=this.getRandomTrait(n);i&&r.push(i)}),this._filterTraitOptions(r)}getRandomTrait(e){var r,n;const i=this.getModelGroup(e);if(i){const s=i.getRandomTrait();if(s){const a=(r=s.targetTextureCollection)==null?void 0:r.getRandomTrait(),o=(n=s.targetColorCollection)==null?void 0:n.getRandomTrait();return new iM(s,a,o)}else return null}else return console.warn("No trait group with name "+e+" was found."),null}async _fetchJson(e){return await(await fetch(e)).json()}getTraitOption(e,r){var n,i;const s=this.getModelTrait(e,r);if(s){const a=(n=s.targetTextureCollection)==null?void 0:n.getRandomTrait(),o=(i=s.targetColorCollection)==null?void 0:i.getRandomTrait();return new iM(s,a,o)}return null}_filterTraitOptions(e){const r=[],n=[];for(let i=0;i<e.length;i++){const s=e[i].traitModel;let a=!1;for(let o=0;o<r.length;o++){const l=r[o].traitModel;if(a=s.isRestricted(l),a)break}a?n.push(e[i]):r.push(e[i])}return n.length>0&&console.log("options were filtered to fullfill restrictions: ",n),r}getCustomTraitOption(e,r){const n=this.getCustomModelTrait(e,r);return n?new iM(n,null,null):null}getCustomModelTrait(e,r){var n;return(n=this.getModelGroup(e))==null?void 0:n.getCustomTrait(r)}getModelTrait(e,r){var n;return(n=this.getModelGroup(e))==null?void 0:n.getTrait(r)}getModelTraits(e){const r=this.getModelGroup(e);return r?r.getCollection():(console.warn("No model group with name "+e),null)}getModelGroup(e){return this.modelTraitsMap.get(e)}getTextureTrait(e,r){var n;return(n=this.getTextureGroup(e))==null?void 0:n.getTrait(r)}getTextureGroup(e){return this.textureTraitsMap.get(e)}getDecalTrait(e,r){var n;return(n=this.getDecalGroup(e))==null?void 0:n.getTrait(r)}getDecalGroup(e){return this.decalTraitsMap.get(e)}getColorTrait(e,r){var n;return(n=this.getColorGroup(e))==null?void 0:n.getTrait(r)}getColorGroup(e){return this.colorTraitsMap.get(e)}getTraitsDirectory(){let e=(this.assetsLocation||"")+(this.traitsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getThumbnailsDirectory(){let e=(this.assetsLocation||"")+(this.thumbnailsDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getTraitIconsDirectorySvg(){let e=(this.assetsLocation||"")+(this.traitIconsDirectorySvg||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getAssetsDirectory(){let e=this.assetsLocation||"";return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}getDecalsDirectory(){let e=(this.assetsLocation||"")+(this.decalDirectory||"");return!e.endsWith("/")&&!e.endsWith("\\")&&(e+="/"),e}createModelTraits(e,r=!1){r&&(this.modelTraits=[]);let n=!1;At(e).forEach(i=>{var s,a;const o=new Y0e(this,i);this.modelTraits.push(o),n&&(s=o.getAllDecals())!=null&&s.length?console.warn("Detected multiple traits with decals; only one trait with decals is supported at the moment"):(a=o.getAllDecals())!=null&&a.length||(n=!0)}),this.modelTraitsMap=new Map(this.modelTraits.map(i=>[i.trait,i])),this.modelTraits.forEach(i=>{this.manifestRestrictions.createTraitRestriction(i)})}createTextureTraits(e,r=!1){r&&(this.textureTraits=[]),At(e).forEach(n=>{this.textureTraits.push(new X0e(this,n))}),this.textureTraitsMap=new Map(this.textureTraits.map(n=>[n.trait,n]))}createDecalTraits(e,r=!1){r&&(this.decalTraits=[]),At(e).forEach(n=>{this.decalTraits.push(new Z0e(this,n))}),this.decalTraitsMap=new Map(this.decalTraits.map(n=>[n.trait,n]))}createColorTraits(e,r=!1){r&&(this.colorTraits=[]),At(e).forEach(n=>{this.colorTraits.push(new J0e(this,n))}),this.colorTraitsMap=new Map(this.colorTraits.map(n=>[n.trait,n]))}}class Y0e{constructor(e,r){De(this,"collection"),De(this,"manifestData"),De(this,"restrictions");const{trait:n,name:i,iconSvg:s,cameraTarget:a={distance:3,height:1},cullingDistance:o,cullingLayer:l,collection:A}=r;this.manifestData=e,this.isRequired=e.requiredTraits.indexOf(n)!==-1,this.trait=n,this.name=i,this.iconSvg=s,this.fullIconSvg=e.getTraitIconsDirectorySvg()+s,this.cameraTarget=a,this.cullingDistance=o,this.cullingLayer=l,this.collection=[],this.collectionMap=null,this.createCollection(A)}appendCollection(e,r){e.collection.forEach(n=>{const i=this.getTrait(n.id);if(i!=null)if(r){console.log(`Model with id ${n.id} exists and will be replaced with new one`),this.collectionMap.set(n.id,n);const s=this.collection.indexOf(i);this.collection[s]=n}else console.log(`Model with id ${n.id} exists, skipping`);else this.collection.push(n),this.collectionMap.set(n.id,n)})}createCollection(e,r=!1){r&&(this.collection=[]),At(e).forEach(n=>{this.collection.push(new KO(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getCustomTrait(e){return new KO(this,{directory:e,fullDirectory:e,id:"_custom",name:"Custom"})}getTrait(e){return this.collectionMap.get(e)}getAllDecals(){return this.collection.map(e=>e.targetDecalCollection).flat().map(e=>e==null?void 0:e.collection).flat().filter(e=>!!e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}getCollection(){return this.collection}}class X0e{constructor(e,r){const{trait:n,collection:i}=r;n?this.trait=n:(console.warn("TraitTexturesGroup is missing property trait"),this.trait="undefined"+Math.floor(Math.random()*10)),this.manifestData=e,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,r){e.collection.forEach(n=>{const i=this.getTrait(n.id);if(i!=null)if(r){console.log(`Texture with id ${n.id} exists and will be replaced with new one`),this.collectionMap.set(n.id,n);const s=this.collection.indexOf(i);this.collection[s]=n}else console.log(`Texture with id ${n.id} exists, skipping`);else this.collection.push(n),this.collectionMap.set(n.id,n)})}createCollection(e,r=!1){r&&(this.collection=[]),At(e).forEach(n=>{this.collection.push(new lG(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class Z0e{constructor(e,r){De(this,"trait"),De(this,"collection"),De(this,"collectionMap");const{trait:n,collection:i}=r;this.manifestData=e,n?this.trait=n:(console.warn("DecalTextureGroup is missing property trait"),this.trait="undefined"+Math.floor(Math.random()*10)),this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,r=!1){e.collection.forEach(n=>{const i=this.getTrait(n.id);if(i!=null)if(r){console.log(`Texture with id ${n.id} exists and will be replaced with new one`),this.collectionMap.set(n.id,n);const s=this.collection.indexOf(i);this.collection[s]=n}else console.log(`Texture with id ${n.id} exists, skipping`);else this.collection.push(n),this.collectionMap.set(n.id,n)})}createCollection(e,r=!1){r&&(this.collection=[]),At(e).forEach(n=>{this.collection.push(new eve(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class J0e{constructor(e,r){const{trait:n,collection:i}=r;this.manifestData=e,this.trait=n,this.collection=[],this.collectionMap=null,this.createCollection(i)}appendCollection(e,r){e.collection.forEach(n=>{const i=this.getTrait(n.id);if(i!=null)if(r){console.log(`Color with id ${n.id} exists and will be replaced with new one`),this.collectionMap.set(n.id,n);const s=this.collection.indexOf(i);this.collection[s]=n}else console.log(`Color with id ${n.id} exists, skipping`);else this.collection.push(n),this.collectionMap.set(n.id,n)})}createCollection(e,r=!1){r&&(this.collection=[]),At(e).forEach(n=>{this.collection.push(new tve(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class KO{constructor(e,r){De(this,"type"),De(this,"blendshapeTraits",[]),De(this,"decalMeshNameTargets",[]),De(this,"targetDecalCollection",null),De(this,"traitGroup"),De(this,"blendshapeTraitsMap",new Map),De(this,"_restrictedItems",[]);const{id:n,type:i="",directory:s,name:a,thumbnail:o,cullingDistance:l,cullingLayer:A,textureCollection:c,blendshapeTraits:u,colorCollection:h,decalCollection:d,decalMeshNameTargets:f,fullDirectory:m,fullThumbnail:g,restrictedItems:p}=r;if(this.manifestData=e.manifestData,this.traitGroup=e,this.decalMeshNameTargets=At(f),this.id=n,this.directory=s,this._restrictedItems=p||[],m)this.fullDirectory=m;else if(Array.isArray(s)){this.fullDirectory=[];for(let v=0;v<s.length;v++)this.fullDirectory[v]=e.manifestData.getTraitsDirectory()+s[v]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+s;this.name=a,this.thumbnail=o,this.fullThumbnail=g||e.manifestData.getThumbnailsDirectory()+o,this.cullHiddenMeshes=l||[0,0],this.cullingLayer=A??e.cullingLayer??e.manifestData.defaultCullingLayer??0,this.cullingDistance=l||e.cullingDistance||e.manifestData.defaultCullingDistance||[0,0],this.type=i,this.targetTextureCollection=c?e.manifestData.getTextureGroup(c):null,this.targetColorCollection=h?e.manifestData.getColorGroup(h):null,this.targetDecalCollection=d?e.manifestData.getDecalGroup(d):null,u&&Array.isArray(u)&&(this.blendshapeTraits=u.map(v=>new q0e(this,v)),this.blendshapeTraitsMap=new Map(this.blendshapeTraits.map(v=>[v.trait,v])))}isRestricted(e){var r,n;return!(e==null||(r=this.traitGroup.restrictions)!=null&&r.isTraitAllowed(e.traitGroup.trait)||(n=this.traitGroup.restrictions)!=null&&n.isTypeAllowed(e.type))}getGroupBlendShapeTraits(){return this.blendshapeTraits}getBlendShapes(e){var r,n;return(n=(r=this.blendshapeTraitsMap)==null?void 0:r.get(e))==null?void 0:n.collection}getBlendShape(e,r){var n,i;return(i=(n=this.blendshapeTraitsMap)==null?void 0:n.get(e))==null?void 0:i.getTrait(r)}}class q0e{constructor(e,r){De(this,"trait"),De(this,"name"),De(this,"isBlendShapeGroup",!0),De(this,"collection",[]),De(this,"cameraTarget",null),De(this,"collectionMap",null);const{trait:n,name:i,collection:s,cameraTarget:a=e.traitGroup.cameraTarget||{distance:3,height:1}}=r;this.modelTrait=e,this.trait=n,this.name=i,this.cameraTarget=a,this.createCollection(s)}createCollection(e,r=!1){r&&(this.collection=[]),At(e).forEach(n=>{this.collection.push(new $0e(this,n))}),this.collectionMap=new Map(this.collection.map(n=>[n.id,n]))}getTrait(e){return this.collectionMap.get(e)}getTraitByIndex(e){return this.collection[e]}getRandomTrait(){return this.collection.length>0?this.collection[Math.floor(Math.random()*this.collection.length)]:null}}class $0e{constructor(e,r){De(this,"id"),De(this,"name"),De(this,"fullThumbnail"),De(this,"isBlendShape",!0);const{id:n,name:i,fullThumbnail:s}=r;n||console.warn("BlendShapeTrait is missing id, parent trait: "+e.trait),i||console.warn("BlendShapeTrait is missing name, parent trait: "+e.trait),this.parentGroup=e,this.id=n,this.fullThumbnail=s,this.name=i}getGroupId(){return this.parentGroup.trait}}class lG{constructor(e,r){const{id:n,directory:i,fullDirectory:s,name:a,thumbnail:o}=r;if(this.traitGroup=e,this.id=n,this.directory=i,s)this.fullDirectory=s;else if(Array.isArray(i)){this.fullDirectory=[];for(let l=0;l<i.length;l++)this.fullDirectory[l]=e.manifestData.getTraitsDirectory()+i[l]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+o;this.name=a,this.thumbnail=o,this.fullThumbnail=e.manifestData.getThumbnailsDirectory()+o}}class eve extends lG{constructor(e,r){super(e,r),De(this,"id"),De(this,"directory"),De(this,"fullDirectory"),De(this,"name"),De(this,"thumbnail"),De(this,"fullThumbnail"),De(this,"traitGroup");const{id:n,directory:i,fullDirectory:s,name:a,thumbnail:o}=r;if(this.traitGroup=e,this.id=n,this.directory=i,s)this.fullDirectory=s;else if(Array.isArray(i)){this.fullDirectory=[];for(let l=0;l<i.length;l++)this.fullDirectory[l]=e.manifestData.getTraitsDirectory()+i[l]}else this.fullDirectory=e.manifestData.getTraitsDirectory()+o;this.name=a,this.thumbnail=o,this.fullThumbnail=e.manifestData.getThumbnailsDirectory()+o}}class tve{constructor(e,r){const{id:n,value:i,name:s}=r;this.traitGroup=e,this.id=n,this.name=s,this.value=i}}class iM{constructor(e,r,n){this.traitModel=e,this.traitTexture=r,this.traitColor=n}}const sM=new Ke,YO=new V8,wl=new Y;class rve{constructor(e){De(this,"emotionManager",null),De(this,"animationManager",null),De(this,"blinkManager"),De(this,"screenshotManager"),De(this,"toggleBinaryBlendShape",(r,n,i)=>{r.traverse(s=>{if(s.isMesh||s.isSkinnedMesh){const a=s;if(!a.morphTargetDictionary||!a.morphTargetInfluences)return;const o=a.morphTargetDictionary[n.id];o!=null&&(a.morphTargetInfluences[o]=i?1:0)}})}),this._start(e)}async _start(e){const{parentModel:r=null,renderCamera:n=null,manifestURL:i=null}=e;this.rootModel=new Lt,this.characterModel=new Lt,this.parentModel=r,r&&r.add(this.rootModel),this.lipSync=null,this.lookAtManager=null,this.animationManager=new Bge,this.screenshotManager=new Dge(this,r||this.rootModel),this.overlayedTextureManager=new V0e(this),this.blinkManager=new Qge(.1,.1,.5,5),this.emotionManager=new Hge,this.rootModel.add(this.characterModel),this.renderCamera=n,this.manifestData=null,this.manifest=null,i&&(this.loadManifest(i),this.animationManager.setScale(this.manifestData.displayScale)),this.avatar={},this.storedAvatar={},this.traitLoadManager=new nve;const s=new qn;s.renderOrder=1e4,this.rootModel.add(s),this.vrmHelperRoot=s}togglePauseSpringBoneAnimation(e){for(const[r,n]of Object.entries(this.avatar))n.vrm.springBoneManager&&(n.vrm.springBoneManager.paused=e)}update(e){var r,n,i;if(this.lookAtManager!=null&&this.lookAtManager.update(),this.avatar){for(const s in this.avatar)if(((r=this.avatar[s])==null?void 0:r.vrm)!=null){if((n=this.avatar[s].vrm.springBoneManager)!=null&&n.paused)return;(i=this.avatar[s].vrm.springBoneManager)==null||i.update(e)}}}addLookAtMouse(e,r,n,i=!0){var s;this.lookAtManager=new G0e(e,r,n),this.lookAtManager.enabled=!0;for(const a in this.avatar)((s=this.avatar[a])==null?void 0:s.vrm)!=null&&this.lookAtManager.addVRM(this.avatar[a].vrm)}toggleCharacterLookAtMouse(e){this.lookAtManager!=null?(this.lookAtManager.setActive(e),this.animationManager&&this.animationManager.enableMouseLook(e)):console.warn("toggleCharacterLookAtMouse() was called, but no lookAtManager exist. Make sure to set it up first with addLookArMous()")}savePortraitScreenshot(e,r,n,i=1,s=0){this.blinkManager.enableScreenshot(),this.characterModel.traverse(a=>{a.isSkinnedMesh&&a.skeleton.bones.filter(o=>o.name==="head")[0].getWorldPosition(wl)}),wl.z+=.3,wl.y+=s,this.screenshotManager.cameraFrameManager.setCamera(wl,i),this.screenshotManager.saveScreenshot(e,r,n),this.blinkManager.disableScreenshot()}cameraRaycastCulling(e,r,n=!0){if(this.renderCamera==null){console.warn("No camera was set in character manager. Please call setRenderCamera(camera) before calling this function");return}const i=()=>{this.characterModel.traverse(A=>{A.isMesh&&A.userData.origIndexBuffer&&(A.userData.clippedIndexGeometry=A.geometry.index.clone(),A.geometry.setIndex(A.userData.origIndexBuffer))})},s=()=>{this.characterModel.traverse(A=>{A.isMesh&&A.userData.origIndexBuffer&&A.geometry.setIndex(A.userData.clippedIndexGeometry)})},a=(A,c)=>{for(let u=0;u<A.length;u+=3)if(c[0]==A[u]&&c[1]==A[u+1]&&c[2]==A[u+2])return u;return-1},o=(A,c)=>{var u,h;const d=A.object,f=A.face,m=[f.a,f.b,f.c],g=(h=(u=d.userData)==null?void 0:u.clippedIndexGeometry)==null?void 0:h.array;if(g!=null){const p=a(g,m),v=Array.from(g);if(p==-1&&!c){const y=[...v,...m];d.userData.clippedIndexGeometry=new lt(new Uint32Array(y),1,!1)}p!=1&&c&&(v.splice(p,3),d.userData.clippedIndexGeometry=new lt(new Uint32Array(v),1,!1))}};sM.x=e,sM.y=r,i(),YO.setFromCamera(sM,this.renderCamera);const l=YO.intersectObjects(this.characterModel.children);if(l.length>0){const A=l[0];o(A,n)}s()}removeCurrentCharacter(){const e=[];for(const r in this.avatar)e.push(new Dw({traitGroupID:r,traitModel:null}));e.forEach(r=>{this._addLoadedData(r)}),this.avatar={}}removeCurrentManifest(){this.removeCurrentCharacter(),this.manifest=null,this.manifestData=null,this.animationManager&&this.animationManager.clearCurrentAnimations()}canDownload(){var e;return((e=this.manifestData)==null?void 0:e.canDownload)||!0}downloadVRM(e,r=null){return new Promise(async(n,i)=>{if(this.canDownload())try{r=r||{};const s={...this.manifestData.getExportOptions(),...r};s.screenshot=this._getPortaitScreenshotTexture(!1,s),console.log(s),await B0e(this.characterModel,this.avatar,e,s),n()}catch(s){console.error("Error downloading VRM:",s.message),i(new Error("Failed to download VRM."))}else{const s="Download not supported.";console.error(s),i(new Error(s))}})}downloadGLB(e,r=null){if(console.log("XXX fix glb downloader"),this.canDownload()){r=r||{};const n={...this.manifestData.getExportOptions(),...r};T0e(this.characterModel,e,n)}else console.error("Download not supported")}getAvatarSelection(){var e,r={};for(const n in this.avatar)r[n]={name:this.avatar[n].name,id:(e=this.avatar[n].traitInfo)==null?void 0:e.id};return r}getBoneTriangleCount(){let e=0,r=new Set;for(const n in this.avatar)this.avatar[n].model.traverse(i=>{i.isMesh&&(e+=i.geometry.index.array.length),i.isSkinnedMesh&&i.skeleton.bones.forEach(s=>{r.add(s.name)})});return{triangles:e/3,bones:r.size}}getGroupTraits(){if(this.manifestData)return this.manifestData.getGroupModelTraits()}getBlendShapeGroupTraits(e,r){var n;return this.manifestData?(n=this.manifestData.getModelTrait(e,r))==null?void 0:n.getGroupBlendShapeTraits():[]}getCurrentCharacterModel(){return this.characterModel}isTraitGroupRequired(e){const r=this.manifestData.getModelGroup(e);return!!(r!=null&&r.isRequired)}getTraits(e){return this.manifestData?this.manifestData.getModelTraits(e):(console.warn("No manifest file has been loaded, please load it before trait models."),null)}getCurrentTraitID(e){var r,n;return(n=(r=this.avatar[e])==null?void 0:r.traitInfo)==null?void 0:n.id}getCurrentTraitData(e){var r;return(r=this.avatar[e])==null?void 0:r.traitInfo}getCurrentBlendShapeTraitData(e){var r;return((r=this.avatar[e])==null?void 0:r.blendShapeTraitsInfo)||{}}getCurrentTraitVRM(e){var r;return(r=this.avatar[e])==null?void 0:r.vrm}setParentModel(e){e.add(this.rootModel),this.parentModel=e,this.screenshotManager&&this.screenshotManager.setScene(this.parentModel)}setRenderCamera(e){this.renderCamera=e}loadRandomTraits(){return new Promise(async(e,r)=>{if(this.manifestData){const n=this.manifestData.getRandomTraits();await this._loadTraits(n),e()}else{const n="No manifest was loaded, random traits cannot be loaded.";console.error(n),r(new Error(n))}})}loadRandomTrait(e){return new Promise(async(r,n)=>{if(this.manifestData){const i=this.manifestData.getRandomTrait(e);await this._loadTraits(At(i)),r()}else{const i="No manifest was loaded, random traits cannot be loaded.";console.error(i),n(new Error(i))}})}loadTraitsFromNFT(e,r=!0,n=null){return new Promise(async(i,s)=>{try{if(this.manifestData){const a=this.manifestData.getNFTraitOptionsFromURL(e,n);await this._loadTraits(a,r),i()}else{const a="No manifest was loaded, NFT traits cannot be loaded.";console.error(a),s(new Error(a))}}catch(a){s(a)}})}loadTraitsFromNFTObject(e,r=!0,n=null){return new Promise(async(i,s)=>{if(this.manifestData)try{const a=this.manifestData.getNFTraitOptionsFromObject(e,n);await this._loadTraits(a,r),i()}catch(a){console.error("Error loading traits from NFT object:",a.message),s(new Error("Failed to load traits from NFT object."))}else{const a="No manifest was loaded, NFT traits cannot be loaded.";console.error(a),s(new Error(a))}})}loadInitialTraits(){return new Promise(async(e,r)=>{if(this.manifestData)await this._loadTraits(this.manifestData.getInitialTraits()),e();else{const n="No manifest was loaded, initial traits cannot be loaded.";console.error(n),r(new Error(n))}})}loadAllTraits(){return console.log("load all"),new Promise(async(e,r)=>{if(this.manifestData)await this._loadTraits(this.manifestData.getAllTraits()),e();else{const n="No manifest was loaded, initial traits cannot be loaded.";console.error(n),r(new Error(n))}})}loadBlendShapeTrait(e,r,n){if(!this.avatar[e]){console.warn(`Trait with name: ${e} was not found or not selected.`);return}if(!this.manifestData){console.warn("No manifest data was found.");return}try{this._loadBlendShapeTrait(e,r,n)}catch{console.error("Error loading blendshape trait "+e,r,n)}}removeBlendShapeTrait(e,r){this.avatar[e]?this._loadBlendShapeTrait(e,r,null):console.warn(`No trait with name: ${e} was found.`)}_getTraitAllowedRules(e,r){var n;const i=[];for(const s in this.avatar){const a=this.avatar[s],o=(n=a.traitInfo.traitGroup.restrictions)==null?void 0:n.isReverseAllowed(a.traitInfo.type,e,a.traitInfo.id,r);o&&!(o!=null&&o.allowed)&&i.push(o)}return i.length?i:[{allowed:!0,blocking:{}}]}_checkRestrictionsBeforeLoad(e,r){const n=this._getTraitAllowedRules(e,r);if(!n[0].allowed)for(const i of n){if(i.blocking.blockingTrait&&this.removeTrait(i.blocking.blockingTrait),i.blocking.blockingItemId){const s=this.manifestData.getTraitOptionById(i.blocking.blockingItemId);s&&this.removeTrait(s.traitGroup.trait)}if(i.blocking.blockingType&&this.manifestData.getTraitOptionsByType(i.blocking.blockingType).length)for(const s in this.avatar)this.avatar[s].traitInfo.type==i.blocking.blockingType&&this.removeTrait(s)}}loadTrait(e,r,n=!1){return new Promise(async(i,s)=>{if(this.manifestData)try{const a=this.manifestData.getTraitOption(e,r);this._checkRestrictionsBeforeLoad(e,r),a&&(await this._loadTraits(At(a),n),i())}catch(a){console.error("Error loading specific trait:",a.message),s(new Error("Failed to load specific trait."))}else{const a="No manifest was loaded, specific trait cannot be loaded.";console.error(a),s(new Error(a))}})}loadCustomTrait(e,r){return new Promise(async(n,i)=>{if(this.manifestData)try{const s=this.manifestData.getCustomTraitOption(e,r);s&&(await this._loadTraits(At(s)),n())}catch(s){console.error("Error loading custom trait:",s.message),i(new Error("Failed to load custom trait."))}else{const s="No manifest was loaded, custom trait cannot be loaded.";console.error(s),i(new Error(s))}})}loadCustomTexture(e,r){return new Promise(async(n,i)=>{var s;const a=(s=this.avatar[e])==null?void 0:s.model;if(a)await dge(a,r),n();else{const o="No Group Trait with name "+e+" was found.";console.warn(o),i(new Error(o))}})}setTraitColor(e,r){var n;const i=(n=this.avatar[e])==null?void 0:n.model;if(i)try{const s=new He(r);i.traverse(a=>{a.isMesh&&(a.material.type==="MeshStandardMaterial"?Array.isArray(a.material)?a.material.forEach(o=>{o.color=s}):a.material.color=s:(a.material[0].uniforms.litFactor.value=s,a.material[0].uniforms.shadeColorFactor.value=new He(s.r*.8,s.g*.8,s.b*.8)))})}catch(s){throw console.error("Error setting trait color:",s.message),new Error("Failed to set trait color.")}else{const s="No Group Trait with name "+e+" was found.";throw console.warn(s),new Error(s)}}removeTrait(e,r=!1){if(this.isTraitGroupRequired(e)&&!r){console.warn(`No trait with name: ${e} is not removable.`);return}if(this.manifestData.getModelGroup(e)){const n=new Dw({traitGroupID:e,traitModel:null});this._addLoadedData(n),JB(this.avatar)}else console.warn(`No trait with name: ${e} was found.`)}updateCullHiddenMeshes(){JB(this.avatar)}loadOptimizerManifest(){this.manifest={colliderTraits:["CUSTOM"],traits:[{name:"Custom",trait:"CUSTOM",collection:[]}]},this.manifestData=new nM(this.manifest)}getCurrentOptimizerCharacterModel(){var e;return(e=this.avatar.CUSTOM)==null?void 0:e.vrm}loadOptimizerCharacter(e){return this.loadCustomTrait("CUSTOM",e)}setManifest(e){return this.removeCurrentCharacter(),new Promise(async(r,n)=>{try{if(this.manifest=e,this.manifest){if(this.manifestData=new nM(this.manifest),this.animationManager)try{await this._animationManagerSetup(this.manifest.animationPath,this.manifest.assetsLocation,this.manifestData.displayScale)}catch(i){console.error("Error loading animations: "+i)}r()}else{const i="Failed to fetch or parse the manifest.";console.error(i),n(new Error(i))}}catch(i){console.error("Error setting manifest:",i.message),n(new Error("Failed to set the manifest."))}})}appendManifest(e,r){return new Promise(async(n,i)=>{try{r?this.manifest={...this.manifest||{},manifest:e}:this.manifest={manifest:e,...this.manifest||{}};const s=new nM(e);this.manifestData.appendManifestData(s),n()}catch(s){console.error("Error setting manifest:",s.message),i(new Error("Failed to set the manifest."))}})}loadManifest(e){return new Promise(async(r,n)=>{try{const i=await this._fetchManifest(e);this.setManifest(i).then(()=>{r()})}catch(i){console.error("Error loading manifest:",i.message),n(new Error("Failed to load the manifest."))}})}loadAppendManifest(e,r){return new Promise(async(n,i)=>{try{const s=await this._fetchManifest(e);this.appendManifest(s,r).then(()=>{n()})}catch(s){console.error("Error loading manifest:",s.message),i(new Error("Failed to load the manifest."))}})}async soloTargetGroupTrait(e){const r=At(e),n=[];for(const i in this.avatar)r.includes(i)&&n.push(this.manifestData.getTraitOption(i,this.avatar[i].traitInfo.id));await this._loadTraits(n,!0)}storeCurrentAvatar(){this.storedAvatar={...this.avatar}}async loadStoredAvatar(){const e=[];for(const r in this.storedAvatar)e.push(this.manifestData.getTraitOption(r,this.storedAvatar[r].traitInfo.id));console.log(e),this._loadTraits(e,!0)}async _loadTraits(e,r=!1){console.log("laoded traits:",e),await this.traitLoadManager.loadTraitOptions(At(e)).then(n=>{r&&this.getGroupTraits().forEach(i=>{n.some(s=>{var a;return((a=s.traitModel)==null?void 0:a.traitGroup.trait)===i.trait})||this.avatar[i.trait]!=null&&n.push(new Dw({traitGroupID:i.trait,traitModel:null}))}),n.forEach(i=>{this._addLoadedData(i)}),JB(this.avatar)})}async _loadBlendShapeTrait(e,r,n){const i=this.avatar[e];if(!i){console.warn(`Trait with name: ${e} was not found or not selected.`);return}if(i.blendShapeTraitsInfo||(i.blendShapeTraitsInfo={}),i.blendShapeTraitsInfo[r]&&this.toggleBinaryBlendShape(i.model,i.blendShapeTraitsInfo[r],!1),n==null){delete this.avatar[e].blendShapeTraitsInfo[r];return}const s=i.traitInfo.getBlendShape(r,n);if(!s){console.warn(`Blendshape with name: ${n} was not found.`);return}this.toggleBinaryBlendShape(i.model,s,!0),this.avatar[e].blendShapeTraitsInfo[s.getGroupId()]=s}async _animationManagerSetup(e,r,n){const i=At(e);this.animationManager&&(this.animationManager.setScale(n),e.length>0&&(this.animationManager.storeAnimationPaths(i,r||""),await this.animationManager.loadAnimation(i,!1,0,i[0].endsWith(".fbx"),r||"")))}async _fetchManifest(e){return await(await fetch(e)).json()}_getPortaitScreenshotTexture(e,r){this.blinkManager.enableScreenshot(),this.characterModel.traverse(u=>{u.isSkinnedMesh&&u.skeleton.bones.filter(h=>h.name==="head")[0].getWorldPosition(wl)});const{screenshotResolution:n,screenshotFaceDistance:i,screenshotFaceOffset:s,screenshotBackground:a,screenshotFOV:o}=r,l=n[0],A=n[1];wl.x+=s[0],wl.y+=s[1],wl.z+=s[2],this.screenshotManager.setBackground(a),this.screenshotManager.cameraFrameManager.setCamera(wl,i,o);const c=e?this.screenshotManager.getScreenshotBlob(l,A):this.screenshotManager.getScreenshotTexture(l,A);return this.blinkManager.disableScreenshot(),c}_setupWireframeMaterial(e){e.origMat=e.material;const r=()=>{const s=.1+Math.random()*.9,a=.1+Math.random()*(1-.1),o=.1+Math.random()*(1-.1);return new He(s,a,o)},n=new Zi({color:r(),wireframe:!0,wireframeLinewidth:.2}),i=e.material;e.setDebugMode=s=>{s?e.material.length?(e.material[0]=n,e.material[1]=n):e.material=n:e.material=i}}_VRMBaseSetup(e,r,n,i,s){var a,o;let l=e.userData.vrm;if(e.userData.vrm==null)return console.error("No valid VRM was provided for "+n+" trait, skipping file."),null;if(LO(l,{isVRM0:((a=l.meta)==null?void 0:a.metaVersion)==="0"}),this.manifestData.isColliderRequired(n)&&Q0e(e),this._applySpringBoneColliders(l),yge(l),N0e(e),this._unregisterMorphTargetsFromManifest(l),this.manifestData.isLipsyncTrait(n)&&(this.lipSync=new ob(l)),this._modelBaseSetup(l,r,n,i,s),((o=l.meta)==null?void 0:o.metaVersion)==="0"){if(l.humanoid.humanBones.hips.node.parent==l.scene){const A=new Lt;A.name="newRootNode",hge(l.scene,A),A.add(l.humanoid.humanBones.hips.node)}l.humanoid.humanBones.hips.node.parent.rotateY(3.14159),l.scene.traverse(A=>{if(A.isSkinnedMesh){for(let c=0;c<A.skeleton.bones.length;c++)A.skeleton.bones[c].userData.vrm0RestPosition={...A.skeleton.bones[c].position};A.userData.isVRM0=!0}}),console.log("Loaded VRM0 file ",l)}else console.log("Loaded VRM1 file ",l);return l}_applySpringBoneColliders(e){function r(i){e.springBoneManager.joints.forEach(s=>{for(const a of i){const o=s.colliderGroups.find(l=>l.name==a.name);if(o){if(a.colliders.length!=o.colliders.length){const l=a.colliders.filter(A=>!o.colliders.find(c=>c.name==A.name));o.colliders.push(...l)}}else s.colliderGroups.push(a)}})}const n=(()=>{const i=[];return Object.entries(this.avatar).map(([s,a])=>{const o=z0e(a.vrm);o.length!==0&&o.forEach(l=>{if(!e.springBoneManager)return;const A={colliders:[],name:l.name};for(const c of l.children)c instanceof Lw&&A.colliders.indexOf(c)===-1&&A.colliders.push(c);if(A.colliders.length){const c=i.find(u=>u.name==A.name);if(c&&c.colliders.length!=A.colliders.length){const u=A.colliders.filter(h=>!c.colliders.find(d=>d.name==h.name));c.colliders.push(...u)}else c||i.push(A)}})}),i})();r(n)}_unregisterMorphTargetsFromManifest(e){var r;const n=this.manifestData.getAllBlendShapeTraits(),i=(r=e.expressionManager)==null?void 0:r.expressions;if(n.length==0||!i)return;const s=[];for(const a of i)n.map(o=>o.id).includes(a.expressionName)&&s.push(a);for(const a of s)e.expressionManager.unregisterExpression(a)}_modelBaseSetup(e,r,n,i,s){const a=[],o=At(r.cullingIgnore),l=[];r.meshTargets&&At(r.meshTargets).map(u=>{const h=e.scene.getObjectByName(u);h!=null&&h.isMesh&&a.push(h)}),e.scene.traverse(u=>{!r.meshTargets&&u.isMesh&&a.push(u),u.frustumCulled=!1,u.isMesh&&(this._setupWireframeMaterial(u),o.indexOf(u.name)===-1&&l.push(u))});const A=this.manifest,c=this.manifestData.getModelGroup(n);LO(e,{cullingLayer:r.cullingLayer!=null?r.cullingLayer:c.cullingLayer!=null?c.cullingLayer:A.defaultCullingLayer!=null?A.defaultCullingLayer:-1,cullingDistance:r.cullingDistance!=null?r.cullingDistance:c.cullingDistance!=null?c.cullingDistance:A.defaultCullingDistance!=null?A.defaultCullingDistance:null,maxCullingDistance:r.maxCullingDistance!=null?r.maxCullingDistance:c.maxCullingDistance!=null?c.maxCullingDistance:A.maxCullingDistance!=null?A.maxCullingDistance:1/0,cullingMeshes:l}),a.map((u,h)=>{if(i){const d=i[h]||i[0];d!=null&&At(u.material).map(f=>{ive(f,d)})}if(s){const d=s[h]||s[0];d!=null&&(u.material[0].uniforms.litFactor.value=d,u.material[0].uniforms.shadeColorFactor.value=new He(d.r*.8,d.g*.8,d.b*.8))}})}_applyManagers(e){this.blinkManager.addVRM(e),this.emotionManager.addVRM(e),this.lookAtManager&&this.lookAtManager.addVRM(e),this.animationManager&&this.animationManager.addVRM(e)}_displayModel(e){if(e){const r=e.scene;this.characterModel.attach(r)}}_positionModel(e){const r=this.manifestData.displayScale;e.scene.scale.set(r,r,r)}_disposeTrait(e){this.blinkManager.removeVRM(e),this.emotionManager.removeVRM(e),this.lookAtManager&&this.lookAtManager.removeVRM(e),this.animationManager&&this.animationManager.removeVRM(e),vge(e)}_addLoadedData(e){const{traitGroupID:r,traitModel:n,textureTrait:i,colorTrait:s,models:a,textures:o,colors:l}=e;if(n==null){this.avatar[r]&&this.avatar[r].vrm&&(this._disposeTrait(this.avatar[r].vrm),delete this.avatar[r]);return}let A=null;a.map(c=>{c!=null&&(A=this._VRMBaseSetup(c,n,r,o,l))}),A!=null&&(this.avatar[r]&&this.avatar[r].vrm&&this._disposeTrait(this.avatar[r].vrm),this._positionModel(A),this._displayModel(A),this._applyManagers(A),this.overlayedTextureManager&&n.targetDecalCollection&&this.overlayedTextureManager.setTargetVRM(A,n.decalMeshNameTargets),this.avatar[r]={traitInfo:n,blendShapeTraitsInfo:{},textureInfo:i,colorInfo:s,name:n.name,model:A&&A.scene,vrm:A})}}class nve{constructor(){const e=new H8;e.onProgress=(i,s,a)=>{this.setLoadPercentage(Math.round(s/a*100))};const r=new Y8(e);r.crossOrigin="anonymous",r.register(i=>new gpe(i,{autoUpdateHumanBones:!0}));const n=new Uc(e);this.loadPercentager=0,this.loadingManager=e,this.gltfLoader=r,this.textureLoader=n,this.isLoading=!1}setLoadPercentage(e){this.loadPercentager=e}loadTraitOptions(e){return new Promise(r=>{this.isLoading=!0;const n=[],i=e.map(async(s,a)=>{var o,l,A;if(s==null){n[a]=null;return}const c=await Promise.all(At((o=s==null?void 0:s.traitModel)==null?void 0:o.fullDirectory).map(async d=>{try{return await this.gltfLoader.loadAsync(d)}catch(f){return console.error(`Error loading modelsss ${d}:`,f),null}})),u=await Promise.all(At((l=s==null?void 0:s.traitTexture)==null?void 0:l.fullDirectory).map(d=>new Promise(f=>{this.textureLoader.load(d,m=>{m.flipY=!1,m.colorSpace=Ut,f(m)},null,m=>{console.error("error loading texture: ",m),f(null)})}))),h=At((A=s==null?void 0:s.traitColor)==null?void 0:A.value).map(d=>new He(d));n[a]=new Dw({traitGroupID:s==null?void 0:s.traitModel.traitGroup.trait,traitModel:s==null?void 0:s.traitModel,textureTrait:s==null?void 0:s.traitTexture,colorTrait:s==null?void 0:s.traitColor,models:c,textures:u,colors:h})});Promise.allSettled(i).then(()=>{this.setLoadPercentage(100),r(n),this.isLoading=!1}).catch(s=>{this.setLoadPercentage(100),console.error("An error occurred:",s),r(n),this.isLoading=!1})})}}class Dw{constructor(e){const{traitGroupID:r,traitModel:n,textureTrait:i,colorTrait:s,models:a,textures:o,colors:l}=e;this.traitGroupID=r,this.traitModel=n,this.textureTrait=i,this.colorTrait=s,this.models=a,this.textures=o,this.colors=l}}function ive(t,e){if(t.type==="Shadermaterial"&&!t.isMToonMaterial){console.warn("XXX set material texture to shader material",t);return}t.map=e,t.needsUpdate=!0}class sve extends aae{constructor(e){super(e),this.type=No}parse(e){const r=function(p,v){switch(p){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(v||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(v||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(v||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(v||""))}},n=`
`,i=function(p,v,y){v=v||1024;let _=p.pos,E=-1,x=0,B="",M=String.fromCharCode.apply(null,new Uint16Array(p.subarray(_,_+128)));for(;0>(E=M.indexOf(n))&&x<v&&_<p.byteLength;)B+=M,x+=M.length,_+=128,M+=String.fromCharCode.apply(null,new Uint16Array(p.subarray(_,_+128)));return-1<E?(y!==!1&&(p.pos+=x+E+1),B+M.slice(0,E)):!1},s=function(p){const v=/^#\?(\S+)/,y=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,_=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*FORMAT=(\S+)\s*$/,x=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,B={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let M,R;for((p.pos>=p.byteLength||!(M=i(p)))&&r(1,"no header found"),(R=M.match(v))||r(3,"bad initial token"),B.valid|=1,B.programtype=R[1],B.string+=M+`
`;M=i(p),M!==!1;){if(B.string+=M+`
`,M.charAt(0)==="#"){B.comments+=M+`
`;continue}if((R=M.match(y))&&(B.gamma=parseFloat(R[1])),(R=M.match(_))&&(B.exposure=parseFloat(R[1])),(R=M.match(E))&&(B.valid|=2,B.format=R[1]),(R=M.match(x))&&(B.valid|=4,B.height=parseInt(R[1],10),B.width=parseInt(R[2],10)),B.valid&2&&B.valid&4)break}return B.valid&2||r(3,"missing format specifier"),B.valid&4||r(3,"missing image size specifier"),B},a=function(p,v,y){const _=v;if(_<8||_>32767||p[0]!==2||p[1]!==2||p[2]&128)return new Uint8Array(p);_!==(p[2]<<8|p[3])&&r(3,"wrong scanline width");const E=new Uint8Array(4*v*y);E.length||r(4,"unable to allocate buffer space");let x=0,B=0;const M=4*_,R=new Uint8Array(4),I=new Uint8Array(M);let L=y;for(;L>0&&B<p.byteLength;){B+4>p.byteLength&&r(1),R[0]=p[B++],R[1]=p[B++],R[2]=p[B++],R[3]=p[B++],(R[0]!=2||R[1]!=2||(R[2]<<8|R[3])!=_)&&r(3,"bad rgbe scanline format");let D=0,w;for(;D<M&&B<p.byteLength;){w=p[B++];const S=w>128;if(S&&(w-=128),(w===0||D+w>M)&&r(3,"bad scanline data"),S){const F=p[B++];for(let k=0;k<w;k++)I[D++]=F}else I.set(p.subarray(B,B+w),D),D+=w,B+=w}const b=_;for(let S=0;S<b;S++){let F=0;E[x]=I[S+F],F+=_,E[x+1]=I[S+F],F+=_,E[x+2]=I[S+F],F+=_,E[x+3]=I[S+F],x+=4}L--}return E},o=function(p,v,y,_){const E=p[v+3],x=Math.pow(2,E-128)/255;y[_+0]=p[v+0]*x,y[_+1]=p[v+1]*x,y[_+2]=p[v+2]*x,y[_+3]=1},l=function(p,v,y,_){const E=p[v+3],x=Math.pow(2,E-128)/255;y[_+0]=wv.toHalfFloat(Math.min(p[v+0]*x,65504)),y[_+1]=wv.toHalfFloat(Math.min(p[v+1]*x,65504)),y[_+2]=wv.toHalfFloat(Math.min(p[v+2]*x,65504)),y[_+3]=wv.toHalfFloat(1)},A=new Uint8Array(e);A.pos=0;const c=s(A),u=c.width,h=c.height,d=a(A.subarray(A.pos),u,h);let f,m,g;switch(this.type){case mi:g=d.length/4;const p=new Float32Array(g*4);for(let y=0;y<g;y++)o(d,y*4,p,y*4);f=p,m=mi;break;case No:g=d.length/4;const v=new Uint16Array(g*4);for(let y=0;y<g;y++)l(d,y*4,v,y*4);f=v,m=No;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:u,height:h,data:f,header:c.string,gamma:c.gamma,exposure:c.exposure,type:m}}setDataType(e){return this.type=e,this}load(e,r,n,i){function s(a,o){switch(a.type){case mi:case No:a.colorSpace=Bn,a.minFilter=Un,a.magFilter=Un,a.generateMipmaps=!1,a.flipY=!0;break}r&&r(a,o)}return super.load(e,s,n,i)}}function ave(t){const e=new zg;new sve().load("./hdr/studio_small_09_2k.hdr",p=>{p.mapping=Ng,p.colorSpace=Bn,e.environment=p}),e.environmentIntensity=.5;const r=new G8(16777215,.8);e.add(r);const n=new jI(16777215,.8);n.position.set(0,1,1),e.add(n);const i=new Lt;e.add(i);const s=new In(30,window.innerWidth/window.innerHeight,.1,1e3);s.position.set(0,1.3,2);const a=new rve({parentModel:e,createAnimationManager:!0,renderCamera:s});a.addLookAtMouse(80,t,s,!0);const o=document.getElementById(t),l=new y0({canvas:o,antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),A=new Tae(s,l.domElement);A.minDistance=1,A.maxDistance=4,A.maxPolarAngle=Math.PI/2,A.enablePan=!0,A.target=new Y(0,1,0),A.enableDamping=!0,A.dampingFactor=.1;const c=new Y(-.5,0,-.5),u=new Y(.5,1.7,.5),h=()=>{l.setSize(window.innerWidth,window.innerHeight),s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix()};window.addEventListener("resize",h),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(window.devicePixelRatio),l.outputColorSpace=Ut;const d=new w_,f=()=>{requestAnimationFrame(f);const p=d.getDelta();A.target.clamp(c,u),A==null||A.update(),a.update(p),l.render(e,s)};f();const m=p=>{const v=p.ctrlKey,y=o.getBoundingClientRect(),_=(p.clientX-y.left)/y.width*2-1,E=-((p.clientY-y.top)/y.height)*2+1;a.cameraRaycastCulling(_,E,v)};async function g(){}return g(),o.addEventListener("click",m),{scene:e,camera:s,controls:A,characterManager:a,sceneElements:i,clock:d}}function Oy(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var AG={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function a(A,c){if(!i[A]){if(!n[A]){var u=typeof Oy=="function"&&Oy;if(!c&&u)return u(A,!0);if(o)return o(A,!0);var h=new Error("Cannot find module '"+A+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[A]={exports:{}};n[A][0].call(d.exports,function(f){var m=n[A][1][f];return a(m||f)},d,d.exports,r,n,i,s)}return i[A].exports}for(var o=typeof Oy=="function"&&Oy,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(r,n,i){var s=r("./utils"),a=r("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var A,c,u,h,d,f,m,g=[],p=0,v=l.length,y=v,_=s.getTypeOf(l)!=="string";p<l.length;)y=v-p,u=_?(A=l[p++],c=p<v?l[p++]:0,p<v?l[p++]:0):(A=l.charCodeAt(p++),c=p<v?l.charCodeAt(p++):0,p<v?l.charCodeAt(p++):0),h=A>>2,d=(3&A)<<4|c>>4,f=1<y?(15&c)<<2|u>>6:64,m=2<y?63&u:64,g.push(o.charAt(h)+o.charAt(d)+o.charAt(f)+o.charAt(m));return g.join("")},i.decode=function(l){var A,c,u,h,d,f,m=0,g=0,p="data:";if(l.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var v,y=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&y--,l.charAt(l.length-2)===o.charAt(64)&&y--,y%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=a.uint8array?new Uint8Array(0|y):new Array(0|y);m<l.length;)A=o.indexOf(l.charAt(m++))<<2|(h=o.indexOf(l.charAt(m++)))>>4,c=(15&h)<<4|(d=o.indexOf(l.charAt(m++)))>>2,u=(3&d)<<6|(f=o.indexOf(l.charAt(m++))),v[g++]=A,d!==64&&(v[g++]=c),f!==64&&(v[g++]=u);return v}},{"./support":30,"./utils":32}],2:[function(r,n,i){var s=r("./external"),a=r("./stream/DataWorker"),o=r("./stream/Crc32Probe"),l=r("./stream/DataLengthProbe");function A(c,u,h,d,f){this.compressedSize=c,this.uncompressedSize=u,this.crc32=h,this.compression=d,this.compressedContent=f}A.prototype={getContentWorker:function(){var c=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),u=this;return c.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},A.createWorkerFrom=function(c,u,h){return c.pipe(new o).pipe(new l("uncompressedSize")).pipe(u.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",u)},n.exports=A},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var s=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var s=r("./utils"),a=function(){for(var o,l=[],A=0;A<256;A++){o=A;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;l[A]=o}return l}();n.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(A,c,u,h){var d=a,f=h+u;A^=-1;for(var m=h;m<f;m++)A=A>>>8^d[255&(A^c[m])];return-1^A}(0|l,o,o.length,0):function(A,c,u,h){var d=a,f=h+u;A^=-1;for(var m=h;m<f;m++)A=A>>>8^d[255&(A^c.charCodeAt(m))];return-1^A}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var s=null;s=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:s}},{lie:37}],7:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=r("pako"),o=r("./utils"),l=r("./stream/GenericWorker"),A=s?"uint8array":"array";function c(u,h){l.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=h,this.meta={}}i.magic="\b\0",o.inherits(c,l),c.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(A,u.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(h){u.push({data:h,meta:u.meta})}},i.compressWorker=function(u){return new c("Deflate",u)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function s(d,f){var m,g="";for(m=0;m<f;m++)g+=String.fromCharCode(255&d),d>>>=8;return g}function a(d,f,m,g,p,v){var y,_,E=d.file,x=d.compression,B=v!==A.utf8encode,M=o.transformTo("string",v(E.name)),R=o.transformTo("string",A.utf8encode(E.name)),I=E.comment,L=o.transformTo("string",v(I)),D=o.transformTo("string",A.utf8encode(I)),w=R.length!==E.name.length,b=D.length!==I.length,S="",F="",k="",Q=E.dir,z=E.date,j={crc32:0,compressedSize:0,uncompressedSize:0};f&&!m||(j.crc32=d.crc32,j.compressedSize=d.compressedSize,j.uncompressedSize=d.uncompressedSize);var T=0;f&&(T|=8),B||!w&&!b||(T|=2048);var H=0,me=0;Q&&(H|=16),p==="UNIX"?(me=798,H|=function(U,se){var le=U;return U||(le=se?16893:33204),(65535&le)<<16}(E.unixPermissions,Q)):(me=20,H|=function(U){return 63&(U||0)}(E.dosPermissions)),y=z.getUTCHours(),y<<=6,y|=z.getUTCMinutes(),y<<=5,y|=z.getUTCSeconds()/2,_=z.getUTCFullYear()-1980,_<<=4,_|=z.getUTCMonth()+1,_<<=5,_|=z.getUTCDate(),w&&(F=s(1,1)+s(c(M),4)+R,S+="up"+s(F.length,2)+F),b&&(k=s(1,1)+s(c(L),4)+D,S+="uc"+s(k.length,2)+k);var ee="";return ee+=`
\0`,ee+=s(T,2),ee+=x.magic,ee+=s(y,2),ee+=s(_,2),ee+=s(j.crc32,4),ee+=s(j.compressedSize,4),ee+=s(j.uncompressedSize,4),ee+=s(M.length,2),ee+=s(S.length,2),{fileRecord:u.LOCAL_FILE_HEADER+ee+M+S,dirRecord:u.CENTRAL_FILE_HEADER+s(me,2)+ee+s(L.length,2)+"\0\0\0\0"+s(H,4)+s(g,4)+M+S+L}}var o=r("../utils"),l=r("../stream/GenericWorker"),A=r("../utf8"),c=r("../crc32"),u=r("../signature");function h(d,f,m,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,l),h.prototype.push=function(d){var f=d.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,l.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:m?(f+100*(m-g-1))/m:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var f=this.streamFiles&&!d.file.dir;if(f){var m=a(d,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var f=this.streamFiles&&!d.file.dir,m=a(d,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),f)this.push({data:function(g){return u.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var m=this.bytesWritten-d,g=function(p,v,y,_,E){var x=o.transformTo("string",E(_));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(p,2)+s(p,2)+s(v,4)+s(y,4)+s(x.length,2)+x}(this.dirRecords.length,m,d,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var f=this;return d.on("data",function(m){f.processChunk(m)}),d.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),d.on("error",function(m){f.error(m)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var f=this._sources;if(!l.prototype.error.call(this,d))return!1;for(var m=0;m<f.length;m++)try{f[m].error(d)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var d=this._sources,f=0;f<d.length;f++)d[f].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var s=r("../compressions"),a=r("./ZipFileWorker");i.generateWorker=function(o,l,A){var c=new a(l.streamFiles,A,l.platform,l.encodeFileName),u=0;try{o.forEach(function(h,d){u++;var f=function(v,y){var _=v||y,E=s[_];if(!E)throw new Error(_+" is not a valid compression method !");return E}(d.options.compression,l.compression),m=d.options.compressionOptions||l.compressionOptions||{},g=d.dir,p=d.date;d._compressWorker(f,m).withStreamInfo("file",{name:h,dir:g,date:p,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(c)}),c.entriesCount=u}catch(h){c.error(h)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=r("./object")).loadAsync=r("./load"),s.support=r("./support"),s.defaults=r("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=r("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var s=r("./utils"),a=r("./external"),o=r("./utf8"),l=r("./zipEntries"),A=r("./stream/Crc32Probe"),c=r("./nodejsUtils");function u(h){return new a.Promise(function(d,f){var m=h.decompressed.getContentWorker().pipe(new A);m.on("error",function(g){f(g)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(h,d){var f=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(m){var g=new l(d);return g.load(m),g}).then(function(m){var g=[a.Promise.resolve(m)],p=m.files;if(d.checkCRC32)for(var v=0;v<p.length;v++)g.push(u(p[v]));return a.Promise.all(g)}).then(function(m){for(var g=m.shift(),p=g.files,v=0;v<p.length;v++){var y=p[v],_=y.fileNameStr,E=s.resolve(y.fileNameStr);f.file(E,y.decompressed,{binary:!0,optimizedBinaryString:!0,date:y.date,dir:y.dir,comment:y.fileCommentStr.length?y.fileCommentStr:null,unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions,createFolders:d.createFolders}),y.dir||(f.file(E).unsafeOriginalName=_)}return g.zipComment.length&&(f.comment=g.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var s=r("../utils"),a=r("../stream/GenericWorker");function o(l,A){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(A)}s.inherits(o,a),o.prototype._bindStream=function(l){var A=this;(this._stream=l).pause(),l.on("data",function(c){A.push({data:c,meta:{percent:0}})}).on("error",function(c){A.isPaused?this.generatedError=c:A.error(c)}).on("end",function(){A.isPaused?A._upstreamEnded=!0:A.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var s=r("readable-stream").Readable;function a(o,l,A){s.call(this,l),this._helper=o;var c=this;o.on("data",function(u,h){c.push(u)||c._helper.pause(),A&&A(h)}).on("error",function(u){c.emit("error",u)}).on("end",function(){c.push(null)})}r("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(r,n,i){function s(E,x,B){var M,R=o.getTypeOf(x),I=o.extend(B||{},c);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(E=p(E)),I.createFolders&&(M=g(E))&&v.call(this,M,!0);var L=R==="string"&&I.binary===!1&&I.base64===!1;B&&B.binary!==void 0||(I.binary=!L),(x instanceof u&&x.uncompressedSize===0||I.dir||!x||x.length===0)&&(I.base64=!1,I.binary=!0,x="",I.compression="STORE",R="string");var D=null;D=x instanceof u||x instanceof l?x:f.isNode&&f.isStream(x)?new m(E,x):o.prepareContent(E,x,I.binary,I.optimizedBinaryString,I.base64);var w=new h(E,D,I);this.files[E]=w}var a=r("./utf8"),o=r("./utils"),l=r("./stream/GenericWorker"),A=r("./stream/StreamHelper"),c=r("./defaults"),u=r("./compressedObject"),h=r("./zipObject"),d=r("./generate"),f=r("./nodejsUtils"),m=r("./nodejs/NodejsStreamInputAdapter"),g=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var x=E.lastIndexOf("/");return 0<x?E.substring(0,x):""},p=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},v=function(E,x){return x=x!==void 0?x:c.createFolders,E=p(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:x}),this.files[E]};function y(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var x,B,M;for(x in this.files)M=this.files[x],(B=x.slice(this.root.length,x.length))&&x.slice(0,this.root.length)===this.root&&E(B,M)},filter:function(E){var x=[];return this.forEach(function(B,M){E(B,M)&&x.push(M)}),x},file:function(E,x,B){if(arguments.length!==1)return E=this.root+E,s.call(this,E,x,B),this;if(y(E)){var M=E;return this.filter(function(I,L){return!L.dir&&M.test(I)})}var R=this.files[this.root+E];return R&&!R.dir?R:null},folder:function(E){if(!E)return this;if(y(E))return this.filter(function(R,I){return I.dir&&E.test(R)});var x=this.root+E,B=v.call(this,x),M=this.clone();return M.root=B.name,M},remove:function(E){E=this.root+E;var x=this.files[E];if(x||(E.slice(-1)!=="/"&&(E+="/"),x=this.files[E]),x&&!x.dir)delete this.files[E];else for(var B=this.filter(function(R,I){return I.name.slice(0,E.length)===E}),M=0;M<B.length;M++)delete this.files[B[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var x,B={};try{if((B=o.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=B.type.toLowerCase(),B.compression=B.compression.toUpperCase(),B.type==="binarystring"&&(B.type="string"),!B.type)throw new Error("No output type specified.");o.checkSupport(B.type),B.platform!=="darwin"&&B.platform!=="freebsd"&&B.platform!=="linux"&&B.platform!=="sunos"||(B.platform="UNIX"),B.platform==="win32"&&(B.platform="DOS");var M=B.comment||this.comment||"";x=d.generateWorker(this,B,M)}catch(R){(x=new l("error")).error(R)}return new A(x,B.type||"string",B.mimeType)},generateAsync:function(E,x){return this.generateInternalStream(E).accumulate(x)},generateNodeStream:function(E,x){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(x)}};n.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var s=r("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}r("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),A=o.charCodeAt(1),c=o.charCodeAt(2),u=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===A&&this.data[h+2]===c&&this.data[h+3]===u)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),A=o.charCodeAt(1),c=o.charCodeAt(2),u=o.charCodeAt(3),h=this.readData(4);return l===h[0]&&A===h[1]&&c===h[2]&&u===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var s=r("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,A=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)A=(A<<8)+this.byteAt(l);return this.index+=o,A},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},n.exports=a},{"../utils":32}],19:[function(r,n,i){var s=r("./Uint8ArrayReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var s=r("./DataReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var s=r("./ArrayReader");function a(o){s.call(this,o)}r("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var s=r("../utils"),a=r("../support"),o=r("./ArrayReader"),l=r("./StringReader"),A=r("./NodeBufferReader"),c=r("./Uint8ArrayReader");n.exports=function(u){var h=s.getTypeOf(u);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new A(u):a.uint8array?new c(s.transformTo("uint8array",u)):new o(s.transformTo("array",u)):new l(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var s=r("./GenericWorker"),a=r("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var s=r("./GenericWorker"),a=r("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var s=r("../utils"),a=r("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var A=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=A+l.data.length}a.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var s=r("../utils"),a=r("./GenericWorker");function o(l){a.call(this,"DataWorker");var A=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){A.dataIsReady=!0,A.data=c,A.max=c&&c.length||0,A.type=s.getTypeOf(c),A.isPaused||A._tickAndRepeat()},function(c){A.error(c)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,A=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,A);break;case"uint8array":l=this.data.subarray(this.index,A);break;case"array":case"nodebuffer":l=this.data.slice(this.index,A)}return this.index=A,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(r,n,i){var s=r("../utils"),a=r("./ConvertWorker"),o=r("./GenericWorker"),l=r("../base64"),A=r("../support"),c=r("../external"),u=null;if(A.nodestream)try{u=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(f,m){return new c.Promise(function(g,p){var v=[],y=f._internalType,_=f._outputType,E=f._mimeType;f.on("data",function(x,B){v.push(x),m&&m(B)}).on("error",function(x){v=[],p(x)}).on("end",function(){try{var x=function(B,M,R){switch(B){case"blob":return s.newBlob(s.transformTo("arraybuffer",M),R);case"base64":return l.encode(M);default:return s.transformTo(B,M)}}(_,function(B,M){var R,I=0,L=null,D=0;for(R=0;R<M.length;R++)D+=M[R].length;switch(B){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(L=new Uint8Array(D),R=0;R<M.length;R++)L.set(M[R],I),I+=M[R].length;return L;case"nodebuffer":return Buffer.concat(M);default:throw new Error("concat : unsupported type '"+B+"'")}}(y,v),E);g(x)}catch(B){p(B)}v=[]}).resume()})}function d(f,m,g){var p=m;switch(m){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=m,this._mimeType=g,s.checkSupport(p),this._worker=f.pipe(new a(p)),f.lock()}catch(v){this._worker=new o("error"),this._worker.error(v)}}d.prototype={accumulate:function(f){return h(this,f)},on:function(f,m){var g=this;return f==="data"?this._worker.on(f,function(p){m.call(g,p.data,p.meta)}):this._worker.on(f,function(){s.delay(m,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},f)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var s=r("./utils"),a=r("./support"),o=r("./nodejsUtils"),l=r("./stream/GenericWorker"),A=new Array(256),c=0;c<256;c++)A[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;A[254]=A[254]=1;function u(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(d){return a.nodebuffer?o.newBufferFrom(d,"utf-8"):function(f){var m,g,p,v,y,_=f.length,E=0;for(v=0;v<_;v++)(64512&(g=f.charCodeAt(v)))==55296&&v+1<_&&(64512&(p=f.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),v++),E+=g<128?1:g<2048?2:g<65536?3:4;for(m=a.uint8array?new Uint8Array(E):new Array(E),v=y=0;y<E;v++)(64512&(g=f.charCodeAt(v)))==55296&&v+1<_&&(64512&(p=f.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(p-56320),v++),g<128?m[y++]=g:(g<2048?m[y++]=192|g>>>6:(g<65536?m[y++]=224|g>>>12:(m[y++]=240|g>>>18,m[y++]=128|g>>>12&63),m[y++]=128|g>>>6&63),m[y++]=128|63&g);return m}(d)},i.utf8decode=function(d){return a.nodebuffer?s.transformTo("nodebuffer",d).toString("utf-8"):function(f){var m,g,p,v,y=f.length,_=new Array(2*y);for(m=g=0;m<y;)if((p=f[m++])<128)_[g++]=p;else if(4<(v=A[p]))_[g++]=65533,m+=v-1;else{for(p&=v===2?31:v===3?15:7;1<v&&m<y;)p=p<<6|63&f[m++],v--;1<v?_[g++]=65533:p<65536?_[g++]=p:(p-=65536,_[g++]=55296|p>>10&1023,_[g++]=56320|1023&p)}return _.length!==g&&(_.subarray?_=_.subarray(0,g):_.length=g),s.applyFromCharCode(_)}(d=s.transformTo(a.uint8array?"uint8array":"array",d))},s.inherits(u,l),u.prototype.processChunk=function(d){var f=s.transformTo(a.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=f;(f=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),f.set(m,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var g=function(v,y){var _;for((y=y||v.length)>v.length&&(y=v.length),_=y-1;0<=_&&(192&v[_])==128;)_--;return _<0||_===0?y:_+A[v[_]]>y?_:y}(f),p=f;g!==f.length&&(a.uint8array?(p=f.subarray(0,g),this.leftOver=f.subarray(g,f.length)):(p=f.slice(0,g),this.leftOver=f.slice(g,f.length))),this.push({data:i.utf8decode(p),meta:d.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=u,s.inherits(h,l),h.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var s=r("./support"),a=r("./base64"),o=r("./nodejsUtils"),l=r("./external");function A(m){return m}function c(m,g){for(var p=0;p<m.length;++p)g[p]=255&m.charCodeAt(p);return g}r("setimmediate"),i.newBlob=function(m,g){i.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(m),p.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(m,g,p){var v=[],y=0,_=m.length;if(_<=p)return String.fromCharCode.apply(null,m);for(;y<_;)g==="array"||g==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(y,Math.min(y+p,_)))):v.push(String.fromCharCode.apply(null,m.subarray(y,Math.min(y+p,_)))),y+=p;return v.join("")},stringifyByChar:function(m){for(var g="",p=0;p<m.length;p++)g+=String.fromCharCode(m[p]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var g=65536,p=i.getTypeOf(m),v=!0;if(p==="uint8array"?v=u.applyCanBeUsed.uint8array:p==="nodebuffer"&&(v=u.applyCanBeUsed.nodebuffer),v)for(;1<g;)try{return u.stringifyByChunk(m,p,g)}catch{g=Math.floor(g/2)}return u.stringifyByChar(m)}function d(m,g){for(var p=0;p<m.length;p++)g[p]=m[p];return g}i.applyFromCharCode=h;var f={};f.string={string:A,array:function(m){return c(m,new Array(m.length))},arraybuffer:function(m){return f.string.uint8array(m).buffer},uint8array:function(m){return c(m,new Uint8Array(m.length))},nodebuffer:function(m){return c(m,o.allocBuffer(m.length))}},f.array={string:h,array:A,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(m)}},f.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return d(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:A,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(new Uint8Array(m))}},f.uint8array={string:h,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:A,nodebuffer:function(m){return o.newBufferFrom(m)}},f.nodebuffer={string:h,array:function(m){return d(m,new Array(m.length))},arraybuffer:function(m){return f.nodebuffer.uint8array(m).buffer},uint8array:function(m){return d(m,new Uint8Array(m.length))},nodebuffer:A},i.transformTo=function(m,g){if(g=g||"",!m)return g;i.checkSupport(m);var p=i.getTypeOf(g);return f[p][m](g)},i.resolve=function(m){for(var g=m.split("/"),p=[],v=0;v<g.length;v++){var y=g[v];y==="."||y===""&&v!==0&&v!==g.length-1||(y===".."?p.pop():p.push(y))}return p.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var g,p,v="";for(p=0;p<(m||"").length;p++)v+="\\x"+((g=m.charCodeAt(p))<16?"0":"")+g.toString(16).toUpperCase();return v},i.delay=function(m,g,p){setImmediate(function(){m.apply(p||null,g||[])})},i.inherits=function(m,g){function p(){}p.prototype=g.prototype,m.prototype=new p},i.extend=function(){var m,g,p={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&p[g]===void 0&&(p[g]=arguments[m][g]);return p},i.prepareContent=function(m,g,p,v,y){return l.Promise.resolve(g).then(function(_){return s.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,x){var B=new FileReader;B.onload=function(M){E(M.target.result)},B.onerror=function(M){x(M.target.error)},B.readAsArrayBuffer(_)}):_}).then(function(_){var E=i.getTypeOf(_);return E?(E==="arraybuffer"?_=i.transformTo("uint8array",_):E==="string"&&(y?_=a.decode(_):p&&v!==!0&&(_=function(x){return c(x,s.uint8array?new Uint8Array(x.length):new Array(x.length))}(_))),_):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var s=r("./reader/readerFor"),a=r("./utils"),o=r("./signature"),l=r("./zipEntry"),A=r("./support");function c(u){this.files=[],this.loadOptions=u}c.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(u)+")")}},isSignature:function(u,h){var d=this.reader.index;this.reader.setIndex(u);var f=this.reader.readString(4)===h;return this.reader.setIndex(d),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),h=A.uint8array?"uint8array":"array",d=a.transformTo(h,u);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,h,d,f=this.zip64EndOfCentralSize-44;0<f;)u=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[u]={id:u,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,h;for(u=0;u<this.files.length;u++)h=this.files[u],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var h=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var f=h-d;if(0<f)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(u){this.reader=s(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var s=r("./reader/readerFor"),a=r("./utils"),o=r("./compressedObject"),l=r("./crc32"),A=r("./utf8"),c=r("./compressions"),u=r("./support");function h(d,f){this.options=d,this.loadOptions=f}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var f,m;if(d.skip(22),this.fileNameLength=d.readInt(2),m=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=function(g){for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)&&c[p].magic===g)return c[p];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,f,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var f=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(f),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var f,m,g,p=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<p;)f=d.readInt(2),m=d.readInt(2),g=d.readData(m),this.extraFields[f]={id:f,length:m,value:g};d.setIndex(p)},handleUTF8:function(){var d=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=A.utf8decode(this.fileName),this.fileCommentStr=A.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var m=a.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var p=a.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var f=s(d.value);return f.readInt(1)!==1||l(this.fileName)!==f.readInt(4)?null:A.utf8decode(f.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var f=s(d.value);return f.readInt(1)!==1||l(this.fileComment)!==f.readInt(4)?null:A.utf8decode(f.readData(d.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function s(f,m,g){this.name=f,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var a=r("./stream/StreamHelper"),o=r("./stream/DataWorker"),l=r("./utf8"),A=r("./compressedObject"),c=r("./stream/GenericWorker");s.prototype={internalStream:function(f){var m=null,g="string";try{if(!f)throw new Error("No output type specified.");var p=(g=f.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!p&&(m=m.pipe(new l.Utf8EncodeWorker)),!v&&p&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(y){(m=new c("error")).error(y)}return new a(m,g,"")},async:function(f,m){return this.internalStream(f).accumulate(m)},nodeStream:function(f,m){return this.internalStream(f||"nodebuffer").toNodejsStream(m)},_compressWorker:function(f,m){if(this._data instanceof A&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),A.createWorkerFrom(g,f,m)},_decompressWorker:function(){return this._data instanceof A?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)s.prototype[u[d]]=h;n.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var A=0,c=new l(f),u=s.document.createTextNode("");c.observe(u,{characterData:!0}),a=function(){u.data=A=++A%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){f(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(f,0)};else{var h=new s.MessageChannel;h.port1.onmessage=f,a=function(){h.port2.postMessage(0)}}var d=[];function f(){var m,g;o=!0;for(var p=d.length;p;){for(g=d,d=[],m=-1;++m<p;)g[m]();p=d.length}o=!1}n.exports=function(m){d.push(m)!==1||o||a()}}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var s=r("immediate");function a(){}var o={},l=["REJECTED"],A=["FULFILLED"],c=["PENDING"];function u(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,p!==a&&m(this,p)}function h(p,v,y){this.promise=p,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof y=="function"&&(this.onRejected=y,this.callRejected=this.otherCallRejected)}function d(p,v,y){s(function(){var _;try{_=v(y)}catch(E){return o.reject(p,E)}_===p?o.reject(p,new TypeError("Cannot resolve promise with itself")):o.resolve(p,_)})}function f(p){var v=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof v=="function")return function(){v.apply(p,arguments)}}function m(p,v){var y=!1;function _(B){y||(y=!0,o.reject(p,B))}function E(B){y||(y=!0,o.resolve(p,B))}var x=g(function(){v(E,_)});x.status==="error"&&_(x.value)}function g(p,v){var y={};try{y.value=p(v),y.status="success"}catch(_){y.status="error",y.value=_}return y}(n.exports=u).prototype.finally=function(p){if(typeof p!="function")return this;var v=this.constructor;return this.then(function(y){return v.resolve(p()).then(function(){return y})},function(y){return v.resolve(p()).then(function(){throw y})})},u.prototype.catch=function(p){return this.then(null,p)},u.prototype.then=function(p,v){if(typeof p!="function"&&this.state===A||typeof v!="function"&&this.state===l)return this;var y=new this.constructor(a);return this.state!==c?d(y,this.state===A?p:v,this.outcome):this.queue.push(new h(y,p,v)),y},h.prototype.callFulfilled=function(p){o.resolve(this.promise,p)},h.prototype.otherCallFulfilled=function(p){d(this.promise,this.onFulfilled,p)},h.prototype.callRejected=function(p){o.reject(this.promise,p)},h.prototype.otherCallRejected=function(p){d(this.promise,this.onRejected,p)},o.resolve=function(p,v){var y=g(f,v);if(y.status==="error")return o.reject(p,y.value);var _=y.value;if(_)m(p,_);else{p.state=A,p.outcome=v;for(var E=-1,x=p.queue.length;++E<x;)p.queue[E].callFulfilled(v)}return p},o.reject=function(p,v){p.state=l,p.outcome=v;for(var y=-1,_=p.queue.length;++y<_;)p.queue[y].callRejected(v);return p},u.resolve=function(p){return p instanceof this?p:o.resolve(new this(a),p)},u.reject=function(p){var v=new this(a);return o.reject(v,p)},u.all=function(p){var v=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=p.length,_=!1;if(!y)return this.resolve([]);for(var E=new Array(y),x=0,B=-1,M=new this(a);++B<y;)R(p[B],B);return M;function R(I,L){v.resolve(I).then(function(D){E[L]=D,++x!==y||_||(_=!0,o.resolve(M,E))},function(D){_||(_=!0,o.reject(M,D))})}},u.race=function(p){var v=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var y=p.length,_=!1;if(!y)return this.resolve([]);for(var E=-1,x=new this(a);++E<y;)B=p[E],v.resolve(B).then(function(M){_||(_=!0,o.resolve(x,M))},function(M){_||(_=!0,o.reject(x,M))});var B;return x}},{immediate:36}],38:[function(r,n,i){var s={};(0,r("./lib/utils/common").assign)(s,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var s=r("./zlib/deflate"),a=r("./utils/common"),o=r("./utils/strings"),l=r("./zlib/messages"),A=r("./zlib/zstream"),c=Object.prototype.toString,u=0,h=-1,d=0,f=8;function m(p){if(!(this instanceof m))return new m(p);this.options=a.assign({level:h,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},p||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var y=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(y!==u)throw new Error(l[y]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var _;if(_=typeof v.dictionary=="string"?o.string2buf(v.dictionary):c.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(y=s.deflateSetDictionary(this.strm,_))!==u)throw new Error(l[y]);this._dict_set=!0}}function g(p,v){var y=new m(v);if(y.push(p,!0),y.err)throw y.msg||l[y.err];return y.result}m.prototype.push=function(p,v){var y,_,E=this.strm,x=this.options.chunkSize;if(this.ended)return!1;_=v===~~v?v:v===!0?4:0,typeof p=="string"?E.input=o.string2buf(p):c.call(p)==="[object ArrayBuffer]"?E.input=new Uint8Array(p):E.input=p,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(x),E.next_out=0,E.avail_out=x),(y=s.deflate(E,_))!==1&&y!==u)return this.onEnd(y),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(E.output,E.next_out))):this.onData(a.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&y!==1);return _===4?(y=s.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===u):_!==2||(this.onEnd(u),!(E.avail_out=0))},m.prototype.onData=function(p){this.chunks.push(p)},m.prototype.onEnd=function(p){p===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Deflate=m,i.deflate=g,i.deflateRaw=function(p,v){return(v=v||{}).raw=!0,g(p,v)},i.gzip=function(p,v){return(v=v||{}).gzip=!0,g(p,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var s=r("./zlib/inflate"),a=r("./utils/common"),o=r("./utils/strings"),l=r("./zlib/constants"),A=r("./zlib/messages"),c=r("./zlib/zstream"),u=r("./zlib/gzheader"),h=Object.prototype.toString;function d(m){if(!(this instanceof d))return new d(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&!(15&g.windowBits)&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var p=s.inflateInit2(this.strm,g.windowBits);if(p!==l.Z_OK)throw new Error(A[p]);this.header=new u,s.inflateGetHeader(this.strm,this.header)}function f(m,g){var p=new d(g);if(p.push(m,!0),p.err)throw p.msg||A[p.err];return p.result}d.prototype.push=function(m,g){var p,v,y,_,E,x,B=this.strm,M=this.options.chunkSize,R=this.options.dictionary,I=!1;if(this.ended)return!1;v=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?B.input=o.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?B.input=new Uint8Array(m):B.input=m,B.next_in=0,B.avail_in=B.input.length;do{if(B.avail_out===0&&(B.output=new a.Buf8(M),B.next_out=0,B.avail_out=M),(p=s.inflate(B,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&R&&(x=typeof R=="string"?o.string2buf(R):h.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,p=s.inflateSetDictionary(this.strm,x)),p===l.Z_BUF_ERROR&&I===!0&&(p=l.Z_OK,I=!1),p!==l.Z_STREAM_END&&p!==l.Z_OK)return this.onEnd(p),!(this.ended=!0);B.next_out&&(B.avail_out!==0&&p!==l.Z_STREAM_END&&(B.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(y=o.utf8border(B.output,B.next_out),_=B.next_out-y,E=o.buf2string(B.output,y),B.next_out=_,B.avail_out=M-_,_&&a.arraySet(B.output,B.output,y,_,0),this.onData(E)):this.onData(a.shrinkBuf(B.output,B.next_out)))),B.avail_in===0&&B.avail_out===0&&(I=!0)}while((0<B.avail_in||B.avail_out===0)&&p!==l.Z_STREAM_END);return p===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(p=s.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(B.avail_out=0))},d.prototype.onData=function(m){this.chunks.push(m)},d.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=d,i.inflate=f,i.inflateRaw=function(m,g){return(g=g||{}).raw=!0,f(m,g)},i.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var A=Array.prototype.slice.call(arguments,1);A.length;){var c=A.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var u in c)c.hasOwnProperty(u)&&(l[u]=c[u])}}return l},i.shrinkBuf=function(l,A){return l.length===A?l:l.subarray?l.subarray(0,A):(l.length=A,l)};var a={arraySet:function(l,A,c,u,h){if(A.subarray&&l.subarray)l.set(A.subarray(c,c+u),h);else for(var d=0;d<u;d++)l[h+d]=A[c+d]},flattenChunks:function(l){var A,c,u,h,d,f;for(A=u=0,c=l.length;A<c;A++)u+=l[A].length;for(f=new Uint8Array(u),A=h=0,c=l.length;A<c;A++)d=l[A],f.set(d,h),h+=d.length;return f}},o={arraySet:function(l,A,c,u,h){for(var d=0;d<u;d++)l[h+d]=A[c+d]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,o))},i.setTyped(s)},{}],42:[function(r,n,i){var s=r("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),A=0;A<256;A++)l[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;function c(u,h){if(h<65537&&(u.subarray&&o||!u.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(u,h));for(var d="",f=0;f<h;f++)d+=String.fromCharCode(u[f]);return d}l[254]=l[254]=1,i.string2buf=function(u){var h,d,f,m,g,p=u.length,v=0;for(m=0;m<p;m++)(64512&(d=u.charCodeAt(m)))==55296&&m+1<p&&(64512&(f=u.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(f-56320),m++),v+=d<128?1:d<2048?2:d<65536?3:4;for(h=new s.Buf8(v),m=g=0;g<v;m++)(64512&(d=u.charCodeAt(m)))==55296&&m+1<p&&(64512&(f=u.charCodeAt(m+1)))==56320&&(d=65536+(d-55296<<10)+(f-56320),m++),d<128?h[g++]=d:(d<2048?h[g++]=192|d>>>6:(d<65536?h[g++]=224|d>>>12:(h[g++]=240|d>>>18,h[g++]=128|d>>>12&63),h[g++]=128|d>>>6&63),h[g++]=128|63&d);return h},i.buf2binstring=function(u){return c(u,u.length)},i.binstring2buf=function(u){for(var h=new s.Buf8(u.length),d=0,f=h.length;d<f;d++)h[d]=u.charCodeAt(d);return h},i.buf2string=function(u,h){var d,f,m,g,p=h||u.length,v=new Array(2*p);for(d=f=0;d<p;)if((m=u[d++])<128)v[f++]=m;else if(4<(g=l[m]))v[f++]=65533,d+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&d<p;)m=m<<6|63&u[d++],g--;1<g?v[f++]=65533:m<65536?v[f++]=m:(m-=65536,v[f++]=55296|m>>10&1023,v[f++]=56320|1023&m)}return c(v,f)},i.utf8border=function(u,h){var d;for((h=h||u.length)>u.length&&(h=u.length),d=h-1;0<=d&&(192&u[d])==128;)d--;return d<0||d===0?h:d+l[u[d]]>h?d:h}},{"./common":41}],43:[function(r,n,i){n.exports=function(s,a,o,l){for(var A=65535&s|0,c=s>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;c=c+(A=A+a[l++]|0)|0,--u;);A%=65521,c%=65521}return A|c<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var A=0;A<8;A++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();n.exports=function(a,o,l,A){var c=s,u=A+l;a^=-1;for(var h=A;h<u;h++)a=a>>>8^c[255&(a^o[h])];return-1^a}},{}],46:[function(r,n,i){var s,a=r("../utils/common"),o=r("./trees"),l=r("./adler32"),A=r("./crc32"),c=r("./messages"),u=0,h=4,d=0,f=-2,m=-1,g=4,p=2,v=8,y=9,_=286,E=30,x=19,B=2*_+1,M=15,R=3,I=258,L=I+R+1,D=42,w=113,b=1,S=2,F=3,k=4;function Q(N,he){return N.msg=c[he],he}function z(N){return(N<<1)-(4<N?9:0)}function j(N){for(var he=N.length;0<=--he;)N[he]=0}function T(N){var he=N.state,oe=he.pending;oe>N.avail_out&&(oe=N.avail_out),oe!==0&&(a.arraySet(N.output,he.pending_buf,he.pending_out,oe,N.next_out),N.next_out+=oe,he.pending_out+=oe,N.total_out+=oe,N.avail_out-=oe,he.pending-=oe,he.pending===0&&(he.pending_out=0))}function H(N,he){o._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,he),N.block_start=N.strstart,T(N.strm)}function me(N,he){N.pending_buf[N.pending++]=he}function ee(N,he){N.pending_buf[N.pending++]=he>>>8&255,N.pending_buf[N.pending++]=255&he}function U(N,he){var oe,Z,$=N.max_chain_length,ce=N.strstart,W=N.prev_length,V=N.nice_match,J=N.strstart>N.w_size-L?N.strstart-(N.w_size-L):0,K=N.window,fe=N.w_mask,ie=N.prev,Ee=N.strstart+I,C=K[ce+W-1],P=K[ce+W];N.prev_length>=N.good_match&&($>>=2),V>N.lookahead&&(V=N.lookahead);do if(K[(oe=he)+W]===P&&K[oe+W-1]===C&&K[oe]===K[ce]&&K[++oe]===K[ce+1]){ce+=2,oe++;do;while(K[++ce]===K[++oe]&&K[++ce]===K[++oe]&&K[++ce]===K[++oe]&&K[++ce]===K[++oe]&&K[++ce]===K[++oe]&&K[++ce]===K[++oe]&&K[++ce]===K[++oe]&&K[++ce]===K[++oe]&&ce<Ee);if(Z=I-(Ee-ce),ce=Ee-I,W<Z){if(N.match_start=he,V<=(W=Z))break;C=K[ce+W-1],P=K[ce+W]}}while((he=ie[he&fe])>J&&--$!=0);return W<=N.lookahead?W:N.lookahead}function se(N){var he,oe,Z,$,ce,W,V,J,K,fe,ie=N.w_size;do{if($=N.window_size-N.lookahead-N.strstart,N.strstart>=ie+(ie-L)){for(a.arraySet(N.window,N.window,ie,ie,0),N.match_start-=ie,N.strstart-=ie,N.block_start-=ie,he=oe=N.hash_size;Z=N.head[--he],N.head[he]=ie<=Z?Z-ie:0,--oe;);for(he=oe=ie;Z=N.prev[--he],N.prev[he]=ie<=Z?Z-ie:0,--oe;);$+=ie}if(N.strm.avail_in===0)break;if(W=N.strm,V=N.window,J=N.strstart+N.lookahead,K=$,fe=void 0,fe=W.avail_in,K<fe&&(fe=K),oe=fe===0?0:(W.avail_in-=fe,a.arraySet(V,W.input,W.next_in,fe,J),W.state.wrap===1?W.adler=l(W.adler,V,fe,J):W.state.wrap===2&&(W.adler=A(W.adler,V,fe,J)),W.next_in+=fe,W.total_in+=fe,fe),N.lookahead+=oe,N.lookahead+N.insert>=R)for(ce=N.strstart-N.insert,N.ins_h=N.window[ce],N.ins_h=(N.ins_h<<N.hash_shift^N.window[ce+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[ce+R-1])&N.hash_mask,N.prev[ce&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=ce,ce++,N.insert--,!(N.lookahead+N.insert<R)););}while(N.lookahead<L&&N.strm.avail_in!==0)}function le(N,he){for(var oe,Z;;){if(N.lookahead<L){if(se(N),N.lookahead<L&&he===u)return b;if(N.lookahead===0)break}if(oe=0,N.lookahead>=R&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+R-1])&N.hash_mask,oe=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),oe!==0&&N.strstart-oe<=N.w_size-L&&(N.match_length=U(N,oe)),N.match_length>=R)if(Z=o._tr_tally(N,N.strstart-N.match_start,N.match_length-R),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=R){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+R-1])&N.hash_mask,oe=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else Z=o._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(Z&&(H(N,!1),N.strm.avail_out===0))return b}return N.insert=N.strstart<R-1?N.strstart:R-1,he===h?(H(N,!0),N.strm.avail_out===0?F:k):N.last_lit&&(H(N,!1),N.strm.avail_out===0)?b:S}function Ae(N,he){for(var oe,Z,$;;){if(N.lookahead<L){if(se(N),N.lookahead<L&&he===u)return b;if(N.lookahead===0)break}if(oe=0,N.lookahead>=R&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+R-1])&N.hash_mask,oe=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=R-1,oe!==0&&N.prev_length<N.max_lazy_match&&N.strstart-oe<=N.w_size-L&&(N.match_length=U(N,oe),N.match_length<=5&&(N.strategy===1||N.match_length===R&&4096<N.strstart-N.match_start)&&(N.match_length=R-1)),N.prev_length>=R&&N.match_length<=N.prev_length){for($=N.strstart+N.lookahead-R,Z=o._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-R),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=$&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+R-1])&N.hash_mask,oe=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=R-1,N.strstart++,Z&&(H(N,!1),N.strm.avail_out===0))return b}else if(N.match_available){if((Z=o._tr_tally(N,0,N.window[N.strstart-1]))&&H(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return b}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(Z=o._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<R-1?N.strstart:R-1,he===h?(H(N,!0),N.strm.avail_out===0?F:k):N.last_lit&&(H(N,!1),N.strm.avail_out===0)?b:S}function ge(N,he,oe,Z,$){this.good_length=N,this.max_lazy=he,this.nice_length=oe,this.max_chain=Z,this.func=$}function ne(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*B),this.dyn_dtree=new a.Buf16(2*(2*E+1)),this.bl_tree=new a.Buf16(2*(2*x+1)),j(this.dyn_ltree),j(this.dyn_dtree),j(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(M+1),this.heap=new a.Buf16(2*_+1),j(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*_+1),j(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(N){var he;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=p,(he=N.state).pending=0,he.pending_out=0,he.wrap<0&&(he.wrap=-he.wrap),he.status=he.wrap?D:w,N.adler=he.wrap===2?0:1,he.last_flush=u,o._tr_init(he),d):Q(N,f)}function Te(N){var he=de(N);return he===d&&function(oe){oe.window_size=2*oe.w_size,j(oe.head),oe.max_lazy_match=s[oe.level].max_lazy,oe.good_match=s[oe.level].good_length,oe.nice_match=s[oe.level].nice_length,oe.max_chain_length=s[oe.level].max_chain,oe.strstart=0,oe.block_start=0,oe.lookahead=0,oe.insert=0,oe.match_length=oe.prev_length=R-1,oe.match_available=0,oe.ins_h=0}(N.state),he}function re(N,he,oe,Z,$,ce){if(!N)return f;var W=1;if(he===m&&(he=6),Z<0?(W=0,Z=-Z):15<Z&&(W=2,Z-=16),$<1||y<$||oe!==v||Z<8||15<Z||he<0||9<he||ce<0||g<ce)return Q(N,f);Z===8&&(Z=9);var V=new ne;return(N.state=V).strm=N,V.wrap=W,V.gzhead=null,V.w_bits=Z,V.w_size=1<<V.w_bits,V.w_mask=V.w_size-1,V.hash_bits=$+7,V.hash_size=1<<V.hash_bits,V.hash_mask=V.hash_size-1,V.hash_shift=~~((V.hash_bits+R-1)/R),V.window=new a.Buf8(2*V.w_size),V.head=new a.Buf16(V.hash_size),V.prev=new a.Buf16(V.w_size),V.lit_bufsize=1<<$+6,V.pending_buf_size=4*V.lit_bufsize,V.pending_buf=new a.Buf8(V.pending_buf_size),V.d_buf=1*V.lit_bufsize,V.l_buf=3*V.lit_bufsize,V.level=he,V.strategy=ce,V.method=oe,Te(N)}s=[new ge(0,0,0,0,function(N,he){var oe=65535;for(oe>N.pending_buf_size-5&&(oe=N.pending_buf_size-5);;){if(N.lookahead<=1){if(se(N),N.lookahead===0&&he===u)return b;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var Z=N.block_start+oe;if((N.strstart===0||N.strstart>=Z)&&(N.lookahead=N.strstart-Z,N.strstart=Z,H(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-L&&(H(N,!1),N.strm.avail_out===0))return b}return N.insert=0,he===h?(H(N,!0),N.strm.avail_out===0?F:k):(N.strstart>N.block_start&&(H(N,!1),N.strm.avail_out),b)}),new ge(4,4,8,4,le),new ge(4,5,16,8,le),new ge(4,6,32,32,le),new ge(4,4,16,16,Ae),new ge(8,16,32,32,Ae),new ge(8,16,128,128,Ae),new ge(8,32,128,256,Ae),new ge(32,128,258,1024,Ae),new ge(32,258,258,4096,Ae)],i.deflateInit=function(N,he){return re(N,he,v,15,8,0)},i.deflateInit2=re,i.deflateReset=Te,i.deflateResetKeep=de,i.deflateSetHeader=function(N,he){return N&&N.state?N.state.wrap!==2?f:(N.state.gzhead=he,d):f},i.deflate=function(N,he){var oe,Z,$,ce;if(!N||!N.state||5<he||he<0)return N?Q(N,f):f;if(Z=N.state,!N.output||!N.input&&N.avail_in!==0||Z.status===666&&he!==h)return Q(N,N.avail_out===0?-5:f);if(Z.strm=N,oe=Z.last_flush,Z.last_flush=he,Z.status===D)if(Z.wrap===2)N.adler=0,me(Z,31),me(Z,139),me(Z,8),Z.gzhead?(me(Z,(Z.gzhead.text?1:0)+(Z.gzhead.hcrc?2:0)+(Z.gzhead.extra?4:0)+(Z.gzhead.name?8:0)+(Z.gzhead.comment?16:0)),me(Z,255&Z.gzhead.time),me(Z,Z.gzhead.time>>8&255),me(Z,Z.gzhead.time>>16&255),me(Z,Z.gzhead.time>>24&255),me(Z,Z.level===9?2:2<=Z.strategy||Z.level<2?4:0),me(Z,255&Z.gzhead.os),Z.gzhead.extra&&Z.gzhead.extra.length&&(me(Z,255&Z.gzhead.extra.length),me(Z,Z.gzhead.extra.length>>8&255)),Z.gzhead.hcrc&&(N.adler=A(N.adler,Z.pending_buf,Z.pending,0)),Z.gzindex=0,Z.status=69):(me(Z,0),me(Z,0),me(Z,0),me(Z,0),me(Z,0),me(Z,Z.level===9?2:2<=Z.strategy||Z.level<2?4:0),me(Z,3),Z.status=w);else{var W=v+(Z.w_bits-8<<4)<<8;W|=(2<=Z.strategy||Z.level<2?0:Z.level<6?1:Z.level===6?2:3)<<6,Z.strstart!==0&&(W|=32),W+=31-W%31,Z.status=w,ee(Z,W),Z.strstart!==0&&(ee(Z,N.adler>>>16),ee(Z,65535&N.adler)),N.adler=1}if(Z.status===69)if(Z.gzhead.extra){for($=Z.pending;Z.gzindex<(65535&Z.gzhead.extra.length)&&(Z.pending!==Z.pending_buf_size||(Z.gzhead.hcrc&&Z.pending>$&&(N.adler=A(N.adler,Z.pending_buf,Z.pending-$,$)),T(N),$=Z.pending,Z.pending!==Z.pending_buf_size));)me(Z,255&Z.gzhead.extra[Z.gzindex]),Z.gzindex++;Z.gzhead.hcrc&&Z.pending>$&&(N.adler=A(N.adler,Z.pending_buf,Z.pending-$,$)),Z.gzindex===Z.gzhead.extra.length&&(Z.gzindex=0,Z.status=73)}else Z.status=73;if(Z.status===73)if(Z.gzhead.name){$=Z.pending;do{if(Z.pending===Z.pending_buf_size&&(Z.gzhead.hcrc&&Z.pending>$&&(N.adler=A(N.adler,Z.pending_buf,Z.pending-$,$)),T(N),$=Z.pending,Z.pending===Z.pending_buf_size)){ce=1;break}ce=Z.gzindex<Z.gzhead.name.length?255&Z.gzhead.name.charCodeAt(Z.gzindex++):0,me(Z,ce)}while(ce!==0);Z.gzhead.hcrc&&Z.pending>$&&(N.adler=A(N.adler,Z.pending_buf,Z.pending-$,$)),ce===0&&(Z.gzindex=0,Z.status=91)}else Z.status=91;if(Z.status===91)if(Z.gzhead.comment){$=Z.pending;do{if(Z.pending===Z.pending_buf_size&&(Z.gzhead.hcrc&&Z.pending>$&&(N.adler=A(N.adler,Z.pending_buf,Z.pending-$,$)),T(N),$=Z.pending,Z.pending===Z.pending_buf_size)){ce=1;break}ce=Z.gzindex<Z.gzhead.comment.length?255&Z.gzhead.comment.charCodeAt(Z.gzindex++):0,me(Z,ce)}while(ce!==0);Z.gzhead.hcrc&&Z.pending>$&&(N.adler=A(N.adler,Z.pending_buf,Z.pending-$,$)),ce===0&&(Z.status=103)}else Z.status=103;if(Z.status===103&&(Z.gzhead.hcrc?(Z.pending+2>Z.pending_buf_size&&T(N),Z.pending+2<=Z.pending_buf_size&&(me(Z,255&N.adler),me(Z,N.adler>>8&255),N.adler=0,Z.status=w)):Z.status=w),Z.pending!==0){if(T(N),N.avail_out===0)return Z.last_flush=-1,d}else if(N.avail_in===0&&z(he)<=z(oe)&&he!==h)return Q(N,-5);if(Z.status===666&&N.avail_in!==0)return Q(N,-5);if(N.avail_in!==0||Z.lookahead!==0||he!==u&&Z.status!==666){var V=Z.strategy===2?function(J,K){for(var fe;;){if(J.lookahead===0&&(se(J),J.lookahead===0)){if(K===u)return b;break}if(J.match_length=0,fe=o._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++,fe&&(H(J,!1),J.strm.avail_out===0))return b}return J.insert=0,K===h?(H(J,!0),J.strm.avail_out===0?F:k):J.last_lit&&(H(J,!1),J.strm.avail_out===0)?b:S}(Z,he):Z.strategy===3?function(J,K){for(var fe,ie,Ee,C,P=J.window;;){if(J.lookahead<=I){if(se(J),J.lookahead<=I&&K===u)return b;if(J.lookahead===0)break}if(J.match_length=0,J.lookahead>=R&&0<J.strstart&&(ie=P[Ee=J.strstart-1])===P[++Ee]&&ie===P[++Ee]&&ie===P[++Ee]){C=J.strstart+I;do;while(ie===P[++Ee]&&ie===P[++Ee]&&ie===P[++Ee]&&ie===P[++Ee]&&ie===P[++Ee]&&ie===P[++Ee]&&ie===P[++Ee]&&ie===P[++Ee]&&Ee<C);J.match_length=I-(C-Ee),J.match_length>J.lookahead&&(J.match_length=J.lookahead)}if(J.match_length>=R?(fe=o._tr_tally(J,1,J.match_length-R),J.lookahead-=J.match_length,J.strstart+=J.match_length,J.match_length=0):(fe=o._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++),fe&&(H(J,!1),J.strm.avail_out===0))return b}return J.insert=0,K===h?(H(J,!0),J.strm.avail_out===0?F:k):J.last_lit&&(H(J,!1),J.strm.avail_out===0)?b:S}(Z,he):s[Z.level].func(Z,he);if(V!==F&&V!==k||(Z.status=666),V===b||V===F)return N.avail_out===0&&(Z.last_flush=-1),d;if(V===S&&(he===1?o._tr_align(Z):he!==5&&(o._tr_stored_block(Z,0,0,!1),he===3&&(j(Z.head),Z.lookahead===0&&(Z.strstart=0,Z.block_start=0,Z.insert=0))),T(N),N.avail_out===0))return Z.last_flush=-1,d}return he!==h?d:Z.wrap<=0?1:(Z.wrap===2?(me(Z,255&N.adler),me(Z,N.adler>>8&255),me(Z,N.adler>>16&255),me(Z,N.adler>>24&255),me(Z,255&N.total_in),me(Z,N.total_in>>8&255),me(Z,N.total_in>>16&255),me(Z,N.total_in>>24&255)):(ee(Z,N.adler>>>16),ee(Z,65535&N.adler)),T(N),0<Z.wrap&&(Z.wrap=-Z.wrap),Z.pending!==0?d:1)},i.deflateEnd=function(N){var he;return N&&N.state?(he=N.state.status)!==D&&he!==69&&he!==73&&he!==91&&he!==103&&he!==w&&he!==666?Q(N,f):(N.state=null,he===w?Q(N,-3):d):f},i.deflateSetDictionary=function(N,he){var oe,Z,$,ce,W,V,J,K,fe=he.length;if(!N||!N.state||(ce=(oe=N.state).wrap)===2||ce===1&&oe.status!==D||oe.lookahead)return f;for(ce===1&&(N.adler=l(N.adler,he,fe,0)),oe.wrap=0,fe>=oe.w_size&&(ce===0&&(j(oe.head),oe.strstart=0,oe.block_start=0,oe.insert=0),K=new a.Buf8(oe.w_size),a.arraySet(K,he,fe-oe.w_size,oe.w_size,0),he=K,fe=oe.w_size),W=N.avail_in,V=N.next_in,J=N.input,N.avail_in=fe,N.next_in=0,N.input=he,se(oe);oe.lookahead>=R;){for(Z=oe.strstart,$=oe.lookahead-(R-1);oe.ins_h=(oe.ins_h<<oe.hash_shift^oe.window[Z+R-1])&oe.hash_mask,oe.prev[Z&oe.w_mask]=oe.head[oe.ins_h],oe.head[oe.ins_h]=Z,Z++,--$;);oe.strstart=Z,oe.lookahead=R-1,se(oe)}return oe.strstart+=oe.lookahead,oe.block_start=oe.strstart,oe.insert=oe.lookahead,oe.lookahead=0,oe.match_length=oe.prev_length=R-1,oe.match_available=0,N.next_in=V,N.input=J,N.avail_in=W,oe.wrap=ce,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(s,a){var o,l,A,c,u,h,d,f,m,g,p,v,y,_,E,x,B,M,R,I,L,D,w,b,S;o=s.state,l=s.next_in,b=s.input,A=l+(s.avail_in-5),c=s.next_out,S=s.output,u=c-(a-s.avail_out),h=c+(s.avail_out-257),d=o.dmax,f=o.wsize,m=o.whave,g=o.wnext,p=o.window,v=o.hold,y=o.bits,_=o.lencode,E=o.distcode,x=(1<<o.lenbits)-1,B=(1<<o.distbits)-1;e:do{y<15&&(v+=b[l++]<<y,y+=8,v+=b[l++]<<y,y+=8),M=_[v&x];t:for(;;){if(v>>>=R=M>>>24,y-=R,(R=M>>>16&255)===0)S[c++]=65535&M;else{if(!(16&R)){if(!(64&R)){M=_[(65535&M)+(v&(1<<R)-1)];continue t}if(32&R){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}I=65535&M,(R&=15)&&(y<R&&(v+=b[l++]<<y,y+=8),I+=v&(1<<R)-1,v>>>=R,y-=R),y<15&&(v+=b[l++]<<y,y+=8,v+=b[l++]<<y,y+=8),M=E[v&B];r:for(;;){if(v>>>=R=M>>>24,y-=R,!(16&(R=M>>>16&255))){if(!(64&R)){M=E[(65535&M)+(v&(1<<R)-1)];continue r}s.msg="invalid distance code",o.mode=30;break e}if(L=65535&M,y<(R&=15)&&(v+=b[l++]<<y,(y+=8)<R&&(v+=b[l++]<<y,y+=8)),d<(L+=v&(1<<R)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(v>>>=R,y-=R,(R=c-u)<L){if(m<(R=L-R)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(w=p,(D=0)===g){if(D+=f-R,R<I){for(I-=R;S[c++]=p[D++],--R;);D=c-L,w=S}}else if(g<R){if(D+=f+g-R,(R-=g)<I){for(I-=R;S[c++]=p[D++],--R;);if(D=0,g<I){for(I-=R=g;S[c++]=p[D++],--R;);D=c-L,w=S}}}else if(D+=g-R,R<I){for(I-=R;S[c++]=p[D++],--R;);D=c-L,w=S}for(;2<I;)S[c++]=w[D++],S[c++]=w[D++],S[c++]=w[D++],I-=3;I&&(S[c++]=w[D++],1<I&&(S[c++]=w[D++]))}else{for(D=c-L;S[c++]=S[D++],S[c++]=S[D++],S[c++]=S[D++],2<(I-=3););I&&(S[c++]=S[D++],1<I&&(S[c++]=S[D++]))}break}}break}}while(l<A&&c<h);l-=I=y>>3,v&=(1<<(y-=I<<3))-1,s.next_in=l,s.next_out=c,s.avail_in=l<A?A-l+5:5-(l-A),s.avail_out=c<h?h-c+257:257-(c-h),o.hold=v,o.bits=y}},{}],49:[function(r,n,i){var s=r("../utils/common"),a=r("./adler32"),o=r("./crc32"),l=r("./inffast"),A=r("./inftrees"),c=1,u=2,h=0,d=-2,f=1,m=852,g=592;function p(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(D){var w;return D&&D.state?(w=D.state,D.total_in=D.total_out=w.total=0,D.msg="",w.wrap&&(D.adler=1&w.wrap),w.mode=f,w.last=0,w.havedict=0,w.dmax=32768,w.head=null,w.hold=0,w.bits=0,w.lencode=w.lendyn=new s.Buf32(m),w.distcode=w.distdyn=new s.Buf32(g),w.sane=1,w.back=-1,h):d}function _(D){var w;return D&&D.state?((w=D.state).wsize=0,w.whave=0,w.wnext=0,y(D)):d}function E(D,w){var b,S;return D&&D.state?(S=D.state,w<0?(b=0,w=-w):(b=1+(w>>4),w<48&&(w&=15)),w&&(w<8||15<w)?d:(S.window!==null&&S.wbits!==w&&(S.window=null),S.wrap=b,S.wbits=w,_(D))):d}function x(D,w){var b,S;return D?(S=new v,(D.state=S).window=null,(b=E(D,w))!==h&&(D.state=null),b):d}var B,M,R=!0;function I(D){if(R){var w;for(B=new s.Buf32(512),M=new s.Buf32(32),w=0;w<144;)D.lens[w++]=8;for(;w<256;)D.lens[w++]=9;for(;w<280;)D.lens[w++]=7;for(;w<288;)D.lens[w++]=8;for(A(c,D.lens,0,288,B,0,D.work,{bits:9}),w=0;w<32;)D.lens[w++]=5;A(u,D.lens,0,32,M,0,D.work,{bits:5}),R=!1}D.lencode=B,D.lenbits=9,D.distcode=M,D.distbits=5}function L(D,w,b,S){var F,k=D.state;return k.window===null&&(k.wsize=1<<k.wbits,k.wnext=0,k.whave=0,k.window=new s.Buf8(k.wsize)),S>=k.wsize?(s.arraySet(k.window,w,b-k.wsize,k.wsize,0),k.wnext=0,k.whave=k.wsize):(S<(F=k.wsize-k.wnext)&&(F=S),s.arraySet(k.window,w,b-S,F,k.wnext),(S-=F)?(s.arraySet(k.window,w,b-S,S,0),k.wnext=S,k.whave=k.wsize):(k.wnext+=F,k.wnext===k.wsize&&(k.wnext=0),k.whave<k.wsize&&(k.whave+=F))),0}i.inflateReset=_,i.inflateReset2=E,i.inflateResetKeep=y,i.inflateInit=function(D){return x(D,15)},i.inflateInit2=x,i.inflate=function(D,w){var b,S,F,k,Q,z,j,T,H,me,ee,U,se,le,Ae,ge,ne,de,Te,re,N,he,oe,Z,$=0,ce=new s.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return d;(b=D.state).mode===12&&(b.mode=13),Q=D.next_out,F=D.output,j=D.avail_out,k=D.next_in,S=D.input,z=D.avail_in,T=b.hold,H=b.bits,me=z,ee=j,he=h;e:for(;;)switch(b.mode){case f:if(b.wrap===0){b.mode=13;break}for(;H<16;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(2&b.wrap&&T===35615){ce[b.check=0]=255&T,ce[1]=T>>>8&255,b.check=o(b.check,ce,2,0),H=T=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&T)<<8)+(T>>8))%31){D.msg="incorrect header check",b.mode=30;break}if((15&T)!=8){D.msg="unknown compression method",b.mode=30;break}if(H-=4,N=8+(15&(T>>>=4)),b.wbits===0)b.wbits=N;else if(N>b.wbits){D.msg="invalid window size",b.mode=30;break}b.dmax=1<<N,D.adler=b.check=1,b.mode=512&T?10:12,H=T=0;break;case 2:for(;H<16;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(b.flags=T,(255&b.flags)!=8){D.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){D.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=T>>8&1),512&b.flags&&(ce[0]=255&T,ce[1]=T>>>8&255,b.check=o(b.check,ce,2,0)),H=T=0,b.mode=3;case 3:for(;H<32;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}b.head&&(b.head.time=T),512&b.flags&&(ce[0]=255&T,ce[1]=T>>>8&255,ce[2]=T>>>16&255,ce[3]=T>>>24&255,b.check=o(b.check,ce,4,0)),H=T=0,b.mode=4;case 4:for(;H<16;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}b.head&&(b.head.xflags=255&T,b.head.os=T>>8),512&b.flags&&(ce[0]=255&T,ce[1]=T>>>8&255,b.check=o(b.check,ce,2,0)),H=T=0,b.mode=5;case 5:if(1024&b.flags){for(;H<16;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}b.length=T,b.head&&(b.head.extra_len=T),512&b.flags&&(ce[0]=255&T,ce[1]=T>>>8&255,b.check=o(b.check,ce,2,0)),H=T=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(z<(U=b.length)&&(U=z),U&&(b.head&&(N=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),s.arraySet(b.head.extra,S,k,U,N)),512&b.flags&&(b.check=o(b.check,S,U,k)),z-=U,k+=U,b.length-=U),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(z===0)break e;for(U=0;N=S[k+U++],b.head&&N&&b.length<65536&&(b.head.name+=String.fromCharCode(N)),N&&U<z;);if(512&b.flags&&(b.check=o(b.check,S,U,k)),z-=U,k+=U,N)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(z===0)break e;for(U=0;N=S[k+U++],b.head&&N&&b.length<65536&&(b.head.comment+=String.fromCharCode(N)),N&&U<z;);if(512&b.flags&&(b.check=o(b.check,S,U,k)),z-=U,k+=U,N)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;H<16;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(T!==(65535&b.check)){D.msg="header crc mismatch",b.mode=30;break}H=T=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),D.adler=b.check=0,b.mode=12;break;case 10:for(;H<32;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}D.adler=b.check=p(T),H=T=0,b.mode=11;case 11:if(b.havedict===0)return D.next_out=Q,D.avail_out=j,D.next_in=k,D.avail_in=z,b.hold=T,b.bits=H,2;D.adler=b.check=1,b.mode=12;case 12:if(w===5||w===6)break e;case 13:if(b.last){T>>>=7&H,H-=7&H,b.mode=27;break}for(;H<3;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}switch(b.last=1&T,H-=1,3&(T>>>=1)){case 0:b.mode=14;break;case 1:if(I(b),b.mode=20,w!==6)break;T>>>=2,H-=2;break e;case 2:b.mode=17;break;case 3:D.msg="invalid block type",b.mode=30}T>>>=2,H-=2;break;case 14:for(T>>>=7&H,H-=7&H;H<32;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if((65535&T)!=(T>>>16^65535)){D.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&T,H=T=0,b.mode=15,w===6)break e;case 15:b.mode=16;case 16:if(U=b.length){if(z<U&&(U=z),j<U&&(U=j),U===0)break e;s.arraySet(F,S,k,U,Q),z-=U,k+=U,j-=U,Q+=U,b.length-=U;break}b.mode=12;break;case 17:for(;H<14;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(b.nlen=257+(31&T),T>>>=5,H-=5,b.ndist=1+(31&T),T>>>=5,H-=5,b.ncode=4+(15&T),T>>>=4,H-=4,286<b.nlen||30<b.ndist){D.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;H<3;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}b.lens[W[b.have++]]=7&T,T>>>=3,H-=3}for(;b.have<19;)b.lens[W[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,oe={bits:b.lenbits},he=A(0,b.lens,0,19,b.lencode,0,b.work,oe),b.lenbits=oe.bits,he){D.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;ge=($=b.lencode[T&(1<<b.lenbits)-1])>>>16&255,ne=65535&$,!((Ae=$>>>24)<=H);){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(ne<16)T>>>=Ae,H-=Ae,b.lens[b.have++]=ne;else{if(ne===16){for(Z=Ae+2;H<Z;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(T>>>=Ae,H-=Ae,b.have===0){D.msg="invalid bit length repeat",b.mode=30;break}N=b.lens[b.have-1],U=3+(3&T),T>>>=2,H-=2}else if(ne===17){for(Z=Ae+3;H<Z;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}H-=Ae,N=0,U=3+(7&(T>>>=Ae)),T>>>=3,H-=3}else{for(Z=Ae+7;H<Z;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}H-=Ae,N=0,U=11+(127&(T>>>=Ae)),T>>>=7,H-=7}if(b.have+U>b.nlen+b.ndist){D.msg="invalid bit length repeat",b.mode=30;break}for(;U--;)b.lens[b.have++]=N}}if(b.mode===30)break;if(b.lens[256]===0){D.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,oe={bits:b.lenbits},he=A(c,b.lens,0,b.nlen,b.lencode,0,b.work,oe),b.lenbits=oe.bits,he){D.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,oe={bits:b.distbits},he=A(u,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,oe),b.distbits=oe.bits,he){D.msg="invalid distances set",b.mode=30;break}if(b.mode=20,w===6)break e;case 20:b.mode=21;case 21:if(6<=z&&258<=j){D.next_out=Q,D.avail_out=j,D.next_in=k,D.avail_in=z,b.hold=T,b.bits=H,l(D,ee),Q=D.next_out,F=D.output,j=D.avail_out,k=D.next_in,S=D.input,z=D.avail_in,T=b.hold,H=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;ge=($=b.lencode[T&(1<<b.lenbits)-1])>>>16&255,ne=65535&$,!((Ae=$>>>24)<=H);){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(ge&&!(240&ge)){for(de=Ae,Te=ge,re=ne;ge=($=b.lencode[re+((T&(1<<de+Te)-1)>>de)])>>>16&255,ne=65535&$,!(de+(Ae=$>>>24)<=H);){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}T>>>=de,H-=de,b.back+=de}if(T>>>=Ae,H-=Ae,b.back+=Ae,b.length=ne,ge===0){b.mode=26;break}if(32&ge){b.back=-1,b.mode=12;break}if(64&ge){D.msg="invalid literal/length code",b.mode=30;break}b.extra=15&ge,b.mode=22;case 22:if(b.extra){for(Z=b.extra;H<Z;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}b.length+=T&(1<<b.extra)-1,T>>>=b.extra,H-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;ge=($=b.distcode[T&(1<<b.distbits)-1])>>>16&255,ne=65535&$,!((Ae=$>>>24)<=H);){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(!(240&ge)){for(de=Ae,Te=ge,re=ne;ge=($=b.distcode[re+((T&(1<<de+Te)-1)>>de)])>>>16&255,ne=65535&$,!(de+(Ae=$>>>24)<=H);){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}T>>>=de,H-=de,b.back+=de}if(T>>>=Ae,H-=Ae,b.back+=Ae,64&ge){D.msg="invalid distance code",b.mode=30;break}b.offset=ne,b.extra=15&ge,b.mode=24;case 24:if(b.extra){for(Z=b.extra;H<Z;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}b.offset+=T&(1<<b.extra)-1,T>>>=b.extra,H-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){D.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(j===0)break e;if(U=ee-j,b.offset>U){if((U=b.offset-U)>b.whave&&b.sane){D.msg="invalid distance too far back",b.mode=30;break}se=U>b.wnext?(U-=b.wnext,b.wsize-U):b.wnext-U,U>b.length&&(U=b.length),le=b.window}else le=F,se=Q-b.offset,U=b.length;for(j<U&&(U=j),j-=U,b.length-=U;F[Q++]=le[se++],--U;);b.length===0&&(b.mode=21);break;case 26:if(j===0)break e;F[Q++]=b.length,j--,b.mode=21;break;case 27:if(b.wrap){for(;H<32;){if(z===0)break e;z--,T|=S[k++]<<H,H+=8}if(ee-=j,D.total_out+=ee,b.total+=ee,ee&&(D.adler=b.check=b.flags?o(b.check,F,ee,Q-ee):a(b.check,F,ee,Q-ee)),ee=j,(b.flags?T:p(T))!==b.check){D.msg="incorrect data check",b.mode=30;break}H=T=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;H<32;){if(z===0)break e;z--,T+=S[k++]<<H,H+=8}if(T!==(4294967295&b.total)){D.msg="incorrect length check",b.mode=30;break}H=T=0}b.mode=29;case 29:he=1;break e;case 30:he=-3;break e;case 31:return-4;case 32:default:return d}return D.next_out=Q,D.avail_out=j,D.next_in=k,D.avail_in=z,b.hold=T,b.bits=H,(b.wsize||ee!==D.avail_out&&b.mode<30&&(b.mode<27||w!==4))&&L(D,D.output,D.next_out,ee-D.avail_out)?(b.mode=31,-4):(me-=D.avail_in,ee-=D.avail_out,D.total_in+=me,D.total_out+=ee,b.total+=ee,b.wrap&&ee&&(D.adler=b.check=b.flags?o(b.check,F,ee,D.next_out-ee):a(b.check,F,ee,D.next_out-ee)),D.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(me==0&&ee===0||w===4)&&he===h&&(he=-5),he)},i.inflateEnd=function(D){if(!D||!D.state)return d;var w=D.state;return w.window&&(w.window=null),D.state=null,h},i.inflateGetHeader=function(D,w){var b;return D&&D.state&&2&(b=D.state).wrap?((b.head=w).done=!1,h):d},i.inflateSetDictionary=function(D,w){var b,S=w.length;return D&&D.state?(b=D.state).wrap!==0&&b.mode!==11?d:b.mode===11&&a(1,w,S,0)!==b.check?-3:L(D,w,S,S)?(b.mode=31,-4):(b.havedict=1,h):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var s=r("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],A=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(c,u,h,d,f,m,g,p){var v,y,_,E,x,B,M,R,I,L=p.bits,D=0,w=0,b=0,S=0,F=0,k=0,Q=0,z=0,j=0,T=0,H=null,me=0,ee=new s.Buf16(16),U=new s.Buf16(16),se=null,le=0;for(D=0;D<=15;D++)ee[D]=0;for(w=0;w<d;w++)ee[u[h+w]]++;for(F=L,S=15;1<=S&&ee[S]===0;S--);if(S<F&&(F=S),S===0)return f[m++]=20971520,f[m++]=20971520,p.bits=1,0;for(b=1;b<S&&ee[b]===0;b++);for(F<b&&(F=b),D=z=1;D<=15;D++)if(z<<=1,(z-=ee[D])<0)return-1;if(0<z&&(c===0||S!==1))return-1;for(U[1]=0,D=1;D<15;D++)U[D+1]=U[D]+ee[D];for(w=0;w<d;w++)u[h+w]!==0&&(g[U[u[h+w]]++]=w);if(B=c===0?(H=se=g,19):c===1?(H=a,me-=257,se=o,le-=257,256):(H=l,se=A,-1),D=b,x=m,Q=w=T=0,_=-1,E=(j=1<<(k=F))-1,c===1&&852<j||c===2&&592<j)return 1;for(;;){for(M=D-Q,I=g[w]<B?(R=0,g[w]):g[w]>B?(R=se[le+g[w]],H[me+g[w]]):(R=96,0),v=1<<D-Q,b=y=1<<k;f[x+(T>>Q)+(y-=v)]=M<<24|R<<16|I|0,y!==0;);for(v=1<<D-1;T&v;)v>>=1;if(v!==0?(T&=v-1,T+=v):T=0,w++,--ee[D]==0){if(D===S)break;D=u[h+g[w]]}if(F<D&&(T&E)!==_){for(Q===0&&(Q=F),x+=b,z=1<<(k=D-Q);k+Q<S&&!((z-=ee[k+Q])<=0);)k++,z<<=1;if(j+=1<<k,c===1&&852<j||c===2&&592<j)return 1;f[_=T&E]=F<<24|k<<16|x-m|0}}return T!==0&&(f[x+T]=D-Q<<24|64<<16|0),p.bits=F,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var s=r("../utils/common"),a=0,o=1;function l($){for(var ce=$.length;0<=--ce;)$[ce]=0}var A=0,c=29,u=256,h=u+1+c,d=30,f=19,m=2*h+1,g=15,p=16,v=7,y=256,_=16,E=17,x=18,B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(h+2));l(L);var D=new Array(2*d);l(D);var w=new Array(512);l(w);var b=new Array(256);l(b);var S=new Array(c);l(S);var F,k,Q,z=new Array(d);function j($,ce,W,V,J){this.static_tree=$,this.extra_bits=ce,this.extra_base=W,this.elems=V,this.max_length=J,this.has_stree=$&&$.length}function T($,ce){this.dyn_tree=$,this.max_code=0,this.stat_desc=ce}function H($){return $<256?w[$]:w[256+($>>>7)]}function me($,ce){$.pending_buf[$.pending++]=255&ce,$.pending_buf[$.pending++]=ce>>>8&255}function ee($,ce,W){$.bi_valid>p-W?($.bi_buf|=ce<<$.bi_valid&65535,me($,$.bi_buf),$.bi_buf=ce>>p-$.bi_valid,$.bi_valid+=W-p):($.bi_buf|=ce<<$.bi_valid&65535,$.bi_valid+=W)}function U($,ce,W){ee($,W[2*ce],W[2*ce+1])}function se($,ce){for(var W=0;W|=1&$,$>>>=1,W<<=1,0<--ce;);return W>>>1}function le($,ce,W){var V,J,K=new Array(g+1),fe=0;for(V=1;V<=g;V++)K[V]=fe=fe+W[V-1]<<1;for(J=0;J<=ce;J++){var ie=$[2*J+1];ie!==0&&($[2*J]=se(K[ie]++,ie))}}function Ae($){var ce;for(ce=0;ce<h;ce++)$.dyn_ltree[2*ce]=0;for(ce=0;ce<d;ce++)$.dyn_dtree[2*ce]=0;for(ce=0;ce<f;ce++)$.bl_tree[2*ce]=0;$.dyn_ltree[2*y]=1,$.opt_len=$.static_len=0,$.last_lit=$.matches=0}function ge($){8<$.bi_valid?me($,$.bi_buf):0<$.bi_valid&&($.pending_buf[$.pending++]=$.bi_buf),$.bi_buf=0,$.bi_valid=0}function ne($,ce,W,V){var J=2*ce,K=2*W;return $[J]<$[K]||$[J]===$[K]&&V[ce]<=V[W]}function de($,ce,W){for(var V=$.heap[W],J=W<<1;J<=$.heap_len&&(J<$.heap_len&&ne(ce,$.heap[J+1],$.heap[J],$.depth)&&J++,!ne(ce,V,$.heap[J],$.depth));)$.heap[W]=$.heap[J],W=J,J<<=1;$.heap[W]=V}function Te($,ce,W){var V,J,K,fe,ie=0;if($.last_lit!==0)for(;V=$.pending_buf[$.d_buf+2*ie]<<8|$.pending_buf[$.d_buf+2*ie+1],J=$.pending_buf[$.l_buf+ie],ie++,V===0?U($,J,ce):(U($,(K=b[J])+u+1,ce),(fe=B[K])!==0&&ee($,J-=S[K],fe),U($,K=H(--V),W),(fe=M[K])!==0&&ee($,V-=z[K],fe)),ie<$.last_lit;);U($,y,ce)}function re($,ce){var W,V,J,K=ce.dyn_tree,fe=ce.stat_desc.static_tree,ie=ce.stat_desc.has_stree,Ee=ce.stat_desc.elems,C=-1;for($.heap_len=0,$.heap_max=m,W=0;W<Ee;W++)K[2*W]!==0?($.heap[++$.heap_len]=C=W,$.depth[W]=0):K[2*W+1]=0;for(;$.heap_len<2;)K[2*(J=$.heap[++$.heap_len]=C<2?++C:0)]=1,$.depth[J]=0,$.opt_len--,ie&&($.static_len-=fe[2*J+1]);for(ce.max_code=C,W=$.heap_len>>1;1<=W;W--)de($,K,W);for(J=Ee;W=$.heap[1],$.heap[1]=$.heap[$.heap_len--],de($,K,1),V=$.heap[1],$.heap[--$.heap_max]=W,$.heap[--$.heap_max]=V,K[2*J]=K[2*W]+K[2*V],$.depth[J]=($.depth[W]>=$.depth[V]?$.depth[W]:$.depth[V])+1,K[2*W+1]=K[2*V+1]=J,$.heap[1]=J++,de($,K,1),2<=$.heap_len;);$.heap[--$.heap_max]=$.heap[1],function(P,G){var te,ae,pe,ve,Ie,ke,Le=G.dyn_tree,Oe=G.max_code,ue=G.stat_desc.static_tree,Qe=G.stat_desc.has_stree,xe=G.stat_desc.extra_bits,Ce=G.stat_desc.extra_base,Fe=G.stat_desc.max_length,Re=0;for(ve=0;ve<=g;ve++)P.bl_count[ve]=0;for(Le[2*P.heap[P.heap_max]+1]=0,te=P.heap_max+1;te<m;te++)Fe<(ve=Le[2*Le[2*(ae=P.heap[te])+1]+1]+1)&&(ve=Fe,Re++),Le[2*ae+1]=ve,Oe<ae||(P.bl_count[ve]++,Ie=0,Ce<=ae&&(Ie=xe[ae-Ce]),ke=Le[2*ae],P.opt_len+=ke*(ve+Ie),Qe&&(P.static_len+=ke*(ue[2*ae+1]+Ie)));if(Re!==0){do{for(ve=Fe-1;P.bl_count[ve]===0;)ve--;P.bl_count[ve]--,P.bl_count[ve+1]+=2,P.bl_count[Fe]--,Re-=2}while(0<Re);for(ve=Fe;ve!==0;ve--)for(ae=P.bl_count[ve];ae!==0;)Oe<(pe=P.heap[--te])||(Le[2*pe+1]!==ve&&(P.opt_len+=(ve-Le[2*pe+1])*Le[2*pe],Le[2*pe+1]=ve),ae--)}}($,ce),le(K,C,$.bl_count)}function N($,ce,W){var V,J,K=-1,fe=ce[1],ie=0,Ee=7,C=4;for(fe===0&&(Ee=138,C=3),ce[2*(W+1)+1]=65535,V=0;V<=W;V++)J=fe,fe=ce[2*(V+1)+1],++ie<Ee&&J===fe||(ie<C?$.bl_tree[2*J]+=ie:J!==0?(J!==K&&$.bl_tree[2*J]++,$.bl_tree[2*_]++):ie<=10?$.bl_tree[2*E]++:$.bl_tree[2*x]++,K=J,C=(ie=0)===fe?(Ee=138,3):J===fe?(Ee=6,3):(Ee=7,4))}function he($,ce,W){var V,J,K=-1,fe=ce[1],ie=0,Ee=7,C=4;for(fe===0&&(Ee=138,C=3),V=0;V<=W;V++)if(J=fe,fe=ce[2*(V+1)+1],!(++ie<Ee&&J===fe)){if(ie<C)for(;U($,J,$.bl_tree),--ie!=0;);else J!==0?(J!==K&&(U($,J,$.bl_tree),ie--),U($,_,$.bl_tree),ee($,ie-3,2)):ie<=10?(U($,E,$.bl_tree),ee($,ie-3,3)):(U($,x,$.bl_tree),ee($,ie-11,7));K=J,C=(ie=0)===fe?(Ee=138,3):J===fe?(Ee=6,3):(Ee=7,4)}}l(z);var oe=!1;function Z($,ce,W,V){ee($,(A<<1)+(V?1:0),3),function(J,K,fe,ie){ge(J),ie&&(me(J,fe),me(J,~fe)),s.arraySet(J.pending_buf,J.window,K,fe,J.pending),J.pending+=fe}($,ce,W,!0)}i._tr_init=function($){oe||(function(){var ce,W,V,J,K,fe=new Array(g+1);for(J=V=0;J<c-1;J++)for(S[J]=V,ce=0;ce<1<<B[J];ce++)b[V++]=J;for(b[V-1]=J,J=K=0;J<16;J++)for(z[J]=K,ce=0;ce<1<<M[J];ce++)w[K++]=J;for(K>>=7;J<d;J++)for(z[J]=K<<7,ce=0;ce<1<<M[J]-7;ce++)w[256+K++]=J;for(W=0;W<=g;W++)fe[W]=0;for(ce=0;ce<=143;)L[2*ce+1]=8,ce++,fe[8]++;for(;ce<=255;)L[2*ce+1]=9,ce++,fe[9]++;for(;ce<=279;)L[2*ce+1]=7,ce++,fe[7]++;for(;ce<=287;)L[2*ce+1]=8,ce++,fe[8]++;for(le(L,h+1,fe),ce=0;ce<d;ce++)D[2*ce+1]=5,D[2*ce]=se(ce,5);F=new j(L,B,u+1,h,g),k=new j(D,M,0,d,g),Q=new j(new Array(0),R,0,f,v)}(),oe=!0),$.l_desc=new T($.dyn_ltree,F),$.d_desc=new T($.dyn_dtree,k),$.bl_desc=new T($.bl_tree,Q),$.bi_buf=0,$.bi_valid=0,Ae($)},i._tr_stored_block=Z,i._tr_flush_block=function($,ce,W,V){var J,K,fe=0;0<$.level?($.strm.data_type===2&&($.strm.data_type=function(ie){var Ee,C=4093624447;for(Ee=0;Ee<=31;Ee++,C>>>=1)if(1&C&&ie.dyn_ltree[2*Ee]!==0)return a;if(ie.dyn_ltree[18]!==0||ie.dyn_ltree[20]!==0||ie.dyn_ltree[26]!==0)return o;for(Ee=32;Ee<u;Ee++)if(ie.dyn_ltree[2*Ee]!==0)return o;return a}($)),re($,$.l_desc),re($,$.d_desc),fe=function(ie){var Ee;for(N(ie,ie.dyn_ltree,ie.l_desc.max_code),N(ie,ie.dyn_dtree,ie.d_desc.max_code),re(ie,ie.bl_desc),Ee=f-1;3<=Ee&&ie.bl_tree[2*I[Ee]+1]===0;Ee--);return ie.opt_len+=3*(Ee+1)+5+5+4,Ee}($),J=$.opt_len+3+7>>>3,(K=$.static_len+3+7>>>3)<=J&&(J=K)):J=K=W+5,W+4<=J&&ce!==-1?Z($,ce,W,V):$.strategy===4||K===J?(ee($,2+(V?1:0),3),Te($,L,D)):(ee($,4+(V?1:0),3),function(ie,Ee,C,P){var G;for(ee(ie,Ee-257,5),ee(ie,C-1,5),ee(ie,P-4,4),G=0;G<P;G++)ee(ie,ie.bl_tree[2*I[G]+1],3);he(ie,ie.dyn_ltree,Ee-1),he(ie,ie.dyn_dtree,C-1)}($,$.l_desc.max_code+1,$.d_desc.max_code+1,fe+1),Te($,$.dyn_ltree,$.dyn_dtree)),Ae($),V&&ge($)},i._tr_tally=function($,ce,W){return $.pending_buf[$.d_buf+2*$.last_lit]=ce>>>8&255,$.pending_buf[$.d_buf+2*$.last_lit+1]=255&ce,$.pending_buf[$.l_buf+$.last_lit]=255&W,$.last_lit++,ce===0?$.dyn_ltree[2*W]++:($.matches++,ce--,$.dyn_ltree[2*(b[W]+u+1)]++,$.dyn_dtree[2*H(ce)]++),$.last_lit===$.lit_bufsize-1},i._tr_align=function($){ee($,2,3),U($,y,L),function(ce){ce.bi_valid===16?(me(ce,ce.bi_buf),ce.bi_buf=0,ce.bi_valid=0):8<=ce.bi_valid&&(ce.pending_buf[ce.pending++]=255&ce.bi_buf,ce.bi_buf>>=8,ce.bi_valid-=8)}($)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(s){(function(a,o){if(!a.setImmediate){var l,A,c,u,h=1,d={},f=!1,m=a.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(a);g=g&&g.setTimeout?g:a,l={}.toString.call(a.process)==="[object process]"?function(_){process.nextTick(function(){v(_)})}:function(){if(a.postMessage&&!a.importScripts){var _=!0,E=a.onmessage;return a.onmessage=function(){_=!1},a.postMessage("","*"),a.onmessage=E,_}}()?(u="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",y,!1):a.attachEvent("onmessage",y),function(_){a.postMessage(u+_,"*")}):a.MessageChannel?((c=new MessageChannel).port1.onmessage=function(_){v(_.data)},function(_){c.port2.postMessage(_)}):m&&"onreadystatechange"in m.createElement("script")?(A=m.documentElement,function(_){var E=m.createElement("script");E.onreadystatechange=function(){v(_),E.onreadystatechange=null,A.removeChild(E),E=null},A.appendChild(E)}):function(_){setTimeout(v,0,_)},g.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var E=new Array(arguments.length-1),x=0;x<E.length;x++)E[x]=arguments[x+1];var B={callback:_,args:E};return d[h]=B,l(h),h++},g.clearImmediate=p}function p(_){delete d[_]}function v(_){if(f)setTimeout(v,0,_);else{var E=d[_];if(E){f=!0;try{(function(x){var B=x.callback,M=x.args;switch(M.length){case 0:B();break;case 1:B(M[0]);break;case 2:B(M[0],M[1]);break;case 3:B(M[0],M[1],M[2]);break;default:B.apply(o,M)}})(E)}finally{p(_),f=!1}}}}function y(_){_.source===a&&typeof _.data=="string"&&_.data.indexOf(u)===0&&v(+_.data.slice(u.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Oo<"u"?Oo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(AG);var ove=AG.exports;const lve=iA(ove);class ep{constructor(){this.zipContainer={}}addData(e,r,n,i=""){i==""&&(i="_"),this.zipContainer[i]==null&&(this.zipContainer[i]=[]),this.zipContainer[i].push({data:e,name:r,extension:n})}saveZip(e,r=!0){const n=this.zipContainer,i=new lve;for(const s in n)if(s=="_")n[s].forEach((a,o)=>{i.file(a.name+"."+a.extension,a.data,{base64:!0})});else{const a=i.folder(s);n[s].forEach((o,l)=>{const A=o.extension!="txt";a.file(o.name+"."+o.extension,o.data,{base64:A})})}i.generateAsync({type:"blob"}).then(s=>{this._saveZipFile(s,e+".zip")}),r&&(this.zipContainer={})}_saveZipFile(e,r){const n=new Blob([e],{type:"application/zip"});if(typeof window.navigator.msSaveBlob<"u")window.navigator.msSaveBlob(n,r);else{const i=document.createElement("a");typeof i.download=="string"?(document.body.appendChild(i),i.download=r,i.href=URL.createObjectURL(n),i.click(),document.body.removeChild(i)):window.open(e,"_blank").document.write("<title>"+r+"</title><img src='"+e+"'/>")}}}class Ave{constructor(e){De(this,"screenshotManager"),this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager,this.temptime=0}get vrms(){return Object.values(this.characterManager.avatar).map(e=>e.vrm)}async createLoraData(e,r=null,n=""){const i=e.manifest,s=e.name?"loraData/"+e.name:"loraData",a=await this._fetchManifest(i),{assetsLocation:o="",animationsDirectory:l="",backgroundGrayscale:A=1,backgroundDescription:c="",width:u=512,height:h=512,dataCollection:d}=a,f=o+l+"/";this.screenshotManager.setBackground([A,A,A]),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);let m=0;const g=this;if(Array.isArray(d)){const p=r??new ep;await(async()=>{if(Array.isArray(d))for(let v=0;v<d.length;v++){const{animationPath:y,animationTime:_=0,animationFrame:E,cameraPosition:x,cameraFrame:B,description:M}=d[v];m++;const R=m.toString().padStart(4,"0"),I=E?E/30:_;await g.animationManager.loadAnimation(f+y,!0,I),this.vrms.forEach(w=>{var b;(b=w.springBoneManager)==null||b.reset()});const L=AR(x);g.screenshotManager.cameraFrameManager.setCameraFrameWithName(B,L);const D=g.screenshotManager.getImageData(u,h,!1);p.addData(D,R,"png",s),p.addData("anata "+M+" "+c,R,"txt",s)}})(),r==null&&(n==""&&(n="lora_zip"),p.saveZip(n))}this.blinkManager.disableScreenshot()}async _fetchManifest(e){return await(await fetch(e)).json()}}class cve{constructor(e){De(this,"screenshotManager"),this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager}async createSpriteAtlas(e,r=null,n=""){const i=e.manifest,s=e.name?"spriteData/"+e.name:"spriteData",a=await this._fetchManifest(i),{assetsLocation:o="",animationsDirectory:l="",backgroundColor:A=[1,1,1,1],screenshotOffset:c,topFrameOffset:u=.1,bottomFrameOffset:h=.1,pixelStyleSize:d,atlasWidth:f=512,atlasHeight:m=512,spritesCollection:g}=a,p=o+l+"/";this.screenshotManager.cameraFrameManager.setBottomFrameOffset(h),this.screenshotManager.cameraFrameManager.setTopFrameOffset(u),this.screenshotManager.setBackground(A),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);let v=0;const y=this;if(Array.isArray(g)){const _=r??new ep;await(async()=>{if(Array.isArray(g))for(const E of g){const{animationName:x,animationPath:B,framesNumber:M,lookAtCamera:R,expression:I,cameraPosition:L,cameraFrame:D}=E;v++;const w=s+"/"+(x||v.toString().padStart(2,"0"));await y.animationManager.loadAnimation(p+B,!0,0);const b=AR(L);y.screenshotManager.cameraFrameManager.setCameraFrameWithName(D,b);const S=y.animationManager.getCurrentClipDuration()/M;for(let F=0;F<M;F++){y.animationManager.setTime(F*S);const k=y.screenshotManager.getImageData(f,m,d);_.addData(k,F.toString().padStart(2,"0"),"png",w)}}})(),r==null&&(n==""&&(n="sprites_zip"),_.saveZip(n))}this.blinkManager.disableScreenshot()}async _fetchManifest(e){return await(await fetch(e)).json()}}class uve{constructor(e){De(this,"screenshotManager"),this.characterManager=e,this.screenshotManager=e.screenshotManager,this.blinkManager=e.blinkManager,this.animationManager=this.characterManager.animationManager}async createThumbnailsWithObjectData(e,r=!0,n=null,i=""){const{assetsLocation:s="",poseAnimation:a="",animationFrame:o,animationTime:l,backgroundColor:A=[1,1,1,0],screenshotOffset:c,topFrameOffset:u=.1,bottomFrameOffset:h=.1,thumbnailsWidth:d=128,thumbnailsHeight:f=128,thumbnailsCollection:m}=e,g=s+"/";let p=o||0;l!=null&&(p=l*30),r&&await this.animationManager.loadAnimation(g+a,!0,p),this.screenshotManager.cameraFrameManager.setBottomFrameOffset(h),this.screenshotManager.cameraFrameManager.setTopFrameOffset(u),this.screenshotManager.setBackground(A),this.blinkManager.enableScreenshot(),await this.screenshotManager.cameraFrameManager.calculateBoneOffsets(this.characterManager.characterModel,.2);const v=this;if(Array.isArray(m)){const y=n??new ep;let _=!1;await(async()=>{for(const E of m){const{traitGroup:x,cameraPosition:B="front",bottomBoneName:M,bottomBoneMaxVertex:R=!1,topBoneName:I,topBoneMaxVertex:L=!0,groupTopOffset:D,groupBotomOffset:w,cameraFrame:b,saveOnlyIDs:S}=E;if((!M||!I)&&(b||console.warn("missing bonename info or camera frame. Skipping")),!x){console.warn("missing trait group for thumbnail info. Skipping");continue}const F=()=>{const z=[];return At(S).forEach(j=>{z.push({id:j})}),z},k=S==null?v.characterManager.getTraits(x):F();if(k==null){console.log("SKipping Thumbnail Generation for trait group "+x+", its not present in the character manifest.");continue}const Q=AR(B);b?v.screenshotManager.cameraFrameManager.setCameraFrameWithName(b,Q):v.screenshotManager.cameraFrameManager.frameShot(M,I,Q,R,L);for(let z=0;z<k.length;z++){const j=k[z].id;let T=j;if(k[z].fullDirectory!=null){const H=k[z].fullDirectory.split("/");T=H[H.length-1].split(".")[0]}if(await v.characterManager.loadTrait(x,j,!0),m.length==1&&k.length==1)_=!0,v.screenshotManager.saveScreenshot(T,d,f);else{const H=v.screenshotManager.getImageData(d,f);y.addData(H,T,"png",x)}}}})(),n==null&&_==!1&&(i==""&&(i="thumbnails_zip"),y.saveZip(i))}this.blinkManager.disableScreenshot()}async createThumbnails(e,r=null,n=""){const i=e.manifest,s=await this._fetchManifest(i);await this.createThumbnailsWithObjectData(s,!0,r,n)}async _fetchManifest(e){return await(await fetch(e)).json()}}const Yr=_e.createContext({characterManager:null,moveCamera:t=>{}}),hve=t=>{const[e,r]=_e.useState(null),[n,i]=_e.useState(null),[s,a]=_e.useState(null),[o,l]=_e.useState(null),[A,c]=_e.useState(null),[u,h]=_e.useState(null),[d,f]=_e.useState(null),[m,g]=_e.useState(null),[p,v]=_e.useState(null),[y,_]=_e.useState(null),[E,x]=_e.useState(null),[B,M]=_e.useState(null),[R,I]=_e.useState(!1);let L=!1,[D,w]=_e.useState(!1);_e.useEffect(()=>{if(L||D)return;w(!0),L=!0;const{scene:k,camera:Q,controls:z,characterManager:j,sceneElements:T}=ave("editor-scene");_(Q),v(k),r(j),h(T),f(j.animationManager),g(j.lookAtManager),l(j.overlayedTextureManager),x(z),i(new Ave(j)),a(new cve(j)),c(new uve(j))},[]);const b=k=>{k==null&&(k=!R),I(k),p.traverse(Q=>{Q.isMesh&&Q.setDebugMode&&Q.setDebugMode(k)})};_e.useEffect(()=>{if(B!=null&&B.defaultAnimations){const k=B.defaultAnimations.map(Q=>Q.location);d.storeDefaultAnimationPaths(k,"")}},[B]);const S=k=>{k?p.add(u):p.remove(u)},F=k=>{E&&(VT.to(E.target,{x:k.targetX??0,y:k.targetY??0,z:k.targetZ??0,duration:1}),VT.fromTo(E,{maxDistance:E.getDistance(),minDistance:E.getDistance(),minPolarAngle:E.getPolarAngle(),maxPolarAngle:E.getPolarAngle(),minAzimuthAngle:E.getAzimuthalAngle(),maxAzimuthAngle:E.getAzimuthalAngle()},{maxDistance:k.distance,minDistance:k.distance,minPolarAngle:Math.PI/2-.11,maxPolarAngle:Math.PI/2-.11,minAzimuthAngle:-.78,maxAzimuthAngle:-.78,duration:1}).then(()=>{E.minPolarAngle=0,E.maxPolarAngle=3.1415,E.minDistance=.5,E.maxDistance=10,E.minAzimuthAngle=1/0,E.maxAzimuthAngle=1/0}))};return O.jsx(Yr.Provider,{value:{manifest:B,setManifest:M,scene:p,decalManager:o,characterManager:e,loraDataGenerator:n,spriteAtlasGenerator:s,thumbnailsGenerator:A,showEnvironmentModels:S,debugMode:R,toggleDebugMode:b,animationManager:d,lookAtManager:m,camera:y,moveCamera:F,controls:E,sceneElements:u},children:t.children})},dve={NORMAL:"NORMAL",AR:"AR",AR_FRONT:"AR_FRONT",VR:"VR"},yt={LANDING:"LANDING",CREATE:"CREATE",CLAIM:"CLAIM",LOAD:"LOAD",APPEARANCE:"APPEARANCE",BATCHDOWNLOAD:"BATCHDOWNLOAD",SAVE:"SAVE",MINT:"MINT",OPTIMIZER:"OPTIMIZER",BATCHMANIFEST:"BATCHMANIFEST",WALLET:"WALLET"},ls=X.createContext(),fve=t=>{const[e,r]=X.useState(dve.NORMAL),[n,i]=X.useState(yt.LANDING),[s,a]=X.useState(!1),[o,l]=X.useState(!1);return O.jsx(ls.Provider,{value:{viewMode:n,setViewMode:i,isLoading:s,setIsLoading:a,mouseIsOverUI:o,setMouseIsOverUI:l,currentCameraMode:e,setCurrentCameraMode:r},children:t.children})},pve="modulepreload",mve=function(t){return"/"+t},XO={},gve=function(t,e,r){if(!e||e.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(e.map(i=>{if(i=mve(i),i in XO)return;XO[i]=!0;const s=i.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(r)for(let l=n.length-1;l>=0;l--){const A=n[l];if(A.href===i&&(!s||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":pve,s||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),s)return new Promise((l,A)=>{o.addEventListener("load",l),o.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};function lb(){return lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lb.apply(null,arguments)}function vve(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yve(t){_e.useEffect(t,[])}var wve=["id","volume","playbackRate","soundEnabled","interrupt","onload"];function bve(t,e){var r=e===void 0?{}:e,n=r.volume,i=n===void 0?1:n,s=r.playbackRate,a=s===void 0?1:s,o=r.soundEnabled,l=o===void 0?!0:o,A=r.interrupt,c=A===void 0?!1:A,u=r.onload,h=vve(r,wve),d=X.useRef(null),f=X.useRef(!1),m=X.useState(null),g=m[0],p=m[1],v=X.useState(null),y=v[0],_=v[1],E=function(){typeof u=="function"&&u.call(this),f.current&&p(this.duration()*1e3),_(this)};yve(function(){return gve(()=>RV(()=>import("./howler-f7e5c2d9-c98ca489.js"),[]).then(I=>I.h),[]).then(function(I){if(!f.current){var L;d.current=(L=I.Howl)!==null&&L!==void 0?L:I.default.Howl,f.current=!0,new d.current(lb({src:Array.isArray(t)?t:[t],volume:i,rate:a,onload:E},h))}}),function(){f.current=!1}}),X.useEffect(function(){d.current&&y&&_(new d.current(lb({src:Array.isArray(t)?t:[t],volume:i,onload:E},h)))},[JSON.stringify(t)]),X.useEffect(function(){y&&(y.volume(i),y.rate(a))},[i,a]);var x=X.useCallback(function(I){typeof I>"u"&&(I={}),!(!y||!l&&!I.forceSoundEnabled)&&(c&&y.stop(),I.playbackRate&&y.rate(I.playbackRate),y.play(I.id))},[y,l,c]),B=X.useCallback(function(I){y&&y.stop(I)},[y]),M=X.useCallback(function(I){y&&y.pause(I)},[y]),R=[x,{sound:y,stop:B,pause:M,duration:g}];return R}const _ve=[{name:"background/cc_bgm.wav",offset:0,duration:123458.58333333334},{name:"background/cc_bgm_balanced.wav",offset:123458.58333333334,duration:123458.60416666666},{name:"effect/character-load.wav",offset:246917.1875,duration:3030},{name:"effect/class-select.wav",offset:249947.1875,duration:2780},{name:"effect/switchingItem.wav",offset:252727.1875,duration:623.75},{name:"ui/back-next-button.wav",offset:253350.9375,duration:155.02083333333334},{name:"ui/class-mouse-over.wav",offset:253505.95833333334,duration:217.52083333333334},{name:"ui/class_click.wav",offset:253723.4791666667,duration:3123.75},{name:"ui/class_pass.wav",offset:256847.2291666667,duration:155},{name:"ui/option_click.wav",offset:257002.2291666667,duration:155.02083333333334},{name:"ui/randomize-button.wav",offset:257157.25000000003,duration:342.5208333333333},{name:"ui/section_click.wav",offset:257499.77083333337,duration:155}],xve="/public/assets/sounds-3322d50e.mp3",Ma=_e.createContext(),Eve=t=>{const e=i=>_ve.find(s=>i.test(s.name)),[r]=bve(xve,{sprite:{switchItem:[e(/switchingItem/).offset,e(/switchingItem/).duration],classSelect:[e(/class-select/).offset,e(/class-select/).duration],characterLoad:[e(/character-load/).offset,e(/character-load/).duration],randomizeButton:[e(/randomize-button/).offset,e(/randomize-button/).duration],classMouseOver:[e(/class-mouse-over/).offset,e(/class-mouse-over/).duration],backNextButton:[e(/back-next-button/).offset,e(/back-next-button/).duration]}}),n=(i,s=0)=>{s===0?r({id:i}):setTimeout(()=>{r({id:i})},s)};return O.jsx(Ma.Provider,{value:{playSound:n},children:t.children})};function Ls(t){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(t)}function Ta(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bve(t,e){if(Ls(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ls(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cG(t){var e=Bve(t,"string");return Ls(e)=="symbol"?e:e+""}function ZO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cG(n.key),n)}}function Ca(t,e,r){return e&&ZO(t.prototype,e),r&&ZO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function hc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MS(t,e){return MS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},MS(t,e)}function O_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MS(t,e)}function M0(t,e){if(e&&(Ls(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hc(t)}function rl(t){return rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rl(t)}function ll(t,e,r){return(e=cG(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uG(t){if(Array.isArray(t))return t}function Mve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function JO(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function hG(t,e){if(t){if(typeof t=="string")return JO(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?JO(t,e):void 0}}function dG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tve(t){return uG(t)||Mve(t)||hG(t)||dG()}function qO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $O(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qO(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Cve={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){console&&console[t]&&console[t].apply(console,e)}},Sve=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ta(this,t),this.init(e,r)}return Ca(t,[{key:"init",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=e||Cve,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,r,n,i){return i&&!this.debug?null:(typeof e[0]=="string"&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[r](e))}},{key:"create",value:function(e){return new t(this.logger,$O($O({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}},{key:"clone",value:function(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new t(this.logger,e)}}]),t}(),Qo=new Sve,bc=function(){function t(){Ta(this,t),this.observers={}}return Ca(t,[{key:"on",value:function(e,r){var n=this;return e.split(" ").forEach(function(i){n.observers[i]=n.observers[i]||[],n.observers[i].push(r)}),this}},{key:"off",value:function(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e]=this.observers[e].filter(function(n){return n!==r})}}},{key:"emit",value:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(this.observers[e]){var s=[].concat(this.observers[e]);s.forEach(function(o){o.apply(void 0,n)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(o){o.apply(o,[e].concat(n))})}}}]),t}();function am(){var t,e,r=new Promise(function(n,i){t=n,e=i});return r.resolve=t,r.reject=e,r}function eD(t){return t==null?"":""+t}function Ive(t,e,r){t.forEach(function(n){e[n]&&(r[n]=e[n])})}function fR(t,e,r){function n(o){return o&&o.indexOf("###")>-1?o.replace(/###/g,"."):o}function i(){return!t||typeof t=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var a=n(s.shift());!t[a]&&r&&(t[a]=new r),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={}}return i()?{}:{obj:t,k:n(s.shift())}}function tD(t,e,r){var n=fR(t,e,Object),i=n.obj,s=n.k;i[s]=r}function Rve(t,e,r,n){var i=fR(t,e,Object),s=i.obj,a=i.k;s[a]=s[a]||[],n&&(s[a]=s[a].concat(r)),n||s[a].push(r)}function Ab(t,e){var r=fR(t,e),n=r.obj,i=r.k;if(n)return n[i]}function Uve(t,e,r){var n=Ab(t,r);return n!==void 0?n:Ab(e,r)}function fG(t,e,r){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?typeof t[n]=="string"||t[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?r&&(t[n]=e[n]):fG(t[n],e[n],r):t[n]=e[n]);return t}function jh(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Fve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function kve(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return Fve[e]}):t}var D_=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Lve=[" ",",","?","!",";"];function Pve(t,e,r){e=e||"",r=r||"";var n=Lve.filter(function(o){return e.indexOf(o)<0&&r.indexOf(o)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(o){return o==="?"?"\\?":o}).join("|"),")")),s=!i.test(t);if(!s){var a=t.indexOf(r);a>0&&!i.test(t.substring(0,a))&&(s=!0)}return s}function cb(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[e])return t[e];for(var n=e.split(r),i=t,s=0;s<n.length;++s){if(!i||typeof i[n[s]]=="string"&&s+1<n.length)return;if(i[n[s]]===void 0){for(var a=2,o=n.slice(s,s+a).join(r),l=i[o];l===void 0&&n.length>s+a;)a++,o=n.slice(s,s+a).join(r),l=i[o];if(l===void 0)return;if(l===null)return null;if(e.endsWith(o)){if(typeof l=="string")return l;if(o&&typeof l[o]=="string")return l[o]}var A=n.slice(s+a).join(r);return A?cb(l,A,r):void 0}i=i[n[s]]}return i}}function rD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Dy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rD(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ove(t){var e=Dve();return function(){var r=rl(t),n;if(e){var i=rl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M0(this,n)}}function Dve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Nve=function(t){O_(r,t);var e=Ove(r);function r(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Ta(this,r),i=e.call(this),D_&&bc.call(hc(i)),i.data=n||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Ca(r,[{key:"addNamespaces",value:function(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}},{key:"removeNamespaces",value:function(n){var i=this.options.ns.indexOf(n);i>-1&&this.options.ns.splice(i,1)}},{key:"getResource",value:function(n,i,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,A=[n,i];s&&typeof s!="string"&&(A=A.concat(s)),s&&typeof s=="string"&&(A=A.concat(o?s.split(o):s)),n.indexOf(".")>-1&&(A=n.split("."));var c=Ab(this.data,A);return c||!l||typeof s!="string"?c:cb(this.data&&this.data[n]&&this.data[n][i],s,o)}},{key:"addResource",value:function(n,i,s,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,A=[n,i];s&&(A=A.concat(l?s.split(l):s)),n.indexOf(".")>-1&&(A=n.split("."),a=i,i=A[1]),this.addNamespaces(i),tD(this.data,A,a),o.silent||this.emit("added",n,i,s,a)}},{key:"addResources",value:function(n,i,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var o in s)(typeof s[o]=="string"||Object.prototype.toString.apply(s[o])==="[object Array]")&&this.addResource(n,i,o,s[o],{silent:!0});a.silent||this.emit("added",n,i,s)}},{key:"addResourceBundle",value:function(n,i,s,a,o){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},A=[n,i];n.indexOf(".")>-1&&(A=n.split("."),a=s,s=i,i=A[1]),this.addNamespaces(i);var c=Ab(this.data,A)||{};a?fG(c,s,o):c=Dy(Dy({},c),s),tD(this.data,A,c),l.silent||this.emit("added",n,i,s)}},{key:"removeResourceBundle",value:function(n,i){this.hasResourceBundle(n,i)&&delete this.data[n][i],this.removeNamespaces(i),this.emit("removed",n,i)}},{key:"hasResourceBundle",value:function(n,i){return this.getResource(n,i)!==void 0}},{key:"getResourceBundle",value:function(n,i){return i||(i=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Dy(Dy({},{}),this.getResource(n,i)):this.getResource(n,i)}},{key:"getDataByLanguage",value:function(n){return this.data[n]}},{key:"hasLanguageSomeTranslations",value:function(n){var i=this.getDataByLanguage(n),s=i&&Object.keys(i)||[];return!!s.find(function(a){return i[a]&&Object.keys(i[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),r}(bc),pG={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,r,n,i){var s=this;return t.forEach(function(a){s.processors[a]&&(e=s.processors[a].process(e,r,n,i))}),e}};function nD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nD(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qve(t){var e=Hve();return function(){var r=rl(t),n;if(e){var i=rl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M0(this,n)}}function Hve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var iD={},sD=function(t){O_(r,t);var e=Qve(r);function r(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ta(this,r),i=e.call(this),D_&&bc.call(hc(i)),Ive(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,hc(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=Qo.create("translator"),i}return Ca(r,[{key:"changeLanguage",value:function(n){n&&(this.language=n)}},{key:"exists",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(n==null)return!1;var s=this.resolve(n,i);return s&&s.res!==void 0}},{key:"extractFromKey",value:function(n,i){var s=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");var a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ns||this.options.defaultNS||[],l=s&&n.indexOf(s)>-1,A=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!Pve(n,s,a);if(l&&!A){var c=n.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:n,namespaces:o};var u=n.split(s);(s!==a||s===a&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),n=u.join(a)}return typeof o=="string"&&(o=[o]),{key:n,namespaces:o}}},{key:"translate",value:function(n,i,s){var a=this;if(Ls(i)!=="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),Ls(i)==="object"&&(i=ci({},i)),i||(i={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);var o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,A=this.extractFromKey(n[n.length-1],i),c=A.key,u=A.namespaces,h=u[u.length-1],d=i.lng||this.language,f=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(f){var m=i.nsSeparator||this.options.nsSeparator;return o?{res:"".concat(h).concat(m).concat(c),usedKey:c,exactUsedKey:c,usedLng:d,usedNS:h}:"".concat(h).concat(m).concat(c)}return o?{res:c,usedKey:c,exactUsedKey:c,usedLng:d,usedNS:h}:c}var g=this.resolve(n,i),p=g&&g.res,v=g&&g.usedKey||c,y=g&&g.exactUsedKey||c,_=Object.prototype.toString.apply(p),E=["[object Number]","[object Function]","[object RegExp]"],x=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,M=typeof p!="string"&&typeof p!="boolean"&&typeof p!="number";if(B&&p&&M&&E.indexOf(_)<0&&!(typeof x=="string"&&_==="[object Array]")){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var R=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,p,ci(ci({},i),{},{ns:u})):"key '".concat(c," (").concat(this.language,")' returned an object instead of string.");return o?(g.res=R,g):R}if(l){var I=_==="[object Array]",L=I?[]:{},D=I?y:v;for(var w in p)if(Object.prototype.hasOwnProperty.call(p,w)){var b="".concat(D).concat(l).concat(w);L[w]=this.translate(b,ci(ci({},i),{joinArrays:!1,ns:u})),L[w]===b&&(L[w]=p[w])}p=L}}else if(B&&typeof x=="string"&&_==="[object Array]")p=p.join(x),p&&(p=this.extendTranslation(p,n,i,s));else{var S=!1,F=!1,k=i.count!==void 0&&typeof i.count!="string",Q=r.hasDefaultValue(i),z=k?this.pluralResolver.getSuffix(d,i.count,i):"",j=i["defaultValue".concat(z)]||i.defaultValue;!this.isValidLookup(p)&&Q&&(S=!0,p=j),this.isValidLookup(p)||(F=!0,p=c);var T=i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,H=T&&F?void 0:p,me=Q&&j!==p&&this.options.updateMissing;if(F||S||me){if(this.logger.log(me?"updateKey":"missingKey",d,h,c,me?j:p),l){var ee=this.resolve(c,ci(ci({},i),{},{keySeparator:!1}));ee&&ee.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var U=[],se=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&se&&se[0])for(var le=0;le<se.length;le++)U.push(se[le]);else this.options.saveMissingTo==="all"?U=this.languageUtils.toResolveHierarchy(i.lng||this.language):U.push(i.lng||this.language);var Ae=function(ge,ne,de){var Te=Q&&de!==p?de:H;a.options.missingKeyHandler?a.options.missingKeyHandler(ge,h,ne,Te,me,i):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(ge,h,ne,Te,me,i),a.emit("missingKey",ge,h,ne,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?U.forEach(function(ge){a.pluralResolver.getSuffixes(ge,i).forEach(function(ne){Ae([ge],c+ne,i["defaultValue".concat(ne)]||j)})}):Ae(U,c,j))}p=this.extendTranslation(p,n,i,g,s),F&&p===c&&this.options.appendNamespaceToMissingKey&&(p="".concat(h,":").concat(c)),(F||S)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(h,":").concat(c):c,S?p:void 0):p=this.options.parseMissingKeyHandler(p))}return o?(g.res=p,g):p}},{key:"extendTranslation",value:function(n,i,s,a,o){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,ci(ci({},this.options.interpolation.defaultVariables),s),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init(ci(ci({},s),{interpolation:ci(ci({},this.options.interpolation),s.interpolation)}));var A=typeof n=="string"&&(s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),c;if(A){var u=n.match(this.interpolator.nestingRegexp);c=u&&u.length}var h=s.replace&&typeof s.replace!="string"?s.replace:s;if(this.options.interpolation.defaultVariables&&(h=ci(ci({},this.options.interpolation.defaultVariables),h)),n=this.interpolator.interpolate(n,h,s.lng||this.language,s),A){var d=n.match(this.interpolator.nestingRegexp),f=d&&d.length;c<f&&(s.nest=!1)}!s.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(s.lng=a.usedLng),s.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];return o&&o[0]===v[0]&&!s.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(v[0]," in key: ").concat(i[0])),null):l.translate.apply(l,v.concat([i]))},s)),s.interpolation&&this.interpolator.reset()}var m=s.postProcess||this.options.postProcess,g=typeof m=="string"?[m]:m;return n!=null&&g&&g.length&&s.applyPostProcessor!==!1&&(n=pG.handle(g,n,i,this.options&&this.options.postProcessPassResolved?ci({i18nResolved:a},s):s,this)),n}},{key:"resolve",value:function(n){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,o,l,A,c;return typeof n=="string"&&(n=[n]),n.forEach(function(u){if(!i.isValidLookup(a)){var h=i.extractFromKey(u,s),d=h.key;o=d;var f=h.namespaces;i.options.fallbackNS&&(f=f.concat(i.options.fallbackNS));var m=s.count!==void 0&&typeof s.count!="string",g=m&&!s.ordinal&&s.count===0&&i.pluralResolver.shouldUseIntlApi(),p=s.context!==void 0&&(typeof s.context=="string"||typeof s.context=="number")&&s.context!=="",v=s.lngs?s.lngs:i.languageUtils.toResolveHierarchy(s.lng||i.language,s.fallbackLng);f.forEach(function(y){i.isValidLookup(a)||(c=y,!iD["".concat(v[0],"-").concat(y)]&&i.utils&&i.utils.hasLoadedNamespace&&!i.utils.hasLoadedNamespace(c)&&(iD["".concat(v[0],"-").concat(y)]=!0,i.logger.warn('key "'.concat(o,'" for languages "').concat(v.join(", "),`" won't get resolved as namespace "`).concat(c,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(function(_){if(!i.isValidLookup(a)){A=_;var E=[d];if(i.i18nFormat&&i.i18nFormat.addLookupKeys)i.i18nFormat.addLookupKeys(E,d,_,y,s);else{var x;m&&(x=i.pluralResolver.getSuffix(_,s.count,s));var B="".concat(i.options.pluralSeparator,"zero");if(m&&(E.push(d+x),g&&E.push(d+B)),p){var M="".concat(d).concat(i.options.contextSeparator).concat(s.context);E.push(M),m&&(E.push(M+x),g&&E.push(M+B))}}for(var R;R=E.pop();)i.isValidLookup(a)||(l=R,a=i.getResource(_,y,R,s))}}))})}}),{res:a,usedKey:o,exactUsedKey:l,usedLng:A,usedNS:c}}},{key:"isValidLookup",value:function(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}},{key:"getResource",value:function(n,i,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,i,s,a):this.resourceStore.getResource(n,i,s,a)}}],[{key:"hasDefaultValue",value:function(n){var i="defaultValue";for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)&&i===s.substring(0,i.length)&&n[s]!==void 0)return!0;return!1}}]),r}(bc);function aM(t){return t.charAt(0).toUpperCase()+t.slice(1)}var aD=function(){function t(e){Ta(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Qo.create("languageUtils")}return Ca(t,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var r=e.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(e){if(typeof e=="string"&&e.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(i){return i.toLowerCase()}):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=aM(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),r.indexOf(n[1].toLowerCase())>-1&&(n[1]=aM(n[1].toLowerCase())),r.indexOf(n[2].toLowerCase())>-1&&(n[2]=aM(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isSupportedCode",value:function(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}},{key:"getBestMatchFromCodes",value:function(e){var r=this;if(!e)return null;var n;return e.forEach(function(i){if(!n){var s=r.formatLanguageCode(i);(!r.options.supportedLngs||r.isSupportedCode(s))&&(n=s)}}),!n&&this.options.supportedLngs&&e.forEach(function(i){if(!n){var s=r.getLanguagePartFromCode(i);if(r.isSupportedCode(s))return n=s;n=r.options.supportedLngs.find(function(a){if(a===s||!(a.indexOf("-")<0&&s.indexOf("-")<0)&&a.indexOf(s)===0)return a})}}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}},{key:"getFallbackCodes",value:function(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!r)return e.default||[];var n=e[r];return n||(n=e[this.getScriptPartFromCode(r)]),n||(n=e[this.formatLanguageCode(r)]),n||(n=e[this.getLanguagePartFromCode(r)]),n||(n=e.default),n||[]}},{key:"toResolveHierarchy",value:function(e,r){var n=this,i=this.getFallbackCodes(r||this.options.fallbackLng||[],e),s=[],a=function(o){o&&(n.isSupportedCode(o)?s.push(o):n.logger.warn("rejecting language code not found in supportedLngs: ".concat(o)))};return typeof e=="string"&&e.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):typeof e=="string"&&a(this.formatLanguageCode(e)),i.forEach(function(o){s.indexOf(o)<0&&a(n.formatLanguageCode(o))}),s}}]),t}(),jve=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],zve={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}},Gve=["v1","v2","v3"],oD={zero:0,one:1,two:2,few:3,many:4,other:5};function Vve(){var t={};return jve.forEach(function(e){e.lngs.forEach(function(r){t[r]={numbers:e.nr,plurals:zve[e.fc]}})}),t}var Wve=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ta(this,t),this.languageUtils=e,this.options=r,this.logger=Qo.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Vve()}return Ca(t,[{key:"addRule",value:function(e,r){this.rules[e]=r}},{key:"getRule",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(e,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getRule(e,r);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,n).map(function(i){return"".concat(r).concat(i)})}},{key:"getSuffixes",value:function(e){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort(function(s,a){return oD[s]-oD[a]}).map(function(s){return"".concat(r.options.prepend).concat(s)}):i.numbers.map(function(s){return r.getSuffix(e,s,n)}):[]}},{key:"getSuffix",value:function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=this.getRule(e,n);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(i.select(r)):this.getSuffixRetroCompatible(i,r):(this.logger.warn("no plural rule found for: ".concat(e)),"")}},{key:"getSuffixRetroCompatible",value:function(e,r){var n=this,i=e.noAbs?e.plurals(r):e.plurals(Math.abs(r)),s=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));var a=function(){return n.options.prepend&&s.toString()?n.options.prepend+s.toString():s.toString()};return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?"_plural_".concat(s.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}},{key:"shouldUseIntlApi",value:function(){return!Gve.includes(this.options.compatibilityJSON)}}]),t}();function lD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lD(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function AD(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=Uve(t,e,r);return!s&&i&&typeof r=="string"&&(s=cb(t,r,n),s===void 0&&(s=cb(e,r,n))),s}var Kve=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ta(this,t),this.logger=Qo.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(r){return r},this.init(e)}return Ca(t,[{key:"init",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});var r=e.interpolation;this.escape=r.escape!==void 0?r.escape:kve,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?jh(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?jh(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?jh(r.nestingPrefix):r.nestingPrefixEscaped||jh("$t("),this.nestingSuffix=r.nestingSuffix?jh(r.nestingSuffix):r.nestingSuffixEscaped||jh(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,r,n,i){var s=this,a,o,l,A=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(m){return m.replace(/\$/g,"$$$$")}var u=function(m){if(m.indexOf(s.formatSeparator)<0){var g=AD(r,A,m,s.options.keySeparator,s.options.ignoreJSONStructure);return s.alwaysFormat?s.format(g,void 0,n,Oa(Oa(Oa({},i),r),{},{interpolationkey:m})):g}var p=m.split(s.formatSeparator),v=p.shift().trim(),y=p.join(s.formatSeparator).trim();return s.format(AD(r,A,v,s.options.keySeparator,s.options.ignoreJSONStructure),y,n,Oa(Oa(Oa({},i),r),{},{interpolationkey:v}))};this.resetRegExp();var h=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,f=[{regex:this.regexpUnescape,safeValue:function(m){return c(m)}},{regex:this.regexp,safeValue:function(m){return s.escapeValue?c(s.escape(m)):c(m)}}];return f.forEach(function(m){for(l=0;a=m.regex.exec(e);){var g=a[1].trim();if(o=u(g),o===void 0)if(typeof h=="function"){var p=h(e,a,i);o=typeof p=="string"?p:""}else if(i&&Object.prototype.hasOwnProperty.call(i,g))o="";else if(d){o=a[0];continue}else s.logger.warn("missed to pass in variable ".concat(g," for interpolating ").concat(e)),o="";else typeof o!="string"&&!s.useRawValueToEscape&&(o=eD(o));var v=m.safeValue(o);if(e=e.replace(a[0],v),d?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=a[0].length):m.regex.lastIndex=0,l++,l>=s.maxReplaces)break}}),e}},{key:"nest",value:function(e,r){var n=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,a,o;function l(h,d){var f=this.nestingOptionsSeparator;if(h.indexOf(f)<0)return h;var m=h.split(new RegExp("".concat(f,"[ ]*{"))),g="{".concat(m[1]);h=m[0],g=this.interpolate(g,o);var p=g.match(/'/g),v=g.match(/"/g);(p&&p.length%2===0&&!v||v.length%2!==0)&&(g=g.replace(/'/g,'"'));try{o=JSON.parse(g),d&&(o=Oa(Oa({},d),o))}catch(y){return this.logger.warn("failed parsing options string in nesting for key ".concat(h),y),"".concat(h).concat(f).concat(g)}return delete o.defaultValue,h}for(;s=this.nestingRegexp.exec(e);){var A=[];o=Oa({},i),o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;var c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){var u=s[1].split(this.formatSeparator).map(function(h){return h.trim()});s[1]=u.shift(),A=u,c=!0}if(a=r(l.call(this,s[1].trim(),o),o),a&&s[0]===e&&typeof a!="string")return a;typeof a!="string"&&(a=eD(a)),a||(this.logger.warn("missed to resolve ".concat(s[1]," for nesting ").concat(e)),a=""),c&&(a=A.reduce(function(h,d){return n.format(h,d,i.lng,Oa(Oa({},i),{},{interpolationkey:s[1].trim()}))},a.trim())),e=e.replace(s[0],a),this.regexp.lastIndex=0}return e}}]),t}();function cD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yve(t){var e=t.toLowerCase().trim(),r={};if(t.indexOf("(")>-1){var n=t.split("(");e=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(e==="currency"&&i.indexOf(":")<0)r.currency||(r.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)r.range||(r.range=i.trim());else{var s=i.split(";");s.forEach(function(a){if(a){var o=a.split(":"),l=Tve(o),A=l[0],c=l.slice(1),u=c.join(":").trim().replace(/^'+|'+$/g,"");r[A.trim()]||(r[A.trim()]=u),u==="false"&&(r[A.trim()]=!1),u==="true"&&(r[A.trim()]=!0),isNaN(u)||(r[A.trim()]=parseInt(u,10))}})}}return{formatName:e,formatOptions:r}}function zh(t){var e={};return function(r,n,i){var s=n+JSON.stringify(i),a=e[s];return a||(a=t(n,i),e[s]=a),a(r)}}var Xve=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ta(this,t),this.logger=Qo.create("formatter"),this.options=e,this.formats={number:zh(function(r,n){var i=new Intl.NumberFormat(r,bl({},n));return function(s){return i.format(s)}}),currency:zh(function(r,n){var i=new Intl.NumberFormat(r,bl(bl({},n),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:zh(function(r,n){var i=new Intl.DateTimeFormat(r,bl({},n));return function(s){return i.format(s)}}),relativetime:zh(function(r,n){var i=new Intl.RelativeTimeFormat(r,bl({},n));return function(s){return i.format(s,n.range||"day")}}),list:zh(function(r,n){var i=new Intl.ListFormat(r,bl({},n));return function(s){return i.format(s)}})},this.init(e)}return Ca(t,[{key:"init",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},n=r.interpolation;this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||","}},{key:"add",value:function(e,r){this.formats[e.toLowerCase().trim()]=r}},{key:"addCached",value:function(e,r){this.formats[e.toLowerCase().trim()]=zh(r)}},{key:"format",value:function(e,r,n){var i=this,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=r.split(this.formatSeparator),o=a.reduce(function(l,A){var c=Yve(A),u=c.formatName,h=c.formatOptions;if(i.formats[u]){var d=l;try{var f=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},m=f.locale||f.lng||s.locale||s.lng||n;d=i.formats[u](l,m,bl(bl(bl({},h),s),f))}catch(g){i.logger.warn(g)}return d}else i.logger.warn("there was no format function for ".concat(u));return l},e);return o}}]),t}();function uD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uD(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zve(t){var e=Jve();return function(){var r=rl(t),n;if(e){var i=rl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M0(this,n)}}function Jve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qve(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var $ve=function(t){O_(r,t);var e=Zve(r);function r(n,i,s){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return Ta(this,r),a=e.call(this),D_&&bc.call(hc(a)),a.backend=n,a.store=i,a.services=s,a.languageUtils=s.languageUtils,a.options=o,a.logger=Qo.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=o.maxParallelReads||10,a.readingCalls=0,a.maxRetries=o.maxRetries>=0?o.maxRetries:5,a.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(s,o.backend,o),a}return Ca(r,[{key:"queueLoad",value:function(n,i,s,a){var o=this,l={},A={},c={},u={};return n.forEach(function(h){var d=!0;i.forEach(function(f){var m="".concat(h,"|").concat(f);!s.reload&&o.store.hasResourceBundle(h,f)?o.state[m]=2:o.state[m]<0||(o.state[m]===1?A[m]===void 0&&(A[m]=!0):(o.state[m]=1,d=!1,A[m]===void 0&&(A[m]=!0),l[m]===void 0&&(l[m]=!0),u[f]===void 0&&(u[f]=!0)))}),d||(c[h]=!0)}),(Object.keys(l).length||Object.keys(A).length)&&this.queue.push({pending:A,pendingCount:Object.keys(A).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(A),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(u)}}},{key:"loaded",value:function(n,i,s){var a=n.split("|"),o=a[0],l=a[1];i&&this.emit("failedLoading",o,l,i),s&&this.store.addResourceBundle(o,l,s),this.state[n]=i?-1:2;var A={};this.queue.forEach(function(c){Rve(c.loaded,[o],l),qve(c,n),i&&c.errors.push(i),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(function(u){A[u]||(A[u]={});var h=c.loaded[u];h.length&&h.forEach(function(d){A[u][d]===void 0&&(A[u][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",A),this.queue=this.queue.filter(function(c){return!c.done})}},{key:"read",value:function(n,i,s){var a=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,A=arguments.length>5?arguments[5]:void 0;if(!n.length)return A(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:n,ns:i,fcName:s,tried:o,wait:l,callback:A});return}this.readingCalls++;var c=function(d,f){if(a.readingCalls--,a.waitingReads.length>0){var m=a.waitingReads.shift();a.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(d&&f&&o<a.maxRetries){setTimeout(function(){a.read.call(a,n,i,s,o+1,l*2,A)},l);return}A(d,f)},u=this.backend[s].bind(this.backend);if(u.length===2){try{var h=u(n,i);h&&typeof h.then=="function"?h.then(function(d){return c(null,d)}).catch(c):c(null,h)}catch(d){c(d)}return}return u(n,i,c)}},{key:"prepareLoading",value:function(n,i){var s=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();typeof n=="string"&&(n=this.languageUtils.toResolveHierarchy(n)),typeof i=="string"&&(i=[i]);var l=this.queueLoad(n,i,a,o);if(!l.toLoad.length)return l.pending.length||o(),null;l.toLoad.forEach(function(A){s.loadOne(A)})}},{key:"load",value:function(n,i,s){this.prepareLoading(n,i,{},s)}},{key:"reload",value:function(n,i,s){this.prepareLoading(n,i,{reload:!0},s)}},{key:"loadOne",value:function(n){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=n.split("|"),o=a[0],l=a[1];this.read(o,l,"read",void 0,void 0,function(A,c){A&&i.logger.warn("".concat(s,"loading namespace ").concat(l," for language ").concat(o," failed"),A),!A&&c&&i.logger.log("".concat(s,"loaded namespace ").concat(l," for language ").concat(o),c),i.loaded(n,A,c)})}},{key:"saveMissing",value:function(n,i,s,a,o){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},A=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(i)){this.logger.warn('did not save key "'.concat(s,'" as the namespace "').concat(i,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend&&this.backend.create){var c=hD(hD({},l),{},{isUpdate:o}),u=this.backend.create.bind(this.backend);if(u.length<6)try{var h;u.length===5?h=u(n,i,s,a,c):h=u(n,i,s,a),h&&typeof h.then=="function"?h.then(function(d){return A(null,d)}).catch(A):A(null,h)}catch(d){A(d)}else u(n,i,s,a,A,c)}!n||!n[0]||this.store.addResource(n[0],i,s,a)}}}]),r}(bc);function dD(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if(Ls(t[1])==="object"&&(e=t[1]),typeof t[1]=="string"&&(e.defaultValue=t[1]),typeof t[2]=="string"&&(e.tDescription=t[2]),Ls(t[2])==="object"||Ls(t[3])==="object"){var r=t[3]||t[2];Object.keys(r).forEach(function(n){e[n]=r[n]})}return e},interpolation:{escapeValue:!0,format:function(t,e,r,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function fD(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function pD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eye(t){var e=tye();return function(){var r=rl(t),n;if(e){var i=rl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M0(this,n)}}function tye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ny(){}function rye(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(r){typeof t[r]=="function"&&(t[r]=t[r].bind(t))})}var ub=function(t){O_(r,t);var e=eye(r);function r(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(Ta(this,r),n=e.call(this),D_&&bc.call(hc(n)),n.options=fD(i),n.services={},n.logger=Qo,n.modules={external:[]},rye(hc(n)),s&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,s),M0(n,hc(n));setTimeout(function(){n.init(i,s)},0)}return n}return Ca(r,[{key:"init",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;typeof i=="function"&&(s=i,i={}),!i.defaultNS&&i.defaultNS!==!1&&i.ns&&(typeof i.ns=="string"?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));var a=dD();this.options=wo(wo(wo({},a),this.options),fD(i)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=wo(wo({},a.interpolation),this.options.interpolation)),i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);function o(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?Qo.init(o(this.modules.logger),this.options):Qo.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=Xve);var A=new aD(this.options);this.store=new Nve(this.options.resources,this.options);var c=this.services;c.logger=Qo,c.resourceStore=this.store,c.languageUtils=A,c.pluralResolver=new Wve(A,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(c.formatter=o(l),c.formatter.init(c,this.options),this.options.interpolation.format=c.formatter.format.bind(c.formatter)),c.interpolator=new Kve(this.options),c.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},c.backendConnector=new $ve(o(this.modules.backend),c.resourceStore,c,this.options),c.backendConnector.on("*",function(g){for(var p=arguments.length,v=new Array(p>1?p-1:0),y=1;y<p;y++)v[y-1]=arguments[y];n.emit.apply(n,[g].concat(v))}),this.modules.languageDetector&&(c.languageDetector=o(this.modules.languageDetector),c.languageDetector.init&&c.languageDetector.init(c,this.options.detection,this.options)),this.modules.i18nFormat&&(c.i18nFormat=o(this.modules.i18nFormat),c.i18nFormat.init&&c.i18nFormat.init(this)),this.translator=new sD(this.services,this.options),this.translator.on("*",function(g){for(var p=arguments.length,v=new Array(p>1?p-1:0),y=1;y<p;y++)v[y-1]=arguments[y];n.emit.apply(n,[g].concat(v))}),this.modules.external.forEach(function(g){g.init&&g.init(n)})}if(this.format=this.options.interpolation.format,s||(s=Ny),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var h=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];h.forEach(function(g){n[g]=function(){var p;return(p=n.store)[g].apply(p,arguments)}});var d=["addResource","addResources","addResourceBundle","removeResourceBundle"];d.forEach(function(g){n[g]=function(){var p;return(p=n.store)[g].apply(p,arguments),n}});var f=am(),m=function(){var g=function(p,v){n.isInitialized&&!n.initializedStoreOnce&&n.logger.warn("init: i18next is already initialized. You should call init just once!"),n.isInitialized=!0,n.options.isClone||n.logger.log("initialized",n.options),n.emit("initialized",n.options),f.resolve(v),s(p,v)};if(n.languages&&n.options.compatibilityAPI!=="v1"&&!n.isInitialized)return g(null,n.t.bind(n));n.changeLanguage(n.options.lng,g)};return this.options.resources||!this.options.initImmediate?m():setTimeout(m,0),f}},{key:"loadResources",value:function(n){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ny,a=s,o=typeof n=="string"?n:this.language;if(typeof n=="function"&&(a=n),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode")return a();var l=[],A=function(u){if(u){var h=i.services.languageUtils.toResolveHierarchy(u);h.forEach(function(d){l.indexOf(d)<0&&l.push(d)})}};if(o)A(o);else{var c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.forEach(function(u){return A(u)})}this.options.preload&&this.options.preload.forEach(function(u){return A(u)}),this.services.backendConnector.load(l,this.options.ns,function(u){!u&&!i.resolvedLanguage&&i.language&&i.setResolvedLanguage(i.language),a(u)})}else a(null)}},{key:"reloadResources",value:function(n,i,s){var a=am();return n||(n=this.languages),i||(i=this.options.ns),s||(s=Ny),this.services.backendConnector.reload(n,i,function(o){a.resolve(),s(o)}),a}},{key:"use",value:function(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&pG.addPostProcessor(n),n.type==="formatter"&&(this.modules.formatter=n),n.type==="3rdParty"&&this.modules.external.push(n),this}},{key:"setResolvedLanguage",value:function(n){if(!(!n||!this.languages)&&!(["cimode","dev"].indexOf(n)>-1))for(var i=0;i<this.languages.length;i++){var s=this.languages[i];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}},{key:"changeLanguage",value:function(n,i){var s=this;this.isLanguageChangingTo=n;var a=am();this.emit("languageChanging",n);var o=function(c){s.language=c,s.languages=s.services.languageUtils.toResolveHierarchy(c),s.resolvedLanguage=void 0,s.setResolvedLanguage(c)},l=function(c,u){u?(o(u),s.translator.changeLanguage(u),s.isLanguageChangingTo=void 0,s.emit("languageChanged",u),s.logger.log("languageChanged",u)):s.isLanguageChangingTo=void 0,a.resolve(function(){return s.t.apply(s,arguments)}),i&&i(c,function(){return s.t.apply(s,arguments)})},A=function(c){!n&&!c&&s.services.languageDetector&&(c=[]);var u=typeof c=="string"?c:s.services.languageUtils.getBestMatchFromCodes(c);u&&(s.language||o(u),s.translator.language||s.translator.changeLanguage(u),s.services.languageDetector&&s.services.languageDetector.cacheUserLanguage&&s.services.languageDetector.cacheUserLanguage(u)),s.loadResources(u,function(h){l(h,u)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?A(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(A):this.services.languageDetector.detect(A):A(n),a}},{key:"getFixedT",value:function(n,i,s){var a=this,o=function l(A,c){var u;if(Ls(c)!=="object"){for(var h=arguments.length,d=new Array(h>2?h-2:0),f=2;f<h;f++)d[f-2]=arguments[f];u=a.options.overloadTranslationOptionHandler([A,c].concat(d))}else u=wo({},c);u.lng=u.lng||l.lng,u.lngs=u.lngs||l.lngs,u.ns=u.ns||l.ns,u.keyPrefix=u.keyPrefix||s||l.keyPrefix;var m=a.options.keySeparator||".",g;return u.keyPrefix&&Array.isArray(A)?g=A.map(function(p){return"".concat(u.keyPrefix).concat(m).concat(p)}):g=u.keyPrefix?"".concat(u.keyPrefix).concat(m).concat(A):A,a.t(g,u)};return typeof n=="string"?o.lng=n:o.lngs=n,o.ns=i,o.keyPrefix=s,o}},{key:"t",value:function(){var n;return this.translator&&(n=this.translator).translate.apply(n,arguments)}},{key:"exists",value:function(){var n;return this.translator&&(n=this.translator).exists.apply(n,arguments)}},{key:"setDefaultNamespace",value:function(n){this.options.defaultNS=n}},{key:"hasLoadedNamespace",value:function(n){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=s.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var A=function(u,h){var d=i.services.backendConnector.state["".concat(u,"|").concat(h)];return d===-1||d===2};if(s.precheck){var c=s.precheck(this,A);if(c!==void 0)return c}return!!(this.hasResourceBundle(a,n)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||A(a,n)&&(!o||A(l,n)))}},{key:"loadNamespaces",value:function(n,i){var s=this,a=am();return this.options.ns?(typeof n=="string"&&(n=[n]),n.forEach(function(o){s.options.ns.indexOf(o)<0&&s.options.ns.push(o)}),this.loadResources(function(o){a.resolve(),i&&i(o)}),a):(i&&i(),Promise.resolve())}},{key:"loadLanguages",value:function(n,i){var s=am();typeof n=="string"&&(n=[n]);var a=this.options.preload||[],o=n.filter(function(l){return a.indexOf(l)<0});return o.length?(this.options.preload=a.concat(o),this.loadResources(function(l){s.resolve(),i&&i(l)}),s):(i&&i(),Promise.resolve())}},{key:"dir",value:function(n){if(n||(n=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!n)return"rtl";var i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services&&this.services.languageUtils||new aD(dD());return i.indexOf(s.getLanguagePartFromCode(n))>-1||n.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ny,a=wo(wo(wo({},this.options),i),{isClone:!0}),o=new r(a);(i.debug!==void 0||i.prefix!==void 0)&&(o.logger=o.logger.clone(i));var l=["store","services","language"];return l.forEach(function(A){o[A]=n[A]}),o.services=wo({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new sD(o.services,o.options),o.translator.on("*",function(A){for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];o.emit.apply(o,[A].concat(u))}),o.init(a,s),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(bc);ll(ub,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new ub(t,e)});var xi=ub.createInstance();xi.createInstance=ub.createInstance;xi.createInstance;xi.dir;xi.init;xi.loadResources;xi.reloadResources;xi.use;xi.changeLanguage;xi.getFixedT;xi.t;xi.exists;xi.setDefaultNamespace;xi.hasLoadedNamespace;xi.loadNamespaces;xi.loadLanguages;function nye(){if(console&&console.warn){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(t=console).warn.apply(t,r)}}var mD={};function TS(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];typeof e[0]=="string"&&mD[e[0]]||(typeof e[0]=="string"&&(mD[e[0]]=new Date),nye.apply(void 0,e))}var mG=function(t,e){return function(){if(t.isInitialized)e();else{var r=function n(){setTimeout(function(){t.off("initialized",n)},0),e()};t.on("initialized",r)}}};function gD(t,e,r){t.loadNamespaces(e,mG(t,r))}function vD(t,e,r,n){typeof r=="string"&&(r=[r]),r.forEach(function(i){t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,mG(t,n))}function iye(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var a=function(o,l){var A=e.services.backendConnector.state["".concat(o,"|").concat(l)];return A===-1||A===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(n,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(n,t)&&(!i||a(s,t)))}function sye(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return TS("i18n.languages were undefined or empty",e.languages),!0;var n=e.options.ignoreJSONStructure!==void 0;return n?e.hasLoadedNamespace(t,{lng:r.lng,precheck:function(i,s){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,t))return!1}}):iye(t,e,r)}var aye=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,oye={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},lye=function(t){return oye[t]},Aye=function(t){return t.replace(aye,lye)};function yD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var CS={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Aye};function cye(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};CS=wD(wD({},CS),t)}function uye(){return CS}var gG;function hye(t){gG=t}function dye(){return gG}var fye={type:"3rdParty",init:function(t){cye(t.options.react),hye(t)}},pye=_e.createContext(),mye=function(){function t(){Ta(this,t),this.usedNamespaces={}}return Ca(t,[{key:"addUsedNamespaces",value:function(e){var r=this;e.forEach(function(n){r.usedNamespaces[n]||(r.usedNamespaces[n]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),t}();function gye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,a,o=[],l=!0,A=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){A=!0,i=c}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(A)throw i}}return o}}function vye(t,e){return uG(t)||gye(t,e)||hG(t,e)||dG()}function bD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(r),!0).forEach(function(n){ll(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var yye=function(t,e){var r=_e.useRef();return _e.useEffect(function(){r.current=e?r.current:t},[t,e]),r.current};function wye(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.i18n,n=_e.useContext(pye)||{},i=n.i18n,s=n.defaultNS,a=r||i||dye();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new mye),!a){TS("You will need to pass in an i18next instance by using initReactI18next");var o=function(M,R){return typeof R=="string"?R:R&&Ls(R)==="object"&&typeof R.defaultValue=="string"?R.defaultValue:Array.isArray(M)?M[M.length-1]:M},l=[o,{},!1];return l.t=o,l.i18n={},l.ready=!1,l}a.options.react&&a.options.react.wait!==void 0&&TS("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var A=oM(oM(oM({},uye()),a.options.react),e),c=A.useSuspense,u=A.keyPrefix,h=t||s||a.options&&a.options.defaultNS;h=typeof h=="string"?[h]:h||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(h);var d=(a.isInitialized||a.initializedStoreOnce)&&h.every(function(M){return sye(M,a,A)});function f(){return a.getFixedT(e.lng||null,A.nsMode==="fallback"?h:h[0],u)}var m=_e.useState(f),g=vye(m,2),p=g[0],v=g[1],y=h.join();e.lng&&(y="".concat(e.lng).concat(y));var _=yye(y),E=_e.useRef(!0);_e.useEffect(function(){var M=A.bindI18n,R=A.bindI18nStore;E.current=!0,!d&&!c&&(e.lng?vD(a,e.lng,h,function(){E.current&&v(f)}):gD(a,h,function(){E.current&&v(f)})),d&&_&&_!==y&&E.current&&v(f);function I(){E.current&&v(f)}return M&&a&&a.on(M,I),R&&a&&a.store.on(R,I),function(){E.current=!1,M&&a&&M.split(" ").forEach(function(L){return a.off(L,I)}),R&&a&&R.split(" ").forEach(function(L){return a.store.off(L,I)})}},[a,y]);var x=_e.useRef(!0);_e.useEffect(function(){E.current&&!x.current&&v(f),x.current=!1},[a,u]);var B=[p,a,d];if(B.t=p,B.i18n=a,B.ready=d,d||!d&&!c)return B;throw new Promise(function(M){e.lng?vD(a,e.lng,h,function(){return M()}):gD(a,h,function(){return M()})})}var vG=[],bye=vG.forEach,_ye=vG.slice;function xye(t){return bye.call(_ye.call(arguments,1),function(e){if(e)for(var r in e)t[r]===void 0&&(t[r]=e[r])}),t}var _D=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Eye=function(t,e,r){var n=r||{};n.path=n.path||"/";var i=encodeURIComponent(e),s="".concat(t,"=").concat(i);if(n.maxAge>0){var a=n.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+="; Max-Age=".concat(Math.floor(a))}if(n.domain){if(!_D.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain=".concat(n.domain)}if(n.path){if(!_D.test(n.path))throw new TypeError("option path is invalid");s+="; Path=".concat(n.path)}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.sameSite){var o=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(o){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s},xD={create:function(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+r*60*1e3)),n&&(i.domain=n),document.cookie=Eye(t,encodeURIComponent(e),i)},read:function(t){for(var e="".concat(t,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null},remove:function(t){this.create(t,"",-1)}},Bye={name:"cookie",lookup:function(t){var e;if(t.lookupCookie&&typeof document<"u"){var r=xD.read(t.lookupCookie);r&&(e=r)}return e},cacheUserLanguage:function(t,e){e.lookupCookie&&typeof document<"u"&&xD.create(e.lookupCookie,t,e.cookieMinutes,e.cookieDomain,e.cookieOptions)}},Mye={name:"querystring",lookup:function(t){var e;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var n=r.substring(1),i=n.split("&"),s=0;s<i.length;s++){var a=i[s].indexOf("=");if(a>0){var o=i[s].substring(0,a);o===t.lookupQuerystring&&(e=i[s].substring(a+1))}}}return e}},om=null,ED=function(){if(om!==null)return om;try{om=window!=="undefined"&&window.localStorage!==null;var t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{om=!1}return om},Tye={name:"localStorage",lookup:function(t){var e;if(t.lookupLocalStorage&&ED()){var r=window.localStorage.getItem(t.lookupLocalStorage);r&&(e=r)}return e},cacheUserLanguage:function(t,e){e.lookupLocalStorage&&ED()&&window.localStorage.setItem(e.lookupLocalStorage,t)}},lm=null,BD=function(){if(lm!==null)return lm;try{lm=window!=="undefined"&&window.sessionStorage!==null;var t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{lm=!1}return lm},Cye={name:"sessionStorage",lookup:function(t){var e;if(t.lookupSessionStorage&&BD()){var r=window.sessionStorage.getItem(t.lookupSessionStorage);r&&(e=r)}return e},cacheUserLanguage:function(t,e){e.lookupSessionStorage&&BD()&&window.sessionStorage.setItem(e.lookupSessionStorage,t)}},Sye={name:"navigator",lookup:function(t){var e=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)e.push(navigator.languages[r]);navigator.userLanguage&&e.push(navigator.userLanguage),navigator.language&&e.push(navigator.language)}return e.length>0?e:void 0}},Iye={name:"htmlTag",lookup:function(t){var e,r=t.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(e=r.getAttribute("lang")),e}},Rye={name:"path",lookup:function(t){var e;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof t.lookupFromPathIndex=="number"){if(typeof r[t.lookupFromPathIndex]!="string")return;e=r[t.lookupFromPathIndex].replace("/","")}else e=r[0].replace("/","")}return e}},Uye={name:"subdomain",lookup:function(t){var e=typeof t.lookupFromSubdomainIndex=="number"?t.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[e]}};function Fye(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(t){return t}}}var yG=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ta(this,t),this.type="languageDetector",this.detectors={},this.init(e,r)}return Ca(t,[{key:"init",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=xye(r,this.options||{},Fye()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(i){return i.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(Bye),this.addDetector(Mye),this.addDetector(Tye),this.addDetector(Cye),this.addDetector(Sye),this.addDetector(Iye),this.addDetector(Rye),this.addDetector(Uye)}},{key:"addDetector",value:function(e){return this.detectors[e.name]=e,this}},{key:"detect",value:function(e){var r=this;e||(e=this.options.order);var n=[];return e.forEach(function(i){if(r.detectors[i]){var s=r.detectors[i].lookup(r.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.map(function(i){return r.options.convertDetectedLanguage(i)}),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(e,r){var n=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||r.forEach(function(i){n.detectors[i]&&n.detectors[i].cacheUserLanguage(e,n.options)}))}}]),t}();yG.type="languageDetector";const kye={translation:{pageTitles:{chooseClass:"Choose Character Class",chooseAppearance:"Choose Appearance",saveCharacter:"Save Your Character"},callToAction:{next:"Next",back:"Back",randomize:"Randomize",send:"Send"},editor:{title:"Appearance",head:"Head",body:"Body",eyes:"Eyes",outer:"Outer",chest:"Chest",legs:"Legs",feet:"Feet",accessories:"Accessories"},labels:{name:"Name",voice:"Voice",favoriteColor:"Favorite Color",preferredGreeting:"Preferred Greeting",question:"Question",yourName:"Your Name",conversation:"Conversation"},text:{unoptimized:"Unoptimized",apiUnderMaintnance:"Voice generation API is temporarily disabled for maintenance!"}}},Lye={translation:{pageTitles:{chooseClass:"  ",chooseAppearance:" ",saveCharacter:" "},callToAction:{next:"",back:"",randomize:"",send:""},editor:{title:"",head:"",body:"",eyes:"",outer:"",chest:"",legs:"",feet:"",accessories:""},labels:{name:"",voice:"",favoriteColor:" ",preferredGreeting:" ",question:"",yourName:" ",conversation:""},text:{unoptimized:"",apiUnderMaintnance:"API       ."}}},Pye={translation:{pageTitles:{chooseClass:"",chooseAppearance:"",saveCharacter:""},callToAction:{next:"",back:"",randomize:"",send:""},editor:{title:"",head:"",body:"",eyes:"",outer:"",chest:"",legs:"",feet:"",accessories:""},labels:{name:"",voice:"",favoriteColor:"",preferredGreeting:"",question:"",yourName:"",conversation:""},text:{unoptimized:"",apiUnderMaintnance:"API!"}}},Oye={en:kye,ru:Lye,zh:Pye};xi.use(yG).use(fye).init({debug:!0,fallbackLng:"en",interpolation:{escapeValue:!1},resources:Oye});const co=_e.createContext(),Dye=t=>{const{t:e}=wye();return O.jsx(co.Provider,{value:{t:e},children:t.children})},Nye=`       
  uniform vec3 cameraDir;
  uniform vec3 eye;
  
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,Qye=` 
  uniform float switchItemDuration;
  uniform float switchItemTime;
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform sampler2D auraTexture;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    float aura = texture2D(
      auraTexture, 
      vec2(
        vUv.x * 2.0,
        vUv.y * 1.0 * (switchItemDuration - switchItemTime)
      )
    ).r;
    
    float dissolveThreshold = 0.1;
    float auraStep = switchItemTime <= dissolveThreshold ? 0. : clamp(switchItemTime, dissolveThreshold, 1.0);
    aura = smoothstep(0.0, auraStep, aura);
    

    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(0.00960, 0.833, 0.960), vec3(0., 0., 0.960), rim);
    gl_FragColor.rgb = rimColor * (1. - rim) * glowIntensity;
    gl_FragColor.a = clamp((1. - rim) * glowIntensity, 0.0, 1.0);
    gl_FragColor.a *= (switchItemDuration - switchItemTime);
    gl_FragColor *= aura;
  }
`,Hye=`       
  uniform vec4 cameraBillboardQuaternion;

  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  
  void main() {  
    vUv = uv;
    vOpacity = opacity;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,jye=` 
  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;

  void main() {
    float angle = 0.;
    vec2 trig = vec2(cos(angle), sin(angle));
    
    vec2 pos = (vUv - 0.5) * mat2(trig.x, trig.y, -trig.y, trig.x);
    float size = 0.1;
    
    float dist = length(max(abs(pos) - size, 0.));
    float glow = 1. / (dist * 25. + .5);

    gl_FragColor = vec4(glow);
    gl_FragColor.rgb *= vec3(0.00960, 0.833, 0.960);
    float avatarGroundPosition = 0.;
    if (glow < 0.1 || vWorldPosition.y < avatarGroundPosition) {
      discard;
    }
    gl_FragColor.a *= vOpacity;
  }
`,zye=`       
  attribute vec2 scales;
  attribute float opacity;
  attribute vec3 positions;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;
  

  void main() {  
    vUv = uv;
    vOpacity = opacity;
    vSurfaceNormal = normalize(normal);
    
    vec3 pos = position;
    pos.xz *= scales.x;
    pos.y *= scales.y;
    pos += positions;
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Gye=` 
  uniform float radius;

  varying vec2 vUv;
  varying float vOpacity;
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  void main() {

    vec3 eyeDirection = normalize(vec3(0., 10., 0.) - vWorldPosition);
      
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 10.0;
    float rim = distance(vWorldPosition.xz, vec2(0.)) / radius;
    rim = pow(rim, rimStrength);
    
  
    gl_FragColor.rgb = vec3(rim) * vec3(0.00960, 0.833, 0.960) * 2.0;
    gl_FragColor.a = rim;
    gl_FragColor.a = smoothstep(0.3, 0.8, gl_FragColor.a);
    gl_FragColor.a *= vOpacity;
  }
`,Vye=`       
  uniform vec4 cameraBillboardQuaternion;

  varying vec2 vUv;
  varying vec3 vWorldPosition;
  
  vec3 rotateVecQuat(vec3 position, vec4 q) {
      vec3 v = position.xyz;
      return v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);
  }
  void main() {  
    vUv = uv;
    
    vec3 pos = position;
    pos = rotateVecQuat(pos, cameraBillboardQuaternion);
    vec4 modelPosition = modelMatrix * vec4(pos, 1.0);
    vWorldPosition = modelPosition.xyz;
    vec4 viewPosition = viewMatrix * modelPosition;
    vec4 projectionPosition = projectionMatrix * viewPosition;
    gl_Position = projectionPosition;
  }
`,Wye=` 
  varying vec2 vUv;
  varying vec3 vWorldPosition;

  void main() {
    float col = smoothstep(0.5, 0.2, length(vUv - 0.5));
    gl_FragColor.rgb = mix(vec3(0., 0., 0.960), vec3(0.00960, 0.833, 0.960), col);
    gl_FragColor.a = col;
    gl_FragColor.a *= clamp(vWorldPosition.y * 10., 0.0, 1.0);
  }
`,Kye=`       
  varying vec3 vWorldPosition;
  varying vec3 vSurfaceNormal;

  varying vec2 vUv;

  void main() {
    vUv = uv;
    vec3 pos = position;
    vSurfaceNormal = normalize(normal);
    vWorldPosition = (modelMatrix * vec4( pos, 1.0 )).xyz;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 ); 
  }
`,Yye=` 
  uniform vec3 cameraDir;
  uniform vec3 eye;

  uniform float opacity;

  varying vec3 vSurfaceNormal;
  varying vec3 vWorldPosition;
  varying vec2 vUv;
  void main() {
    vec3 eyeDirection = normalize(eye - vWorldPosition);
    
    float EdotN = max(0.0, dot(eyeDirection, vSurfaceNormal));
    float rimStrength = 0.7;
    float rim = mix(0.0, 1.0, pow(1. - EdotN, rimStrength));
    float glowIntensity = 2.0;

    vec3 rimColor = mix(vec3(1.0), vec3(0.400, 0.723, 0.910), rim);
    gl_FragColor = vec4(rimColor, pow(1. - rim, 2.0));
    gl_FragColor *= pow(1. - vUv.y, 3.0);
    gl_FragColor *= opacity;
  }
`,pR=(t,e,r)=>{const n=new $t;["position","normal","uv"].forEach(a=>{n.setAttribute(a,t.attributes[a])}),n.setIndex(t.index);const i=new Float32Array(r*3),s=new Gg(i,3);n.setAttribute("positions",s);for(const a of e){const{name:o,itemSize:l}=a,A=new Float32Array(r*l);n.setAttribute(o,new Gg(A,l))}return n},Xye=t=>{const e=new m_(.45,.45,5,50,50,!0),r=new fn({uniforms:{auraTexture:{value:null}},vertexShader:Nye,fragmentShader:Qye,transparent:!0,blending:ku});r.uniforms.cameraDir=t.cameraDir,r.uniforms.eye=t.eye,r.uniforms.switchItemTime=t.switchItemTime,r.uniforms.switchItemDuration=t.switchItemDuration;const n=new Ar(e,r);return n.frustumCulled=!1,n.position.y=5*.46,n},Zye=()=>{const t=[];t.push({name:"opacity",itemSize:1}),t.push({name:"scales",itemSize:2});const e=.3,r=new oA(e,e),n=pR(r,t,20),i=new fn({uniforms:{cameraBillboardQuaternion:{value:new et}},vertexShader:Hye,fragmentShader:jye,depthWrite:!1,blending:ku}),s=new p_(n,i,20);return s.info={particleCount:20,velocity:[20]},s},Jye=t=>{const e=[];e.push({name:"opacity",itemSize:1}),e.push({name:"scales",itemSize:2});const r=.43,n=new QI(r,32,32),i=pR(n,e,10),s=new fn({uniforms:{radius:{value:r}},vertexShader:zye,fragmentShader:Gye,depthWrite:!1,blending:ku});s.uniforms.cameraDir=t.cameraDir,s.uniforms.eye=t.eye,s.uniforms.fadeInAvatarTime=t.fadeInAvatarTime;const a=new p_(i,s,10);return a.info={particleCount:10,velocity:[10],currentIndex:0},a},qye=t=>{const e=new oA(1,1),r=new fn({uniforms:{cameraBillboardQuaternion:{value:new et}},vertexShader:Vye,fragmentShader:Wye,depthWrite:!1,blending:ku});return new Ar(e,r)},$ye=t=>{const e=[],r=new m_(.645,.43,2.5,50,50,!0),n=pR(r,e,2),i=new fn({uniforms:{opacity:{value:0}},vertexShader:Kye,fragmentShader:Yye,transparent:!0,blending:ku});i.uniforms.cameraDir=t.cameraDir,i.uniforms.eye=t.eye;const s=new p_(n,i,2);return s.fadeIn=!1,s.frustumCulled=!1,s.position.y=2.5*.46,s},MD=100,ewe=0,hb=1.5,twe=.1,Nw=0,TD=1,CD=.05,SS=0,rwe=1,nwe=.015,Gi={normal:0,switchItem:1,fadeOutAvatar:2,loadingAvatar:3,fadeInAvatar:4},iwe=new Uc,wG=iwe.load("./textures/beam2.png");wG.wrapS=Qs;class swe{constructor(e,r,n){this.scene=e,this.camera=r,this.globalUniforms=n,this.eye=new Y,this.cameraDir=new Y,this.beamMesh=null,this.initBeam(),this.pixelMesh=null,this.initPixel(),this.ringMesh=null,this.initRing(),this.teleportMesh=null,this.initTeleport(),this.spotLight=null,this.initSpotLight()}emitBeam(){this.beamMesh.visible=!0}emitPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),r=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let a=0;a<i;a++){a%2===0?e.setXY(a,.2,.2):e.setXY(a,.1,3+Math.random());const o=a/i*Math.PI*2;r.setXYZ(a,Math.cos(o)*s,(Math.random()-.5)*2,Math.sin(o)*s),n.setX(a,1+Math.random()),this.pixelMesh.info.velocity[a]=.02+Math.random()*.03}e.needsUpdate=!0,r.needsUpdate=!0,n.needsUpdate=!0}emitRespawnPixel(){this.stopUpdatePixelMesh=!1;const e=this.pixelMesh.geometry.getAttribute("scales"),r=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount,s=.25;for(let a=0;a<i;a++)if(n.getX(a)<.01){a%2===0?e.setXY(a,.2,.2):e.setXY(a,.1,3+Math.random());const o=a/i*Math.PI*2;r.setXYZ(a,Math.cos(o)*s,Math.random()*-1,Math.sin(o)*s),n.setX(a,1+Math.random()),this.pixelMesh.info.velocity[a]=.05+Math.random()*.05;break}e.needsUpdate=!0,r.needsUpdate=!0,n.needsUpdate=!0}emitRing(e){this.ringMesh.visible=!0;const r=this.ringMesh.geometry.getAttribute("scales"),n=this.ringMesh.geometry.getAttribute("positions"),i=this.ringMesh.geometry.getAttribute("opacity"),s=this.ringMesh.info.particleCount,a=this.ringMesh.info.currentIndex,o=a-1<0?s-1:a-1,l=.1;(n.getY(o)>l+e||i.getX(o)<=0)&&(n.setXYZ(a,0,l,0),r.setXY(a,1,.06),i.setX(a,1),this.ringMesh.info.velocity[a]=.1,this.ringMesh.info.currentIndex++,this.ringMesh.info.currentIndex>=s&&(this.ringMesh.info.currentIndex=0)),r.needsUpdate=!0,n.needsUpdate=!0,i.needsUpdate=!0}emitTeleport(){this.teleportMesh.visible=!0}emitSpotLight(){this.spotLight.visible=!0,this.spotLight.fadeIn=!0}removeSpotLight(){this.spotLight.fadeIn=!1}update(){this.beamMesh.visible&&this.beamMesh.update(),!this.stopUpdatePixelMesh&&this.pixelMesh.update(),this.ringMesh.visible&&this.ringMesh.update(),this.teleportMesh.visible&&this.teleportMesh.update(),this.spotLight.visible&&this.spotLight.update()}initBeam(){this.beamMesh=Xye(this.globalUniforms),this.beamMesh.material.uniforms.auraTexture.value=wG,this.beamMesh.update=()=>this.updateBeam(),this.scene.add(this.beamMesh)}initPixel(){this.pixelMesh=Zye(),this.pixelMesh.update=()=>this.updatePixel(),this.scene.add(this.pixelMesh)}initRing(){this.ringMesh=Jye(this.globalUniforms),this.ringMesh.update=()=>this.updateRing(),this.scene.add(this.ringMesh)}initTeleport(){this.teleportMesh=qye(this.globalUniforms),this.teleportMesh.update=()=>this.updateTeleport(),this.teleportMesh.visible=!1,this.scene.add(this.teleportMesh)}initSpotLight(){this.spotLight=$ye(this.globalUniforms),this.spotLight.update=()=>this.updateSpotLight(),this.spotLight.visible=!1,this.scene.add(this.spotLight)}updateBeam(){this.beamMesh&&this.globalUniforms.transitionEffectType.value!==Gi.switchItem&&(this.beamMesh.visible=!1)}updatePixel(){if(this.pixelMesh){let e=0;const r=this.pixelMesh.geometry.getAttribute("positions"),n=this.pixelMesh.geometry.getAttribute("opacity"),i=this.pixelMesh.info.particleCount;for(let s=0;s<i;s++)n.getX(s)>.01?(r.setY(s,r.getY(s)+this.pixelMesh.info.velocity[s]),n.setX(s,n.getX(s)/1.3)):(n.setX(s,0),e++);e>=i&&(this.stopUpdatePixelMesh=!0),r.needsUpdate=!0,n.needsUpdate=!0,this.pixelMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateRing(){if(this.ringMesh){const e=this.ringMesh.geometry.getAttribute("positions"),r=this.ringMesh.geometry.getAttribute("opacity"),n=this.ringMesh.info.particleCount;for(let i=0;i<n;i++)r.getX(i)>.01?(e.setY(i,e.getY(i)+this.ringMesh.info.velocity[i]),r.setX(i,r.getX(i)/1.27)):r.setX(i,0);e.needsUpdate=!0,r.needsUpdate=!0,this.globalUniforms.transitionEffectType.value!==Gi.fadeInAvatar&&(this.ringMesh.visible=!1)}}updateTeleport(){if(this.teleportMesh){if(this.globalUniforms.transitionEffectType.value===Gi.fadeOutAvatar){const e=this.globalUniforms.fadeOutAvatarTime.value,r=.2;if(e<r){const n=e*(1/r),i=.6,s=5;this.teleportMesh.scale.set(i,n*s,i),this.teleportMesh.position.y=n*s*.35}else this.teleportMesh.scale.x>0?(this.teleportMesh.scale.x=this.teleportMesh.scale.x-.2,this.teleportMesh.scale.z=this.teleportMesh.scale.z-.2):this.teleportMesh.visible=!1}else this.teleportMesh.visible=!1;this.teleportMesh.material.uniforms.cameraBillboardQuaternion.value.copy(this.camera.quaternion)}}updateSpotLight(){this.spotLight&&(this.spotLight.fadeIn?this.spotLight.material.uniforms.opacity.value<1&&(this.spotLight.material.uniforms.opacity.value=1):this.spotLight.material.uniforms.opacity.value>0?this.spotLight.material.uniforms.opacity.value-=.025:(this.spotLight.material.uniforms.opacity.value=0,this.spotLight.visible=!1))}}const bG=new Uc,IS=bG.load("./textures/pixel9.png");IS.wrapS=IS.wrapT=Qs;const RS=bG.load("./textures/noise3.jpg");RS.wrapS=RS.wrapT=Qs;const Qt={switchItemDuration:{value:hb},switchItemTime:{value:hb},eye:{value:new Y},cameraDir:{value:new Y},fadeOutAvatarTime:{value:Nw},fadeInAvatarTime:{value:SS},transitionEffectType:{value:Gi.normal}},SD={pixelTexture:{value:IS},noiseTexture:{value:RS}};class awe extends EventTarget{constructor(){super(),De(this,"setTransitionEffect",e=>{this.transitionEffectType=e}),De(this,"getTransitionEffect",e=>this.transitionEffectType===e),this.cameraDir=new Y,this.frameRate=1e3/30,this.initParticle=!1,this.transitionEffectType=null,this.transitionTime=MD,this.update()}setCustomShader(e){e.vertexShader&&(e.vertexShader=e.vertexShader.replace("varying vec3 vViewPosition;",`
      varying vec3 vViewPosition;
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;
      `),e.vertexShader=e.vertexShader.replace("void main() {",`
      void main() {
        vSurfaceNormal = normalize(normal);
      `),e.vertexShader=e.vertexShader.replace("#include <worldpos_vertex>",`
      #include <worldpos_vertex>
      vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;
      `),e.fragmentShader=e.fragmentShader.replace("uniform vec3 litFactor;",`
      uniform vec3 litFactor;
      uniform vec3 cameraDir;
      uniform vec3 eye;
      uniform float switchItemTime;
      uniform float switchItemDuration;
      uniform sampler2D pixelTexture;
      uniform sampler2D noiseTexture;
      uniform float transitionEffectType;

      uniform float fadeInAvatarTime;
      
      varying vec3 vWorldPosition;
      varying vec3 vSurfaceNormal;

      vec4 textureRemap(vec4 In, vec2 InMinMax, vec2 OutMinMax) {
        return OutMinMax.x + (In - InMinMax.x) * (OutMinMax.y - OutMinMax.x) / (InMinMax.y - InMinMax.x);
      }

      float getRim(vec3 normal, float rimStrength, float glowIntensity) {
        vec3 eyeDirection = normalize(eye - vWorldPosition);
        float EdotN = max(0.0, dot(eyeDirection, normal));
        float bodyRim = pow(1. - EdotN, rimStrength);
        return bodyRim * glowIntensity;
      }

      vec3 getPixelColor(float pixelStrength) {
        float pixelUvScale = 2.0;
        vec2 pixelUv = vec2(
          vWorldPosition.x * pixelUvScale * -cameraDir.z + vWorldPosition.z * pixelUvScale * cameraDir.x,
          vWorldPosition.y * pixelUvScale
        );
        float pixel = texture2D(
          pixelTexture, 
          pixelUv
        ).r;
        return mix(vec3(0.0396, 0.768, 0.990), vec3(0.0142, 0.478, 0.710), pixel * pixelStrength);
      }

      float getDissolveLimit(float noiseUvScale, float noiseStrength, float bottomPosition, float avatarHeight, float time) {
        vec2 noiseUv = vec2(
          vWorldPosition.x * noiseUvScale * -cameraDir.z + vWorldPosition.z * noiseUvScale * cameraDir.x,
          vWorldPosition.y * noiseUvScale
        );
        vec4 noise = texture2D(
          noiseTexture, 
          noiseUv
        );
        
        float noiseCutout = textureRemap(noise, vec2(0.0, 1.0), vec2(-noiseStrength, noiseStrength)).r;
        float cutoutHeight = time * avatarHeight + bottomPosition;
        return cutoutHeight + noiseCutout;
      }

      `),e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      gl_FragColor = vec4(col, diffuseColor.a);
      `),e.fragmentShader=e.fragmentShader.replace("gl_FragColor = vec4( col, diffuseColor.a );",`
      //################################################## normal ###############################################################
      if (transitionEffectType < 0.5) { 

      }
      //################################################## switch item ###############################################################
      else if (transitionEffectType < 1.5) { 
        // vec3 pixelColor = getPixelColor(2.0);

        // float timeProgress = switchItemTime / switchItemDuration;
        // float rim = getRim(
        //   vSurfaceNormal, 
        //   mix(0.1, mix(0.1, 5.0, timeProgress), timeProgress), 
        //   mix(50., 10., timeProgress)
        // );
        
        // col = mix(pixelColor * rim, col, timeProgress);
      }
      //################################################## fade out avatar ###############################################################
      else if (transitionEffectType < 2.5) { 
        discard;
      }
      //################################################## loading avatar ###############################################################
      else if (transitionEffectType < 3.5) { 
        discard;
      }
      //################################################## fade in avatar ###############################################################
      else if (transitionEffectType < 4.5) { 
        if (fadeInAvatarTime < 0.5) { // phase 1
          float timer = fadeInAvatarTime * 2.;
          
          float border = 0.02;
          float limit = getDissolveLimit(
            1.2,
            0.1,
            -0.3 - border,
            2.0 + border,
            timer
          );
          
          float upperBound = limit + border;
  
          if (vWorldPosition.y > limit && vWorldPosition.y < upperBound) {

            vec3 pixelColor = getPixelColor(1.5);
        
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              10.
            );
      
            col = pixelColor * rim;
          }
          else if (vWorldPosition.y >= upperBound) {
            discard;
          }
          else {

            vec3 pixelColor = getPixelColor(1.5);
            
            float rim = getRim(
              vSurfaceNormal, 
              0.1,
              3.0
            );
            col = pixelColor * rim;
          }
        }
        else { // phase 2
          float timer = fadeInAvatarTime * 2. - 1.;
          
          float bottomPosition = -0.3;
          float avatarHeight = 2.0;
          
          float rim = getRim(
            vSurfaceNormal, 
            mix(0.1, 2.0 * timer, timer),
            mix(3.0, 20. * (1. - timer), timer)
          );
          
          float fadeStrength = 10.;
          rim *= pow((vWorldPosition.y - bottomPosition) / (avatarHeight - bottomPosition), timer * fadeStrength);
          
          vec3 pixelColor = getPixelColor(1.5);
          col = mix(pixelColor * rim, col, timer);

        }
      }

      gl_FragColor = vec4( col, diffuseColor.a );
      `),e.uniforms.pixelTexture=SD.pixelTexture,e.uniforms.noiseTexture=SD.noiseTexture,e.uniforms.cameraDir=Qt.cameraDir,e.uniforms.eye=Qt.eye,e.uniforms.switchItemTime=Qt.switchItemTime,e.uniforms.switchItemDuration=Qt.switchItemDuration,e.uniforms.transitionEffectType=Qt.transitionEffectType,e.uniforms.fadeInAvatarTime=Qt.fadeInAvatarTime)}playFadeOutEffect(){Qt.transitionEffectType.value=Gi.fadeOutAvatar,this.particleEffect.emitSpotLight(),this.particleEffect.emitPixel(),this.particleEffect.emitTeleport(),this.transitionTime=this.frameRate*((TD-Nw)/CD),this.initialFadeOutTimer()}playFadeInEffect(){Qt.transitionEffectType.value=Gi.fadeInAvatar,this.initialFadeInTimer()}playSwitchItemEffect(){Qt.switchItemTime.value=ewe,Qt.transitionEffectType.value=Gi.switchItem,this.transitionTime=MD}setParticle(e,r){this.particleEffect=new swe(e,r,Qt)}initialFadeOutTimer(){Qt.fadeOutAvatarTime.value=Nw}initialFadeInTimer(){Qt.fadeInAvatarTime.value=SS}update(){setInterval(()=>{this.scene&&this.camera&&!this.initParticle&&(this.setParticle(this.scene,this.camera),this.initParticle=!0),this.initParticle&&this.particleEffect.update(),Qt.transitionEffectType.value===Gi.switchItem?Qt.switchItemTime.value<hb?Qt.switchItemTime.value+=twe:(Qt.switchItemTime.value=hb,Qt.transitionEffectType.value=Gi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeintraitend"))):Qt.transitionEffectType.value===Gi.fadeOutAvatar?(Qt.fadeOutAvatarTime.value+=CD,Qt.fadeOutAvatarTime.value>TD&&(Qt.fadeOutAvatarTime.value=Nw,Qt.transitionEffectType.value=Gi.loadingAvatar)):Qt.transitionEffectType.value===Gi.loadingAvatar||Qt.transitionEffectType.value===Gi.fadeInAvatar&&(Qt.fadeInAvatarTime.value>.1&&Qt.fadeInAvatarTime.value<.5&&(this.particleEffect.emitRing(.5*(1-Qt.fadeInAvatarTime.value)),this.particleEffect.emitRespawnPixel()),Qt.fadeInAvatarTime.value>=.5&&this.particleEffect.removeSpotLight(),Qt.fadeInAvatarTime.value+=nwe,Qt.fadeInAvatarTime.value>rwe&&(Qt.fadeInAvatarTime.value=SS,Qt.transitionEffectType.value=Gi.normal,this.setTransitionEffect("normal"),this.dispatchEvent(new Event("fadeinavatarend")))),this.camera&&(this.cameraDir.set(0,0,-1),this.cameraDir.applyQuaternion(this.camera.quaternion),this.cameraDir.normalize(),Qt.cameraDir.value.copy(this.cameraDir),Qt.eye.value.copy(this.camera.position))},this.frameRate)}}const owe="_container_1fjfz_1",lwe="_messageWindow_1fjfz_11",Awe="_messageTitle_1fjfz_25",cwe="_buttonContainer_1fjfz_36",Qy={container:owe,messageWindow:lwe,messageTitle:Awe,buttonContainer:cwe};var _G={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=i(s,n(o)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return r.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=i(a,o));return a}function i(s,a){return a?s?s+" "+a:s+a:s}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(_G);var xG=_G.exports;const uf=iA(xG),uwe="_iconButtonWrap_1fm7l_1",hwe="_buttonBackground_1fm7l_8",dwe="_buttonBackgroundColor_1fm7l_13",fwe="_innerBackgroundColor_1fm7l_16",pwe="_dark_1fm7l_20",mwe="_iconWrap_1fm7l_28",gwe="_icon_1fm7l_1",vwe="_active_1fm7l_83",ywe="_buttonWrap_1fm7l_95",wwe="_buttonIconWrap_1fm7l_108",bwe="_innerWrap_1fm7l_127",Xr={iconButtonWrap:uwe,buttonBackground:hwe,buttonBackgroundColor:dwe,innerBackgroundColor:fwe,dark:pwe,iconWrap:mwe,icon:gwe,active:vwe,buttonWrap:ywe,buttonIconWrap:wwe,innerWrap:bwe},_we=[{name:"backpack",file:"./public/assets/icons/backpack.svg"},{name:"microphone",file:"./public/assets/icons/microphone.svg"},{name:"speechToText",file:"./public/assets/icons/speechToText.svg"},{name:"arrowRight",file:"./public/assets/icons/arrowRight.svg"},{name:"arrowLeft",file:"./public/assets/icons/arrowLeft.svg"},{name:"rooms",file:"./public/assets/icons/rooms.svg"},{name:"scenes",file:"./public/assets/icons/scenes.svg"},{name:"settings",file:"./public/assets/icons/settings.svg"},{name:"tokens",file:"./public/assets/icons/tokens.svg"},{name:"voice",file:"./public/assets/icons/voice.svg"},{name:"vr",file:"./public/assets/icons/vr.svg"},{name:"discord",file:"./public/assets/icons/discord.svg"},{name:"metamask",file:"./public/assets/icons/metamask.svg"},{name:"close",file:"./public/assets/icons/close.svg"},{name:"hide",file:"./public/assets/icons/hide.svg"},{name:"map",file:"./public/assets/icons/map.svg"},{name:"login",file:"./public/assets/icons/login.svg"},{name:"logout",file:"./public/assets/icons/logout.svg"},{name:"plus",file:"./public/assets/icons/plus.svg"},{name:"minus",file:"./public/assets/icons/minus.svg"},{name:"mint",file:"./public/assets/icons/mint.svg"},{name:"download",file:"./public/assets/icons/download.svg"},{name:"classDropHunter",file:"./public/assets/icons/class-drop-hunter.svg"},{name:"classEndineer",file:"./public/assets/icons/class-engineer.svg"},{name:"classCustom",file:"./public/assets/icons/class-custom.svg"},{name:"classNeuralHacker",file:"./public/assets/icons/class-neural-hacker.svg"},{name:"classLiskWitch",file:"./public/assets/icons/class-lisk-witch.svg"},{name:"classBruiser",file:"./public/assets/icons/class-bruiser.svg"},{name:"classBeastPainter",file:"./public/assets/icons/class-beast-painter.svg"},{name:"soundon",file:"./public/assets/icons/soundon.svg"},{name:"soundoff",file:"./public/assets/icons/soundoff.svg"},{name:"soundoff",file:"./public/assets/icons/soundoff.svg"},{name:"polygon",file:"./public/assets/icons/polygon.svg"}];async function xwe(t){const e=_we.find(r=>r.name===t);return await fetch(e.file).then(r=>r.text()).then(r=>new DOMParser().parseFromString(r,"image/svg+xml").firstElementChild)}function br(t){const{size:e,icon:r,className:n,onClick:i,theme:s,type:a,text:o,onMouseEnter:l,active:A,onSubmit:c,minWidth:u,disabled:h}=t,d=_e.useRef(null);return _e.useEffect(()=>{r&&xwe(r).then(f=>{d.current&&(d.current.innerHTML="",f&&(f.classList.add(Xr.icon),d.current.append(f)))})},[r]),a&&a==="login"?O.jsxs("div",{className:uf(n,Xr.iconButtonWrap,s&&s==="dark"?Xr.dark:Xr.light,A&&Xr.active),style:{height:e},onClick:i,onMouseEnter:l,children:[O.jsxs("svg",{width:"71",height:"67",viewBox:"0 0 71 67",className:Xr.buttonBackground,xmlns:"http://www.w3.org/2000/svg",children:[O.jsx("path",{d:"M2 2H68.8452L64.1437 65H2V2Z",className:Xr.buttonBackgroundColor,fill:"#D9D9D9",stroke:"#050B0E",strokeWidth:"4"}),O.jsx("path",{d:"M9 9H62L58.2676 58H9V9Z",fill:"#050B0E",className:Xr.innerBackgroundColor})]}),O.jsx("span",{ref:d,className:Xr.iconWrap})]}):a&&a==="icon"?O.jsxs("div",{className:uf(n,Xr.iconButtonWrap,s&&s==="dark"?Xr.dark:Xr.light,A&&Xr.active),style:{height:e},onClick:i,onMouseEnter:l,children:[O.jsxs("svg",{className:Xr.buttonBackground,width:"69",height:"63",viewBox:"0 0 69 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[O.jsx("path",{d:"M5 2H2.85562L3.00485 4.13918L6.7903 58.4048L6.9201 60.2656H8.78545H62.6772H64.6178L64.6763 58.3259L66.3135 4.06031L66.3756 2H64.3144H5Z",fill:"#efefef",className:Xr.buttonBackgroundColor,stroke:"black",strokeWidth:"4"}),O.jsx("path",{d:"M8.77795 7.28503H61.7957L59.8437 54.7911H11.367L8.77795 7.28503Z",fill:"black",className:Xr.innerBackgroundColor})]}),O.jsx("span",{ref:d,className:Xr.iconWrap})]}):O.jsx("button",{className:uf(n,Xr.buttonWrap,s&&s==="dark"?Xr.dark:Xr.light),onClick:i,onMouseEnter:l,onSubmit:c,type:a,disabled:h,style:{minWidth:u?u+"px":""},children:O.jsxs("div",{className:Xr.innerWrap,style:{fontSize:e},children:[r&&O.jsx("span",{ref:d,className:Xr.buttonIconWrap,style:{height:e,width:e,opacity:h?"0.4":"1"}}),o&&o]})})}function Ewe(t){const{cancelOption:e=!0,confirmDialogText:r,confirmDialogWindow:n,setConfirmDialogWindow:i,confirmDialogCallback:s}=t;return n?O.jsx("div",{className:Qy.container,children:O.jsxs("div",{className:Qy.messageWindow,children:[O.jsx("div",{className:Qy.messageTitle,children:r}),O.jsxs("div",{className:Qy.buttonContainer,children:[e&&O.jsx(br,{size:16,theme:"light",text:"Cancel",onClick:()=>{s[0](!1),i(!1)}}),O.jsx(br,{size:16,theme:"light",text:"Continue",onClick:()=>{s[0](!0),i(!1)}})]})]})}):O.jsx("div",{})}const Bwe="_backgroundImg_1yy0g_1",Mwe="_darkBackground_1yy0g_16",Twe="_logo_1yy0g_29",Hy={backgroundImg:Bwe,darkBackground:Mwe,logo:Twe};function Cwe(){const{debugMode:t}=X.useContext(Yr);return O.jsxs("div",{className:t?Hy.darkBackground:Hy.backgroundImg,children:[O.jsx("div",{className:Hy.backgroundBlur}),O.jsx("div",{className:Hy.Background})]})}const Swe="_buttonContainer_1x1gj_1",Iwe="_buttonLeft_1x1gj_10",Rwe="_buttonRight_1x1gj_14",Uwe="_buttonCenter_1x1gj_18",Fwe="_sideMenu_1x1gj_33",kwe="_scrollContainer_1x1gj_44",Lwe="_scrollContainerOptions_1x1gj_52",Pwe="_bottomLine_1x1gj_60",Owe="_editorButton_1x1gj_94",Dwe="_editorText_1x1gj_102",Nwe="_selectorContainerPos_1x1gj_112",Qwe="_selectorButton_1x1gj_137",Hwe="_selectorColorPickerUI_1x1gj_146",jwe="_selectorColorPickerButton_1x1gj_152",zwe="_selectorPickerTabs_1x1gj_162",Gwe="_selectorColorPickerImg_1x1gj_170",Vwe="_uploadContainer_1x1gj_176",Wwe="_uploadButton_1x1gj_189",Kwe="_relativeBox_1x1gj_209",Ywe="_blendshapeGroup_1x1gj_213",Gt={buttonContainer:Swe,buttonLeft:Iwe,buttonRight:Rwe,buttonCenter:Uwe,sideMenu:Fwe,scrollContainer:kwe,scrollContainerOptions:Lwe,bottomLine:Pwe,"editor-container":"_editor-container_1x1gj_87",editorButton:Owe,editorText:Dwe,selectorContainerPos:Nwe,"selector-container":"_selector-container_1x1gj_123","selector-container-column":"_selector-container-column_1x1gj_129",selectorButton:Qwe,selectorColorPickerUI:Hwe,selectorColorPickerButton:jwe,selectorPickerTabs:zwe,selectorColorPickerImg:Gwe,uploadContainer:Vwe,uploadButton:Wwe,relativeBox:Kwe,blendshapeGroup:Ywe},Xwe="_dropArea_1a0z4_1",Zwe={dropArea:Xwe};function T0({onFilesDrop:t}){const[e,r]=_e.useState(!1),[n,i]=X.useState(null);_e.useEffect(()=>{const a=l=>{l.preventDefault(),r(!1);const A=l.dataTransfer.files;t&&i(A)},o=l=>{l.preventDefault(),r(!0)};return window.addEventListener("drop",a),window.addEventListener("dragover",o),()=>{window.removeEventListener("drop",a),window.removeEventListener("dragover",o)}},[]),_e.useEffect(()=>{n&&t(n)},[n]);const s=()=>{r(!1)};return O.jsx("div",{onDragLeave:s,className:Zwe.dropArea,style:{display:e?"flex":"none"}})}const Jwe="_mainTitleWrap_4fb0s_1",qwe="_mainTitle_4fb0s_1",$we="_topLine_4fb0s_18",lM={mainTitleWrap:Jwe,mainTitle:qwe,topLine:$we};function lo({title:t,width:e,left:r,right:n}){const i={width:e?`${e}px`:null,left:r?`${r}px`:null,right:n?`${n}px`:null};return t&&O.jsxs("div",{className:lM.mainTitleWrap,style:i,children:[O.jsx("div",{className:lM.topLine}),O.jsx("div",{className:lM.mainTitle,children:t})]})}const e1e="_ContainerPositionTop_v15ql_2",t1e="_ContainerPosition_v15ql_2",r1e="_Container_v15ql_2",n1e="_topLine_v15ql_68",i1e="_traitInfoTitle_v15ql_96",s1e="_flexSelect_v15ql_105",a1e="_flexButtons_v15ql_114",o1e="_flexButtonsTop_v15ql_122",l1e="_optionButtons_v15ql_131",A1e="_optionButtonsSmall_v15ql_143",mn={ContainerPositionTop:e1e,ContainerPosition:t1e,Container:r1e,"arrow-button":"_arrow-button_v15ql_39","left-button":"_left-button_v15ql_55","right-button":"_right-button_v15ql_62",topLine:n1e,traitInfoTitle:i1e,flexSelect:s1e,flexButtons:a1e,flexButtonsTop:o1e,optionButtons:l1e,optionButtonsSmall:A1e},c1e="/public/assets/randomize-green-4388c12b.png",u1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNiOTBlZjU3LTIwOWItYzQ0Zi05OWNjLTkwYjYxM2Q0MWJiOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2NWQ3ZjJiYi1jMWI3LWI3NDMtYWJiMy0xZjNlYzYzMWIxNDQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjY1ZDdmMmJiLWMxYjctYjc0My1hYmIzLTFmM2VjNjMxYjE0NCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo0My0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozYjkwZWY1Ny0yMDliLWM0NGYtOTljYy05MGI2MTNkNDFiYjgiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjAtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6bbHqfAAAFoklEQVR42u2duWtWQRTFo5hGRNAETKFiIQqCSxGto4iCqSLon6BoQJJCEcEFLASbD7QRRcTKNbihoLgUWhj/AItUCi7gVmjikubzPphAiOYts9659xQHAnl5M2/u73vnzHwvbzra7XaHNg1cPrKadJs0bnSHtEbjWGgr/HxSi9SeRWeLYwCAzOIPmk97u0ITpAMAQE7h+0ivaxR+psZIWwBAvoVfSXpsUfiZelZkBgAgx+dtJTIfaPV5W4nLB9p93lZi8oEEn39iWcRPpK2kzaSPlud4mns+0Ojzk6QTpM5p5+skHSP90ZYPtPn8DVJ3ybkXk65oygdafH6UtKlBW72klxrygfT5/BfSLoe2B0xWELt+oMbnHfoxj3RUaj6Q6vNdAfq0SGI+UOvzDn0UlQ/U+7z2fACfV54P4PPK8wF8Xnk+gM8rzwfweeX5AD6vPB/A55XnA/i88nwAn1eeD+DzyvMBfF55PoDPK88H8Hnl+aBup/aQflp26HrZc3hQaT64Zjnmv0h7nQEwT8u24PNJQdjokA9aVXfdqsaH4fNsQNhJ+mxRj2EXAO41bGw/ihUchH0Na3LXBYC7DRs7T1qOQgUr/lLSuZgA3LL0nkukhSiat8IvIF2wrMWtFABMJdHDpLkoolPxD5mxbOcGwJTekfpRzMaF305662H8kwMwpRekDShuZeHXkp57HHc2ACAfhPP5JAB8MB3+jXyQzOeLJfaLpPcpAPhmjlnmcMtSnQ8cfb6w1BXmPF9TAFB8N9Az7dhtpDfIB8F9vvjQ7Jh2rp6K72mCArDkP39z0GHaIjofOPr8lG3OmXHOJawAmHah57F+4G0+P+sHgyUAHm91/fD5cmtkDYDmfODT57MHQFM+COHzYgCQng9C+bwoACTmg9A+LxIACfkgls+LBiDHfBDb51UAkEs+SOHzagDgnA9S+rw6ADjlAw4+rxaAlPmAk8+rByB2PuDm8wAgUj7g6vMAIHA+4O7zACDc7fqk+a/lbJel1QPgIR9k/cUUAAj7SDX7r6YBgP98wM7nAUCa9YOo83kAwC8f5PIACgDwnA+yegQNADQfsGdlb9rK8HoAQMMBK3vryT0AIB+ARyXX9AgAyAfgYck1PQQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlALQAwCSX0+y18V/L/a3BQDJr2cx6UcKAMZz3BRaIADdphZJNo16ldsG0ZIAoP721thY2gmAulvH3iB1AYCot/0rMbaObbJ59KR53UonAAjW907ScTPWUfYOHpK2fXyuADhsHz/kAkBBXMvy5QqjHPNBbgBQnzbW8PnZ1Kq6I9ftxJ6KuWaZrnOaLeQCQDHFJl1zeLPJ3jrtNOnQfIe7AZt8wB0A6sM80lHSH8uxPlPUqm57Nh1cSXps2bnk+YAzANT+AOmT5dg+Ja1q2qZLZ/tIry07m2z9gCMAjj4/Rtpi27aPzg9WrERVrR90awXAzOevWo7dBOmAax98XUg2+YADAGZ2dSyWzwcHIKd8kBoAM5+P6vPRAMghH6QCIKXPRweAcz6IDQAHn08GAMd8EAsATj6fFABu+SAGANx8ngUAXPJBSAC4+jwrADzlg5u2+SAEANx9niUAqfKBTwBy8Xm2AHjKB19Ju2MDkJPPswcgZj5wBSBHn88GgBj5wBaAnH0+OwBC5oOmAEjw+SwBCJUPmrwuXorPZw2Ax3yw3pxnpOS4EXPMOkk+LwKAGflgwrI4p0kPSn5/n3RKms+LAsBDPggh1j4vDgBP+cCHsvB5sQB4ygfifV48AJ7WD8T6vBoAAueDbH1eFQAB8kH2Pq8SAA/5QIzPqwbAIh+I83kAUD8fiPR5APAvCKtJt80dYdz8vEbjWPwFnWtJD/nY2zYAAAAASUVORK5CYII=",h1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmM2NDY5Y2JiLWFkMzUtYmQ0Ny04M2Q1LWU0NGQ0MTI2YmYwNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyMjUyMzZlNS1mYTFiLWUzNDUtOGQzNi0xOWJkMmE0YmYzNTEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIyNTIzNmU1LWZhMWItZTM0NS04ZDM2LTE5YmQyYTRiZjM1MSIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyNDo1MS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjNjQ2OWNiYi1hZDM1LWJkNDctODNkNS1lNDRkNDEyNmJmMDYiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjk6MjYtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6qPgTwAAAEeUlEQVR42u2dX4tNURiH58KfwR1K0USSj6BoIpdydcY0TUMmIy58BPdK/uTCLReaG7kwooQoH4FQyneQMNw53t2cqdOJPfusvfZa77ve5+JX1DlnOns9PM+cqT0T/X5/wtt6D64ekj2W/ZKtDv582OO18Hbwk7I7sv5/dle2DQDKPPzLsp81h7++6n+EKwBQzsGfkH1ucPCj+yI7CQB2D/6A7GXAwY/utewgAJTj+dAV2QdePR+64vrAu+dDV0wf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5532A5533AZ533gd43nkf4HnnfYDnnfcBnnfeB3jeeR/geed9gOed9wGed94HeN55H+B5530wzsHvkr3hQqvfW9nuLgDYKXvGBVa/F50AMATCHtkKF1rdqn+ce1NG4BHZOy589n2QHc35beBZ2VcOIvm+yRa1fBC0SXZN9oeDSbLrss0aPwqmDxR6PggA+ULnZRfpA9uel+ddkJ0LAWB56AOG/fSBLc/L86ZkrwavsxwCwOgPd6q/T9IHuj0vz9kquzl6djEAqPZDdok+0Ol5ed6S7Ps/XjMaAOurfgh0nD5Q4/lp2aea144OwPDHjvRBXs8/b/A1OgOAPtDj+awA0Af5PZ8dAPogr+fVAEAf5PG8OgDog7SeVwuA1z5I7XnVAHjqg1yeNwFAyX2Q2/OmACitDzR43iQA1vtAk+fNAmCxDzR63jwAFvpAs+eLAUBrH2j3fHEAaOkDK54vEoCcfWDN80UDkLIPrHreBQBd94Flz7sCIEYfPCnM8+4AiNEHZ2RzhXjeLQCt+6AQz7sHoFUfFOB5AIjRB4Y9DwAx+8Cg5wEgVh8Y9TwANNjt6rOADT4nuFHg+waAoc3WvOfZQt8zAAxtruY9zwFA+QDM1LznGQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANsA3AeAYnYvBIBTsvcAYH4fZaeDf328PHmxt3bzRACwteqWNkvBvz5+5MJs6a3dRBEAbOxWdVOrJmc77j1z9smeAoDaVbe1mRrnTENvnnSst3YzZQDQsepGVtMhZ9n29mkW+6AkABp5vjMAjPZBKQA09nynABjsA+sAjO35JAAY6gOrAAR7PikABvrAGgCtPZ8FAMV9YAmAKJ7PBoDSPrAAQFTPZwdAWR9oBqATz6sBQEkfaASgU8+rAyBzH2gDoHPPqwQgYx9oASCZ51UDkKEPcgOQ3PMmAEjYB7kAyOZ5UwAk6IMcAGT1vDkAOu6DlACo8LxZADrqgxQAqPK8eQAi90GXAKj0fDEAROqDrgBQ6/miAIjQB7EBUO/5IgFo0QexADDj+aIBCOiDtgCY87wLAMbogzYAmPS8GwAa9kEIAKY97w6ADfpgHACK8LxbAEb6YHVwqPM1j5sfPOZ3SZ53D8DgcLfLHsoWah6zIHsk2+HluvwF92zupxEV3NQAAAAASUVORK5CYII=",d1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFu2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmY3YWFkYzZiLWM2ZmEtNjE0OC05YWZkLTgxN2Q1OWRkZTI0MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NjUxYWZkMi1lOWE3LTk3NGYtYWVhZC03YjFjMjg0NmFhM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc2NTFhZmQyLWU5YTctOTc0Zi1hZWFkLTdiMWMyODQ2YWEzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0Mi0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmN2FhZGM2Yi1jNmZhLTYxNDgtOWFmZC04MTdkNTlkZGUyNDIiIHN0RXZ0OndoZW49IjIwMjQtMDEtMTdUMDA6Mjg6NTEtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6TWt7cAAAFm0lEQVR42u2dT2xURQCHSTXpQTH0oIJpgfZKi1ETiSK1MV7FbORQNcG0Hmg3oQVjjKARrhDBBDEYMSEYS6kWkxoVAheDiBc9kHBBuaGgMSo1KgTF+pt0JLq6dOe93X3z5zt8SbPdvtmZ37fvvc7Mm5k3MzMzD9KFRkAAGgEBAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABPKO0f3OrWCxWiTViROwQ+8QBcchywL62w77HvLdPdJpjIEAYYd8sHhDPiD3iuLggfhczGblqj/GJ2Cs2il5xCwL4EfoK8bw4LH7MEbQrF8UR8aK4T7QgQPNC77On6jNNDHwuzopXzGdDgMaEvlRsEqc8Cr0ap+2ZoRMB8gdvrulviT8CCP7/7h/GxIMI4B78Q+KjAEOvhrlHeRgB5g7e3FB9GFHwlZi6rUSA/wZ/m3g94uAreVMsRIDZ8J8S3yUU/t98L55OVgDby3Y4weArMf0JXUkJoAo/Ln4i/GtMiyeTEEAV3U3gVXktWgFUuXbxKSHPyWeiIyoBVKG7xXnCrRnTVvdEIYAqsjrniFwjGteciabEuGXKvnbes57ER4MWQBVY60FD/ioOiiHRfb3xfTt/oNu+1/zNLx58/rVBCqAPPlxww52x4/e356jDrfYYXxZcl+GgBCg4/Gk7KaSljvVpsSJcLLBe5SAEMB+04L72JQ08qy0ueKyi7LUABYe/pYn/0r4UiwSxhD9UQIfWuhgkiOGav67A8YzgJeC0n7/+W0KWIOTwj3o0keVoqBKEGv5vYoFHAiwQl0KUIMTwDSM5wuoQg3Ya90HLTvtaR47jjhbcJuWmCOBB+OcyBrTcPgJ25TrHvmKFuDNjGedCkyC08DN9+20vnms5GwM8CzhLEFr45jo73zGUbTnK2+5Y1nxxOSQJQgrf8G4B38gRxzInPWmrcl0E8Ch8w4BDEF11LLfLodwBj9qrnEsAz8I3LHMI4r06ljvpUO4yz9qsnEkA/WG/ZxX5VtxQYwh3NKD8RTWWfaOHzzn0OwmgP2izU5J8qsQJh2/hYMGXnxMePqja5iLAdg8nSk45BPBqA8rf5VD+lIftt81FgC88rMC4QwDvNKD8CYfyxz1sv88RAAG4BHAJSOMmcICbwBw3gRH8G7ioAeUvTObfwEg6giYL6gjqjqIjiK7gzF3Bg6VYuoIjGAwaYTAoruHgywwHFzAc7JkEoxkmamwQfzIhJI4pYd9knK7VU+OUMNOJszxjGV9HPSXMIwlGc0zebLf9BDsrJoWa19pzHHdDEpNCPZHgUrWOjYKmhbclNS3cEwmOeSTAseQeDPFEgq08GsbDoUMFhj+U/MOhnpwJhgmfBSK2ctpniRizx8DSBga/hCVi/JfgZ/FsrUPHjotETbNIVDjLxH1lVwtjmTgWitw8YYXsqWGhyB773gkWiqyPBI/M0f/ebC7YZWHf/0dXsPn5pP2dL5/TLK+7OpbFou8ygzgsAl37gJdpM5aLT5OTeQalQtgwYhchV2V3KlvG9LNlzL8waxA/kdqmUWY7WDaNmm2DtDaNYtu4a9vGDbJxZJobR75RYuPIqlvHfhBx8GYc4X62jk1v82hTFzaPzrh9/H7PNp2qFbPl/duil+3j6zMMu0mcCiD40+IF0RlC2wYhQIUMveJluymUL6GftWsP94XWnsEJUCHDveI5e439oYmBm06sI/abvqKeG1QhQHYZbhIr7fj9HvFxaXYjyDz3D1ftMY6LvfbYq1yfT0SA4qRotcvDm5vJNfZpYXP52CfGxCHLmH3N/G69eMyczkuzW9y3xtxGUQsACAAIAAgACAAIAAgACAAIAAgACAAIAAiAADQCAgACAAIAAgACAAIAAgACAAIAAgACAAIAAkCc/AWkhfX2hx9ZaQAAAABJRU5ErkJggg==",f1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAATr2AAE69gE6sVc6AAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMTdUMDA6Mjk6MTQtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YWVhNTAzZS0zNzRiLWJjNDQtYjhjYy01NDllNjA1MmM2MTMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjhhZWE1MDNlLTM3NGItYmM0NC1iOGNjLTU0OWU2MDUyYzYxMyIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0xN1QwMDoyMjo0OS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PslPja4AAAbiSURBVHja7Z17iFVFHMc1K80ybc3SP9K21YrubtLDiIJqK5WMpbYt1MpSKiKkba0gtU0rCCpoyxRXSKrNiJIwCmtD0u2JEWFuSC/t2sueghDU2svbd2D+uFzce89rzvxm5vvHB2TX5Zw758PMufN7zJBSqTSEhAsHgQJwECgAoQCEAhAKQCgAoQCEAhAKQCgAoQCEAhAKQCgAoQDVaO1ZOgWsB7+CAbALLAPDOdCeC4CH3AJKg/AlGM/B9lQAPNxG8HcVARS7wQQOuJ8CPFvj4VMCXwXAAx0BfowoACXwUIA68EcMASiBh0vApzEFoASeCdCZQABK4JEAw0A/JQh7H2A8KFKCsHcCxUugX1qnghlgLrgBzNP/bgXTwTRwAjiEAsQf4AkpJChmJYF+0M1gIegGm8Dn4M+I9/If+B68B3rAneBiMIoCCJwJ8DejwZVgBfgQ7E94/Vqor7ybwVJwOgWwKAH+z3HgJrDR4AOvxU7wIDiFAuQoAX7XZumBV0MtF20UID8JnhMoQUlvjXeAw5kQYl6CVUIlUOwD7WBo8BlBhiVYK1gCxU/giuBTwgxL8IJwCRTvg/qgcwINS/CKAxIolgSdFGpYgjcdkeATMDHYrGDDErzriASK+cGmhZuSAD8/DHzskARrg60LMCjBkQkTVWwuCccGWRhiUIIx4DOHJNgLCkFWBhmUYJzer3dFAhWFnOXjRtAosA6cb0ECFaL+xiEJFAt8E6BXf7Cfq22GGJRgIvjBMQlu9yUWsOUgW6M2JGgAvzgmQYfr0cA3quyPm5KgWEWCaXpLVhWtXqVp11k/6uffCpRgoav5AC9GCJvWS0svw99NVhs0OtHkgBAJ5rmWEbQiRqSs3saOYcTPcTzoAv8KkGCGKzmBnQnCpbkvBwlE2GRZAJXQ2ig9K3hOipi52Jmg7D7aLUvwXdbp81k+/DPAPykTJ1yQYKbld4MPJFYGHZPi4bgowaWWZ4I10gTYmHEKlQsS3GxZgtukFIfeayiPzgUJnrYswVm2G0Q0G06mFC2BCuHq7W1bAmxPW8OYNsBjOtJmUoKvwaQMJOiwPAussiVAXoUZJiVQJWW/gR3gSdXrMME4jIzZJ8kEl+UqgC7EzDu33pQElSxPMB6PWRZANeU8KhcBdJKFDeNNxg4q6Yk5JhcJ2CpemZcA6yxX2YibCVQdoIBlQHGhUQHUWiOk+PLEnCRoTJD0YpM+0wJIybS9xmCnknK6YozNGiFjM8eIAAJ2vsqjYlEaSGQxE2yLMT4PCBmfreBkEwK8JuQDfhTjnpsySNUeGfFaiwVlEd1hQoBXhXy4vpjf0femvF6TYzOAMQGkLAHbY763bEt5vWLEJadb0BIwxeeXQJXZOyLGPT+ewTVrSqDi9EIEmO3718DI07K+50JG16xVlfywgHHpzWMj6CkBH/SWmPe8PCcJHrU4JurUltPyEODoDDdakvJ8gvvuyejaRaES3JVnMMj2UvA7GJvgvu/zdCbYYiMc/IRlCRYlvO8GHfrdoY+42+/4TPBXkqk/q4wgm504dsf5NlDlM0zS4VQTM8Ej0nMD0w5ewWKf3kSxews9i0xK8LKEpND5lpeCMx2QwMRyoFLaxkhJC++yKIBay48IcCY4T1pl0GaLErzuSAu7rGaCzJpHZCnAOD0AtiTYEIgEqyUXhxYSHCSZaahYlal5LME7LpSHTxewSdTioQS7TPQSNNUgYoGAeMFbWdTTm+xPEEMCVbvQ4FqLmEVCIodv62PhRjs6E6iS+7NdbRJ1j6AsmQEtw0r1Fg2uBVdrHtJNoqYKlKDZ9TZxSxxqy2atIHWQfYLLfWkUeTcliC3BTN+OjLmVEkSSQEUqr/f1yJgWQb33vGhS4eKRMY36aw0lECCBrfbwdQ6d6uG1BLbPCeimBHYlkHBYxNyU/QUpgScnhmylBPlLIOoUS71Dd4ASBCpAWW1/LyUIVICyQbxE+IFPXkgg/nx7DMSNQvrveCmBeAEqRJA4I+wD57oqgTMCVHTqlvaO0GcrnyA4ASpeFhdn0AAiKTt1HF8dRHWozaSSIAWoGNyTdM/eDQbjDOq0jvX61JCmFPsdoiTwQoCDNG08R7e0Wa1zA7/SGUFRBnqP3pRSp57dD9rAqWBohjOX1TOQvBagysCP1V3DLgCz9IOdDa4DrarSRjWgBMNcPSuZArglpAgJ+DDclaA/i9mKD8JtCTopQNgS9FOAsCVQdZh1FCBcCfakbZPDgXdbgme4BIQrgWoMWaAA/kqgTiz/oooALdwH8F+C4WCZDjwN6L6GL4HJ3AkkFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIBCAUgFIBQAEIByGD8DzQJyO8fOgE8AAAAAElFTkSuQmCC",p1e="/public/assets/play-de4238c5.png",m1e="/public/assets/reverse-e35421b8.png",g1e="/public/assets/pause-b6381fd4.png",v1e="/public/assets/fast-forward-0d3ffae5.png",y1e="/public/assets/fast-backward-1f713448.png";function N_({loadedAnimationName:t,randomize:e}){const{characterManager:r,toggleDebugMode:n,debugMode:i,lookAtManager:s,animationManager:a}=_e.useContext(Yr),[o,l]=_e.useState(s.userActivated),[A,c]=X.useState((a==null?void 0:a.getCurrentAnimationName())||"");_e.useEffect(()=>{t==null&&(t="T-Pose"),t!=""&&c(t)},[t]);const u=()=>{n()},h=p=>{p?a.play():a.pause(),a.setSpeed(1)},d=p=>{a.play(),a.setSpeed(p)},f=()=>{s.setActive(!o),a.enableMouseLook(!o),l(!o)},m=async()=>{console.log("play next"),await a.loadNextAnimation(),c(a.getCurrentAnimationName())},g=async()=>{console.log("play prev"),await a.loadPreviousAnimation(),c(a.getCurrentAnimationName())};return O.jsxs("div",{className:mn.Container,children:[O.jsx("div",{className:mn.ContainerPositionTop,children:O.jsxs("div",{className:mn.flexButtonsTop,children:[O.jsx("div",{className:`${mn.optionButtonsSmall}`,onClick:()=>{d(-2)},children:O.jsx("img",{src:y1e})}),O.jsx("div",{className:`${mn.optionButtonsSmall}`,onClick:()=>{d(-1)},children:O.jsx("img",{src:m1e})}),O.jsx("div",{className:`${mn.optionButtonsSmall}`,onClick:()=>{h(!1)},children:O.jsx("img",{src:g1e})}),O.jsx("div",{className:`${mn.optionButtonsSmall}`,onClick:()=>{h(!0)},children:O.jsx("img",{src:p1e})}),O.jsx("div",{className:`${mn.optionButtonsSmall}`,onClick:()=>{d(2)},children:O.jsx("img",{src:v1e})})]})}),O.jsxs("div",{className:mn.ContainerPosition,children:[O.jsx("div",{className:mn.topLine}),O.jsxs("div",{className:mn.flexSelect,children:[O.jsx("div",{className:`${mn["arrow-button"]} ${mn["left-button"]}`,onClick:g}),O.jsx("div",{className:mn.traitInfoTitle,style:{marginBottom:"10px"},children:A}),O.jsx("div",{className:`${mn["arrow-button"]} ${mn["right-button"]}`,onClick:m})]}),O.jsxs("div",{className:mn.flexButtons,children:[e&&O.jsx("div",{className:`${mn.optionButtons}`,onClick:e,children:O.jsx("img",{src:c1e})}),O.jsx("div",{className:`${mn.optionButtons}`,onClick:f,children:O.jsx("img",{src:o?f1e:d1e})}),O.jsx("div",{className:`${mn.optionButtons}`,onClick:u,children:O.jsx("img",{src:i?h1e:u1e})})]})]})]})}const w1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAAQMAAACQp+OdAAAAAXNSR0IB2cksfwAAAAlwSFlzAAACxQAAAsUBidZ/7wAAAAZQTFRFAAAAr8rpn4DGigAAAAJ0Uk5TAP9bkSK1AAABRUlEQVR4nEWSMU6GQBSE5wEJGAvotIPOY/AbC8/hLfwr2Nh4HU+gHOEv7aSTTgrjkgDrvLeaP0DyhX07zM4gALpeAN65x1wp1B/YMoWu1wVeO8eGg+gIOCQov9D3SyGcHW73LRO0r4k+gu5YcFkEYWyQrk5kd9QJg6Sr6OceJP9JCO2L5N8ZoT5JORWEcpJyrAj5LPXQENLlDK07EGQ7Qye92Y7QvhEczK2BupXAb9It3yY2EoEnCwYB2BTSFVgUdNP8D6Osme0e9A1zgVMwmT8IiQL1GAKBeowlAoMKom7Ghn4UmGEE19Pz02rxGoQEPNfdasm37t5TBjz7TSzFgHkynytPGcJUesqAGV56LYupXnjKgDkXnjJq8fmRMlwNn9eUIdAoZQi0ThlogyoD61T70ZZVxnpXGfsTjkWE+lRFyN+1ll9u0JghRPMM5gAAAABJRU5ErkJggg==",b1e="_tokenBoxWrap_q4pvo_1",_1e="_mask_q4pvo_7",x1e="_timer_q4pvo_31",E1e="_level_q4pvo_42",B1e="_mythic_q4pvo_55",M1e="_epic_q4pvo_60",T1e="_rare_q4pvo_65",C1e="_uncommon_q4pvo_70",S1e="_common_q4pvo_75",I1e="_none_q4pvo_80",R1e="_value_q4pvo_85",U1e="_frame_q4pvo_95",F1e="_emptyIcon_q4pvo_111",k1e="_badge_q4pvo_123",L1e="_frameActive_q4pvo_131",SA={tokenBoxWrap:b1e,mask:_1e,timer:x1e,level:E1e,mythic:B1e,epic:M1e,rare:T1e,uncommon:C1e,common:S1e,none:I1e,value:R1e,frame:U1e,emptyIcon:F1e,badge:k1e,frameActive:L1e,default:"_default_q4pvo_159"},P1e="/public/assets/magic-box-cd45f027.png",Za=t=>{const{size:e,active:r,onClick:n,level:i,icon:s,rarity:a,style:o}=t,[l,A]=X.useState(!1),c=()=>{A(!0)};return O.jsxs("div",{className:SA.tokenBoxWrap,style:{width:e,height:e},onClick:n,children:[r&&O.jsx("div",{className:uf(SA.frame,SA.frameActive)}),O.jsx("div",{className:uf(SA.frame,a&&SA[a])}),O.jsx("img",{src:l?P1e:s,className:SA.emptyIcon,style:o,onError:c}),i&&O.jsxs("div",{className:uf(SA.level,a&&SA[a]),children:["Lv.",i]})]})},O1e="_InformationContainerPos_72ckd_2",D1e="_scrollContainer_72ckd_15",N1e="_traitInfoTitle_72ckd_27",Q1e="_traitInfoText_72ckd_35",H1e="_flexSelect_72ckd_62",j1e="_checked_72ckd_119",z1e="_checkmark_72ckd_123",G1e="_checkboxHolder_72ckd_136",bo={InformationContainerPos:O1e,scrollContainer:D1e,traitInfoTitle:N1e,traitInfoText:Q1e,"input-box":"_input-box_72ckd_43",flexSelect:H1e,"arrow-button":"_arrow-button_72ckd_70","left-button":"_left-button_72ckd_86","right-button":"_right-button_72ckd_93","anim-button":"_anim-button_72ckd_100","custom-checkbox":"_custom-checkbox_72ckd_105","checkbox-container":"_checkbox-container_72ckd_110",checked:j1e,checkmark:z1e,checkboxHolder:G1e};function mR({jsonSelectionArray:t,byManifest:e=!1}){const{isLoading:r,setIsLoading:n}=X.useContext(ls),{characterManager:i}=_e.useContext(Yr),[s,a]=_e.useState(0),[o,l]=X.useState({}),[A,c]=X.useState([]),u=m=>{i.setManifest(m),i.loadInitialTraits().then(()=>{n(!1)})};_e.useEffect(()=>{r==!1&&(l(i.getAvatarSelection()),c(Object.keys(i.getAvatarSelection())))},[r]);const h=m=>{i.loadTraitsFromNFTObject(m).then(()=>{n(!1)})},d=async()=>{if(!r)if(n(!0),s>=t.length-1)e?u(t[0]):h(t[0]),a(0);else{const m=s+1;e?u(t[m]):h(t[m]),a(m)}},f=async()=>{if(!r)if(n(!0),s<=0)e?u(t[t.length-1]):h(t[t.length-1]),a(t.length-1);else{const m=s-1;e?u(t[m]):h(t[m]),a(m)}};return(t==null?void 0:t.length)>0?O.jsxs("div",{className:bo.InformationContainerPos,children:[O.jsx(lo,{title:"Trait Selection",width:180,right:20}),O.jsxs("div",{className:bo.scrollContainer,children:[O.jsxs("div",{className:bo.flexSelect,children:[(t==null?void 0:t.length)>1?O.jsx("div",{className:`${bo["arrow-button"]} ${bo["left-button"]}`,onClick:f}):O.jsx(O.Fragment,{}),(t[s].name||t[s].manifestName)&&O.jsx("div",{style:{textAlign:"center",flex:1},children:O.jsx("div",{className:bo.traitInfoTitle,children:e?t[s].manifestName:t[s].name})}),(t==null?void 0:t.length)>1?O.jsx("div",{className:`${bo["arrow-button"]} ${bo["right-button"]}`,onClick:d}):O.jsx(O.Fragment,{})]}),(t[s].thumb||t[s].thumbnail)&&O.jsx("img",{src:t[s].thumb||t[s].thumbnail,alt:"Selection Thumbnail",style:{width:"280px",height:"460px",display:"block",margin:"20px auto 20px"}}),t[s].attributes&&t[s].attributes.map(m=>O.jsx("div",{children:O.jsx("div",{className:bo.traitInfoText,children:`${m.trait_type} : ${m.value}`})},`json:${m.trait_type}_${m.value}`)),e&&A.map(m=>O.jsx("div",{children:O.jsx("div",{className:bo.traitInfoText,children:`${m} : ${o[m].id}`})},`val:${m}`))]})]}):O.jsx(O.Fragment,{})}const db="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXASURBVHgB7ZzNchNHEMd7ZiWf5WtSCSIfVa5cLN+MTRXrEFPcWJwHwNxys/0Etm+5YZ4Ac0pOIG4EU2WlCgffIm4+pIhS8ADKEQlt07OSKKGdlVdSz64K9++kmhlpR3+Pe3qmuwUgCIIgCIIgCIIgCIIgCIIgCIIgXHAUzCDLflDWRfCVgkVA5aOCkgqhRLMt9cdQW0MhNEBhHRFehW2ondaqDZgxZkZg3w9KrTm9RdJtknBlmAwjeLXTgvuzInbuAi//FPieUrv00gdW1GGnHe7nLXRuAkdmoKDvKYUBOCVfoT3IgSvrP295Gn4nG1sB91S0p4Kvvl34/83rszpkTOYrePXGxj1A3E41GKGGCl/Rq7oXQpM2tma/q0PC0R+orFAt0rfwU32eUgcnzx7tQIZkJrDZxNpFdUwvR6/arqgP59pQrdWqTUj52a0iBCT2nRRi14ttXEv72dOSicCpxCVhFeD+i+fVGkzB8s2g7HVgj77anRHDMhO5ABkwUlzjz4Z4d1ph+5w+jTazzZX1oEYmYTfB5av05rQEjtHgmMjmJoiLqKrFFi5xiTtEPTqcJFPpzc0pTk0EraJNBeqBrU9hZA72wAH03ArZ4+PBk18Socadl39UD8ARzgTuHnfVMT2gPNw3K+L2aHbauOTKT3ZmIrwi7NrENWYhR3Ftm1pJz2lnpsKJwGb10jrdjHXQhhYWQid+6Hnimv8a8hwum0siS19wlY7s4AAnApvVC9aH4U5vl2cljbjmv8a4ZZo8FtsY7N6HsMNug83q9YrqX8ujDk+OHt0FZtKKO9i2un7buGj+8Fha4fPcvjH7CtYeWI/BHS/cB2YmEbffbhvfKkC6I/wY8JsIrW7F2uiUxm0aJhXX0PO7a7H3qJGnv4lgFdiYB6vnQHcLwMg04n6cE1jnVF75ceMSMMIqsAnz2NrNxQ0wwSHu6DmFa8AIr4kILUdiMg9cGweXuIbenGqxDo/3jppVYKXpbnaI3n3u1HCK+3FuYXxuZIevASOsApNdK8faMO7Yj4sLcSM0xCMcmPqInfIRjNDFTnm4jWJSU4VpnIlr5hbaj87AiPPrymlwKa6hrS6wwK7FzQpegTG+Ijp6/BXxuYhr4N3kFMYEVu/HEzhLcZU90tIARrg3ubhNG8OvzHrlWuN1OMMCk1/553Abib6Y5r15mAWXfnsfXhusrS6Zb8L2o96Wh7i9OfmWrqncymFYBQ49y9GTaGkIkt6T14ZmElVs7UnfYVJYBTZXknSaawy3K89+DZint6BsiSkUTuK+VuX3gxFs14D+cMwrT3G7McO4eUDEJ8AMu8Bz7+HA1j4Y88rbz02KGZJ5YM+PcJIXkRTzIuHWQjqe5inuletBoLV6HO9xEzN0clROinnRKn6Qp7hRxEUraw6Ei5ihwYnAJuZlEkwsXeU8j79RRj3YkgHVoYt0guiZ4IgowQQhVSQjC3FXbmzsWssVyHNwtXoNzkoI3v5z1vz6m4V3FCK4OWpcZuIi7tn6yK3cefnMSXZnhNMajTevz04vXV6YJ5GXrQPM6mnDztvGGUvMbhhzWvviux9+U4C/gPXxeP/kqPorOCSTDHfyKv6G5Ox2czjZ/+uoegiMmPIwbTZVSKy5q58cPXaegJ1JhrtJ1x+R5V42OcSr6xvXOMqtUtbdRSUEkAGzVwRDoXSTFDJREUz3+OufM/zzK4IZ5Or14AC12ko5vGZqkcMQ/sOBWy5FURK6yy31apkrtFNV0iRcG5v74qi6DRmSS6WnKS0YUaDigiZdNOyfPHdXKpBELpWepuLyy+8XnmiEefobp454TII58IQFvE2u2FPIgfyLwdPVtY0PU93dtMzMzxkYoXUHtsl03JrUdJCdbmjEhwW60ctqEzuP2fxBjq7YPph6ZFSLaGqSP/VnmyQm3cqZ+uUoDlif1R/kEARBEARBEARBEARBEARBEARBEC48HwDC3eeu0ZVWOQAAAABJRU5ErkJggg==",ID=({active:t,src:e,select:r})=>O.jsx("div",{className:`${Gt.selectorButton}`,onClick:r,children:O.jsx(Za,{size:56,icon:e||"",rarity:t?"mythic":"none"})}),V1e=({selectedTraitGroup:t,onBack:e})=>{const{decalManager:r,characterManager:n}=X.useContext(Yr),[i,s]=X.useState([]),a=t.getAllDecals();return X.useEffect(()=>{const o=Array.from(r.applied.keys());s(o.map(l=>l))},[]),O.jsxs("div",{className:Gt["selector-container-column"],children:[O.jsx(br,{theme:"dark",text:"Back",size:14,className:Gt.buttonLeft,onClick:e}),O.jsxs("div",{className:Gt["selector-container"],children:[O.jsx(ID,{src:db,active:!1,select:()=>{r.removeAllOverlayedTextures(),s([])}},"empty"),a.map(o=>{const l=sG(n.manifestData.getTraitsDirectory(),o.thumbnail);return O.jsx(ID,{src:l,active:i.includes(o.id),select:()=>{i.includes(o.id)?r.removeOverlayTexture(o.id).then(()=>{s(i.filter(A=>A!==o.id))}):r.loadOverlayTexture(t,o.id).then(()=>{s(i.concat([o.id]))})}},o.id)})]})]})},W1e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFyWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wMS0wMlQxMTo0OTozNy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDEtMDJUMTE6NTI6MjMtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBiNWViMTliLTkxMmEtMmI0NS1iOTZlLTliNDUxOGUzZDU4NyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg4ODliZDlkLTAxZjItMTQ0Ni04NDE4LWYyYzNjNjQ1ODNlOCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODg4OWJkOWQtMDFmMi0xNDQ2LTg0MTgtZjJjM2M2NDU4M2U4IiBzdEV2dDp3aGVuPSIyMDI0LTAxLTAyVDExOjQ5OjM3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBmNjkzZGRkLWI4ZWYtZTU0Ni05YWQ2LTRjNzJkOTg4MTJhNCIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0wMlQxMTo1MjoyMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv0y+4AAAASPSURBVHja7ZxrSBVBFMctyqIgC0ujJ5UFaQpZRC/7YoUVQYUUkZQYQoVfJBF62PtBlhlJoJWSUQRSEYUFUVRiSEWRiokVgZqRWUEv7W3/oQkul53Ze+/OXWfyfPh98e6cPfNjnZ2ZPbshnZ2dIUTwIAkkmAQTJJgEk2CCBJNgEkyQYBKsgFnzlsaCanARZICFIJwEqxN8CXR68R08479lgxVgDAkOTPATC8EiXoLbYB9YDeJJsFzucPDLD8FWvABlIBcsAeNBKAn+K3i+Q7ki3oNycAys4eP8gO4oeH2QBFvxFVSAYj6uR3cHwWdcFGzFG1AF8sBakOBkeNFR8AMbAY/BedDqovQPoA6UgghjBbMxkXfGqpMfwUyv4w90wRV+1GTBCyQdmy5oc8hlwQdMFrxF0KlzkjbDwA8XBSebLPikv1cNfusBml0UHGWy4BpBp0olbYaAjgBlselZHBgNloNGm+PbQF8jBfsgKlrQbnuActMtYoWCBkmb68ZO09hNzEbIUzDCq82GAOXekuSRJGl3xGTBmT6IYXsU10Ahn5cGOo5ukeQxCLQL2q0zWXCBizeq7TZD1XdBu1iTBVe4KPieJI9kQZtPYKCRgpF4P/DW5QVDnkUeUVyk1fH3jd2L4Pu1KqSxMfohH6cbfbmS+eqRTdX22ixYck0WnKZAbguY5BV3o8IrPsVkwWUKBMQIYmcpEjzdZMF3eCfaA4C1OxGkld4/WgPdE9ZBLttLGMwJD4AI0F8SvycfPpwIvkuFJ2LBQyXzWl8pck0wmwuCcWCUZrCcwizy3aZg/E13RTBONMXjpL81g+W0wyvf/YpucHPdEpzbxQ8k7djlkesmRTHbnZRt+Ss4T3PBOz1y3aooZq1rj+1xsoMGCd6sKOYFEhxcwRm6Cf4JvmksuIUXlrz2MeZknQTv5k95e4HZvCM6CU73c5O/w2ldskrBqTbL4K4WnCbIL0MS75GrtWkSwZWSNgkaCK63Wao3CeKd0kVwgaRNmGQT2y3BZ236VS6Il6OL4OOSNpEK9gKcCq6y6VetIF6iLoKbRdt5vNhZhzE4UZDfYkm8kboIZpy2OH4C+KyJYFZsPdUrvzmSWM9dL8D2YZpWw4tBlrEyTz4n1mmaxvK5DvLBTY9NIitKdBT8P63k1pPg4ApOMllwBX+9agZYKamqdCI4x0Ec9vg+0lTBhYLYVxQLznYQp65L3jJSILhN9G4a/j5RseAefBW5gy00/PwvuWSq4GKb+PWqBAviR/Ay2UxeTV8pqObJMlVwiU38hmAKlizl4/iCqIjXIS8yeYgIE8SOUTlEGPkyuKKb3FlB7FskWN00jX1sIxVM4/uxTaqnad1dcNAXGiSYBGsjuJoXvJTy95VJsEJWeZ2/N7hBghWXQXnl0Ae8IsHOGSfJ4zAJdv59HVlR9SYS7JxESR4XSbBzLgtyiKebnDqugrEe248pkveISbAD3oEvtNCglRwJ1l1wvuaC95gueJ/mgnNMFxzFH6m84V841YVW/nZ9DH0/mD4xTpBgEkyQYBJMggkSTIJJMEGCteYPxO/zzCRZDV4AAAAASUVORK5CYII=",K1e="/public/assets/color-palette-71a7a2d4.png";var oa={},C0={},Y1e=typeof Oo=="object"&&Oo&&Oo.Object===Object&&Oo,EG=Y1e,X1e=EG,Z1e=typeof self=="object"&&self&&self.Object===Object&&self,J1e=X1e||Z1e||Function("return this")(),Al=J1e,q1e=Al,$1e=q1e.Symbol,S0=$1e,RD=S0,BG=Object.prototype,ebe=BG.hasOwnProperty,tbe=BG.toString,Am=RD?RD.toStringTag:void 0;function rbe(t){var e=ebe.call(t,Am),r=t[Am];try{t[Am]=void 0;var n=!0}catch{}var i=tbe.call(t);return n&&(e?t[Am]=r:delete t[Am]),i}var nbe=rbe,ibe=Object.prototype,sbe=ibe.toString;function abe(t){return sbe.call(t)}var obe=abe,UD=S0,lbe=nbe,Abe=obe,cbe="[object Null]",ube="[object Undefined]",FD=UD?UD.toStringTag:void 0;function hbe(t){return t==null?t===void 0?ube:cbe:FD&&FD in Object(t)?lbe(t):Abe(t)}var Xu=hbe,dbe=Array.isArray,uo=dbe;function fbe(t){return t!=null&&typeof t=="object"}var AA=fbe,pbe=Xu,mbe=uo,gbe=AA,vbe="[object String]";function ybe(t){return typeof t=="string"||!mbe(t)&&gbe(t)&&pbe(t)==vbe}var wbe=ybe;function bbe(t){return function(e,r,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var l=a[t?o:++i];if(r(s[l],l,s)===!1)break}return e}}var _be=bbe,xbe=_be,Ebe=xbe(),Bbe=Ebe;function Mbe(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Tbe=Mbe,Cbe=Xu,Sbe=AA,Ibe="[object Arguments]";function Rbe(t){return Sbe(t)&&Cbe(t)==Ibe}var Ube=Rbe,kD=Ube,Fbe=AA,MG=Object.prototype,kbe=MG.hasOwnProperty,Lbe=MG.propertyIsEnumerable,Pbe=kD(function(){return arguments}())?kD:function(t){return Fbe(t)&&kbe.call(t,"callee")&&!Lbe.call(t,"callee")},TG=Pbe,fb={exports:{}};function Obe(){return!1}var Dbe=Obe;fb.exports;(function(t,e){var r=Al,n=Dbe,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?r.Buffer:void 0,l=o?o.isBuffer:void 0,A=l||n;t.exports=A})(fb,fb.exports);var gR=fb.exports,Nbe=9007199254740991,Qbe=/^(?:0|[1-9]\d*)$/;function Hbe(t,e){var r=typeof t;return e=e??Nbe,!!e&&(r=="number"||r!="symbol"&&Qbe.test(t))&&t>-1&&t%1==0&&t<e}var CG=Hbe,jbe=9007199254740991;function zbe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=jbe}var vR=zbe,Gbe=Xu,Vbe=vR,Wbe=AA,Kbe="[object Arguments]",Ybe="[object Array]",Xbe="[object Boolean]",Zbe="[object Date]",Jbe="[object Error]",qbe="[object Function]",$be="[object Map]",e_e="[object Number]",t_e="[object Object]",r_e="[object RegExp]",n_e="[object Set]",i_e="[object String]",s_e="[object WeakMap]",a_e="[object ArrayBuffer]",o_e="[object DataView]",l_e="[object Float32Array]",A_e="[object Float64Array]",c_e="[object Int8Array]",u_e="[object Int16Array]",h_e="[object Int32Array]",d_e="[object Uint8Array]",f_e="[object Uint8ClampedArray]",p_e="[object Uint16Array]",m_e="[object Uint32Array]",Br={};Br[l_e]=Br[A_e]=Br[c_e]=Br[u_e]=Br[h_e]=Br[d_e]=Br[f_e]=Br[p_e]=Br[m_e]=!0;Br[Kbe]=Br[Ybe]=Br[a_e]=Br[Xbe]=Br[o_e]=Br[Zbe]=Br[Jbe]=Br[qbe]=Br[$be]=Br[e_e]=Br[t_e]=Br[r_e]=Br[n_e]=Br[i_e]=Br[s_e]=!1;function g_e(t){return Wbe(t)&&Vbe(t.length)&&!!Br[Gbe(t)]}var v_e=g_e;function y_e(t){return function(e){return t(e)}}var yR=y_e,pb={exports:{}};pb.exports;(function(t,e){var r=EG,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,a=s&&r.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(pb,pb.exports);var wR=pb.exports,w_e=v_e,b_e=yR,LD=wR,PD=LD&&LD.isTypedArray,__e=PD?b_e(PD):w_e,SG=__e,x_e=Tbe,E_e=TG,B_e=uo,M_e=gR,T_e=CG,C_e=SG,S_e=Object.prototype,I_e=S_e.hasOwnProperty;function R_e(t,e){var r=B_e(t),n=!r&&E_e(t),i=!r&&!n&&M_e(t),s=!r&&!n&&!i&&C_e(t),a=r||n||i||s,o=a?x_e(t.length,String):[],l=o.length;for(var A in t)(e||I_e.call(t,A))&&!(a&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||T_e(A,l)))&&o.push(A);return o}var IG=R_e,U_e=Object.prototype;function F_e(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||U_e;return t===r}var bR=F_e;function k_e(t,e){return function(r){return t(e(r))}}var RG=k_e,L_e=RG,P_e=L_e(Object.keys,Object),O_e=P_e,D_e=bR,N_e=O_e,Q_e=Object.prototype,H_e=Q_e.hasOwnProperty;function j_e(t){if(!D_e(t))return N_e(t);var e=[];for(var r in Object(t))H_e.call(t,r)&&r!="constructor"&&e.push(r);return e}var z_e=j_e;function G_e(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var tp=G_e,V_e=Xu,W_e=tp,K_e="[object AsyncFunction]",Y_e="[object Function]",X_e="[object GeneratorFunction]",Z_e="[object Proxy]";function J_e(t){if(!W_e(t))return!1;var e=V_e(t);return e==Y_e||e==X_e||e==K_e||e==Z_e}var UG=J_e,q_e=UG,$_e=vR;function exe(t){return t!=null&&$_e(t.length)&&!q_e(t)}var Q_=exe,txe=IG,rxe=z_e,nxe=Q_;function ixe(t){return nxe(t)?txe(t):rxe(t)}var I0=ixe,sxe=Bbe,axe=I0;function oxe(t,e){return t&&sxe(t,e,axe)}var FG=oxe;function lxe(t){return t}var kG=lxe,Axe=kG;function cxe(t){return typeof t=="function"?t:Axe}var uxe=cxe,hxe=FG,dxe=uxe;function fxe(t,e){return t&&hxe(t,dxe(e))}var _R=fxe,pxe=RG,mxe=pxe(Object.getPrototypeOf,Object),xR=mxe,gxe=Xu,vxe=xR,yxe=AA,wxe="[object Object]",bxe=Function.prototype,_xe=Object.prototype,LG=bxe.toString,xxe=_xe.hasOwnProperty,Exe=LG.call(Object);function Bxe(t){if(!yxe(t)||gxe(t)!=wxe)return!1;var e=vxe(t);if(e===null)return!0;var r=xxe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&LG.call(r)==Exe}var Mxe=Bxe;function Txe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var PG=Txe;function Cxe(){this.__data__=[],this.size=0}var Sxe=Cxe;function Ixe(t,e){return t===e||t!==t&&e!==e}var ER=Ixe,Rxe=ER;function Uxe(t,e){for(var r=t.length;r--;)if(Rxe(t[r][0],e))return r;return-1}var H_=Uxe,Fxe=H_,kxe=Array.prototype,Lxe=kxe.splice;function Pxe(t){var e=this.__data__,r=Fxe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Lxe.call(e,r,1),--this.size,!0}var Oxe=Pxe,Dxe=H_;function Nxe(t){var e=this.__data__,r=Dxe(e,t);return r<0?void 0:e[r][1]}var Qxe=Nxe,Hxe=H_;function jxe(t){return Hxe(this.__data__,t)>-1}var zxe=jxe,Gxe=H_;function Vxe(t,e){var r=this.__data__,n=Gxe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Wxe=Vxe,Kxe=Sxe,Yxe=Oxe,Xxe=Qxe,Zxe=zxe,Jxe=Wxe;function rp(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rp.prototype.clear=Kxe;rp.prototype.delete=Yxe;rp.prototype.get=Xxe;rp.prototype.has=Zxe;rp.prototype.set=Jxe;var j_=rp,qxe=j_;function $xe(){this.__data__=new qxe,this.size=0}var eEe=$xe;function tEe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var rEe=tEe;function nEe(t){return this.__data__.get(t)}var iEe=nEe;function sEe(t){return this.__data__.has(t)}var aEe=sEe,oEe=Al,lEe=oEe["__core-js_shared__"],AEe=lEe,AM=AEe,OD=function(){var t=/[^.]+$/.exec(AM&&AM.keys&&AM.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function cEe(t){return!!OD&&OD in t}var uEe=cEe,hEe=Function.prototype,dEe=hEe.toString;function fEe(t){if(t!=null){try{return dEe.call(t)}catch{}try{return t+""}catch{}}return""}var OG=fEe,pEe=UG,mEe=uEe,gEe=tp,vEe=OG,yEe=/[\\^$.*+?()[\]{}|]/g,wEe=/^\[object .+?Constructor\]$/,bEe=Function.prototype,_Ee=Object.prototype,xEe=bEe.toString,EEe=_Ee.hasOwnProperty,BEe=RegExp("^"+xEe.call(EEe).replace(yEe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function MEe(t){if(!gEe(t)||mEe(t))return!1;var e=pEe(t)?BEe:wEe;return e.test(vEe(t))}var TEe=MEe;function CEe(t,e){return t==null?void 0:t[e]}var SEe=CEe,IEe=TEe,REe=SEe;function UEe(t,e){var r=REe(t,e);return IEe(r)?r:void 0}var Zu=UEe,FEe=Zu,kEe=Al,LEe=FEe(kEe,"Map"),BR=LEe,PEe=Zu,OEe=PEe(Object,"create"),z_=OEe,DD=z_;function DEe(){this.__data__=DD?DD(null):{},this.size=0}var NEe=DEe;function QEe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var HEe=QEe,jEe=z_,zEe="__lodash_hash_undefined__",GEe=Object.prototype,VEe=GEe.hasOwnProperty;function WEe(t){var e=this.__data__;if(jEe){var r=e[t];return r===zEe?void 0:r}return VEe.call(e,t)?e[t]:void 0}var KEe=WEe,YEe=z_,XEe=Object.prototype,ZEe=XEe.hasOwnProperty;function JEe(t){var e=this.__data__;return YEe?e[t]!==void 0:ZEe.call(e,t)}var qEe=JEe,$Ee=z_,eBe="__lodash_hash_undefined__";function tBe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=$Ee&&e===void 0?eBe:e,this}var rBe=tBe,nBe=NEe,iBe=HEe,sBe=KEe,aBe=qEe,oBe=rBe;function np(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}np.prototype.clear=nBe;np.prototype.delete=iBe;np.prototype.get=sBe;np.prototype.has=aBe;np.prototype.set=oBe;var lBe=np,ND=lBe,ABe=j_,cBe=BR;function uBe(){this.size=0,this.__data__={hash:new ND,map:new(cBe||ABe),string:new ND}}var hBe=uBe;function dBe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var fBe=dBe,pBe=fBe;function mBe(t,e){var r=t.__data__;return pBe(e)?r[typeof e=="string"?"string":"hash"]:r.map}var G_=mBe,gBe=G_;function vBe(t){var e=gBe(this,t).delete(t);return this.size-=e?1:0,e}var yBe=vBe,wBe=G_;function bBe(t){return wBe(this,t).get(t)}var _Be=bBe,xBe=G_;function EBe(t){return xBe(this,t).has(t)}var BBe=EBe,MBe=G_;function TBe(t,e){var r=MBe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var CBe=TBe,SBe=hBe,IBe=yBe,RBe=_Be,UBe=BBe,FBe=CBe;function ip(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ip.prototype.clear=SBe;ip.prototype.delete=IBe;ip.prototype.get=RBe;ip.prototype.has=UBe;ip.prototype.set=FBe;var MR=ip,kBe=j_,LBe=BR,PBe=MR,OBe=200;function DBe(t,e){var r=this.__data__;if(r instanceof kBe){var n=r.__data__;if(!LBe||n.length<OBe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new PBe(n)}return r.set(t,e),this.size=r.size,this}var NBe=DBe,QBe=j_,HBe=eEe,jBe=rEe,zBe=iEe,GBe=aEe,VBe=NBe;function sp(t){var e=this.__data__=new QBe(t);this.size=e.size}sp.prototype.clear=HBe;sp.prototype.delete=jBe;sp.prototype.get=zBe;sp.prototype.has=GBe;sp.prototype.set=VBe;var TR=sp,WBe="__lodash_hash_undefined__";function KBe(t){return this.__data__.set(t,WBe),this}var YBe=KBe;function XBe(t){return this.__data__.has(t)}var ZBe=XBe,JBe=MR,qBe=YBe,$Be=ZBe;function mb(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new JBe;++e<r;)this.add(t[e])}mb.prototype.add=mb.prototype.push=qBe;mb.prototype.has=$Be;var eMe=mb;function tMe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var rMe=tMe;function nMe(t,e){return t.has(e)}var iMe=nMe,sMe=eMe,aMe=rMe,oMe=iMe,lMe=1,AMe=2;function cMe(t,e,r,n,i,s){var a=r&lMe,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var A=s.get(t),c=s.get(e);if(A&&c)return A==e&&c==t;var u=-1,h=!0,d=r&AMe?new sMe:void 0;for(s.set(t,e),s.set(e,t);++u<o;){var f=t[u],m=e[u];if(n)var g=a?n(m,f,u,e,t,s):n(f,m,u,t,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!aMe(e,function(p,v){if(!oMe(d,v)&&(f===p||i(f,p,r,n,s)))return d.push(v)})){h=!1;break}}else if(!(f===m||i(f,m,r,n,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var DG=cMe,uMe=Al,hMe=uMe.Uint8Array,NG=hMe;function dMe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var fMe=dMe;function pMe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var mMe=pMe,QD=S0,HD=NG,gMe=ER,vMe=DG,yMe=fMe,wMe=mMe,bMe=1,_Me=2,xMe="[object Boolean]",EMe="[object Date]",BMe="[object Error]",MMe="[object Map]",TMe="[object Number]",CMe="[object RegExp]",SMe="[object Set]",IMe="[object String]",RMe="[object Symbol]",UMe="[object ArrayBuffer]",FMe="[object DataView]",jD=QD?QD.prototype:void 0,cM=jD?jD.valueOf:void 0;function kMe(t,e,r,n,i,s,a){switch(r){case FMe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case UMe:return!(t.byteLength!=e.byteLength||!s(new HD(t),new HD(e)));case xMe:case EMe:case TMe:return gMe(+t,+e);case BMe:return t.name==e.name&&t.message==e.message;case CMe:case IMe:return t==e+"";case MMe:var o=yMe;case SMe:var l=n&bMe;if(o||(o=wMe),t.size!=e.size&&!l)return!1;var A=a.get(t);if(A)return A==e;n|=_Me,a.set(t,e);var c=vMe(o(t),o(e),n,i,s,a);return a.delete(t),c;case RMe:if(cM)return cM.call(t)==cM.call(e)}return!1}var LMe=kMe;function PMe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var QG=PMe,OMe=QG,DMe=uo;function NMe(t,e,r){var n=e(t);return DMe(t)?n:OMe(n,r(t))}var HG=NMe;function QMe(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}var HMe=QMe;function jMe(){return[]}var jG=jMe,zMe=HMe,GMe=jG,VMe=Object.prototype,WMe=VMe.propertyIsEnumerable,zD=Object.getOwnPropertySymbols,KMe=zD?function(t){return t==null?[]:(t=Object(t),zMe(zD(t),function(e){return WMe.call(t,e)}))}:GMe,CR=KMe,YMe=HG,XMe=CR,ZMe=I0;function JMe(t){return YMe(t,ZMe,XMe)}var zG=JMe,GD=zG,qMe=1,$Me=Object.prototype,eTe=$Me.hasOwnProperty;function tTe(t,e,r,n,i,s){var a=r&qMe,o=GD(t),l=o.length,A=GD(e),c=A.length;if(l!=c&&!a)return!1;for(var u=l;u--;){var h=o[u];if(!(a?h in e:eTe.call(e,h)))return!1}var d=s.get(t),f=s.get(e);if(d&&f)return d==e&&f==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=a;++u<l;){h=o[u];var p=t[h],v=e[h];if(n)var y=a?n(v,p,h,e,t,s):n(p,v,h,t,e,s);if(!(y===void 0?p===v||i(p,v,r,n,s):y)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var _=t.constructor,E=e.constructor;_!=E&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof E=="function"&&E instanceof E)&&(m=!1)}return s.delete(t),s.delete(e),m}var rTe=tTe,nTe=Zu,iTe=Al,sTe=nTe(iTe,"DataView"),aTe=sTe,oTe=Zu,lTe=Al,ATe=oTe(lTe,"Promise"),cTe=ATe,uTe=Zu,hTe=Al,dTe=uTe(hTe,"Set"),fTe=dTe,pTe=Zu,mTe=Al,gTe=pTe(mTe,"WeakMap"),vTe=gTe,US=aTe,FS=BR,kS=cTe,LS=fTe,PS=vTe,GG=Xu,ap=OG,VD="[object Map]",yTe="[object Object]",WD="[object Promise]",KD="[object Set]",YD="[object WeakMap]",XD="[object DataView]",wTe=ap(US),bTe=ap(FS),_Te=ap(kS),xTe=ap(LS),ETe=ap(PS),ru=GG;(US&&ru(new US(new ArrayBuffer(1)))!=XD||FS&&ru(new FS)!=VD||kS&&ru(kS.resolve())!=WD||LS&&ru(new LS)!=KD||PS&&ru(new PS)!=YD)&&(ru=function(t){var e=GG(t),r=e==yTe?t.constructor:void 0,n=r?ap(r):"";if(n)switch(n){case wTe:return XD;case bTe:return VD;case _Te:return WD;case xTe:return KD;case ETe:return YD}return e});var V_=ru,uM=TR,BTe=DG,MTe=LMe,TTe=rTe,ZD=V_,JD=uo,qD=gR,CTe=SG,STe=1,$D="[object Arguments]",eN="[object Array]",jy="[object Object]",ITe=Object.prototype,tN=ITe.hasOwnProperty;function RTe(t,e,r,n,i,s){var a=JD(t),o=JD(e),l=a?eN:ZD(t),A=o?eN:ZD(e);l=l==$D?jy:l,A=A==$D?jy:A;var c=l==jy,u=A==jy,h=l==A;if(h&&qD(t)){if(!qD(e))return!1;a=!0,c=!1}if(h&&!c)return s||(s=new uM),a||CTe(t)?BTe(t,e,r,n,i,s):MTe(t,e,l,r,n,i,s);if(!(r&STe)){var d=c&&tN.call(t,"__wrapped__"),f=u&&tN.call(e,"__wrapped__");if(d||f){var m=d?t.value():t,g=f?e.value():e;return s||(s=new uM),i(m,g,r,n,s)}}return h?(s||(s=new uM),TTe(t,e,r,n,i,s)):!1}var UTe=RTe,FTe=UTe,rN=AA;function VG(t,e,r,n,i){return t===e?!0:t==null||e==null||!rN(t)&&!rN(e)?t!==t&&e!==e:FTe(t,e,r,n,VG,i)}var WG=VG,kTe=TR,LTe=WG,PTe=1,OTe=2;function DTe(t,e,r,n){var i=r.length,s=i,a=!n;if(t==null)return!s;for(t=Object(t);i--;){var o=r[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=r[i];var l=o[0],A=t[l],c=o[1];if(a&&o[2]){if(A===void 0&&!(l in t))return!1}else{var u=new kTe;if(n)var h=n(A,c,l,t,e,u);if(!(h===void 0?LTe(c,A,PTe|OTe,n,u):h))return!1}}return!0}var NTe=DTe,QTe=tp;function HTe(t){return t===t&&!QTe(t)}var KG=HTe,jTe=KG,zTe=I0;function GTe(t){for(var e=zTe(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,jTe(i)]}return e}var VTe=GTe;function WTe(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var YG=WTe,KTe=NTe,YTe=VTe,XTe=YG;function ZTe(t){var e=YTe(t);return e.length==1&&e[0][2]?XTe(e[0][0],e[0][1]):function(r){return r===t||KTe(r,t,e)}}var JTe=ZTe,qTe=Xu,$Te=AA,eCe="[object Symbol]";function tCe(t){return typeof t=="symbol"||$Te(t)&&qTe(t)==eCe}var SR=tCe,rCe=uo,nCe=SR,iCe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sCe=/^\w*$/;function aCe(t,e){if(rCe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||nCe(t)?!0:sCe.test(t)||!iCe.test(t)||e!=null&&t in Object(e)}var IR=aCe,XG=MR,oCe="Expected a function";function RR(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(oCe);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(RR.Cache||XG),r}RR.Cache=XG;var lCe=RR,ACe=lCe,cCe=500;function uCe(t){var e=ACe(t,function(n){return r.size===cCe&&r.clear(),n}),r=e.cache;return e}var hCe=uCe,dCe=hCe,fCe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pCe=/\\(\\)?/g,mCe=dCe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(fCe,function(r,n,i,s){e.push(i?s.replace(pCe,"$1"):n||r)}),e}),gCe=mCe,nN=S0,vCe=PG,yCe=uo,wCe=SR,bCe=1/0,iN=nN?nN.prototype:void 0,sN=iN?iN.toString:void 0;function ZG(t){if(typeof t=="string")return t;if(yCe(t))return vCe(t,ZG)+"";if(wCe(t))return sN?sN.call(t):"";var e=t+"";return e=="0"&&1/t==-bCe?"-0":e}var _Ce=ZG,xCe=_Ce;function ECe(t){return t==null?"":xCe(t)}var BCe=ECe,MCe=uo,TCe=IR,CCe=gCe,SCe=BCe;function ICe(t,e){return MCe(t)?t:TCe(t,e)?[t]:CCe(SCe(t))}var JG=ICe,RCe=SR,UCe=1/0;function FCe(t){if(typeof t=="string"||RCe(t))return t;var e=t+"";return e=="0"&&1/t==-UCe?"-0":e}var W_=FCe,kCe=JG,LCe=W_;function PCe(t,e){e=kCe(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[LCe(e[r++])];return r&&r==n?t:void 0}var qG=PCe,OCe=qG;function DCe(t,e,r){var n=t==null?void 0:OCe(t,e);return n===void 0?r:n}var NCe=DCe;function QCe(t,e){return t!=null&&e in Object(t)}var HCe=QCe,jCe=JG,zCe=TG,GCe=uo,VCe=CG,WCe=vR,KCe=W_;function YCe(t,e,r){e=jCe(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var a=KCe(e[n]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&WCe(i)&&VCe(a,i)&&(GCe(t)||zCe(t)))}var XCe=YCe,ZCe=HCe,JCe=XCe;function qCe(t,e){return t!=null&&JCe(t,e,ZCe)}var $Ce=qCe,eSe=WG,tSe=NCe,rSe=$Ce,nSe=IR,iSe=KG,sSe=YG,aSe=W_,oSe=1,lSe=2;function ASe(t,e){return nSe(t)&&iSe(e)?sSe(aSe(t),e):function(r){var n=tSe(r,t);return n===void 0&&n===e?rSe(r,t):eSe(e,n,oSe|lSe)}}var cSe=ASe;function uSe(t){return function(e){return e==null?void 0:e[t]}}var hSe=uSe,dSe=qG;function fSe(t){return function(e){return dSe(e,t)}}var pSe=fSe,mSe=hSe,gSe=pSe,vSe=IR,ySe=W_;function wSe(t){return vSe(t)?mSe(ySe(t)):gSe(t)}var bSe=wSe,_Se=JTe,xSe=cSe,ESe=kG,BSe=uo,MSe=bSe;function TSe(t){return typeof t=="function"?t:t==null?ESe:typeof t=="object"?BSe(t)?xSe(t[0],t[1]):_Se(t):MSe(t)}var CSe=TSe,SSe=Q_;function ISe(t,e){return function(r,n){if(r==null)return r;if(!SSe(r))return t(r,n);for(var i=r.length,s=e?i:-1,a=Object(r);(e?s--:++s<i)&&n(a[s],s,a)!==!1;);return r}}var RSe=ISe,USe=FG,FSe=RSe,kSe=FSe(USe),LSe=kSe,PSe=LSe,OSe=Q_;function DSe(t,e){var r=-1,n=OSe(t)?Array(t.length):[];return PSe(t,function(i,s,a){n[++r]=e(i,s,a)}),n}var NSe=DSe,QSe=PG,HSe=CSe,jSe=NSe,zSe=uo;function GSe(t,e){var r=zSe(t)?QSe:jSe;return r(t,HSe(e))}var VSe=GSe;Object.defineProperty(C0,"__esModule",{value:!0});C0.flattenNames=void 0;var WSe=wbe,KSe=K_(WSe),YSe=_R,XSe=K_(YSe),ZSe=Mxe,JSe=K_(ZSe),qSe=VSe,$Se=K_(qSe);function K_(t){return t&&t.__esModule?t:{default:t}}var e2e=C0.flattenNames=function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[];return(0,$Se.default)(e,function(n){Array.isArray(n)?t(n).map(function(i){return r.push(i)}):(0,JSe.default)(n)?(0,XSe.default)(n,function(i,s){i===!0&&r.push(s),r.push(s+"-"+i)}):(0,KSe.default)(n)&&r.push(n)}),r};C0.default=e2e;var R0={};function t2e(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var r2e=t2e,n2e=Zu,i2e=function(){try{var t=n2e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),s2e=i2e,aN=s2e;function a2e(t,e,r){e=="__proto__"&&aN?aN(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var $G=a2e,o2e=$G,l2e=ER,A2e=Object.prototype,c2e=A2e.hasOwnProperty;function u2e(t,e,r){var n=t[e];(!(c2e.call(t,e)&&l2e(n,r))||r===void 0&&!(e in t))&&o2e(t,e,r)}var e9=u2e,h2e=e9,d2e=$G;function f2e(t,e,r,n){var i=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=n?n(r[o],t[o],o,r,t):void 0;l===void 0&&(l=t[o]),i?d2e(r,o,l):h2e(r,o,l)}return r}var Y_=f2e,p2e=Y_,m2e=I0;function g2e(t,e){return t&&p2e(e,m2e(e),t)}var v2e=g2e;function y2e(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var w2e=y2e,b2e=tp,_2e=bR,x2e=w2e,E2e=Object.prototype,B2e=E2e.hasOwnProperty;function M2e(t){if(!b2e(t))return x2e(t);var e=_2e(t),r=[];for(var n in t)n=="constructor"&&(e||!B2e.call(t,n))||r.push(n);return r}var T2e=M2e,C2e=IG,S2e=T2e,I2e=Q_;function R2e(t){return I2e(t)?C2e(t,!0):S2e(t)}var UR=R2e,U2e=Y_,F2e=UR;function k2e(t,e){return t&&U2e(e,F2e(e),t)}var L2e=k2e,gb={exports:{}};gb.exports;(function(t,e){var r=Al,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,a=s?r.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(A,c){if(c)return A.slice();var u=A.length,h=o?o(u):new A.constructor(u);return A.copy(h),h}t.exports=l})(gb,gb.exports);var P2e=gb.exports;function O2e(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var D2e=O2e,N2e=Y_,Q2e=CR;function H2e(t,e){return N2e(t,Q2e(t),e)}var j2e=H2e,z2e=QG,G2e=xR,V2e=CR,W2e=jG,K2e=Object.getOwnPropertySymbols,Y2e=K2e?function(t){for(var e=[];t;)z2e(e,V2e(t)),t=G2e(t);return e}:W2e,t9=Y2e,X2e=Y_,Z2e=t9;function J2e(t,e){return X2e(t,Z2e(t),e)}var q2e=J2e,$2e=HG,eIe=t9,tIe=UR;function rIe(t){return $2e(t,tIe,eIe)}var nIe=rIe,iIe=Object.prototype,sIe=iIe.hasOwnProperty;function aIe(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&sIe.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var oIe=aIe,oN=NG;function lIe(t){var e=new t.constructor(t.byteLength);return new oN(e).set(new oN(t)),e}var FR=lIe,AIe=FR;function cIe(t,e){var r=e?AIe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var uIe=cIe,hIe=/\w*$/;function dIe(t){var e=new t.constructor(t.source,hIe.exec(t));return e.lastIndex=t.lastIndex,e}var fIe=dIe,lN=S0,AN=lN?lN.prototype:void 0,cN=AN?AN.valueOf:void 0;function pIe(t){return cN?Object(cN.call(t)):{}}var mIe=pIe,gIe=FR;function vIe(t,e){var r=e?gIe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var yIe=vIe,wIe=FR,bIe=uIe,_Ie=fIe,xIe=mIe,EIe=yIe,BIe="[object Boolean]",MIe="[object Date]",TIe="[object Map]",CIe="[object Number]",SIe="[object RegExp]",IIe="[object Set]",RIe="[object String]",UIe="[object Symbol]",FIe="[object ArrayBuffer]",kIe="[object DataView]",LIe="[object Float32Array]",PIe="[object Float64Array]",OIe="[object Int8Array]",DIe="[object Int16Array]",NIe="[object Int32Array]",QIe="[object Uint8Array]",HIe="[object Uint8ClampedArray]",jIe="[object Uint16Array]",zIe="[object Uint32Array]";function GIe(t,e,r){var n=t.constructor;switch(e){case FIe:return wIe(t);case BIe:case MIe:return new n(+t);case kIe:return bIe(t,r);case LIe:case PIe:case OIe:case DIe:case NIe:case QIe:case HIe:case jIe:case zIe:return EIe(t,r);case TIe:return new n;case CIe:case RIe:return new n(t);case SIe:return _Ie(t);case IIe:return new n;case UIe:return xIe(t)}}var VIe=GIe,WIe=tp,uN=Object.create,KIe=function(){function t(){}return function(e){if(!WIe(e))return{};if(uN)return uN(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),YIe=KIe,XIe=YIe,ZIe=xR,JIe=bR;function qIe(t){return typeof t.constructor=="function"&&!JIe(t)?XIe(ZIe(t)):{}}var $Ie=qIe,eRe=V_,tRe=AA,rRe="[object Map]";function nRe(t){return tRe(t)&&eRe(t)==rRe}var iRe=nRe,sRe=iRe,aRe=yR,hN=wR,dN=hN&&hN.isMap,oRe=dN?aRe(dN):sRe,lRe=oRe,ARe=V_,cRe=AA,uRe="[object Set]";function hRe(t){return cRe(t)&&ARe(t)==uRe}var dRe=hRe,fRe=dRe,pRe=yR,fN=wR,pN=fN&&fN.isSet,mRe=pN?pRe(pN):fRe,gRe=mRe,vRe=TR,yRe=r2e,wRe=e9,bRe=v2e,_Re=L2e,xRe=P2e,ERe=D2e,BRe=j2e,MRe=q2e,TRe=zG,CRe=nIe,SRe=V_,IRe=oIe,RRe=VIe,URe=$Ie,FRe=uo,kRe=gR,LRe=lRe,PRe=tp,ORe=gRe,DRe=I0,NRe=UR,QRe=1,HRe=2,jRe=4,r9="[object Arguments]",zRe="[object Array]",GRe="[object Boolean]",VRe="[object Date]",WRe="[object Error]",n9="[object Function]",KRe="[object GeneratorFunction]",YRe="[object Map]",XRe="[object Number]",i9="[object Object]",ZRe="[object RegExp]",JRe="[object Set]",qRe="[object String]",$Re="[object Symbol]",eUe="[object WeakMap]",tUe="[object ArrayBuffer]",rUe="[object DataView]",nUe="[object Float32Array]",iUe="[object Float64Array]",sUe="[object Int8Array]",aUe="[object Int16Array]",oUe="[object Int32Array]",lUe="[object Uint8Array]",AUe="[object Uint8ClampedArray]",cUe="[object Uint16Array]",uUe="[object Uint32Array]",mr={};mr[r9]=mr[zRe]=mr[tUe]=mr[rUe]=mr[GRe]=mr[VRe]=mr[nUe]=mr[iUe]=mr[sUe]=mr[aUe]=mr[oUe]=mr[YRe]=mr[XRe]=mr[i9]=mr[ZRe]=mr[JRe]=mr[qRe]=mr[$Re]=mr[lUe]=mr[AUe]=mr[cUe]=mr[uUe]=!0;mr[WRe]=mr[n9]=mr[eUe]=!1;function Qw(t,e,r,n,i,s){var a,o=e&QRe,l=e&HRe,A=e&jRe;if(r&&(a=i?r(t,n,i,s):r(t)),a!==void 0)return a;if(!PRe(t))return t;var c=FRe(t);if(c){if(a=IRe(t),!o)return ERe(t,a)}else{var u=SRe(t),h=u==n9||u==KRe;if(kRe(t))return xRe(t,o);if(u==i9||u==r9||h&&!i){if(a=l||h?{}:URe(t),!o)return l?MRe(t,_Re(a,t)):BRe(t,bRe(a,t))}else{if(!mr[u])return i?t:{};a=RRe(t,u,o)}}s||(s=new vRe);var d=s.get(t);if(d)return d;s.set(t,a),ORe(t)?t.forEach(function(g){a.add(Qw(g,e,r,g,t,s))}):LRe(t)&&t.forEach(function(g,p){a.set(p,Qw(g,e,r,p,t,s))});var f=A?l?CRe:TRe:l?NRe:DRe,m=c?void 0:f(t);return yRe(m||t,function(g,p){m&&(p=g,g=t[p]),wRe(a,p,Qw(g,e,r,p,t,s))}),a}var hUe=Qw,dUe=hUe,fUe=1,pUe=4;function mUe(t){return dUe(t,fUe|pUe)}var gUe=mUe;Object.defineProperty(R0,"__esModule",{value:!0});R0.mergeClasses=void 0;var vUe=_R,yUe=s9(vUe),wUe=gUe,bUe=s9(wUe),_Ue=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function s9(t){return t&&t.__esModule?t:{default:t}}var xUe=R0.mergeClasses=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=t.default&&(0,bUe.default)(t.default)||{};return e.map(function(n){var i=t[n];return i&&(0,yUe.default)(i,function(s,a){r[a]||(r[a]={}),r[a]=_Ue({},r[a],i[a])}),n}),r};R0.default=xUe;var U0={};Object.defineProperty(U0,"__esModule",{value:!0});U0.autoprefix=void 0;var EUe=_R,mN=MUe(EUe),BUe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function MUe(t){return t&&t.__esModule?t:{default:t}}var TUe={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var e=t&&t.split(" ");return{position:"absolute",top:e&&e[0],right:e&&e[1],bottom:e&&e[2],left:e&&e[3]}},extend:function(t,e){var r=e[t];return r||{extend:t}}},CUe=U0.autoprefix=function(t){var e={};return(0,mN.default)(t,function(r,n){var i={};(0,mN.default)(r,function(s,a){var o=TUe[a];o?i=BUe({},i,o(s)):i[a]=s}),e[n]=i}),e};U0.default=CUe;var F0={};Object.defineProperty(F0,"__esModule",{value:!0});F0.hover=void 0;var SUe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IUe=_e,hM=RUe(IUe);function RUe(t){return t&&t.__esModule?t:{default:t}}function UUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gN(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function FUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var kUe=F0.hover=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){FUe(n,r);function n(){var i,s,a,o;UUe(this,n);for(var l=arguments.length,A=Array(l),c=0;c<l;c++)A[c]=arguments[c];return o=(s=(a=gN(this,(i=n.__proto__||Object.getPrototypeOf(n)).call.apply(i,[this].concat(A))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return hM.default.createElement(e,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},hM.default.createElement(t,SUe({},a.props,a.state)))},s),gN(a,o)}return n}(hM.default.Component)};F0.default=kUe;var k0={};Object.defineProperty(k0,"__esModule",{value:!0});k0.active=void 0;var LUe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PUe=_e,dM=OUe(PUe);function OUe(t){return t&&t.__esModule?t:{default:t}}function DUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vN(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function NUe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var QUe=k0.active=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){NUe(n,r);function n(){var i,s,a,o;DUe(this,n);for(var l=arguments.length,A=Array(l),c=0;c<l;c++)A[c]=arguments[c];return o=(s=(a=vN(this,(i=n.__proto__||Object.getPrototypeOf(n)).call.apply(i,[this].concat(A))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return dM.default.createElement(e,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},dM.default.createElement(t,LUe({},a.props,a.state)))},s),vN(a,o)}return n}(dM.default.Component)};k0.default=QUe;var kR={};Object.defineProperty(kR,"__esModule",{value:!0});var HUe=function(t,e){var r={},n=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;r[i]=s};return t===0&&n("first-child"),t===e-1&&n("last-child"),(t===0||t%2===0)&&n("even"),Math.abs(t%2)===1&&n("odd"),n("nth-child",t),r};kR.default=HUe;Object.defineProperty(oa,"__esModule",{value:!0});oa.ReactCSS=oa.loop=oa.handleActive=LR=oa.handleHover=oa.hover=void 0;var jUe=C0,zUe=op(jUe),GUe=R0,VUe=op(GUe),WUe=U0,KUe=op(WUe),YUe=F0,a9=op(YUe),XUe=k0,ZUe=op(XUe),JUe=kR,qUe=op(JUe);function op(t){return t&&t.__esModule?t:{default:t}}oa.hover=a9.default;var LR=oa.handleHover=a9.default;oa.handleActive=ZUe.default;oa.loop=qUe.default;var $Ue=oa.ReactCSS=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var i=(0,zUe.default)(r),s=(0,VUe.default)(t,i);return(0,KUe.default)(s)},gt=oa.default=$Ue,e3e=function(t,e,r,n,i){var s=i.clientWidth,a=i.clientHeight,o=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,l=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,A=o-(i.getBoundingClientRect().left+window.pageXOffset),c=l-(i.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var u=void 0;if(c<0?u=0:c>a?u=1:u=Math.round(c*100/a)/100,e.a!==u)return{h:e.h,s:e.s,l:e.l,a:u,source:"rgb"}}else{var h=void 0;if(A<0?h=0:A>s?h=1:h=Math.round(A*100/s)/100,n!==h)return{h:e.h,s:e.s,l:e.l,a:h,source:"rgb"}}return null},fM={},t3e=function(t,e,r,n){if(typeof document>"u"&&!n)return null;var i=n?new n:document.createElement("canvas");i.width=r*2,i.height=r*2;var s=i.getContext("2d");return s?(s.fillStyle=t,s.fillRect(0,0,i.width,i.height),s.fillStyle=e,s.fillRect(0,0,r,r),s.translate(r,r),s.fillRect(0,0,r,r),i.toDataURL()):null},r3e=function(t,e,r,n){var i=t+"-"+e+"-"+r+(n?"-server":"");if(fM[i])return fM[i];var s=t3e(t,e,r,n);return fM[i]=s,s},yN=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lp=function(t){var e=t.white,r=t.grey,n=t.size,i=t.renderers,s=t.borderRadius,a=t.boxShadow,o=t.children,l=gt({default:{grid:{borderRadius:s,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+r3e(e,r,n,i.canvas)+") center left"}}});return _e.isValidElement(o)?X.cloneElement(o,yN({},o.props,{style:yN({},o.props.style,l.grid)})):X.createElement("div",{style:l.grid})};lp.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var n3e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i3e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function s3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wN(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function a3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var PR=function(t){a3e(e,t);function e(){var r,n,i,s;s3e(this,e);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return s=(n=(i=wN(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(o))),i),i.handleChange=function(A){var c=e3e(A,i.props.hsl,i.props.direction,i.props.a,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,A)},i.handleMouseDown=function(A){i.handleChange(A),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleChange),window.removeEventListener("mouseup",i.handleMouseUp)},n),wN(i,s)}return i3e(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var r=this,n=this.props.rgb,i=gt({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+n.r+","+n.g+","+n.b+`, 0) 0%,
           rgba(`+n.r+","+n.g+","+n.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:n.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+n.r+","+n.g+","+n.b+`, 0) 0%,
           rgba(`+n.r+","+n.g+","+n.b+", 1) 100%)"},pointer:{left:0,top:n.a*100+"%"}},overwrite:n3e({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return X.createElement("div",{style:i.alpha},X.createElement("div",{style:i.checkboard},X.createElement(lp,{renderers:this.props.renderers})),X.createElement("div",{style:i.gradient}),X.createElement("div",{style:i.container,ref:function(s){return r.container=s},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},X.createElement("div",{style:i.pointer},this.props.pointer?X.createElement(this.props.pointer,this.props):X.createElement("div",{style:i.slider}))))}}]),e}(_e.PureComponent||_e.Component),o3e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function l3e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c3e(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function u3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h3e=1,o9=38,d3e=40,f3e=[o9,d3e],p3e=function(t){return f3e.indexOf(t)>-1},m3e=function(t){return Number(String(t).replace(/%/g,""))},g3e=1,Ht=function(t){u3e(e,t);function e(r){A3e(this,e);var n=c3e(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(i){n.setUpdatedValue(i.target.value,i)},n.handleKeyDown=function(i){var s=m3e(i.target.value);if(!isNaN(s)&&p3e(i.keyCode)){var a=n.getArrowOffset(),o=i.keyCode===o9?s+a:s-a;n.setUpdatedValue(o,i)}},n.handleDrag=function(i){if(n.props.dragLabel){var s=Math.round(n.props.value+i.movementX);s>=0&&s<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(s),i)}},n.handleMouseDown=function(i){n.props.dragLabel&&(i.preventDefault(),n.handleDrag(i),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+g3e++,n}return o3e(e,[{key:"componentDidUpdate",value:function(r,n){this.props.value!==this.state.value&&(r.value!==this.props.value||n.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(r){return l3e({},this.props.label,r)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||h3e}},{key:"setUpdatedValue",value:function(r,n){var i=this.props.label?this.getValueObjectWithLabel(r):r;this.props.onChange&&this.props.onChange(i,n),this.setState({value:r})}},{key:"render",value:function(){var r=this,n=gt({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return X.createElement("div",{style:n.wrap},X.createElement("input",{id:this.inputId,style:n.input,ref:function(i){return r.input=i},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?X.createElement("label",{htmlFor:this.inputId,style:n.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(_e.PureComponent||_e.Component),v3e=function(t,e,r,n){var i=n.clientWidth,s=n.clientHeight,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,o=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),A=o-(n.getBoundingClientRect().top+window.pageYOffset);if(e==="vertical"){var c=void 0;if(A<0)c=359;else if(A>s)c=0;else{var u=-(A*100/s)+100;c=360*u/100}if(r.h!==c)return{h:c,s:r.s,l:r.l,a:r.a,source:"hsl"}}else{var h=void 0;if(l<0)h=0;else if(l>i)h=359;else{var d=l*100/i;h=360*d/100}if(r.h!==h)return{h,s:r.s,l:r.l,a:r.a,source:"hsl"}}return null},y3e=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function w3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bN(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function b3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ap=function(t){b3e(e,t);function e(){var r,n,i,s;w3e(this,e);for(var a=arguments.length,o=Array(a),l=0;l<a;l++)o[l]=arguments[l];return s=(n=(i=bN(this,(r=e.__proto__||Object.getPrototypeOf(e)).call.apply(r,[this].concat(o))),i),i.handleChange=function(A){var c=v3e(A,i.props.direction,i.props.hsl,i.container);c&&typeof i.props.onChange=="function"&&i.props.onChange(c,A)},i.handleMouseDown=function(A){i.handleChange(A),window.addEventListener("mousemove",i.handleChange),window.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},n),bN(i,s)}return y3e(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,n=this.props.direction,i=n===void 0?"horizontal":n,s=gt({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:i==="vertical"});return X.createElement("div",{style:s.hue},X.createElement("div",{className:"hue-"+i,style:s.container,ref:function(a){return r.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},X.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),X.createElement("div",{style:s.pointer},this.props.pointer?X.createElement(this.props.pointer,this.props):X.createElement("div",{style:s.slider}))))}}]),e}(_e.PureComponent||_e.Component),l9={exports:{}},_3e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",x3e=_3e,E3e=x3e;function A9(){}function c9(){}c9.resetWarningCache=A9;var B3e=function(){function t(n,i,s,a,o,l){if(l!==E3e){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:c9,resetWarningCache:A9};return r.PropTypes=r,r};l9.exports=B3e();var M3e=l9.exports;const Ve=iA(M3e);function T3e(){this.__data__=[],this.size=0}function L0(t,e){return t===e||t!==t&&e!==e}function X_(t,e){for(var r=t.length;r--;)if(L0(t[r][0],e))return r;return-1}var C3e=Array.prototype,S3e=C3e.splice;function I3e(t){var e=this.__data__,r=X_(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():S3e.call(e,r,1),--this.size,!0}function R3e(t){var e=this.__data__,r=X_(e,t);return r<0?void 0:e[r][1]}function U3e(t){return X_(this.__data__,t)>-1}function F3e(t,e){var r=this.__data__,n=X_(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function cA(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}cA.prototype.clear=T3e;cA.prototype.delete=I3e;cA.prototype.get=R3e;cA.prototype.has=U3e;cA.prototype.set=F3e;function k3e(){this.__data__=new cA,this.size=0}function L3e(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function P3e(t){return this.__data__.get(t)}function O3e(t){return this.__data__.has(t)}var D3e=typeof global=="object"&&global&&global.Object===Object&&global;const u9=D3e;var N3e=typeof self=="object"&&self&&self.Object===Object&&self,Q3e=u9||N3e||Function("return this")();const ho=Q3e;var H3e=ho.Symbol;const _c=H3e;var h9=Object.prototype,j3e=h9.hasOwnProperty,z3e=h9.toString,cm=_c?_c.toStringTag:void 0;function G3e(t){var e=j3e.call(t,cm),r=t[cm];try{t[cm]=void 0;var n=!0}catch{}var i=z3e.call(t);return n&&(e?t[cm]=r:delete t[cm]),i}var V3e=Object.prototype,W3e=V3e.toString;function K3e(t){return W3e.call(t)}var Y3e="[object Null]",X3e="[object Undefined]",_N=_c?_c.toStringTag:void 0;function Ju(t){return t==null?t===void 0?X3e:Y3e:_N&&_N in Object(t)?G3e(t):K3e(t)}function _a(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Z3e="[object AsyncFunction]",J3e="[object Function]",q3e="[object GeneratorFunction]",$3e="[object Proxy]";function OR(t){if(!_a(t))return!1;var e=Ju(t);return e==J3e||e==q3e||e==Z3e||e==$3e}var eFe=ho["__core-js_shared__"];const pM=eFe;var xN=function(){var t=/[^.]+$/.exec(pM&&pM.keys&&pM.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function tFe(t){return!!xN&&xN in t}var rFe=Function.prototype,nFe=rFe.toString;function qu(t){if(t!=null){try{return nFe.call(t)}catch{}try{return t+""}catch{}}return""}var iFe=/[\\^$.*+?()[\]{}|]/g,sFe=/^\[object .+?Constructor\]$/,aFe=Function.prototype,oFe=Object.prototype,lFe=aFe.toString,AFe=oFe.hasOwnProperty,cFe=RegExp("^"+lFe.call(AFe).replace(iFe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uFe(t){if(!_a(t)||tFe(t))return!1;var e=OR(t)?cFe:sFe;return e.test(qu(t))}function hFe(t,e){return t==null?void 0:t[e]}function $u(t,e){var r=hFe(t,e);return uFe(r)?r:void 0}var dFe=$u(ho,"Map");const $g=dFe;var fFe=$u(Object,"create");const e0=fFe;function pFe(){this.__data__=e0?e0(null):{},this.size=0}function mFe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var gFe="__lodash_hash_undefined__",vFe=Object.prototype,yFe=vFe.hasOwnProperty;function wFe(t){var e=this.__data__;if(e0){var r=e[t];return r===gFe?void 0:r}return yFe.call(e,t)?e[t]:void 0}var bFe=Object.prototype,_Fe=bFe.hasOwnProperty;function xFe(t){var e=this.__data__;return e0?e[t]!==void 0:_Fe.call(e,t)}var EFe="__lodash_hash_undefined__";function BFe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=e0&&e===void 0?EFe:e,this}function Nu(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Nu.prototype.clear=pFe;Nu.prototype.delete=mFe;Nu.prototype.get=wFe;Nu.prototype.has=xFe;Nu.prototype.set=BFe;function MFe(){this.size=0,this.__data__={hash:new Nu,map:new($g||cA),string:new Nu}}function TFe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Z_(t,e){var r=t.__data__;return TFe(e)?r[typeof e=="string"?"string":"hash"]:r.map}function CFe(t){var e=Z_(this,t).delete(t);return this.size-=e?1:0,e}function SFe(t){return Z_(this,t).get(t)}function IFe(t){return Z_(this,t).has(t)}function RFe(t,e){var r=Z_(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function uA(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}uA.prototype.clear=MFe;uA.prototype.delete=CFe;uA.prototype.get=SFe;uA.prototype.has=IFe;uA.prototype.set=RFe;var UFe=200;function FFe(t,e){var r=this.__data__;if(r instanceof cA){var n=r.__data__;if(!$g||n.length<UFe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new uA(n)}return r.set(t,e),this.size=r.size,this}function Ko(t){var e=this.__data__=new cA(t);this.size=e.size}Ko.prototype.clear=k3e;Ko.prototype.delete=L3e;Ko.prototype.get=P3e;Ko.prototype.has=O3e;Ko.prototype.set=FFe;var kFe=function(){try{var t=$u(Object,"defineProperty");return t({},"",{}),t}catch{}}();const vb=kFe;function DR(t,e,r){e=="__proto__"&&vb?vb(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function OS(t,e,r){(r!==void 0&&!L0(t[e],r)||r===void 0&&!(e in t))&&DR(t,e,r)}function LFe(t){return function(e,r,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var l=a[t?o:++i];if(r(s[l],l,s)===!1)break}return e}}var PFe=LFe();const d9=PFe;var f9=typeof exports=="object"&&exports&&!exports.nodeType&&exports,EN=f9&&typeof module=="object"&&module&&!module.nodeType&&module,OFe=EN&&EN.exports===f9,BN=OFe?ho.Buffer:void 0,MN=BN?BN.allocUnsafe:void 0;function DFe(t,e){if(e)return t.slice();var r=t.length,n=MN?MN(r):new t.constructor(r);return t.copy(n),n}var NFe=ho.Uint8Array;const yb=NFe;function QFe(t){var e=new t.constructor(t.byteLength);return new yb(e).set(new yb(t)),e}function HFe(t,e){var r=e?QFe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function jFe(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var TN=Object.create,zFe=function(){function t(){}return function(e){if(!_a(e))return{};if(TN)return TN(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const GFe=zFe;function p9(t,e){return function(r){return t(e(r))}}var VFe=p9(Object.getPrototypeOf,Object);const m9=VFe;var WFe=Object.prototype;function NR(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||WFe;return t===r}function KFe(t){return typeof t.constructor=="function"&&!NR(t)?GFe(m9(t)):{}}function xc(t){return t!=null&&typeof t=="object"}var YFe="[object Arguments]";function CN(t){return xc(t)&&Ju(t)==YFe}var g9=Object.prototype,XFe=g9.hasOwnProperty,ZFe=g9.propertyIsEnumerable,JFe=CN(function(){return arguments}())?CN:function(t){return xc(t)&&XFe.call(t,"callee")&&!ZFe.call(t,"callee")};const wb=JFe;var qFe=Array.isArray;const Hs=qFe;var $Fe=9007199254740991;function QR(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=$Fe}function cp(t){return t!=null&&QR(t.length)&&!OR(t)}function eke(t){return xc(t)&&cp(t)}function tke(){return!1}var v9=typeof exports=="object"&&exports&&!exports.nodeType&&exports,SN=v9&&typeof module=="object"&&module&&!module.nodeType&&module,rke=SN&&SN.exports===v9,IN=rke?ho.Buffer:void 0,nke=IN?IN.isBuffer:void 0,ike=nke||tke;const bb=ike;var ske="[object Object]",ake=Function.prototype,oke=Object.prototype,y9=ake.toString,lke=oke.hasOwnProperty,Ake=y9.call(Object);function cke(t){if(!xc(t)||Ju(t)!=ske)return!1;var e=m9(t);if(e===null)return!0;var r=lke.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&y9.call(r)==Ake}var uke="[object Arguments]",hke="[object Array]",dke="[object Boolean]",fke="[object Date]",pke="[object Error]",mke="[object Function]",gke="[object Map]",vke="[object Number]",yke="[object Object]",wke="[object RegExp]",bke="[object Set]",_ke="[object String]",xke="[object WeakMap]",Eke="[object ArrayBuffer]",Bke="[object DataView]",Mke="[object Float32Array]",Tke="[object Float64Array]",Cke="[object Int8Array]",Ske="[object Int16Array]",Ike="[object Int32Array]",Rke="[object Uint8Array]",Uke="[object Uint8ClampedArray]",Fke="[object Uint16Array]",kke="[object Uint32Array]",Mr={};Mr[Mke]=Mr[Tke]=Mr[Cke]=Mr[Ske]=Mr[Ike]=Mr[Rke]=Mr[Uke]=Mr[Fke]=Mr[kke]=!0;Mr[uke]=Mr[hke]=Mr[Eke]=Mr[dke]=Mr[Bke]=Mr[fke]=Mr[pke]=Mr[mke]=Mr[gke]=Mr[vke]=Mr[yke]=Mr[wke]=Mr[bke]=Mr[_ke]=Mr[xke]=!1;function Lke(t){return xc(t)&&QR(t.length)&&!!Mr[Ju(t)]}function Pke(t){return function(e){return t(e)}}var w9=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lg=w9&&typeof module=="object"&&module&&!module.nodeType&&module,Oke=lg&&lg.exports===w9,mM=Oke&&u9.process,Dke=function(){try{var t=lg&&lg.require&&lg.require("util").types;return t||mM&&mM.binding&&mM.binding("util")}catch{}}();const RN=Dke;var UN=RN&&RN.isTypedArray,Nke=UN?Pke(UN):Lke;const HR=Nke;function DS(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Qke=Object.prototype,Hke=Qke.hasOwnProperty;function jke(t,e,r){var n=t[e];(!(Hke.call(t,e)&&L0(n,r))||r===void 0&&!(e in t))&&DR(t,e,r)}function zke(t,e,r,n){var i=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=n?n(r[o],t[o],o,r,t):void 0;l===void 0&&(l=t[o]),i?DR(r,o,l):jke(r,o,l)}return r}function Gke(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Vke=9007199254740991,Wke=/^(?:0|[1-9]\d*)$/;function jR(t,e){var r=typeof t;return e=e??Vke,!!e&&(r=="number"||r!="symbol"&&Wke.test(t))&&t>-1&&t%1==0&&t<e}var Kke=Object.prototype,Yke=Kke.hasOwnProperty;function b9(t,e){var r=Hs(t),n=!r&&wb(t),i=!r&&!n&&bb(t),s=!r&&!n&&!i&&HR(t),a=r||n||i||s,o=a?Gke(t.length,String):[],l=o.length;for(var A in t)(e||Yke.call(t,A))&&!(a&&(A=="length"||i&&(A=="offset"||A=="parent")||s&&(A=="buffer"||A=="byteLength"||A=="byteOffset")||jR(A,l)))&&o.push(A);return o}function Xke(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Zke=Object.prototype,Jke=Zke.hasOwnProperty;function qke(t){if(!_a(t))return Xke(t);var e=NR(t),r=[];for(var n in t)n=="constructor"&&(e||!Jke.call(t,n))||r.push(n);return r}function _9(t){return cp(t)?b9(t,!0):qke(t)}function $ke(t){return zke(t,_9(t))}function eLe(t,e,r,n,i,s,a){var o=DS(t,r),l=DS(e,r),A=a.get(l);if(A){OS(t,r,A);return}var c=s?s(o,l,r+"",t,e,a):void 0,u=c===void 0;if(u){var h=Hs(l),d=!h&&bb(l),f=!h&&!d&&HR(l);c=l,h||d||f?Hs(o)?c=o:eke(o)?c=jFe(o):d?(u=!1,c=DFe(l,!0)):f?(u=!1,c=HFe(l,!0)):c=[]:cke(l)||wb(l)?(c=o,wb(o)?c=$ke(o):(!_a(o)||OR(o))&&(c=KFe(l))):u=!1}u&&(a.set(l,c),i(c,l,n,s,a),a.delete(l)),OS(t,r,c)}function x9(t,e,r,n,i){t!==e&&d9(e,function(s,a){if(i||(i=new Ko),_a(s))eLe(t,e,a,r,x9,n,i);else{var o=n?n(DS(t,a),s,a+"",t,e,i):void 0;o===void 0&&(o=s),OS(t,a,o)}},_9)}function J_(t){return t}function tLe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var FN=Math.max;function rLe(t,e,r){return e=FN(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=FN(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=r(a),tLe(t,this,o)}}function nLe(t){return function(){return t}}var iLe=vb?function(t,e){return vb(t,"toString",{configurable:!0,enumerable:!1,value:nLe(e),writable:!0})}:J_;const sLe=iLe;var aLe=800,oLe=16,lLe=Date.now;function ALe(t){var e=0,r=0;return function(){var n=lLe(),i=oLe-(n-r);if(r=n,i>0){if(++e>=aLe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var cLe=ALe(sLe);const uLe=cLe;function hLe(t,e){return uLe(rLe(t,e,J_),t+"")}function dLe(t,e,r){if(!_a(r))return!1;var n=typeof e;return(n=="number"?cp(r)&&jR(e,r.length):n=="string"&&e in r)?L0(r[e],t):!1}function fLe(t){return hLe(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,a=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&dLe(r[0],r[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var o=r[n];o&&t(e,o,n,s)}return e})}var pLe=fLe(function(t,e,r){x9(t,e,r)});const As=pLe;var P0=function(t){var e=t.zDepth,r=t.radius,n=t.background,i=t.children,s=t.styles,a=s===void 0?{}:s,o=gt(As({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+e+"px "+e*4+"px rgba(0,0,0,.24)",borderRadius:r,background:n}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":e===1});return X.createElement("div",{style:o.wrap},X.createElement("div",{style:o.bg}),X.createElement("div",{style:o.content},i))};P0.propTypes={background:Ve.string,zDepth:Ve.oneOf([0,1,2,3,4,5]),radius:Ve.number,styles:Ve.object};P0.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var mLe=function(){return ho.Date.now()};const gM=mLe;var gLe=/\s/;function vLe(t){for(var e=t.length;e--&&gLe.test(t.charAt(e)););return e}var yLe=/^\s+/;function wLe(t){return t&&t.slice(0,vLe(t)+1).replace(yLe,"")}var bLe="[object Symbol]";function q_(t){return typeof t=="symbol"||xc(t)&&Ju(t)==bLe}var kN=0/0,_Le=/^[-+]0x[0-9a-f]+$/i,xLe=/^0b[01]+$/i,ELe=/^0o[0-7]+$/i,BLe=parseInt;function LN(t){if(typeof t=="number")return t;if(q_(t))return kN;if(_a(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=_a(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=wLe(t);var r=xLe.test(t);return r||ELe.test(t)?BLe(t.slice(2),r?2:8):_Le.test(t)?kN:+t}var MLe="Expected a function",TLe=Math.max,CLe=Math.min;function E9(t,e,r){var n,i,s,a,o,l,A=0,c=!1,u=!1,h=!0;if(typeof t!="function")throw new TypeError(MLe);e=LN(e)||0,_a(r)&&(c=!!r.leading,u="maxWait"in r,s=u?TLe(LN(r.maxWait)||0,e):s,h="trailing"in r?!!r.trailing:h);function d(x){var B=n,M=i;return n=i=void 0,A=x,a=t.apply(M,B),a}function f(x){return A=x,o=setTimeout(p,e),c?d(x):a}function m(x){var B=x-l,M=x-A,R=e-B;return u?CLe(R,s-M):R}function g(x){var B=x-l,M=x-A;return l===void 0||B>=e||B<0||u&&M>=s}function p(){var x=gM();if(g(x))return v(x);o=setTimeout(p,m(x))}function v(x){return o=void 0,h&&n?d(x):(n=i=void 0,a)}function y(){o!==void 0&&clearTimeout(o),A=0,n=l=i=o=void 0}function _(){return o===void 0?a:v(gM())}function E(){var x=gM(),B=g(x);if(n=arguments,i=this,l=x,B){if(o===void 0)return f(l);if(u)return clearTimeout(o),o=setTimeout(p,e),d(l)}return o===void 0&&(o=setTimeout(p,e)),a}return E.cancel=y,E.flush=_,E}var SLe="Expected a function";function ILe(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(SLe);return _a(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),E9(t,e,{leading:n,maxWait:e,trailing:i})}var RLe=function(t,e,r){var n=r.getBoundingClientRect(),i=n.width,s=n.height,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,o=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),A=o-(r.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),A<0?A=0:A>s&&(A=s);var c=l/i,u=1-A/s;return{h:e.h,s:c,v:u,a:e.a,source:"hsv"}},ULe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function FLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kLe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function LLe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var $_=function(t){LLe(e,t);function e(r){FLe(this,e);var n=kLe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r));return n.handleChange=function(i){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,RLe(i,n.props.hsl,n.container),i)},n.handleMouseDown=function(i){n.handleChange(i);var s=n.getContainerRenderWindow();s.addEventListener("mousemove",n.handleChange),s.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=ILe(function(i,s,a){i(s,a)},50),n}return ULe(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var r=this.container,n=window;!n.document.contains(r)&&n.parent!==n;)n=n.parent;return n}},{key:"unbindEventListeners",value:function(){var r=this.getContainerRenderWindow();r.removeEventListener("mousemove",this.handleChange),r.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var r=this,n=this.props.style||{},i=n.color,s=n.white,a=n.black,o=n.pointer,l=n.circle,A=gt({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:i,white:s,black:a,pointer:o,circle:l}},{custom:!!this.props.style});return X.createElement("div",{style:A.color,ref:function(c){return r.container=c},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},X.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),X.createElement("div",{style:A.white,className:"saturation-white"},X.createElement("div",{style:A.black,className:"saturation-black"}),X.createElement("div",{style:A.pointer},this.props.pointer?X.createElement(this.props.pointer,this.props):X.createElement("div",{style:A.circle}))))}}]),e}(_e.PureComponent||_e.Component);function PLe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var OLe=p9(Object.keys,Object);const DLe=OLe;var NLe=Object.prototype,QLe=NLe.hasOwnProperty;function HLe(t){if(!NR(t))return DLe(t);var e=[];for(var r in Object(t))QLe.call(t,r)&&r!="constructor"&&e.push(r);return e}function zR(t){return cp(t)?b9(t):HLe(t)}function jLe(t,e){return t&&d9(t,e,zR)}function zLe(t,e){return function(r,n){if(r==null)return r;if(!cp(r))return t(r,n);for(var i=r.length,s=e?i:-1,a=Object(r);(e?s--:++s<i)&&n(a[s],s,a)!==!1;);return r}}var GLe=zLe(jLe);const B9=GLe;function VLe(t){return typeof t=="function"?t:J_}function WLe(t,e){var r=Hs(t)?PLe:B9;return r(t,VLe(e))}function _b(t){"@babel/helpers - typeof";return _b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_b(t)}var KLe=/^\s+/,YLe=/\s+$/;function nt(t,e){if(t=t||"",e=e||{},t instanceof nt)return t;if(!(this instanceof nt))return new nt(t,e);var r=XLe(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}nt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),e,r,n,i,s,a;return e=t.r/255,r=t.g/255,n=t.b/255,e<=.03928?i=e/12.92:i=Math.pow((e+.055)/1.055,2.4),r<=.03928?s=r/12.92:s=Math.pow((r+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),.2126*i+.7152*s+.0722*a},setAlpha:function(t){return this._a=M9(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=ON(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=ON(this._r,this._g,this._b),e=Math.round(t.h*360),r=Math.round(t.s*100),n=Math.round(t.v*100);return this._a==1?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=PN(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=PN(this._r,this._g,this._b),e=Math.round(t.h*360),r=Math.round(t.s*100),n=Math.round(t.l*100);return this._a==1?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return DN(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return $Le(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Fr(this._r,255)*100)+"%",g:Math.round(Fr(this._g,255)*100)+"%",b:Math.round(Fr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Fr(this._r,255)*100)+"%, "+Math.round(Fr(this._g,255)*100)+"%, "+Math.round(Fr(this._b,255)*100)+"%)":"rgba("+Math.round(Fr(this._r,255)*100)+"%, "+Math.round(Fr(this._g,255)*100)+"%, "+Math.round(Fr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:uPe[DN(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+NN(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=nt(t);r="#"+NN(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0,i=!e&&n&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return i?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(r=this.toRgbString()),t==="prgb"&&(r=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(r=this.toHexString()),t==="hex3"&&(r=this.toHexString(!0)),t==="hex4"&&(r=this.toHex8String(!0)),t==="hex8"&&(r=this.toHex8String()),t==="name"&&(r=this.toName()),t==="hsl"&&(r=this.toHslString()),t==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return nt(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(nPe,arguments)},brighten:function(){return this._applyModification(iPe,arguments)},darken:function(){return this._applyModification(sPe,arguments)},desaturate:function(){return this._applyModification(ePe,arguments)},saturate:function(){return this._applyModification(tPe,arguments)},greyscale:function(){return this._applyModification(rPe,arguments)},spin:function(){return this._applyModification(aPe,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(APe,arguments)},complement:function(){return this._applyCombination(oPe,arguments)},monochromatic:function(){return this._applyCombination(cPe,arguments)},splitcomplement:function(){return this._applyCombination(lPe,arguments)},triad:function(){return this._applyCombination(QN,[3])},tetrad:function(){return this._applyCombination(QN,[4])}};nt.fromRatio=function(t,e){if(_b(t)=="object"){var r={};for(var n in t)t.hasOwnProperty(n)&&(n==="a"?r[n]=t[n]:r[n]=Pm(t[n]));t=r}return nt(t,e)};function XLe(t){var e={r:0,g:0,b:0},r=1,n=null,i=null,s=null,a=!1,o=!1;return typeof t=="string"&&(t=pPe(t)),_b(t)=="object"&&(_l(t.r)&&_l(t.g)&&_l(t.b)?(e=ZLe(t.r,t.g,t.b),a=!0,o=String(t.r).substr(-1)==="%"?"prgb":"rgb"):_l(t.h)&&_l(t.s)&&_l(t.v)?(n=Pm(t.s),i=Pm(t.v),e=qLe(t.h,n,i),a=!0,o="hsv"):_l(t.h)&&_l(t.s)&&_l(t.l)&&(n=Pm(t.s),s=Pm(t.l),e=JLe(t.h,n,s),a=!0,o="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=M9(r),{ok:a,format:t.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function ZLe(t,e,r){return{r:Fr(t,255)*255,g:Fr(e,255)*255,b:Fr(r,255)*255}}function PN(t,e,r){t=Fr(t,255),e=Fr(e,255),r=Fr(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),s,a,o=(n+i)/2;if(n==i)s=a=0;else{var l=n-i;switch(a=o>.5?l/(2-n-i):l/(n+i),n){case t:s=(e-r)/l+(e<r?6:0);break;case e:s=(r-t)/l+2;break;case r:s=(t-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function JLe(t,e,r){var n,i,s;t=Fr(t,360),e=Fr(e,100),r=Fr(r,100);function a(A,c,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?A+(c-A)*6*u:u<1/2?c:u<2/3?A+(c-A)*(2/3-u)*6:A}if(e===0)n=i=s=r;else{var o=r<.5?r*(1+e):r+e-r*e,l=2*r-o;n=a(l,o,t+1/3),i=a(l,o,t),s=a(l,o,t-1/3)}return{r:n*255,g:i*255,b:s*255}}function ON(t,e,r){t=Fr(t,255),e=Fr(e,255),r=Fr(r,255);var n=Math.max(t,e,r),i=Math.min(t,e,r),s,a,o=n,l=n-i;if(a=n===0?0:l/n,n==i)s=0;else{switch(n){case t:s=(e-r)/l+(e<r?6:0);break;case e:s=(r-t)/l+2;break;case r:s=(t-e)/l+4;break}s/=6}return{h:s,s:a,v:o}}function qLe(t,e,r){t=Fr(t,360)*6,e=Fr(e,100),r=Fr(r,100);var n=Math.floor(t),i=t-n,s=r*(1-e),a=r*(1-i*e),o=r*(1-(1-i)*e),l=n%6,A=[r,a,s,s,o,r][l],c=[o,r,r,a,s,s][l],u=[s,s,o,r,r,a][l];return{r:A*255,g:c*255,b:u*255}}function DN(t,e,r,n){var i=[$a(Math.round(t).toString(16)),$a(Math.round(e).toString(16)),$a(Math.round(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function $Le(t,e,r,n,i){var s=[$a(Math.round(t).toString(16)),$a(Math.round(e).toString(16)),$a(Math.round(r).toString(16)),$a(T9(n))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function NN(t,e,r,n){var i=[$a(T9(n)),$a(Math.round(t).toString(16)),$a(Math.round(e).toString(16)),$a(Math.round(r).toString(16))];return i.join("")}nt.equals=function(t,e){return!t||!e?!1:nt(t).toRgbString()==nt(e).toRgbString()};nt.random=function(){return nt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function ePe(t,e){e=e===0?0:e||10;var r=nt(t).toHsl();return r.s-=e/100,r.s=ex(r.s),nt(r)}function tPe(t,e){e=e===0?0:e||10;var r=nt(t).toHsl();return r.s+=e/100,r.s=ex(r.s),nt(r)}function rPe(t){return nt(t).desaturate(100)}function nPe(t,e){e=e===0?0:e||10;var r=nt(t).toHsl();return r.l+=e/100,r.l=ex(r.l),nt(r)}function iPe(t,e){e=e===0?0:e||10;var r=nt(t).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),nt(r)}function sPe(t,e){e=e===0?0:e||10;var r=nt(t).toHsl();return r.l-=e/100,r.l=ex(r.l),nt(r)}function aPe(t,e){var r=nt(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,nt(r)}function oPe(t){var e=nt(t).toHsl();return e.h=(e.h+180)%360,nt(e)}function QN(t,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=nt(t).toHsl(),n=[nt(t)],i=360/e,s=1;s<e;s++)n.push(nt({h:(r.h+s*i)%360,s:r.s,l:r.l}));return n}function lPe(t){var e=nt(t).toHsl(),r=e.h;return[nt(t),nt({h:(r+72)%360,s:e.s,l:e.l}),nt({h:(r+216)%360,s:e.s,l:e.l})]}function APe(t,e,r){e=e||6,r=r||30;var n=nt(t).toHsl(),i=360/r,s=[nt(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,s.push(nt(n));return s}function cPe(t,e){e=e||6;for(var r=nt(t).toHsv(),n=r.h,i=r.s,s=r.v,a=[],o=1/e;e--;)a.push(nt({h:n,s:i,v:s})),s=(s+o)%1;return a}nt.mix=function(t,e,r){r=r===0?0:r||50;var n=nt(t).toRgb(),i=nt(e).toRgb(),s=r/100,a={r:(i.r-n.r)*s+n.r,g:(i.g-n.g)*s+n.g,b:(i.b-n.b)*s+n.b,a:(i.a-n.a)*s+n.a};return nt(a)};nt.readability=function(t,e){var r=nt(t),n=nt(e);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};nt.isReadable=function(t,e,r){var n=nt.readability(t,e),i,s;switch(s=!1,i=mPe(r),i.level+i.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};nt.mostReadable=function(t,e,r){var n=null,i=0,s,a,o,l;r=r||{},a=r.includeFallbackColors,o=r.level,l=r.size;for(var A=0;A<e.length;A++)s=nt.readability(t,e[A]),s>i&&(i=s,n=nt(e[A]));return nt.isReadable(t,n,{level:o,size:l})||!a?n:(r.includeFallbackColors=!1,nt.mostReadable(t,["#fff","#000"],r))};var NS=nt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},uPe=nt.hexNames=hPe(NS);function hPe(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}function M9(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Fr(t,e){dPe(t)&&(t="100%");var r=fPe(t);return t=Math.min(e,Math.max(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function ex(t){return Math.min(1,Math.max(0,t))}function gs(t){return parseInt(t,16)}function dPe(t){return typeof t=="string"&&t.indexOf(".")!=-1&&parseFloat(t)===1}function fPe(t){return typeof t=="string"&&t.indexOf("%")!=-1}function $a(t){return t.length==1?"0"+t:""+t}function Pm(t){return t<=1&&(t=t*100+"%"),t}function T9(t){return Math.round(parseFloat(t)*255).toString(16)}function HN(t){return gs(t)/255}var Ha=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function _l(t){return!!Ha.CSS_UNIT.exec(t)}function pPe(t){t=t.replace(KLe,"").replace(YLe,"").toLowerCase();var e=!1;if(NS[t])t=NS[t],e=!0;else if(t=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Ha.rgb.exec(t))?{r:r[1],g:r[2],b:r[3]}:(r=Ha.rgba.exec(t))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Ha.hsl.exec(t))?{h:r[1],s:r[2],l:r[3]}:(r=Ha.hsla.exec(t))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Ha.hsv.exec(t))?{h:r[1],s:r[2],v:r[3]}:(r=Ha.hsva.exec(t))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Ha.hex8.exec(t))?{r:gs(r[1]),g:gs(r[2]),b:gs(r[3]),a:HN(r[4]),format:e?"name":"hex8"}:(r=Ha.hex6.exec(t))?{r:gs(r[1]),g:gs(r[2]),b:gs(r[3]),format:e?"name":"hex"}:(r=Ha.hex4.exec(t))?{r:gs(r[1]+""+r[1]),g:gs(r[2]+""+r[2]),b:gs(r[3]+""+r[3]),a:HN(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=Ha.hex3.exec(t))?{r:gs(r[1]+""+r[1]),g:gs(r[2]+""+r[2]),b:gs(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function mPe(t){var e,r;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}var jN=function(t){var e=["r","g","b","a","h","s","l","v"],r=0,n=0;return WLe(e,function(i){if(t[i]&&(r+=1,isNaN(t[i])||(n+=1),i==="s"||i==="l")){var s=/^\d+%$/;s.test(t[i])&&(n+=1)}}),r===n?t:!1},Om=function(t,e){var r=t.hex?nt(t.hex):nt(t),n=r.toHsl(),i=r.toHsv(),s=r.toRgb(),a=r.toHex();n.s===0&&(n.h=e||0,i.h=e||0);var o=a==="000000"&&s.a===0;return{hsl:n,hex:o?"transparent":"#"+a,rgb:s,hsv:i,oldHue:t.h||e||n.h,source:t.source}},Fc=function(t){if(t==="transparent")return!0;var e=String(t).charAt(0)==="#"?1:0;return t.length!==4+e&&t.length<7+e&&nt(t).isValid()},GR=function(t){if(!t)return"#fff";var e=Om(t);if(e.hex==="transparent")return"rgba(0,0,0,0.4)";var r=(e.rgb.r*299+e.rgb.g*587+e.rgb.b*114)/1e3;return r>=128?"#000":"#fff"},vM=function(t,e){var r=t.replace("","");return nt(e+" ("+r+")")._ok},um=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gPe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function vPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yPe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function wPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var cs=function(t){var e=function(r){wPe(n,r);function n(i){vPe(this,n);var s=yPe(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return s.handleChange=function(a,o){var l=jN(a);if(l){var A=Om(a,a.h||s.state.oldHue);s.setState(A),s.props.onChangeComplete&&s.debounce(s.props.onChangeComplete,A,o),s.props.onChange&&s.props.onChange(A,o)}},s.handleSwatchHover=function(a,o){var l=jN(a);if(l){var A=Om(a,a.h||s.state.oldHue);s.props.onSwatchHover&&s.props.onSwatchHover(A,o)}},s.state=um({},Om(i.color,0)),s.debounce=E9(function(a,o,l){a(o,l)},100),s}return gPe(n,[{key:"render",value:function(){var i={};return this.props.onSwatchHover&&(i.onSwatchHover=this.handleSwatchHover),X.createElement(t,um({},this.props,this.state,{onChange:this.handleChange},i))}}],[{key:"getDerivedStateFromProps",value:function(i,s){return um({},Om(i.color,s.oldHue))}}]),n}(_e.PureComponent||_e.Component);return e.propTypes=um({},t.propTypes),e.defaultProps=um({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e},bPe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_Pe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function xPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zN(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function EPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var BPe=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(r){EPe(n,r);function n(){var i,s,a,o;xPe(this,n);for(var l=arguments.length,A=Array(l),c=0;c<l;c++)A[c]=arguments[c];return o=(s=(a=zN(this,(i=n.__proto__||Object.getPrototypeOf(n)).call.apply(i,[this].concat(A))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},s),zN(a,o)}return _Pe(n,[{key:"render",value:function(){return X.createElement(e,{onFocus:this.handleFocus,onBlur:this.handleBlur},X.createElement(t,bPe({},this.props,this.state)))}}]),n}(X.Component)},GN=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MPe=13,TPe=function(t){var e=t.color,r=t.style,n=t.onClick,i=n===void 0?function(){}:n,s=t.onHover,a=t.title,o=a===void 0?e:a,l=t.children,A=t.focus,c=t.focusStyle,u=c===void 0?{}:c,h=e==="transparent",d=gt({default:{swatch:GN({background:e,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},r,A?u:{})}}),f=function(v){return i(e,v)},m=function(v){return v.keyCode===MPe&&i(e,v)},g=function(v){return s(e,v)},p={};return s&&(p.onMouseOver=g),X.createElement("div",GN({style:d.swatch,onClick:f,title:o,tabIndex:0,onKeyDown:m},p),l,h&&X.createElement(lp,{borderRadius:d.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const eh=BPe(TPe);var CPe=function(t){var e=t.direction,r=gt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:e==="vertical"});return X.createElement("div",{style:r.picker})},SPe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C9=function(t){var e=t.rgb,r=t.hsl,n=t.width,i=t.height,s=t.onChange,a=t.direction,o=t.style,l=t.renderers,A=t.pointer,c=t.className,u=c===void 0?"":c,h=gt({default:{picker:{position:"relative",width:n,height:i},alpha:{radius:"2px",style:o}}});return X.createElement("div",{style:h.picker,className:"alpha-picker "+u},X.createElement(PR,SPe({},h.alpha,{rgb:e,hsl:r,pointer:A,renderers:l,onChange:s,direction:a})))};C9.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:CPe};cs(C9);function S9(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var IPe="__lodash_hash_undefined__";function RPe(t){return this.__data__.set(t,IPe),this}function UPe(t){return this.__data__.has(t)}function xb(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new uA;++e<r;)this.add(t[e])}xb.prototype.add=xb.prototype.push=RPe;xb.prototype.has=UPe;function FPe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function kPe(t,e){return t.has(e)}var LPe=1,PPe=2;function I9(t,e,r,n,i,s){var a=r&LPe,o=t.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var A=s.get(t),c=s.get(e);if(A&&c)return A==e&&c==t;var u=-1,h=!0,d=r&PPe?new xb:void 0;for(s.set(t,e),s.set(e,t);++u<o;){var f=t[u],m=e[u];if(n)var g=a?n(m,f,u,e,t,s):n(f,m,u,t,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!FPe(e,function(p,v){if(!kPe(d,v)&&(f===p||i(f,p,r,n,s)))return d.push(v)})){h=!1;break}}else if(!(f===m||i(f,m,r,n,s))){h=!1;break}}return s.delete(t),s.delete(e),h}function OPe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}function DPe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var NPe=1,QPe=2,HPe="[object Boolean]",jPe="[object Date]",zPe="[object Error]",GPe="[object Map]",VPe="[object Number]",WPe="[object RegExp]",KPe="[object Set]",YPe="[object String]",XPe="[object Symbol]",ZPe="[object ArrayBuffer]",JPe="[object DataView]",VN=_c?_c.prototype:void 0,yM=VN?VN.valueOf:void 0;function qPe(t,e,r,n,i,s,a){switch(r){case JPe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ZPe:return!(t.byteLength!=e.byteLength||!s(new yb(t),new yb(e)));case HPe:case jPe:case VPe:return L0(+t,+e);case zPe:return t.name==e.name&&t.message==e.message;case WPe:case YPe:return t==e+"";case GPe:var o=OPe;case KPe:var l=n&NPe;if(o||(o=DPe),t.size!=e.size&&!l)return!1;var A=a.get(t);if(A)return A==e;n|=QPe,a.set(t,e);var c=I9(o(t),o(e),n,i,s,a);return a.delete(t),c;case XPe:if(yM)return yM.call(t)==yM.call(e)}return!1}function $Pe(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function eOe(t,e,r){var n=e(t);return Hs(t)?n:$Pe(n,r(t))}function tOe(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var a=t[r];e(a,r,t)&&(s[i++]=a)}return s}function rOe(){return[]}var nOe=Object.prototype,iOe=nOe.propertyIsEnumerable,WN=Object.getOwnPropertySymbols,sOe=WN?function(t){return t==null?[]:(t=Object(t),tOe(WN(t),function(e){return iOe.call(t,e)}))}:rOe;const aOe=sOe;function KN(t){return eOe(t,zR,aOe)}var oOe=1,lOe=Object.prototype,AOe=lOe.hasOwnProperty;function cOe(t,e,r,n,i,s){var a=r&oOe,o=KN(t),l=o.length,A=KN(e),c=A.length;if(l!=c&&!a)return!1;for(var u=l;u--;){var h=o[u];if(!(a?h in e:AOe.call(e,h)))return!1}var d=s.get(t),f=s.get(e);if(d&&f)return d==e&&f==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=a;++u<l;){h=o[u];var p=t[h],v=e[h];if(n)var y=a?n(v,p,h,e,t,s):n(p,v,h,t,e,s);if(!(y===void 0?p===v||i(p,v,r,n,s):y)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var _=t.constructor,E=e.constructor;_!=E&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof E=="function"&&E instanceof E)&&(m=!1)}return s.delete(t),s.delete(e),m}var uOe=$u(ho,"DataView");const QS=uOe;var hOe=$u(ho,"Promise");const HS=hOe;var dOe=$u(ho,"Set");const jS=dOe;var fOe=$u(ho,"WeakMap");const zS=fOe;var YN="[object Map]",pOe="[object Object]",XN="[object Promise]",ZN="[object Set]",JN="[object WeakMap]",qN="[object DataView]",mOe=qu(QS),gOe=qu($g),vOe=qu(HS),yOe=qu(jS),wOe=qu(zS),nu=Ju;(QS&&nu(new QS(new ArrayBuffer(1)))!=qN||$g&&nu(new $g)!=YN||HS&&nu(HS.resolve())!=XN||jS&&nu(new jS)!=ZN||zS&&nu(new zS)!=JN)&&(nu=function(t){var e=Ju(t),r=e==pOe?t.constructor:void 0,n=r?qu(r):"";if(n)switch(n){case mOe:return qN;case gOe:return YN;case vOe:return XN;case yOe:return ZN;case wOe:return JN}return e});const $N=nu;var bOe=1,e4="[object Arguments]",t4="[object Array]",zy="[object Object]",_Oe=Object.prototype,r4=_Oe.hasOwnProperty;function xOe(t,e,r,n,i,s){var a=Hs(t),o=Hs(e),l=a?t4:$N(t),A=o?t4:$N(e);l=l==e4?zy:l,A=A==e4?zy:A;var c=l==zy,u=A==zy,h=l==A;if(h&&bb(t)){if(!bb(e))return!1;a=!0,c=!1}if(h&&!c)return s||(s=new Ko),a||HR(t)?I9(t,e,r,n,i,s):qPe(t,e,l,r,n,i,s);if(!(r&bOe)){var d=c&&r4.call(t,"__wrapped__"),f=u&&r4.call(e,"__wrapped__");if(d||f){var m=d?t.value():t,g=f?e.value():e;return s||(s=new Ko),i(m,g,r,n,s)}}return h?(s||(s=new Ko),cOe(t,e,r,n,i,s)):!1}function VR(t,e,r,n,i){return t===e?!0:t==null||e==null||!xc(t)&&!xc(e)?t!==t&&e!==e:xOe(t,e,r,n,VR,i)}var EOe=1,BOe=2;function MOe(t,e,r,n){var i=r.length,s=i,a=!n;if(t==null)return!s;for(t=Object(t);i--;){var o=r[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=r[i];var l=o[0],A=t[l],c=o[1];if(a&&o[2]){if(A===void 0&&!(l in t))return!1}else{var u=new Ko;if(n)var h=n(A,c,l,t,e,u);if(!(h===void 0?VR(c,A,EOe|BOe,n,u):h))return!1}}return!0}function R9(t){return t===t&&!_a(t)}function TOe(t){for(var e=zR(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,R9(i)]}return e}function U9(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function COe(t){var e=TOe(t);return e.length==1&&e[0][2]?U9(e[0][0],e[0][1]):function(r){return r===t||MOe(r,t,e)}}var SOe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,IOe=/^\w*$/;function WR(t,e){if(Hs(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||q_(t)?!0:IOe.test(t)||!SOe.test(t)||e!=null&&t in Object(e)}var ROe="Expected a function";function KR(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(ROe);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=t.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(KR.Cache||uA),r}KR.Cache=uA;var UOe=500;function FOe(t){var e=KR(t,function(n){return r.size===UOe&&r.clear(),n}),r=e.cache;return e}var kOe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,LOe=/\\(\\)?/g,POe=FOe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(kOe,function(r,n,i,s){e.push(i?s.replace(LOe,"$1"):n||r)}),e});const OOe=POe;var DOe=1/0,n4=_c?_c.prototype:void 0,i4=n4?n4.toString:void 0;function F9(t){if(typeof t=="string")return t;if(Hs(t))return S9(t,F9)+"";if(q_(t))return i4?i4.call(t):"";var e=t+"";return e=="0"&&1/t==-DOe?"-0":e}function NOe(t){return t==null?"":F9(t)}function k9(t,e){return Hs(t)?t:WR(t,e)?[t]:OOe(NOe(t))}var QOe=1/0;function tx(t){if(typeof t=="string"||q_(t))return t;var e=t+"";return e=="0"&&1/t==-QOe?"-0":e}function L9(t,e){e=k9(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[tx(e[r++])];return r&&r==n?t:void 0}function HOe(t,e,r){var n=t==null?void 0:L9(t,e);return n===void 0?r:n}function jOe(t,e){return t!=null&&e in Object(t)}function zOe(t,e,r){e=k9(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var a=tx(e[n]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&QR(i)&&jR(a,i)&&(Hs(t)||wb(t)))}function GOe(t,e){return t!=null&&zOe(t,e,jOe)}var VOe=1,WOe=2;function KOe(t,e){return WR(t)&&R9(e)?U9(tx(t),e):function(r){var n=HOe(r,t);return n===void 0&&n===e?GOe(r,t):VR(e,n,VOe|WOe)}}function YOe(t){return function(e){return e==null?void 0:e[t]}}function XOe(t){return function(e){return L9(e,t)}}function ZOe(t){return WR(t)?YOe(tx(t)):XOe(t)}function JOe(t){return typeof t=="function"?t:t==null?J_:typeof t=="object"?Hs(t)?KOe(t[0],t[1]):COe(t):ZOe(t)}function qOe(t,e){var r=-1,n=cp(t)?Array(t.length):[];return B9(t,function(i,s,a){n[++r]=e(i,s,a)}),n}function th(t,e){var r=Hs(t)?S9:qOe;return r(t,JOe(e))}var $Oe=function(t){var e=t.colors,r=t.onClick,n=t.onSwatchHover,i=gt({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return X.createElement("div",{style:i.swatches},th(e,function(s){return X.createElement(eh,{key:s,color:s,style:i.swatch,onClick:r,onHover:n,focusStyle:{boxShadow:"0 0 4px "+s}})}),X.createElement("div",{style:i.clear}))},YR=function(t){var e=t.onChange,r=t.onSwatchHover,n=t.hex,i=t.colors,s=t.width,a=t.triangle,o=t.styles,l=o===void 0?{}:o,A=t.className,c=A===void 0?"":A,u=n==="transparent",h=function(f,m){Fc(f)&&e({hex:f,source:"hex"},m)},d=gt(As({default:{card:{width:s,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:n,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:GR(n),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+n+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":a==="hide"});return X.createElement("div",{style:d.card,className:"block-picker "+c},X.createElement("div",{style:d.triangle}),X.createElement("div",{style:d.head},u&&X.createElement(lp,{borderRadius:"6px 6px 0 0"}),X.createElement("div",{style:d.label},n)),X.createElement("div",{style:d.body},X.createElement($Oe,{colors:i,onClick:h,onSwatchHover:r}),X.createElement(Ht,{style:{input:d.input},value:n,onChange:h})))};YR.propTypes={width:Ve.oneOfType([Ve.string,Ve.number]),colors:Ve.arrayOf(Ve.string),triangle:Ve.oneOf(["top","hide"]),styles:Ve.object};YR.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};cs(YR);var Zh={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Jh={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},qh={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},$h={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},ed={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},td={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},rd={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},nd={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},id={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Dm={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},sd={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},ad={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},od={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},ld={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Ad={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},cd={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},ud={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},hd={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},P9=function(t){var e=t.color,r=t.onClick,n=t.onSwatchHover,i=t.hover,s=t.active,a=t.circleSize,o=t.circleSpacing,l=gt({default:{swatch:{width:a,height:a,marginRight:o,marginBottom:o,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+e,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+e}}},{hover:i,active:s});return X.createElement("div",{style:l.swatch},X.createElement(eh,{style:l.Swatch,color:e,onClick:r,onHover:n,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+e}}))};P9.defaultProps={circleSize:28,circleSpacing:14};const eDe=LR(P9);var XR=function(t){var e=t.width,r=t.onChange,n=t.onSwatchHover,i=t.colors,s=t.hex,a=t.circleSize,o=t.styles,l=o===void 0?{}:o,A=t.circleSpacing,c=t.className,u=c===void 0?"":c,h=gt(As({default:{card:{width:e,display:"flex",flexWrap:"wrap",marginRight:-A,marginBottom:-A}}},l)),d=function(f,m){return r({hex:f,source:"hex"},m)};return X.createElement("div",{style:h.card,className:"circle-picker "+u},th(i,function(f){return X.createElement(eDe,{key:f,color:f,onClick:d,onSwatchHover:n,active:s===f.toLowerCase(),circleSize:a,circleSpacing:A})}))};XR.propTypes={width:Ve.oneOfType([Ve.string,Ve.number]),circleSize:Ve.number,circleSpacing:Ve.number,styles:Ve.object};XR.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Zh[500],Jh[500],qh[500],$h[500],ed[500],td[500],rd[500],nd[500],id[500],Dm[500],sd[500],ad[500],od[500],ld[500],Ad[500],cd[500],ud[500],hd[500]],styles:{}};cs(XR);function s4(t){return t===void 0}var O9={};Object.defineProperty(O9,"__esModule",{value:!0});var a4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tDe=_e,o4=rDe(tDe);function rDe(t){return t&&t.__esModule?t:{default:t}}function nDe(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var Gy=24,iDe=O9.default=function(t){var e=t.fill,r=e===void 0?"currentColor":e,n=t.width,i=n===void 0?Gy:n,s=t.height,a=s===void 0?Gy:s,o=t.style,l=o===void 0?{}:o,A=nDe(t,["fill","width","height","style"]);return o4.default.createElement("svg",a4({viewBox:"0 0 "+Gy+" "+Gy,style:a4({fill:r,width:i,height:a},l)},A),o4.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},sDe=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function aDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oDe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function lDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var D9=function(t){lDe(e,t);function e(r){aDe(this,e);var n=oDe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(i,s){i.hex?Fc(i.hex)&&n.props.onChange({hex:i.hex,source:"hex"},s):i.r||i.g||i.b?n.props.onChange({r:i.r||n.props.rgb.r,g:i.g||n.props.rgb.g,b:i.b||n.props.rgb.b,source:"rgb"},s):i.a?(i.a<0?i.a=0:i.a>1&&(i.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(i.a*100)/100,source:"rgb"},s)):(i.h||i.s||i.l)&&(typeof i.s=="string"&&i.s.includes("%")&&(i.s=i.s.replace("%","")),typeof i.l=="string"&&i.l.includes("%")&&(i.l=i.l.replace("%","")),i.s==1?i.s=.01:i.l==1&&(i.l=.01),n.props.onChange({h:i.h||n.props.hsl.h,s:Number(s4(i.s)?n.props.hsl.s:i.s),l:Number(s4(i.l)?n.props.hsl.l:i.l),source:"hsl"},s))},n.showHighlight=function(i){i.currentTarget.style.background="#eee"},n.hideHighlight=function(i){i.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return sDe(e,[{key:"render",value:function(){var r=this,n=gt({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),i=void 0;return this.state.view==="hex"?i=X.createElement("div",{style:n.fields,className:"flexbox-fix"},X.createElement("div",{style:n.field},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?i=X.createElement("div",{style:n.fields,className:"flexbox-fix"},X.createElement("div",{style:n.field},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),X.createElement("div",{style:n.field},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),X.createElement("div",{style:n.field},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),X.createElement("div",{style:n.alpha},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(i=X.createElement("div",{style:n.fields,className:"flexbox-fix"},X.createElement("div",{style:n.field},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),X.createElement("div",{style:n.field},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),X.createElement("div",{style:n.field},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),X.createElement("div",{style:n.alpha},X.createElement(Ht,{style:{input:n.input,label:n.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),X.createElement("div",{style:n.wrap,className:"flexbox-fix"},i,X.createElement("div",{style:n.toggle},X.createElement("div",{style:n.icon,onClick:this.toggleViews,ref:function(s){return r.icon=s}},X.createElement(iDe,{style:n.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.hsl.a!==1&&n.view==="hex"?{view:"rgb"}:null}}]),e}(X.Component);D9.defaultProps={view:"hex"};var l4=function(){var t=gt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return X.createElement("div",{style:t.picker})},ADe=function(){var t=gt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return X.createElement("div",{style:t.picker})},ZR=function(t){var e=t.width,r=t.onChange,n=t.disableAlpha,i=t.rgb,s=t.hsl,a=t.hsv,o=t.hex,l=t.renderers,A=t.styles,c=A===void 0?{}:A,u=t.className,h=u===void 0?"":u,d=t.defaultView,f=gt(As({default:{picker:{width:e,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},c),{disableAlpha:n});return X.createElement("div",{style:f.picker,className:"chrome-picker "+h},X.createElement("div",{style:f.saturation},X.createElement($_,{style:f.Saturation,hsl:s,hsv:a,pointer:ADe,onChange:r})),X.createElement("div",{style:f.body},X.createElement("div",{style:f.controls,className:"flexbox-fix"},X.createElement("div",{style:f.color},X.createElement("div",{style:f.swatch},X.createElement("div",{style:f.active}),X.createElement(lp,{renderers:l}))),X.createElement("div",{style:f.toggles},X.createElement("div",{style:f.hue},X.createElement(Ap,{style:f.Hue,hsl:s,pointer:l4,onChange:r})),X.createElement("div",{style:f.alpha},X.createElement(PR,{style:f.Alpha,rgb:i,hsl:s,pointer:l4,renderers:l,onChange:r})))),X.createElement(D9,{rgb:i,hsl:s,hex:o,view:d,onChange:r,disableAlpha:n})))};ZR.propTypes={width:Ve.oneOfType([Ve.string,Ve.number]),disableAlpha:Ve.bool,styles:Ve.object,defaultView:Ve.oneOf(["hex","rgb","hsl"])};ZR.defaultProps={width:225,disableAlpha:!1,styles:{}};const cDe=cs(ZR);var uDe=function(t){var e=t.color,r=t.onClick,n=r===void 0?function(){}:r,i=t.onSwatchHover,s=t.active,a=gt({default:{color:{background:e,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:GR(e),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:s,"color-#FFFFFF":e==="#FFFFFF",transparent:e==="transparent"});return X.createElement(eh,{style:a.color,color:e,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+e}},X.createElement("div",{style:a.dot}))},hDe=function(t){var e=t.hex,r=t.rgb,n=t.onChange,i=gt({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:e},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),s=function(a,o){a.r||a.g||a.b?n({r:a.r||r.r,g:a.g||r.g,b:a.b||r.b,source:"rgb"},o):n({hex:a.hex,source:"hex"},o)};return X.createElement("div",{style:i.fields,className:"flexbox-fix"},X.createElement("div",{style:i.active}),X.createElement(Ht,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:e,onChange:s}),X.createElement(Ht,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:r.r,onChange:s}),X.createElement(Ht,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:r.g,onChange:s}),X.createElement(Ht,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:r.b,onChange:s}))},JR=function(t){var e=t.onChange,r=t.onSwatchHover,n=t.colors,i=t.hex,s=t.rgb,a=t.styles,o=a===void 0?{}:a,l=t.className,A=l===void 0?"":l,c=gt(As({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},o)),u=function(h,d){h.hex?Fc(h.hex)&&e({hex:h.hex,source:"hex"},d):e(h,d)};return X.createElement(P0,{style:c.Compact,styles:o},X.createElement("div",{style:c.compact,className:"compact-picker "+A},X.createElement("div",null,th(n,function(h){return X.createElement(uDe,{key:h,color:h,active:h.toLowerCase()===i,onClick:u,onSwatchHover:r})}),X.createElement("div",{style:c.clear})),X.createElement(hDe,{hex:i,rgb:s,onChange:u})))};JR.propTypes={colors:Ve.arrayOf(Ve.string),styles:Ve.object};JR.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};cs(JR);var dDe=function(t){var e=t.hover,r=t.color,n=t.onClick,i=t.onSwatchHover,s={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=gt({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:s}},{hover:e});return X.createElement("div",{style:a.swatch},X.createElement(eh,{color:r,onClick:n,onHover:i,focusStyle:s}))};const fDe=LR(dDe);var qR=function(t){var e=t.width,r=t.colors,n=t.onChange,i=t.onSwatchHover,s=t.triangle,a=t.styles,o=a===void 0?{}:a,l=t.className,A=l===void 0?"":l,c=gt(As({default:{card:{width:e,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},o),{"hide-triangle":s==="hide","top-left-triangle":s==="top-left","top-right-triangle":s==="top-right","bottom-left-triangle":s==="bottom-left","bottom-right-triangle":s==="bottom-right"}),u=function(h,d){return n({hex:h,source:"hex"},d)};return X.createElement("div",{style:c.card,className:"github-picker "+A},X.createElement("div",{style:c.triangleShadow}),X.createElement("div",{style:c.triangle}),th(r,function(h){return X.createElement(fDe,{color:h,key:h,onClick:u,onSwatchHover:i})}))};qR.propTypes={width:Ve.oneOfType([Ve.string,Ve.number]),colors:Ve.arrayOf(Ve.string),triangle:Ve.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Ve.object};qR.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};cs(qR);var pDe=function(t){var e=t.direction,r=gt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:e==="vertical"});return X.createElement("div",{style:r.picker})},mDe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$R=function(t){var e=t.width,r=t.height,n=t.onChange,i=t.hsl,s=t.direction,a=t.pointer,o=t.styles,l=o===void 0?{}:o,A=t.className,c=A===void 0?"":A,u=gt(As({default:{picker:{position:"relative",width:e,height:r},hue:{radius:"2px"}}},l)),h=function(d){return n({a:1,h:d.h,l:.5,s:1})};return X.createElement("div",{style:u.picker,className:"hue-picker "+c},X.createElement(Ap,mDe({},u.hue,{hsl:i,pointer:a,onChange:h,direction:s})))};$R.propTypes={styles:Ve.object};$R.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:pDe,styles:{}};cs($R);var gDe=function(t){var e=t.onChange,r=t.hex,n=t.rgb,i=t.styles,s=i===void 0?{}:i,a=t.className,o=a===void 0?"":a,l=gt(As({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+r,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},s)),A=function(c,u){c.hex?Fc(c.hex)&&e({hex:c.hex,source:"hex"},u):(c.r||c.g||c.b)&&e({r:c.r||n.r,g:c.g||n.g,b:c.b||n.b,source:"rgb"},u)};return X.createElement(P0,{styles:s},X.createElement("div",{style:l.material,className:"material-picker "+o},X.createElement(Ht,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:r,onChange:A}),X.createElement("div",{style:l.split,className:"flexbox-fix"},X.createElement("div",{style:l.third},X.createElement(Ht,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:A})),X.createElement("div",{style:l.third},X.createElement(Ht,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:A})),X.createElement("div",{style:l.third},X.createElement(Ht,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:A})))))};cs(gDe);var vDe=function(t){var e=t.onChange,r=t.rgb,n=t.hsv,i=t.hex,s=gt({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(o,l){o["#"]?Fc(o["#"])&&e({hex:o["#"],source:"hex"},l):o.r||o.g||o.b?e({r:o.r||r.r,g:o.g||r.g,b:o.b||r.b,source:"rgb"},l):(o.h||o.s||o.v)&&e({h:o.h||n.h,s:o.s||n.s,v:o.v||n.v,source:"hsv"},l)};return X.createElement("div",{style:s.fields},X.createElement(Ht,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"h",value:Math.round(n.h),onChange:a}),X.createElement(Ht,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"s",value:Math.round(n.s*100),onChange:a}),X.createElement(Ht,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"v",value:Math.round(n.v*100),onChange:a}),X.createElement("div",{style:s.divider}),X.createElement(Ht,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"r",value:r.r,onChange:a}),X.createElement(Ht,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"g",value:r.g,onChange:a}),X.createElement(Ht,{style:{wrap:s.RGBwrap,input:s.RGBinput,label:s.RGBlabel},label:"b",value:r.b,onChange:a}),X.createElement("div",{style:s.divider}),X.createElement(Ht,{style:{wrap:s.HEXwrap,input:s.HEXinput,label:s.HEXlabel},label:"#",value:i.replace("#",""),onChange:a}),X.createElement("div",{style:s.fieldSymbols},X.createElement("div",{style:s.symbol},""),X.createElement("div",{style:s.symbol},"%"),X.createElement("div",{style:s.symbol},"%")))},yDe=function(t){var e=t.hsl,r=gt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":e.l>.5});return X.createElement("div",{style:r.picker})},wDe=function(){var t=gt({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return X.createElement("div",{style:t.pointer},X.createElement("div",{style:t.left},X.createElement("div",{style:t.leftInside})),X.createElement("div",{style:t.right},X.createElement("div",{style:t.rightInside})))},A4=function(t){var e=t.onClick,r=t.label,n=t.children,i=t.active,s=gt({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return X.createElement("div",{style:s.button,onClick:e},r||n)},bDe=function(t){var e=t.rgb,r=t.currentColor,n=gt({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+e.r+","+e.g+", "+e.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:r,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return X.createElement("div",null,X.createElement("div",{style:n.label},"new"),X.createElement("div",{style:n.swatches},X.createElement("div",{style:n.new}),X.createElement("div",{style:n.current})),X.createElement("div",{style:n.label},"current"))},_De=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function xDe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EDe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function BDe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var eU=function(t){BDe(e,t);function e(r){xDe(this,e);var n=EDe(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:r.hex},n}return _De(e,[{key:"render",value:function(){var r=this.props,n=r.styles,i=n===void 0?{}:n,s=r.className,a=s===void 0?"":s,o=gt(As({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},i));return X.createElement("div",{style:o.picker,className:"photoshop-picker "+a},X.createElement("div",{style:o.head},this.props.header),X.createElement("div",{style:o.body,className:"flexbox-fix"},X.createElement("div",{style:o.saturation},X.createElement($_,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:yDe,onChange:this.props.onChange})),X.createElement("div",{style:o.hue},X.createElement(Ap,{direction:"vertical",hsl:this.props.hsl,pointer:wDe,onChange:this.props.onChange})),X.createElement("div",{style:o.controls},X.createElement("div",{style:o.top,className:"flexbox-fix"},X.createElement("div",{style:o.previews},X.createElement(bDe,{rgb:this.props.rgb,currentColor:this.state.currentColor})),X.createElement("div",{style:o.actions},X.createElement(A4,{label:"OK",onClick:this.props.onAccept,active:!0}),X.createElement(A4,{label:"Cancel",onClick:this.props.onCancel}),X.createElement(vDe,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(X.Component);eU.propTypes={header:Ve.string,styles:Ve.object};eU.defaultProps={header:"Color Picker",styles:{}};cs(eU);var MDe=function(t){var e=t.onChange,r=t.rgb,n=t.hsl,i=t.hex,s=t.disableAlpha,a=gt({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:s}),o=function(l,A){l.hex?Fc(l.hex)&&e({hex:l.hex,source:"hex"},A):l.r||l.g||l.b?e({r:l.r||r.r,g:l.g||r.g,b:l.b||r.b,a:r.a,source:"rgb"},A):l.a&&(l.a<0?l.a=0:l.a>100&&(l.a=100),l.a/=100,e({h:n.h,s:n.s,l:n.l,a:l.a,source:"rgb"},A))};return X.createElement("div",{style:a.fields,className:"flexbox-fix"},X.createElement("div",{style:a.double},X.createElement(Ht,{style:{input:a.input,label:a.label},label:"hex",value:i.replace("#",""),onChange:o})),X.createElement("div",{style:a.single},X.createElement(Ht,{style:{input:a.input,label:a.label},label:"r",value:r.r,onChange:o,dragLabel:"true",dragMax:"255"})),X.createElement("div",{style:a.single},X.createElement(Ht,{style:{input:a.input,label:a.label},label:"g",value:r.g,onChange:o,dragLabel:"true",dragMax:"255"})),X.createElement("div",{style:a.single},X.createElement(Ht,{style:{input:a.input,label:a.label},label:"b",value:r.b,onChange:o,dragLabel:"true",dragMax:"255"})),X.createElement("div",{style:a.alpha},X.createElement(Ht,{style:{input:a.input,label:a.label},label:"a",value:Math.round(r.a*100),onChange:o,dragLabel:"true",dragMax:"100"})))},TDe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},N9=function(t){var e=t.colors,r=t.onClick,n=r===void 0?function(){}:r,i=t.onSwatchHover,s=gt({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!e||!e.length}),a=function(o,l){n({hex:o,source:"hex"},l)};return X.createElement("div",{style:s.colors,className:"flexbox-fix"},e.map(function(o){var l=typeof o=="string"?{color:o}:o,A=""+l.color+(l.title||"");return X.createElement("div",{key:A,style:s.swatchWrap},X.createElement(eh,TDe({},l,{style:s.swatch,onClick:a,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+l.color}})))}))};N9.propTypes={colors:Ve.arrayOf(Ve.oneOfType([Ve.string,Ve.shape({color:Ve.string,title:Ve.string})])).isRequired};var CDe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tU=function(t){var e=t.width,r=t.rgb,n=t.hex,i=t.hsv,s=t.hsl,a=t.onChange,o=t.onSwatchHover,l=t.disableAlpha,A=t.presetColors,c=t.renderers,u=t.styles,h=u===void 0?{}:u,d=t.className,f=d===void 0?"":d,m=gt(As({default:CDe({picker:{width:e,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+r.r+","+r.g+","+r.b+","+r.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},h),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},h),{disableAlpha:l});return X.createElement("div",{style:m.picker,className:"sketch-picker "+f},X.createElement("div",{style:m.saturation},X.createElement($_,{style:m.Saturation,hsl:s,hsv:i,onChange:a})),X.createElement("div",{style:m.controls,className:"flexbox-fix"},X.createElement("div",{style:m.sliders},X.createElement("div",{style:m.hue},X.createElement(Ap,{style:m.Hue,hsl:s,onChange:a})),X.createElement("div",{style:m.alpha},X.createElement(PR,{style:m.Alpha,rgb:r,hsl:s,renderers:c,onChange:a}))),X.createElement("div",{style:m.color},X.createElement(lp,null),X.createElement("div",{style:m.activeColor}))),X.createElement(MDe,{rgb:r,hsl:s,hex:n,onChange:a,disableAlpha:l}),X.createElement(N9,{colors:A,onClick:a,onSwatchHover:o}))};tU.propTypes={disableAlpha:Ve.bool,width:Ve.oneOfType([Ve.string,Ve.number]),styles:Ve.object};tU.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};cs(tU);var hm=function(t){var e=t.hsl,r=t.offset,n=t.onClick,i=n===void 0?function(){}:n,s=t.active,a=t.first,o=t.last,l=gt({default:{swatch:{height:"12px",background:"hsl("+e.h+", 50%, "+r*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:s,first:a,last:o}),A=function(c){return i({h:e.h,s:.5,l:r,source:"hsl"},c)};return X.createElement("div",{style:l.swatch,onClick:A})},SDe=function(t){var e=t.onClick,r=t.hsl,n=gt({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return X.createElement("div",{style:n.swatches},X.createElement("div",{style:n.swatch},X.createElement(hm,{hsl:r,offset:".80",active:Math.abs(r.l-.8)<i&&Math.abs(r.s-.5)<i,onClick:e,first:!0})),X.createElement("div",{style:n.swatch},X.createElement(hm,{hsl:r,offset:".65",active:Math.abs(r.l-.65)<i&&Math.abs(r.s-.5)<i,onClick:e})),X.createElement("div",{style:n.swatch},X.createElement(hm,{hsl:r,offset:".50",active:Math.abs(r.l-.5)<i&&Math.abs(r.s-.5)<i,onClick:e})),X.createElement("div",{style:n.swatch},X.createElement(hm,{hsl:r,offset:".35",active:Math.abs(r.l-.35)<i&&Math.abs(r.s-.5)<i,onClick:e})),X.createElement("div",{style:n.swatch},X.createElement(hm,{hsl:r,offset:".20",active:Math.abs(r.l-.2)<i&&Math.abs(r.s-.5)<i,onClick:e,last:!0})),X.createElement("div",{style:n.clear}))},IDe=function(){var t=gt({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return X.createElement("div",{style:t.picker})},rU=function(t){var e=t.hsl,r=t.onChange,n=t.pointer,i=t.styles,s=i===void 0?{}:i,a=t.className,o=a===void 0?"":a,l=gt(As({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},s));return X.createElement("div",{style:l.wrap||{},className:"slider-picker "+o},X.createElement("div",{style:l.hue},X.createElement(Ap,{style:l.Hue,hsl:e,pointer:n,onChange:r})),X.createElement("div",{style:l.swatches},X.createElement(SDe,{hsl:e,onClick:r})))};rU.propTypes={styles:Ve.object};rU.defaultProps={pointer:IDe,styles:{}};cs(rU);var Q9={};Object.defineProperty(Q9,"__esModule",{value:!0});var c4=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},RDe=_e,u4=UDe(RDe);function UDe(t){return t&&t.__esModule?t:{default:t}}function FDe(t,e){var r={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}var Vy=24,kDe=Q9.default=function(t){var e=t.fill,r=e===void 0?"currentColor":e,n=t.width,i=n===void 0?Vy:n,s=t.height,a=s===void 0?Vy:s,o=t.style,l=o===void 0?{}:o,A=FDe(t,["fill","width","height","style"]);return u4.default.createElement("svg",c4({viewBox:"0 0 "+Vy+" "+Vy,style:c4({fill:r,width:i,height:a},l)},A),u4.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},LDe=function(t){var e=t.color,r=t.onClick,n=r===void 0?function(){}:r,i=t.onSwatchHover,s=t.first,a=t.last,o=t.active,l=gt({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:e,marginBottom:"1px"},check:{color:GR(e),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:s,last:a,active:o,"color-#FFFFFF":e==="#FFFFFF",transparent:e==="transparent"});return X.createElement(eh,{color:e,style:l.color,onClick:n,onHover:i,focusStyle:{boxShadow:"0 0 4px "+e}},X.createElement("div",{style:l.check},X.createElement(kDe,null)))},PDe=function(t){var e=t.onClick,r=t.onSwatchHover,n=t.group,i=t.active,s=gt({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return X.createElement("div",{style:s.group},th(n,function(a,o){return X.createElement(LDe,{key:a,color:a,active:a.toLowerCase()===i,first:o===0,last:o===n.length-1,onClick:e,onSwatchHover:r})}))},nU=function(t){var e=t.width,r=t.height,n=t.onChange,i=t.onSwatchHover,s=t.colors,a=t.hex,o=t.styles,l=o===void 0?{}:o,A=t.className,c=A===void 0?"":A,u=gt(As({default:{picker:{width:e,height:r},overflow:{height:r,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),h=function(d,f){return n({hex:d,source:"hex"},f)};return X.createElement("div",{style:u.picker,className:"swatches-picker "+c},X.createElement(P0,null,X.createElement("div",{style:u.overflow},X.createElement("div",{style:u.body},th(s,function(d){return X.createElement(PDe,{key:d.toString(),group:d,active:a,onClick:h,onSwatchHover:i})}),X.createElement("div",{style:u.clear})))))};nU.propTypes={width:Ve.oneOfType([Ve.string,Ve.number]),height:Ve.oneOfType([Ve.string,Ve.number]),colors:Ve.arrayOf(Ve.arrayOf(Ve.string)),styles:Ve.object};nU.defaultProps={width:320,height:240,colors:[[Zh[900],Zh[700],Zh[500],Zh[300],Zh[100]],[Jh[900],Jh[700],Jh[500],Jh[300],Jh[100]],[qh[900],qh[700],qh[500],qh[300],qh[100]],[$h[900],$h[700],$h[500],$h[300],$h[100]],[ed[900],ed[700],ed[500],ed[300],ed[100]],[td[900],td[700],td[500],td[300],td[100]],[rd[900],rd[700],rd[500],rd[300],rd[100]],[nd[900],nd[700],nd[500],nd[300],nd[100]],[id[900],id[700],id[500],id[300],id[100]],["#194D33",Dm[700],Dm[500],Dm[300],Dm[100]],[sd[900],sd[700],sd[500],sd[300],sd[100]],[ad[900],ad[700],ad[500],ad[300],ad[100]],[od[900],od[700],od[500],od[300],od[100]],[ld[900],ld[700],ld[500],ld[300],ld[100]],[Ad[900],Ad[700],Ad[500],Ad[300],Ad[100]],[cd[900],cd[700],cd[500],cd[300],cd[100]],[ud[900],ud[700],ud[500],ud[300],ud[100]],[hd[900],hd[700],hd[500],hd[300],hd[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};cs(nU);var iU=function(t){var e=t.onChange,r=t.onSwatchHover,n=t.hex,i=t.colors,s=t.width,a=t.triangle,o=t.styles,l=o===void 0?{}:o,A=t.className,c=A===void 0?"":A,u=gt(As({default:{card:{width:s,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),h=function(d,f){Fc(d)&&e({hex:d,source:"hex"},f)};return X.createElement("div",{style:u.card,className:"twitter-picker "+c},X.createElement("div",{style:u.triangleShadow}),X.createElement("div",{style:u.triangle}),X.createElement("div",{style:u.body},th(i,function(d,f){return X.createElement(eh,{key:f,color:d,hex:d,style:u.swatch,onClick:h,onHover:r,focusStyle:{boxShadow:"0 0 4px "+d}})}),X.createElement("div",{style:u.hash},"#"),X.createElement(Ht,{label:null,style:{input:u.input},value:n.replace("#",""),onChange:h}),X.createElement("div",{style:u.clear})))};iU.propTypes={width:Ve.oneOfType([Ve.string,Ve.number]),triangle:Ve.oneOf(["hide","top-left","top-right"]),colors:Ve.arrayOf(Ve.string),styles:Ve.object};iU.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};cs(iU);var sU=function(t){var e=gt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return X.createElement("div",{style:e.picker})};sU.propTypes={hsl:Ve.shape({h:Ve.number,s:Ve.number,l:Ve.number,a:Ve.number})};sU.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var aU=function(t){var e=gt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return X.createElement("div",{style:e.picker})};aU.propTypes={hsl:Ve.shape({h:Ve.number,s:Ve.number,l:Ve.number,a:Ve.number})};aU.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var ODe=function(t){var e=t.onChange,r=t.rgb,n=t.hsl,i=t.hex,s=t.hsv,a=function(u,h){if(u.hex)Fc(u.hex)&&e({hex:u.hex,source:"hex"},h);else if(u.rgb){var d=u.rgb.split(",");vM(u.rgb,"rgb")&&e({r:d[0],g:d[1],b:d[2],a:1,source:"rgb"},h)}else if(u.hsv){var f=u.hsv.split(",");vM(u.hsv,"hsv")&&(f[2]=f[2].replace("%",""),f[1]=f[1].replace("%",""),f[0]=f[0].replace("",""),f[1]==1?f[1]=.01:f[2]==1&&(f[2]=.01),e({h:Number(f[0]),s:Number(f[1]),v:Number(f[2]),source:"hsv"},h))}else if(u.hsl){var m=u.hsl.split(",");vM(u.hsl,"hsl")&&(m[2]=m[2].replace("%",""),m[1]=m[1].replace("%",""),m[0]=m[0].replace("",""),c[1]==1?c[1]=.01:c[2]==1&&(c[2]=.01),e({h:Number(m[0]),s:Number(m[1]),v:Number(m[2]),source:"hsl"},h))}},o=gt({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=r.r+", "+r.g+", "+r.b,A=Math.round(n.h)+", "+Math.round(n.s*100)+"%, "+Math.round(n.l*100)+"%",c=Math.round(s.h)+", "+Math.round(s.s*100)+"%, "+Math.round(s.v*100)+"%";return X.createElement("div",{style:o.wrap,className:"flexbox-fix"},X.createElement("div",{style:o.fields},X.createElement("div",{style:o.double},X.createElement(Ht,{style:{input:o.input,label:o.label},label:"hex",value:i,onChange:a})),X.createElement("div",{style:o.column},X.createElement("div",{style:o.single},X.createElement(Ht,{style:{input:o.input2,label:o.label2},label:"rgb",value:l,onChange:a})),X.createElement("div",{style:o.single},X.createElement(Ht,{style:{input:o.input2,label:o.label2},label:"hsv",value:c,onChange:a})),X.createElement("div",{style:o.single},X.createElement(Ht,{style:{input:o.input2,label:o.label2},label:"hsl",value:A,onChange:a})))))},oU=function(t){var e=t.width,r=t.onChange,n=t.rgb,i=t.hsl,s=t.hsv,a=t.hex,o=t.header,l=t.styles,A=l===void 0?{}:l,c=t.className,u=c===void 0?"":c,h=gt(As({default:{picker:{width:e,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+n.r+", "+n.g+", "+n.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},A));return X.createElement("div",{style:h.picker,className:"google-picker "+u},X.createElement("div",{style:h.head},o),X.createElement("div",{style:h.swatch}),X.createElement("div",{style:h.saturation},X.createElement($_,{hsl:i,hsv:s,pointer:sU,onChange:r})),X.createElement("div",{style:h.body},X.createElement("div",{style:h.controls,className:"flexbox-fix"},X.createElement("div",{style:h.hue},X.createElement(Ap,{style:h.Hue,hsl:i,radius:"4px",pointer:aU,onChange:r}))),X.createElement(ODe,{rgb:n,hsl:i,hex:a,hsv:s,onChange:r})))};oU.propTypes={width:Ve.oneOfType([Ve.string,Ve.number]),styles:Ve.object,header:Ve.string};oU.defaultProps={width:652,styles:{},header:"Color picker"};cs(oU);const DDe="_InformationContainerPos_1dnrx_2",NDe="_scrollContainer_1dnrx_15",wM={InformationContainerPos:DDe,scrollContainer:NDe,"options-container":"_options-container_1dnrx_24"},QDe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAABE5AAAROQEb2ZNGAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxODowNS0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6NDctMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6NDctMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmU1ZTg4ZDczLWQ3YmItNjg0NS1iNDkxLWYxZTU0YmRhZDE1MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDphYTA0ZDdmOC1lYzY0LWU4NGQtYjI0My1kOGY0YTI1ZTdmM2YiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYTA0ZDdmOC1lYzY0LWU4NGQtYjI0My1kOGY0YTI1ZTdmM2YiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmFhMDRkN2Y4LWVjNjQtZTg0ZC1iMjQzLWQ4ZjRhMjVlN2YzZiIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxODowNS0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozNzgwNzA3Yy0zNDg5LTAzNDctYmEwNy1kOTFhY2ZkYmUwODYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6MjQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZTVlODhkNzMtZDdiYi02ODQ1LWI0OTEtZjFlNTRiZGFkMTUyIiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjQ3LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+okruHwAAA6NJREFUeNrt279LG2EYwHG1CCqKPwKOJQU3cXYqXZ0KofgPuBWcUmsgoouCFArS0UXaWUpTFxHcUnE4cO6fULoUbWnTFk2ftz4p19BoLve+d33vvsN3KWre97lPUvPm7Gs2m32U3xgCABgCAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABABnlV5VR6QH0mOpIq229VSacPj4E/oY7Y9b0TWZtY0AwO7Qp6WH0q70XrqSmh1qSLMO1zKrj9Hp8a90jbu65mkAxBv4svRR+nHD0MOZr5t3uJ75iGsxa18GQPRBl6Sgy0GHu5QWHa5rUR8j6rrMXkoAuH3Ag9KLHgYcbsfh+nZirs3sbRAA/x5uQXrb4zMs3AdpyMH6hvRnx1nbpe6xAIC/hzssHcUcbrjnUr/F9fXrz7S1PrPXYQBcD3dKemdxuKZP0pzFNc7pz7S5RrPnqVwDkAGMSTXLg211auNtmL4NPXW0RrP3sVwC0EOVwNFgW9XjPMv01anueI2By8Or/xKAbHhSeuN4sK3OpPvSQIT1Dej3nCW0RjOLyVwA0Jf9IKHBhk8IX0vFLtZX1K9tJLzGII3/DtJ4q1dLeLDhvkjH0jNpSXqkLem/HevXpLW+WtJvEZP+IKee4nB9qZ7kB0pJPvOPuLiRzgkKmQCgz/xDLmrkDpN4JUjikOeEi9lzJ64Pi1wDOOAixu7AZwBVLmDsqr7/DrAhfeVCRs7MbCMr7wLWuKCRW8vaOYC5cfIbF/bWzIwqWT0J3LRww0eWM7PZzPpnAeUUztl9yMyknJdPA7el71z0P5lZbOftfgDzSvCTi/97BuW83hG0lfNfDM3et/J+T+BKjgGscFfwNYL1DodF+yl/Pm/j/oP9Doc869wVfPNh0Z50Vzr3GMC57mEvjUMeH/8yqKJvh15Ko9I96cJjABe6h1HdUyPJQx4fAdyRFtruz/MdQDG0nwWzRwB0DyJTAPjjUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAhgDMSJ89BmDWPgOA3gGMS0+kVU8zax8HAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIACQlX4BjeT0VuSSEBUAAAAASUVORK5CYII=",HDe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoyMTozMy0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MTgtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MTgtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA4MDc2OWJhLTIwNzQtMjU0Zi1iNjM5LWJiZjEyMTFlMjljNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpjMTM0ZDhjYS01ZTFlLWMzNGMtOWZjNC0zZWU4MjRkNWE1YWMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMTM0ZDhjYS01ZTFlLWMzNGMtOWZjNC0zZWU4MjRkNWE1YWMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxMzRkOGNhLTVlMWUtYzM0Yy05ZmM0LTNlZTgyNGQ1YTVhYyIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoyMTozMy0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NzUzMzYxZC05NmIzLTgwNDctYTA0ZC0wODcxYmNiNzY4MDAiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6Mjk6NTctMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDgwNzY5YmEtMjA3NC0yNTRmLWI2MzktYmJmMTIxMWUyOWM1IiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjE4LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Yrc/VQAAAzxJREFUeNrt3b9LFnEcwHE3IW1oiUCF/gCXcgibmhyaDEqnWhoCaRXqUQhByKVVXAqsMbQyGgIHA6GhSdpNc7E/IBehp8/h94ErRLzoOc671/Ce7/O572t4/PHc9bTb7R41NzcBADcBAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAinVrudUfPY92o+0ut5uu1Q9AtQCsRe2SWgMAAAAAAAAAAEo/7KHoWnQl12i0USKAjXTN/AzZTEMAdB/AQvQjfRrvtBMdlAjgIF0zP0M20wIA3QewVOJBF20JAAAAAACAbgJYrDCARQD+30EPRjei66nsU/fVaLXCAFbTjKO5ubMdBgEoDuBR9Cv6+VeHFQZweMy82Q6PACgOYLbCB120WQCKA5ipEYAZAAAAoCCAxzUC8BiAk3+3fzeajCZSN6OXNQLwMu3U2W8y7TwEwNENaTe0CQCWW7cbDOA2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACcWQB3GgzgDgDLrbHoa/Ql1+foe40O+nvaKb9jtvMYAMutc9Hl9C3hTgPR0xoBeJp2yu+Y7XzO8wE8IAIAAAAAAABPCQPgTwD3ok/Req6P0V6FD3ovzZifOdvhHgD/9hKI7JPzpVwXoxcVBvAizZifeaDKL5fwsGgPiwYAAAAAAACAswJgKnqf3tzV6W20X+JB76dr5mfIZpoCoPsAeqPz6aeETheiDyUC+JCumZ8hm6kXAO8NBAAAAAAAoFQAfdG7EgFk1+oDoLuHOhI9jB6covvRVokAttI1TzNbtsMIAMUBPKnRXwOfAOD/AQAAAAAAACj04si6APDiyBMOejh6Fs3naqX/pqkLgPW0U37HbOdhAI7eoNXUbwZNAuC7gQAAAAAADQYw3mAA440BkD7svYlWotepV9FmgwFspnvQuR8r6R5N1hHAfIMPumjzdQQw52BP3RwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA2QQwHe1E36JtHdu3dI+mfTVMAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAAV7DcOsgfgT8DmTAAAAABJRU5ErkJggg==",jDe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAOxAAADsQH1g+1JAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0xMS0yN1QxNToyNToyMC0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMTEtMjdUMTU6MzM6MjgtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMTEtMjdUMTU6MzM6MjgtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjdlZDg3MTgxLTIyMTUtOGY0Ni1iYWM3LTZlNjE0ZmM3ZTljNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3ZWQ4NzE4MS0yMjE1LThmNDYtYmFjNy02ZTYxNGZjN2U5YzYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3ZWQ4NzE4MS0yMjE1LThmNDYtYmFjNy02ZTYxNGZjN2U5YzYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjdlZDg3MTgxLTIyMTUtOGY0Ni1iYWM3LTZlNjE0ZmM3ZTljNiIgc3RFdnQ6d2hlbj0iMjAyNC0xMS0yN1QxNToyNToyMC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgVVvLIAAAprSURBVHja7Z1rTFvXHcBdRZpAVatVWV5SpX2Z1g9LlCaCD2FLk4YlJOmgiVKyAkmhTSAPViAuYCgLwcBiygIYQ2KwsXHwdTDGBgyBBFhIAgbaoLXLa1IXVaqUSHzZ162VmsQ7x7meHOPHfZzre6/9//BTFAP/e+79/+65556XFV6vVwEkLnARQAC4CCAAAAIAIAAAAgAgAAACACAAAAIAIAAAAgAgAAACACBACA5e/pwzH1rPKUyTgwrzlEvxR2vt/z8fvz39CvrXSPME4Q1mX89n3nf1n0bDGIBCTrC9lvEiQBpiOZeqWw6VdA4CBLKM0IEA0hNgdeu4NfWw9ex/oiWdpwDBpCDWgQAiCpDdd7ZO5eoYYpN4ggJgJhGrQYDYC1CAWOKSeMICYO4jXCBAbARYg9jJJ/ECCOCnC7EeBBBOgG2If5NIvkAC+CkAAcgLsBXxHankCyzAU0Q5CEBWgKckky+wAJjniKMgAH8BtgiR/BgI4CcbBOAuQBrpal8EATBKEIC9AGtINvhEFuBHRDEIwE6AnUImP8YCYNoRSUInfXd3GedONSkJkC908kUQAKMFAZgJsBSnAniFSjw6F0Vmr0qR1VslawFWIZpikXwRBXiMSCYtwHumCl5jKqIKcNJY7+NYT11KrJIvogCYiySTn2FUKjLNKvkKoNVqfTR0XEhNEAEeIbaQSP4ufQnvxIsuwAeWGh+HLDX/JZBYSwBSFQCzX6jpWXJtA6TxTXzNdUO+eenqb3DMds/gdtW4vjCSCEwFyDLVtP5pSHvijFuXjzloqf4CfW7mKwEIQKOboPB0rmU+yW+bc7wbKrZmxprJUwBz89+cO4LjotetLr4SgAA0i4uLrxyxqXkJEC722D/nk/kI8FF/Q3W42ARqgYcgwIsCG/lW/0IJcMyhOSOgAM9AAIkL8LH9fHmouMP3Z18DAcgJ8ISvAKXudmWo2MXDrVV8BNhn/Kxj9MH8q8FxMwzKS4TmDNSDAGTe6y3BNUG010EWr4H4TjfjmF23Jzf5/0/oddANApDr3LGEgFQ/gJlw4kEAAQSQS08gCAACgAAgwAtmEWtBgMQVAFMEAoAAIAAIAAIwQXekv76x0+NMvbQwvPX8dcs+/JlIAtgx9VPmrJZb/e8UD7V8Sn/GJsb3u7vLth+wVOehMhUhUkCACMnHBP+9eWn8LS4S8BXgmENTFVwW/BlLCZbfM1W4UXl+oMv1LcIdgnoQIETy/TTftKXHWAC7crSjMMwgEataAAnApLzPEc9oHoIAQbju3XrjUN+f22IpQIRRQiEECMd+xNsJLwAmx1anYfMo4CGA3Xnv5i8kIgDmEeIiIjmhBaBj6ZhKwFEA+8iDudcjlYGNALsNZ7wHLleTerN5HO/zAXQsJBBCAHuWWaWPdGzcLmAjwB4kgACvuFpEUrxOCIkqgGpcf4SJBCwFsGcYlJZox86zqRvZSCWQAJh2xGlZCOCcmfhVLnWO6UpgXam7/WS0mEWu5spoErAQwB6p0efHcXdmLdvn//u9VUJ2dv2IUEpegJueWXznsJkUqjPdufpWtLhXF+4kfWg790U4ERgKYM8wRr/zuTT+dnWVxKrXM1sO6wLYduTomMZvmu7bE6pxGEUA312vuWHdwyL5rASIcdf3ETksDmUlwOfjXblsjmNYcG8KEEGHBDAFJxyT09eoGfpm4Q2mcTs8rlQOXcCxFgB3JJXHkwA+CT5xaGq4HrdswHAyMPFcYhgW3ZtQVc46+X8wV4oxAPaU3mBTsgJwWR2sq5syHxRji3THP26s5XLnp6Nnf2avyivWKChivVQFWIeY5CKBesqcFcvkd6M7n0vyMXuNSjGTj+mS8g4hqxH3uUhQcEVTq51z/Fbo5OdY1Zpd+hJOyU/vKvUesFSLLQDGJeUtYlw8TkzXfM2WLkTiA9sLXAeRJJB4P/fpm02yu4R18ZEA0780uWH0oedVXs/5uzNrMTnUOQ2fxGMyxK/6g5mkH7uSFGA9oZPUKcc6Cmsnez6w/X3yTaZlwn36bPv1oyVfIlV/MClS3im0gPA2sbpgft9daguq2nlX8ytG/LrLpJj4QCS9V3A53Ykh20mhEk++5AVQ0N2YshRgP//JHrFAJ4ft4rNlJIBtr6G856DlLJ6iFgjfMl8MA9+4y3L5xhAlPcQpZQFspSPaFZNFjw82VfKV4PjAym5v1bg+n5AERskLQP/uaXqygyQFKHOZC8Od58cOTTWfu3/w6xsh5yG23LbvICCBPASgfz+JnvYkKQEyDEqv/cs7G8IOPo3qCrmWtdTZdjrKNUwcAYL+9rHYAqQHTOyoGO09KoQAZS7BBfDKVYBk+uQfxVoAnPi9Kzt42sKd57EX7QDij4D2ucFtCStAQIy36UUSqlgIgMfzs0IP6bY1TPWu2Ab21NCFEr6NwJODzRXBcdXTvQcINQLlLUCImA8DllI9JyEAizl8bWGQ6mtg/AkQFL8+1ILLXErzbYahHCf3h/SuUjeq0pdfXrRR5pu2jcmyVMmhQwcEYIN6Yizl8OXGInRn52X2qrZnmiu/x8u0/BBcsQMCSFGAoDIUJVKyQQAQAAQIxPbNVGrxcOu/QIAEFQBzfsbqBgESWAD67UCsBFB5NnXnYWutCQSIbwEoTKW7s1g769il8zh3+MFluH7vq1WBnxU5mxv9fwMCyFsAXxId81MbuJTNODeyWWgRQADhBKA6pwd+R6KMxx1NGqEkAAFe9BiSnH9IlTq15T1fjW0mWc5Ls1e3FTqaGgmL8CThBaDL8oxU8hsmTNlClvXUUEstQQmMIAA5AajqUX1hjMpLql0AAgSMIvJK/omBC+pYLlTN729s5VnmnxANIACZzasppscZeTD3876F8V+XOH1fbOW/kyndLccO/DOmcSbuen7GsxaQx6xgGQhAOb6+weg1r8LdWRwlaVSB/S+tNdcMnzCJVzdtzuMhQRoI8HJ59nO5kIWOlsZosUc986+xfG5TTGuVHKpOH68rg2ItwBYOcwwp89L4xkhx+z233uR4l1KnnH+tjVZuzXXL+xziT4IABGbZFgycb40U79o9z6pc7neoT4KyYW05w7eCuFkdLKYAyWymnBcPt0bcrOqw9SyJQR4q94paT1CAJsQqEIBAg/CU60LYKvrK4sQvCXbYUIQEWJLyFjFSEoDRCqRcW/g7k3CXLXV6qCWkbKZ590YWx8oHAZiVLYnhWkTqaH9D+0tfZfPl2MYTjmY16cGbbPQ4Md0eeanB2bM4uvlQX81lhjF2SnmXMEkJQJevmOGqZCoEgg4vczgW3pR7jSwFEBllHEz7+s7f6QMCcCNbxsl/SvdvKEAAfhwVas8igZMv+e3i5UQ54d3LhK72t4IA5CmQQfJxg2+bHL4zSK6s57mjqZDsDNfaBwHI4+K4wbUQLEX6TgAQQDhWc9zqniRNfM4BBODPOo5fekFi0+eUwIEdEEAa6OjpVqQT/hMdN41keUEA4TAGwHnefkCMBiHKKZoAgPyBiwACwEUAAQAQAAABABAAAAEAEAAAAQAQAAABABAAAAEAEACIV/4HmscvZd8W84IAAAAASUVORK5CYII=",zDe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxOTozNC0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzM6MTEtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzM6MTEtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJkMTY5MDdlLWQyY2EtZDA0Mi05MWRjLTliZTMyYzYyYjlmOSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMzZkNWExYy1jOTYwLTAxNDktODlkMC00NzQ0NDMwM2QyNWQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMzZkNWExYy1jOTYwLTAxNDktODlkMC00NzQ0NDMwM2QyNWQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjAzNmQ1YTFjLWM5NjAtMDE0OS04OWQwLTQ3NDQ0MzAzZDI1ZCIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxOTozNC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo2N2JiZmQ0OC0yMGMzLTI0NDktODQyNS1kNWJmOTBlNzMwYjYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6MTQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MmQxNjkwN2UtZDJjYS1kMDQyLTkxZGMtOWJlMzJjNjJiOWY5IiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMzOjExLTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Q6I0lAAAAs1JREFUeNrt3TtrFFEYgOFE2HjFXgv9AyIYsbATMaAWQtqAYBPQ0ibCgoSA/yGbwsJ/o6Ag3gMWEkurTeGlcfwGzoIs7LKT3TXOOU/xFlnYkNnvIRNOZs4sVFW1oHLzIQDgQwBAAAgAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAiAiVt91l2OXkRVi3oTXQVg+uHfjX60bPiDfkUPADj48C+2ePh/dx2AgwF4ncHw695HHQCaA6gy6hYAZQPYAqBsANsAlA1gBwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAogDE14tRt359RL3ocbQSLQGQH4Aj0bsJ31tfF3EDgPwAvGzw/t/ROgDlAhhcY7gMQLkABpeXnQSgXAB1mwCUDeAjAGUD6ANQNoB9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCQ6wFQNoAnQ8fWiXYBKAfAnaFjOxXtATAewIdMhv85Ojp0bGfqq3sBGA/gcrodKrt9guO11Sm+XxkA0gd1P90Y2dbhb4w4rm8ATI5gpYVbx+8On/eHHoJRAdAMwVJ9j3zaNKE3ZmOFw6z+uTaj29HxEcdxLvoKQIHVd/XW9/XN4LcLAC0c/vno04xOLwC0bPj3oi8z/PsCgIYDWExLr/+iTlrkORutTbHYA8AMAXTTuvu8e5XO8XtTLPIAMAcATzNbVgagIYAdAAAAAAAAAAAAAADKA7CdGYA+AM0AbGUG4C0AzQDczAzABgDNAHTSHrs5DL9ebTwGQHME1zIY/vfoQjG7hc8BwXr0s8XDXyvqeQFzQnClhZeXPY8uFffEkDkiOB09ShDq/9rt/4f10/n+YXSiyGcGqfCnhgkAASAABIAAEAACQAAIAAEgAASAABAAAkAACAABIAAEgAAQAAJAAAgAAaBp+gMB5Yr6zMTlPAAAAABJRU5ErkJggg==",GDe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OSwgMjAyMy8wNi8yNS0yMDowMTo1NSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyNC0wNS0xNVQxNzoxOTo1Ny0wNjowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MjYtMDY6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjQtMDUtMTVUMTc6MzI6MjYtMDY6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmFmYmE3YzFhLWI0MTMtMGQ0MS05YmRkLTE2ZGY2MTllOTgyMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5MTFjMjQ0NC01M2M4LWI1NDgtYmYwZi03M2VhOGZlOTVmM2UiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5MTFjMjQ0NC01M2M4LWI1NDgtYmYwZi03M2VhOGZlOTVmM2UiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjkxMWMyNDQ0LTUzYzgtYjU0OC1iZjBmLTczZWE4ZmU5NWYzZSIgc3RFdnQ6d2hlbj0iMjAyNC0wNS0xNVQxNzoxOTo1Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI1LjEgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpmNjZhMzQ1Ni02ODczLWQ5NDYtOTRkMy1mZTYwZjQ5NzliNjYiIHN0RXZ0OndoZW49IjIwMjQtMDUtMTVUMTc6MzA6NDQtMDY6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyNS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YWZiYTdjMWEtYjQxMy0wZDQxLTliZGQtMTZkZjYxOWU5ODIxIiBzdEV2dDp3aGVuPSIyMDI0LTA1LTE1VDE3OjMyOjI2LTA2OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjUuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+F7DBkwAABCVJREFUeNrt3TtMFEEYwHHuAiYkNjRg74mJpSYUkCiGAhKxsLKXggQ6yi2wQUh8RMCGRJulEgotjgLwVaCVDYYeHzQaKU5FCRo4vwnfRdQgHvu4mZ1/8W/Iec7c/u7gdmd368rlch35Gy8CAHgRAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAJLpUhjkpW5pQfoolaRPjlXSsZs59Jg5AeDgDZ+T2qRFaUcqZyQzl0c6txwA9n/X9+m7ppzR1nWOeQD8DaBD+pzhjV/JzLEDAL9v/JPSmgcbv5KZaysAfv3ev+PRxq80acPfAzYAKEgrHgIwcy4AIAwGpS8eAjBzHgBAGEx7uPErhQAIg6LHAIoACIM5jwHMAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIuA3pjbYBgOwDMOvyNqUZ6azUuGcMjfqz+/qYHQBkC8BXaUI6/p/rE8b13wAgAwB+SOel+irGVC91St8B4DYAs8K4J8LYehJepQyAhAEMVfPO3+eTYAgAbgJYinGMSwBwC8A36VyMY+zU5wSAIwCWpeYYx9gsvQKAOwAe7P2eH8MYzX6ChwBwB8DtOE+60PMWxwHgDoCRBMY5AgB3AIzHeQaufgJMAIC/AQDg8beAZQC4A2Argf0AWwBwa0/gc+lIDONr0OdiT6CjxwJyEcaW41iA2wDeS70RxnZBnwMADq8HMOfhXzzEuHpTuG4BAFJaEWQO5IxKp/61f0C/75vHXEvo4A8Aarwm8J00K13WpV9HtYL+bFYfw5pAT5aFb2osC+e8AABkFcBOxADgGIBt6YU0pUfwhqWrh2xYn2NKn3MbAHYDeCId0713ed2RE0d5fc4W6TEA7APwVuqPsgK4ypXC/XpKGQAsAPBB6qrBuLti2EsIgIgAzFk/fTUce5+OAQA1AjCTxsf+Ab8OZgBQGwDmtiynLRj/mQj3OQBABAAv41z1E2H8LToWAKQMwOy3b7Bg/A06FgCkDOCmRbe7uQWA9AGMWgRgFADpAxizCMAYAAAAAAAAgL8BAJAagOsWAbgBgPQBPJWaLBh/k/QMAOkDMIsz7lkw/rsRFooAIIbDweY27avS65Rb1f+bw8EsCgUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCCAoscAigAIg2mPAYQACIPBFC7GZGNmzgMA2L0+z4qHAMycCwDYPf9+0kMAk3He08BZAIqgVVrzaOObuZ6w4bW3AoAiaI9wkqVLmTm22/K62wTA/Cq4kvCNGmvdul5TIA+A/RG0SQspXqwxrYtULurccja95lYB+OOSrd3SvH4ilPR6AC5V0rHP6y1o8za+1lYCIAAQAAgABAACAAGAAEAAIAAQAAgABAACAAGAAEAAIAAQAAgABAACAFXRT5xealqlzx1wAAAAAElFTkSuQmCC",VDe="_InformationContainerPos_1m76y_2",WDe="_scrollContainer_1m76y_15",KDe="_centerAlign_1m76y_25",YDe="_traitInfoTitle_1m76y_28",XDe="_dropdownFlex_1m76y_38",ZDe="_checkboxFlex_1m76y_44",JDe="_simpleFlex_1m76y_49",qDe="_traitInfoText_1m76y_55",$De="_dropdownBase_1m76y_64",eNe="_dropdownControl_1m76y_74",tNe="_dropdownControlSmall_1m76y_80",rNe="_flexSelect_1m76y_106",nNe="_checked_1m76y_163",iNe="_checkmark_1m76y_167",sNe="_checkboxHolder_1m76y_180",aNe="_actionButton_1m76y_189",oNe="_tabHolder_1m76y_209",lNe="_tabButton_1m76y_215",ANe="_tabButtonSelected_1m76y_235",Ye={InformationContainerPos:VDe,scrollContainer:WDe,centerAlign:KDe,traitInfoTitle:YDe,dropdownFlex:XDe,checkboxFlex:ZDe,simpleFlex:JDe,traitInfoText:qDe,dropdownBase:$De,dropdownControl:eNe,dropdownControlSmall:tNe,"input-box":"_input-box_1m76y_87",flexSelect:rNe,"arrow-button":"_arrow-button_1m76y_114","left-button":"_left-button_1m76y_130","right-button":"_right-button_1m76y_137","anim-button":"_anim-button_1m76y_144","custom-checkbox":"_custom-checkbox_1m76y_149","checkbox-container":"_checkbox-container_1m76y_154",checked:nNe,checkmark:iNe,checkboxHolder:sNe,actionButton:aNe,tabHolder:oNe,tabButton:lNe,tabButtonSelected:ANe},cNe="_slider_1y6nx_1",uNe="_infoContainer_1y6nx_13",Wy={"slider-container":"_slider-container_1y6nx_1",slider:cNe,infoContainer:uNe,"input-box":"_input-box_1y6nx_18"};function fu({title:t,value:e,min:r,max:n,onChange:i,step:s,stepBox:a}){return O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:Wy.infoContainer,children:[t,a&&O.jsx("input",{type:"number",min:"0",max:"100",value:e,onChange:i,className:Wy["input-box"],step:a})]}),O.jsx("div",{className:Wy["slider-container"],children:O.jsx("input",{type:"range",min:r,max:n,value:e,onChange:i,className:Wy.slider,step:s})})]})}function hNe({selectedTrait:t,selectedVRM:e}){const{animationManager:r,characterManager:n}=_e.useContext(Yr),[i,s]=_e.useState(0),[a,o]=_e.useState(0),[l,A]=_e.useState(0);_e.useEffect(()=>{var f,m,g;e!=null&&(A((f=e.data)==null?void 0:f.cullingLayer),s(((m=e.data)==null?void 0:m.cullingDistance[0])||0),o(((g=e.data)==null?void 0:g.cullingDistance[1])||0))},[e]);const c=f=>{s(f.target.value),e!=null&&e.data&&(e.data.cullingDistance[0]=f.target.value)},u=f=>{o(f.target.value),e!=null&&e.data&&(e.data.cullingDistance[1]=f.target.value)},h=f=>{e!=null&&e.data&&(A(f.target.value),e.data.cullingLayer=f.target.value)},d=()=>{n.updateCullHiddenMeshes()};return O.jsx("div",{children:O.jsxs("div",{className:Ye.InformationContainerPos,children:[O.jsx(lo,{title:"Trait Information",width:180,right:20}),O.jsx("div",{className:Ye.scrollContainer,children:t!=null?O.jsxs(O.Fragment,{children:[O.jsx("div",{className:Ye.traitInfoTitle,children:"Trait ID"}),O.jsx("div",{className:Ye.traitInfoText,children:t==null?void 0:t.id}),O.jsx("div",{className:Ye.traitInfoTitle,children:"Trait Name"}),O.jsx("div",{className:Ye.traitInfoText,children:t==null?void 0:t.name}),O.jsx("div",{className:Ye.traitInfoTitle,children:"Description"}),O.jsx("div",{className:Ye.traitInfoText,children:(t==null?void 0:t.description)||"A nice "+(t==null?void 0:t.name)}),O.jsx("div",{className:Ye.traitInfoTitle,children:"Culling Options"}),O.jsx("br",{}),O.jsxs("div",{className:Ye.traitInfoText,children:["Culling Layer",O.jsx("input",{type:"number",min:"0",max:"100",value:l,onChange:h,className:Ye["input-box"],step:1}),O.jsx("br",{}),O.jsx("br",{}),O.jsx(fu,{title:"Out Distance",value:i,onChange:c,min:0,max:1,step:.001,stepBox:.01}),O.jsx("br",{}),O.jsx(fu,{title:"In Distance",value:a,onChange:u,min:0,max:1,step:.001,stepBox:.01}),O.jsx("div",{className:Ye.actionButton,onClick:d,children:O.jsx("div",{children:"Update Culling "})})]})]}):O.jsx(O.Fragment,{children:O.jsx("div",{className:Ye.traitInfoTitle,children:"No Trait Selected"})})})]})})}var H9={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(_e),r=n(xG);function n(x){return x&&x.__esModule?x:{default:x}}function i(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return i=function(){return x},x}function s(x){if(x&&x.__esModule)return x;if(x===null||a(x)!=="object"&&typeof x!="function")return{default:x};var B=i();if(B&&B.has(x))return B.get(x);var M={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in x)if(Object.prototype.hasOwnProperty.call(x,I)){var L=R?Object.getOwnPropertyDescriptor(x,I):null;L&&(L.get||L.set)?Object.defineProperty(M,I,L):M[I]=x[I]}return M.default=x,B&&B.set(x,M),M}function a(x){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?a=function(B){return typeof B}:a=function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},a(x)}function o(){return o=Object.assign||function(x){for(var B=1;B<arguments.length;B++){var M=arguments[B];for(var R in M)Object.prototype.hasOwnProperty.call(M,R)&&(x[R]=M[R])}return x},o.apply(this,arguments)}function l(x,B){var M=Object.keys(x);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(x);B&&(R=R.filter(function(I){return Object.getOwnPropertyDescriptor(x,I).enumerable})),M.push.apply(M,R)}return M}function A(x){for(var B=1;B<arguments.length;B++){var M=arguments[B]!=null?arguments[B]:{};B%2?l(M,!0).forEach(function(R){c(x,R,M[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(M)):l(M).forEach(function(R){Object.defineProperty(x,R,Object.getOwnPropertyDescriptor(M,R))})}return x}function c(x,B,M){return B in x?Object.defineProperty(x,B,{value:M,enumerable:!0,configurable:!0,writable:!0}):x[B]=M,x}function u(x,B){if(!(x instanceof B))throw new TypeError("Cannot call a class as a function")}function h(x,B){for(var M=0;M<B.length;M++){var R=B[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,R.key,R)}}function d(x,B,M){return B&&h(x.prototype,B),M&&h(x,M),x}function f(x,B){return B&&(a(B)==="object"||typeof B=="function")?B:g(x)}function m(x){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(B){return B.__proto__||Object.getPrototypeOf(B)},m(x)}function g(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function p(x,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(B&&B.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),B&&v(x,B)}function v(x,B){return v=Object.setPrototypeOf||function(M,R){return M.__proto__=R,M},v(x,B)}var y="Select...",_=function(x){p(B,x);function B(M){var R;return u(this,B),R=f(this,m(B).call(this,M)),R.state={selected:R.parseValue(M.value,M.options)||{label:typeof M.placeholder>"u"?y:M.placeholder,value:""},isOpen:!1},R.dropdownRef=(0,e.createRef)(),R.mounted=!0,R.handleDocumentClick=R.handleDocumentClick.bind(g(R)),R.fireChangeEvent=R.fireChangeEvent.bind(g(R)),R}return d(B,[{key:"componentDidUpdate",value:function(M){if(this.props.value!==M.value)if(this.props.value){var R=this.parseValue(this.props.value,this.props.options);R!==this.state.selected&&this.setState({selected:R})}else this.setState({selected:{label:typeof this.props.placeholder>"u"?y:this.props.placeholder,value:""}})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(M){this.props.onFocus&&typeof this.props.onFocus=="function"&&this.props.onFocus(this.state.isOpen),!(M.type==="mousedown"&&M.button!==0)&&(M.stopPropagation(),M.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(M,R){var I;if(typeof M=="string")for(var L=0,D=R.length;L<D;L++)if(R[L].type==="group"){var w=R[L].items.filter(function(b){return b.value===M});w.length&&(I=w[0])}else typeof R[L].value<"u"&&R[L].value===M&&(I=R[L]);return I||M}},{key:"setValue",value:function(M,R){var I={selected:{value:M,label:R},isOpen:!1};this.fireChangeEvent(I),this.setState(I)}},{key:"fireChangeEvent",value:function(M){M.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(M.selected)}},{key:"renderOption",value:function(M){var R,I=M.value;typeof I>"u"&&(I=M.label||M);var L=M.label||M.value||M,D=I===this.state.selected.value||I===this.state.selected,w=(R={},c(R,"".concat(this.props.baseClassName,"-option"),!0),c(R,M.className,!!M.className),c(R,"is-selected",D),R),b=(0,r.default)(w),S=Object.keys(M.data||{}).reduce(function(F,k){return A({},F,c({},"data-".concat(k),M.data[k]))},{});return e.default.createElement("div",o({key:I,className:b,onMouseDown:this.setValue.bind(this,I,L),onClick:this.setValue.bind(this,I,L),role:"option","aria-selected":D?"true":"false"},S),L)}},{key:"buildMenu",value:function(){var M=this,R=this.props,I=R.options,L=R.baseClassName,D=I.map(function(w){if(w.type==="group"){var b=e.default.createElement("div",{className:"".concat(L,"-title")},w.name),S=w.items.map(function(F){return M.renderOption(F)});return e.default.createElement("div",{className:"".concat(L,"-group"),key:w.name,role:"listbox",tabIndex:"-1"},b,S)}else return M.renderOption(w)});return D.length?D:e.default.createElement("div",{className:"".concat(L,"-noresults")},"No options found")}},{key:"handleDocumentClick",value:function(M){this.mounted&&(this.dropdownRef.current.contains(M.target)||this.state.isOpen&&this.setState({isOpen:!1}))}},{key:"isValueSelected",value:function(){return typeof this.state.selected=="string"||this.state.selected.value!==""}},{key:"render",value:function(){var M,R,I,L,D,w=this.props,b=w.baseClassName,S=w.controlClassName,F=w.placeholderClassName,k=w.menuClassName,Q=w.arrowClassName,z=w.arrowClosed,j=w.arrowOpen,T=w.className,H=this.props.disabled?"Dropdown-disabled":"",me=typeof this.state.selected=="string"?this.state.selected:this.state.selected.label,ee=(0,r.default)((M={},c(M,"".concat(b,"-root"),!0),c(M,T,!!T),c(M,"is-open",this.state.isOpen),M)),U=(0,r.default)((R={},c(R,"".concat(b,"-control"),!0),c(R,S,!!S),c(R,H,!!H),R)),se=(0,r.default)((I={},c(I,"".concat(b,"-placeholder"),!0),c(I,F,!!F),c(I,"is-selected",this.isValueSelected()),I)),le=(0,r.default)((L={},c(L,"".concat(b,"-menu"),!0),c(L,k,!!k),L)),Ae=(0,r.default)((D={},c(D,"".concat(b,"-arrow"),!0),c(D,Q,!!Q),D)),ge=e.default.createElement("div",{className:se},me),ne=this.state.isOpen?e.default.createElement("div",{className:le,"aria-expanded":"true"},this.buildMenu()):null;return e.default.createElement("div",{ref:this.dropdownRef,className:ee},e.default.createElement("div",{className:U,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},ge,e.default.createElement("div",{className:"".concat(b,"-arrow-wrapper")},j&&z?this.state.isOpen?j:z:e.default.createElement("span",{className:Ae}))),ne)}}]),B}(e.Component);_.defaultProps={baseClassName:"Dropdown"};var E=_;t.default=E})(H9);const DA=iA(H9);function dNe({selectedTrait:t,selectedVRM:e}){const{manifest:r,loraDataGenerator:n,sceneElements:i}=X.useContext(Yr),[s,a]=_e.useState([]),[o,l]=_e.useState(null),A=u=>{(r==null?void 0:r.loras)!=null&&(l(r.loras[u.value]),console.log(r.loras[u.value]))},c=async()=>{const u=i.parent;u.remove(i),await n.createLoraData(o),u.add(i)};return _e.useEffect(()=>{if((r==null?void 0:r.loras)!=null){const u=r.loras.map((h,d)=>({value:d,label:h.name,description:h.description,manifest:h.manifest}));a(u)}},[r]),O.jsx("div",{children:O.jsxs("div",{className:Ye.InformationContainerPos,children:[O.jsx(lo,{title:"Lora Creation",width:180,right:20}),O.jsxs("div",{className:Ye.scrollContainer,children:[O.jsx("div",{className:Ye.traitInfoTitle,children:"Lora Manifests"}),O.jsx(DA,{className:Ye.dropdownControl,options:s,onChange:A,placeholder:"Select an option"}),";",O.jsx("div",{className:Ye.traitInfoText,children:(o==null?void 0:o.description)||""}),o!=null&&O.jsx("div",{className:Ye.actionButton,onClick:c,children:O.jsx("div",{children:"  Create Lora Data "})})]})]})})}function fNe({selectedTrait:t,selectedVRM:e}){const{manifest:r,spriteAtlasGenerator:n,sceneElements:i}=X.useContext(Yr),[s,a]=_e.useState([]),[o,l]=_e.useState(""),[A,c]=_e.useState(null),u=d=>{(r==null?void 0:r.sprites)!=null&&(l(r.sprites[d.value].description),c(r.sprites[d.value]))},h=async()=>{const d=i.parent;d.remove(i),await n.createSpriteAtlas(A),d.add(i)};return _e.useEffect(()=>{if((r==null?void 0:r.sprites)!=null){const d=r.sprites.map((f,m)=>({value:m,label:f.name,description:f.description,manifest:f.manifest}));a(d)}},[r]),O.jsx("div",{children:O.jsxs("div",{className:Ye.InformationContainerPos,children:[O.jsx(lo,{title:"Sprite Creation",width:180,right:20}),O.jsxs("div",{className:Ye.scrollContainer,children:[O.jsx("div",{className:Ye.traitInfoTitle,children:"Sprite Manifests"}),O.jsx(DA,{className:Ye.dropdownControl,options:s,onChange:u,placeholder:"Select an option"}),";",O.jsx("div",{className:Ye.traitInfoText,children:o||""}),A!=null&&O.jsx("div",{className:Ye.actionButton,onClick:h,children:O.jsx("div",{children:"  Create Sprite Data "})})]})]})})}const h4=4096;function pNe({selectedTrait:t,traitGroupName:e}){const{manifest:r,thumbnailsGenerator:n,sceneElements:i,characterManager:s}=X.useContext(Yr),[a,o]=_e.useState([]),[l,A]=_e.useState(""),[c,u]=_e.useState(""),[h,d]=_e.useState(""),[f,m]=_e.useState(!1),[g,p]=_e.useState(512),[v,y]=_e.useState(512),[_,E]=_e.useState(.1),[x,B]=_e.useState(.1),[M,R]=_e.useState("center"),[I,L]=_e.useState("center"),[D,w]=_e.useState("center"),[b,S]=_e.useState("head"),[F,k]=_e.useState("chest"),[Q,z]=_e.useState(!0),[j,T]=_e.useState(!1),H=[{label:"center"},{label:"left"},{label:"right"}],me=[{label:"center"},{label:"top"},{label:"bottom"}],ee=[{label:"center"},{label:"front"},{label:"back"}],U=[{label:"head"},{label:"neck"},{label:"chest"},{label:"spine"},{label:"hips"},{label:"upperLeg"},{label:"lowerLeg"},{label:"foot"}],se=oe=>{(r==null?void 0:r.thumbnails)!=null&&(A(r.thumbnails[oe.value].description),d(r.thumbnails[oe.value].manifest),u(r.thumbnails[oe.value].name))},le=(oe,Z,$,ce)=>isNaN(oe)?ce:oe>$?$:oe<Z?Z:oe,Ae=oe=>{const Z=parseInt(oe.target.value);p(le(Z,1,h4,512))},ge=oe=>{const Z=parseInt(oe.target.value);y(le(Z,1,h4,512))},ne=oe=>{const Z=parseFloat(oe.target.value);E(le(Z,0,1,.1))},de=oe=>{const Z=parseFloat(oe.target.value);B(le(Z,0,1,.1))},Te=oe=>{m(oe)},re=async()=>{const oe=i.parent;oe.remove(i),await n.createThumbnails(r.thumbnails[0]),oe.add(i)},N=(oe=!0)=>({topFrameOffset:x,bottomFrameOffset:_,thumbnailsWidth:g,thumbnailsHeight:v,backgroundColor:[0,0,0,0],thumbnailsCollection:[{traitGroup:e,cameraPosition:I+"-"+D+"-"+M,topBoneName:b==="upperLeg"||b==="lowerLeg"||b==="foot"?"left"+b[0].toUpperCase()+b.slice(1):b,topBoneMaxVertex:Q,bottomBoneName:F==="upperLeg"||F==="lowerLeg"||b==="foot"?"left"+F[0].toUpperCase()+F.slice(1):F,bottomBoneMaxVertex:j,saveOnlyIDs:oe?null:t.id}]}),he=async(oe=!1)=>{s.storeCurrentAvatar();const Z=i.parent;Z.remove(i),oe?await n.createThumbnailsWithObjectData(N(),!1,null,e+"_thumbnails"):await n.createThumbnailsWithObjectData(N(!1),!1),Z.add(i),s.loadStoredAvatar()};return _e.useEffect(()=>{if((r==null?void 0:r.thumbnails)!=null){const oe=r.thumbnails.map((Z,$)=>({value:$,label:Z.name,description:Z.description,manifest:Z.manifest}));o(oe)}},[r]),O.jsx("div",{children:O.jsxs("div",{className:Ye.InformationContainerPos,children:[O.jsx(lo,{title:"Thumbnail Creation",width:180,right:20}),O.jsxs("div",{className:Ye.scrollContainer,children:[O.jsxs("div",{className:Ye.tabHolder,children:[O.jsx("div",{className:Ye.tabButton+(f?"":" "+Ye.tabButtonSelected),onClick:()=>{Te(!1)},children:O.jsxs("div",{children:["  ","Custom"," "]})}),O.jsx("div",{className:Ye.tabButton+(f?" "+Ye.tabButtonSelected:""),onClick:()=>{Te(!0)},children:O.jsxs("div",{children:["  ","Manifest"," "]})})]}),O.jsx("br",{}),f?O.jsxs(O.Fragment,{children:[O.jsx("div",{className:Ye.traitInfoTitle+" "+Ye.centerAlign,children:"Thumbnail Manifests"}),O.jsx(DA,{className:Ye.dropdownControl,options:a,value:c,onChange:se,placeholder:"Select an option"}),";",O.jsx("div",{className:Ye.traitInfoText,children:l||""}),h!=""&&O.jsx("div",{className:Ye.actionButton,onClick:re,children:O.jsx("div",{children:"  Create Thumbnails "})})]}):O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:Ye.traitInfoText,children:[O.jsx("div",{className:Ye.traitInfoTitle+" "+Ye.centerAlign,style:{margin:"10px 0px 10px"},children:"Resolution"}),"Width ",O.jsx("input",{value:g,className:Ye["input-box"],step:1,onChange:oe=>{p(oe.target.value)},onBlur:Ae}),O.jsx("br",{}),"Height ",O.jsx("input",{value:v,className:Ye["input-box"],step:1,onChange:oe=>{y(oe.target.value)},onBlur:ge}),O.jsx("br",{}),"Top Spacing ",O.jsx("input",{value:_,className:Ye["input-box"],step:.1,onChange:oe=>{E(oe.target.value)},onBlur:ne}),O.jsx("br",{}),"Bottom Spacing ",O.jsx("input",{value:x,className:Ye["input-box"],step:.1,onChange:oe=>{B(oe.target.value)},onBlur:de}),O.jsx("br",{}),O.jsx("div",{className:Ye.traitInfoTitle+" "+Ye.centerAlign,style:{margin:"20px"},children:"Camera Position"})]}),O.jsxs("div",{className:Ye.dropdownFlex,children:[O.jsx("div",{className:Ye.traitInfoTitle,style:{margin:"0px"},children:"X"}),O.jsx(DA,{className:Ye.dropdownControlSmall,options:H,onChange:oe=>{L(oe.label)},value:I})]}),O.jsxs("div",{className:Ye.dropdownFlex,children:[O.jsx("div",{className:Ye.traitInfoTitle,style:{margin:"0px"},children:"Y"}),O.jsx(DA,{className:Ye.dropdownControlSmall,options:me,onChange:oe=>{w(oe.label)},value:D})]}),O.jsxs("div",{className:Ye.dropdownFlex,children:[O.jsx("div",{className:Ye.traitInfoTitle,style:{margin:"0px"},children:"Z"}),O.jsx(DA,{className:Ye.dropdownControlSmall,options:ee,onChange:oe=>{R(oe.label)},value:M})]}),O.jsx("div",{className:Ye.traitInfoTitle+" "+Ye.centerAlign,style:{margin:"30px 0px 30px"},children:"Target Bones"}),O.jsxs("div",{className:Ye.dropdownFlex,style:{justifyContent:"space-between"},children:[O.jsx("div",{className:Ye.traitInfoTitle,style:{margin:"0px"},children:"Top"}),O.jsx(DA,{className:Ye.dropdownControlSmall,options:U,onChange:oe=>{S(oe.label)},value:b})]}),O.jsxs("div",{className:Ye.dropdownFlex,style:{justifyContent:"space-between"},children:[O.jsx("div",{className:Ye.traitInfoTitle,style:{margin:"0px"},children:"Bottom"}),O.jsx(DA,{className:Ye.dropdownControlSmall,options:U,onChange:oe=>{k(oe.label)},value:F})]}),O.jsxs("div",{style:{textAlign:"left"},children:[O.jsxs("div",{className:Ye.checkboxFlex,style:{marginTop:"20px"},children:[O.jsx("input",{type:"checkbox",checked:Q,onChange:oe=>{z(oe.target.checked)}}),O.jsx("div",{className:Ye.traitInfoText,style:{margin:"0px",fontSize:"12px"},children:`Top bone ${Q?"uses Top":"uses Low"} Vertex`})]}),O.jsxs("div",{className:Ye.checkboxFlex,style:{marginTop:"10px"},children:[O.jsx("input",{type:"checkbox",checked:j,onChange:oe=>{T(oe.target.checked)}}),O.jsx("div",{className:Ye.traitInfoText,style:{margin:"0px",fontSize:"12px"},children:`Bottom bone ${j?"uses Top":"uses Low"} Vertex`})]})]}),e==""?O.jsx("div",{className:Ye.traitInfoText+" "+Ye.centerAlign,style:{marginTop:"40px"},children:"Please choose a trait category in the left side menu."}):O.jsxs(O.Fragment,{children:[O.jsx("div",{className:Ye.traitInfoTitle+" "+Ye.centerAlign,style:{marginTop:"20px"},children:"Generate"}),O.jsx("div",{className:Ye.traitInfoText+" "+Ye.centerAlign,style:{margin:"0px auto 20px"},children:"( "+e+" )"}),O.jsxs("div",{className:Ye.simpleFlex,style:{marginTop:"0px"},children:[O.jsx("div",{className:Ye.actionButton,style:{margin:"0px"},onClick:()=>{he(!1)},children:O.jsx("div",{children:"  Current "})}),O.jsx("div",{className:Ye.actionButton,style:{margin:"0px"},onClick:()=>{he(!0)},children:O.jsx("div",{children:"  All "})})]})]})]})]})]})})}const mNe="_InformationContainerPos_10g06_2",gNe="_scrollContainer_10g06_15",vNe="_centerAlign_10g06_25",yNe="_traitInfoTitle_10g06_28",wNe="_traitInfoText_10g06_39",bNe="_checked_10g06_65",_Ne="_checkmark_10g06_69",xNe="_checkboxHolder_10g06_82",ENe="_actionButton_10g06_92",IA={InformationContainerPos:mNe,scrollContainer:gNe,centerAlign:vNe,traitInfoTitle:yNe,traitInfoText:wNe,"custom-checkbox":"_custom-checkbox_10g06_51","checkbox-container":"_checkbox-container_10g06_56",checked:bNe,checkmark:_Ne,checkboxHolder:xNe,actionButton:ENe};function BNe(){const{characterManager:t,moveCamera:e}=X.useContext(Yr),[r,n]=X.useState(!1),[i,s]=X.useState(1),a=t.emotionManager.availableEmotions;_e.useEffect(()=>{e({targetY:1.8,distance:2})},[]);const o=l=>{t.emotionManager.playEmotion(l,void 0,r,i)};return O.jsx("div",{children:O.jsxs("div",{className:IA.InformationContainerPos,children:[O.jsx(lo,{title:"Emotions",width:180,right:20}),O.jsxs("div",{className:IA.scrollContainer,children:[O.jsx("div",{className:IA.traitInfoText,children:"View different emotions"}),O.jsxs("div",{className:IA.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:IA["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:r,onChange:()=>n(!r)}),O.jsx("div",{className:IA["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),O.jsx("div",{style:{color:"white"},children:"Constant Emotion"})]}),O.jsx("br",{}),O.jsxs("div",{className:IA.traitInfoText,children:["Intensity: ",parseFloat(i.toFixed(2))]}),O.jsx(fu,{title:"",value:parseFloat(i.toFixed(2)),onChange:l=>s(parseFloat(l.currentTarget.value.toString())),min:0,max:1,step:.01}),O.jsx("br",{}),a.map((l,A)=>O.jsx("div",{className:IA.actionButton,onClick:()=>{o(l)},children:O.jsxs("div",{children:["  ",l," "]})},A))]})]})})}function MNe({selectedTrait:t,selectedVRM:e,traitGroupName:r}){const[n,i]=X.useState(""),s=a=>{a!=n?i(a):i("")};return O.jsxs("div",{children:[n=="Information"&&O.jsx(hNe,{selectedTrait:t,selectedVRM:e}),n=="LoraCreation"&&O.jsx(dNe,{selectedTrait:t,selectedVRM:e}),n=="SpriteCreation"&&O.jsx(fNe,{selectedTrait:t,selectedVRM:e}),n=="ThumbnailCreation"&&O.jsx(pNe,{selectedTrait:t,traitGroupName:r}),n=="EmotionManager"&&O.jsx(BNe,{}),O.jsxs("div",{className:wM.InformationContainerPos,children:[O.jsx(lo,{title:"Tools",width:90,right:0}),O.jsx("div",{className:wM.scrollContainer,children:O.jsxs("div",{className:wM.optionsContainer,children:[O.jsx("div",{onClick:()=>{s("Information")},children:O.jsx(Za,{size:56,icon:QDe,rarity:n=="Information"?"mythic":"none"})},"Information"),O.jsx("div",{onClick:()=>{s("LoraCreation")},children:O.jsx(Za,{size:56,icon:zDe,rarity:n=="LoraCreation"?"mythic":"none"})},"LoraCreation"),O.jsx("div",{onClick:()=>{s("SpriteCreation")},children:O.jsx(Za,{size:56,icon:HDe,rarity:n=="SpriteCreation"?"mythic":"none"})},"SpriteCreation"),O.jsx("div",{onClick:()=>{s("ThumbnailCreation")},children:O.jsx(Za,{size:56,icon:GDe,rarity:n=="ThumbnailCreation"?"mythic":"none"})},"ThumbnailCreation"),O.jsx("div",{onClick:()=>{s("EmotionManager")},children:O.jsx(Za,{size:56,icon:jDe,rarity:n=="EmotionManager"?"mythic":"none"})},"Emotions")]})})]})]})}const ji={TRAIT:0,BLEND_SHAPE:1,DECAL:2};function TNe(){var t;const{isLoading:e,setViewMode:r,setIsLoading:n}=X.useContext(ls),{toggleDebugMode:i,characterManager:s,animationManager:a,moveCamera:o}=X.useContext(Yr),[l,A]=X.useState(ji.TRAIT),{playSound:c}=X.useContext(Ma),{isMute:u}=X.useContext(Ba),{t:h}=_e.useContext(co),d=()=>{!u&&c("backNextButton"),s.removeCurrentCharacter(),s.removeCurrentManifest(),r(yt.CREATE),i(!1)},[f,m]=X.useState(null),[g,p]=X.useState(null),[v,y]=X.useState(null),[_,E]=X.useState(null),[x,B]=X.useState({}),[M,R]=X.useState(null),[I,L]=X.useState(""),[D,w]=X.useState(!1),[b,S]=X.useState({background:"#ffffff"}),F=()=>{!u&&c("backNextButton"),r(yt.SAVE),i(!1)},k=()=>{n(!0),m(null),s.loadRandomTraits().then(()=>{console.log("success"),v&&v.trait!=""&&E(s.getCurrentTraitData(v.trait)),n(!1)}).catch(ne=>{n(!1),console.error("Error loading random traits:",ne.message)})},Q=ne=>{S({background:ne.hex})},z=ne=>{S({background:ne.hex}),s.setTraitColor(v==null?void 0:v.trait,ne.hex)},j=async ne=>{const de=Vl(ne.name),Te=URL.createObjectURL(ne);await a.loadAnimation(Te,!1,0,!0,"",de),L(a.getCurrentAnimationName())},T=ne=>{if(w(!1),v&&v.trait!=""){n(!0);const de=URL.createObjectURL(ne);s.loadCustomTexture(v.trait,de).then(()=>{n(!1)})}else console.warn("Please select a group trait first.")},H=ne=>{if(w(!1),v&&v.trait!=""){n(!0);const de=URL.createObjectURL(ne);s.loadCustomTrait(v.trait,de).then(()=>{n(!1)})}else console.warn("Please select a group trait first.")},me=ne=>{var de;if(ne.id===(_==null?void 0:_.id)){((de=ne.blendshapeTraits)==null?void 0:de.length)>0&&A(ji.BLEND_SHAPE);return}w(!1),n(!0),s.loadTrait(ne.traitGroup.trait,ne.id).then(()=>{var Te;if(n(!1),((Te=ne.blendshapeTraits)==null?void 0:Te.length)>0){const re=s.getCurrentBlendShapeTraitData(ne.traitGroup.trait);B(Object.entries(re).reduce((N,[he,oe])=>(N[he]=oe.id,N),{})),A(ji.BLEND_SHAPE)}E(ne)})},ee=ne=>{w(!1),s.removeTrait(ne),E(null)},U=ne=>{w(!1),n(!0),s.loadRandomTrait(ne).then(()=>{n(!1),E(s.getCurrentTraitData(ne))})},se=ne=>{w(!1);const de=Array.from(ne),Te=[],re=N=>new Promise((he,oe)=>{var Z;if(N&&N.name.toLowerCase().endsWith(".json")){const $=new FileReader,ce=`${(Z=s.manifestData)==null?void 0:Z.getAssetsDirectory()}/anata/_thumbnails/t_${N.name.split("_")[0]}.jpg`;console.log(ce),$.onload=function(W){try{const V=JSON.parse(W.target.result);V.thumb=ce,Te.push(V),he()}catch(V){console.error("Error parsing the JSON file:",V),oe(V)}},$.readAsText(N)}});Promise.all(de.map(re)).then(()=>{Te.length>0&&(m(Te),n(!0),s.loadTraitsFromNFTObject(Te[0]).then(()=>{n(!1)}))}).catch(N=>{console.error("Error processing files:",N)})},le=async ne=>{const de=ne[0];de&&de.name.toLowerCase().endsWith(".fbx")&&j(de),de&&(de.name.toLowerCase().endsWith(".png")||de.name.toLowerCase().endsWith(".jpg"))&&T(de),de&&de.name.toLowerCase().endsWith(".vrm")&&H(de),de&&de.name.toLowerCase().endsWith(".json")&&se(ne)},Ae=ne=>{if(!u&&c("optionClick"),w(!1),(v==null?void 0:v.trait)!==ne.trait){A(ji.TRAIT),p(s.getTraits(ne.trait)),y(ne);const de=s.getCurrentTraitData(ne.trait),Te=s.getCurrentBlendShapeTraitData(ne.trait);E(de),B(Object.entries(Te).reduce((re,[N,he])=>(re[N]=he.id,re),{})),R(s.getCurrentTraitVRM(ne.trait)),o({targetY:ne.cameraTarget.height,distance:ne.cameraTarget.distance})}else p(null),y(null),E(null),B({}),o({targetY:.8,distance:3.2})},ge=()=>{w(!1);var ne=document.createElement("input");if(ne.type="file",ne.accept=".vrm",!v)return console.error("Please select a trait group first");ne.onchange=de=>{var Te=de.target.files[0];if(Te.name.endsWith(".vrm")){const re=URL.createObjectURL(Te);n(!0),s.loadCustomTrait(v.trait,re).then(()=>{n(!1)})}},ne.click()};return O.jsxs("div",{className:Gt.container,children:[O.jsx("div",{className:`loadingIndicator ${e?"active":""}`,children:O.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),O.jsx("div",{className:"sectionTitle",children:h("pageTitles.chooseAppearance")}),O.jsx(T0,{onFilesDrop:le}),O.jsxs("div",{className:Gt.sideMenu,children:[O.jsx(lo,{title:"Appearance",left:20}),O.jsx("div",{className:Gt.bottomLine}),O.jsx("div",{className:Gt.scrollContainer,children:O.jsx("div",{className:Gt["editor-container"],children:s.getGroupTraits().map((ne,de)=>O.jsxs("div",{className:Gt.editorButton,onClick:()=>{Ae(ne)},children:[O.jsx(Za,{size:56,icon:ne.fullIconSvg,rarity:(v==null?void 0:v.trait)!==ne.trait?"none":"mythic"}),O.jsx("div",{className:Gt.editorText,children:ne.name})]},"options_"+de))})})]}),!!g&&v&&O.jsxs("div",{className:Gt.selectorContainerPos,children:[O.jsx(lo,{title:v.trait,width:130,left:20}),O.jsxs("div",{className:Gt.selectorPickerTabs,children:[_&&l==ji.TRAIT&&O.jsx("div",{className:Gt.selectorColorPickerButton,onClick:()=>{w(!D)},children:O.jsx("img",{className:Gt.selectorColorPickerImg,src:K1e})}),v&&((t=v.getAllDecals())==null?void 0:t.length)&&O.jsx("div",{className:Gt.selectorColorPickerButton,onClick:()=>l==ji.DECAL?A(ji.TRAIT):A(ji.DECAL),children:O.jsx("img",{className:Gt.selectorColorPickerImg,src:w1e})})]}),l==ji.TRAIT&&!!D&&O.jsx("div",{draggable:!1,className:Gt.selectorColorPickerUI,children:O.jsx(cDe,{styles:{default:{picker:{width:"200px"}}},color:b.background,onChange:Q,onChangeComplete:z})}),O.jsx("div",{className:Gt.bottomLine}),O.jsxs("div",{className:Gt.scrollContainerOptions,children:[l==ji.TRAIT&&O.jsxs("div",{className:Gt["selector-container"],children:[O.jsx("div",{className:`${Gt.selectorButton}`,onClick:()=>{U(v.trait)},children:O.jsx(Za,{size:56,icon:W1e,rarity:"none"})},"randomize-trait"),s.isTraitGroupRequired(v.trait)?O.jsx(O.Fragment,{}):O.jsx("div",{className:`${Gt.selectorButton}`,icon:db,onClick:()=>{ee(v.trait)},children:O.jsx(Za,{size:56,icon:db,rarity:_==null?"mythic":"none"})},"no-trait"),g.map(ne=>{let de=ne.id===(_==null?void 0:_.id);return O.jsx("div",{className:`${Gt.selectorButton}`,onClick:()=>{me(ne)},children:O.jsx(Za,{size:56,icon:ne.fullThumbnail,rarity:de?"mythic":"none"})},ne.id)})]}),l==ji.BLEND_SHAPE&&O.jsx(CNe,{selectedTrait:_,onBack:()=>{A(ji.TRAIT)},selectedBlendShapeTrait:x,setSelectedBlendshapeTrait:B}),l==ji.DECAL&&O.jsx(V1e,{selectedTraitGroup:v,onBack:()=>{A(ji.TRAIT)}})]}),O.jsx("div",{className:Gt.uploadContainer,children:O.jsx("div",{className:Gt.uploadButton,onClick:ge,children:O.jsx("div",{children:"Upload "})})})]}),O.jsx(mR,{jsonSelectionArray:f}),O.jsx(MNe,{selectedTrait:_,selectedVRM:M,traitGroupName:(v==null?void 0:v.trait)||""}),O.jsx(N_,{loadedAnimationName:I,randomize:k}),O.jsxs("div",{className:Gt.buttonContainer,children:[O.jsx(br,{theme:"light",text:h("callToAction.back"),size:14,className:Gt.buttonLeft,onClick:d}),s.canDownload()&&O.jsx(br,{theme:"light",text:h("callToAction.next"),size:14,className:Gt.buttonRight,onClick:F})]})]})}const CNe=({selectedTrait:t,onBack:e,selectedBlendShapeTrait:r,setSelectedBlendshapeTrait:n})=>{const{characterManager:i,moveCamera:s}=X.useContext(Yr),a=i.getBlendShapeGroupTraits((t==null?void 0:t.traitGroup.trait)||"",(t==null?void 0:t.id)||""),o=(A,c)=>{i.removeBlendShapeTrait(A,c.trait);const u={...r};delete u[c.trait],n(u)},l=A=>{const c=A.parentGroup;i.loadBlendShapeTrait((t==null?void 0:t.traitGroup.trait)||"",c.trait||"",(A==null?void 0:A.id)||""),s({targetY:c.cameraTarget.height,distance:c.cameraTarget.distance});const u={...r};u[c.trait||""]=A.id,n(u)};return O.jsxs("div",{className:Gt["selector-container-column"],children:[O.jsx(br,{theme:"dark",text:"Back",size:14,className:Gt.buttonLeft,onClick:e}),a&&a.length>0&&a.map(A=>O.jsxs("div",{className:Gt.blendshapeGroup,children:[O.jsx("div",{children:A.name}),O.jsxs("div",{className:Gt["selector-container"],children:[O.jsx(d4,{src:db,active:!r[A.trait],blendshapeID:"cancel",select:()=>o(t.traitGroup.trait,A)},"empty"),A.collection.map(c=>{let u=c.id===r[A.trait];return O.jsx(d4,{src:c.fullThumbnail||"",active:u,blendshapeID:c.id,select:()=>l(c)},c.id)})]})]},A.trait))]})},d4=({active:t,blendshapeID:e,src:r,select:n})=>O.jsx("div",{className:`${Gt.selectorButton}`,onClick:n,children:O.jsx(Za,{size:56,icon:r||"",rarity:t?"mythic":"none"})},e),SNe="_InformationContainerPos_rgqwy_1",INe="_traitInfoTitle_rgqwy_13",RNe="_traitInfoText_rgqwy_21",UNe="_flexSelect_rgqwy_30",FNe="_scrollContainer_rgqwy_65",kNe="_checked_rgqwy_90",LNe="_checkmark_rgqwy_94",PNe="_checkboxHolder_rgqwy_107",ONe="_buttonContainer_rgqwy_114",DNe="_buttonLeft_rgqwy_123",NNe="_buttonRight_rgqwy_127",QNe="_buttonCenter_rgqwy_131",Li={InformationContainerPos:SNe,traitInfoTitle:INe,traitInfoText:RNe,flexSelect:UNe,"arrow-button":"_arrow-button_rgqwy_37","left-button":"_left-button_rgqwy_51","right-button":"_right-button_rgqwy_58",scrollContainer:FNe,"custom-checkbox":"_custom-checkbox_rgqwy_76","checkbox-container":"_checkbox-container_rgqwy_81",checked:kNe,checkmark:LNe,checkboxHolder:PNe,buttonContainer:ONe,buttonLeft:DNe,buttonRight:NNe,buttonCenter:QNe},HNe="_InformationContainerPos_11mqa_2",jNe="_scrollContainer_11mqa_16",zNe="_traitInfoTitle_11mqa_28",GNe="_traitInfoText_11mqa_38",VNe="_flexSelect_11mqa_66",WNe="_checked_11mqa_124",KNe="_checkmark_11mqa_128",YNe="_checkboxHolder_11mqa_141",on={InformationContainerPos:HNe,scrollContainer:jNe,traitInfoTitle:zNe,traitInfoText:GNe,"input-box":"_input-box_11mqa_47",flexSelect:VNe,"arrow-button":"_arrow-button_11mqa_76","left-button":"_left-button_11mqa_91","right-button":"_right-button_11mqa_98","anim-button":"_anim-button_11mqa_105","custom-checkbox":"_custom-checkbox_11mqa_110","checkbox-container":"_checkbox-container_11mqa_115",checked:WNe,checkmark:KNe,checkboxHolder:YNe};function lU({model:t,name:e,files:r,index:n,nextVrm:i,previousVrm:s}){const{characterManager:a}=X.useContext(Yr),[o,l]=_e.useState(0),[A,c]=_e.useState(0),[u,h]=_e.useState(0),[d,f]=_e.useState(0),[m,g]=_e.useState(0),[p,v]=_e.useState(0),[y,_]=_e.useState(0),[E,x]=_e.useState(0),[B,M]=_e.useState(0),[R,I]=_e.useState(0);return _e.useEffect(()=>{if(t!=null){const L=Nf(t,"Mesh"),D=Nf(t,"SkinnedMesh");l(L.length),c(D.length);const w=L.concat(D),{stdMats:b,stdCutoutpMats:S,stdTranspMats:F,mToonMats:k,mToonCutoutMats:Q,mToonTranspMats:z}=pge(w);h(b.length),f(F.length),g(S.length),v(k.length),_(z.length),x(Q.length);const{triangles:j,bones:T}=a.getBoneTriangleCount();M(j),I(T)}},[t]),t!=null?O.jsx("div",{children:O.jsxs("div",{className:on.InformationContainerPos,children:[O.jsx(lo,{title:"Model Information",width:180,right:20}),O.jsxs("div",{className:on.scrollContainer,children:[O.jsxs("div",{className:on.flexSelect,children:[(r==null?void 0:r.length)>1?O.jsx("div",{className:`${on["arrow-button"]} ${on["left-button"]}`,onClick:s}):O.jsx(O.Fragment,{}),e&&O.jsx("div",{style:{textAlign:"center"},children:O.jsx("div",{className:on.traitInfoTitle,style:{margin:"auto",fontSize:"14px",width:"200px",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:e})}),(r==null?void 0:r.length)>1?O.jsx("div",{className:`${on["arrow-button"]} ${on["right-button"]}`,onClick:i}):O.jsx(O.Fragment,{})]}),O.jsx("div",{className:on.traitInfoTitle,children:"Geometry info:"}),O.jsxs("div",{className:on.traitInfoText,children:["Meshes: ",o]}),O.jsxs("div",{className:on.traitInfoText,children:["SkinnedMeshes: ",A]}),O.jsxs("div",{className:on.traitInfoText,children:["Triangles: ",B]}),O.jsxs("div",{className:on.traitInfoText,children:["Bones: ",R]}),O.jsx("div",{className:on.traitInfoTitle,children:"Standard Material Count:"}),O.jsxs("div",{className:on.traitInfoText,children:["opaque: ",u]}),O.jsxs("div",{className:on.traitInfoText,children:["cutout: ",m]}),O.jsxs("div",{className:on.traitInfoText,children:["transparent: ",d]}),O.jsx("div",{className:on.traitInfoTitle,children:"MToon Material Count:"}),O.jsxs("div",{className:on.traitInfoText,children:["opaque: ",p]}),O.jsxs("div",{className:on.traitInfoText,children:["cutout: ",E]}),O.jsxs("div",{className:on.traitInfoText,children:["transparent: ",y]})]})]})}):O.jsx(O.Fragment,{})}const XNe="_InformationContainerPos_b0msk_1",ZNe="_traitInfoTitle_b0msk_13",JNe="_traitInfoText_b0msk_22",qNe="_flexSelect_b0msk_33",$Ne="_scrollContainer_b0msk_68",e4e="_checked_b0msk_93",t4e="_checkmark_b0msk_97",r4e="_checkboxHolder_b0msk_110",mt={InformationContainerPos:XNe,traitInfoTitle:ZNe,traitInfoText:JNe,flexSelect:qNe,"arrow-button":"_arrow-button_b0msk_40","left-button":"_left-button_b0msk_54","right-button":"_right-button_b0msk_61",scrollContainer:$Ne,"custom-checkbox":"_custom-checkbox_b0msk_79","checkbox-container":"_checkbox-container_b0msk_84",checked:e4e,checkmark:t4e,checkboxHolder:r4e};function up(){localStorage&&Object.keys(localStorage).map(t=>{this.setItem(t,localStorage[t],!1)}),Object.defineProperty(this,"length",{get:function(){return Object.keys(this).length},enumerable:!1})}up.prototype.key=function(t){return Object.keys(this)[t]};up.prototype.getItem=function(t){try{return JSON.parse(this[t])}catch{}return this[t]};up.prototype.setItem=function(t,e,r=!0){const n=typeof e=="string"?e:JSON.stringify(e);return r&&localStorage.setItem(t,n),this[t]=n};up.prototype.removeItem=function(t){delete this[t]};up.prototype.clear=function(){Object.keys(this).forEach(t=>delete this[t])};let n4e=new up;const i4e=t=>({get(e,r){return t.getItem(String(r))},set(e,r,n){return t.setItem(String(r),n),!0}}),s4e=(t=n4e)=>new Proxy({},i4e(t)),ze=s4e();function rx({showDropToDownload:t,showCreateAtlas:e,mergeMenuTitle:r}){const[n,i]=_e.useState(ze.mergeOptions_atlas_std_size||6),[s,a]=_e.useState(ze.mergeOptions_atlas_std_transp_size||6),[o,l]=_e.useState(ze.mergeOptions_atlas_mtoon_size||6),[A,c]=_e.useState(ze.mergeOptions_atlas_mtoon_transp_size||6),[u,h]=_e.useState(ze.mergeOptions_sel_option||0),[d,f]=_e.useState(ze.mergeOptions_two_sided_mat||!1),[m]=_e.useState(["Merge to Standard","Merge to MToon","Keep Both"]),[g,p]=_e.useState(ze.mergeOptions_download_vrm==null?!0:ze.mergeOptions_download_vrm),[v,y]=_e.useState(ze.mergeOptions_download_vrm_preview==null?!0:ze.mergeOptions_download_vrm_preview),[_,E]=_e.useState(ze.mergeOptions_drop_download||!1),[x,B]=_e.useState(ze.merge_options_ktx_compression||!1),[M,R]=_e.useState(ze.mergeOptions_create_atlas==null?!0:ze.mergeOptions_create_atlas),[I,L]=_e.useState(ze.mergeOptions_download_lora==null?!0:ze.mergeOptions_download_lora),[D,w]=_e.useState(ze.mergeOptions_download_sprites==null?!0:ze.mergeOptions_download_sprites),b=U=>{E(U.target.checked),ze.mergeOptions_drop_download=U.target.checked},S=U=>{f(U.target.checked),ze.mergeOptions_two_sided_mat=U.target.checked},F=U=>{B(U.target.checked),ze.merge_options_ktx_compression=U.target.checked},k=U=>{R(U.target.checked),ze.mergeOptions_create_atlas=U.target.checked},Q=U=>{p(U.target.checked),ze.mergeOptions_download_vrm=U.target.checked},z=U=>{y(U.target.checked),ze.mergeOptions_download_vrm_preview=U.target.checked},j=U=>{L(U.target.checked),ze.mergeOptions_download_lora=U.target.checked},T=U=>{w(U.target.checked),ze.mergeOptions_download_sprites=U.target.checked},H=()=>{let U=u;u<=0?U=m.length-1:U-=1,h(U),ze.mergeOptions_sel_option=U},me=()=>{let U=u;u>=m.length-1?U=0:U+=1,h(U),ze.mergeOptions_sel_option=U},ee=async(U,se)=>{let le=parseInt(U.target.value);le>8?le=8:le<0&&(le=0),(Ae=>{switch(se){case"standard opaque":i(Ae),ze.mergeOptions_atlas_std_size=Ae;break;case"standard transparent":a(Ae),ze.mergeOptions_atlas_std_transp_size=Ae;break;case"mtoon opaque":l(Ae),ze.mergeOptions_atlas_mtoon_size=Ae;break;case"mtoon transparent":c(Ae),ze.mergeOptions_atlas_mtoon_transp_size=Ae;break}})(le)};return O.jsxs("div",{className:mt.InformationContainerPos,children:[O.jsx(lo,{title:r,width:180,left:20}),O.jsxs("div",{className:mt.scrollContainer,children:[O.jsx("div",{className:mt.traitInfoTitle,children:"Download Options"}),O.jsx(O.Fragment,{children:O.jsx("div",{className:mt.traitInfoText,children:O.jsxs("div",{className:mt.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:mt["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:g,onChange:Q}),O.jsx("div",{className:mt["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),"Download VRM"]})})}),O.jsx(O.Fragment,{children:O.jsx("div",{className:mt.traitInfoText,children:O.jsxs("div",{className:mt.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:mt["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:v,onChange:z}),O.jsx("div",{className:mt["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),"Download VRM Preview"]})})}),O.jsx(O.Fragment,{children:O.jsx("div",{className:mt.traitInfoText,children:O.jsxs("div",{className:mt.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:mt["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:I,onChange:j}),O.jsx("div",{className:mt["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),"Download Lora Data"]})})}),O.jsx(O.Fragment,{children:O.jsx("div",{className:mt.traitInfoText,children:O.jsxs("div",{className:mt.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:mt["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:D,onChange:T}),O.jsx("div",{className:mt["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),"Download Sprites Data"]})})}),g&&O.jsxs(O.Fragment,{children:[e&&O.jsx(O.Fragment,{children:O.jsx("div",{className:mt.traitInfoText,children:O.jsxs("div",{className:mt.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:mt["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:M,onChange:k}),O.jsx("div",{className:mt["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),"Create Atlas"]})})}),(e==!1||M)&&O.jsxs(O.Fragment,{children:[O.jsx("br",{}),O.jsx("div",{className:mt.traitInfoTitle,children:"Merge Atlas Type"}),O.jsx("br",{}),O.jsxs("div",{className:mt.flexSelect,children:[O.jsx("div",{className:`${mt["arrow-button"]} ${mt["left-button"]}`,onClick:H}),O.jsx("div",{className:mt.traitInfoText,style:{marginBottom:"0"},children:m[u]}),O.jsx("div",{className:`${mt["arrow-button"]} ${mt["right-button"]}`,onClick:me})]}),O.jsx("br",{}),O.jsx("br",{}),(u===0||u==2)&&O.jsxs(O.Fragment,{children:[O.jsx("div",{className:mt.traitInfoTitle,children:"Standard Atlas Size"}),O.jsx("br",{}),O.jsxs("div",{className:mt.traitInfoText,children:["Opaque: ",kr(n)+" x "+kr(n)]}),O.jsx(fu,{value:n,onChange:U=>ee(U,"standard opaque"),min:1,max:8,step:1}),O.jsx("br",{}),O.jsxs("div",{className:mt.traitInfoText,children:["Transparent: ",kr(s)+" x "+kr(s)]}),O.jsx(fu,{value:s,onChange:U=>ee(U,"standard transparent"),min:1,max:8,step:1}),O.jsx("br",{})," ",O.jsx("br",{})]}),(u===1||u==2)&&O.jsxs(O.Fragment,{children:[O.jsx("div",{className:mt.traitInfoTitle,children:"MToon Atlas Size"}),O.jsx("br",{}),O.jsxs("div",{className:mt.traitInfoText,children:["Opaque: ",kr(o)+" x "+kr(o)]}),O.jsx(fu,{value:o,onChange:U=>ee(U,"mtoon opaque"),min:1,max:8,step:1}),O.jsx("br",{}),O.jsxs("div",{className:mt.traitInfoText,children:["Transparent: ",kr(A)+" x "+kr(A)]}),O.jsx(fu,{value:A,onChange:U=>ee(U,"mtoon transparent"),min:1,max:8,step:1}),O.jsx("br",{})," ",O.jsx("br",{})]}),O.jsx("div",{className:mt.traitInfoTitle,children:"Options"}),O.jsx("div",{className:mt.traitInfoText,children:O.jsxs("div",{className:mt.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:mt["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:d,onChange:S}),O.jsx("div",{className:mt["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),"Two Sided Material"]})}),t&&O.jsx(O.Fragment,{children:O.jsx("div",{className:mt.traitInfoText,children:O.jsxs("div",{className:mt.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:mt["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:_,onChange:b}),O.jsx("div",{className:mt["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),"Drag Drop - Download"]})})}),O.jsx(O.Fragment,{children:O.jsx("div",{className:mt.traitInfoText,children:O.jsxs("div",{className:mt.checkboxHolder,children:[O.jsx("div",{}),O.jsxs("label",{className:mt["custom-checkbox"],children:[O.jsx("input",{type:"checkbox",checked:x,onChange:F}),O.jsx("div",{className:mt["checkbox-container"]})]}),O.jsx("div",{}),O.jsx("div",{}),"KTX Compression"]})})})]})]})]})]})}function a4e(){const{isLoading:t,setViewMode:e,setIsLoading:r}=X.useContext(ls),{manifest:n,toggleDebugMode:i,characterManager:s,animationManager:a,loraDataGenerator:o,spriteAtlasGenerator:l,sceneElements:A}=X.useContext(Yr),[c,u]=_e.useState(null),[h,d]=_e.useState(""),[f,m]=X.useState(""),{playSound:g}=X.useContext(Ma),{isMute:p}=X.useContext(Ba),[v,y]=X.useState(null),_=()=>{!p&&g("backNextButton"),s.removeCurrentCharacter(),s.removeCurrentManifest(),i(!1),e(yt.LANDING)},E=()=>{const w=ze.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:kr(ze.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:kr(ze.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:kr(ze.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:kr(ze.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:w===0||w==2,exportMtoonAtlas:w===1||w==2,ktxCompression:ze.merge_options_ktx_compression||!1,twoSidedMaterial:ze.mergeOptions_two_sided_mat||!1}},x=(w,b=!1)=>{console.log(b),(async()=>{await s.loadTraitsFromNFTObject(v[w]),(ze.mergeOptions_download_vrm==null||ze.mergeOptions_download_vrm)&&await s.downloadVRM(v[w].name,E());const S=new ep,F=A.parent;F.remove(A);const k=ze.mergeOptions_download_lora==null?!0:ze.mergeOptions_download_lora;if(k===!0){const z=n.loras.map(async j=>o.createLoraData(j,S));await Promise.all(z)}const Q=ze.mergeOptions_download_sprites==null?!0:ze.mergeOptions_download_sprites;if(Q===!0){const z=n.sprites.map(async j=>l.createSpriteAtlas(j,S));await Promise.all(z)}(k===!0||Q===!0)&&S.saveZip(v[w].name),F.add(A),w<v.length-1?x(w+1):r(!1)})()},B=()=>{r(!0),x(0,!0)},{t:M}=_e.useContext(co),R=async w=>{if(s.getCurrentCharacterModel()){const b=Vl(w.name),S=URL.createObjectURL(w);await a.loadAnimation(S,!1,0,!0,"",b),m(a.getCurrentAnimationName()),URL.revokeObjectURL(S)}else console.warn("Please load a vrm model to test animations.")},I=async w=>{const b=URL.createObjectURL(w);await s.loadOptimizerCharacter(b),URL.revokeObjectURL(b);const S=Vl(w.name);d(S),u(s.getCurrentCharacterModel())},L=w=>{const b=Array.from(w),S=[],F=k=>new Promise((Q,z)=>{var j;if(k&&k.name.toLowerCase().endsWith(".json")){const T=new FileReader,H=`${(j=s.manifestData)==null?void 0:j.getAssetsDirectory()}/anata/_thumbnails/t_${k.name.split("_")[0]}.jpg`;T.onload=function(me){try{const ee=JSON.parse(me.target.result);ee.thumb=H,S.push(ee),Q()}catch(ee){console.error("Error parsing the JSON file:",ee),z(ee)}},T.readAsText(k)}});Promise.all(b.map(F)).then(()=>{S.length>0&&(y(S),r(!0),s.loadTraitsFromNFTObject(S[0]).then(()=>{r(!1)}))}).catch(k=>{console.error("Error processing files:",k)})},D=async w=>{const b=w[0];console.log("anim"),b&&b.name.toLowerCase().endsWith(".fbx")&&(console.log("anim2"),R(b)),b&&b.name.toLowerCase().endsWith(".vrm")&&I(b),b&&b.name.toLowerCase().endsWith(".json")&&L(w)};return O.jsxs("div",{className:Li.container,children:[O.jsx("div",{className:`loadingIndicator ${t?"active":""}`,children:O.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),O.jsx("div",{className:"sectionTitle",children:"Batch Download"}),O.jsx(T0,{onFilesDrop:D}),O.jsx(rx,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),O.jsx(lU,{model:c}),O.jsx(mR,{jsonSelectionArray:v}),O.jsx(N_,{loadedAnimationName:f}),O.jsxs("div",{className:Li.buttonContainer,children:[O.jsx(br,{theme:"light",text:M("callToAction.back"),size:14,className:Li.buttonLeft,onClick:_}),(v==null?void 0:v.length)==1&&O.jsx(br,{theme:"light",text:"Download",size:14,className:Li.buttonRight,onClick:B}),(v==null?void 0:v.length)>1&&O.jsx(br,{theme:"light",text:"Download All",size:14,className:Li.buttonRight,onClick:B})]})]})}const O0="abi/5.7.0",jt=new be(O0),Qu={};let f4={calldata:!0,memory:!0,storage:!0},o4e={calldata:!0,memory:!0};function Ky(t,e){if(t==="bytes"||t==="string"){if(f4[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&o4e[e])return!0;return(f4[e]||e==="payable")&&jt.throwArgumentError("invalid modifier","name",e),!1}function l4e(t,e){let r=t;function n(o){jt.throwArgumentError(`unexpected character at position ${o}`,"param",t)}t=t.replace(/\s/g," ");function i(o){let l={type:"",name:"",parent:o,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},a=s;for(let o=0;o<t.length;o++){let l=t[o];switch(l){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||n(o),a.state.allowType=!1,a.type=dd(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Ky(a.type,a.name)&&(a.name=""),a.type=dd(a.type);let A=a;a=a.parent,a||n(o),delete A.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Ky(a.type,a.name)&&(a.name=""),a.type=dd(a.type);let c=i(a.parent);a.parent.components.push(c),delete a.parent,a=c;break;case" ":a.state.allowType&&a.type!==""&&(a.type=dd(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(e||n(o),a.indexed&&n(o),a.indexed=!0,a.name=""):Ky(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(o),a.type+=l,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(o),a.type+=l,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=l,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=l,delete a.state.allowArray):a.state.readArray?a.type+=l:n(o)}}return a.parent&&jt.throwArgumentError("unexpected eof","param",t),delete s.state,a.name==="indexed"?(e||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):Ky(a.type,a.name)&&(a.name=""),s.type=dd(s.type),s}function Hw(t,e){for(let r in e)Ue(t,r,e[r])}const qt=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),A4e=new RegExp(/^(.*)\[([0-9]*)\]$/);class Hn{constructor(e,r){e!==Qu&&jt.throwError("use fromString",be.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Hw(this,r);let n=this.type.match(A4e);n?Hw(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Hn.fromObject({type:n[1],components:this.components}),baseType:"array"}):Hw(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=qt.sighash),qt[e]||jt.throwArgumentError("invalid format type","format",e),e===qt.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==qt.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===qt.full?", ":",")+")"):r+=this.type,e!==qt.sighash&&(this.indexed===!0&&(r+=" indexed"),e===qt.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?Hn.fromString(e,r):Hn.fromObject(e)}static fromObject(e){return Hn.isParamType(e)?e:new Hn(Qu,{name:e.name||null,type:dd(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Hn.fromObject):null})}static fromString(e,r){function n(i){return Hn.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(l4e(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function t0(t,e){return u4e(t).map(r=>Hn.fromString(r,e))}class Hl{constructor(e,r){e!==Qu&&jt.throwError("use a static from method",be.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Hw(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return Hl.isFragment(e)?e:typeof e=="string"?Hl.fromString(e):Hl.fromObject(e)}static fromObject(e){if(Hl.isFragment(e))return e;switch(e.type){case"function":return Po.fromObject(e);case"event":return Pl.fromObject(e);case"constructor":return Lo.fromObject(e);case"error":return jA.fromObject(e);case"fallback":case"receive":return null}return jt.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?Pl.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Po.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Lo.fromString(e.trim()):e.split(" ")[0]==="error"?jA.fromString(e.substring(5).trim()):jt.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class Pl extends Hl{format(e){if(e||(e=qt.sighash),qt[e]||jt.throwArgumentError("invalid format type","format",e),e===qt.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==qt.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===qt.full?", ":",")+") ",e!==qt.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?Pl.fromString(e):Pl.fromObject(e)}static fromObject(e){if(Pl.isEventFragment(e))return e;e.type!=="event"&&jt.throwArgumentError("invalid event object","value",e);const r={name:r0(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Hn.fromObject):[],type:"event"};return new Pl(Qu,r)}static fromString(e){let r=e.match(n0);r||jt.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:jt.warn("unknown modifier: "+i)}}),Pl.fromObject({name:r[1].trim(),anonymous:n,inputs:t0(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function j9(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&jt.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||jt.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=We.from(r[1]),r[0]):t}function z9(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function G9(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&jt.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&jt.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&jt.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&jt.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&jt.throwArgumentError("unable to determine stateMutability","value",t),e}class Lo extends Hl{format(e){if(e||(e=qt.sighash),qt[e]||jt.throwArgumentError("invalid format type","format",e),e===qt.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===qt.sighash&&jt.throwError("cannot format a constructor for sighash",be.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===qt.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Lo.fromString(e):Lo.fromObject(e)}static fromObject(e){if(Lo.isConstructorFragment(e))return e;e.type!=="constructor"&&jt.throwArgumentError("invalid constructor object","value",e);let r=G9(e);r.constant&&jt.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Hn.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?We.from(e.gas):null};return new Lo(Qu,n)}static fromString(e){let r={type:"constructor"};e=j9(e,r);let n=e.match(n0);return(!n||n[1].trim()!=="constructor")&&jt.throwArgumentError("invalid constructor string","value",e),r.inputs=t0(n[2].trim(),!1),z9(n[3].trim(),r),Lo.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Po extends Lo{format(e){if(e||(e=qt.sighash),qt[e]||jt.throwArgumentError("invalid format type","format",e),e===qt.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==qt.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===qt.full?", ":",")+") ",e!==qt.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?Po.fromString(e):Po.fromObject(e)}static fromObject(e){if(Po.isFunctionFragment(e))return e;e.type!=="function"&&jt.throwArgumentError("invalid function object","value",e);let r=G9(e);const n={type:e.type,name:r0(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(Hn.fromObject):[],outputs:e.outputs?e.outputs.map(Hn.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?We.from(e.gas):null};return new Po(Qu,n)}static fromString(e){let r={type:"function"};e=j9(e,r);let n=e.split(" returns ");n.length>2&&jt.throwArgumentError("invalid function string","value",e);let i=n[0].match(n0);if(i||jt.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&r0(r.name),r.inputs=t0(i[2],!1),z9(i[3].trim(),r),n.length>1){let s=n[1].match(n0);(s[1].trim()!=""||s[3].trim()!="")&&jt.throwArgumentError("unexpected tokens","value",e),r.outputs=t0(s[2],!1)}else r.outputs=[];return Po.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function p4(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&jt.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class jA extends Hl{format(e){if(e||(e=qt.sighash),qt[e]||jt.throwArgumentError("invalid format type","format",e),e===qt.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==qt.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===qt.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?jA.fromString(e):jA.fromObject(e)}static fromObject(e){if(jA.isErrorFragment(e))return e;e.type!=="error"&&jt.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:r0(e.name),inputs:e.inputs?e.inputs.map(Hn.fromObject):[]};return p4(new jA(Qu,r))}static fromString(e){let r={type:"error"},n=e.match(n0);return n||jt.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&r0(r.name),r.inputs=t0(n[2],!1),p4(jA.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function dd(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const c4e=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function r0(t){return(!t||!t.match(c4e))&&jt.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const n0=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function u4e(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&jt.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const AU=new be(O0);function h4e(t){const e=[],r=function(n,i){if(Array.isArray(i))for(let s in i){const a=n.slice();a.push(s);try{r(a,i[s])}catch(o){e.push({path:a,error:o})}}};return r([],t),e}class hA{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){AU.throwArgumentError(e,this.localName,r)}}class GS{constructor(e){Ue(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Ki(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(Bs(e._data))}writeBytes(e){let r=ft(e);const n=r.length%this.wordSize;return n&&(r=Bs([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=ft(We.from(e));return r.length>this.wordSize&&AU.throwError("value out-of-bounds",be.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=Bs([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class Eb{constructor(e,r,n,i){Ue(this,"_data",ft(e)),Ue(this,"wordSize",r||32),Ue(this,"_coerceFunc",n),Ue(this,"allowLoose",i),this._offset=0}get data(){return at(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):Eb.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:AU.throwError("data out-of-bounds",be.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Eb(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return We.from(this.readBytes(this.wordSize))}}class d4e extends hA{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=ri(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return ri(rn(e.readValue().toHexString(),20))}}class f4e extends hA{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const Gd=new be(O0);function V9(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let l={};n=e.map(A=>{const c=A.localName;return c||Gd.throwError("cannot encode object for signature with missing names",be.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:r}),l[c]&&Gd.throwError("cannot encode object for signature with duplicate names",be.errors.INVALID_ARGUMENT,{argument:"values",coder:A,value:r}),l[c]=!0,r[c]})}else Gd.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&Gd.throwArgumentError("types/value length mismatch","tuple",r);let i=new GS(t.wordSize),s=new GS(t.wordSize),a=[];e.forEach((l,A)=>{let c=n[A];if(l.dynamic){let u=s.length;l.encode(s,c);let h=i.writeUpdatableValue();a.push(d=>{h(d+u)})}else l.encode(i,c)}),a.forEach(l=>{l(i.length)});let o=t.appendWriter(i);return o+=t.appendWriter(s),o}function W9(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let a=null;if(s.dynamic){let o=t.readValue(),l=n.subReader(o.toNumber());try{a=s.decode(l)}catch(A){if(A.code===be.errors.BUFFER_OVERRUN)throw A;a=A,a.baseType=s.name,a.name=s.localName,a.type=s.type}}else try{a=s.decode(t)}catch(o){if(o.code===be.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=s.name,a.name=s.localName,a.type=s.type}a!=null&&r.push(a)});const i=e.reduce((s,a)=>{const o=a.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});e.forEach((s,a)=>{let o=s.localName;if(!o||i[o]!==1||(o==="length"&&(o="_length"),r[o]!=null))return;const l=r[a];l instanceof Error?Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw l}}):r[o]=l});for(let s=0;s<r.length;s++){const a=r[s];a instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(r)}class p4e extends hA{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),Gd.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return V9(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&Gd.throwError("insufficient data length",be.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new f4e(this.coder));return e.coerce(this.name,W9(e,n))}}class m4e extends hA{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class K9 extends hA{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=ft(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class g4e extends K9{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,at(super.decode(e)))}}class v4e extends hA{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=ft(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,at(e.readBytes(this.size)))}}class y4e extends hA{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class w4e extends hA{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=We.from(r),i=T7.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(M7).mul(B7)))&&this._throwError("value out-of-bounds",r)}else(n.lt(iQ)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}class b4e extends K9{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,Yo(r))}decode(e){return A0(super.decode(e))}}class Yy extends hA{constructor(e,r){let n=!1;const i=[];e.forEach(a=>{a.dynamic&&(n=!0),i.push(a.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return V9(e,this.coders,r)}decode(e){return e.coerce(this.name,W9(e,this.coders))}}const Xy=new be(O0),_4e=new RegExp(/^bytes([0-9]*)$/),x4e=new RegExp(/^(u?int)([0-9]*)$/);class E4e{constructor(e){Ue(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new d4e(e.name);case"bool":return new m4e(e.name);case"string":return new b4e(e.name);case"bytes":return new g4e(e.name);case"array":return new p4e(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Yy((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new y4e(e.name)}let r=e.type.match(x4e);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&Xy.throwArgumentError("invalid "+r[1]+" bit length","param",e),new w4e(n/8,r[1]==="int",e.name)}if(r=e.type.match(_4e),r){let n=parseInt(r[1]);return(n===0||n>32)&&Xy.throwArgumentError("invalid bytes length","param",e),new v4e(n,e.name)}return Xy.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new Eb(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new GS(this._getWordSize())}getDefaultValue(e){const r=e.map(n=>this._getCoder(Hn.from(n)));return new Yy(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&Xy.throwError("types/values length mismatch",be.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(a=>this._getCoder(Hn.from(a))),i=new Yy(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(s=>this._getCoder(Hn.from(s)));return new Yy(i,"_").decode(this._getReader(ft(r),n))}}const B4e=new E4e,Qr=new be(O0);class M4e extends o0{}class T4e extends o0{}class C4e extends o0{}class VS extends o0{static isIndexed(e){return!!(e&&e._isIndexed)}}const S4e={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function m4(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class g4{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,Ue(this,"fragments",r.map(n=>Hl.from(n)).filter(n=>n!=null)),Ue(this,"_abiCoder",Ms(new.target,"getAbiCoder")()),Ue(this,"functions",{}),Ue(this,"errors",{}),Ue(this,"events",{}),Ue(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){Qr.warn("duplicate definition - constructor");return}Ue(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){Qr.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||Ue(this,"deploy",Lo.from({payable:!1,type:"constructor"})),Ue(this,"_isInterface",!0)}format(e){e||(e=qt.full),e===qt.sighash&&Qr.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===qt.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return B4e}static getAddress(e){return ri(e)}static getSighash(e){return ui(fd(e.format()),0,4)}static getEventTopic(e){return fd(e.format())}getFunction(e){if(It(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Qr.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?Qr.throwArgumentError("no matching function","name",n):i.length>1&&Qr.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[Po.fromString(e).format()];return r||Qr.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(It(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];Qr.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?Qr.throwArgumentError("no matching event","name",n):i.length>1&&Qr.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[Pl.fromString(e).format()];return r||Qr.throwArgumentError("no matching event","signature",e),r}getError(e){if(It(e)){const n=Ms(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}Qr.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?Qr.throwArgumentError("no matching error","name",n):i.length>1&&Qr.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[Po.fromString(e).format()];return r||Qr.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Ms(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Ms(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=ft(r);return at(n.slice(0,4))!==this.getSighash(e)&&Qr.throwArgumentError(`data signature does not match error ${e.name}.`,"data",at(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),at(Bs([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=ft(r);return at(n.slice(0,4))!==this.getSighash(e)&&Qr.throwArgumentError(`data signature does not match function ${e.name}.`,"data",at(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),at(Bs([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=ft(r),i=null,s="",a=null,o=null,l=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const A=at(n.slice(0,4)),c=S4e[A];if(c)a=this._abiCoder.decode(c.inputs,n.slice(4)),o=c.name,l=c.signature,c.reason&&(i=a[0]),o==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:o==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const u=this.getError(A);a=this._abiCoder.decode(u.inputs,n.slice(4)),o=u.name,l=u.format()}catch{}break}}return Qr.throwError("call revert exception"+s,be.errors.CALL_EXCEPTION,{method:e.format(),data:at(r),errorArgs:a,errorName:o,errorSignature:l,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),at(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Qr.throwError("too many arguments for "+e.format(),be.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,a)=>s.type==="string"?fd(a):s.type==="bytes"?_n(at(a)):(s.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),s.type.match(/^u?int/)&&(a=We.from(a).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[a]),rn(at(a),32));for(r.forEach((s,a)=>{let o=e.inputs[a];if(!o.indexed){s!=null&&Qr.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,s);return}s==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?Qr.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,s):Array.isArray(s)?n.push(s.map(l=>i(o,l))):n.push(i(o,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Qr.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((a,o)=>{const l=r[o];if(a.indexed)if(a.type==="string")n.push(fd(l));else if(a.type==="bytes")n.push(_n(l));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([a.type],[l]))}else i.push(a),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let h=this.getEventTopic(e);(!It(n[0],32)||n[0].toLowerCase()!==h)&&Qr.throwError("fragment/topic mismatch",be.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:h,value:n[0]}),n=n.slice(1)}let i=[],s=[],a=[];e.inputs.forEach((h,d)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(Hn.fromObject({type:"bytes32",name:h.name})),a.push(!0)):(i.push(h),a.push(!1)):(s.push(h),a.push(!1))});let o=n!=null?this._abiCoder.decode(i,Bs(n)):null,l=this._abiCoder.decode(s,r,!0),A=[],c=0,u=0;e.inputs.forEach((h,d)=>{if(h.indexed)if(o==null)A[d]=new VS({_isIndexed:!0,hash:null});else if(a[d])A[d]=new VS({_isIndexed:!0,hash:o[u++]});else try{A[d]=o[u++]}catch(f){A[d]=f}else try{A[d]=l[c++]}catch(f){A[d]=f}if(h.name&&A[h.name]==null){const f=A[d];f instanceof Error?Object.defineProperty(A,h.name,{enumerable:!0,get:()=>{throw m4(`property ${JSON.stringify(h.name)}`,f)}}):A[h.name]=f}});for(let h=0;h<A.length;h++){const d=A[h];d instanceof Error&&Object.defineProperty(A,h,{enumerable:!0,get:()=>{throw m4(`index ${h}`,d)}})}return Object.freeze(A)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new T4e({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:We.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new M4e({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=at(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new C4e({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const I4e="contracts/5.7.0";var Hu=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{A(n.next(c))}catch(u){a(u)}}function l(c){try{A(n.throw(c))}catch(u){a(u)}}function A(c){c.done?s(c.value):i(c.value).then(o,l)}A((n=n.apply(t,e||[])).next())})};const cn=new be(I4e);function Bb(t,e){return Hu(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&cn.throwArgumentError("invalid address or ENS name","name",r);try{return ri(r)}catch{}t||cn.throwError("a provider or signer is needed to resolve ENS names",be.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&cn.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function jw(t,e,r){return Hu(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>jw(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield Bb(t,e):r.type==="tuple"?yield jw(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>jw(t,n,r.arrayChildren))):Promise.reject(cn.makeError("invalid value for array",be.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function nx(t,e,r){return Hu(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=Or(r.pop())),cn.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=vn({override:Bb(t.signer,n.from),signer:t.signer.getAddress()}).then(A=>Hu(this,void 0,void 0,function*(){return ri(A.signer)!==A.override&&cn.throwError("Contract with a Signer cannot override from",be.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),A.override})):n.from=t.signer.getAddress():n.from&&(n.from=Bb(t.provider,n.from));const i=yield vn({args:jw(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:vn(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),a={data:s,to:i.address},o=i.overrides;if(o.nonce!=null&&(a.nonce=We.from(o.nonce).toNumber()),o.gasLimit!=null&&(a.gasLimit=We.from(o.gasLimit)),o.gasPrice!=null&&(a.gasPrice=We.from(o.gasPrice)),o.maxFeePerGas!=null&&(a.maxFeePerGas=We.from(o.maxFeePerGas)),o.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=We.from(o.maxPriorityFeePerGas)),o.from!=null&&(a.from=o.from),o.type!=null&&(a.type=o.type),o.accessList!=null&&(a.accessList=Gu(o.accessList)),a.gasLimit==null&&e.gas!=null){let A=21e3;const c=ft(s);for(let u=0;u<c.length;u++)A+=4,c[u]&&(A+=64);a.gasLimit=We.from(e.gas).add(A)}if(o.value){const A=We.from(o.value);!A.isZero()&&!e.payable&&cn.throwError("non-payable method cannot override value",be.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),a.value=A}o.customData&&(a.customData=Or(o.customData)),o.ccipReadEnabled&&(a.ccipReadEnabled=!!o.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const l=Object.keys(n).filter(A=>n[A]!=null);return l.length&&cn.throwError(`cannot override ${l.map(A=>JSON.stringify(A)).join(",")}`,be.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),a})}function R4e(t,e){return function(...r){return nx(t,e,r)}}function U4e(t,e){const r=t.signer||t.provider;return function(...n){return Hu(this,void 0,void 0,function*(){r||cn.throwError("estimate require a provider or signer",be.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield nx(t,e,n);return yield r.estimateGas(i)})}}function F4e(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let a=Us(s),o=null;try{o=t.interface.parseLog(s)}catch{}return o&&(a.args=o.args,a.decode=(l,A)=>t.interface.decodeEventLog(o.eventFragment,l,A),a.event=o.name,a.eventSignature=o.signature),a.removeListener=()=>t.provider,a.getBlock=()=>t.provider.getBlock(i.blockHash),a.getTransaction=()=>t.provider.getTransaction(i.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(i),a}),i))}function Y9(t,e,r){const n=t.signer||t.provider;return function(...i){return Hu(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=Or(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}t.deployTransaction!=null&&(yield t._deployed(s));const a=yield nx(t,e,i),o=yield n.call(a,s);try{let l=t.interface.decodeFunctionResult(e,o);return r&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===be.errors.CALL_EXCEPTION&&(l.address=t.address,l.args=i,l.transaction=a),l}})}}function k4e(t,e){return function(...r){return Hu(this,void 0,void 0,function*(){t.signer||cn.throwError("sending a transaction requires a signer",be.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield nx(t,e,r),i=yield t.signer.sendTransaction(n);return F4e(t,i),i})}}function v4(t,e,r){return e.constant?Y9(t,e,r):k4e(t,e)}function X9(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class i0{constructor(e,r){Ue(this,"tag",e),Ue(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class L4e extends i0{constructor(){super("error",null)}}class y4 extends i0{constructor(e,r,n,i){const s={address:e};let a=r.getEventTopic(n);i?(a!==i[0]&&cn.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[a],super(X9(s),s),Ue(this,"address",e),Ue(this,"interface",r),Ue(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=h4e(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class w4 extends i0{constructor(e,r){super("*",{address:e}),Ue(this,"address",e),Ue(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class P4e{constructor(e,r,n){Ue(this,"interface",Ms(new.target,"getInterface")(r)),n==null?(Ue(this,"provider",null),Ue(this,"signer",null)):u0.isSigner(n)?(Ue(this,"provider",n.provider||null),Ue(this,"signer",n)):l0.isProvider(n)?(Ue(this,"provider",n),Ue(this,"signer",null)):cn.throwArgumentError("invalid signer or provider","signerOrProvider",n),Ue(this,"callStatic",{}),Ue(this,"estimateGas",{}),Ue(this,"functions",{}),Ue(this,"populateTransaction",{}),Ue(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(o=>{const l=this.interface.events[o];Ue(this.filters,o,(...A)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,A)})),a[l.name]||(a[l.name]=[]),a[l.name].push(o)}),Object.keys(a).forEach(o=>{const l=a[o];l.length===1?Ue(this.filters,o,this.filters[l[0]]):cn.warn(`Duplicate definition of ${o} (${l.join(", ")})`)})}if(Ue(this,"_runningEvents",{}),Ue(this,"_wrappedEmits",{}),e==null&&cn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),Ue(this,"address",e),this.provider)Ue(this,"resolvedAddress",Bb(this.provider,e));else try{Ue(this,"resolvedAddress",Promise.resolve(ri(e)))}catch{cn.throwError("provider is required to use ENS name as contract address",be.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const i={},s={};Object.keys(this.interface.functions).forEach(a=>{const o=this.interface.functions[a];if(s[a]){cn.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}s[a]=!0;{const l=o.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(a)}this[a]==null&&Ue(this,a,v4(this,o,!0)),this.functions[a]==null&&Ue(this.functions,a,v4(this,o,!1)),this.callStatic[a]==null&&Ue(this.callStatic,a,Y9(this,o,!0)),this.populateTransaction[a]==null&&Ue(this.populateTransaction,a,R4e(this,o)),this.estimateGas[a]==null&&Ue(this.estimateGas,a,U4e(this,o))}),Object.keys(i).forEach(a=>{const o=i[a];if(o.length>1)return;a=a.substring(1);const l=o[0];try{this[a]==null&&Ue(this,a,this[l])}catch{}this.functions[a]==null&&Ue(this.functions,a,this.functions[l]),this.callStatic[a]==null&&Ue(this.callStatic,a,this.callStatic[l]),this.populateTransaction[a]==null&&Ue(this.populateTransaction,a,this.populateTransaction[l]),this.estimateGas[a]==null&&Ue(this.estimateGas,a,this.estimateGas[l])})}static getContractAddress(e){return vQ(e)}static getInterface(e){return g4.isInterface(e)?e:new g4(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&cn.throwError("contract not deployed",be.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||cn.throwError("sending a transactions require a signer",be.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=Or(e||{});return["from","to"].forEach(function(n){r[n]!=null&&cn.throwError("cannot override "+n,be.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new d2(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&Ue(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return VS.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new L4e);if(e==="event")return this._normalizeRunningEvent(new i0("event",null));if(e==="*")return this._normalizeRunningEvent(new w4(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new y4(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new y4(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new i0(X9(r),r))}return this._normalizeRunningEvent(new w4(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=Us(r);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||cn.throwError("events require a provider or a signer with a provider",be.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let a=this._wrapEvent(e,s,r);if(a.decodeError==null)try{const o=e.getEmit(a);this.emit(e.filter,...o)}catch(o){a.decodeError=o.error}e.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=Or(i.filter);return typeof r=="string"&&It(r,32)?(n!=null&&cn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(a=>a.map(o=>this._wrapEvent(i,o,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class ix extends P4e{}const O4e="0x543D43F390b7d681513045e8a85707438c463d80",Mb={owner:"0x634B0510C5062CFf8009eAAc2435eB93bc4764ad",address:"0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",abi:[{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTokens",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mintToken",outputs:[],stateMutability:"payable",type:"function"}]},b4={address:"0x0000000000000aF8FE6E4DE40F4804C90fA8Ea8F",abi:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AddressMismatch",type:"error"},{inputs:[],name:"AlreadyProxied",type:"error"},{inputs:[],name:"ColdAddressCannotBeTheSameAsHot",type:"error"},{inputs:[],name:"ColdIsAddressZero",type:"error"},{inputs:[],name:"ColdWalletCannotInteractUseHot",type:"error"},{inputs:[],name:"DeliveryCannotBeTheZeroAddress",type:"error"},{inputs:[],name:"DeliveryIsAddressZero",type:"error"},{inputs:[],name:"EthWithdrawFailed",type:"error"},{inputs:[],name:"IncorrectProxyRegisterFee",type:"error"},{inputs:[],name:"MigrationIsAllowedOnceOnly",type:"error"},{inputs:[],name:"NoPaymentPendingForAddress",type:"error"},{inputs:[],name:"NoRecordFoundForAddress",type:"error"},{inputs:[],name:"OnlyHotAddressCanChangeAddress",type:"error"},{inputs:[],name:"ProxyRegisterFeeRequired",type:"error"},{inputs:[],name:"RegisterAddressLocked",type:"error"},{inputs:[],name:"RewardRateIsLocked",type:"error"},{inputs:[],name:"UnknownAmount",type:"error"},{inputs:[],name:"UnrecognisedEPSAPIAmount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!0,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"address",name:"oldDelivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"DeliveryUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"ensReverseRegistrarAddress",type:"address"}],name:"ENSReverseRegistrarSet",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"erc20",type:"address"},{indexed:!1,internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"ERC20FeeUpdated",type:"event"},{anonymous:!1,inputs:[],name:"MigrationComplete",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"NominationAccepted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"NominationMade",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"address",name:"delivery",type:"address"},{indexed:!0,internalType:"uint64",name:"provider",type:"uint64"}],name:"ProxyRecordLive",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"enum IEPSProxyRegister.Participant",name:"initiator",type:"uint8"},{indexed:!0,internalType:"address",name:"hot",type:"address"},{indexed:!0,internalType:"address",name:"cold",type:"address"},{indexed:!1,internalType:"uint256",name:"provider",type:"uint256"}],name:"RecordDeleted",type:"event"},{anonymous:!1,inputs:[],name:"RewardRateLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint96",name:"rewardRate",type:"uint96"}],name:"RewardRateUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"newToken",type:"address"}],name:"RewardTokenUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"acceptNomination",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"activeEthAddresses",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"bool",name:"checkingHot_",type:"bool"}],name:"addressIsAvailable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"beneficiaryBalance",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"id_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf1155",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"},{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryBalanceOf20",outputs:[{internalType:"uint256",name:"balance_",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenContract_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"beneficiaryOf",outputs:[{internalType:"address",name:"beneficiary_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"coldIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"coldToHot",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"provider_",type:"uint256"}],name:"deleteRecord",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"deletionNominalEth",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ensReverseRegistrar",outputs:[{internalType:"contract ENSReverseRegistrar",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"epsAPIBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegister",outputs:[{internalType:"contract IERC1155DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc1155DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegister",outputs:[{internalType:"contract IERC20DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc20DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"erc20PerTransactionFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegister",outputs:[{internalType:"contract IERC721DelegateRegister",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"erc721DelegationRegisterAddressLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses1155",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses20",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAddresses721",outputs:[{internalType:"address[]",name:"proxyAddresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"receivedAddress_",type:"address"},{internalType:"uint256",name:"rightsIndex_",type:"uint256"}],name:"getAllAddresses",outputs:[{internalType:"address[]",name:"erc721Addresses_",type:"address[]"},{internalType:"address[]",name:"erc1155Addresses_",type:"address[]"},{internalType:"address[]",name:"erc20Addresses_",type:"address[]"},{internalType:"address",name:"delivery_",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_receivedAddress",type:"address"}],name:"getColdAndDeliveryAddresses",outputs:[{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"bool",name:"isProxied",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"queryAddress_",type:"address"}],name:"getProxyRecordForAddress",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"}],name:"getProxyRecordForCold",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"getProxyRecordForHot",outputs:[{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"},{internalType:"bool",name:"feePaid",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsActiveOnRegister",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"}],name:"hotIsLive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hotToRecord",outputs:[{internalType:"uint64",name:"provider",type:"uint64"},{internalType:"enum IEPSProxyRegister.ProxyStatus",name:"status",type:"uint8"},{internalType:"bool",name:"feePaid",type:"bool"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"hot_",type:"address"},{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"}],name:"isValidAddresses",outputs:[],stateMutability:"pure",type:"function"},{inputs:[],name:"lockERC1155DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC20DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockERC721DelegationRegisterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"lockRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"hot",type:"address"},{internalType:"address",name:"cold",type:"address"},{internalType:"address",name:"delivery",type:"address"}],internalType:"struct EPSRegister.MigratedRecord[]",name:"migratedRecords_",type:"tuple[]"}],name:"migration",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrationComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"cold_",type:"address"},{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint64",name:"provider_",type:"uint64"}],name:"nominate",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"sender_",type:"address"},{internalType:"uint256",name:"erc20Value_",type:"uint256"},{internalType:"bytes",name:"data_",type:"bytes"}],name:"onTokenTransfer",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxyRegisterFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC1155",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC1155",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC721",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"rescueERC721",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rewardRate",outputs:[{internalType:"uint88",name:"",type:"uint88"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardRateLocked",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"rewardToken",outputs:[{internalType:"contract IOAT",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"deleteNominalEth_",type:"uint256"}],name:"setDeletionNominalEth",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"ensName_",type:"string"}],name:"setENSName",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"ensReverseRegistrar_",type:"address"}],name:"setENSReverseRegistrar",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc1155DelegationRegister_",type:"address"}],name:"setERC1155DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20DelegationRegister_",type:"address"}],name:"setERC20DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc20_",type:"address"},{internalType:"uint256",name:"erc20Fee_",type:"uint256"}],name:"setERC20Fee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"erc721DelegationRegister_",type:"address"}],name:"setERC721DelegationRegister",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"count_",type:"uint256"},{internalType:"uint256",name:"air_",type:"uint256"}],name:"setNNumberOfEthAddressesAndAirdropAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"registerFee_",type:"uint256"}],name:"setRegisterFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint88",name:"rewardRate_",type:"uint88"}],name:"setRewardRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"rewardToken_",type:"address"}],name:"setRewardToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"treasuryAddress_",type:"address"}],name:"setTreasuryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasury",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"delivery_",type:"address"},{internalType:"uint256",name:"provider_",type:"uint256"}],name:"updateDeliveryAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"token_",type:"address"},{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount_",type:"uint256"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}]};function Z9(t,e){return function(){return t.apply(e,arguments)}}const{toString:D4e}=Object.prototype,{getPrototypeOf:cU}=Object,sx=(t=>e=>{const r=D4e.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),fo=t=>(t=t.toLowerCase(),e=>sx(e)===t),ax=t=>e=>typeof e===t,{isArray:hp}=Array,s0=ax("undefined");function N4e(t){return t!==null&&!s0(t)&&t.constructor!==null&&!s0(t.constructor)&&Ps(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const J9=fo("ArrayBuffer");function Q4e(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&J9(t.buffer),e}const H4e=ax("string"),Ps=ax("function"),q9=ax("number"),ox=t=>t!==null&&typeof t=="object",j4e=t=>t===!0||t===!1,zw=t=>{if(sx(t)!=="object")return!1;const e=cU(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},z4e=fo("Date"),G4e=fo("File"),V4e=fo("Blob"),W4e=fo("FileList"),K4e=t=>ox(t)&&Ps(t.pipe),Y4e=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ps(t.append)&&((e=sx(t))==="formdata"||e==="object"&&Ps(t.toString)&&t.toString()==="[object FormData]"))},X4e=fo("URLSearchParams"),[Z4e,J4e,q4e,$4e]=["ReadableStream","Request","Response","Headers"].map(fo),eQe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function D0(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),hp(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(n=0;n<a;n++)o=s[n],e.call(null,t[o],o,t)}}function $9(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const pu=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),eV=t=>!s0(t)&&t!==pu;function WS(){const{caseless:t}=eV(this)&&this||{},e={},r=(n,i)=>{const s=t&&$9(e,i)||i;zw(e[s])&&zw(n)?e[s]=WS(e[s],n):zw(n)?e[s]=WS({},n):hp(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&D0(arguments[n],r);return e}const tQe=(t,e,r,{allOwnKeys:n}={})=>(D0(e,(i,s)=>{r&&Ps(i)?t[s]=Z9(i,r):t[s]=i},{allOwnKeys:n}),t),rQe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),nQe=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},iQe=(t,e,r,n)=>{let i,s,a;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&cU(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},sQe=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},aQe=t=>{if(!t)return null;if(hp(t))return t;let e=t.length;if(!q9(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},oQe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&cU(Uint8Array)),lQe=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},AQe=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},cQe=fo("HTMLFormElement"),uQe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,r,n){return r.toUpperCase()+n}),_4=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),hQe=fo("RegExp"),tV=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};D0(r,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(n[s]=a||i)}),Object.defineProperties(t,n)},dQe=t=>{tV(t,(e,r)=>{if(Ps(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Ps(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},fQe=(t,e)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return hp(t)?n(t):n(String(t).split(e)),r},pQe=()=>{},mQe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,bM="abcdefghijklmnopqrstuvwxyz",x4="0123456789",rV={DIGIT:x4,ALPHA:bM,ALPHA_DIGIT:bM+bM.toUpperCase()+x4},gQe=(t=16,e=rV.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function vQe(t){return!!(t&&Ps(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const yQe=t=>{const e=new Array(10),r=(n,i)=>{if(ox(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=hp(n)?[]:{};return D0(n,(a,o)=>{const l=r(a,i+1);!s0(l)&&(s[o]=l)}),e[i]=void 0,s}}return n};return r(t,0)},wQe=fo("AsyncFunction"),bQe=t=>t&&(ox(t)||Ps(t))&&Ps(t.then)&&Ps(t.catch),nV=((t,e)=>t?setImmediate:e?((r,n)=>(pu.addEventListener("message",({source:i,data:s})=>{i===pu&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),pu.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ps(pu.postMessage)),_Qe=typeof queueMicrotask<"u"?queueMicrotask.bind(pu):typeof process<"u"&&process.nextTick||nV,Se={isArray:hp,isArrayBuffer:J9,isBuffer:N4e,isFormData:Y4e,isArrayBufferView:Q4e,isString:H4e,isNumber:q9,isBoolean:j4e,isObject:ox,isPlainObject:zw,isReadableStream:Z4e,isRequest:J4e,isResponse:q4e,isHeaders:$4e,isUndefined:s0,isDate:z4e,isFile:G4e,isBlob:V4e,isRegExp:hQe,isFunction:Ps,isStream:K4e,isURLSearchParams:X4e,isTypedArray:oQe,isFileList:W4e,forEach:D0,merge:WS,extend:tQe,trim:eQe,stripBOM:rQe,inherits:nQe,toFlatObject:iQe,kindOf:sx,kindOfTest:fo,endsWith:sQe,toArray:aQe,forEachEntry:lQe,matchAll:AQe,isHTMLForm:cQe,hasOwnProperty:_4,hasOwnProp:_4,reduceDescriptors:tV,freezeMethods:dQe,toObjectSet:fQe,toCamelCase:uQe,noop:pQe,toFiniteNumber:mQe,findKey:$9,global:pu,isContextDefined:eV,ALPHABET:rV,generateString:gQe,isSpecCompliantForm:vQe,toJSONObject:yQe,isAsyncFn:wQe,isThenable:bQe,setImmediate:nV,asap:_Qe};function _t(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Se.inherits(_t,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.status}}});const iV=_t.prototype,sV={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{sV[t]={value:t}});Object.defineProperties(_t,sV);Object.defineProperty(iV,"isAxiosError",{value:!0});_t.from=(t,e,r,n,i,s)=>{const a=Object.create(iV);return Se.toFlatObject(t,a,function(o){return o!==Error.prototype},o=>o!=="isAxiosError"),_t.call(a,t.message,e,r,n,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const xQe=null;function KS(t){return Se.isPlainObject(t)||Se.isArray(t)}function aV(t){return Se.endsWith(t,"[]")?t.slice(0,-2):t}function E4(t,e,r){return t?t.concat(e).map(function(n,i){return n=aV(n),!r&&i?"["+n+"]":n}).join(r?".":""):e}function EQe(t){return Se.isArray(t)&&!t.some(KS)}const BQe=Se.toFlatObject(Se,{},null,function(t){return/^is[A-Z]/.test(t)});function lx(t,e,r){if(!Se.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Se.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(d,f){return!Se.isUndefined(f[d])});const n=r.metaTokens,i=r.visitor||A,s=r.dots,a=r.indexes,o=(r.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(e);if(!Se.isFunction(i))throw new TypeError("visitor must be a function");function l(d){if(d===null)return"";if(Se.isDate(d))return d.toISOString();if(!o&&Se.isBlob(d))throw new _t("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(d)||Se.isTypedArray(d)?o&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function A(d,f,m){let g=d;if(d&&!m&&typeof d=="object"){if(Se.endsWith(f,"{}"))f=n?f:f.slice(0,-2),d=JSON.stringify(d);else if(Se.isArray(d)&&EQe(d)||(Se.isFileList(d)||Se.endsWith(f,"[]"))&&(g=Se.toArray(d)))return f=aV(f),g.forEach(function(p,v){!(Se.isUndefined(p)||p===null)&&e.append(a===!0?E4([f],v,s):a===null?f:f+"[]",l(p))}),!1}return KS(d)?!0:(e.append(E4(m,f,s),l(d)),!1)}const c=[],u=Object.assign(BQe,{defaultVisitor:A,convertValue:l,isVisitable:KS});function h(d,f){if(!Se.isUndefined(d)){if(c.indexOf(d)!==-1)throw Error("Circular reference detected in "+f.join("."));c.push(d),Se.forEach(d,function(m,g){(!(Se.isUndefined(m)||m===null)&&i.call(e,m,Se.isString(g)?g.trim():g,f,u))===!0&&h(m,f?f.concat(g):[g])}),c.pop()}}if(!Se.isObject(t))throw new TypeError("data must be an object");return h(t),e}function B4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function uU(t,e){this._pairs=[],t&&lx(t,this,e)}const oV=uU.prototype;oV.append=function(t,e){this._pairs.push([t,e])};oV.toString=function(t){const e=t?function(r){return t.call(this,r,B4)}:B4;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function MQe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function lV(t,e,r){if(!e)return t;const n=r&&r.encode||MQe,i=r&&r.serialize;let s;if(i?s=i(e,r):s=Se.isURLSearchParams(e)?e.toString():new uU(e,r).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class TQe{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Se.forEach(this.handlers,function(r){r!==null&&e(r)})}}const M4=TQe,AV={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},CQe=typeof URLSearchParams<"u"?URLSearchParams:uU,SQe=typeof FormData<"u"?FormData:null,IQe=typeof Blob<"u"?Blob:null,RQe={isBrowser:!0,classes:{URLSearchParams:CQe,FormData:SQe,Blob:IQe},protocols:["http","https","file","blob","url","data"]},hU=typeof window<"u"&&typeof document<"u",YS=typeof navigator=="object"&&navigator||void 0,UQe=hU&&(!YS||["ReactNative","NativeScript","NS"].indexOf(YS.product)<0),FQe=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),kQe=hU&&window.location.href||"http://localhost",LQe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hU,hasStandardBrowserEnv:UQe,hasStandardBrowserWebWorkerEnv:FQe,navigator:YS,origin:kQe},Symbol.toStringTag,{value:"Module"})),ss={...LQe,...RQe};function PQe(t,e){return lx(t,new ss.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,s){return ss.isNode&&Se.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function OQe(t){return Se.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function DQe(t){const e={},r=Object.keys(t);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function cV(t){function e(r,n,i,s){let a=r[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=r.length;return a=!a&&Se.isArray(i)?i.length:a,l?(Se.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!o):((!i[a]||!Se.isObject(i[a]))&&(i[a]=[]),e(r,n,i[a],s)&&Se.isArray(i[a])&&(i[a]=DQe(i[a])),!o)}if(Se.isFormData(t)&&Se.isFunction(t.entries)){const r={};return Se.forEachEntry(t,(n,i)=>{e(OQe(n),i,r,0)}),r}return null}function NQe(t,e,r){if(Se.isString(t))try{return(e||JSON.parse)(t),Se.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const dU={transitional:AV,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const r=e.getContentType()||"",n=r.indexOf("application/json")>-1,i=Se.isObject(t);if(i&&Se.isHTMLForm(t)&&(t=new FormData(t)),Se.isFormData(t))return n?JSON.stringify(cV(t)):t;if(Se.isArrayBuffer(t)||Se.isBuffer(t)||Se.isStream(t)||Se.isFile(t)||Se.isBlob(t)||Se.isReadableStream(t))return t;if(Se.isArrayBufferView(t))return t.buffer;if(Se.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return PQe(t,this.formSerializer).toString();if((s=Se.isFileList(t))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return lx(s?{"files[]":t}:t,a&&new a,this.formSerializer)}}return i||n?(e.setContentType("application/json",!1),NQe(t)):t}],transformResponse:[function(t){const e=this.transitional||dU.transitional,r=e&&e.forcedJSONParsing,n=this.responseType==="json";if(Se.isResponse(t)||Se.isReadableStream(t))return t;if(t&&Se.isString(t)&&(r&&!this.responseType||n)){const i=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(s){if(i)throw s.name==="SyntaxError"?_t.from(s,_t.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ss.classes.FormData,Blob:ss.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],t=>{dU.headers[t]={}});const fU=dU,QQe=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HQe=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||e[r]&&QQe[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},T4=Symbol("internals");function dm(t){return t&&String(t).trim().toLowerCase()}function Gw(t){return t===!1||t==null?t:Se.isArray(t)?t.map(Gw):String(t)}function jQe(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const zQe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _M(t,e,r,n,i){if(Se.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!Se.isString(e)){if(Se.isString(n))return e.indexOf(n)!==-1;if(Se.isRegExp(n))return n.test(e)}}function GQe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function VQe(t,e){const r=Se.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}class Ax{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function s(o,l,A){const c=dm(l);if(!c)throw new Error("header name must be a non-empty string");const u=Se.findKey(i,c);(!u||i[u]===void 0||A===!0||A===void 0&&i[u]!==!1)&&(i[u||l]=Gw(o))}const a=(o,l)=>Se.forEach(o,(A,c)=>s(A,c,l));if(Se.isPlainObject(e)||e instanceof this.constructor)a(e,r);else if(Se.isString(e)&&(e=e.trim())&&!zQe(e))a(HQe(e),r);else if(Se.isHeaders(e))for(const[o,l]of e.entries())s(l,o,n);else e!=null&&s(r,e,n);return this}get(e,r){if(e=dm(e),e){const n=Se.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return jQe(i);if(Se.isFunction(r))return r.call(this,i,n);if(Se.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=dm(e),e){const n=Se.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||_M(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function s(a){if(a=dm(a),a){const o=Se.findKey(n,a);o&&(!r||_M(n,n[o],o,r))&&(delete n[o],i=!0)}}return Se.isArray(e)?e.forEach(s):s(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!e||_M(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const r=this,n={};return Se.forEach(this,(i,s)=>{const a=Se.findKey(n,s);if(a){r[a]=Gw(i),delete r[s];return}const o=e?GQe(s):String(s).trim();o!==s&&delete r[s],r[o]=Gw(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Se.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&Se.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const r=(this[T4]=this[T4]={accessors:{}}).accessors,n=this.prototype;function i(s){const a=dm(s);r[a]||(VQe(n,s),r[a]=!0)}return Se.isArray(e)?e.forEach(i):i(e),this}}Ax.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Se.reduceDescriptors(Ax.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Se.freezeMethods(Ax);const io=Ax;function xM(t,e){const r=this||fU,n=e||r,i=io.from(n.headers);let s=n.data;return Se.forEach(t,function(a){s=a.call(r,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function uV(t){return!!(t&&t.__CANCEL__)}function dp(t,e,r){_t.call(this,t??"canceled",_t.ERR_CANCELED,e,r),this.name="CanceledError"}Se.inherits(dp,_t,{__CANCEL__:!0});function hV(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new _t("Request failed with status code "+r.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function WQe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function KQe(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(o){const l=Date.now(),A=n[s];a||(a=l),r[i]=o,n[i]=l;let c=s,u=0;for(;c!==i;)u+=r[c++],c=c%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),l-a<e)return;const h=A&&l-A;return h?Math.round(u*1e3/h):void 0}}function YQe(t,e){let r=0,n=1e3/e,i,s;const a=(o,l=Date.now())=>{r=l,i=null,s&&(clearTimeout(s),s=null),t.apply(null,o)};return[(...o)=>{const l=Date.now(),A=l-r;A>=n?a(o,l):(i=o,s||(s=setTimeout(()=>{s=null,a(i)},n-A)))},()=>i&&a(i)]}const Tb=(t,e,r=3)=>{let n=0;const i=KQe(50,250);return YQe(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-n,A=i(l),c=a<=o;n=a;const u={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:A||void 0,estimated:A&&o&&c?(o-a)/A:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(u)},r)},C4=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},S4=t=>(...e)=>Se.asap(()=>t(...e)),XQe=ss.hasStandardBrowserEnv?function(){const t=ss.navigator&&/(msie|trident)/i.test(ss.navigator.userAgent),e=document.createElement("a");let r;function n(i){let s=i;return t&&(e.setAttribute("href",s),s=e.href),e.setAttribute("href",s),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return r=n(window.location.href),function(i){const s=Se.isString(i)?n(i):i;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}(),ZQe=ss.hasStandardBrowserEnv?{write(t,e,r,n,i,s){const a=[t+"="+encodeURIComponent(e)];Se.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),Se.isString(n)&&a.push("path="+n),Se.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JQe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qQe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function dV(t,e){return t&&!JQe(e)?qQe(t,e):e}const I4=t=>t instanceof io?{...t}:t;function ju(t,e){e=e||{};const r={};function n(A,c,u){return Se.isPlainObject(A)&&Se.isPlainObject(c)?Se.merge.call({caseless:u},A,c):Se.isPlainObject(c)?Se.merge({},c):Se.isArray(c)?c.slice():c}function i(A,c,u){if(Se.isUndefined(c)){if(!Se.isUndefined(A))return n(void 0,A,u)}else return n(A,c,u)}function s(A,c){if(!Se.isUndefined(c))return n(void 0,c)}function a(A,c){if(Se.isUndefined(c)){if(!Se.isUndefined(A))return n(void 0,A)}else return n(void 0,c)}function o(A,c,u){if(u in e)return n(A,c);if(u in t)return n(void 0,A)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(A,c)=>i(I4(A),I4(c),!0)};return Se.forEach(Object.keys(Object.assign({},t,e)),function(A){const c=l[A]||i,u=c(t[A],e[A],A);Se.isUndefined(u)&&c!==o||(r[A]=u)}),r}const fV=t=>{const e=ju({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=e;e.headers=a=io.from(a),e.url=lV(dV(e.baseURL,e.url),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(Se.isFormData(r)){if(ss.hasStandardBrowserEnv||ss.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((l=a.getContentType())!==!1){const[A,...c]=l?l.split(";").map(u=>u.trim()).filter(Boolean):[];a.setContentType([A||"multipart/form-data",...c].join("; "))}}if(ss.hasStandardBrowserEnv&&(n&&Se.isFunction(n)&&(n=n(e)),n||n!==!1&&XQe(e.url))){const A=i&&s&&ZQe.read(s);A&&a.set(i,A)}return e},$Qe=typeof XMLHttpRequest<"u",e5e=$Qe&&function(t){return new Promise(function(e,r){const n=fV(t);let i=n.data;const s=io.from(n.headers).normalize();let{responseType:a,onUploadProgress:o,onDownloadProgress:l}=n,A,c,u,h,d;function f(){h&&h(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(A),n.signal&&n.signal.removeEventListener("abort",A)}let m=new XMLHttpRequest;m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout;function g(){if(!m)return;const v=io.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),y={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:v,config:t,request:m};hV(function(_){e(_),f()},function(_){r(_),f()},y),m=null}"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(g)},m.onabort=function(){m&&(r(new _t("Request aborted",_t.ECONNABORTED,t,m)),m=null)},m.onerror=function(){r(new _t("Network Error",_t.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let v=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const y=n.transitional||AV;n.timeoutErrorMessage&&(v=n.timeoutErrorMessage),r(new _t(v,y.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,t,m)),m=null},i===void 0&&s.setContentType(null),"setRequestHeader"in m&&Se.forEach(s.toJSON(),function(v,y){m.setRequestHeader(y,v)}),Se.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),a&&a!=="json"&&(m.responseType=n.responseType),l&&([u,d]=Tb(l,!0),m.addEventListener("progress",u)),o&&m.upload&&([c,h]=Tb(o),m.upload.addEventListener("progress",c),m.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(A=v=>{m&&(r(!v||v.type?new dp(null,t,m):v),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(A),n.signal&&(n.signal.aborted?A():n.signal.addEventListener("abort",A)));const p=WQe(n.url);if(p&&ss.protocols.indexOf(p)===-1){r(new _t("Unsupported protocol "+p+":",_t.ERR_BAD_REQUEST,t));return}m.send(i||null)})},t5e=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const s=function(A){if(!i){i=!0,o();const c=A instanceof Error?A:this.reason;n.abort(c instanceof _t?c:new dp(c instanceof Error?c.message:c))}};let a=e&&setTimeout(()=>{a=null,s(new _t(`timeout ${e} of ms exceeded`,_t.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(A=>{A.unsubscribe?A.unsubscribe(s):A.removeEventListener("abort",s)}),t=null)};t.forEach(A=>A.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>Se.asap(o),l}},r5e=t5e,n5e=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},i5e=async function*(t,e){for await(const r of s5e(t))yield*n5e(r,e)},s5e=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},R4=(t,e,r,n)=>{const i=i5e(t,e);let s=0,a,o=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:A,value:c}=await i.next();if(A){o(),l.close();return}let u=c.byteLength;if(r){let h=s+=u;r(h)}l.enqueue(new Uint8Array(c))}catch(A){throw o(A),A}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},cx=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pV=cx&&typeof ReadableStream=="function",a5e=cx&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),mV=(t,...e)=>{try{return!!t(...e)}catch{return!1}},o5e=pV&&mV(()=>{let t=!1;const e=new Request(ss.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),U4=64*1024,XS=pV&&mV(()=>Se.isReadableStream(new Response("").body)),Cb={stream:XS&&(t=>t.body)};cx&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Cb[e]&&(Cb[e]=Se.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new _t(`Response type '${e}' is not supported`,_t.ERR_NOT_SUPPORT,n)})})})(new Response);const l5e=async t=>{if(t==null)return 0;if(Se.isBlob(t))return t.size;if(Se.isSpecCompliantForm(t))return(await new Request(ss.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Se.isArrayBufferView(t)||Se.isArrayBuffer(t))return t.byteLength;if(Se.isURLSearchParams(t)&&(t=t+""),Se.isString(t))return(await a5e(t)).byteLength},A5e=async(t,e)=>Se.toFiniteNumber(t.getContentLength())??l5e(e),c5e=cx&&(async t=>{let{url:e,method:r,data:n,signal:i,cancelToken:s,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:A,headers:c,withCredentials:u="same-origin",fetchOptions:h}=fV(t);A=A?(A+"").toLowerCase():"text";let d=r5e([i,s&&s.toAbortSignal()],a),f;const m=d&&d.unsubscribe&&(()=>{d.unsubscribe()});let g;try{if(l&&o5e&&r!=="get"&&r!=="head"&&(g=await A5e(c,n))!==0){let E=new Request(e,{method:"POST",body:n,duplex:"half"}),x;if(Se.isFormData(n)&&(x=E.headers.get("content-type"))&&c.setContentType(x),E.body){const[B,M]=C4(g,Tb(S4(l)));n=R4(E.body,U4,B,M)}}Se.isString(u)||(u=u?"include":"omit");const p="credentials"in Request.prototype;f=new Request(e,{...h,signal:d,method:r.toUpperCase(),headers:c.normalize().toJSON(),body:n,duplex:"half",credentials:p?u:void 0});let v=await fetch(f);const y=XS&&(A==="stream"||A==="response");if(XS&&(o||y&&m)){const E={};["status","statusText","headers"].forEach(R=>{E[R]=v[R]});const x=Se.toFiniteNumber(v.headers.get("content-length")),[B,M]=o&&C4(x,Tb(S4(o),!0))||[];v=new Response(R4(v.body,U4,B,()=>{M&&M(),m&&m()}),E)}A=A||"text";let _=await Cb[Se.findKey(Cb,A)||"text"](v,t);return!y&&m&&m(),await new Promise((E,x)=>{hV(E,x,{data:_,headers:io.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:f})})}catch(p){throw m&&m(),p&&p.name==="TypeError"&&/fetch/i.test(p.message)?Object.assign(new _t("Network Error",_t.ERR_NETWORK,t,f),{cause:p.cause||p}):_t.from(p,p&&p.code,t,f)}}),ZS={http:xQe,xhr:e5e,fetch:c5e};Se.forEach(ZS,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const F4=t=>`- ${t}`,u5e=t=>Se.isFunction(t)||t===null||t===!1,gV={getAdapter:t=>{t=Se.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let s=0;s<e;s++){r=t[s];let a;if(n=r,!u5e(r)&&(n=ZS[(a=String(r)).toLowerCase()],n===void 0))throw new _t(`Unknown adapter '${a}'`);if(n)break;i[a||"#"+s]=n}if(!n){const s=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(F4).join(`
`):" "+F4(s[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:ZS};function EM(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new dp(null,t)}function k4(t){return EM(t),t.headers=io.from(t.headers),t.data=xM.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),gV.getAdapter(t.adapter||fU.adapter)(t).then(function(e){return EM(t),e.data=xM.call(t,t.transformResponse,e),e.headers=io.from(e.headers),e},function(e){return uV(e)||(EM(t),e&&e.response&&(e.response.data=xM.call(t,t.transformResponse,e.response),e.response.headers=io.from(e.response.headers))),Promise.reject(e)})}const vV="1.7.7",pU={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{pU[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const L4={};pU.transitional=function(t,e,r){function n(i,s){return"[Axios v"+vV+"] Transitional option '"+i+"'"+s+(r?". "+r:"")}return(i,s,a)=>{if(t===!1)throw new _t(n(s," has been removed"+(e?" in "+e:"")),_t.ERR_DEPRECATED);return e&&!L4[s]&&(L4[s]=!0,console.warn(n(s," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(i,s,a):!0}};function h5e(t,e,r){if(typeof t!="object")throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new _t("option "+s+" must be "+l,_t.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _t("Unknown option "+s,_t.ERR_BAD_OPTION)}}const JS={assertOptions:h5e,validators:pU},RA=JS.validators;class Sb{constructor(e){this.defaults=e,this.interceptors={request:new M4,response:new M4}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ju(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&JS.assertOptions(n,{silentJSONParsing:RA.transitional(RA.boolean),forcedJSONParsing:RA.transitional(RA.boolean),clarifyTimeoutError:RA.transitional(RA.boolean)},!1),i!=null&&(Se.isFunction(i)?r.paramsSerializer={serialize:i}:JS.assertOptions(i,{encode:RA.function,serialize:RA.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=s&&Se.merge(s.common,s[r.method]);s&&Se.forEach(["delete","get","head","post","put","patch","common"],f=>{delete s[f]}),r.headers=io.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(l=l&&f.synchronous,o.unshift(f.fulfilled,f.rejected))});const A=[];this.interceptors.response.forEach(function(f){A.push(f.fulfilled,f.rejected)});let c,u=0,h;if(!l){const f=[k4.bind(this),void 0];for(f.unshift.apply(f,o),f.push.apply(f,A),h=f.length,c=Promise.resolve(r);u<h;)c=c.then(f[u++],f[u++]);return c}h=o.length;let d=r;for(u=0;u<h;){const f=o[u++],m=o[u++];try{d=f(d)}catch(g){m.call(this,g);break}}try{c=k4.call(this,d)}catch(f){return Promise.reject(f)}for(u=0,h=A.length;u<h;)c=c.then(A[u++],A[u++]);return c}getUri(e){e=ju(this.defaults,e);const r=dV(e.baseURL,e.url);return lV(r,e.params,e.paramsSerializer)}}Se.forEach(["delete","get","head","options"],function(t){Sb.prototype[t]=function(e,r){return this.request(ju(r||{},{method:t,url:e,data:(r||{}).data}))}});Se.forEach(["post","put","patch"],function(t){function e(r){return function(n,i,s){return this.request(ju(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Sb.prototype[t]=e(),Sb.prototype[t+"Form"]=e(!0)});const Vw=Sb;class mU{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(i,s,a){n.reason||(n.reason=new dp(i,s,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new mU(function(r){e=r}),cancel:e}}}const d5e=mU;function f5e(t){return function(e){return t.apply(null,e)}}function p5e(t){return Se.isObject(t)&&t.isAxiosError===!0}const qS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qS).forEach(([t,e])=>{qS[e]=t});const m5e=qS;function yV(t){const e=new Vw(t),r=Z9(Vw.prototype.request,e);return Se.extend(r,Vw.prototype,e,{allOwnKeys:!0}),Se.extend(r,e,null,{allOwnKeys:!0}),r.create=function(n){return yV(ju(t,n))},r}const Mn=yV(fU);Mn.Axios=Vw;Mn.CanceledError=dp;Mn.CancelToken=d5e;Mn.isCancel=uV;Mn.VERSION=vV;Mn.toFormData=lx;Mn.AxiosError=_t;Mn.Cancel=Mn.CanceledError;Mn.all=function(t){return Promise.all(t)};Mn.spread=f5e;Mn.isAxiosError=p5e;Mn.mergeConfig=ju;Mn.AxiosHeaders=io;Mn.formToJSON=t=>cV(Se.isHTMLForm(t)?new FormData(t):t);Mn.getAdapter=gV.getAdapter;Mn.HttpStatusCode=m5e;Mn.default=Mn;const g5e=Mn,v5e={}.VITE_OPENSEA_KEY,y5e={}.VITE_PINATA_API_KEY,w5e={}.VITE_PINATA_API_SECRET,BM="0x89";let Zy;async function b5e(){if(Zy!=null)return Zy;const t=new e5("https://polygon-rpc.com/"),e=await new ix(Mb.address,Mb.abi,t).tokenPrice();return Zy=We.from(e).mul(1),Zy}function _5e(t,e){const r={method:"GET",headers:{accept:"application/json","x-api-key":v5e}};return console.log(r),new Promise((n,i)=>{fetch("https://api.opensea.io/api/v2/chain/ethereum/account/"+t+"/nfts?collection="+e,r).then(s=>{if(s.ok)return s.json();i("Failed to fetch data from Opensea API")}).then(s=>{n(s)}).catch(s=>{i(s)})})}async function gU(){if(window.ethereum)try{const t=await window.ethereum.request({method:"eth_chainId"});if(parseInt(t,16)==parseInt(BM,16)){const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}else try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:BM}]});const e=await window.ethereum.request({method:"eth_requestAccounts"});return e.length>0?e[0]:""}catch(e){console.log("polygon not find:",e);try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",rpcUrls:["https://polygon-rpc.com"],nativeCurrency:{name:"Matic",symbol:"MATIC",decimals:18},blockExplorerUrls:["https://polygonscan.com/"]}]}),await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:BM}]});const r=await window.ethereum.request({method:"eth_requestAccounts"});return r.length>0?r[0]:""}catch(r){console.log("Adding polygon chain failed",r)}}}catch{return""}else return""}async function MM(t,e){if(!t)return console.warn("Error saving to pinata: No file data");const r="https://api.pinata.cloud/pinning/pinFileToIPFS";let n=new FormData;return n.append("file",t,e),(await g5e.post(r,n,{maxContentLength:"Infinity",maxBodyLength:"Infinity",headers:{"Content-Type":`multipart/form-data; boundary=${n._boundary}`,pinata_api_key:y5e,pinata_secret_api_key:w5e}})).data}const x5e=t=>{let e=[];return Object.keys(t).map(r=>{Object.keys(t[r]).length!==0&&e.push({trait_type:r,value:t[r].name})}),e};async function E5e(t,e,r,n,i){if(!t)throw new Error("No avatar was provided");if(!e)throw new Error("No screenshot was provided");if(!r)throw new Error("No model was provided");const s=await gU();if(s=="")return"Please Connect Wallet";if(!i||await B5e(s)){console.log("minting");let a="AvatarImage_"+Date.now()+".png",o=await(async()=>{for(let g=0;g<10;g++)try{return await MM(e,a).catch(p=>{console.error(g,"---",p)})}catch(p){return console.warn(p),p}return"Failed to upload screenshot"})();const l=await E0e(r,t,4096);let A;if(l){let g="AvatarGlb_"+Date.now()+".glb";A=await(async()=>{for(let p=0;p<10;p++)try{return await MM(l,g).catch(v=>(console.error(p,"---",v),"Couldn't save glb to pinata"))}catch(v){return console.warn(v),"Couldn't save glb to pinata"}return"Failed to upload glb"})()}else return"Unable to get glb";const c={name:n||"Avatars",description:"Character Studio Avatars.",image:`ipfs://${o.IpfsHash}`,animation_url:`ipfs://${A.IpfsHash}`,attributes:x5e(t)},u=JSON.stringify(c),h=`ipfs://${(await MM(new Blob([u]),"AvatarMetadata_"+Date.now()+".json")).IpfsHash}`;let d=await b5e();const f=new p2(window.ethereum).getSigner(),m=new ix(Mb.address,Mb.abi,f);try{const g={value:d,from:s};if((await(await m.mintToken(1,h,g)).wait()).transactionHash)return console.log("Mint success!"),"Mint success!"}catch{return"Public Mint failed."}}}const B5e=async t=>{if(t){const e="0x6e58309CD851A5B124E3A56768a42d12f3B6D104",r=dX("mainnet",{alchemy:{}.VITE_ALCHEMY_API_KEY}),n=await new ix(b4.address,b4.abi,r).beneficiaryBalanceOf(e,O4e,1);return parseInt(n)>0?!0:(console.log(`Currently in alpha. You need a genesis pass to mint. 
 Will be public soon!`),!1)}else return console.log("Please connect your wallet"),!1};function M5e(){const{isLoading:t,setViewMode:e,setIsLoading:r}=X.useContext(ls),{manifest:n,characterManager:i,animationManager:s,toggleDebugMode:a,loraDataGenerator:o,spriteAtlasGenerator:l,sceneElements:A}=X.useContext(Yr),[c,u]=_e.useState(null),[h,d]=_e.useState(""),{playSound:f}=X.useContext(Ma),{isMute:m}=X.useContext(Ba);X.useState(null);const[g,p]=X.useState(null),[v,y]=X.useState(""),_=()=>{!m&&f("backNextButton"),i.removeCurrentCharacter(),i.removeCurrentManifest(),a(!1),e(yt.LANDING)},E=()=>{const b=ze.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:kr(ze.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:kr(ze.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:kr(ze.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:kr(ze.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:b===0||b==2,exportMtoonAtlas:b===1||b==2,ktxCompression:ze.merge_options_ktx_compression||!1,twoSidedMaterial:ze.mergeOptions_two_sided_mat||!1}},x=b=>{const S=g[b].manifestName;(async()=>{(ze.mergeOptions_download_vrm_preview==null||ze.mergeOptions_download_vrm_preview)&&i.savePortraitScreenshot(S,512,1024,1.5,-.1),(ze.mergeOptions_download_vrm==null||ze.mergeOptions_download_vrm)&&await i.downloadVRM(S,E());const F=new ep,k=A.parent;k.remove(A);const Q=ze.mergeOptions_download_lora==null?!0:ze.mergeOptions_download_lora;if(Q===!0){const j=n.loras.map(async T=>o.createLoraData(T,F));await Promise.all(j)}const z=ze.mergeOptions_download_sprites==null?!0:ze.mergeOptions_download_sprites;if(z===!0){const j=n.sprites.map(async T=>l.createSpriteAtlas(T,F));await Promise.all(j)}(Q===!0||z===!0)&&F.saveZip(g[b].manifestName),k.add(A),b<g.length-1?(console.log("downloaded "+S),B(b+1)):r(!1)})()},B=async b=>{b==0?(console.log(n.loras[0]),x(b)):(await i.setManifest(g[b]),r(!0),i.loadInitialTraits().then(async()=>{await(S=>new Promise(F=>setTimeout(F,S)))(1),x(b)}))},M=()=>{r(!0),B(0)},{t:R}=_e.useContext(co),I=async b=>{if(i.getCurrentCharacterModel()){const S=Vl(b.name),F=URL.createObjectURL(b);await s.loadAnimation(F,!1,0,!0,"",S),y(s.getCurrentAnimationName()),URL.revokeObjectURL(F)}else console.warn("Please load a vrm model to test animations.")},L=async b=>{const S=URL.createObjectURL(b);await i.loadOptimizerCharacter(S),URL.revokeObjectURL(S);const F=Vl(b.name);d(F),u(i.getCurrentCharacterModel())},D=b=>{const S=Array.from(b),F=[],k=Q=>new Promise((z,j)=>{if(Q&&Q.name.toLowerCase().endsWith(".json")){const T=new FileReader,H=Q.name.replace(/\.[^/.]+$/,"");T.onload=function(me){try{const ee=JSON.parse(me.target.result),U=ee.thumbnail;ee.manifestName=H,F.push(ee),z()}catch(ee){console.error("Error parsing the JSON file:",ee),j(ee)}},T.readAsText(Q)}});Promise.all(S.map(k)).then(()=>{F.length>0&&(p(F),i.setManifest(F[0]),r(!0),i.loadInitialTraits().then(()=>{r(!1)}))}).catch(Q=>{console.error("Error processing files:",Q)})},w=async b=>{const S=b[0];S&&S.name.toLowerCase().endsWith(".fbx")&&I(S),S&&S.name.toLowerCase().endsWith(".vrm")&&L(S),S&&S.name.toLowerCase().endsWith(".json")&&D(b)};return O.jsxs("div",{className:Li.container,children:[O.jsx("div",{className:`loadingIndicator ${t?"active":""}`,children:O.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),O.jsx("div",{className:"sectionTitle",children:"NFT Characters"}),O.jsx(T0,{onFilesDrop:w}),O.jsx(rx,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Download Options"}),O.jsx(lU,{model:c}),O.jsx(mR,{jsonSelectionArray:g,byManifest:!0}),(g==null?void 0:g.length)>0&&O.jsx(N_,{loadedAnimationName:v}),O.jsxs("div",{className:Li.buttonContainer,children:[O.jsx(br,{theme:"light",text:R("callToAction.back"),size:14,className:Li.buttonLeft,onClick:_}),(g==null?void 0:g.length)==1&&O.jsx(br,{theme:"light",text:"Download",size:14,className:Li.buttonRight,onClick:M}),(g==null?void 0:g.length)>1&&O.jsx(br,{theme:"light",text:"Download All",size:14,className:Li.buttonRight,onClick:M})]})]})}const T5e="_classdisabled_hpzv8_1",C5e="_container_hpzv8_6",S5e="_classContainer_hpzv8_14",I5e="_icon_hpzv8_39",R5e="_name_hpzv8_70",U5e="_description_hpzv8_79",F5e="_classFrame_hpzv8_84",k5e="_frameContainer_hpzv8_104",L5e="_frame_hpzv8_104",P5e="_image_hpzv8_114",O5e="_lockedContainer_hpzv8_120",D5e="_locked_hpzv8_120",N5e="_buttonContainer_hpzv8_134",Q5e="_buttonLeft_hpzv8_143",H5e="_buttonRight_hpzv8_147",j5e="_buttonCenter_hpzv8_151",z5e="_topLine_hpzv8_165",G5e="_bottomLine_hpzv8_191",ht={classdisabled:T5e,container:C5e,classContainer:S5e,class:"_class_hpzv8_1",icon:I5e,name:R5e,description:U5e,classFrame:F5e,frameContainer:k5e,frame:L5e,image:P5e,lockedContainer:O5e,locked:D5e,buttonContainer:N5e,buttonLeft:Q5e,buttonRight:H5e,buttonCenter:j5e,topLine:z5e,bottomLine:G5e};function V5e(){const{t}=_e.useContext(co),{setViewMode:e,setIsLoading:r,isLoading:n}=X.useContext(ls),{playSound:i}=X.useContext(Ma),{isMute:s}=X.useContext(Ba),{manifest:a,characterManager:o}=X.useContext(Yr),[l,A]=_e.useState([]);_e.useEffect(()=>{if((a==null?void 0:a.characters)!=null){const f=a.characters.map(m=>({name:m.name,image:m.portrait,description:m.description,manifest:m.manifest,icon:m.icon,format:m.format,disabled:!1}));A(f)}},[a]);const c=()=>{e(yt.LANDING),!s&&i("backNextButton")},u=async f=>{r(!0),o.loadManifest(a.characters[f].manifest).then(()=>{e(yt.BATCHDOWNLOAD),o.loadInitialTraits().then(()=>{r(!1)})}),!s&&i("classSelect")},h=()=>{e(yt.BATCHMANIFEST)},d=()=>{!s&&i("classMouseOver")};return O.jsxs("div",{className:`${ht.container} horizontalScroll`,children:[O.jsx("div",{className:"sectionTitle",children:t("pageTitles.chooseClass")}),O.jsx("div",{className:ht.vrmOptimizerButton}),O.jsx("div",{className:ht.topLine}),O.jsxs("div",{className:ht.classContainer,children:[l.map((f,m)=>O.jsxs("div",{className:f.disabled?ht.classdisabled:ht.class,onClick:f.disabled?null:()=>u(m),onMouseOver:f.disabled?null:()=>d(),children:[O.jsxs("div",{className:ht.classFrame,style:{backgroundImage:`url(${f.image})`},children:[O.jsx("div",{className:ht.frameContainer,children:O.jsx("img",{src:"./public/assets/backgrounds/class-frame.svg",className:ht.frame})}),O.jsx("div",{className:ht.lockedContainer,children:f.disabled&&O.jsx("img",{src:"./public/assets/icons/locked.svg",className:ht.locked})})]}),O.jsx("div",{className:ht.name,children:f.name}),O.jsx("div",{className:ht.description,children:f.description})]},m)),O.jsxs("div",{className:ht.class,onClick:()=>h(),onMouseOver:()=>d(),children:[O.jsx("div",{className:ht.classFrame,style:{backgroundImage:"url(./public/assets/media/disabled.png)"},children:O.jsx("div",{className:ht.frameContainer,children:O.jsx("img",{src:"./public/assets/backgrounds/class-frame.svg",className:ht.frame})})}),O.jsx("div",{className:ht.name,children:"Manifest"}),O.jsx("div",{className:ht.description,children:"Load by manifest"})]},"manifest-load")]}),O.jsx("div",{className:ht.bottomLine}),O.jsx("div",{className:ht.buttonContainer,children:O.jsx(br,{theme:"light",text:t("callToAction.back"),size:14,className:ht.buttonLeft,onClick:c})})]})}function W5e(){const{t}=_e.useContext(co),{setViewMode:e,setIsLoading:r,isLoading:n}=X.useContext(ls),{playSound:i}=X.useContext(Ma),{isMute:s}=X.useContext(Ba),{manifest:a,characterManager:o}=X.useContext(Yr),[l,A]=_e.useState([]);_e.useEffect(()=>{if((a==null?void 0:a.characters)!=null){const d=a.characters.map(f=>({name:f.name,image:f.portrait,description:f.description,manifest:f.manifest,icon:f.icon,format:f.format,disabled:!1}));A(d)}},[a]);const c=()=>{e(yt.LANDING),!s&&i("backNextButton")},u=async d=>{r(!0),o.loadManifest(a.characters[d].manifest).then(()=>{e(yt.APPEARANCE),o.loadInitialTraits().then(()=>{r(!1)})}),!s&&i("classSelect")},h=()=>{!s&&i("classMouseOver")};return O.jsxs("div",{className:`${ht.container} horizontalScroll`,children:[O.jsx("div",{className:"sectionTitle",children:t("pageTitles.chooseClass")}),O.jsx("div",{className:ht.vrmOptimizerButton}),O.jsx("div",{className:ht.topLine}),O.jsx("div",{className:ht.classContainer,children:l.map((d,f)=>O.jsxs("div",{className:d.disabled?ht.classdisabled:ht.class,onClick:d.disabled?null:()=>u(f),onMouseOver:d.disabled?null:()=>h(),children:[O.jsxs("div",{className:ht.classFrame,style:{backgroundImage:`url(${d.image})`},children:[O.jsx("div",{className:ht.frameContainer,children:O.jsx("img",{src:"./public/assets/backgrounds/class-frame.svg",className:ht.frame})}),O.jsx("div",{className:ht.lockedContainer,children:d.disabled&&O.jsx("img",{src:"./public/assets/icons/locked.svg",className:ht.locked})})]}),O.jsx("div",{className:ht.name,children:d.name}),O.jsx("div",{className:ht.description,children:d.description})]},f))}),O.jsx("div",{className:ht.bottomLine}),O.jsx("div",{className:ht.buttonContainer,children:O.jsx(br,{theme:"light",text:t("callToAction.back"),size:14,className:ht.buttonLeft,onClick:c})})]})}const K5e="_buttonContainer_1ueuk_1",Y5e="_button_1ueuk_1",Gh={buttonContainer:K5e,button:Y5e},P4={}.VITE_OPENSEA_KEY;function X5e(){const{setViewMode:t}=X.useContext(ls),{playSound:e}=X.useContext(Ma),{isMute:r}=X.useContext(Ba),{characterManager:n}=X.useContext(Yr),i=()=>{t(yt.CREATE),!r&&e("backNextButton")},s=()=>{t(yt.CLAIM),!r&&e("backNextButton")},a=()=>{t(yt.OPTIMIZER),n.loadOptimizerManifest(),!r&&e("backNextButton")},o=async()=>{await gU()!=""&&t(yt.WALLET),!r&&e("backNextButton")};return O.jsx("div",{className:Gh.container,children:O.jsxs("div",{className:Gh.buttonContainer,children:[O.jsx("button",{className:Gh.button,onClick:i,children:O.jsx("img",{src:"./public/assets/media/btn_create_character.png"})}),O.jsx("button",{className:Gh.button,onClick:s,children:O.jsx("img",{src:"./public/assets/media/btn_batch_download_character.png"})}),O.jsx("button",{className:Gh.button,onClick:a,children:O.jsx("img",{src:"./public/assets/media/btn_optimize_character.png"})}),P4&&P4!=""&&O.jsx("button",{className:Gh.button,onClick:o,children:O.jsx("img",{src:"./public/assets/media/btn_optimize_character.png"})})]})})}const Jc={};var vU={exports:{}},hf=typeof Reflect=="object"?Reflect:null,O4=hf&&typeof hf.apply=="function"?hf.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Ww;hf&&typeof hf.ownKeys=="function"?Ww=hf.ownKeys:Object.getOwnPropertySymbols?Ww=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ww=function(t){return Object.getOwnPropertyNames(t)};function Z5e(t){console&&console.warn&&console.warn(t)}var wV=Number.isNaN||function(t){return t!==t};function dr(){dr.init.call(this)}vU.exports=dr;vU.exports.once=e6e;dr.EventEmitter=dr;dr.prototype._events=void 0;dr.prototype._eventsCount=0;dr.prototype._maxListeners=void 0;var D4=10;function ux(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(dr,"defaultMaxListeners",{enumerable:!0,get:function(){return D4},set:function(t){if(typeof t!="number"||t<0||wV(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");D4=t}});dr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};dr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||wV(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function bV(t){return t._maxListeners===void 0?dr.defaultMaxListeners:t._maxListeners}dr.prototype.getMaxListeners=function(){return bV(this)};dr.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var o=i[t];if(o===void 0)return!1;if(typeof o=="function")O4(o,this,e);else for(var l=o.length,A=MV(o,l),r=0;r<l;++r)O4(A[r],this,e);return!0};function _V(t,e,r,n){var i,s,a;if(ux(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),a===void 0)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=bV(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,Z5e(o)}return t}dr.prototype.addListener=function(t,e){return _V(this,t,e,!1)};dr.prototype.on=dr.prototype.addListener;dr.prototype.prependListener=function(t,e){return _V(this,t,e,!0)};function J5e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xV(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=J5e.bind(n);return i.listener=r,n.wrapFn=i,i}dr.prototype.once=function(t,e){return ux(e),this.on(t,xV(this,t,e)),this};dr.prototype.prependOnceListener=function(t,e){return ux(e),this.prependListener(t,xV(this,t,e)),this};dr.prototype.removeListener=function(t,e){var r,n,i,s,a;if(ux(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){a=r[s].listener,i=s;break}if(i<0)return this;i===0?r.shift():q5e(r,i),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,a||e)}return this};dr.prototype.off=dr.prototype.removeListener;dr.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var i=Object.keys(r),s;for(n=0;n<i.length;++n)s=i[n],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function EV(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?$5e(i):MV(i,i.length)}dr.prototype.listeners=function(t){return EV(this,t,!0)};dr.prototype.rawListeners=function(t){return EV(this,t,!1)};dr.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):BV.call(t,e)};dr.prototype.listenerCount=BV;function BV(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}dr.prototype.eventNames=function(){return this._eventsCount>0?Ww(this._events):[]};function MV(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function q5e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function $5e(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function e6e(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,s),n(a)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}TV(t,e,s,{once:!0}),e!=="error"&&t6e(t,i,{once:!0})})}function t6e(t,e,r){typeof t.on=="function"&&TV(t,"error",e,r)}function TV(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var r6e=vU.exports;function n6e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i6e=function(t){n6e(e,t);function e(n){var i,s=n===void 0?{}:n,a=s.supportedChainIds;return i=t.call(this)||this,i.supportedChainIds=a,i}var r=e.prototype;return r.emitUpdate=function(n){this.emit(Ka.Update,n)},r.emitError=function(n){this.emit(Ka.Error,n)},r.emitDeactivate=function(){this.emit(Ka.Deactivate)},e}(r6e.EventEmitter);function $S(){return $S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$S.apply(this,arguments)}function yU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function e2(t){return e2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e2(t)}function Ib(t,e){return Ib=Object.setPrototypeOf||function(r,n){return r.__proto__=n,r},Ib(t,e)}function s6e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Kw(t,e,r){return s6e()?Kw=Reflect.construct:Kw=function(n,i,s){var a=[null];a.push.apply(a,i);var o=Function.bind.apply(n,a),l=new o;return s&&Ib(l,s.prototype),l},Kw.apply(null,arguments)}function a6e(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Rb(t){var e=typeof Map=="function"?new Map:void 0;return Rb=function(r){if(r===null||!a6e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,n)}function n(){return Kw(r,arguments,e2(this).constructor)}return n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ib(n,r)},Rb(t)}function Jy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function Vh(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}function _o(t){return t.hasOwnProperty("result")?t.result:t}var TM=function(t){yU(e,t);function e(){var r;return r=t.call(this)||this,r.name=r.constructor.name,r.message="No Ethereum provider was found on window.ethereum.",r}return e}(Rb(Error)),o6e=function(t){yU(e,t);function e(){var r;return r=t.call(this)||this,r.name=r.constructor.name,r.message="The user rejected the request.",r}return e}(Rb(Error)),l6e=function(t){yU(e,t);function e(n){var i;return i=t.call(this,n)||this,i.handleNetworkChanged=i.handleNetworkChanged.bind(Jy(i)),i.handleChainChanged=i.handleChainChanged.bind(Jy(i)),i.handleAccountsChanged=i.handleAccountsChanged.bind(Jy(i)),i.handleClose=i.handleClose.bind(Jy(i)),i}var r=e.prototype;return r.handleChainChanged=function(n){this.emitUpdate({chainId:n,provider:window.ethereum})},r.handleAccountsChanged=function(n){n.length===0?this.emitDeactivate():this.emitUpdate({account:n[0]})},r.handleClose=function(n,i){this.emitDeactivate()},r.handleNetworkChanged=function(n){this.emitUpdate({chainId:n,provider:window.ethereum})},r.activate=function(){try{var n=function(l){if(i)return l;function A(){return $S({provider:window.ethereum},a?{account:a}:{})}var c=function(){if(!a)return Promise.resolve(window.ethereum.enable().then(function(u){return u&&_o(u)[0]})).then(function(u){a=u})}();return c&&c.then?c.then(A):A(c)},i=!1,s=this;if(!window.ethereum)throw new TM;window.ethereum.on&&(window.ethereum.on("chainChanged",s.handleChainChanged),window.ethereum.on("accountsChanged",s.handleAccountsChanged),window.ethereum.on("close",s.handleClose),window.ethereum.on("networkChanged",s.handleNetworkChanged)),window.ethereum.isMetaMask&&(window.ethereum.autoRefreshOnNetworkChange=!1);var a,o=Vh(function(){return Promise.resolve(window.ethereum.send("eth_requestAccounts").then(function(l){return _o(l)[0]})).then(function(l){a=l})},function(l){if(l.code===4001)throw new o6e});return Promise.resolve(o&&o.then?o.then(n):n(o))}catch(l){return Promise.reject(l)}},r.getProvider=function(){try{return Promise.resolve(window.ethereum)}catch(n){return Promise.reject(n)}},r.getChainId=function(){try{var n=function(){function a(){if(!i)try{i=_o(window.ethereum.send({method:"net_version"}))}catch{}return i||(window.ethereum.isDapper?i=_o(window.ethereum.cachedResults.net_version):i=window.ethereum.chainId||window.ethereum.netVersion||window.ethereum.networkVersion||window.ethereum._chainId),i}var o=function(){if(!i){var l=Vh(function(){return Promise.resolve(window.ethereum.send("net_version").then(_o)).then(function(A){i=A})},function(){});if(l&&l.then)return l.then(function(){})}}();return o&&o.then?o.then(a):a(o)};if(!window.ethereum)throw new TM;var i,s=Vh(function(){return Promise.resolve(window.ethereum.send("eth_chainId").then(_o)).then(function(a){i=a})},function(){});return Promise.resolve(s&&s.then?s.then(n):n(s))}catch(a){return Promise.reject(a)}},r.getAccount=function(){try{var n=function(){function a(){return i||(i=_o(window.ethereum.send({method:"eth_accounts"}))[0]),i}var o=function(){if(!i){var l=Vh(function(){return Promise.resolve(window.ethereum.enable().then(function(A){return _o(A)[0]})).then(function(A){i=A})},function(){});if(l&&l.then)return l.then(function(){})}}();return o&&o.then?o.then(a):a(o)};if(!window.ethereum)throw new TM;var i,s=Vh(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(a){return _o(a)[0]})).then(function(a){i=a})},function(){});return Promise.resolve(s&&s.then?s.then(n):n(s))}catch(a){return Promise.reject(a)}},r.deactivate=function(){window.ethereum&&window.ethereum.removeListener&&(window.ethereum.removeListener("chainChanged",this.handleChainChanged),window.ethereum.removeListener("accountsChanged",this.handleAccountsChanged),window.ethereum.removeListener("close",this.handleClose),window.ethereum.removeListener("networkChanged",this.handleNetworkChanged))},r.isAuthorized=function(){try{return window.ethereum?Promise.resolve(Vh(function(){return Promise.resolve(window.ethereum.send("eth_accounts").then(function(n){return _o(n).length>0}))},function(){return!1})):Promise.resolve(!1)}catch(n){return Promise.reject(n)}},e}(i6e);function A6e(){const{account:t,library:e,activate:r}=_X(),[n,i]=_e.useState([]),{setViewMode:s}=X.useContext(ls),{playSound:a}=X.useContext(Ma),{isMute:o}=X.useContext(Ba),l=new l6e({supportedChainIds:[137,1,3,4,5,42,97]});_e.useEffect(()=>{if(t&&e){const h="0x69341F01C2113E2d09Cd4837bbF1786dfbBc41d7",d=["function balanceOf(address owner) external view returns (uint256)","function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256)","function tokenURI(uint256 tokenId) external view returns (string)"],f=new ix(h,d,e);f.balanceOf(t).then(m=>{const g=[];for(let p=0;p<m;p++)g.push(f.tokenOfOwnerByIndex(t,p));Promise.all(g).then(p=>{const v=p.map(y=>f.tokenURI(y));Promise.all(v).then(y=>{i(y)})})})}},[t,e]);const A=()=>{r(l)},c=h=>{!o&&a("backNextButton"),s(yt.APPEARANCE)},u=()=>{s(yt.LANDING),!o&&a("backNextButton")};return O.jsxs("div",{className:Jc.container,children:[!t&&O.jsxs("div",{className:Jc.message,children:["Please connect your wallet to load your characters",O.jsx("button",{className:Jc.button,onClick:()=>A(),children:"Connect"})]}),O.jsxs("div",{className:Jc.characterContainer,children:[O.jsx("div",{className:Jc.title,children:"Load Character"}),n.map((h,d)=>O.jsx("div",{className:Jc.character,onClick:()=>{c()},children:JSON.stringify(h)},d))]}),O.jsx("button",{className:Jc.button,onClick:()=>u(),children:"Back"})]})}const c6e="_container_q73cc_1",u6e="_mintContainer_q73cc_6",h6e="_mainTitleWrap_q73cc_33",d6e="_mainTitle_q73cc_33",f6e="_mintButtonContainer_q73cc_49",p6e="_mintButton_q73cc_49",m6e="_genesisText_q73cc_60",g6e="_required_q73cc_64",v6e="_divider_q73cc_68",y6e="_bottomContainer_q73cc_75",w6e="_mintInfo_q73cc_85",b6e="_topLine_q73cc_91",_6e="_bottomLine_q73cc_104",zi={container:c6e,mintContainer:u6e,mainTitleWrap:h6e,mainTitle:d6e,mintButtonContainer:f6e,mintButton:p6e,genesisText:m6e,required:g6e,divider:v6e,bottomContainer:y6e,mintInfo:w6e,topLine:b6e,bottomLine:_6e};function x6e(){const{model:t,avatar:e}=X.useContext(Yr),{setViewMode:r}=X.useContext(ls),{playSound:n}=X.useContext(Ma),{isMute:i}=X.useContext(Ba),[s,a]=X.useState(""),[o,l]=X.useState(!1),A=()=>{r(yt.SAVE),!i&&n("backNextButton")};function c(){return O.jsxs("div",{className:zi.mainTitleWrap,children:[O.jsx("div",{className:zi.topLine}),O.jsx("div",{className:zi.mainTitle,children:"Mint"})]})}async function u(){!i&&n("backNextButton"),l(!0),a("Please check your wallet");const h=await E5e(e,null,t,"XXXRestore");a(h),l(!1),console.log(h)}return O.jsxs("div",{className:zi.container,children:[O.jsx("div",{className:"sectionTitle",children:"Mint Your Character"}),O.jsxs("div",{className:zi.mintContainer,children:[O.jsx(c,{}),O.jsxs("div",{className:zi.mintButtonContainer,children:[O.jsx(br,{size:16,theme:"light",icon:"polygon",text:o?"Minting...":"Open Edition",className:zi.mintButton,disabled:o,onClick:u,minWidth:220}),O.jsx("div",{className:zi.divider}),O.jsx(br,{size:16,theme:"light",icon:"tokens",text:"Genesis Edition",className:zi.mintButton,disabled:!0,minWidth:220}),O.jsxs("span",{className:zi.genesisText,children:["(",O.jsx("span",{className:zi.required,children:"Coming Soon!"}),")"]})]}),O.jsxs("span",{className:zi.mintInfo,children:[s," "]})]}),O.jsx("div",{className:zi.bottomContainer,children:O.jsx(br,{theme:"light",text:"Back",size:14,className:zi.buttonLeft,onClick:A})})]})}function E6e(){const{isLoading:t,setViewMode:e}=X.useContext(ls),{manifest:r,characterManager:n,animationManager:i,sceneElements:s,loraDataGenerator:a,spriteAtlasGenerator:o}=X.useContext(Yr),{playSound:l}=X.useContext(Ma),{isMute:A}=X.useContext(Ba),[c,u]=_e.useState(null),[h,d]=_e.useState(""),[f,m]=_e.useState([]),[g,p]=_e.useState(0),[v,y]=X.useState("T-Pose"),_=()=>{!A&&l("backNextButton"),n.removeCurrentCharacter(),n.removeCurrentManifest(),e(yt.LANDING)},E=()=>{const S=ze.mergeOptions_sel_option||0;return{isVrm0:!0,createTextureAtlas:!0,mToonAtlasSize:kr(ze.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:kr(ze.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:kr(ze.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:kr(ze.mergeOptions_atlas_std_transp_size||6),exportStdAtlas:S===0||S==2,exportMtoonAtlas:S===1||S==2,ktxCompression:ze.merge_options_ktx_compression||!1,twoSidedMaterial:ze.mergeOptions_two_sided_mat||!1}},x=async()=>{for(let S=0;S<f.length;S++)try{await D(f[S]);const F=Vl(f[S].name);await B(F)}catch(F){console.error(`Error processing ${f[S].name}:`,F)}},B=async S=>{typeof S!="string"&&(S=h),await(async()=>{var F;(ze.mergeOptions_download_vrm_preview==null||ze.mergeOptions_download_vrm_preview)&&n.savePortraitScreenshot(S+"_portrait",512,1024,1.5,-.1),(ze.mergeOptions_download_vrm==null||ze.mergeOptions_download_vrm)&&await n.downloadVRM(S+"_merged",E());const k=new ep,Q=s.parent;Q.remove(s),(F=n.getCurrentOptimizerCharacterModel().data)==null||F.isVRM0;const z=ze.mergeOptions_download_lora==null?!0:ze.mergeOptions_download_lora;if(z===!0){const T=r.loras.map(async H=>a.createLoraData(H,k));await Promise.all(T)}const j=ze.mergeOptions_download_sprites==null?!0:ze.mergeOptions_download_sprites;if(j===!0){const T=r.sprites.map(async H=>o.createSpriteAtlas(H,k));await Promise.all(T)}(z===!0||j===!0)&&k.saveZip(S),Q.add(s)})()},{t:M}=_e.useContext(co),R=async S=>{if(n.getCurrentOptimizerCharacterModel()){const F=Vl(S.name),k=URL.createObjectURL(S);await i.loadAnimation(k,!1,0,!0,"",F),y(i.getCurrentAnimationName()),URL.revokeObjectURL(k)}else console.warn("Please load a vrm model to test animations.")},I=()=>{if(g===0)D(f[f.length-1]),p(f.length-1);else{const S=g-1;D(f[S]),p(S)}},L=()=>{if(g>=f.length-1)D(f[0]),p(0);else{const S=g+1;D(f[S]),p(S)}},D=async S=>{const F=URL.createObjectURL(S);await n.loadOptimizerCharacter(F),URL.revokeObjectURL(F);const k=Vl(S.name);d(k),u({...n.getCurrentCharacterModel()})},w=async S=>{D(S[0]);const F=[];for(let k=0;k<S.length;k++){const Q=S[k];Q&&Q.name.toLowerCase().endsWith(".vrm")&&F.push(S[k])}m(F),p(0)},b=async S=>{const F=S[0];F&&F.name.toLowerCase().endsWith(".fbx")&&R(F),F&&F.name.toLowerCase().endsWith(".vrm")&&w(S)};return O.jsxs("div",{className:Li.container,children:[O.jsx("div",{className:`loadingIndicator ${t?"active":""}`,children:O.jsx("img",{className:"rotate",src:"ui/loading.svg"})}),O.jsx("div",{className:"sectionTitle",children:"Optimize your character"}),O.jsx(T0,{onFilesDrop:b}),O.jsx(rx,{showDropToDownload:!0,showCreateAtlas:!1,mergeMenuTitle:"Optimizer Options"}),O.jsx(lU,{model:c,name:h,files:f,index:g,nextVrm:L,previousVrm:I}),O.jsx(N_,{loadedAnimationName:v}),O.jsxs("div",{className:Li.buttonContainer,children:[O.jsx(br,{theme:"light",text:M("callToAction.back"),size:14,className:Li.buttonLeft,onClick:_}),(f==null?void 0:f.length)>1!=""&&O.jsx(br,{theme:"light",text:"Download All",size:14,className:Li.buttonRight,onClick:x}),c!=""&&O.jsx(br,{theme:"light",text:"Download",size:14,className:Li.buttonRight,onClick:B})]})]})}const B6e="_buttonContainer_1fd4o_1",M6e="_buttonLeft_1fd4o_10",T6e="_buttonRight_1fd4o_14",C6e="_buttonCenter_1fd4o_18",qy={buttonContainer:B6e,buttonLeft:M6e,buttonRight:T6e,buttonCenter:C6e},S6e="_button_13dfi_1",N4={button:S6e},I6e="Anon",R6e=()=>{_e.useContext(co);const[t]=X.useState(localStorage.getItem("name")||I6e),{model:e,characterManager:r}=_e.useContext(Yr),n=()=>{const a=ze.mergeOptions_sel_option||0;return{createTextureAtlas:ze.mergeOptions_create_atlas==null?!0:ze.mergeOptions_create_atlas,mToonAtlasSize:kr(ze.mergeOptions_atlas_mtoon_size||6),mToonAtlasSizeTransp:kr(ze.mergeOptions_atlas_mtoon_transp_size||6),stdAtlasSize:kr(ze.mergeOptions_atlas_std_size||6),stdAtlasSizeTransp:kr(ze.mergeOptions_atlas_std_transp_size||6),ktxCompression:ze.merge_options_ktx_compression,exportStdAtlas:a===0||a==2,exportMtoonAtlas:a===1||a==2,twoSidedMaterial:ze.mergeOptions_two_sided_mat||!1}},i=a=>{const o=n();o.isVrm0=Object.values(r.avatar)[0].vrm.meta.metaVersion=="0",o.outputVRM0=a!==1,r.downloadVRM(t,o)},s=()=>{const a=n();r.downloadGLB(t,a)};return O.jsxs(X.Fragment,{children:[O.jsx(br,{theme:"light",text:"GLB",icon:"download",size:14,className:N4.button,onClick:()=>{s()}}),O.jsx(br,{theme:"light",text:"VRM 0",icon:"download",size:14,className:N4.button,onClick:()=>i(0)})]})};function U6e(){const{t}=_e.useContext(co),{playSound:e}=X.useContext(Ma),{isMute:r}=X.useContext(Ba),{setViewMode:n}=X.useContext(ls),i=()=>{n(yt.APPEARANCE),!r&&e("backNextButton")},s=()=>{n(yt.MINT),!r&&e("backNextButton")},a=async o=>{const l=o[0];l&&l.name.toLowerCase().endsWith(".json")};return O.jsxs("div",{className:qy.container,children:[O.jsx("div",{className:"sectionTitle",children:t("pageTitles.saveCharacter")}),O.jsxs("div",{className:qy.buttonContainer,children:[O.jsx(T0,{onFilesDrop:a}),O.jsx(br,{theme:"light",text:t("callToAction.back"),size:14,className:qy.buttonLeft,onClick:i}),O.jsx(rx,{showCreateAtlas:!0,mergeMenuTitle:"Download Options"}),O.jsx(R6e,{}),O.jsx(br,{theme:"light",text:"mint",size:14,className:qy.buttonRight,onClick:s})]})]})}function F6e(){const{t}=_e.useContext(co),{setViewMode:e,setIsLoading:r,isLoading:n}=X.useContext(ls),{playSound:i}=X.useContext(Ma),{isMute:s}=X.useContext(Ba),{manifest:a,characterManager:o}=X.useContext(Yr);_e.useState([]);const[l,A]=_e.useState([]);_e.useEffect(()=>{c()},[]);const c=async()=>{const m=await gU();_5e(m,"the-anata-nft").then(g=>{A(g.nfts),console.log(g.nfts)})},u=()=>{e(yt.LANDING),!s&&i("backNextButton")},h=async m=>{r(!0),o.loadManifest(a[m].manifest).then(()=>{e(yt.APPEARANCE),o.loadInitialTraits().then(()=>{r(!1)})}),!s&&i("classSelect")},d=()=>{console.log("ttt"),o.loadManifest(a[0].manifest).then(()=>{o.loadAppendManifest(a[1].manifest,!0).then(()=>{console.log(o.manifestData)})})},f=()=>{!s&&i("classMouseOver")};return O.jsxs("div",{className:`${ht.container} horizontalScroll`,children:[O.jsx("div",{className:"sectionTitle",children:t("pageTitles.chooseClass")}),O.jsx("div",{className:ht.vrmOptimizerButton}),O.jsx("div",{className:ht.topLine}),O.jsx("div",{className:ht.classContainer,children:l.map((m,g)=>O.jsxs("div",{className:ht.class,onClick:()=>h(g),onMouseOver:()=>f(),children:[O.jsx("div",{className:ht.classFrame,style:{backgroundImage:`url(${m.image_url})`},children:O.jsx("div",{className:ht.frameContainer,children:O.jsx("img",{src:"./public/assets/backgrounds/class-frame.svg",className:ht.frame})})}),O.jsx("div",{className:ht.name,children:m.name})]},g))}),O.jsx("div",{className:ht.bottomLine}),O.jsxs("div",{className:ht.buttonContainer,children:[O.jsx(br,{theme:"light",text:t("callToAction.back"),size:14,className:ht.buttonLeft,onClick:u}),O.jsx(br,{theme:"light",text:"test",size:14,className:ht.buttonLeft,onClick:d})]})]})}const k6e=".//manifest.json",L6e=6,P6e=new Y(0,.8,0);new Y(-2.2367993753934425,1.1512971720174363,2.2612065299409223);async function O6e(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch manifest. Status: ${e.status}`);return await e.json()}catch(e){return console.error(`Error fetching manifest: ${e.message}`),[]}}async function D6e(){const t=await O6e(k6e),e=new awe;return{initialManifest:t,effectManager:e}}const N6e=()=>{let t,e;const r=D6e().then(n=>{t="success",e=n},n=>{t="error",e=n});return{read(){if(t==="error")throw e;if(t==="success")return e;throw r}}},Q6e=N6e();function H6e(){const{initialManifest:t,effectManager:e}=Q6e.read(),[r,n]=_e.useState(!1),{camera:i,controls:s,scene:a,moveCamera:o,setManifest:l,lookAtManager:A,showEnvironmentModels:c}=_e.useContext(Yr),{viewMode:u}=_e.useContext(ls);e.camera=i,e.scene=a;const h=()=>{e.camera&&(o({targetX:0,targetY:P6e.y,targetZ:0,distance:L6e}),s&&([yt.APPEARANCE,yt.SAVE,yt.OPTIMIZER,yt.BATCHDOWNLOAD,yt.BATCHMANIFEST].includes(u)?s.enabled=!0:s.enabled=!1))},[d,f]=_e.useState(!1),[m,g]=_e.useState(""),[p,v]=_e.useState([]),y=(x,B)=>{g(x),f(!0),v([B])},_={[yt.LANDING]:O.jsx(X5e,{}),[yt.APPEARANCE]:O.jsx(TNe,{confirmDialog:y}),[yt.OPTIMIZER]:O.jsx(E6e,{}),[yt.CREATE]:O.jsx(W5e,{}),[yt.WALLET]:O.jsx(F6e,{}),[yt.CLAIM]:O.jsx(V5e,{}),[yt.BATCHMANIFEST]:O.jsx(M5e,{}),[yt.BATCHDOWNLOAD]:O.jsx(a4e,{}),[yt.LOAD]:O.jsx(A6e,{}),[yt.MINT]:O.jsx(x6e,{}),[yt.SAVE]:O.jsx(U6e,{})};let E=0;return _e.useEffect(()=>{const x=B=>{const M=new Date().getTime(),R=M-E;R<300&&R>10&&B.target.id=="editor-scene"&&n(!r),E=M};return window.addEventListener("touchend",x),window.addEventListener("click",x),()=>{window.removeEventListener("touchend",x),window.removeEventListener("click",x)}},[r]),_e.useEffect(()=>{if(A!=null)return h(),A.enabled=!0,[yt.LANDING,yt.CREATE,yt.CLAIM,yt.LOAD,yt.CLAIM,yt.CLAIM].includes(u)?c(!1):c(!0),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}},[u,A]),_e.useEffect(()=>{l(t)},[t]),_e.useContext(co),O.jsxs(_e.Fragment,{children:[O.jsx("div",{className:"generalTitle",children:"Character Studio"}),O.jsx(Ewe,{confirmDialogText:m,confirmDialogCallback:p,confirmDialogWindow:d,setConfirmDialogWindow:f}),O.jsx(Cwe,{}),_[u]]})}const j6e=t=>{const e=new p2(t);return e.pollingInterval=12e3,e};DM.createRoot(document.getElementById("root")).render(O.jsx(X.StrictMode,{children:O.jsx(wX,{getLibrary:j6e,children:O.jsx(RJ,{children:O.jsx(Dye,{children:O.jsx(SJ,{children:O.jsx(fve,{children:O.jsx(hve,{children:O.jsx(Eve,{children:O.jsx(_e.Suspense,{children:O.jsx(H6e,{})})})})})})})})})}));export{Oo as k,iA as o};
